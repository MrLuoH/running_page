const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/run_countries-Wi98UNLF.js","assets/vendors-D3T6pIKm.js","assets/activities-nNprgQmx.js","assets/year_2015-DslSRb3w.js","assets/year_2016-lYfccHkH.js","assets/year_2017-By7IhuMW.js","assets/year_2018-DZs9YxoJ.js","assets/year_2019-CcA8daN3.js","assets/year_2020-B8rNetq2.js","assets/year_2021-BskfnBaw.js","assets/year_2022-DUIpbrAw.js","assets/year_2023-uVkyKtJT.js","assets/year_2024-DObgbCkG.js","assets/year_2025-DRn6oHyR.js","assets/github.svg-Gy3IOtKD.js","assets/grid.svg--u7_1FdK.js","assets/mol.svg-BB4rjPzw.js"])))=>i.map(i=>d[i]);
import{r as a,j as t,L as qe,P as We,H as je,W as ze,p as Ke,e as ye,_ as A,M as Ce,a as Je,b as Xe,S as Re,c as ie,F as Ze,N as Qe,u as et,R as tt,B as nt,C as ct,X as ot,Y as it,T as at,d as st,f as rt,g as lt,h as dt,i as mt,k as pt}from"./vendors-D3T6pIKm.js";import{a as se}from"./activities-nNprgQmx.js";(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const ut=()=>"",ht={siteTitle:"Mr’Luo Running",siteUrl:"https://mrluoh.github.io/2023/11/07/%E9%83%A8%E7%BD%B2running_page-2023",logo:"https://s2.loli.net/2023/10/31/KFm1LUv3JIjTXdk.jpg",description:"Personal site and blog",navLinks:[{name:"Summary",url:`${ut()}/summary`},{name:"Blog",url:"https://mrluoh.github.io"},{name:"About",url:"https://mrluoh.github.io/about"}]},le=()=>ht,vt="pk.eyJ1IjoibHVveGlhbnNoZW5nIiwiYSI6ImNtZnc5MGFqcDA0ZjgybHM2b3F4ejY5b3EifQ.OwL2tKRjqVFp2T16GFI5iQ",yt=["北京市","上海市","天津市","重庆市","香港特别行政区","澳门特别行政区"],ft=.4,gt=window.innerWidth<=768?250:600,_t=!1,Ee=!1,ne=!0,xt=(e,c)=>{const n=c==="Total"?"所有":` ${c} `;return`记录自己跑步 ${e} 年了，下面列表展示的是${n}的数据`},Tt="跑过了一些地方，希望随着时间推移，点亮的地方越来越多",jt="不要停下来，不要停下奔跑的脚步",Et=xt,wt="全程马拉松",Lt="半程马拉松",bt="清晨跑步",St="午间跑步",Ct="午后跑步",Rt="傍晚跑步",kt="夜晚跑步",It="活动次数",Nt="最远距离",Mt="最快速度",At="总时间",Ft="平均速度",Ot="总距离",Dt="平均心率",Pt="Year",$t="Month",Ht="Week",Gt="Day",Bt="首页",z={FULL_MARATHON_RUN_TITLE:wt,HALF_MARATHON_RUN_TITLE:Lt,MORNING_RUN_TITLE:bt,MIDDAY_RUN_TITLE:St,AFTERNOON_RUN_TITLE:Ct,EVENING_RUN_TITLE:Rt,NIGHT_RUN_TITLE:kt},V={ACTIVITY_COUNT_TITLE:It,MAX_DISTANCE_TITLE:Nt,MAX_SPEED_TITLE:Mt,TOTAL_TIME_TITLE:At,AVERAGE_SPEED_TITLE:Ft,TOTAL_DISTANCE_TITLE:Ot,AVERAGE_HEART_RATE_TITLE:Dt,YEARLY_TITLE:Pt,MONTHLY_TITLE:$t,WEEKLY_TITLE:Ht,DAILY_TITLE:Gt},Vt="rgb(224,237,94)",Yt="rgb(228,212,220)",Ut=!1,De=Vt,qt="#47b8e0",Wt=Yt,zt="#47b8e0",ke=De,Kt="#52c41a",Ie="#ff4d4f",Jt=()=>{if(typeof window>"u")return ke;const e=document.documentElement.getAttribute("data-theme"),c=localStorage.getItem("theme");return e==="dark"||!e&&c==="dark"||!e&&!c?ke:zt},Xt=()=>{if(typeof window>"u")return Ie;const e=document.documentElement.getAttribute("data-theme"),c=localStorage.getItem("theme");return e==="dark"||!e&&c==="dark"||!e&&!c?Ie:Kt},Zt="rgb(255,153,51)",Qt="rgb(51,255,87)",Pe="rgb(151,51,255)",en=Pe,tn="rgb(255,51,51)",nn="mapbox",ae="light-v10",K="dark-v10",Ne={maptiler:{"dataviz-light":"https://api.maptiler.com/maps/dataviz/style.json?key=","dataviz-dark":"https://api.maptiler.com/maps/dataviz-dark/style.json?key=","basic-light":"https://api.maptiler.com/maps/basic-v2/style.json?key=","basic-dark":"https://api.maptiler.com/maps/basic-v2-dark/style.json?key=","streets-light":"https://api.maptiler.com/maps/streets-v2/style.json?key=","streets-dark":"https://api.maptiler.com/maps/streets-v2-dark/style.json?key=","outdoor-light":"https://api.maptiler.com/maps/outdoor-v2/style.json?key=","outdoor-dark":"https://api.maptiler.com/maps/outdoor-v2-dark/style.json?key=","bright-light":"https://api.maptiler.com/maps/bright-v2/style.json?key=","bright-dark":"https://api.maptiler.com/maps/bright-v2-dark/style.json?key=","topo-light":"https://api.maptiler.com/maps/topo-v2/style.json?key=","topo-dark":"https://api.maptiler.com/maps/topo-v2-dark/style.json?key=","winter-light":"https://api.maptiler.com/maps/winter-v2/style.json?key=","winter-dark":"https://api.maptiler.com/maps/winter-v2-dark/style.json?key=",hybrid:"https://api.maptiler.com/maps/hybrid/style.json?key="},stadiamaps:{alidade_smooth:"https://tiles.stadiamaps.com/styles/alidade_smooth.json?api_key=",alidade_smooth_dark:"https://tiles.stadiamaps.com/styles/alidade_smooth_dark.json?api_key=",alidade_satellite:"https://tiles.stadiamaps.com/styles/alidade_satellite.json?api_key="},mapbox:{"dark-v10":"mapbox://styles/mapbox/dark-v10","dark-v11":"mapbox://styles/mapbox/dark-v11","light-v10":"mapbox://styles/mapbox/light-v10","light-v11":"mapbox://styles/mapbox/light-v11","navigation-night":"mapbox://styles/mapbox/navigation-night-v1","satellite-streets-v12":"mapbox://styles/mapbox/satellite-streets-v12"},default:"mapbox://styles/mapbox/dark-v10"},oe="theme-change",cn=()=>{const[e,c]=a.useState(()=>{if(typeof window>"u")return K;const i=document.documentElement.getAttribute("data-theme");if(i==="dark")return K;if(i==="light")return ae;const o=localStorage.getItem("theme");return o==="dark"?K:o==="light"?ae:K}),n=a.useCallback(()=>{if(typeof window>"u")return;const i=document.documentElement.getAttribute("data-theme"),o=localStorage.getItem("theme");let s;i==="dark"?s=K:i==="light"?s=ae:!i&&o==="dark"?s=K:!i&&o==="light"?s=ae:s=K,e!==s&&c(s)},[e]);return a.useEffect(()=>{const i=new MutationObserver(s=>{s.forEach(l=>{l.type==="attributes"&&l.attributeName==="data-theme"&&n()})});i.observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]});const o=()=>n();return window.addEventListener(oe,o),window.addEventListener("storage",s=>{s.key==="theme"&&o()}),n(),()=>{i.disconnect(),window.removeEventListener(oe,o),window.removeEventListener("storage",o)}},[n]),e},we=()=>{const[e,c]=a.useState(()=>typeof window>"u"?"dark":localStorage.getItem("theme")||"dark"),n=a.useCallback(i=>{c(i);const o=new CustomEvent(oe,{detail:{theme:i}});window.dispatchEvent(o)},[]);return a.useEffect(()=>{window.document.documentElement.setAttribute("data-theme",e),localStorage.setItem("theme",e)},[e]),{theme:e,setTheme:n}},on=()=>{const[e,c]=a.useState(0);return a.useEffect(()=>{const n=()=>{c(o=>o+1)},i=new MutationObserver(o=>{o.forEach(s=>{s.type==="attributes"&&s.attributeName==="data-theme"&&n()})});return i.observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]}),window.addEventListener(oe,n),window.addEventListener("storage",o=>{o.key==="theme"&&n()}),()=>{i.disconnect(),window.removeEventListener(oe,n),window.removeEventListener("storage",n)}},[]),e},an="_themeButton_k8f68_1",sn="_themeButtonActive_k8f68_17",rn="_iconWrapper_k8f68_21",fe={themeButton:an,themeButtonActive:sn,iconWrapper:rn},ln=()=>{const{logo:e,siteUrl:c,navLinks:n}=le(),{setTheme:i}=we(),[o,s]=a.useState(0),l=[{id:"dark",svg:t.jsx("svg",{width:"22",height:"23",viewBox:"0 0 22 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{d:"M21.7519 15.0137C20.597 15.4956 19.3296 15.7617 18 15.7617C12.6152 15.7617 8.25 11.3965 8.25 6.01171C8.25 4.68211 8.51614 3.41468 8.99806 2.25977C5.47566 3.72957 3 7.20653 3 11.2617C3 16.6465 7.36522 21.0117 12.75 21.0117C16.8052 21.0117 20.2821 18.536 21.7519 15.0137Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})},{id:"light",svg:t.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{d:"M12 3.00464V5.25464M18.364 5.64068L16.773 7.23167M21 12.0046H18.75M18.364 18.3686L16.773 16.7776M12 18.7546V21.0046M7.22703 16.7776L5.63604 18.3686M5.25 12.0046H3M7.22703 7.23167L5.63604 5.64068M15.75 12.0046C15.75 14.0757 14.0711 15.7546 12 15.7546C9.92893 15.7546 8.25 14.0757 8.25 12.0046C8.25 9.93357 9.92893 8.25464 12 8.25464C14.0711 8.25464 15.75 9.93357 15.75 12.0046Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}],f=()=>{const d=(o+1)%l.length;s(d),i(l[d].id)},g=l[o];return t.jsx(t.Fragment,{children:t.jsxs("nav",{className:"mx-auto mt-12 flex w-full min-w-max max-w-screen-2xl items-center justify-between pl-6 lg:px-16",children:[t.jsx("div",{className:"w-1/4",children:t.jsx(qe,{to:c,children:t.jsx("picture",{children:t.jsx("img",{className:"h-16 w-16 rounded-full",alt:"logo",src:e})})})}),t.jsxs("div",{className:"flex w-3/4 items-center justify-end text-right",children:[n.map((d,p)=>t.jsx("a",{href:d.url,className:"mr-3 text-lg lg:mr-4 lg:text-base",children:d.name},p)),t.jsx("div",{className:"ml-4 flex items-center space-x-2",children:t.jsx("button",{type:"button",onClick:f,className:`${fe.themeButton} ${fe.themeButtonActive}`,"aria-label":`Switch to ${g.id} theme`,title:`Switch to ${g.id} theme`,children:t.jsx("div",{className:fe.iconWrapper,children:g.svg})})})]})]})})},Le=({children:e})=>{const{siteTitle:c,description:n}=le();return t.jsxs(t.Fragment,{children:[t.jsxs(je,{children:[t.jsx("html",{lang:"en"}),t.jsx("title",{children:c}),t.jsx("meta",{name:"description",content:n}),t.jsx("meta",{name:"keywords",content:"running"}),t.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1, shrink-to-fit=no"})]}),t.jsx(ln,{}),t.jsx("div",{className:"mx-auto mb-16 max-w-screen-2xl p-4 lg:flex lg:p-16",children:e})]})};Le.propTypes={children:We.node.isRequired};const dn=[{code:"130100",name:"石家庄市",province:"13",city:"01"},{code:"130200",name:"唐山市",province:"13",city:"02"},{code:"130300",name:"秦皇岛市",province:"13",city:"03"},{code:"130400",name:"邯郸市",province:"13",city:"04"},{code:"130500",name:"邢台市",province:"13",city:"05"},{code:"130600",name:"保定市",province:"13",city:"06"},{code:"130700",name:"张家口市",province:"13",city:"07"},{code:"130800",name:"承德市",province:"13",city:"08"},{code:"130900",name:"沧州市",province:"13",city:"09"},{code:"131000",name:"廊坊市",province:"13",city:"10"},{code:"131100",name:"衡水市",province:"13",city:"11"},{code:"140100",name:"太原市",province:"14",city:"01"},{code:"140200",name:"大同市",province:"14",city:"02"},{code:"140300",name:"阳泉市",province:"14",city:"03"},{code:"140400",name:"长治市",province:"14",city:"04"},{code:"140500",name:"晋城市",province:"14",city:"05"},{code:"140600",name:"朔州市",province:"14",city:"06"},{code:"140700",name:"晋中市",province:"14",city:"07"},{code:"140800",name:"运城市",province:"14",city:"08"},{code:"140900",name:"忻州市",province:"14",city:"09"},{code:"141000",name:"临汾市",province:"14",city:"10"},{code:"141100",name:"吕梁市",province:"14",city:"11"},{code:"150100",name:"呼和浩特市",province:"15",city:"01"},{code:"150200",name:"包头市",province:"15",city:"02"},{code:"150300",name:"乌海市",province:"15",city:"03"},{code:"150400",name:"赤峰市",province:"15",city:"04"},{code:"150500",name:"通辽市",province:"15",city:"05"},{code:"150600",name:"鄂尔多斯市",province:"15",city:"06"},{code:"150700",name:"呼伦贝尔市",province:"15",city:"07"},{code:"150800",name:"巴彦淖尔市",province:"15",city:"08"},{code:"150900",name:"乌兰察布市",province:"15",city:"09"},{code:"152200",name:"兴安盟",province:"15",city:"22"},{code:"152500",name:"锡林郭勒盟",province:"15",city:"25"},{code:"152900",name:"阿拉善盟",province:"15",city:"29"},{code:"210100",name:"沈阳市",province:"21",city:"01"},{code:"210200",name:"大连市",province:"21",city:"02"},{code:"210300",name:"鞍山市",province:"21",city:"03"},{code:"210400",name:"抚顺市",province:"21",city:"04"},{code:"210500",name:"本溪市",province:"21",city:"05"},{code:"210600",name:"丹东市",province:"21",city:"06"},{code:"210700",name:"锦州市",province:"21",city:"07"},{code:"210800",name:"营口市",province:"21",city:"08"},{code:"210900",name:"阜新市",province:"21",city:"09"},{code:"211000",name:"辽阳市",province:"21",city:"10"},{code:"211100",name:"盘锦市",province:"21",city:"11"},{code:"211200",name:"铁岭市",province:"21",city:"12"},{code:"211300",name:"朝阳市",province:"21",city:"13"},{code:"211400",name:"葫芦岛市",province:"21",city:"14"},{code:"220100",name:"长春市",province:"22",city:"01"},{code:"220200",name:"吉林市",province:"22",city:"02"},{code:"220300",name:"四平市",province:"22",city:"03"},{code:"220400",name:"辽源市",province:"22",city:"04"},{code:"220500",name:"通化市",province:"22",city:"05"},{code:"220600",name:"白山市",province:"22",city:"06"},{code:"220700",name:"松原市",province:"22",city:"07"},{code:"220800",name:"白城市",province:"22",city:"08"},{code:"222400",name:"延边朝鲜族自治州",province:"22",city:"24"},{code:"230100",name:"哈尔滨市",province:"23",city:"01"},{code:"230200",name:"齐齐哈尔市",province:"23",city:"02"},{code:"230300",name:"鸡西市",province:"23",city:"03"},{code:"230400",name:"鹤岗市",province:"23",city:"04"},{code:"230500",name:"双鸭山市",province:"23",city:"05"},{code:"230600",name:"大庆市",province:"23",city:"06"},{code:"230700",name:"伊春市",province:"23",city:"07"},{code:"230800",name:"佳木斯市",province:"23",city:"08"},{code:"230900",name:"七台河市",province:"23",city:"09"},{code:"231000",name:"牡丹江市",province:"23",city:"10"},{code:"231100",name:"黑河市",province:"23",city:"11"},{code:"231200",name:"绥化市",province:"23",city:"12"},{code:"232700",name:"大兴安岭地区",province:"23",city:"27"},{code:"320100",name:"南京市",province:"32",city:"01"},{code:"320200",name:"无锡市",province:"32",city:"02"},{code:"320300",name:"徐州市",province:"32",city:"03"},{code:"320400",name:"常州市",province:"32",city:"04"},{code:"320500",name:"苏州市",province:"32",city:"05"},{code:"320600",name:"南通市",province:"32",city:"06"},{code:"320700",name:"连云港市",province:"32",city:"07"},{code:"320800",name:"淮安市",province:"32",city:"08"},{code:"320900",name:"盐城市",province:"32",city:"09"},{code:"321000",name:"扬州市",province:"32",city:"10"},{code:"321100",name:"镇江市",province:"32",city:"11"},{code:"321200",name:"泰州市",province:"32",city:"12"},{code:"321300",name:"宿迁市",province:"32",city:"13"},{code:"330100",name:"杭州市",province:"33",city:"01"},{code:"330200",name:"宁波市",province:"33",city:"02"},{code:"330300",name:"温州市",province:"33",city:"03"},{code:"330400",name:"嘉兴市",province:"33",city:"04"},{code:"330500",name:"湖州市",province:"33",city:"05"},{code:"330600",name:"绍兴市",province:"33",city:"06"},{code:"330700",name:"金华市",province:"33",city:"07"},{code:"330800",name:"衢州市",province:"33",city:"08"},{code:"330900",name:"舟山市",province:"33",city:"09"},{code:"331000",name:"台州市",province:"33",city:"10"},{code:"331100",name:"丽水市",province:"33",city:"11"},{code:"340100",name:"合肥市",province:"34",city:"01"},{code:"340200",name:"芜湖市",province:"34",city:"02"},{code:"340300",name:"蚌埠市",province:"34",city:"03"},{code:"340400",name:"淮南市",province:"34",city:"04"},{code:"340500",name:"马鞍山市",province:"34",city:"05"},{code:"340600",name:"淮北市",province:"34",city:"06"},{code:"340700",name:"铜陵市",province:"34",city:"07"},{code:"340800",name:"安庆市",province:"34",city:"08"},{code:"341000",name:"黄山市",province:"34",city:"10"},{code:"341100",name:"滁州市",province:"34",city:"11"},{code:"341200",name:"阜阳市",province:"34",city:"12"},{code:"341300",name:"宿州市",province:"34",city:"13"},{code:"341500",name:"六安市",province:"34",city:"15"},{code:"341600",name:"亳州市",province:"34",city:"16"},{code:"341700",name:"池州市",province:"34",city:"17"},{code:"341800",name:"宣城市",province:"34",city:"18"},{code:"350100",name:"福州市",province:"35",city:"01"},{code:"350200",name:"厦门市",province:"35",city:"02"},{code:"350300",name:"莆田市",province:"35",city:"03"},{code:"350400",name:"三明市",province:"35",city:"04"},{code:"350500",name:"泉州市",province:"35",city:"05"},{code:"350600",name:"漳州市",province:"35",city:"06"},{code:"350700",name:"南平市",province:"35",city:"07"},{code:"350800",name:"龙岩市",province:"35",city:"08"},{code:"350900",name:"宁德市",province:"35",city:"09"},{code:"360100",name:"南昌市",province:"36",city:"01"},{code:"360200",name:"景德镇市",province:"36",city:"02"},{code:"360300",name:"萍乡市",province:"36",city:"03"},{code:"360400",name:"九江市",province:"36",city:"04"},{code:"360500",name:"新余市",province:"36",city:"05"},{code:"360600",name:"鹰潭市",province:"36",city:"06"},{code:"360700",name:"赣州市",province:"36",city:"07"},{code:"360800",name:"吉安市",province:"36",city:"08"},{code:"360900",name:"宜春市",province:"36",city:"09"},{code:"361000",name:"抚州市",province:"36",city:"10"},{code:"361100",name:"上饶市",province:"36",city:"11"},{code:"370100",name:"济南市",province:"37",city:"01"},{code:"370200",name:"青岛市",province:"37",city:"02"},{code:"370300",name:"淄博市",province:"37",city:"03"},{code:"370400",name:"枣庄市",province:"37",city:"04"},{code:"370500",name:"东营市",province:"37",city:"05"},{code:"370600",name:"烟台市",province:"37",city:"06"},{code:"370700",name:"潍坊市",province:"37",city:"07"},{code:"370800",name:"济宁市",province:"37",city:"08"},{code:"370900",name:"泰安市",province:"37",city:"09"},{code:"371000",name:"威海市",province:"37",city:"10"},{code:"371100",name:"日照市",province:"37",city:"11"},{code:"371300",name:"临沂市",province:"37",city:"13"},{code:"371400",name:"德州市",province:"37",city:"14"},{code:"371500",name:"聊城市",province:"37",city:"15"},{code:"371600",name:"滨州市",province:"37",city:"16"},{code:"371700",name:"菏泽市",province:"37",city:"17"},{code:"410100",name:"郑州市",province:"41",city:"01"},{code:"410200",name:"开封市",province:"41",city:"02"},{code:"410300",name:"洛阳市",province:"41",city:"03"},{code:"410400",name:"平顶山市",province:"41",city:"04"},{code:"410500",name:"安阳市",province:"41",city:"05"},{code:"410600",name:"鹤壁市",province:"41",city:"06"},{code:"410700",name:"新乡市",province:"41",city:"07"},{code:"410800",name:"焦作市",province:"41",city:"08"},{code:"410900",name:"濮阳市",province:"41",city:"09"},{code:"411000",name:"许昌市",province:"41",city:"10"},{code:"411100",name:"漯河市",province:"41",city:"11"},{code:"411200",name:"三门峡市",province:"41",city:"12"},{code:"411300",name:"南阳市",province:"41",city:"13"},{code:"411400",name:"商丘市",province:"41",city:"14"},{code:"411500",name:"信阳市",province:"41",city:"15"},{code:"411600",name:"周口市",province:"41",city:"16"},{code:"411700",name:"驻马店市",province:"41",city:"17"},{code:"420100",name:"武汉市",province:"42",city:"01"},{code:"420200",name:"黄石市",province:"42",city:"02"},{code:"420300",name:"十堰市",province:"42",city:"03"},{code:"420500",name:"宜昌市",province:"42",city:"05"},{code:"420600",name:"襄阳市",province:"42",city:"06"},{code:"420700",name:"鄂州市",province:"42",city:"07"},{code:"420800",name:"荆门市",province:"42",city:"08"},{code:"420900",name:"孝感市",province:"42",city:"09"},{code:"421000",name:"荆州市",province:"42",city:"10"},{code:"421100",name:"黄冈市",province:"42",city:"11"},{code:"421200",name:"咸宁市",province:"42",city:"12"},{code:"421300",name:"随州市",province:"42",city:"13"},{code:"422800",name:"恩施土家族苗族自治州",province:"42",city:"28"},{code:"430100",name:"长沙市",province:"43",city:"01"},{code:"430200",name:"株洲市",province:"43",city:"02"},{code:"430300",name:"湘潭市",province:"43",city:"03"},{code:"430400",name:"衡阳市",province:"43",city:"04"},{code:"430500",name:"邵阳市",province:"43",city:"05"},{code:"430600",name:"岳阳市",province:"43",city:"06"},{code:"430700",name:"常德市",province:"43",city:"07"},{code:"430800",name:"张家界市",province:"43",city:"08"},{code:"430900",name:"益阳市",province:"43",city:"09"},{code:"431000",name:"郴州市",province:"43",city:"10"},{code:"431100",name:"永州市",province:"43",city:"11"},{code:"431200",name:"怀化市",province:"43",city:"12"},{code:"431300",name:"娄底市",province:"43",city:"13"},{code:"433100",name:"湘西土家族苗族自治州",province:"43",city:"31"},{code:"440100",name:"广州市",province:"44",city:"01"},{code:"440200",name:"韶关市",province:"44",city:"02"},{code:"440300",name:"深圳市",province:"44",city:"03"},{code:"440400",name:"珠海市",province:"44",city:"04"},{code:"440500",name:"汕头市",province:"44",city:"05"},{code:"440600",name:"佛山市",province:"44",city:"06"},{code:"440700",name:"江门市",province:"44",city:"07"},{code:"440800",name:"湛江市",province:"44",city:"08"},{code:"440900",name:"茂名市",province:"44",city:"09"},{code:"441200",name:"肇庆市",province:"44",city:"12"},{code:"441300",name:"惠州市",province:"44",city:"13"},{code:"441400",name:"梅州市",province:"44",city:"14"},{code:"441500",name:"汕尾市",province:"44",city:"15"},{code:"441600",name:"河源市",province:"44",city:"16"},{code:"441700",name:"阳江市",province:"44",city:"17"},{code:"441800",name:"清远市",province:"44",city:"18"},{code:"441900",name:"东莞市",province:"44",city:"19"},{code:"442000",name:"中山市",province:"44",city:"20"},{code:"445100",name:"潮州市",province:"44",city:"51"},{code:"445200",name:"揭阳市",province:"44",city:"52"},{code:"445300",name:"云浮市",province:"44",city:"53"},{code:"450100",name:"南宁市",province:"45",city:"01"},{code:"450200",name:"柳州市",province:"45",city:"02"},{code:"450300",name:"桂林市",province:"45",city:"03"},{code:"450400",name:"梧州市",province:"45",city:"04"},{code:"450500",name:"北海市",province:"45",city:"05"},{code:"450600",name:"防城港市",province:"45",city:"06"},{code:"450700",name:"钦州市",province:"45",city:"07"},{code:"450800",name:"贵港市",province:"45",city:"08"},{code:"450900",name:"玉林市",province:"45",city:"09"},{code:"451000",name:"百色市",province:"45",city:"10"},{code:"451100",name:"贺州市",province:"45",city:"11"},{code:"451200",name:"河池市",province:"45",city:"12"},{code:"451300",name:"来宾市",province:"45",city:"13"},{code:"451400",name:"崇左市",province:"45",city:"14"},{code:"460100",name:"海口市",province:"46",city:"01"},{code:"460200",name:"三亚市",province:"46",city:"02"},{code:"460300",name:"三沙市",province:"46",city:"03"},{code:"460400",name:"儋州市",province:"46",city:"04"},{code:"510100",name:"成都市",province:"51",city:"01"},{code:"510300",name:"自贡市",province:"51",city:"03"},{code:"510400",name:"攀枝花市",province:"51",city:"04"},{code:"510500",name:"泸州市",province:"51",city:"05"},{code:"510600",name:"德阳市",province:"51",city:"06"},{code:"510700",name:"绵阳市",province:"51",city:"07"},{code:"510800",name:"广元市",province:"51",city:"08"},{code:"510900",name:"遂宁市",province:"51",city:"09"},{code:"511000",name:"内江市",province:"51",city:"10"},{code:"511100",name:"乐山市",province:"51",city:"11"},{code:"511300",name:"南充市",province:"51",city:"13"},{code:"511400",name:"眉山市",province:"51",city:"14"},{code:"511500",name:"宜宾市",province:"51",city:"15"},{code:"511600",name:"广安市",province:"51",city:"16"},{code:"511700",name:"达州市",province:"51",city:"17"},{code:"511800",name:"雅安市",province:"51",city:"18"},{code:"511900",name:"巴中市",province:"51",city:"19"},{code:"512000",name:"资阳市",province:"51",city:"20"},{code:"513200",name:"阿坝藏族羌族自治州",province:"51",city:"32"},{code:"513300",name:"甘孜藏族自治州",province:"51",city:"33"},{code:"513400",name:"凉山彝族自治州",province:"51",city:"34"},{code:"520100",name:"贵阳市",province:"52",city:"01"},{code:"520200",name:"六盘水市",province:"52",city:"02"},{code:"520300",name:"遵义市",province:"52",city:"03"},{code:"520400",name:"安顺市",province:"52",city:"04"},{code:"520500",name:"毕节市",province:"52",city:"05"},{code:"520600",name:"铜仁市",province:"52",city:"06"},{code:"522300",name:"黔西南布依族苗族自治州",province:"52",city:"23"},{code:"522600",name:"黔东南苗族侗族自治州",province:"52",city:"26"},{code:"522700",name:"黔南布依族苗族自治州",province:"52",city:"27"},{code:"530100",name:"昆明市",province:"53",city:"01"},{code:"530300",name:"曲靖市",province:"53",city:"03"},{code:"530400",name:"玉溪市",province:"53",city:"04"},{code:"530500",name:"保山市",province:"53",city:"05"},{code:"530600",name:"昭通市",province:"53",city:"06"},{code:"530700",name:"丽江市",province:"53",city:"07"},{code:"530800",name:"普洱市",province:"53",city:"08"},{code:"530900",name:"临沧市",province:"53",city:"09"},{code:"532300",name:"楚雄彝族自治州",province:"53",city:"23"},{code:"532500",name:"红河哈尼族彝族自治州",province:"53",city:"25"},{code:"532600",name:"文山壮族苗族自治州",province:"53",city:"26"},{code:"532800",name:"西双版纳傣族自治州",province:"53",city:"28"},{code:"532900",name:"大理白族自治州",province:"53",city:"29"},{code:"533100",name:"德宏傣族景颇族自治州",province:"53",city:"31"},{code:"533300",name:"怒江傈僳族自治州",province:"53",city:"33"},{code:"533400",name:"迪庆藏族自治州",province:"53",city:"34"},{code:"540100",name:"拉萨市",province:"54",city:"01"},{code:"540200",name:"日喀则市",province:"54",city:"02"},{code:"540300",name:"昌都市",province:"54",city:"03"},{code:"540400",name:"林芝市",province:"54",city:"04"},{code:"540500",name:"山南市",province:"54",city:"05"},{code:"540600",name:"那曲市",province:"54",city:"06"},{code:"542500",name:"阿里地区",province:"54",city:"25"},{code:"610100",name:"西安市",province:"61",city:"01"},{code:"610200",name:"铜川市",province:"61",city:"02"},{code:"610300",name:"宝鸡市",province:"61",city:"03"},{code:"610400",name:"咸阳市",province:"61",city:"04"},{code:"610500",name:"渭南市",province:"61",city:"05"},{code:"610600",name:"延安市",province:"61",city:"06"},{code:"610700",name:"汉中市",province:"61",city:"07"},{code:"610800",name:"榆林市",province:"61",city:"08"},{code:"610900",name:"安康市",province:"61",city:"09"},{code:"611000",name:"商洛市",province:"61",city:"10"},{code:"620100",name:"兰州市",province:"62",city:"01"},{code:"620200",name:"嘉峪关市",province:"62",city:"02"},{code:"620300",name:"金昌市",province:"62",city:"03"},{code:"620400",name:"白银市",province:"62",city:"04"},{code:"620500",name:"天水市",province:"62",city:"05"},{code:"620600",name:"武威市",province:"62",city:"06"},{code:"620700",name:"张掖市",province:"62",city:"07"},{code:"620800",name:"平凉市",province:"62",city:"08"},{code:"620900",name:"酒泉市",province:"62",city:"09"},{code:"621000",name:"庆阳市",province:"62",city:"10"},{code:"621100",name:"定西市",province:"62",city:"11"},{code:"621200",name:"陇南市",province:"62",city:"12"},{code:"622900",name:"临夏回族自治州",province:"62",city:"29"},{code:"623000",name:"甘南藏族自治州",province:"62",city:"30"},{code:"630100",name:"西宁市",province:"63",city:"01"},{code:"630200",name:"海东市",province:"63",city:"02"},{code:"632200",name:"海北藏族自治州",province:"63",city:"22"},{code:"632300",name:"黄南藏族自治州",province:"63",city:"23"},{code:"632500",name:"海南藏族自治州",province:"63",city:"25"},{code:"632600",name:"果洛藏族自治州",province:"63",city:"26"},{code:"632700",name:"玉树藏族自治州",province:"63",city:"27"},{code:"632800",name:"海西蒙古族藏族自治州",province:"63",city:"28"},{code:"640100",name:"银川市",province:"64",city:"01"},{code:"640200",name:"石嘴山市",province:"64",city:"02"},{code:"640300",name:"吴忠市",province:"64",city:"03"},{code:"640400",name:"固原市",province:"64",city:"04"},{code:"640500",name:"中卫市",province:"64",city:"05"},{code:"650100",name:"乌鲁木齐市",province:"65",city:"01"},{code:"650200",name:"克拉玛依市",province:"65",city:"02"},{code:"650400",name:"吐鲁番市",province:"65",city:"04"},{code:"650500",name:"哈密市",province:"65",city:"05"},{code:"652300",name:"昌吉回族自治州",province:"65",city:"23"},{code:"652700",name:"博尔塔拉蒙古自治州",province:"65",city:"27"},{code:"652800",name:"巴音郭楞蒙古自治州",province:"65",city:"28"},{code:"652900",name:"阿克苏地区",province:"65",city:"29"},{code:"653000",name:"克孜勒苏柯尔克孜自治州",province:"65",city:"30"},{code:"653100",name:"喀什地区",province:"65",city:"31"},{code:"653200",name:"和田地区",province:"65",city:"32"},{code:"654000",name:"伊犁哈萨克自治州",province:"65",city:"40"},{code:"654200",name:"塔城地区",province:"65",city:"42"},{code:"654300",name:"阿勒泰地区",province:"65",city:"43"},{code:"429000",name:"湖北省 - 自治区直辖县级行政区划",province:"42",city:"90"},{code:"469000",name:"海南省 - 自治区直辖县级行政区划",province:"46",city:"90"},{code:"659000",name:"新疆维吾尔自治区 - 自治区直辖县级行政区划",province:"65",city:"90"},{code:"419000",name:"河南省 - 省直辖县级行政区划",province:"41",city:"90"},{code:"110000",name:"北京市",province:"11"},{code:"120000",name:"天津市",province:"12"},{code:"130000",name:"河北省",province:"13"},{code:"140000",name:"山西省",province:"14"},{code:"150000",name:"内蒙古自治区",province:"15"},{code:"210000",name:"辽宁省",province:"21"},{code:"220000",name:"吉林省",province:"22"},{code:"230000",name:"黑龙江省",province:"23"},{code:"310000",name:"上海市",province:"31"},{code:"320000",name:"江苏省",province:"32"},{code:"330000",name:"浙江省",province:"33"},{code:"340000",name:"安徽省",province:"34"},{code:"350000",name:"福建省",province:"35"},{code:"360000",name:"江西省",province:"36"},{code:"370000",name:"山东省",province:"37"},{code:"410000",name:"河南省",province:"41"},{code:"420000",name:"湖北省",province:"42"},{code:"430000",name:"湖南省",province:"43"},{code:"440000",name:"广东省",province:"44"},{code:"450000",name:"广西壮族自治区",province:"45"},{code:"460000",name:"海南省",province:"46"},{code:"500000",name:"重庆市",province:"50"},{code:"510000",name:"四川省",province:"51"},{code:"520000",name:"贵州省",province:"52"},{code:"530000",name:"云南省",province:"53"},{code:"540000",name:"西藏自治区",province:"54"},{code:"610000",name:"陕西省",province:"61"},{code:"620000",name:"甘肃省",province:"62"},{code:"630000",name:"青海省",province:"63"},{code:"640000",name:"宁夏回族自治区",province:"64"},{code:"650000",name:"新疆维吾尔自治区",province:"65"},{code:"710000",name:"台湾省",province:"71"},{code:"810000",name:"香港特别行政区",province:"81"},{code:"820000",name:"澳门特别行政区",province:"82"}],mn=e=>{const c=e.start_date_local.slice(0,11),n=(e.distance/1e3).toFixed(2);let i="Run";return e.name.slice(0,7)==="Running"&&(i="run"),e.name&&(i=e.name),`${i} ${c} ${n} KM ${e.summary_polyline?"":"(No map data for this run)"}`},$e=e=>{if(Number.isNaN(e))return"0";const c=1e3/60*(1/e),n=Math.floor(c),i=Math.floor((c-n)*60);return`${n}'${i.toFixed(0).toString().padStart(2,"0")}"`},Te=e=>{if(!e)return 0;const c=e.split(", "),n=c.length==2?parseInt(c[0]):0,i=c.splice(-1)[0],[o,s,l]=i.split(":").map(Number);return((n*24+o)*60+s)*60+l},pn=e=>{const c=Te(e),n=c%60,i=(c-n)/60;return i===0?n+"s":i+"min"},Me=()=>{const e=document.getElementById("map-container");e&&e.scrollIntoView({behavior:"smooth",block:"start"})},un=e=>{const c=[];let n;const i=/([\u4e00-\u9fa5]{2,}(市|自治州|特别行政区|盟|地区))/g;for(;(n=i.exec(e))!==null;)c.push(n[0]);return c},hn=e=>{const c=[];let n;const i=/([\u4e00-\u9fa5]{2,}(区|县))/g;for(;(n=i.exec(e))!==null;)c.push(n[0]);return c},vn=e=>{const c=/'latitude': ([-]?\d+\.\d+).*?'longitude': ([-]?\d+\.\d+)/,n=e.match(c);if(n){const i=parseFloat(n[1]);return[parseFloat(n[2]),i]}return null},yn=dn.map(e=>e.name),ge=new Map,He=e=>{if(ge.has(e.run_id))return ge.get(e.run_id);let c=e.location_country,[n,i,o]=["","",""],s=null;if(c){const f=un(c),g=c.match(/[\u4e00-\u9fa5]{2,}(省|自治区)/);f&&(n=yn.find(E=>f.includes(E)),n||(n="")),g&&([i]=g,s=vn(c));const d=c.split(",");let p=d[d.length-1].match(/[\u4e00-\u9fa5].*[\u4e00-\u9fa5]/);!p&&d.length>=3&&(p=d[2].match(/[\u4e00-\u9fa5].*[\u4e00-\u9fa5]/)),p&&([o]=p)}if(yt.includes(n)&&(i=n,c)){const f=hn(c);f.length>0&&(n=f[f.length-1])}const l={country:o,province:i,city:n,coordinate:s};return ge.set(e.run_id,l),l},fn=(e="")=>e.toString().length<=5?e:e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),Ge=e=>{try{if(!e.summary_polyline)return[];const c=Ke.decode(e.summary_polyline);if(c.forEach(n=>{[n[0],n[1]]=Ut?ye.transform([n[1],n[0]],ye.GCJ02,ye.WGS84):[n[1],n[0]]}),c.length===2&&String(c[0])===String(c[1])){const{coordinate:n}=He(e);if(n?.[0]&&n?.[1])return[n,n]}return c}catch{return[]}},gn=e=>{const c=Jt();switch(e.type){case"Run":return e.subtype==="trail"?Zt:(e.subtype==="generic",c);case"cycling":return Qt;case"hiking":return Pe;case"walking":return en;case"swimming":return tn;default:return De}},_e=e=>({type:"FeatureCollection",features:e.map(c=>{const n=Ge(c);return{type:"Feature",properties:{color:gn(c)},geometry:{type:"LineString",coordinates:n}}})}),_n=async()=>{const[{chinaGeojson:e},c]=await Promise.all([A(()=>import("./run_countries-Wi98UNLF.js"),__vite__mapDeps([0,1,2])),A(()=>import("./vendors-D3T6pIKm.js").then(n=>n.w),[])]);return{type:"FeatureCollection",features:[...c.default.features,...e.features]}},be=e=>{const c=e.distance/1e3,n=+e.start_date_local.slice(11,13);return c>20&&c<40?z.HALF_MARATHON_RUN_TITLE:c>=40?z.FULL_MARATHON_RUN_TITLE:n>=0&&n<=10?z.MORNING_RUN_TITLE:n>10&&n<=14?z.MIDDAY_RUN_TITLE:n>14&&n<=18?z.AFTERNOON_RUN_TITLE:n>18&&n<=21?z.EVENING_RUN_TITLE:z.NIGHT_RUN_TITLE},Ae=e=>{const{features:c}=e;let n=[];for(const p of c)if(p.geometry.coordinates.length){n=p.geometry.coordinates;break}if(n.length===0)return{longitude:20,latitude:20,zoom:3};if(n.length===2&&String(n[0])===String(n[1]))return{longitude:n[0][0],latitude:n[0][1],zoom:9};const i=n.map(p=>p[0]),o=n.map(p=>p[1]),s=[[Math.min(...i),Math.min(...o)],[Math.max(...i),Math.max(...o)]],l=new ze({width:800,height:600}).fitBounds(s,{padding:200});let{longitude:f,latitude:g,zoom:d}=l;return c.length>1&&(d=11.5),{longitude:f,latitude:g,zoom:d}},Fe=(e,c)=>e&&e.start_date_local?e.start_date_local.slice(0,4)===c:!1,xn=(e,c)=>e&&e.location_country?e.location_country.includes(c):!1,Tn=(e,c)=>be(e)===c,jn=(e,c,n,i)=>{let o=e;return c!=="Total"&&(o=e.filter(s=>n(s,c))),o.sort(i)},re=(e,c)=>new Date(c.start_date_local.replace(" ","T")).getTime()-new Date(e.start_date_local.replace(" ","T")).getTime(),En=(e,c)=>re(c,e),wn=(e,c,n)=>{const i=Ne[e][c];return i||Ne.default},Ln=()=>typeof window>"u"?!1:"ontouchstart"in window||navigator.maxTouchPoints>0||window.innerWidth<=768,G=({value:e,description:c,className:n="pb-2 w-full",citySize:i,onClick:o})=>t.jsxs("div",{className:`${n}`,onClick:o,children:[t.jsx("span",{className:`text-${i||5}xl font-bold italic`,children:fn(e.toString())}),t.jsx("span",{className:"text-lg font-semibold italic",children:c})]}),bn=e=>e.includes("美利坚合众国")?"美国":e.includes("英国")?"英国":e.includes("印度尼西亚")?"印度尼西亚":e.includes("韩国")?"韩国":e.includes("斯里兰卡")?"斯里兰卡":e.includes("所罗门群岛")?"所罗门群岛":e.includes("拉脱维亚")?"拉脱维亚":e.includes("爱沙尼亚")?"爱沙尼亚":e.includes("奧地利")?"奥地利":e.includes("澳大利亚")?"澳大利亚":e,W=()=>a.useMemo(()=>{const c={},n={},i=new Set,o=new Set,s=new Set;se.forEach(g=>{const d=He(g),p=be(g);p&&(n[p]=n[p]?n[p]+1:1);const{city:E,province:m,country:v}=d;E.length>1&&(c[E]=c[E]?c[E]+g.distance:g.distance),m&&i.add(m),v&&o.add(bn(v));const r=g.start_date_local.slice(0,4);s.add(r)});const l=[...s].sort().reverse(),f=l[0]||"";return{activities:se,years:l,countries:[...o],provinces:[...i],cities:c,runPeriod:n,thisYear:f}},[]),Sn=()=>{const[e,c]=a.useState(!1),n=a.useRef(void 0);return[e,{onMouseOver(){n.current&&clearTimeout(n.current),n.current=window.setTimeout(()=>c(!0),1e3)},onMouseOut(){n.current&&clearTimeout(n.current),c(!1)}}]},Cn=Object.assign({"./year_2015.svg":()=>A(()=>import("./year_2015-DslSRb3w.js"),__vite__mapDeps([3,1])).then(e=>e.ReactComponent),"./year_2016.svg":()=>A(()=>import("./year_2016-lYfccHkH.js"),__vite__mapDeps([4,1])).then(e=>e.ReactComponent),"./year_2017.svg":()=>A(()=>import("./year_2017-By7IhuMW.js"),__vite__mapDeps([5,1])).then(e=>e.ReactComponent),"./year_2018.svg":()=>A(()=>import("./year_2018-DZs9YxoJ.js"),__vite__mapDeps([6,1])).then(e=>e.ReactComponent),"./year_2019.svg":()=>A(()=>import("./year_2019-CcA8daN3.js"),__vite__mapDeps([7,1])).then(e=>e.ReactComponent),"./year_2020.svg":()=>A(()=>import("./year_2020-B8rNetq2.js"),__vite__mapDeps([8,1])).then(e=>e.ReactComponent),"./year_2021.svg":()=>A(()=>import("./year_2021-BskfnBaw.js"),__vite__mapDeps([9,1])).then(e=>e.ReactComponent),"./year_2022.svg":()=>A(()=>import("./year_2022-DUIpbrAw.js"),__vite__mapDeps([10,1])).then(e=>e.ReactComponent),"./year_2023.svg":()=>A(()=>import("./year_2023-uVkyKtJT.js"),__vite__mapDeps([11,1])).then(e=>e.ReactComponent),"./year_2024.svg":()=>A(()=>import("./year_2024-DObgbCkG.js"),__vite__mapDeps([12,1])).then(e=>e.ReactComponent),"./year_2025.svg":()=>A(()=>import("./year_2025-DRn6oHyR.js"),__vite__mapDeps([13,1])).then(e=>e.ReactComponent)}),Se=Object.assign({"./github.svg":()=>A(()=>import("./github.svg-Gy3IOtKD.js"),__vite__mapDeps([14,1])).then(e=>e.ReactComponent),"./grid.svg":()=>A(()=>import("./grid.svg--u7_1FdK.js"),__vite__mapDeps([15,1])).then(e=>e.ReactComponent),"./mol.svg":()=>A(()=>import("./mol.svg-BB4rjPzw.js"),__vite__mapDeps([16,1])).then(e=>e.ReactComponent)}),Rn=()=>(console.log("Failed to load SVG component"),t.jsx("div",{})),de=async(e,c)=>{try{return{default:await e[c]()}}catch(n){return console.error(n),{default:Rn}}},Be=({year:e,onClick:c})=>{let{activities:n,years:i}=W();const[o,s]=Sn(),l=a.lazy(()=>de(Cn,`./year_${e}.svg`));i.includes(e)&&(n=n.filter(T=>T.start_date_local.slice(0,4)===e));let f=0,g=0,d=0,p=0,E=0,m=0,v=0,r=0;n.forEach(T=>{f+=T.distance||0,d+=T.elevation_gain||0,T.average_speed&&(p+=T.average_speed,v+=T.distance||0,r+=(T.distance||0)/T.average_speed),T.average_heartrate?E+=T.average_heartrate:m++,T.streak&&(g=Math.max(g,T.streak))}),f=parseFloat((f/1e3).toFixed(1)),d.toFixed(0);const x=$e(v/r),y=E!==0,u=(E/(n.length-m)).toFixed(0);return t.jsxs("div",{className:"cursor-pointer",onClick:()=>c(e),children:[t.jsxs("section",{...s,children:[t.jsx(G,{value:e,description:" Journey"}),t.jsx(G,{value:n.length,description:" Runs"}),t.jsx(G,{value:f,description:" KM"}),Ee,t.jsx(G,{value:x,description:" Avg Pace"}),t.jsx(G,{value:`${g} day`,description:" Streak"}),y&&t.jsx(G,{value:u,description:" Avg Heart Rate"})]}),e!=="Total"&&o&&t.jsx(a.Suspense,{fallback:"loading...",children:t.jsx(l,{className:"year-svg my-4 h-4/6 w-4/6 border-0 p-0"})}),t.jsx("hr",{})]})},kn=({onClick:e})=>{const{cities:c}=W(),n=Object.entries(c);return n.sort((i,o)=>o[1]-i[1]),t.jsxs("div",{className:"cursor-pointer",children:[t.jsx("section",{children:n.map(([i,o])=>t.jsx(G,{value:i,description:` ${(o/1e3).toFixed(0)} KM`,citySize:3,onClick:()=>e(i)},i))}),t.jsx("hr",{})]})},In=()=>{const{years:e,countries:c,provinces:n,cities:i}=W();return t.jsxs("div",{className:"cursor-pointer",children:[t.jsxs("section",{children:[e?t.jsx(G,{value:`${e.length}`,description:" 年里我跑过"}):null,c?t.jsx(G,{value:c.length,description:" 个国家"}):null,n?t.jsx(G,{value:n.length,description:" 个省份"}):null,i?t.jsx(G,{value:Object.keys(i).length,description:" 个城市"}):null]}),t.jsx("hr",{})]})},Nn=({onClick:e})=>{const{runPeriod:c}=W(),n=Object.entries(c);return n.sort((i,o)=>o[1]-i[1]),t.jsxs("div",{className:"cursor-pointer",children:[t.jsx("section",{children:n.map(([i,o])=>t.jsx(G,{value:i,description:` ${o} Runs`,citySize:3,onClick:()=>e(i)},i))}),t.jsx("hr",{})]})},Mn=({changeYear:e,changeCity:c,changeTitle:n})=>t.jsxs("div",{className:"w-full pb-16 lg:w-full lg:pr-16",children:[t.jsx("section",{className:"pb-0",children:t.jsxs("p",{className:"leading-relaxed",children:[Tt,".",t.jsx("br",{}),jt,".",t.jsx("br",{}),t.jsx("br",{}),"Yesterday you said tomorrow."]})}),t.jsx("hr",{}),t.jsx(In,{}),t.jsx(kn,{onClick:c}),t.jsx(Nn,{onClick:n}),t.jsx(Be,{year:"Total",onClick:e})]}),Ve=(e,c)=>{const n=m=>m*Math.PI/180,o=n(c[1]-e[1]),s=n(c[0]-e[0]),l=n(e[1]),f=n(c[1]),g=Math.sin(o/2),d=Math.sin(s/2),p=g*g+Math.cos(l)*Math.cos(f)*d*d;return 6371e3*(2*Math.atan2(Math.sqrt(p),Math.sqrt(1-p)))},An=(e,c=5)=>{if(e.length<=100)return e;const n=[e[0]];let i=0;for(let o=1;o<e.length-1;o++)Ve(e[i],e[o])>c&&(n.push(e[o]),i=o);return n.push(e[e.length-1]),n},Fn=e=>{const c=[];let n=0;for(let o=1;o<e.length;o++){const s=Ve(e[o-1],e[o]);c.push(s),n+=s}const i=[0];for(let o=0;o<c.length;o++)i.push(i[o]+c[o]);return{segLens:c,total:n,cum:i}},Ye=(e,c)=>{let n=0,i=e.length-2;for(;n<=i;){const o=Math.floor((n+i)/2);if(e[o]<=c&&c<e[o+1])return o;e[o]>c?i=o-1:n=o+1}return Math.max(0,Math.min(e.length-2,n))},On=(e,c,n,i)=>{const o=Ye(n,i),s=e[o],l=e[Math.min(o+1,e.length-1)],f=c[o]||1,g=Math.max(0,Math.min(1,(i-n[o])/f)),d=[];for(let p=0;p<=o;p++)d.push(e[p]);if(g>0&&g<1){const p=s[0]+(l[0]-s[0])*g,E=s[1]+(l[1]-s[1])*g;d.push([p,E])}return d};class Dn{constructor(c,n,i,o={}){this.onUpdate=n,this.onComplete=i,this.config={speedMps:4e3,minDuration:2500,maxDuration:8e3,targetFps:60,updateThreshold:.01,minDistance:5,...o},this.points=c,this.simplified=An(c,this.config.minDistance);const{segLens:s,total:l,cum:f}=Fn(this.simplified);this.segLens=s,this.total=l,this.cum=f;let g=this.total/this.config.speedMps*1e3;this.duration=Math.max(this.config.minDuration,Math.min(this.config.maxDuration,g)),this.state={lastUpTo:-1,lastT:0,frameCount:0,lastFrameTime:0},this.startTime=performance.now()}points;simplified;segLens;total;cum;duration;startTime;state;config;animationFrameId=null;start(){if(this.total<=0){this.onUpdate([]),this.onComplete();return}this.onUpdate([this.simplified[0]]),this.animationFrameId=requestAnimationFrame(this.step.bind(this))}stop(){this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)}step(c){const n=1e3/this.config.targetFps;if(c-this.state.lastFrameTime<n&&this.state.frameCount>0){this.animationFrameId=requestAnimationFrame(this.step.bind(this));return}this.state.lastFrameTime=c,this.state.frameCount++;const i=c-this.startTime,o=Math.min(1,i/this.duration);if(o>=1){this.onUpdate(this.simplified),this.animationFrameId=null,this.onComplete();return}const s=o*this.total,l=Ye(this.cum,s);if(l===this.state.lastUpTo&&Math.abs(o-this.state.lastT)<this.config.updateThreshold&&o<.98){this.animationFrameId=requestAnimationFrame(this.step.bind(this));return}this.state.lastUpTo=l,this.state.lastT=o;const f=On(this.simplified,this.segLens,this.cum,s);this.onUpdate(f),this.animationFrameId=requestAnimationFrame(this.step.bind(this))}}const Pn=e=>a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,viewBox:"0 0 58 58",...e},a.createElement("g",{fill:"none",fillRule:"nonzero"},a.createElement("path",{fill:"#e64c3c",d:"M57.44 29.6c-11.88 14.2-32.78-3.93-44.27 11.64l-.66-2.34v-.01L5.64 14.31l-.65-2.34C16.48-3.6 37.39 14.53 49.26.33c.58-.7 1.13-.4 1.01.62l-.19 1.43a141 141 0 0 1-3.36 16.98q-.01.44.31.74a49 49 0 0 0 9.82 6.93l.82.39c.46.2.35 1.48-.23 2.18"}),a.createElement("path",{fill:"#e64c3c",d:"M57.44 29.6c-11.88 14.2-32.78-3.93-44.27 11.64-.22-.78-1.95-.87-2.17-1.65v-.01L4.13 15c-.22-.78 1.08-2.25.86-3.03C16.48-3.6 37.39 14.53 49.26.33c.58-.7 1.13-.4 1.01.62l-.19 1.43a141 141 0 0 1-3.36 16.98q-.01.44.31.74a49 49 0 0 0 9.82 6.93l.82.39c.46.2.35 1.48-.23 2.18"}),a.createElement("path",{fill:"#cf976a",d:"m1.76 9.95.14-.04a2.4 2.4 0 0 1 2.97 1.67l12.2 43.69a1.93 1.93 0 0 1-1.33 2.38l-1.07.3a1.93 1.93 0 0 1-2.38-1.34L.09 12.92a2.4 2.4 0 0 1 1.67-2.97"}))),$n=e=>a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,viewBox:"0 0 60 60",...e},a.createElement("g",{fill:"none",fillRule:"nonzero"},a.createElement("path",{fill:"#e64c3c",d:"M58.44 30.6c-11.88 14.2-32.78-3.93-44.27 11.64l-.66-2.34v-.01L6.64 15.31l-.65-2.34C17.48-2.6 38.39 15.53 50.26 1.33c.58-.7 1.13-.4 1.01.62l-.19 1.43a141 141 0 0 1-3.36 16.98q-.01.44.31.74a49 49 0 0 0 9.82 6.93l.82.39c.46.2.35 1.48-.23 2.18"}),a.createElement("path",{fill:"#cad9fc",d:"M58.44 30.6q-.98 1.17-2.15 2.15c-10.83 8.99-27.3-2.22-38.4 5.76h-.01a17 17 0 0 0-3.71 3.73c-.22-.78-1.95-.87-2.17-1.65v-.01l-.06-.2L5.13 16c-.22-.78 1.08-2.25.86-3.03 5.09-6.89 12.02-7.18 19.19-6.6 7.87.65 16.04 2.35 22.38-2.46q1.5-1.13 2.7-2.58c.58-.7 1.13-.4 1.01.62l-.19 1.43a141 141 0 0 1-3.36 16.98q-.01.44.31.74a49 49 0 0 0 9.82 6.93l.82.39c.46.2.35 1.48-.23 2.18"}),a.createElement("g",{fill:"#e8edfc"},a.createElement("path",{d:"m56.41 32.61-.12.14c-10.83 8.99-27.3-2.22-38.4 5.76h-.01c-2.07.32-2 3.52-3.88 4.49-2.27-8.12-6.6-18.87-8.87-27-.22-.78 1.08-2.25.86-3.03 5.09-6.89 12.02-7.18 19.19-6.6C33.05 7.02 42.66 7.81 49 3c-.71 4.7-2.07 9.87-3 13.78q-.46 1.95-.96 3.79l-.04.26q-.02.5.35.85c3.99 3.47 6.87 6.23 10.38 7.98q.48.24.94.44c.53.23.4 1.71-.26 2.51"}),a.createElement("path",{d:"m2.76 10.95.14-.04a2.4 2.4 0 0 1 2.97 1.67l12.2 43.69a1.93 1.93 0 0 1-1.33 2.38l-1.07.3a1.93 1.93 0 0 1-2.38-1.34L1.09 13.92a2.4 2.4 0 0 1 1.67-2.97"})),a.createElement("path",{fill:"#fff",d:"m15.68 58.95 1.07-.3.18-.07q-.46-.39-.63-.97L4.09 13.92a2.4 2.4 0 0 1 .92-2.6 2.4 2.4 0 0 0-2.1-.41l-.14.04a2.4 2.4 0 0 0-1.68 2.97l12.2 43.7a1.93 1.93 0 0 0 2.39 1.33",className:"svg-color-text"}),a.createElement("path",{fill:"#fff",d:"m2.05 13.65 3.5 12.52 8.71 31.17-1.92.54-8.71-31.17L.13 14.2z",className:"svg-color-text"}),a.createElement("g",{fill:"#428dff"},a.createElement("path",{d:"M2.44 18.74a1 1 0 0 0 .69-1.23l-1.08-3.86-1.92.54 1.07 3.85a1 1 0 0 0 1.24.7M12.34 57.88l1.92-.54-8.98-32.13a1 1 0 0 0-1.92.54zM4.2 21.36a1 1 0 0 0-.46-.6l-.18-.08-.2-.04-.19-.01-.2.03q-.39.13-.6.47c-.26.49-.09 1.09.38 1.37q.18.1.37.11a1 1 0 0 0 1-.5c.13-.22.16-.5.09-.75"}),a.createElement("path",{d:"M15.15 60.02a2.94 2.94 0 0 1-2.81-2.14 1 1 0 1 1 1.92-.54c.14.5.65.79 1.15.65l1.07-.3c.5-.14.78-.65.64-1.15L4.92 12.85c-.22-.75-1-1.19-1.75-.98l-.13.04c-.76.21-1.2.99-.99 1.74a1 1 0 1 1-1.92.54c-.5-1.81.55-3.7 2.37-4.2l.13-.04c1.82-.5 3.7.55 4.21 2.36l12.2 43.7a2.93 2.93 0 0 1-2.02 3.6l-1.07.3q-.4.12-.8.11"}),a.createElement("path",{d:"m14.17 43.24-.18-.01a1 1 0 0 1-.79-.72L5.02 13.24a1 1 0 0 1 .16-.86c6.2-8.4 14.95-7.53 23.4-6.69 7.94.8 15.44 1.54 20.91-5 .4-.64 1.2-.9 1.9-.63.25.1 1.05.57.87 2a138 138 0 0 1-3.54 18.33 45 45 0 0 0 10.36 7.12c.42.2.72.58.81 1.04.17.95-.08 1.93-.68 2.68-6.16 7.37-14.53 6.53-22.64 5.72-8.27-.82-16.07-1.6-21.6 5.89a1 1 0 0 1-.8.4M7.08 13.18l7.53 26.94c6.1-6.76 14.25-5.95 22.16-5.16 7.93.8 15.43 1.54 20.9-5q.24-.36.28-.77a48 48 0 0 1-10.57-7.33 2 2 0 0 1-.59-1.99q2.22-8.34 3.34-16.9C44.07 9.25 36.1 8.45 28.39 7.68c-8.13-.81-15.8-1.58-21.3 5.5m51.17 16.15h.02z"})))),Hn="_locationSVG_2qfwx_1",Gn="_buttons_2qfwx_9",Bn="_button_2qfwx_9",Vn="_selected_2qfwx_43",Yn="_runTitle_2qfwx_47",Un="_lights_2qfwx_66",qn="_lightsOn_2qfwx_75",Wn="_lightsOff_2qfwx_84",q={locationSVG:Hn,buttons:Gn,button:Bn,selected:Vn,runTitle:Yn,lights:Un,lightsOn:qn,lightsOff:Wn},zn=({startLon:e,startLat:c,endLon:n,endLat:i})=>t.jsxs(t.Fragment,{children:[t.jsx(Ce,{longitude:e,latitude:c,pitchAlignment:"viewport",children:t.jsx("div",{style:{transform:`translate(${-5/2}px,-5px)`,maxWidth:"25px"},children:t.jsx($n,{className:q.locationSVG})})},"maker_start"),t.jsx(Ce,{longitude:n,latitude:i,children:t.jsx("div",{style:{transform:`translate(${-5/2}px,-5px)`,maxWidth:"25px"},children:t.jsx(Pn,{className:q.locationSVG})})},"maker_end")]}),Kn=({changeYear:e,thisYear:c})=>{const{years:n}=W(),i=n.slice();return i.push("Total"),t.jsx("ul",{className:q.buttons,children:i.map(o=>t.jsx("li",{className:q.button+` ${o===c?q.selected:""}`,onClick:()=>{e(o)},children:o},`${o}button`))})},Jn=({setLights:e,lights:c})=>t.jsx("div",{className:"mapboxgl-ctrl mapboxgl-ctrl-group  "+q.lights,children:t.jsx("button",{className:`${c?q.lightsOn:q.lightsOff}`,onClick:()=>e(!c),children:t.jsx("span",{className:"mapboxgl-ctrl-icon","aria-hidden":"true",title:`Turn ${c?"off":"on"} the Light`})})}),Xn=({title:e,viewState:c,setViewState:n,changeYear:i,geoData:o,thisYear:s,animationTrigger:l})=>{const{countries:f,provinces:g}=W(),d=a.useRef(null),[p,E]=a.useState(_t),m=["runs2","animated-run"],[v,r]=a.useState(null),[x,y]=a.useState(!1),u=cn(),T=on(),C=a.useMemo(()=>Xt(),[T]),F=a.useMemo(()=>wn(nn,u),[u]);a.useEffect(()=>{if(d.current){const h=d.current.getMap(),S=h.getCenter(),b=h.getZoom(),M=h.getBearing(),H=h.getPitch();h.setStyle(F);const te=()=>{setTimeout(()=>{try{h.setCenter(S),h.setZoom(b),h.setBearing(M),h.setPitch(H),B(h,p)}catch(Ue){console.warn("Error applying map style changes:",Ue)}},100)};h.once("style.load",te)}},[F]);const[j,I]=a.useState([]),k=a.useRef(null),w=a.useRef(null),D=a.useMemo(()=>{const h=g.slice();return h.unshift("in","name"),h},[g]),Y=a.useMemo(()=>{const h=f.slice();return h.unshift("in","name"),h},[f]);function B(h,S){h.getStyle().layers.forEach(M=>{m.includes(M.id)||(S?h.setLayoutProperty(M.id,"visibility","visible"):h.setLayoutProperty(M.id,"visibility","none"))})}a.useEffect(()=>{if(d.current){const h=d.current.getMap();setTimeout(()=>{try{B(h,p)}catch(S){console.warn("Error switching layer visibility:",S)}},50)}},[p]);const X=a.useCallback(h=>{if(h!==null){const S=h.getMap();S&&ne&&S.addControl(new Je({defaultLanguage:"zh-Hans"})),S.on("data",b=>{b.dataType!=="style"||d.current||(d.current=h,B(S,p))})}if(d.current){const S=d.current.getMap();B(S,p)}},[d,p]),me=o.features.length,P=(c.zoom??0)<=3;a.useEffect(()=>{P&&ne&&!v&&!x&&(y(!0),_n().then(h=>{r(h),y(!1)}).catch(()=>{y(!1)}))},[P,ne,v,x]);let Q=o;P&&ne&&v&&o.features.length===me&&(Q={type:"FeatureCollection",features:o.features.concat(v.features)});const{isSingleRun:R,startLon:ee,startLat:pe,endLon:ue,endLat:he}=a.useMemo(()=>{const h=o.features.length===1&&o.features[0].geometry.coordinates.length;let S=0,b=0,M=0,H=0;if(h){const te=o.features[0].geometry.coordinates;[S,b]=te[0],[M,H]=te[te.length-1]}return{isSingleRun:h,startLon:S,startLat:b,endLon:M,endLat:H}},[o]),U=a.useMemo(()=>!R&&!P?[2,2]:[2,0],[R,P]),ve=a.useCallback(({viewState:h})=>{n(h)},[n]),_=a.useMemo(()=>({width:"100%",height:gt,maxWidth:"100%"}),[]),N=a.useMemo(()=>({position:"absolute",marginTop:"29.2px",right:"0px",opacity:.3}),[]);a.useEffect(()=>{const h=()=>{d.current&&d.current.getMap().resize()};return document.addEventListener("fullscreenchange",h),()=>{document.removeEventListener("fullscreenchange",h)}},[]);const L=a.useCallback(()=>{if(!R)return;const h=o.features[0].geometry.coordinates;!h||h.length<2||(k.current&&k.current.stop(),k.current=new Dn(h,I,()=>{k.current=null}),k.current.start())},[o,R]);a.useEffect(()=>{if(!R)return;const h=o.features[0].geometry.coordinates,S=`${h.length}-${h[0]?.join(",")}-${h[h.length-1]?.join(",")}`;return S&&S!==w.current&&(w.current=S,L()),()=>{k.current&&k.current.stop()}},[o,R,L]),a.useEffect(()=>{l&&l>0&&R&&L()},[l,R,L]);const $=a.useCallback(()=>{R&&L()},[R,L]);return t.jsxs(Xe,{...c,onMove:ve,onClick:$,style:_,mapStyle:F,ref:X,cooperativeGestures:Ln(),mapboxAccessToken:vt,children:[t.jsx(Kn,{changeYear:i,thisYear:s}),t.jsxs(Re,{id:"data",type:"geojson",data:Q,children:[t.jsx(ie,{id:"province",type:"fill",paint:{"fill-color":qt},filter:D}),t.jsx(ie,{id:"countries",type:"fill",paint:{"fill-color":Wt,"fill-opacity":["case",["==",["get","name"],"中国"],.1,.5]},filter:Y}),t.jsx(ie,{id:"runs2",type:"line",paint:{"line-color":["get","color"],"line-width":P&&p?1:2,"line-dasharray":U,"line-opacity":R||P||!p?1:ft,"line-blur":1},layout:{"line-join":"round","line-cap":"round"}})]}),R&&j.length>0&&t.jsx(Re,{id:"animated-run",type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{color:C},geometry:{type:"LineString",coordinates:j}}]},children:t.jsx(ie,{id:"animated-run",type:"line",paint:{"line-color":["get","color"],"line-width":3,"line-opacity":1},layout:{"line-join":"round","line-cap":"round"}})}),R&&t.jsx(zn,{startLat:pe,startLon:ee,endLat:he,endLon:ue}),t.jsx("span",{className:q.runTitle,children:e}),t.jsx(Ze,{style:N}),t.jsx(Jn,{setLights:E,lights:p}),t.jsx(Qe,{showCompass:!1,position:"bottom-right",style:{opacity:.3}})]})},Zn="_tableContainer_h5olg_2",Qn="_runTable_h5olg_7",ec="_runRow_h5olg_68",tc="_selected_h5olg_89",nc="_runDate_h5olg_98",ce={tableContainer:Zn,runTable:Qn,runRow:ec,selected:tc,runDate:nc},cc=({elementIndex:e,locateActivity:c,run:n,runIndex:i,setRunIndex:o})=>{const s=(n.distance/1e3).toFixed(2),l=n.average_speed?$e(n.average_speed):null,f=n.average_heartrate,g=pn(n.moving_time),d=()=>{if(i===e){o(-1),c([]);return}o(e),c([n.run_id])};return t.jsxs("tr",{className:`${ce.runRow} ${i===e?ce.selected:""}`,onClick:d,children:[t.jsx("td",{children:be(n)}),t.jsx("td",{children:s}),Ee,l&&t.jsx("td",{children:l}),t.jsx("td",{children:f&&f.toFixed(0)}),t.jsx("td",{children:g}),t.jsx("td",{className:ce.runDate,children:n.start_date_local})]},n.start_date_local)},oc=({runs:e,locateActivity:c,setActivity:n,runIndex:i,setRunIndex:o})=>{const[s,l]=a.useState(""),f=a.useMemo(()=>{const d=(y,u)=>s==="KM"?y.distance-u.distance:u.distance-y.distance,p=(y,u)=>s==="Elev"?(y.elevation_gain??0)-(u.elevation_gain??0):(u.elevation_gain??0)-(y.elevation_gain??0),E=(y,u)=>s==="Pace"?y.average_speed-u.average_speed:u.average_speed-y.average_speed,m=(y,u)=>s==="BPM"?(y.average_heartrate??0)-(u.average_heartrate??0):(u.average_heartrate??0)-(y.average_heartrate??0),v=(y,u)=>{const T=Te(y.moving_time),C=Te(u.moving_time);return s==="Time"?T-C:C-T},r=s==="Date"?re:En,x=new Map([["KM",d],["Elev",p],["Pace",E],["BPM",m],["Time",v],["Date",r]]);return x.delete("Elev"),x},[s]),g=a.useCallback(d=>{const p=d.target.innerHTML,E=f.get(p);o(-1),l(s===p?"":p),n(e.sort(E))},[f,s,e,o,n]);return t.jsx("div",{className:ce.tableContainer,children:t.jsxs("table",{className:ce.runTable,cellSpacing:"0",cellPadding:"0",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{}),Array.from(f.keys()).map(d=>t.jsx("th",{onClick:g,children:d},d))]})}),t.jsx("tbody",{children:e.map((d,p)=>t.jsx(cc,{elementIndex:p,locateActivity:c,run:d,runIndex:i,setRunIndex:o},d.run_id))})]})})},Oe=()=>{if(typeof window>"u")return;const e=document.querySelectorAll(".github-svg"),c=document.querySelectorAll(".grid-svg");[...Array.from(e),...Array.from(c)].forEach(i=>{const o=i.querySelectorAll('[fill="#FFFF00"], [fill="#ffff00"], [fill="yellow"], [stroke="#FFFF00"], [stroke="#ffff00"], [stroke="yellow"]'),s=i.querySelectorAll('[fill="#FF0000"], [fill="#ff0000"], [fill="red"], [stroke="#FF0000"], [stroke="#ff0000"], [stroke="red"]');o.forEach(l=>{l.removeAttribute("fill"),l.removeAttribute("stroke"),l.classList.add("svg-special-color")}),s.forEach(l=>{l.removeAttribute("fill"),l.removeAttribute("stroke"),l.classList.add("svg-special-color2")})})},ic=()=>{Oe(),new MutationObserver(c=>{c.forEach(n=>{n.type==="attributes"&&n.attributeName==="data-theme"&&Oe()})}).observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]})},ac=a.lazy(()=>de(Se,"./github.svg")),sc=a.lazy(()=>de(Se,"./grid.svg")),rc=()=>(a.useEffect(()=>{const e=setTimeout(()=>{ic()},100);return()=>clearTimeout(e)},[]),t.jsx("div",{id:"svgStat",children:t.jsxs(a.Suspense,{fallback:t.jsx("div",{className:"text-center",children:"Loading..."}),children:[t.jsx(ac,{className:"github-svg mt-4 h-auto w-full"}),t.jsx(sc,{className:"grid-svg mt-4 h-auto w-full"})]})})),lc=({year:e,onClick:c})=>{const{years:n}=W(),i=a.useMemo(()=>{let s=n.slice();return s.push("Total"),s=s.filter(l=>l!==e),s.unshift(e),s},[n,e]),o=a.useMemo(()=>Et(n.length,e),[n.length,e]);return t.jsxs("div",{className:"w-full pb-16 pr-16 lg:w-full lg:pr-16",children:[t.jsx("section",{className:"pb-0",children:t.jsxs("p",{className:"leading-relaxed",children:[o,t.jsx("br",{})]})}),t.jsx("hr",{}),i.map(s=>t.jsx(Be,{year:s,onClick:c},s))]})};function dc(e,c){const n=a.useRef(e);a.useEffect(()=>{n.current=e},[e]),a.useEffect(()=>{if(c==null)return;const i=setInterval(()=>n.current(),c);return()=>clearInterval(i)},[c])}const mc=()=>{const{siteTitle:e,siteUrl:c}=le(),{activities:n,thisYear:i}=W(),[o,s]=a.useState(i),[l,f]=a.useState(-1),[g,d]=a.useState(""),[p,E]=a.useState(!1),[m,v]=a.useState(0),[r,x]=a.useState([]),[y,u]=a.useState({item:i,func:Fe}),[T,C]=a.useState(null),[F,j]=a.useState(0),I=a.useRef(null),k=a.useRef(null);a.useEffect(()=>{const _=window.location.hash.replace("#","");if(_&&_.startsWith("run_")){const L=parseInt(_.replace("run_",""),10);isNaN(L)||C(L)}const N=()=>{const L=window.location.hash.replace("#","");if(L&&L.startsWith("run_")){const $=parseInt(L.replace("run_",""),10);isNaN($)||C($)}else C(null)};return window.addEventListener("hashchange",N),()=>{window.removeEventListener("hashchange",N)}},[]);const w=a.useMemo(()=>jn(n,y.item,y.func,re),[n,y.item,y.func]),D=a.useMemo(()=>_e(w),[w]),Y=a.useMemo(()=>Ae(D),[D]),[B,X]=a.useState(()=>({...Y})),[me,P]=a.useState(D);dc(()=>{if(!p||m>=r.length){E(!1),P(D);return}const _=r.length,N=_>=8?Math.ceil(_/8):1,L=Math.min(m+N,_),$=r.slice(0,L);P(_e($)),v(L),L>=_&&(E(!1),P(D))},p?300:null);const Q=a.useCallback(_=>{if(_.length===0){P(D);return}const N=_.length>=8?Math.ceil(_.length/8):1;x(_),v(N),E(!0)},[D]),R=a.useCallback((_,N,L)=>{Me(),N!="Year"&&s(i),u({item:_,func:L}),f(-1),d(`${_} ${N} Running Heatmap`),C(null),window.location.hash&&window.history.pushState(null,"",window.location.pathname)},[i]),ee=a.useCallback(_=>{s(_),(B.zoom??0)>3&&Y&&X({...Y}),R(_,"Year",Fe),E(!1)},[B.zoom,Y,R]),pe=a.useCallback(_=>{R(_,"City",xn)},[R]),ue=a.useCallback(_=>{R(_,"Title",Tn)},[R]),he=a.useCallback(_=>{console.warn("setActivity called but runs are now computed from filters")},[]),U=a.useCallback(_=>{const N=new Set(_),L=_.length?w.filter(b=>N.has(b.run_id)):w;if(!L.length)return;const $=L.sort(re)[0];if(!$)return;if(_.length===1){const b=_[0],M=w.findIndex(H=>H.run_id===b);f(M)}else f(-1);if(_.length===1){const b=_[0],M=`#run_${b}`;window.location.hash!==M&&window.history.pushState(null,"",M),C(b)}else window.location.hash&&window.history.pushState(null,"",window.location.pathname),C(null);const h=_e(L),S=Ae(h);E(!1),P(h),_.length===1&&j(b=>b+1),X({...S}),d(mn($)),Me()},[w]);a.useEffect(()=>{T!==null&&n.length>0&&(n.some(N=>N.run_id===T)?U([T]):(console.warn(`Run with ID ${T} not found in activities`),window.history.replaceState(null,"",window.location.pathname),C(null)))},[T,n,U]),a.useEffect(()=>{X(_=>({..._,...Y}))},[Y]),a.useEffect(()=>{Q(w)},[w,Q]),a.useEffect(()=>{if(o!=="Total")return;let _=document.getElementById("svgStat");if(!_)return;const N=L=>{const $=L.target;if($.tagName.toLowerCase()==="path"){const h=$.querySelector("desc");if(h){const b=Number(h.innerHTML);if(!b)return;I.current===b?(I.current=null,U(w.map(M=>M.run_id))):(I.current=b,U([b]));return}const S=$.querySelector("title");if(S){const[b]=S.innerHTML.match(/\d{4}-\d{1,2}-\d{1,2}/)||[`${+i+1}`],M=w.filter(H=>H.start_date_local.slice(0,10)===b).map(H=>H.run_id);if(!M.length)return;k.current===b?(k.current=null,U(w.map(H=>H.run_id))):(k.current=b,U(M))}}};return _.addEventListener("click",N),()=>{_&&_.removeEventListener("click",N)}},[o]);const{theme:ve}=we();return t.jsxs(Le,{children:[t.jsx(je,{children:t.jsx("html",{lang:"en","data-theme":ve})}),t.jsxs("div",{className:"w-full lg:w-1/3",children:[t.jsx("h1",{className:"my-12 mt-6 text-5xl font-extrabold italic",children:t.jsx("a",{href:c,children:e})}),(B.zoom??0)<=3&&ne?t.jsx(Mn,{changeYear:ee,changeCity:pe,changeTitle:ue}):t.jsx(lc,{year:o,onClick:ee})]}),t.jsxs("div",{className:"w-full lg:w-2/3",id:"map-container",children:[t.jsx(Xn,{title:g,viewState:B,geoData:me,setViewState:X,changeYear:ee,thisYear:o,animationTrigger:F}),o==="Total"?t.jsx(rc,{}):t.jsx(oc,{runs:w,locateActivity:U,setActivity:he,runIndex:l,setRunIndex:f})]}),void 0]})},pc=()=>{const{siteUrl:e}=le();return t.jsxs(Le,{children:[t.jsx("h1",{className:"my-2.5 text-5xl font-bold italic",children:"404"}),t.jsx("p",{children:"This page doesn't exist."}),t.jsxs("p",{className:"text-gray-400",children:["If you wanna more message, you could visit"," ",t.jsx("a",{className:"font-bold text-gray-400",href:e,children:e})]})]})},xe=e=>e,uc="_activityList_1xsf5_1",hc="_filterContainer_1xsf5_7",vc="_summaryContainer_1xsf5_29",yc="_activityCard_1xsf5_36",fc="_activityCardFlippable_1xsf5_52",gc="_cardInner_1xsf5_57",_c="_flipped_1xsf5_64",xc="_cardFront_1xsf5_68",Tc="_cardBack_1xsf5_69",jc="_routeContainer_1xsf5_91",Ec="_activityName_1xsf5_102",wc="_activityDetails_1xsf5_108",Lc="_chart_1xsf5_117",bc="_smallHomeButton_1xsf5_127",Sc="_lifeContainer_1xsf5_142",O={activityList:uc,filterContainer:hc,summaryContainer:vc,activityCard:yc,activityCardFlippable:fc,cardInner:gc,flipped:_c,cardFront:xc,cardBack:Tc,routeContainer:jc,activityName:Ec,activityDetails:wc,chart:Lc,smallHomeButton:bc,lifeContainer:Sc},Cc="_routePreview_g262a_1",Rc="_routeSvg_g262a_14",kc="_noRoute_g262a_29",Z={routePreview:Cc,routeSvg:Rc,noRoute:kc},Ic=({activities:e,className:c})=>{const n=e.filter(j=>j.summary_polyline);if(n.length===0)return t.jsx("div",{className:`${Z.routePreview} ${c||""}`,children:t.jsx("div",{className:Z.noRoute,children:"暂无路线数据"})});const i=n.map((j,I)=>{const k=Ge(j),w=["#e74c3c","#3498db","#2ecc71","#f39c12","#9b59b6"],D=w[I%w.length];return{path:k,color:D}}),o=i.flatMap(j=>j.path);if(o.length===0)return t.jsx("div",{className:`${Z.routePreview} ${c||""}`,children:t.jsx("div",{className:Z.noRoute,children:"路线数据无效"})});const s=o.map(j=>j[1]),l=o.map(j=>j[0]),f=Math.min(...s),g=Math.max(...s),d=Math.min(...l),p=Math.max(...l),E=.001,m={minLat:f-E,maxLat:g+E,minLng:d-E,maxLng:p+E},v=m.maxLng-m.minLng,r=m.maxLat-m.minLat,x=250,y=150,u=10,T=x-2*u,C=y-2*u,F=(j,I)=>{const k=u+(j-m.minLng)/v*T,w=u+(m.maxLat-I)/r*C;return[k,w]};return t.jsx("div",{className:`${Z.routePreview} ${c||""}`,children:t.jsxs("svg",{width:x,height:y,className:Z.routeSvg,children:[t.jsx("rect",{width:x,height:y,fill:"var(--color-activity-card)"}),i.map((j,I)=>{if(j.path.length<2)return null;const k=j.path.map((w,D)=>{const[Y,B]=F(w[0],w[1]);return`${D===0?"M":"L"} ${Y} ${B}`}).join(" ");return t.jsxs("g",{children:[t.jsx("path",{d:k,fill:"none",stroke:j.color,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.8"}),j.path.length>0&&t.jsx("circle",{cx:F(j.path[0][0],j.path[0][1])[0],cy:F(j.path[0][0],j.path[0][1])[1],r:"3",fill:"#2ecc71",stroke:"white",strokeWidth:"1"}),j.path.length>1&&t.jsx("circle",{cx:F(j.path[j.path.length-1][0],j.path[j.path.length-1][1])[0],cy:F(j.path[j.path.length-1][0],j.path[j.path.length-1][1])[1],r:"3",fill:"#e74c3c",stroke:"white",strokeWidth:"1"})]},I)})]})})},J=e=>{const c=e==="all"?"./mol.svg":`./mol_${e}.svg`;return a.lazy(()=>de(Se,c))},Nc=J("running"),Mc=J("walking"),Ac=J("hiking"),Fc=J("cycling"),Oc=J("swimming"),Dc=J("skiing"),Pc=J("all"),$c=({period:e,summary:c,dailyDistances:n,interval:i,activities:o=[]})=>{const[s,l]=a.useState(!1),f=()=>{i==="day"&&o.length>0&&l(!s)},d=(()=>{if(i==="month"){const[r,x]=e.split("-").map(Number),y=new Date(r,x,0).getDate();return Array.from({length:y},(u,T)=>T+1)}else{if(i==="week")return Array.from({length:7},(r,x)=>x+1);if(i==="year")return Array.from({length:12},(r,x)=>x+1)}return[]})().map(r=>({day:r,distance:(n[r-1]||0).toFixed(2)})),p=r=>{const x=Math.floor(r/3600),y=Math.floor(r%3600/60),u=Math.floor(r%60);return`${x}h ${y}m ${u}s`},E=r=>{if(r===0)return"0:00 min/km";const x=60/r,y=Math.round(x*60),u=Math.floor(y/60),T=y%60;return`${u}:${T<10?"0":""}${T} min/km`},m=Math.ceil(Math.max(...d.map(r=>parseFloat(r.distance)))+10),v=Array.from({length:Math.ceil(m/5)+1},(r,x)=>x*5);return t.jsx("div",{className:`${O.activityCard} ${i==="day"?O.activityCardFlippable:""}`,onClick:f,style:{cursor:i==="day"&&o.length>0?"pointer":"default"},children:t.jsxs("div",{className:`${O.cardInner} ${s?O.flipped:""}`,children:[t.jsxs("div",{className:O.cardFront,children:[t.jsx("h2",{className:O.activityName,children:e}),t.jsxs("div",{className:O.activityDetails,children:[t.jsxs("p",{children:[t.jsxs("strong",{children:[V.TOTAL_DISTANCE_TITLE,":"]})," ",c.totalDistance.toFixed(2)," km"]}),Ee,t.jsxs("p",{children:[t.jsxs("strong",{children:[V.AVERAGE_SPEED_TITLE,":"]})," ",E(c.averageSpeed)]}),t.jsxs("p",{children:[t.jsxs("strong",{children:[V.TOTAL_TIME_TITLE,":"]})," ",p(c.totalTime)]}),c.averageHeartRate!==void 0&&t.jsxs("p",{children:[t.jsxs("strong",{children:[V.AVERAGE_HEART_RATE_TITLE,":"]})," ",c.averageHeartRate.toFixed(0)," bpm"]}),i!=="day"&&t.jsxs(t.Fragment,{children:[t.jsxs("p",{children:[t.jsxs("strong",{children:[V.ACTIVITY_COUNT_TITLE,":"]})," ",c.count]}),t.jsxs("p",{children:[t.jsxs("strong",{children:[V.MAX_DISTANCE_TITLE,":"]})," ",c.maxDistance.toFixed(2)," km"]}),t.jsxs("p",{children:[t.jsxs("strong",{children:[V.MAX_SPEED_TITLE,":"]})," ",E(c.maxSpeed)]})]}),["month","week","year"].includes(i)&&t.jsx("div",{className:O.chart,children:t.jsx(tt,{children:t.jsxs(nt,{data:d,margin:{top:20,right:20,left:-20,bottom:5},children:[t.jsx(ct,{strokeDasharray:"3 3",stroke:"var(--color-run-row-hover-background)"}),t.jsx(ot,{dataKey:"day",tick:{fill:"var(--color-run-table-thead)"}}),t.jsx(it,{label:{value:"km",angle:-90,position:"insideLeft",fill:"var(--color-run-table-thead)"},domain:[0,m],ticks:v,tick:{fill:"var(--color-run-table-thead)"}}),t.jsx(at,{formatter:r=>`${r} km`,contentStyle:{backgroundColor:"var(--color-run-row-hover-background)",border:"1px solid var(--color-run-row-hover-background)",color:"var(--color-run-table-thead)"},labelStyle:{color:"var(--color-primary)"}}),t.jsx(st,{dataKey:"distance",fill:"var(--color-primary)"})]})})})]})]}),i==="day"&&o.length>0&&t.jsx("div",{className:O.cardBack,children:t.jsx("div",{className:O.routeContainer,children:t.jsx(Ic,{activities:o})})})]})})},Hc=()=>{const[e,c]=a.useState("month"),[n,i]=a.useState("all"),[o,s]=a.useState([]);a.useEffect(()=>{const m=new Set(se.map(r=>r.type));m.has("Run")&&(m.delete("Run"),m.add("running")),m.has("Walk")&&(m.delete("Walk"),m.add("walking")),m.has("Ride")&&(m.delete("Ride"),m.add("cycling"));const v=[...m];v.unshift("all"),s(v)},[]),a.useEffect(()=>{e==="life"&&n!=="all"&&i("all")},[e,n]);const l=et(),f=()=>{l("/")},g=m=>{c(m)},d=m=>{const[v,r,x]=m.split(":").map(Number);return v*3600+r*60+x},E=((m,v)=>se.filter(r=>v==="all"?!0:v==="running"?r.type==="running"||r.type==="Run":v==="walking"?r.type==="walking"||r.type==="Walk":v==="cycling"?r.type==="cycling"||r.type==="Ride":r.type===v).reduce((r,x)=>{const y=new Date(x.start_date_local);let u,T;switch(m){case"year":u=y.getFullYear().toString(),T=y.getMonth();break;case"month":u=`${y.getFullYear()}-${(y.getMonth()+1).toString().padStart(2,"0")}`,T=y.getDate()-1;break;case"week":{const I=new Date(y.valueOf());I.setDate(I.getDate()+4-(I.getDay()||7));const k=new Date(I.getFullYear(),0,1),w=Math.ceil(((I.getTime()-k.getTime())/864e5+1)/7);u=`${I.getFullYear()}-W${w.toString().padStart(2,"0")}`,T=(y.getDay()+6)%7;break}case"day":u=y.toLocaleDateString("zh").replaceAll("/","-"),T=0;break;default:u=y.getFullYear().toString(),T=0}r[u]||(r[u]={totalDistance:0,totalTime:0,totalElevationGain:0,count:0,dailyDistances:[],maxDistance:0,maxSpeed:0,location:"",totalHeartRate:0,heartRateCount:0,activities:[]});const C=x.distance/1e3,F=d(x.moving_time),j=F>0?C/(F/3600):0;return r[u].totalDistance+=C,r[u].totalTime+=F,x.average_heartrate&&(r[u].totalHeartRate+=x.average_heartrate,r[u].heartRateCount+=1),r[u].count+=1,m==="day"&&r[u].activities.push(x),r[u].dailyDistances[T]=(r[u].dailyDistances[T]||0)+C,C>r[u].maxDistance&&(r[u].maxDistance=C),j>r[u].maxSpeed&&(r[u].maxSpeed=j),m==="day"&&(r[u].location=x.location_country||""),r},{}))(e,n);return t.jsxs("div",{className:O.activityList,children:[t.jsxs("div",{className:O.filterContainer,children:[t.jsx("button",{className:O.smallHomeButton,onClick:f,children:Bt}),t.jsx("select",{onChange:m=>i(m.target.value),value:n,children:o.map(m=>t.jsx("option",{value:m,disabled:e==="life"&&m!=="all",children:m},m))}),t.jsxs("select",{onChange:m=>g(m.target.value),value:e,children:[t.jsx("option",{value:"year",children:V.YEARLY_TITLE}),t.jsx("option",{value:"month",children:V.MONTHLY_TITLE}),t.jsx("option",{value:"week",children:V.WEEKLY_TITLE}),t.jsx("option",{value:"day",children:V.DAILY_TITLE}),t.jsx("option",{value:"life",children:"Life"})]})]}),e==="life"&&t.jsx("div",{className:O.lifeContainer,children:t.jsxs(a.Suspense,{fallback:t.jsx("div",{children:"Loading SVG..."}),children:[(n==="running"||n==="Run")&&t.jsx(Nc,{}),n==="walking"&&t.jsx(Mc,{}),n==="hiking"&&t.jsx(Ac,{}),n==="cycling"&&t.jsx(Fc,{}),n==="swimming"&&t.jsx(Oc,{}),n==="skiing"&&t.jsx(Dc,{}),n==="all"&&t.jsx(Pc,{})]})}),e!=="life"&&t.jsx("div",{className:O.summaryContainer,children:Object.entries(E).sort(([m],[v])=>{if(e==="day")return new Date(v).getTime()-new Date(m).getTime();if(e==="week"){const[r,x]=m.split("-W").map(Number),[y,u]=v.split("-W").map(Number);return y-r||u-x}else{const[r,x=0]=m.split("-").map(Number),[y,u=0]=v.split("-").map(Number);return y-r||u-x}}).map(([m,v])=>t.jsx($c,{period:m,summary:{totalDistance:v.totalDistance,averageSpeed:v.totalTime?v.totalDistance/(v.totalTime/3600):0,totalTime:v.totalTime,count:v.count,maxDistance:v.maxDistance,maxSpeed:v.maxSpeed,location:v.location,totalElevationGain:void 0,averageHeartRate:v.heartRateCount>0?v.totalHeartRate/v.heartRateCount:void 0},dailyDistances:v.dailyDistances,interval:e,activities:e==="day"?v.activities:void 0},m))})]})},Gc=()=>{const{theme:e}=we();return a.useEffect(()=>{document.documentElement.setAttribute("data-theme",e)},[e]),t.jsxs(t.Fragment,{children:[t.jsx(je,{children:t.jsx("html",{lang:"en","data-theme":e})}),t.jsx(Hc,{})]})},Bc=rt([{path:"/",element:xe(t.jsx(mc,{}))},{path:"summary",element:xe(t.jsx(Gc,{}))},{path:"*",element:xe(t.jsx(pc,{}))}],{basename:"/"});lt.createRoot(document.getElementById("root")).render(t.jsx(dt.StrictMode,{children:t.jsx(mt,{children:t.jsx(pt,{router:Bc})})}));export{De as M};
