function Qy(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const u in n)if(u!=="default"&&!(u in e)){const h=Object.getOwnPropertyDescriptor(n,u);h&&Object.defineProperty(e,u,h.get?h:{enumerable:!0,get:()=>n[u]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}var $d=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Br(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var HM={exports:{}},C6={},ZM={exports:{}},kr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d2=Symbol.for("react.element"),NB=Symbol.for("react.portal"),UB=Symbol.for("react.fragment"),VB=Symbol.for("react.strict_mode"),GB=Symbol.for("react.profiler"),WB=Symbol.for("react.provider"),qB=Symbol.for("react.context"),HB=Symbol.for("react.forward_ref"),ZB=Symbol.for("react.suspense"),XB=Symbol.for("react.memo"),KB=Symbol.for("react.lazy"),$w=Symbol.iterator;function YB(e){return e===null||typeof e!="object"?null:(e=$w&&e[$w]||e["@@iterator"],typeof e=="function"?e:null)}var XM={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},KM=Object.assign,YM={};function Pf(e,t,r){this.props=e,this.context=t,this.refs=YM,this.updater=r||XM}Pf.prototype.isReactComponent={};Pf.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Pf.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function JM(){}JM.prototype=Pf.prototype;function e_(e,t,r){this.props=e,this.context=t,this.refs=YM,this.updater=r||XM}var t_=e_.prototype=new JM;t_.constructor=e_;KM(t_,Pf.prototype);t_.isPureReactComponent=!0;var Nw=Array.isArray,QM=Object.prototype.hasOwnProperty,r_={current:null},eC={key:!0,ref:!0,__self:!0,__source:!0};function tC(e,t,r){var n,u={},h=null,p=null;if(t!=null)for(n in t.ref!==void 0&&(p=t.ref),t.key!==void 0&&(h=""+t.key),t)QM.call(t,n)&&!eC.hasOwnProperty(n)&&(u[n]=t[n]);var o=arguments.length-2;if(o===1)u.children=r;else if(1<o){for(var _=Array(o),b=0;b<o;b++)_[b]=arguments[b+2];u.children=_}if(e&&e.defaultProps)for(n in o=e.defaultProps,o)u[n]===void 0&&(u[n]=o[n]);return{$$typeof:d2,type:e,key:h,ref:p,props:u,_owner:r_.current}}function JB(e,t){return{$$typeof:d2,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function n_(e){return typeof e=="object"&&e!==null&&e.$$typeof===d2}function QB(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Uw=/\/+/g;function y8(e,t){return typeof e=="object"&&e!==null&&e.key!=null?QB(""+e.key):t.toString(36)}function D5(e,t,r,n,u){var h=typeof e;(h==="undefined"||h==="boolean")&&(e=null);var p=!1;if(e===null)p=!0;else switch(h){case"string":case"number":p=!0;break;case"object":switch(e.$$typeof){case d2:case NB:p=!0}}if(p)return p=e,u=u(p),e=n===""?"."+y8(p,0):n,Nw(u)?(r="",e!=null&&(r=e.replace(Uw,"$&/")+"/"),D5(u,t,r,"",function(b){return b})):u!=null&&(n_(u)&&(u=JB(u,r+(!u.key||p&&p.key===u.key?"":(""+u.key).replace(Uw,"$&/")+"/")+e)),t.push(u)),1;if(p=0,n=n===""?".":n+":",Nw(e))for(var o=0;o<e.length;o++){h=e[o];var _=n+y8(h,o);p+=D5(h,t,r,_,u)}else if(_=YB(e),typeof _=="function")for(e=_.call(e),o=0;!(h=e.next()).done;)h=h.value,_=n+y8(h,o++),p+=D5(h,t,r,_,u);else if(h==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return p}function Y3(e,t,r){if(e==null)return e;var n=[],u=0;return D5(e,n,"","",function(h){return t.call(r,h,u++)}),n}function eF(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ho={current:null},L5={transition:null},tF={ReactCurrentDispatcher:ho,ReactCurrentBatchConfig:L5,ReactCurrentOwner:r_};function rC(){throw Error("act(...) is not supported in production builds of React.")}kr.Children={map:Y3,forEach:function(e,t,r){Y3(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Y3(e,function(){t++}),t},toArray:function(e){return Y3(e,function(t){return t})||[]},only:function(e){if(!n_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};kr.Component=Pf;kr.Fragment=UB;kr.Profiler=GB;kr.PureComponent=e_;kr.StrictMode=VB;kr.Suspense=ZB;kr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tF;kr.act=rC;kr.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=KM({},e.props),u=e.key,h=e.ref,p=e._owner;if(t!=null){if(t.ref!==void 0&&(h=t.ref,p=r_.current),t.key!==void 0&&(u=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(_ in t)QM.call(t,_)&&!eC.hasOwnProperty(_)&&(n[_]=t[_]===void 0&&o!==void 0?o[_]:t[_])}var _=arguments.length-2;if(_===1)n.children=r;else if(1<_){o=Array(_);for(var b=0;b<_;b++)o[b]=arguments[b+2];n.children=o}return{$$typeof:d2,type:e.type,key:u,ref:h,props:n,_owner:p}};kr.createContext=function(e){return e={$$typeof:qB,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:WB,_context:e},e.Consumer=e};kr.createElement=tC;kr.createFactory=function(e){var t=tC.bind(null,e);return t.type=e,t};kr.createRef=function(){return{current:null}};kr.forwardRef=function(e){return{$$typeof:HB,render:e}};kr.isValidElement=n_;kr.lazy=function(e){return{$$typeof:KB,_payload:{_status:-1,_result:e},_init:eF}};kr.memo=function(e,t){return{$$typeof:XB,type:e,compare:t===void 0?null:t}};kr.startTransition=function(e){var t=L5.transition;L5.transition={};try{e()}finally{L5.transition=t}};kr.unstable_act=rC;kr.useCallback=function(e,t){return ho.current.useCallback(e,t)};kr.useContext=function(e){return ho.current.useContext(e)};kr.useDebugValue=function(){};kr.useDeferredValue=function(e){return ho.current.useDeferredValue(e)};kr.useEffect=function(e,t){return ho.current.useEffect(e,t)};kr.useId=function(){return ho.current.useId()};kr.useImperativeHandle=function(e,t,r){return ho.current.useImperativeHandle(e,t,r)};kr.useInsertionEffect=function(e,t){return ho.current.useInsertionEffect(e,t)};kr.useLayoutEffect=function(e,t){return ho.current.useLayoutEffect(e,t)};kr.useMemo=function(e,t){return ho.current.useMemo(e,t)};kr.useReducer=function(e,t,r){return ho.current.useReducer(e,t,r)};kr.useRef=function(e){return ho.current.useRef(e)};kr.useState=function(e){return ho.current.useState(e)};kr.useSyncExternalStore=function(e,t,r){return ho.current.useSyncExternalStore(e,t,r)};kr.useTransition=function(){return ho.current.useTransition()};kr.version="18.3.1";ZM.exports=kr;var Pe=ZM.exports;const Ne=Br(Pe),rF=Qy({__proto__:null,default:Ne},[Pe]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nF=Pe,iF=Symbol.for("react.element"),oF=Symbol.for("react.fragment"),aF=Object.prototype.hasOwnProperty,sF=nF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,lF={key:!0,ref:!0,__self:!0,__source:!0};function nC(e,t,r){var n,u={},h=null,p=null;r!==void 0&&(h=""+r),t.key!==void 0&&(h=""+t.key),t.ref!==void 0&&(p=t.ref);for(n in t)aF.call(t,n)&&!lF.hasOwnProperty(n)&&(u[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)u[n]===void 0&&(u[n]=t[n]);return{$$typeof:iF,type:e,key:h,ref:p,props:u,_owner:sF.current}}C6.Fragment=oF;C6.jsx=nC;C6.jsxs=nC;HM.exports=C6;var c2e=HM.exports,Vw={},iC={exports:{}},ea={},oC={exports:{}},aC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(ge,$e){var rt=ge.length;ge.push($e);e:for(;0<rt;){var ft=rt-1>>>1,lt=ge[ft];if(0<u(lt,$e))ge[ft]=$e,ge[rt]=lt,rt=ft;else break e}}function r(ge){return ge.length===0?null:ge[0]}function n(ge){if(ge.length===0)return null;var $e=ge[0],rt=ge.pop();if(rt!==$e){ge[0]=rt;e:for(var ft=0,lt=ge.length,Tt=lt>>>1;ft<Tt;){var qt=2*(ft+1)-1,fr=ge[qt],br=qt+1,Mr=ge[br];if(0>u(fr,rt))br<lt&&0>u(Mr,fr)?(ge[ft]=Mr,ge[br]=rt,ft=br):(ge[ft]=fr,ge[qt]=rt,ft=qt);else if(br<lt&&0>u(Mr,rt))ge[ft]=Mr,ge[br]=rt,ft=br;else break e}}return $e}function u(ge,$e){var rt=ge.sortIndex-$e.sortIndex;return rt!==0?rt:ge.id-$e.id}if(typeof performance=="object"&&typeof performance.now=="function"){var h=performance;e.unstable_now=function(){return h.now()}}else{var p=Date,o=p.now();e.unstable_now=function(){return p.now()-o}}var _=[],b=[],P=1,S=null,C=3,L=!1,F=!1,j=!1,G=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function U(ge){for(var $e=r(b);$e!==null;){if($e.callback===null)n(b);else if($e.startTime<=ge)n(b),$e.sortIndex=$e.expirationTime,t(_,$e);else break;$e=r(b)}}function J(ge){if(j=!1,U(ge),!F)if(r(_)!==null)F=!0,Ce(q);else{var $e=r(b);$e!==null&&Le(J,$e.startTime-ge)}}function q(ge,$e){F=!1,j&&(j=!1,$(ue),ue=-1),L=!0;var rt=C;try{for(U($e),S=r(_);S!==null&&(!(S.expirationTime>$e)||ge&&!ze());){var ft=S.callback;if(typeof ft=="function"){S.callback=null,C=S.priorityLevel;var lt=ft(S.expirationTime<=$e);$e=e.unstable_now(),typeof lt=="function"?S.callback=lt:S===r(_)&&n(_),U($e)}else n(_);S=r(_)}if(S!==null)var Tt=!0;else{var qt=r(b);qt!==null&&Le(J,qt.startTime-$e),Tt=!1}return Tt}finally{S=null,C=rt,L=!1}}var Y=!1,X=null,ue=-1,oe=5,Re=-1;function ze(){return!(e.unstable_now()-Re<oe)}function De(){if(X!==null){var ge=e.unstable_now();Re=ge;var $e=!0;try{$e=X(!0,ge)}finally{$e?Je():(Y=!1,X=null)}}else Y=!1}var Je;if(typeof N=="function")Je=function(){N(De)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,ve=we.port2;we.port1.onmessage=De,Je=function(){ve.postMessage(null)}}else Je=function(){G(De,0)};function Ce(ge){X=ge,Y||(Y=!0,Je())}function Le(ge,$e){ue=G(function(){ge(e.unstable_now())},$e)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ge){ge.callback=null},e.unstable_continueExecution=function(){F||L||(F=!0,Ce(q))},e.unstable_forceFrameRate=function(ge){0>ge||125<ge?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):oe=0<ge?Math.floor(1e3/ge):5},e.unstable_getCurrentPriorityLevel=function(){return C},e.unstable_getFirstCallbackNode=function(){return r(_)},e.unstable_next=function(ge){switch(C){case 1:case 2:case 3:var $e=3;break;default:$e=C}var rt=C;C=$e;try{return ge()}finally{C=rt}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ge,$e){switch(ge){case 1:case 2:case 3:case 4:case 5:break;default:ge=3}var rt=C;C=ge;try{return $e()}finally{C=rt}},e.unstable_scheduleCallback=function(ge,$e,rt){var ft=e.unstable_now();switch(typeof rt=="object"&&rt!==null?(rt=rt.delay,rt=typeof rt=="number"&&0<rt?ft+rt:ft):rt=ft,ge){case 1:var lt=-1;break;case 2:lt=250;break;case 5:lt=1073741823;break;case 4:lt=1e4;break;default:lt=5e3}return lt=rt+lt,ge={id:P++,callback:$e,priorityLevel:ge,startTime:rt,expirationTime:lt,sortIndex:-1},rt>ft?(ge.sortIndex=rt,t(b,ge),r(_)===null&&ge===r(b)&&(j?($(ue),ue=-1):j=!0,Le(J,rt-ft))):(ge.sortIndex=lt,t(_,ge),F||L||(F=!0,Ce(q))),ge},e.unstable_shouldYield=ze,e.unstable_wrapCallback=function(ge){var $e=C;return function(){var rt=C;C=$e;try{return ge.apply(this,arguments)}finally{C=rt}}}})(aC);oC.exports=aC;var uF=oC.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cF=Pe,Qo=uF;function Pt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var sC=new Set,lp={};function e1(e,t){qh(e,t),qh(e+"Capture",t)}function qh(e,t){for(lp[e]=t,e=0;e<t.length;e++)sC.add(t[e])}var dl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),M9=Object.prototype.hasOwnProperty,hF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Gw={},Ww={};function fF(e){return M9.call(Ww,e)?!0:M9.call(Gw,e)?!1:hF.test(e)?Ww[e]=!0:(Gw[e]=!0,!1)}function dF(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function pF(e,t,r,n){if(t===null||typeof t>"u"||dF(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function fo(e,t,r,n,u,h,p){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=u,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=h,this.removeEmptyString=p}var Ri={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ri[e]=new fo(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ri[t]=new fo(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ri[e]=new fo(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ri[e]=new fo(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ri[e]=new fo(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ri[e]=new fo(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ri[e]=new fo(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ri[e]=new fo(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ri[e]=new fo(e,5,!1,e.toLowerCase(),null,!1,!1)});var i_=/[\-:]([a-z])/g;function o_(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(i_,o_);Ri[t]=new fo(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(i_,o_);Ri[t]=new fo(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(i_,o_);Ri[t]=new fo(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ri[e]=new fo(e,1,!1,e.toLowerCase(),null,!1,!1)});Ri.xlinkHref=new fo("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ri[e]=new fo(e,1,!1,e.toLowerCase(),null,!0,!0)});function a_(e,t,r,n){var u=Ri.hasOwnProperty(t)?Ri[t]:null;(u!==null?u.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(pF(t,r,u,n)&&(r=null),n||u===null?fF(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):u.mustUseProperty?e[u.propertyName]=r===null?u.type===3?!1:"":r:(t=u.attributeName,n=u.attributeNamespace,r===null?e.removeAttribute(t):(u=u.type,r=u===3||u===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var xl=cF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,J3=Symbol.for("react.element"),yh=Symbol.for("react.portal"),_h=Symbol.for("react.fragment"),s_=Symbol.for("react.strict_mode"),C9=Symbol.for("react.profiler"),lC=Symbol.for("react.provider"),uC=Symbol.for("react.context"),l_=Symbol.for("react.forward_ref"),I9=Symbol.for("react.suspense"),O9=Symbol.for("react.suspense_list"),u_=Symbol.for("react.memo"),iu=Symbol.for("react.lazy"),cC=Symbol.for("react.offscreen"),qw=Symbol.iterator;function yd(e){return e===null||typeof e!="object"?null:(e=qw&&e[qw]||e["@@iterator"],typeof e=="function"?e:null)}var Vn=Object.assign,_8;function Nd(e){if(_8===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);_8=t&&t[1]||""}return`
`+_8+e}var v8=!1;function x8(e,t){if(!e||v8)return"";v8=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(b){var n=b}Reflect.construct(e,[],t)}else{try{t.call()}catch(b){n=b}e.call(t.prototype)}else{try{throw Error()}catch(b){n=b}e()}}catch(b){if(b&&n&&typeof b.stack=="string"){for(var u=b.stack.split(`
`),h=n.stack.split(`
`),p=u.length-1,o=h.length-1;1<=p&&0<=o&&u[p]!==h[o];)o--;for(;1<=p&&0<=o;p--,o--)if(u[p]!==h[o]){if(p!==1||o!==1)do if(p--,o--,0>o||u[p]!==h[o]){var _=`
`+u[p].replace(" at new "," at ");return e.displayName&&_.includes("<anonymous>")&&(_=_.replace("<anonymous>",e.displayName)),_}while(1<=p&&0<=o);break}}}finally{v8=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Nd(e):""}function mF(e){switch(e.tag){case 5:return Nd(e.type);case 16:return Nd("Lazy");case 13:return Nd("Suspense");case 19:return Nd("SuspenseList");case 0:case 2:case 15:return e=x8(e.type,!1),e;case 11:return e=x8(e.type.render,!1),e;case 1:return e=x8(e.type,!0),e;default:return""}}function k9(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case _h:return"Fragment";case yh:return"Portal";case C9:return"Profiler";case s_:return"StrictMode";case I9:return"Suspense";case O9:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case uC:return(e.displayName||"Context")+".Consumer";case lC:return(e._context.displayName||"Context")+".Provider";case l_:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case u_:return t=e.displayName||null,t!==null?t:k9(e.type)||"Memo";case iu:t=e._payload,e=e._init;try{return k9(e(t))}catch{}}return null}function gF(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return k9(t);case 8:return t===s_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Eu(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function hC(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function yF(e){var t=hC(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var u=r.get,h=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return u.call(this)},set:function(p){n=""+p,h.call(this,p)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(p){n=""+p},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Q3(e){e._valueTracker||(e._valueTracker=yF(e))}function fC(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=hC(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function X5(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function D9(e,t){var r=t.checked;return Vn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Hw(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Eu(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function dC(e,t){t=t.checked,t!=null&&a_(e,"checked",t,!1)}function L9(e,t){dC(e,t);var r=Eu(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?z9(e,t.type,r):t.hasOwnProperty("defaultValue")&&z9(e,t.type,Eu(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Zw(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function z9(e,t,r){(t!=="number"||X5(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Ud=Array.isArray;function Dh(e,t,r,n){if(e=e.options,t){t={};for(var u=0;u<r.length;u++)t["$"+r[u]]=!0;for(r=0;r<e.length;r++)u=t.hasOwnProperty("$"+e[r].value),e[r].selected!==u&&(e[r].selected=u),u&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Eu(r),t=null,u=0;u<e.length;u++){if(e[u].value===r){e[u].selected=!0,n&&(e[u].defaultSelected=!0);return}t!==null||e[u].disabled||(t=e[u])}t!==null&&(t.selected=!0)}}function R9(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Pt(91));return Vn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Xw(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Pt(92));if(Ud(r)){if(1<r.length)throw Error(Pt(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Eu(r)}}function pC(e,t){var r=Eu(t.value),n=Eu(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Kw(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function mC(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function B9(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?mC(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var e5,gC=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,u){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,u)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(e5=e5||document.createElement("div"),e5.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=e5.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function up(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Zd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_F=["Webkit","ms","Moz","O"];Object.keys(Zd).forEach(function(e){_F.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Zd[t]=Zd[e]})});function yC(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Zd.hasOwnProperty(e)&&Zd[e]?(""+t).trim():t+"px"}function _C(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,u=yC(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,u):e[r]=u}}var vF=Vn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function F9(e,t){if(t){if(vF[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Pt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Pt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Pt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Pt(62))}}function j9(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $9=null;function c_(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var N9=null,Lh=null,zh=null;function Yw(e){if(e=g2(e)){if(typeof N9!="function")throw Error(Pt(280));var t=e.stateNode;t&&(t=L6(t),N9(e.stateNode,e.type,t))}}function vC(e){Lh?zh?zh.push(e):zh=[e]:Lh=e}function xC(){if(Lh){var e=Lh,t=zh;if(zh=Lh=null,Yw(e),t)for(e=0;e<t.length;e++)Yw(t[e])}}function bC(e,t){return e(t)}function wC(){}var b8=!1;function TC(e,t,r){if(b8)return e(t,r);b8=!0;try{return bC(e,t,r)}finally{b8=!1,(Lh!==null||zh!==null)&&(wC(),xC())}}function cp(e,t){var r=e.stateNode;if(r===null)return null;var n=L6(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Pt(231,t,typeof r));return r}var U9=!1;if(dl)try{var _d={};Object.defineProperty(_d,"passive",{get:function(){U9=!0}}),window.addEventListener("test",_d,_d),window.removeEventListener("test",_d,_d)}catch{U9=!1}function xF(e,t,r,n,u,h,p,o,_){var b=Array.prototype.slice.call(arguments,3);try{t.apply(r,b)}catch(P){this.onError(P)}}var Xd=!1,K5=null,Y5=!1,V9=null,bF={onError:function(e){Xd=!0,K5=e}};function wF(e,t,r,n,u,h,p,o,_){Xd=!1,K5=null,xF.apply(bF,arguments)}function TF(e,t,r,n,u,h,p,o,_){if(wF.apply(this,arguments),Xd){if(Xd){var b=K5;Xd=!1,K5=null}else throw Error(Pt(198));Y5||(Y5=!0,V9=b)}}function t1(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function SC(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Jw(e){if(t1(e)!==e)throw Error(Pt(188))}function SF(e){var t=e.alternate;if(!t){if(t=t1(e),t===null)throw Error(Pt(188));return t!==e?null:e}for(var r=e,n=t;;){var u=r.return;if(u===null)break;var h=u.alternate;if(h===null){if(n=u.return,n!==null){r=n;continue}break}if(u.child===h.child){for(h=u.child;h;){if(h===r)return Jw(u),e;if(h===n)return Jw(u),t;h=h.sibling}throw Error(Pt(188))}if(r.return!==n.return)r=u,n=h;else{for(var p=!1,o=u.child;o;){if(o===r){p=!0,r=u,n=h;break}if(o===n){p=!0,n=u,r=h;break}o=o.sibling}if(!p){for(o=h.child;o;){if(o===r){p=!0,r=h,n=u;break}if(o===n){p=!0,n=h,r=u;break}o=o.sibling}if(!p)throw Error(Pt(189))}}if(r.alternate!==n)throw Error(Pt(190))}if(r.tag!==3)throw Error(Pt(188));return r.stateNode.current===r?e:t}function EC(e){return e=SF(e),e!==null?PC(e):null}function PC(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=PC(e);if(t!==null)return t;e=e.sibling}return null}var AC=Qo.unstable_scheduleCallback,Qw=Qo.unstable_cancelCallback,EF=Qo.unstable_shouldYield,PF=Qo.unstable_requestPaint,Kn=Qo.unstable_now,AF=Qo.unstable_getCurrentPriorityLevel,h_=Qo.unstable_ImmediatePriority,MC=Qo.unstable_UserBlockingPriority,J5=Qo.unstable_NormalPriority,MF=Qo.unstable_LowPriority,CC=Qo.unstable_IdlePriority,I6=null,Es=null;function CF(e){if(Es&&typeof Es.onCommitFiberRoot=="function")try{Es.onCommitFiberRoot(I6,e,void 0,(e.current.flags&128)===128)}catch{}}var ns=Math.clz32?Math.clz32:kF,IF=Math.log,OF=Math.LN2;function kF(e){return e>>>=0,e===0?32:31-(IF(e)/OF|0)|0}var t5=64,r5=4194304;function Vd(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Q5(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,u=e.suspendedLanes,h=e.pingedLanes,p=r&268435455;if(p!==0){var o=p&~u;o!==0?n=Vd(o):(h&=p,h!==0&&(n=Vd(h)))}else p=r&~u,p!==0?n=Vd(p):h!==0&&(n=Vd(h));if(n===0)return 0;if(t!==0&&t!==n&&!(t&u)&&(u=n&-n,h=t&-t,u>=h||u===16&&(h&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-ns(t),u=1<<r,n|=e[r],t&=~u;return n}function DF(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function LF(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,u=e.expirationTimes,h=e.pendingLanes;0<h;){var p=31-ns(h),o=1<<p,_=u[p];_===-1?(!(o&r)||o&n)&&(u[p]=DF(o,t)):_<=t&&(e.expiredLanes|=o),h&=~o}}function G9(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function IC(){var e=t5;return t5<<=1,!(t5&4194240)&&(t5=64),e}function w8(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function p2(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ns(t),e[t]=r}function zF(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var u=31-ns(r),h=1<<u;t[u]=0,n[u]=-1,e[u]=-1,r&=~h}}function f_(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-ns(r),u=1<<n;u&t|e[n]&t&&(e[n]|=t),r&=~u}}var sn=0;function OC(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var kC,d_,DC,LC,zC,W9=!1,n5=[],pu=null,mu=null,gu=null,hp=new Map,fp=new Map,su=[],RF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function eT(e,t){switch(e){case"focusin":case"focusout":pu=null;break;case"dragenter":case"dragleave":mu=null;break;case"mouseover":case"mouseout":gu=null;break;case"pointerover":case"pointerout":hp.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":fp.delete(t.pointerId)}}function vd(e,t,r,n,u,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:h,targetContainers:[u]},t!==null&&(t=g2(t),t!==null&&d_(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,u!==null&&t.indexOf(u)===-1&&t.push(u),e)}function BF(e,t,r,n,u){switch(t){case"focusin":return pu=vd(pu,e,t,r,n,u),!0;case"dragenter":return mu=vd(mu,e,t,r,n,u),!0;case"mouseover":return gu=vd(gu,e,t,r,n,u),!0;case"pointerover":var h=u.pointerId;return hp.set(h,vd(hp.get(h)||null,e,t,r,n,u)),!0;case"gotpointercapture":return h=u.pointerId,fp.set(h,vd(fp.get(h)||null,e,t,r,n,u)),!0}return!1}function RC(e){var t=Ic(e.target);if(t!==null){var r=t1(t);if(r!==null){if(t=r.tag,t===13){if(t=SC(r),t!==null){e.blockedOn=t,zC(e.priority,function(){DC(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function z5(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=q9(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);$9=n,r.target.dispatchEvent(n),$9=null}else return t=g2(r),t!==null&&d_(t),e.blockedOn=r,!1;t.shift()}return!0}function tT(e,t,r){z5(e)&&r.delete(t)}function FF(){W9=!1,pu!==null&&z5(pu)&&(pu=null),mu!==null&&z5(mu)&&(mu=null),gu!==null&&z5(gu)&&(gu=null),hp.forEach(tT),fp.forEach(tT)}function xd(e,t){e.blockedOn===t&&(e.blockedOn=null,W9||(W9=!0,Qo.unstable_scheduleCallback(Qo.unstable_NormalPriority,FF)))}function dp(e){function t(u){return xd(u,e)}if(0<n5.length){xd(n5[0],e);for(var r=1;r<n5.length;r++){var n=n5[r];n.blockedOn===e&&(n.blockedOn=null)}}for(pu!==null&&xd(pu,e),mu!==null&&xd(mu,e),gu!==null&&xd(gu,e),hp.forEach(t),fp.forEach(t),r=0;r<su.length;r++)n=su[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<su.length&&(r=su[0],r.blockedOn===null);)RC(r),r.blockedOn===null&&su.shift()}var Rh=xl.ReactCurrentBatchConfig,e4=!0;function jF(e,t,r,n){var u=sn,h=Rh.transition;Rh.transition=null;try{sn=1,p_(e,t,r,n)}finally{sn=u,Rh.transition=h}}function $F(e,t,r,n){var u=sn,h=Rh.transition;Rh.transition=null;try{sn=4,p_(e,t,r,n)}finally{sn=u,Rh.transition=h}}function p_(e,t,r,n){if(e4){var u=q9(e,t,r,n);if(u===null)k8(e,t,n,t4,r),eT(e,n);else if(BF(u,e,t,r,n))n.stopPropagation();else if(eT(e,n),t&4&&-1<RF.indexOf(e)){for(;u!==null;){var h=g2(u);if(h!==null&&kC(h),h=q9(e,t,r,n),h===null&&k8(e,t,n,t4,r),h===u)break;u=h}u!==null&&n.stopPropagation()}else k8(e,t,n,null,r)}}var t4=null;function q9(e,t,r,n){if(t4=null,e=c_(n),e=Ic(e),e!==null)if(t=t1(e),t===null)e=null;else if(r=t.tag,r===13){if(e=SC(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return t4=e,null}function BC(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(AF()){case h_:return 1;case MC:return 4;case J5:case MF:return 16;case CC:return 536870912;default:return 16}default:return 16}}var cu=null,m_=null,R5=null;function FC(){if(R5)return R5;var e,t=m_,r=t.length,n,u="value"in cu?cu.value:cu.textContent,h=u.length;for(e=0;e<r&&t[e]===u[e];e++);var p=r-e;for(n=1;n<=p&&t[r-n]===u[h-n];n++);return R5=u.slice(e,1<n?1-n:void 0)}function B5(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function i5(){return!0}function rT(){return!1}function ta(e){function t(r,n,u,h,p){this._reactName=r,this._targetInst=u,this.type=n,this.nativeEvent=h,this.target=p,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(h):h[o]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?i5:rT,this.isPropagationStopped=rT,this}return Vn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=i5)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=i5)},persist:function(){},isPersistent:i5}),t}var Af={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},g_=ta(Af),m2=Vn({},Af,{view:0,detail:0}),NF=ta(m2),T8,S8,bd,O6=Vn({},m2,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:y_,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==bd&&(bd&&e.type==="mousemove"?(T8=e.screenX-bd.screenX,S8=e.screenY-bd.screenY):S8=T8=0,bd=e),T8)},movementY:function(e){return"movementY"in e?e.movementY:S8}}),nT=ta(O6),UF=Vn({},O6,{dataTransfer:0}),VF=ta(UF),GF=Vn({},m2,{relatedTarget:0}),E8=ta(GF),WF=Vn({},Af,{animationName:0,elapsedTime:0,pseudoElement:0}),qF=ta(WF),HF=Vn({},Af,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ZF=ta(HF),XF=Vn({},Af,{data:0}),iT=ta(XF),KF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},YF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},JF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function QF(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=JF[e])?!!t[e]:!1}function y_(){return QF}var ej=Vn({},m2,{key:function(e){if(e.key){var t=KF[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=B5(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?YF[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:y_,charCode:function(e){return e.type==="keypress"?B5(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?B5(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),tj=ta(ej),rj=Vn({},O6,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),oT=ta(rj),nj=Vn({},m2,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:y_}),ij=ta(nj),oj=Vn({},Af,{propertyName:0,elapsedTime:0,pseudoElement:0}),aj=ta(oj),sj=Vn({},O6,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),lj=ta(sj),uj=[9,13,27,32],__=dl&&"CompositionEvent"in window,Kd=null;dl&&"documentMode"in document&&(Kd=document.documentMode);var cj=dl&&"TextEvent"in window&&!Kd,jC=dl&&(!__||Kd&&8<Kd&&11>=Kd),aT=String.fromCharCode(32),sT=!1;function $C(e,t){switch(e){case"keyup":return uj.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function NC(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var vh=!1;function hj(e,t){switch(e){case"compositionend":return NC(t);case"keypress":return t.which!==32?null:(sT=!0,aT);case"textInput":return e=t.data,e===aT&&sT?null:e;default:return null}}function fj(e,t){if(vh)return e==="compositionend"||!__&&$C(e,t)?(e=FC(),R5=m_=cu=null,vh=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jC&&t.locale!=="ko"?null:t.data;default:return null}}var dj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lT(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!dj[e.type]:t==="textarea"}function UC(e,t,r,n){vC(n),t=r4(t,"onChange"),0<t.length&&(r=new g_("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Yd=null,pp=null;function pj(e){QC(e,0)}function k6(e){var t=wh(e);if(fC(t))return e}function mj(e,t){if(e==="change")return t}var VC=!1;if(dl){var P8;if(dl){var A8="oninput"in document;if(!A8){var uT=document.createElement("div");uT.setAttribute("oninput","return;"),A8=typeof uT.oninput=="function"}P8=A8}else P8=!1;VC=P8&&(!document.documentMode||9<document.documentMode)}function cT(){Yd&&(Yd.detachEvent("onpropertychange",GC),pp=Yd=null)}function GC(e){if(e.propertyName==="value"&&k6(pp)){var t=[];UC(t,pp,e,c_(e)),TC(pj,t)}}function gj(e,t,r){e==="focusin"?(cT(),Yd=t,pp=r,Yd.attachEvent("onpropertychange",GC)):e==="focusout"&&cT()}function yj(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return k6(pp)}function _j(e,t){if(e==="click")return k6(t)}function vj(e,t){if(e==="input"||e==="change")return k6(t)}function xj(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var as=typeof Object.is=="function"?Object.is:xj;function mp(e,t){if(as(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var u=r[n];if(!M9.call(t,u)||!as(e[u],t[u]))return!1}return!0}function hT(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fT(e,t){var r=hT(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=hT(r)}}function WC(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?WC(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function qC(){for(var e=window,t=X5();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=X5(e.document)}return t}function v_(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function bj(e){var t=qC(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&WC(r.ownerDocument.documentElement,r)){if(n!==null&&v_(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var u=r.textContent.length,h=Math.min(n.start,u);n=n.end===void 0?h:Math.min(n.end,u),!e.extend&&h>n&&(u=n,n=h,h=u),u=fT(r,h);var p=fT(r,n);u&&p&&(e.rangeCount!==1||e.anchorNode!==u.node||e.anchorOffset!==u.offset||e.focusNode!==p.node||e.focusOffset!==p.offset)&&(t=t.createRange(),t.setStart(u.node,u.offset),e.removeAllRanges(),h>n?(e.addRange(t),e.extend(p.node,p.offset)):(t.setEnd(p.node,p.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var wj=dl&&"documentMode"in document&&11>=document.documentMode,xh=null,H9=null,Jd=null,Z9=!1;function dT(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Z9||xh==null||xh!==X5(n)||(n=xh,"selectionStart"in n&&v_(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Jd&&mp(Jd,n)||(Jd=n,n=r4(H9,"onSelect"),0<n.length&&(t=new g_("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=xh)))}function o5(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var bh={animationend:o5("Animation","AnimationEnd"),animationiteration:o5("Animation","AnimationIteration"),animationstart:o5("Animation","AnimationStart"),transitionend:o5("Transition","TransitionEnd")},M8={},HC={};dl&&(HC=document.createElement("div").style,"AnimationEvent"in window||(delete bh.animationend.animation,delete bh.animationiteration.animation,delete bh.animationstart.animation),"TransitionEvent"in window||delete bh.transitionend.transition);function D6(e){if(M8[e])return M8[e];if(!bh[e])return e;var t=bh[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in HC)return M8[e]=t[r];return e}var ZC=D6("animationend"),XC=D6("animationiteration"),KC=D6("animationstart"),YC=D6("transitionend"),JC=new Map,pT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mu(e,t){JC.set(e,t),e1(t,[e])}for(var C8=0;C8<pT.length;C8++){var I8=pT[C8],Tj=I8.toLowerCase(),Sj=I8[0].toUpperCase()+I8.slice(1);Mu(Tj,"on"+Sj)}Mu(ZC,"onAnimationEnd");Mu(XC,"onAnimationIteration");Mu(KC,"onAnimationStart");Mu("dblclick","onDoubleClick");Mu("focusin","onFocus");Mu("focusout","onBlur");Mu(YC,"onTransitionEnd");qh("onMouseEnter",["mouseout","mouseover"]);qh("onMouseLeave",["mouseout","mouseover"]);qh("onPointerEnter",["pointerout","pointerover"]);qh("onPointerLeave",["pointerout","pointerover"]);e1("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));e1("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));e1("onBeforeInput",["compositionend","keypress","textInput","paste"]);e1("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));e1("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));e1("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ej=new Set("cancel close invalid load scroll toggle".split(" ").concat(Gd));function mT(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,TF(n,t,void 0,e),e.currentTarget=null}function QC(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],u=n.event;n=n.listeners;e:{var h=void 0;if(t)for(var p=n.length-1;0<=p;p--){var o=n[p],_=o.instance,b=o.currentTarget;if(o=o.listener,_!==h&&u.isPropagationStopped())break e;mT(u,o,b),h=_}else for(p=0;p<n.length;p++){if(o=n[p],_=o.instance,b=o.currentTarget,o=o.listener,_!==h&&u.isPropagationStopped())break e;mT(u,o,b),h=_}}}if(Y5)throw e=V9,Y5=!1,V9=null,e}function wn(e,t){var r=t[Q9];r===void 0&&(r=t[Q9]=new Set);var n=e+"__bubble";r.has(n)||(eI(t,e,2,!1),r.add(n))}function O8(e,t,r){var n=0;t&&(n|=4),eI(r,e,n,t)}var a5="_reactListening"+Math.random().toString(36).slice(2);function gp(e){if(!e[a5]){e[a5]=!0,sC.forEach(function(r){r!=="selectionchange"&&(Ej.has(r)||O8(r,!1,e),O8(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[a5]||(t[a5]=!0,O8("selectionchange",!1,t))}}function eI(e,t,r,n){switch(BC(t)){case 1:var u=jF;break;case 4:u=$F;break;default:u=p_}r=u.bind(null,t,r,e),u=void 0,!U9||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(u=!0),n?u!==void 0?e.addEventListener(t,r,{capture:!0,passive:u}):e.addEventListener(t,r,!0):u!==void 0?e.addEventListener(t,r,{passive:u}):e.addEventListener(t,r,!1)}function k8(e,t,r,n,u){var h=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var p=n.tag;if(p===3||p===4){var o=n.stateNode.containerInfo;if(o===u||o.nodeType===8&&o.parentNode===u)break;if(p===4)for(p=n.return;p!==null;){var _=p.tag;if((_===3||_===4)&&(_=p.stateNode.containerInfo,_===u||_.nodeType===8&&_.parentNode===u))return;p=p.return}for(;o!==null;){if(p=Ic(o),p===null)return;if(_=p.tag,_===5||_===6){n=h=p;continue e}o=o.parentNode}}n=n.return}TC(function(){var b=h,P=c_(r),S=[];e:{var C=JC.get(e);if(C!==void 0){var L=g_,F=e;switch(e){case"keypress":if(B5(r)===0)break e;case"keydown":case"keyup":L=tj;break;case"focusin":F="focus",L=E8;break;case"focusout":F="blur",L=E8;break;case"beforeblur":case"afterblur":L=E8;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":L=nT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":L=VF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":L=ij;break;case ZC:case XC:case KC:L=qF;break;case YC:L=aj;break;case"scroll":L=NF;break;case"wheel":L=lj;break;case"copy":case"cut":case"paste":L=ZF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":L=oT}var j=(t&4)!==0,G=!j&&e==="scroll",$=j?C!==null?C+"Capture":null:C;j=[];for(var N=b,U;N!==null;){U=N;var J=U.stateNode;if(U.tag===5&&J!==null&&(U=J,$!==null&&(J=cp(N,$),J!=null&&j.push(yp(N,J,U)))),G)break;N=N.return}0<j.length&&(C=new L(C,F,null,r,P),S.push({event:C,listeners:j}))}}if(!(t&7)){e:{if(C=e==="mouseover"||e==="pointerover",L=e==="mouseout"||e==="pointerout",C&&r!==$9&&(F=r.relatedTarget||r.fromElement)&&(Ic(F)||F[pl]))break e;if((L||C)&&(C=P.window===P?P:(C=P.ownerDocument)?C.defaultView||C.parentWindow:window,L?(F=r.relatedTarget||r.toElement,L=b,F=F?Ic(F):null,F!==null&&(G=t1(F),F!==G||F.tag!==5&&F.tag!==6)&&(F=null)):(L=null,F=b),L!==F)){if(j=nT,J="onMouseLeave",$="onMouseEnter",N="mouse",(e==="pointerout"||e==="pointerover")&&(j=oT,J="onPointerLeave",$="onPointerEnter",N="pointer"),G=L==null?C:wh(L),U=F==null?C:wh(F),C=new j(J,N+"leave",L,r,P),C.target=G,C.relatedTarget=U,J=null,Ic(P)===b&&(j=new j($,N+"enter",F,r,P),j.target=U,j.relatedTarget=G,J=j),G=J,L&&F)t:{for(j=L,$=F,N=0,U=j;U;U=oh(U))N++;for(U=0,J=$;J;J=oh(J))U++;for(;0<N-U;)j=oh(j),N--;for(;0<U-N;)$=oh($),U--;for(;N--;){if(j===$||$!==null&&j===$.alternate)break t;j=oh(j),$=oh($)}j=null}else j=null;L!==null&&gT(S,C,L,j,!1),F!==null&&G!==null&&gT(S,G,F,j,!0)}}e:{if(C=b?wh(b):window,L=C.nodeName&&C.nodeName.toLowerCase(),L==="select"||L==="input"&&C.type==="file")var q=mj;else if(lT(C))if(VC)q=vj;else{q=yj;var Y=gj}else(L=C.nodeName)&&L.toLowerCase()==="input"&&(C.type==="checkbox"||C.type==="radio")&&(q=_j);if(q&&(q=q(e,b))){UC(S,q,r,P);break e}Y&&Y(e,C,b),e==="focusout"&&(Y=C._wrapperState)&&Y.controlled&&C.type==="number"&&z9(C,"number",C.value)}switch(Y=b?wh(b):window,e){case"focusin":(lT(Y)||Y.contentEditable==="true")&&(xh=Y,H9=b,Jd=null);break;case"focusout":Jd=H9=xh=null;break;case"mousedown":Z9=!0;break;case"contextmenu":case"mouseup":case"dragend":Z9=!1,dT(S,r,P);break;case"selectionchange":if(wj)break;case"keydown":case"keyup":dT(S,r,P)}var X;if(__)e:{switch(e){case"compositionstart":var ue="onCompositionStart";break e;case"compositionend":ue="onCompositionEnd";break e;case"compositionupdate":ue="onCompositionUpdate";break e}ue=void 0}else vh?$C(e,r)&&(ue="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(ue="onCompositionStart");ue&&(jC&&r.locale!=="ko"&&(vh||ue!=="onCompositionStart"?ue==="onCompositionEnd"&&vh&&(X=FC()):(cu=P,m_="value"in cu?cu.value:cu.textContent,vh=!0)),Y=r4(b,ue),0<Y.length&&(ue=new iT(ue,e,null,r,P),S.push({event:ue,listeners:Y}),X?ue.data=X:(X=NC(r),X!==null&&(ue.data=X)))),(X=cj?hj(e,r):fj(e,r))&&(b=r4(b,"onBeforeInput"),0<b.length&&(P=new iT("onBeforeInput","beforeinput",null,r,P),S.push({event:P,listeners:b}),P.data=X))}QC(S,t)})}function yp(e,t,r){return{instance:e,listener:t,currentTarget:r}}function r4(e,t){for(var r=t+"Capture",n=[];e!==null;){var u=e,h=u.stateNode;u.tag===5&&h!==null&&(u=h,h=cp(e,r),h!=null&&n.unshift(yp(e,h,u)),h=cp(e,t),h!=null&&n.push(yp(e,h,u))),e=e.return}return n}function oh(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function gT(e,t,r,n,u){for(var h=t._reactName,p=[];r!==null&&r!==n;){var o=r,_=o.alternate,b=o.stateNode;if(_!==null&&_===n)break;o.tag===5&&b!==null&&(o=b,u?(_=cp(r,h),_!=null&&p.unshift(yp(r,_,o))):u||(_=cp(r,h),_!=null&&p.push(yp(r,_,o)))),r=r.return}p.length!==0&&e.push({event:t,listeners:p})}var Pj=/\r\n?/g,Aj=/\u0000|\uFFFD/g;function yT(e){return(typeof e=="string"?e:""+e).replace(Pj,`
`).replace(Aj,"")}function s5(e,t,r){if(t=yT(t),yT(e)!==t&&r)throw Error(Pt(425))}function n4(){}var X9=null,K9=null;function Y9(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var J9=typeof setTimeout=="function"?setTimeout:void 0,Mj=typeof clearTimeout=="function"?clearTimeout:void 0,_T=typeof Promise=="function"?Promise:void 0,Cj=typeof queueMicrotask=="function"?queueMicrotask:typeof _T<"u"?function(e){return _T.resolve(null).then(e).catch(Ij)}:J9;function Ij(e){setTimeout(function(){throw e})}function D8(e,t){var r=t,n=0;do{var u=r.nextSibling;if(e.removeChild(r),u&&u.nodeType===8)if(r=u.data,r==="/$"){if(n===0){e.removeChild(u),dp(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=u}while(r);dp(t)}function yu(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function vT(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Mf=Math.random().toString(36).slice(2),Ts="__reactFiber$"+Mf,_p="__reactProps$"+Mf,pl="__reactContainer$"+Mf,Q9="__reactEvents$"+Mf,Oj="__reactListeners$"+Mf,kj="__reactHandles$"+Mf;function Ic(e){var t=e[Ts];if(t)return t;for(var r=e.parentNode;r;){if(t=r[pl]||r[Ts]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=vT(e);e!==null;){if(r=e[Ts])return r;e=vT(e)}return t}e=r,r=e.parentNode}return null}function g2(e){return e=e[Ts]||e[pl],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function wh(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Pt(33))}function L6(e){return e[_p]||null}var eg=[],Th=-1;function Cu(e){return{current:e}}function En(e){0>Th||(e.current=eg[Th],eg[Th]=null,Th--)}function _n(e,t){Th++,eg[Th]=e.current,e.current=t}var Pu={},eo=Cu(Pu),Io=Cu(!1),Vc=Pu;function Hh(e,t){var r=e.type.contextTypes;if(!r)return Pu;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var u={},h;for(h in r)u[h]=t[h];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=u),u}function Oo(e){return e=e.childContextTypes,e!=null}function i4(){En(Io),En(eo)}function xT(e,t,r){if(eo.current!==Pu)throw Error(Pt(168));_n(eo,t),_n(Io,r)}function tI(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var u in n)if(!(u in t))throw Error(Pt(108,gF(e)||"Unknown",u));return Vn({},r,n)}function o4(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Pu,Vc=eo.current,_n(eo,e),_n(Io,Io.current),!0}function bT(e,t,r){var n=e.stateNode;if(!n)throw Error(Pt(169));r?(e=tI(e,t,Vc),n.__reactInternalMemoizedMergedChildContext=e,En(Io),En(eo),_n(eo,e)):En(Io),_n(Io,r)}var rl=null,z6=!1,L8=!1;function rI(e){rl===null?rl=[e]:rl.push(e)}function Dj(e){z6=!0,rI(e)}function Iu(){if(!L8&&rl!==null){L8=!0;var e=0,t=sn;try{var r=rl;for(sn=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}rl=null,z6=!1}catch(u){throw rl!==null&&(rl=rl.slice(e+1)),AC(h_,Iu),u}finally{sn=t,L8=!1}}return null}var Sh=[],Eh=0,a4=null,s4=0,_a=[],va=0,Gc=null,nl=1,il="";function Tc(e,t){Sh[Eh++]=s4,Sh[Eh++]=a4,a4=e,s4=t}function nI(e,t,r){_a[va++]=nl,_a[va++]=il,_a[va++]=Gc,Gc=e;var n=nl;e=il;var u=32-ns(n)-1;n&=~(1<<u),r+=1;var h=32-ns(t)+u;if(30<h){var p=u-u%5;h=(n&(1<<p)-1).toString(32),n>>=p,u-=p,nl=1<<32-ns(t)+u|r<<u|n,il=h+e}else nl=1<<h|r<<u|n,il=e}function x_(e){e.return!==null&&(Tc(e,1),nI(e,1,0))}function b_(e){for(;e===a4;)a4=Sh[--Eh],Sh[Eh]=null,s4=Sh[--Eh],Sh[Eh]=null;for(;e===Gc;)Gc=_a[--va],_a[va]=null,il=_a[--va],_a[va]=null,nl=_a[--va],_a[va]=null}var Jo=null,Yo=null,Cn=!1,Qa=null;function iI(e,t){var r=xa(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function wT(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Jo=e,Yo=yu(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Jo=e,Yo=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Gc!==null?{id:nl,overflow:il}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=xa(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Jo=e,Yo=null,!0):!1;default:return!1}}function tg(e){return(e.mode&1)!==0&&(e.flags&128)===0}function rg(e){if(Cn){var t=Yo;if(t){var r=t;if(!wT(e,t)){if(tg(e))throw Error(Pt(418));t=yu(r.nextSibling);var n=Jo;t&&wT(e,t)?iI(n,r):(e.flags=e.flags&-4097|2,Cn=!1,Jo=e)}}else{if(tg(e))throw Error(Pt(418));e.flags=e.flags&-4097|2,Cn=!1,Jo=e}}}function TT(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Jo=e}function l5(e){if(e!==Jo)return!1;if(!Cn)return TT(e),Cn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Y9(e.type,e.memoizedProps)),t&&(t=Yo)){if(tg(e))throw oI(),Error(Pt(418));for(;t;)iI(e,t),t=yu(t.nextSibling)}if(TT(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Pt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Yo=yu(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Yo=null}}else Yo=Jo?yu(e.stateNode.nextSibling):null;return!0}function oI(){for(var e=Yo;e;)e=yu(e.nextSibling)}function Zh(){Yo=Jo=null,Cn=!1}function w_(e){Qa===null?Qa=[e]:Qa.push(e)}var Lj=xl.ReactCurrentBatchConfig;function wd(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Pt(309));var n=r.stateNode}if(!n)throw Error(Pt(147,e));var u=n,h=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===h?t.ref:(t=function(p){var o=u.refs;p===null?delete o[h]:o[h]=p},t._stringRef=h,t)}if(typeof e!="string")throw Error(Pt(284));if(!r._owner)throw Error(Pt(290,e))}return e}function u5(e,t){throw e=Object.prototype.toString.call(t),Error(Pt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ST(e){var t=e._init;return t(e._payload)}function aI(e){function t($,N){if(e){var U=$.deletions;U===null?($.deletions=[N],$.flags|=16):U.push(N)}}function r($,N){if(!e)return null;for(;N!==null;)t($,N),N=N.sibling;return null}function n($,N){for($=new Map;N!==null;)N.key!==null?$.set(N.key,N):$.set(N.index,N),N=N.sibling;return $}function u($,N){return $=bu($,N),$.index=0,$.sibling=null,$}function h($,N,U){return $.index=U,e?(U=$.alternate,U!==null?(U=U.index,U<N?($.flags|=2,N):U):($.flags|=2,N)):($.flags|=1048576,N)}function p($){return e&&$.alternate===null&&($.flags|=2),$}function o($,N,U,J){return N===null||N.tag!==6?(N=N8(U,$.mode,J),N.return=$,N):(N=u(N,U),N.return=$,N)}function _($,N,U,J){var q=U.type;return q===_h?P($,N,U.props.children,J,U.key):N!==null&&(N.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===iu&&ST(q)===N.type)?(J=u(N,U.props),J.ref=wd($,N,U),J.return=$,J):(J=G5(U.type,U.key,U.props,null,$.mode,J),J.ref=wd($,N,U),J.return=$,J)}function b($,N,U,J){return N===null||N.tag!==4||N.stateNode.containerInfo!==U.containerInfo||N.stateNode.implementation!==U.implementation?(N=U8(U,$.mode,J),N.return=$,N):(N=u(N,U.children||[]),N.return=$,N)}function P($,N,U,J,q){return N===null||N.tag!==7?(N=jc(U,$.mode,J,q),N.return=$,N):(N=u(N,U),N.return=$,N)}function S($,N,U){if(typeof N=="string"&&N!==""||typeof N=="number")return N=N8(""+N,$.mode,U),N.return=$,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case J3:return U=G5(N.type,N.key,N.props,null,$.mode,U),U.ref=wd($,null,N),U.return=$,U;case yh:return N=U8(N,$.mode,U),N.return=$,N;case iu:var J=N._init;return S($,J(N._payload),U)}if(Ud(N)||yd(N))return N=jc(N,$.mode,U,null),N.return=$,N;u5($,N)}return null}function C($,N,U,J){var q=N!==null?N.key:null;if(typeof U=="string"&&U!==""||typeof U=="number")return q!==null?null:o($,N,""+U,J);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case J3:return U.key===q?_($,N,U,J):null;case yh:return U.key===q?b($,N,U,J):null;case iu:return q=U._init,C($,N,q(U._payload),J)}if(Ud(U)||yd(U))return q!==null?null:P($,N,U,J,null);u5($,U)}return null}function L($,N,U,J,q){if(typeof J=="string"&&J!==""||typeof J=="number")return $=$.get(U)||null,o(N,$,""+J,q);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case J3:return $=$.get(J.key===null?U:J.key)||null,_(N,$,J,q);case yh:return $=$.get(J.key===null?U:J.key)||null,b(N,$,J,q);case iu:var Y=J._init;return L($,N,U,Y(J._payload),q)}if(Ud(J)||yd(J))return $=$.get(U)||null,P(N,$,J,q,null);u5(N,J)}return null}function F($,N,U,J){for(var q=null,Y=null,X=N,ue=N=0,oe=null;X!==null&&ue<U.length;ue++){X.index>ue?(oe=X,X=null):oe=X.sibling;var Re=C($,X,U[ue],J);if(Re===null){X===null&&(X=oe);break}e&&X&&Re.alternate===null&&t($,X),N=h(Re,N,ue),Y===null?q=Re:Y.sibling=Re,Y=Re,X=oe}if(ue===U.length)return r($,X),Cn&&Tc($,ue),q;if(X===null){for(;ue<U.length;ue++)X=S($,U[ue],J),X!==null&&(N=h(X,N,ue),Y===null?q=X:Y.sibling=X,Y=X);return Cn&&Tc($,ue),q}for(X=n($,X);ue<U.length;ue++)oe=L(X,$,ue,U[ue],J),oe!==null&&(e&&oe.alternate!==null&&X.delete(oe.key===null?ue:oe.key),N=h(oe,N,ue),Y===null?q=oe:Y.sibling=oe,Y=oe);return e&&X.forEach(function(ze){return t($,ze)}),Cn&&Tc($,ue),q}function j($,N,U,J){var q=yd(U);if(typeof q!="function")throw Error(Pt(150));if(U=q.call(U),U==null)throw Error(Pt(151));for(var Y=q=null,X=N,ue=N=0,oe=null,Re=U.next();X!==null&&!Re.done;ue++,Re=U.next()){X.index>ue?(oe=X,X=null):oe=X.sibling;var ze=C($,X,Re.value,J);if(ze===null){X===null&&(X=oe);break}e&&X&&ze.alternate===null&&t($,X),N=h(ze,N,ue),Y===null?q=ze:Y.sibling=ze,Y=ze,X=oe}if(Re.done)return r($,X),Cn&&Tc($,ue),q;if(X===null){for(;!Re.done;ue++,Re=U.next())Re=S($,Re.value,J),Re!==null&&(N=h(Re,N,ue),Y===null?q=Re:Y.sibling=Re,Y=Re);return Cn&&Tc($,ue),q}for(X=n($,X);!Re.done;ue++,Re=U.next())Re=L(X,$,ue,Re.value,J),Re!==null&&(e&&Re.alternate!==null&&X.delete(Re.key===null?ue:Re.key),N=h(Re,N,ue),Y===null?q=Re:Y.sibling=Re,Y=Re);return e&&X.forEach(function(De){return t($,De)}),Cn&&Tc($,ue),q}function G($,N,U,J){if(typeof U=="object"&&U!==null&&U.type===_h&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case J3:e:{for(var q=U.key,Y=N;Y!==null;){if(Y.key===q){if(q=U.type,q===_h){if(Y.tag===7){r($,Y.sibling),N=u(Y,U.props.children),N.return=$,$=N;break e}}else if(Y.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===iu&&ST(q)===Y.type){r($,Y.sibling),N=u(Y,U.props),N.ref=wd($,Y,U),N.return=$,$=N;break e}r($,Y);break}else t($,Y);Y=Y.sibling}U.type===_h?(N=jc(U.props.children,$.mode,J,U.key),N.return=$,$=N):(J=G5(U.type,U.key,U.props,null,$.mode,J),J.ref=wd($,N,U),J.return=$,$=J)}return p($);case yh:e:{for(Y=U.key;N!==null;){if(N.key===Y)if(N.tag===4&&N.stateNode.containerInfo===U.containerInfo&&N.stateNode.implementation===U.implementation){r($,N.sibling),N=u(N,U.children||[]),N.return=$,$=N;break e}else{r($,N);break}else t($,N);N=N.sibling}N=U8(U,$.mode,J),N.return=$,$=N}return p($);case iu:return Y=U._init,G($,N,Y(U._payload),J)}if(Ud(U))return F($,N,U,J);if(yd(U))return j($,N,U,J);u5($,U)}return typeof U=="string"&&U!==""||typeof U=="number"?(U=""+U,N!==null&&N.tag===6?(r($,N.sibling),N=u(N,U),N.return=$,$=N):(r($,N),N=N8(U,$.mode,J),N.return=$,$=N),p($)):r($,N)}return G}var Xh=aI(!0),sI=aI(!1),l4=Cu(null),u4=null,Ph=null,T_=null;function S_(){T_=Ph=u4=null}function E_(e){var t=l4.current;En(l4),e._currentValue=t}function ng(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Bh(e,t){u4=e,T_=Ph=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Mo=!0),e.firstContext=null)}function Ea(e){var t=e._currentValue;if(T_!==e)if(e={context:e,memoizedValue:t,next:null},Ph===null){if(u4===null)throw Error(Pt(308));Ph=e,u4.dependencies={lanes:0,firstContext:e}}else Ph=Ph.next=e;return t}var Oc=null;function P_(e){Oc===null?Oc=[e]:Oc.push(e)}function lI(e,t,r,n){var u=t.interleaved;return u===null?(r.next=r,P_(t)):(r.next=u.next,u.next=r),t.interleaved=r,ml(e,n)}function ml(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var ou=!1;function A_(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function uI(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ll(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function _u(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Rr&2){var u=n.pending;return u===null?t.next=t:(t.next=u.next,u.next=t),n.pending=t,ml(e,r)}return u=n.interleaved,u===null?(t.next=t,P_(n)):(t.next=u.next,u.next=t),n.interleaved=t,ml(e,r)}function F5(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,f_(e,r)}}function ET(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var u=null,h=null;if(r=r.firstBaseUpdate,r!==null){do{var p={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};h===null?u=h=p:h=h.next=p,r=r.next}while(r!==null);h===null?u=h=t:h=h.next=t}else u=h=t;r={baseState:n.baseState,firstBaseUpdate:u,lastBaseUpdate:h,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function c4(e,t,r,n){var u=e.updateQueue;ou=!1;var h=u.firstBaseUpdate,p=u.lastBaseUpdate,o=u.shared.pending;if(o!==null){u.shared.pending=null;var _=o,b=_.next;_.next=null,p===null?h=b:p.next=b,p=_;var P=e.alternate;P!==null&&(P=P.updateQueue,o=P.lastBaseUpdate,o!==p&&(o===null?P.firstBaseUpdate=b:o.next=b,P.lastBaseUpdate=_))}if(h!==null){var S=u.baseState;p=0,P=b=_=null,o=h;do{var C=o.lane,L=o.eventTime;if((n&C)===C){P!==null&&(P=P.next={eventTime:L,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var F=e,j=o;switch(C=t,L=r,j.tag){case 1:if(F=j.payload,typeof F=="function"){S=F.call(L,S,C);break e}S=F;break e;case 3:F.flags=F.flags&-65537|128;case 0:if(F=j.payload,C=typeof F=="function"?F.call(L,S,C):F,C==null)break e;S=Vn({},S,C);break e;case 2:ou=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,C=u.effects,C===null?u.effects=[o]:C.push(o))}else L={eventTime:L,lane:C,tag:o.tag,payload:o.payload,callback:o.callback,next:null},P===null?(b=P=L,_=S):P=P.next=L,p|=C;if(o=o.next,o===null){if(o=u.shared.pending,o===null)break;C=o,o=C.next,C.next=null,u.lastBaseUpdate=C,u.shared.pending=null}}while(1);if(P===null&&(_=S),u.baseState=_,u.firstBaseUpdate=b,u.lastBaseUpdate=P,t=u.shared.interleaved,t!==null){u=t;do p|=u.lane,u=u.next;while(u!==t)}else h===null&&(u.shared.lanes=0);qc|=p,e.lanes=p,e.memoizedState=S}}function PT(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],u=n.callback;if(u!==null){if(n.callback=null,n=r,typeof u!="function")throw Error(Pt(191,u));u.call(n)}}}var y2={},Ps=Cu(y2),vp=Cu(y2),xp=Cu(y2);function kc(e){if(e===y2)throw Error(Pt(174));return e}function M_(e,t){switch(_n(xp,t),_n(vp,e),_n(Ps,y2),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:B9(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=B9(t,e)}En(Ps),_n(Ps,t)}function Kh(){En(Ps),En(vp),En(xp)}function cI(e){kc(xp.current);var t=kc(Ps.current),r=B9(t,e.type);t!==r&&(_n(vp,e),_n(Ps,r))}function C_(e){vp.current===e&&(En(Ps),En(vp))}var Nn=Cu(0);function h4(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var z8=[];function I_(){for(var e=0;e<z8.length;e++)z8[e]._workInProgressVersionPrimary=null;z8.length=0}var j5=xl.ReactCurrentDispatcher,R8=xl.ReactCurrentBatchConfig,Wc=0,Un=null,ci=null,wi=null,f4=!1,Qd=!1,bp=0,zj=0;function Hi(){throw Error(Pt(321))}function O_(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!as(e[r],t[r]))return!1;return!0}function k_(e,t,r,n,u,h){if(Wc=h,Un=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,j5.current=e===null||e.memoizedState===null?jj:$j,e=r(n,u),Qd){h=0;do{if(Qd=!1,bp=0,25<=h)throw Error(Pt(301));h+=1,wi=ci=null,t.updateQueue=null,j5.current=Nj,e=r(n,u)}while(Qd)}if(j5.current=d4,t=ci!==null&&ci.next!==null,Wc=0,wi=ci=Un=null,f4=!1,t)throw Error(Pt(300));return e}function D_(){var e=bp!==0;return bp=0,e}function ws(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wi===null?Un.memoizedState=wi=e:wi=wi.next=e,wi}function Pa(){if(ci===null){var e=Un.alternate;e=e!==null?e.memoizedState:null}else e=ci.next;var t=wi===null?Un.memoizedState:wi.next;if(t!==null)wi=t,ci=e;else{if(e===null)throw Error(Pt(310));ci=e,e={memoizedState:ci.memoizedState,baseState:ci.baseState,baseQueue:ci.baseQueue,queue:ci.queue,next:null},wi===null?Un.memoizedState=wi=e:wi=wi.next=e}return wi}function wp(e,t){return typeof t=="function"?t(e):t}function B8(e){var t=Pa(),r=t.queue;if(r===null)throw Error(Pt(311));r.lastRenderedReducer=e;var n=ci,u=n.baseQueue,h=r.pending;if(h!==null){if(u!==null){var p=u.next;u.next=h.next,h.next=p}n.baseQueue=u=h,r.pending=null}if(u!==null){h=u.next,n=n.baseState;var o=p=null,_=null,b=h;do{var P=b.lane;if((Wc&P)===P)_!==null&&(_=_.next={lane:0,action:b.action,hasEagerState:b.hasEagerState,eagerState:b.eagerState,next:null}),n=b.hasEagerState?b.eagerState:e(n,b.action);else{var S={lane:P,action:b.action,hasEagerState:b.hasEagerState,eagerState:b.eagerState,next:null};_===null?(o=_=S,p=n):_=_.next=S,Un.lanes|=P,qc|=P}b=b.next}while(b!==null&&b!==h);_===null?p=n:_.next=o,as(n,t.memoizedState)||(Mo=!0),t.memoizedState=n,t.baseState=p,t.baseQueue=_,r.lastRenderedState=n}if(e=r.interleaved,e!==null){u=e;do h=u.lane,Un.lanes|=h,qc|=h,u=u.next;while(u!==e)}else u===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function F8(e){var t=Pa(),r=t.queue;if(r===null)throw Error(Pt(311));r.lastRenderedReducer=e;var n=r.dispatch,u=r.pending,h=t.memoizedState;if(u!==null){r.pending=null;var p=u=u.next;do h=e(h,p.action),p=p.next;while(p!==u);as(h,t.memoizedState)||(Mo=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),r.lastRenderedState=h}return[h,n]}function hI(){}function fI(e,t){var r=Un,n=Pa(),u=t(),h=!as(n.memoizedState,u);if(h&&(n.memoizedState=u,Mo=!0),n=n.queue,L_(mI.bind(null,r,n,e),[e]),n.getSnapshot!==t||h||wi!==null&&wi.memoizedState.tag&1){if(r.flags|=2048,Tp(9,pI.bind(null,r,n,u,t),void 0,null),Si===null)throw Error(Pt(349));Wc&30||dI(r,t,u)}return u}function dI(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Un.updateQueue,t===null?(t={lastEffect:null,stores:null},Un.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function pI(e,t,r,n){t.value=r,t.getSnapshot=n,gI(t)&&yI(e)}function mI(e,t,r){return r(function(){gI(t)&&yI(e)})}function gI(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!as(e,r)}catch{return!0}}function yI(e){var t=ml(e,1);t!==null&&is(t,e,1,-1)}function AT(e){var t=ws();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wp,lastRenderedState:e},t.queue=e,e=e.dispatch=Fj.bind(null,Un,e),[t.memoizedState,e]}function Tp(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Un.updateQueue,t===null?(t={lastEffect:null,stores:null},Un.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function _I(){return Pa().memoizedState}function $5(e,t,r,n){var u=ws();Un.flags|=e,u.memoizedState=Tp(1|t,r,void 0,n===void 0?null:n)}function R6(e,t,r,n){var u=Pa();n=n===void 0?null:n;var h=void 0;if(ci!==null){var p=ci.memoizedState;if(h=p.destroy,n!==null&&O_(n,p.deps)){u.memoizedState=Tp(t,r,h,n);return}}Un.flags|=e,u.memoizedState=Tp(1|t,r,h,n)}function MT(e,t){return $5(8390656,8,e,t)}function L_(e,t){return R6(2048,8,e,t)}function vI(e,t){return R6(4,2,e,t)}function xI(e,t){return R6(4,4,e,t)}function bI(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function wI(e,t,r){return r=r!=null?r.concat([e]):null,R6(4,4,bI.bind(null,t,e),r)}function z_(){}function TI(e,t){var r=Pa();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&O_(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function SI(e,t){var r=Pa();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&O_(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function EI(e,t,r){return Wc&21?(as(r,t)||(r=IC(),Un.lanes|=r,qc|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Mo=!0),e.memoizedState=r)}function Rj(e,t){var r=sn;sn=r!==0&&4>r?r:4,e(!0);var n=R8.transition;R8.transition={};try{e(!1),t()}finally{sn=r,R8.transition=n}}function PI(){return Pa().memoizedState}function Bj(e,t,r){var n=xu(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},AI(e))MI(t,r);else if(r=lI(e,t,r,n),r!==null){var u=co();is(r,e,n,u),CI(r,t,n)}}function Fj(e,t,r){var n=xu(e),u={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(AI(e))MI(t,u);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var p=t.lastRenderedState,o=h(p,r);if(u.hasEagerState=!0,u.eagerState=o,as(o,p)){var _=t.interleaved;_===null?(u.next=u,P_(t)):(u.next=_.next,_.next=u),t.interleaved=u;return}}catch{}finally{}r=lI(e,t,u,n),r!==null&&(u=co(),is(r,e,n,u),CI(r,t,n))}}function AI(e){var t=e.alternate;return e===Un||t!==null&&t===Un}function MI(e,t){Qd=f4=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function CI(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,f_(e,r)}}var d4={readContext:Ea,useCallback:Hi,useContext:Hi,useEffect:Hi,useImperativeHandle:Hi,useInsertionEffect:Hi,useLayoutEffect:Hi,useMemo:Hi,useReducer:Hi,useRef:Hi,useState:Hi,useDebugValue:Hi,useDeferredValue:Hi,useTransition:Hi,useMutableSource:Hi,useSyncExternalStore:Hi,useId:Hi,unstable_isNewReconciler:!1},jj={readContext:Ea,useCallback:function(e,t){return ws().memoizedState=[e,t===void 0?null:t],e},useContext:Ea,useEffect:MT,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,$5(4194308,4,bI.bind(null,t,e),r)},useLayoutEffect:function(e,t){return $5(4194308,4,e,t)},useInsertionEffect:function(e,t){return $5(4,2,e,t)},useMemo:function(e,t){var r=ws();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=ws();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Bj.bind(null,Un,e),[n.memoizedState,e]},useRef:function(e){var t=ws();return e={current:e},t.memoizedState=e},useState:AT,useDebugValue:z_,useDeferredValue:function(e){return ws().memoizedState=e},useTransition:function(){var e=AT(!1),t=e[0];return e=Rj.bind(null,e[1]),ws().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Un,u=ws();if(Cn){if(r===void 0)throw Error(Pt(407));r=r()}else{if(r=t(),Si===null)throw Error(Pt(349));Wc&30||dI(n,t,r)}u.memoizedState=r;var h={value:r,getSnapshot:t};return u.queue=h,MT(mI.bind(null,n,h,e),[e]),n.flags|=2048,Tp(9,pI.bind(null,n,h,r,t),void 0,null),r},useId:function(){var e=ws(),t=Si.identifierPrefix;if(Cn){var r=il,n=nl;r=(n&~(1<<32-ns(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=bp++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=zj++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},$j={readContext:Ea,useCallback:TI,useContext:Ea,useEffect:L_,useImperativeHandle:wI,useInsertionEffect:vI,useLayoutEffect:xI,useMemo:SI,useReducer:B8,useRef:_I,useState:function(){return B8(wp)},useDebugValue:z_,useDeferredValue:function(e){var t=Pa();return EI(t,ci.memoizedState,e)},useTransition:function(){var e=B8(wp)[0],t=Pa().memoizedState;return[e,t]},useMutableSource:hI,useSyncExternalStore:fI,useId:PI,unstable_isNewReconciler:!1},Nj={readContext:Ea,useCallback:TI,useContext:Ea,useEffect:L_,useImperativeHandle:wI,useInsertionEffect:vI,useLayoutEffect:xI,useMemo:SI,useReducer:F8,useRef:_I,useState:function(){return F8(wp)},useDebugValue:z_,useDeferredValue:function(e){var t=Pa();return ci===null?t.memoizedState=e:EI(t,ci.memoizedState,e)},useTransition:function(){var e=F8(wp)[0],t=Pa().memoizedState;return[e,t]},useMutableSource:hI,useSyncExternalStore:fI,useId:PI,unstable_isNewReconciler:!1};function Xa(e,t){if(e&&e.defaultProps){t=Vn({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function ig(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Vn({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var B6={isMounted:function(e){return(e=e._reactInternals)?t1(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=co(),u=xu(e),h=ll(n,u);h.payload=t,r!=null&&(h.callback=r),t=_u(e,h,u),t!==null&&(is(t,e,u,n),F5(t,e,u))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=co(),u=xu(e),h=ll(n,u);h.tag=1,h.payload=t,r!=null&&(h.callback=r),t=_u(e,h,u),t!==null&&(is(t,e,u,n),F5(t,e,u))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=co(),n=xu(e),u=ll(r,n);u.tag=2,t!=null&&(u.callback=t),t=_u(e,u,n),t!==null&&(is(t,e,n,r),F5(t,e,n))}};function CT(e,t,r,n,u,h,p){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,h,p):t.prototype&&t.prototype.isPureReactComponent?!mp(r,n)||!mp(u,h):!0}function II(e,t,r){var n=!1,u=Pu,h=t.contextType;return typeof h=="object"&&h!==null?h=Ea(h):(u=Oo(t)?Vc:eo.current,n=t.contextTypes,h=(n=n!=null)?Hh(e,u):Pu),t=new t(r,h),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=B6,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=u,e.__reactInternalMemoizedMaskedChildContext=h),t}function IT(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&B6.enqueueReplaceState(t,t.state,null)}function og(e,t,r,n){var u=e.stateNode;u.props=r,u.state=e.memoizedState,u.refs={},A_(e);var h=t.contextType;typeof h=="object"&&h!==null?u.context=Ea(h):(h=Oo(t)?Vc:eo.current,u.context=Hh(e,h)),u.state=e.memoizedState,h=t.getDerivedStateFromProps,typeof h=="function"&&(ig(e,t,h,r),u.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(t=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),t!==u.state&&B6.enqueueReplaceState(u,u.state,null),c4(e,r,u,n),u.state=e.memoizedState),typeof u.componentDidMount=="function"&&(e.flags|=4194308)}function Yh(e,t){try{var r="",n=t;do r+=mF(n),n=n.return;while(n);var u=r}catch(h){u=`
Error generating stack: `+h.message+`
`+h.stack}return{value:e,source:t,stack:u,digest:null}}function j8(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function ag(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Uj=typeof WeakMap=="function"?WeakMap:Map;function OI(e,t,r){r=ll(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){m4||(m4=!0,gg=n),ag(e,t)},r}function kI(e,t,r){r=ll(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var u=t.value;r.payload=function(){return n(u)},r.callback=function(){ag(e,t)}}var h=e.stateNode;return h!==null&&typeof h.componentDidCatch=="function"&&(r.callback=function(){ag(e,t),typeof n!="function"&&(vu===null?vu=new Set([this]):vu.add(this));var p=t.stack;this.componentDidCatch(t.value,{componentStack:p!==null?p:""})}),r}function OT(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new Uj;var u=new Set;n.set(t,u)}else u=n.get(t),u===void 0&&(u=new Set,n.set(t,u));u.has(r)||(u.add(r),e=r$.bind(null,e,t,r),t.then(e,e))}function kT(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function DT(e,t,r,n,u){return e.mode&1?(e.flags|=65536,e.lanes=u,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=ll(-1,1),t.tag=2,_u(r,t,1))),r.lanes|=1),e)}var Vj=xl.ReactCurrentOwner,Mo=!1;function so(e,t,r,n){t.child=e===null?sI(t,null,r,n):Xh(t,e.child,r,n)}function LT(e,t,r,n,u){r=r.render;var h=t.ref;return Bh(t,u),n=k_(e,t,r,n,h,u),r=D_(),e!==null&&!Mo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~u,gl(e,t,u)):(Cn&&r&&x_(t),t.flags|=1,so(e,t,n,u),t.child)}function zT(e,t,r,n,u){if(e===null){var h=r.type;return typeof h=="function"&&!V_(h)&&h.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=h,DI(e,t,h,n,u)):(e=G5(r.type,null,n,t,t.mode,u),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,!(e.lanes&u)){var p=h.memoizedProps;if(r=r.compare,r=r!==null?r:mp,r(p,n)&&e.ref===t.ref)return gl(e,t,u)}return t.flags|=1,e=bu(h,n),e.ref=t.ref,e.return=t,t.child=e}function DI(e,t,r,n,u){if(e!==null){var h=e.memoizedProps;if(mp(h,n)&&e.ref===t.ref)if(Mo=!1,t.pendingProps=n=h,(e.lanes&u)!==0)e.flags&131072&&(Mo=!0);else return t.lanes=e.lanes,gl(e,t,u)}return sg(e,t,r,n,u)}function LI(e,t,r){var n=t.pendingProps,u=n.children,h=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_n(Mh,Wo),Wo|=r;else{if(!(r&1073741824))return e=h!==null?h.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_n(Mh,Wo),Wo|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=h!==null?h.baseLanes:r,_n(Mh,Wo),Wo|=n}else h!==null?(n=h.baseLanes|r,t.memoizedState=null):n=r,_n(Mh,Wo),Wo|=n;return so(e,t,u,r),t.child}function zI(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function sg(e,t,r,n,u){var h=Oo(r)?Vc:eo.current;return h=Hh(t,h),Bh(t,u),r=k_(e,t,r,n,h,u),n=D_(),e!==null&&!Mo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~u,gl(e,t,u)):(Cn&&n&&x_(t),t.flags|=1,so(e,t,r,u),t.child)}function RT(e,t,r,n,u){if(Oo(r)){var h=!0;o4(t)}else h=!1;if(Bh(t,u),t.stateNode===null)N5(e,t),II(t,r,n),og(t,r,n,u),n=!0;else if(e===null){var p=t.stateNode,o=t.memoizedProps;p.props=o;var _=p.context,b=r.contextType;typeof b=="object"&&b!==null?b=Ea(b):(b=Oo(r)?Vc:eo.current,b=Hh(t,b));var P=r.getDerivedStateFromProps,S=typeof P=="function"||typeof p.getSnapshotBeforeUpdate=="function";S||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(o!==n||_!==b)&&IT(t,p,n,b),ou=!1;var C=t.memoizedState;p.state=C,c4(t,n,p,u),_=t.memoizedState,o!==n||C!==_||Io.current||ou?(typeof P=="function"&&(ig(t,r,P,n),_=t.memoizedState),(o=ou||CT(t,r,o,n,C,_,b))?(S||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(t.flags|=4194308)):(typeof p.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=_),p.props=n,p.state=_,p.context=b,n=o):(typeof p.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{p=t.stateNode,uI(e,t),o=t.memoizedProps,b=t.type===t.elementType?o:Xa(t.type,o),p.props=b,S=t.pendingProps,C=p.context,_=r.contextType,typeof _=="object"&&_!==null?_=Ea(_):(_=Oo(r)?Vc:eo.current,_=Hh(t,_));var L=r.getDerivedStateFromProps;(P=typeof L=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(o!==S||C!==_)&&IT(t,p,n,_),ou=!1,C=t.memoizedState,p.state=C,c4(t,n,p,u);var F=t.memoizedState;o!==S||C!==F||Io.current||ou?(typeof L=="function"&&(ig(t,r,L,n),F=t.memoizedState),(b=ou||CT(t,r,b,n,C,F,_)||!1)?(P||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(n,F,_),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(n,F,_)),typeof p.componentDidUpdate=="function"&&(t.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof p.componentDidUpdate!="function"||o===e.memoizedProps&&C===e.memoizedState||(t.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&C===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=F),p.props=n,p.state=F,p.context=_,n=b):(typeof p.componentDidUpdate!="function"||o===e.memoizedProps&&C===e.memoizedState||(t.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&C===e.memoizedState||(t.flags|=1024),n=!1)}return lg(e,t,r,n,h,u)}function lg(e,t,r,n,u,h){zI(e,t);var p=(t.flags&128)!==0;if(!n&&!p)return u&&bT(t,r,!1),gl(e,t,h);n=t.stateNode,Vj.current=t;var o=p&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&p?(t.child=Xh(t,e.child,null,h),t.child=Xh(t,null,o,h)):so(e,t,o,h),t.memoizedState=n.state,u&&bT(t,r,!0),t.child}function RI(e){var t=e.stateNode;t.pendingContext?xT(e,t.pendingContext,t.pendingContext!==t.context):t.context&&xT(e,t.context,!1),M_(e,t.containerInfo)}function BT(e,t,r,n,u){return Zh(),w_(u),t.flags|=256,so(e,t,r,n),t.child}var ug={dehydrated:null,treeContext:null,retryLane:0};function cg(e){return{baseLanes:e,cachePool:null,transitions:null}}function BI(e,t,r){var n=t.pendingProps,u=Nn.current,h=!1,p=(t.flags&128)!==0,o;if((o=p)||(o=e!==null&&e.memoizedState===null?!1:(u&2)!==0),o?(h=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(u|=1),_n(Nn,u&1),e===null)return rg(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(p=n.children,e=n.fallback,h?(n=t.mode,h=t.child,p={mode:"hidden",children:p},!(n&1)&&h!==null?(h.childLanes=0,h.pendingProps=p):h=$6(p,n,0,null),e=jc(e,n,r,null),h.return=t,e.return=t,h.sibling=e,t.child=h,t.child.memoizedState=cg(r),t.memoizedState=ug,e):R_(t,p));if(u=e.memoizedState,u!==null&&(o=u.dehydrated,o!==null))return Gj(e,t,p,n,o,u,r);if(h){h=n.fallback,p=t.mode,u=e.child,o=u.sibling;var _={mode:"hidden",children:n.children};return!(p&1)&&t.child!==u?(n=t.child,n.childLanes=0,n.pendingProps=_,t.deletions=null):(n=bu(u,_),n.subtreeFlags=u.subtreeFlags&14680064),o!==null?h=bu(o,h):(h=jc(h,p,r,null),h.flags|=2),h.return=t,n.return=t,n.sibling=h,t.child=n,n=h,h=t.child,p=e.child.memoizedState,p=p===null?cg(r):{baseLanes:p.baseLanes|r,cachePool:null,transitions:p.transitions},h.memoizedState=p,h.childLanes=e.childLanes&~r,t.memoizedState=ug,n}return h=e.child,e=h.sibling,n=bu(h,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function R_(e,t){return t=$6({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function c5(e,t,r,n){return n!==null&&w_(n),Xh(t,e.child,null,r),e=R_(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Gj(e,t,r,n,u,h,p){if(r)return t.flags&256?(t.flags&=-257,n=j8(Error(Pt(422))),c5(e,t,p,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(h=n.fallback,u=t.mode,n=$6({mode:"visible",children:n.children},u,0,null),h=jc(h,u,p,null),h.flags|=2,n.return=t,h.return=t,n.sibling=h,t.child=n,t.mode&1&&Xh(t,e.child,null,p),t.child.memoizedState=cg(p),t.memoizedState=ug,h);if(!(t.mode&1))return c5(e,t,p,null);if(u.data==="$!"){if(n=u.nextSibling&&u.nextSibling.dataset,n)var o=n.dgst;return n=o,h=Error(Pt(419)),n=j8(h,n,void 0),c5(e,t,p,n)}if(o=(p&e.childLanes)!==0,Mo||o){if(n=Si,n!==null){switch(p&-p){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}u=u&(n.suspendedLanes|p)?0:u,u!==0&&u!==h.retryLane&&(h.retryLane=u,ml(e,u),is(n,e,u,-1))}return U_(),n=j8(Error(Pt(421))),c5(e,t,p,n)}return u.data==="$?"?(t.flags|=128,t.child=e.child,t=n$.bind(null,e),u._reactRetry=t,null):(e=h.treeContext,Yo=yu(u.nextSibling),Jo=t,Cn=!0,Qa=null,e!==null&&(_a[va++]=nl,_a[va++]=il,_a[va++]=Gc,nl=e.id,il=e.overflow,Gc=t),t=R_(t,n.children),t.flags|=4096,t)}function FT(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),ng(e.return,t,r)}function $8(e,t,r,n,u){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:u}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=n,h.tail=r,h.tailMode=u)}function FI(e,t,r){var n=t.pendingProps,u=n.revealOrder,h=n.tail;if(so(e,t,n.children,r),n=Nn.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&FT(e,r,t);else if(e.tag===19)FT(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(_n(Nn,n),!(t.mode&1))t.memoizedState=null;else switch(u){case"forwards":for(r=t.child,u=null;r!==null;)e=r.alternate,e!==null&&h4(e)===null&&(u=r),r=r.sibling;r=u,r===null?(u=t.child,t.child=null):(u=r.sibling,r.sibling=null),$8(t,!1,u,r,h);break;case"backwards":for(r=null,u=t.child,t.child=null;u!==null;){if(e=u.alternate,e!==null&&h4(e)===null){t.child=u;break}e=u.sibling,u.sibling=r,r=u,u=e}$8(t,!0,r,null,h);break;case"together":$8(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function N5(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function gl(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),qc|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Pt(153));if(t.child!==null){for(e=t.child,r=bu(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=bu(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Wj(e,t,r){switch(t.tag){case 3:RI(t),Zh();break;case 5:cI(t);break;case 1:Oo(t.type)&&o4(t);break;case 4:M_(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,u=t.memoizedProps.value;_n(l4,n._currentValue),n._currentValue=u;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(_n(Nn,Nn.current&1),t.flags|=128,null):r&t.child.childLanes?BI(e,t,r):(_n(Nn,Nn.current&1),e=gl(e,t,r),e!==null?e.sibling:null);_n(Nn,Nn.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return FI(e,t,r);t.flags|=128}if(u=t.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),_n(Nn,Nn.current),n)break;return null;case 22:case 23:return t.lanes=0,LI(e,t,r)}return gl(e,t,r)}var jI,hg,$I,NI;jI=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};hg=function(){};$I=function(e,t,r,n){var u=e.memoizedProps;if(u!==n){e=t.stateNode,kc(Ps.current);var h=null;switch(r){case"input":u=D9(e,u),n=D9(e,n),h=[];break;case"select":u=Vn({},u,{value:void 0}),n=Vn({},n,{value:void 0}),h=[];break;case"textarea":u=R9(e,u),n=R9(e,n),h=[];break;default:typeof u.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=n4)}F9(r,n);var p;r=null;for(b in u)if(!n.hasOwnProperty(b)&&u.hasOwnProperty(b)&&u[b]!=null)if(b==="style"){var o=u[b];for(p in o)o.hasOwnProperty(p)&&(r||(r={}),r[p]="")}else b!=="dangerouslySetInnerHTML"&&b!=="children"&&b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(lp.hasOwnProperty(b)?h||(h=[]):(h=h||[]).push(b,null));for(b in n){var _=n[b];if(o=u!=null?u[b]:void 0,n.hasOwnProperty(b)&&_!==o&&(_!=null||o!=null))if(b==="style")if(o){for(p in o)!o.hasOwnProperty(p)||_&&_.hasOwnProperty(p)||(r||(r={}),r[p]="");for(p in _)_.hasOwnProperty(p)&&o[p]!==_[p]&&(r||(r={}),r[p]=_[p])}else r||(h||(h=[]),h.push(b,r)),r=_;else b==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,o=o?o.__html:void 0,_!=null&&o!==_&&(h=h||[]).push(b,_)):b==="children"?typeof _!="string"&&typeof _!="number"||(h=h||[]).push(b,""+_):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&(lp.hasOwnProperty(b)?(_!=null&&b==="onScroll"&&wn("scroll",e),h||o===_||(h=[])):(h=h||[]).push(b,_))}r&&(h=h||[]).push("style",r);var b=h;(t.updateQueue=b)&&(t.flags|=4)}};NI=function(e,t,r,n){r!==n&&(t.flags|=4)};function Td(e,t){if(!Cn)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Zi(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var u=e.child;u!==null;)r|=u.lanes|u.childLanes,n|=u.subtreeFlags&14680064,n|=u.flags&14680064,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)r|=u.lanes|u.childLanes,n|=u.subtreeFlags,n|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function qj(e,t,r){var n=t.pendingProps;switch(b_(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zi(t),null;case 1:return Oo(t.type)&&i4(),Zi(t),null;case 3:return n=t.stateNode,Kh(),En(Io),En(eo),I_(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(l5(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Qa!==null&&(vg(Qa),Qa=null))),hg(e,t),Zi(t),null;case 5:C_(t);var u=kc(xp.current);if(r=t.type,e!==null&&t.stateNode!=null)$I(e,t,r,n,u),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(Pt(166));return Zi(t),null}if(e=kc(Ps.current),l5(t)){n=t.stateNode,r=t.type;var h=t.memoizedProps;switch(n[Ts]=t,n[_p]=h,e=(t.mode&1)!==0,r){case"dialog":wn("cancel",n),wn("close",n);break;case"iframe":case"object":case"embed":wn("load",n);break;case"video":case"audio":for(u=0;u<Gd.length;u++)wn(Gd[u],n);break;case"source":wn("error",n);break;case"img":case"image":case"link":wn("error",n),wn("load",n);break;case"details":wn("toggle",n);break;case"input":Hw(n,h),wn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!h.multiple},wn("invalid",n);break;case"textarea":Xw(n,h),wn("invalid",n)}F9(r,h),u=null;for(var p in h)if(h.hasOwnProperty(p)){var o=h[p];p==="children"?typeof o=="string"?n.textContent!==o&&(h.suppressHydrationWarning!==!0&&s5(n.textContent,o,e),u=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(h.suppressHydrationWarning!==!0&&s5(n.textContent,o,e),u=["children",""+o]):lp.hasOwnProperty(p)&&o!=null&&p==="onScroll"&&wn("scroll",n)}switch(r){case"input":Q3(n),Zw(n,h,!0);break;case"textarea":Q3(n),Kw(n);break;case"select":case"option":break;default:typeof h.onClick=="function"&&(n.onclick=n4)}n=u,t.updateQueue=n,n!==null&&(t.flags|=4)}else{p=u.nodeType===9?u:u.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=mC(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=p.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=p.createElement(r,{is:n.is}):(e=p.createElement(r),r==="select"&&(p=e,n.multiple?p.multiple=!0:n.size&&(p.size=n.size))):e=p.createElementNS(e,r),e[Ts]=t,e[_p]=n,jI(e,t,!1,!1),t.stateNode=e;e:{switch(p=j9(r,n),r){case"dialog":wn("cancel",e),wn("close",e),u=n;break;case"iframe":case"object":case"embed":wn("load",e),u=n;break;case"video":case"audio":for(u=0;u<Gd.length;u++)wn(Gd[u],e);u=n;break;case"source":wn("error",e),u=n;break;case"img":case"image":case"link":wn("error",e),wn("load",e),u=n;break;case"details":wn("toggle",e),u=n;break;case"input":Hw(e,n),u=D9(e,n),wn("invalid",e);break;case"option":u=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},u=Vn({},n,{value:void 0}),wn("invalid",e);break;case"textarea":Xw(e,n),u=R9(e,n),wn("invalid",e);break;default:u=n}F9(r,u),o=u;for(h in o)if(o.hasOwnProperty(h)){var _=o[h];h==="style"?_C(e,_):h==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,_!=null&&gC(e,_)):h==="children"?typeof _=="string"?(r!=="textarea"||_!=="")&&up(e,_):typeof _=="number"&&up(e,""+_):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(lp.hasOwnProperty(h)?_!=null&&h==="onScroll"&&wn("scroll",e):_!=null&&a_(e,h,_,p))}switch(r){case"input":Q3(e),Zw(e,n,!1);break;case"textarea":Q3(e),Kw(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Eu(n.value));break;case"select":e.multiple=!!n.multiple,h=n.value,h!=null?Dh(e,!!n.multiple,h,!1):n.defaultValue!=null&&Dh(e,!!n.multiple,n.defaultValue,!0);break;default:typeof u.onClick=="function"&&(e.onclick=n4)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Zi(t),null;case 6:if(e&&t.stateNode!=null)NI(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(Pt(166));if(r=kc(xp.current),kc(Ps.current),l5(t)){if(n=t.stateNode,r=t.memoizedProps,n[Ts]=t,(h=n.nodeValue!==r)&&(e=Jo,e!==null))switch(e.tag){case 3:s5(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&s5(n.nodeValue,r,(e.mode&1)!==0)}h&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Ts]=t,t.stateNode=n}return Zi(t),null;case 13:if(En(Nn),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Cn&&Yo!==null&&t.mode&1&&!(t.flags&128))oI(),Zh(),t.flags|=98560,h=!1;else if(h=l5(t),n!==null&&n.dehydrated!==null){if(e===null){if(!h)throw Error(Pt(318));if(h=t.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(Pt(317));h[Ts]=t}else Zh(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Zi(t),h=!1}else Qa!==null&&(vg(Qa),Qa=null),h=!0;if(!h)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Nn.current&1?hi===0&&(hi=3):U_())),t.updateQueue!==null&&(t.flags|=4),Zi(t),null);case 4:return Kh(),hg(e,t),e===null&&gp(t.stateNode.containerInfo),Zi(t),null;case 10:return E_(t.type._context),Zi(t),null;case 17:return Oo(t.type)&&i4(),Zi(t),null;case 19:if(En(Nn),h=t.memoizedState,h===null)return Zi(t),null;if(n=(t.flags&128)!==0,p=h.rendering,p===null)if(n)Td(h,!1);else{if(hi!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(p=h4(e),p!==null){for(t.flags|=128,Td(h,!1),n=p.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)h=r,e=n,h.flags&=14680066,p=h.alternate,p===null?(h.childLanes=0,h.lanes=e,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=p.childLanes,h.lanes=p.lanes,h.child=p.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=p.memoizedProps,h.memoizedState=p.memoizedState,h.updateQueue=p.updateQueue,h.type=p.type,e=p.dependencies,h.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return _n(Nn,Nn.current&1|2),t.child}e=e.sibling}h.tail!==null&&Kn()>Jh&&(t.flags|=128,n=!0,Td(h,!1),t.lanes=4194304)}else{if(!n)if(e=h4(p),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Td(h,!0),h.tail===null&&h.tailMode==="hidden"&&!p.alternate&&!Cn)return Zi(t),null}else 2*Kn()-h.renderingStartTime>Jh&&r!==1073741824&&(t.flags|=128,n=!0,Td(h,!1),t.lanes=4194304);h.isBackwards?(p.sibling=t.child,t.child=p):(r=h.last,r!==null?r.sibling=p:t.child=p,h.last=p)}return h.tail!==null?(t=h.tail,h.rendering=t,h.tail=t.sibling,h.renderingStartTime=Kn(),t.sibling=null,r=Nn.current,_n(Nn,n?r&1|2:r&1),t):(Zi(t),null);case 22:case 23:return N_(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Wo&1073741824&&(Zi(t),t.subtreeFlags&6&&(t.flags|=8192)):Zi(t),null;case 24:return null;case 25:return null}throw Error(Pt(156,t.tag))}function Hj(e,t){switch(b_(t),t.tag){case 1:return Oo(t.type)&&i4(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Kh(),En(Io),En(eo),I_(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return C_(t),null;case 13:if(En(Nn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Pt(340));Zh()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return En(Nn),null;case 4:return Kh(),null;case 10:return E_(t.type._context),null;case 22:case 23:return N_(),null;case 24:return null;default:return null}}var h5=!1,Yi=!1,Zj=typeof WeakSet=="function"?WeakSet:Set,Ht=null;function Ah(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){qn(e,t,n)}else r.current=null}function fg(e,t,r){try{r()}catch(n){qn(e,t,n)}}var jT=!1;function Xj(e,t){if(X9=e4,e=qC(),v_(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var u=n.anchorOffset,h=n.focusNode;n=n.focusOffset;try{r.nodeType,h.nodeType}catch{r=null;break e}var p=0,o=-1,_=-1,b=0,P=0,S=e,C=null;t:for(;;){for(var L;S!==r||u!==0&&S.nodeType!==3||(o=p+u),S!==h||n!==0&&S.nodeType!==3||(_=p+n),S.nodeType===3&&(p+=S.nodeValue.length),(L=S.firstChild)!==null;)C=S,S=L;for(;;){if(S===e)break t;if(C===r&&++b===u&&(o=p),C===h&&++P===n&&(_=p),(L=S.nextSibling)!==null)break;S=C,C=S.parentNode}S=L}r=o===-1||_===-1?null:{start:o,end:_}}else r=null}r=r||{start:0,end:0}}else r=null;for(K9={focusedElem:e,selectionRange:r},e4=!1,Ht=t;Ht!==null;)if(t=Ht,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ht=e;else for(;Ht!==null;){t=Ht;try{var F=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(F!==null){var j=F.memoizedProps,G=F.memoizedState,$=t.stateNode,N=$.getSnapshotBeforeUpdate(t.elementType===t.type?j:Xa(t.type,j),G);$.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var U=t.stateNode.containerInfo;U.nodeType===1?U.textContent="":U.nodeType===9&&U.documentElement&&U.removeChild(U.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Pt(163))}}catch(J){qn(t,t.return,J)}if(e=t.sibling,e!==null){e.return=t.return,Ht=e;break}Ht=t.return}return F=jT,jT=!1,F}function ep(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var u=n=n.next;do{if((u.tag&e)===e){var h=u.destroy;u.destroy=void 0,h!==void 0&&fg(t,r,h)}u=u.next}while(u!==n)}}function F6(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function dg(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function UI(e){var t=e.alternate;t!==null&&(e.alternate=null,UI(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ts],delete t[_p],delete t[Q9],delete t[Oj],delete t[kj])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function VI(e){return e.tag===5||e.tag===3||e.tag===4}function $T(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||VI(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function pg(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=n4));else if(n!==4&&(e=e.child,e!==null))for(pg(e,t,r),e=e.sibling;e!==null;)pg(e,t,r),e=e.sibling}function mg(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(mg(e,t,r),e=e.sibling;e!==null;)mg(e,t,r),e=e.sibling}var Di=null,Ka=!1;function eu(e,t,r){for(r=r.child;r!==null;)GI(e,t,r),r=r.sibling}function GI(e,t,r){if(Es&&typeof Es.onCommitFiberUnmount=="function")try{Es.onCommitFiberUnmount(I6,r)}catch{}switch(r.tag){case 5:Yi||Ah(r,t);case 6:var n=Di,u=Ka;Di=null,eu(e,t,r),Di=n,Ka=u,Di!==null&&(Ka?(e=Di,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Di.removeChild(r.stateNode));break;case 18:Di!==null&&(Ka?(e=Di,r=r.stateNode,e.nodeType===8?D8(e.parentNode,r):e.nodeType===1&&D8(e,r),dp(e)):D8(Di,r.stateNode));break;case 4:n=Di,u=Ka,Di=r.stateNode.containerInfo,Ka=!0,eu(e,t,r),Di=n,Ka=u;break;case 0:case 11:case 14:case 15:if(!Yi&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){u=n=n.next;do{var h=u,p=h.destroy;h=h.tag,p!==void 0&&(h&2||h&4)&&fg(r,t,p),u=u.next}while(u!==n)}eu(e,t,r);break;case 1:if(!Yi&&(Ah(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){qn(r,t,o)}eu(e,t,r);break;case 21:eu(e,t,r);break;case 22:r.mode&1?(Yi=(n=Yi)||r.memoizedState!==null,eu(e,t,r),Yi=n):eu(e,t,r);break;default:eu(e,t,r)}}function NT(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Zj),t.forEach(function(n){var u=i$.bind(null,e,n);r.has(n)||(r.add(n),n.then(u,u))})}}function Ha(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var u=r[n];try{var h=e,p=t,o=p;e:for(;o!==null;){switch(o.tag){case 5:Di=o.stateNode,Ka=!1;break e;case 3:Di=o.stateNode.containerInfo,Ka=!0;break e;case 4:Di=o.stateNode.containerInfo,Ka=!0;break e}o=o.return}if(Di===null)throw Error(Pt(160));GI(h,p,u),Di=null,Ka=!1;var _=u.alternate;_!==null&&(_.return=null),u.return=null}catch(b){qn(u,t,b)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)WI(t,e),t=t.sibling}function WI(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ha(t,e),bs(e),n&4){try{ep(3,e,e.return),F6(3,e)}catch(j){qn(e,e.return,j)}try{ep(5,e,e.return)}catch(j){qn(e,e.return,j)}}break;case 1:Ha(t,e),bs(e),n&512&&r!==null&&Ah(r,r.return);break;case 5:if(Ha(t,e),bs(e),n&512&&r!==null&&Ah(r,r.return),e.flags&32){var u=e.stateNode;try{up(u,"")}catch(j){qn(e,e.return,j)}}if(n&4&&(u=e.stateNode,u!=null)){var h=e.memoizedProps,p=r!==null?r.memoizedProps:h,o=e.type,_=e.updateQueue;if(e.updateQueue=null,_!==null)try{o==="input"&&h.type==="radio"&&h.name!=null&&dC(u,h),j9(o,p);var b=j9(o,h);for(p=0;p<_.length;p+=2){var P=_[p],S=_[p+1];P==="style"?_C(u,S):P==="dangerouslySetInnerHTML"?gC(u,S):P==="children"?up(u,S):a_(u,P,S,b)}switch(o){case"input":L9(u,h);break;case"textarea":pC(u,h);break;case"select":var C=u._wrapperState.wasMultiple;u._wrapperState.wasMultiple=!!h.multiple;var L=h.value;L!=null?Dh(u,!!h.multiple,L,!1):C!==!!h.multiple&&(h.defaultValue!=null?Dh(u,!!h.multiple,h.defaultValue,!0):Dh(u,!!h.multiple,h.multiple?[]:"",!1))}u[_p]=h}catch(j){qn(e,e.return,j)}}break;case 6:if(Ha(t,e),bs(e),n&4){if(e.stateNode===null)throw Error(Pt(162));u=e.stateNode,h=e.memoizedProps;try{u.nodeValue=h}catch(j){qn(e,e.return,j)}}break;case 3:if(Ha(t,e),bs(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{dp(t.containerInfo)}catch(j){qn(e,e.return,j)}break;case 4:Ha(t,e),bs(e);break;case 13:Ha(t,e),bs(e),u=e.child,u.flags&8192&&(h=u.memoizedState!==null,u.stateNode.isHidden=h,!h||u.alternate!==null&&u.alternate.memoizedState!==null||(j_=Kn())),n&4&&NT(e);break;case 22:if(P=r!==null&&r.memoizedState!==null,e.mode&1?(Yi=(b=Yi)||P,Ha(t,e),Yi=b):Ha(t,e),bs(e),n&8192){if(b=e.memoizedState!==null,(e.stateNode.isHidden=b)&&!P&&e.mode&1)for(Ht=e,P=e.child;P!==null;){for(S=Ht=P;Ht!==null;){switch(C=Ht,L=C.child,C.tag){case 0:case 11:case 14:case 15:ep(4,C,C.return);break;case 1:Ah(C,C.return);var F=C.stateNode;if(typeof F.componentWillUnmount=="function"){n=C,r=C.return;try{t=n,F.props=t.memoizedProps,F.state=t.memoizedState,F.componentWillUnmount()}catch(j){qn(n,r,j)}}break;case 5:Ah(C,C.return);break;case 22:if(C.memoizedState!==null){VT(S);continue}}L!==null?(L.return=C,Ht=L):VT(S)}P=P.sibling}e:for(P=null,S=e;;){if(S.tag===5){if(P===null){P=S;try{u=S.stateNode,b?(h=u.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none"):(o=S.stateNode,_=S.memoizedProps.style,p=_!=null&&_.hasOwnProperty("display")?_.display:null,o.style.display=yC("display",p))}catch(j){qn(e,e.return,j)}}}else if(S.tag===6){if(P===null)try{S.stateNode.nodeValue=b?"":S.memoizedProps}catch(j){qn(e,e.return,j)}}else if((S.tag!==22&&S.tag!==23||S.memoizedState===null||S===e)&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===e)break e;for(;S.sibling===null;){if(S.return===null||S.return===e)break e;P===S&&(P=null),S=S.return}P===S&&(P=null),S.sibling.return=S.return,S=S.sibling}}break;case 19:Ha(t,e),bs(e),n&4&&NT(e);break;case 21:break;default:Ha(t,e),bs(e)}}function bs(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(VI(r)){var n=r;break e}r=r.return}throw Error(Pt(160))}switch(n.tag){case 5:var u=n.stateNode;n.flags&32&&(up(u,""),n.flags&=-33);var h=$T(e);mg(e,h,u);break;case 3:case 4:var p=n.stateNode.containerInfo,o=$T(e);pg(e,o,p);break;default:throw Error(Pt(161))}}catch(_){qn(e,e.return,_)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Kj(e,t,r){Ht=e,qI(e)}function qI(e,t,r){for(var n=(e.mode&1)!==0;Ht!==null;){var u=Ht,h=u.child;if(u.tag===22&&n){var p=u.memoizedState!==null||h5;if(!p){var o=u.alternate,_=o!==null&&o.memoizedState!==null||Yi;o=h5;var b=Yi;if(h5=p,(Yi=_)&&!b)for(Ht=u;Ht!==null;)p=Ht,_=p.child,p.tag===22&&p.memoizedState!==null?GT(u):_!==null?(_.return=p,Ht=_):GT(u);for(;h!==null;)Ht=h,qI(h),h=h.sibling;Ht=u,h5=o,Yi=b}UT(e)}else u.subtreeFlags&8772&&h!==null?(h.return=u,Ht=h):UT(e)}}function UT(e){for(;Ht!==null;){var t=Ht;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Yi||F6(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Yi)if(r===null)n.componentDidMount();else{var u=t.elementType===t.type?r.memoizedProps:Xa(t.type,r.memoizedProps);n.componentDidUpdate(u,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var h=t.updateQueue;h!==null&&PT(t,h,n);break;case 3:var p=t.updateQueue;if(p!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}PT(t,p,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var _=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":_.autoFocus&&r.focus();break;case"img":_.src&&(r.src=_.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var b=t.alternate;if(b!==null){var P=b.memoizedState;if(P!==null){var S=P.dehydrated;S!==null&&dp(S)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Pt(163))}Yi||t.flags&512&&dg(t)}catch(C){qn(t,t.return,C)}}if(t===e){Ht=null;break}if(r=t.sibling,r!==null){r.return=t.return,Ht=r;break}Ht=t.return}}function VT(e){for(;Ht!==null;){var t=Ht;if(t===e){Ht=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Ht=r;break}Ht=t.return}}function GT(e){for(;Ht!==null;){var t=Ht;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{F6(4,t)}catch(_){qn(t,r,_)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var u=t.return;try{n.componentDidMount()}catch(_){qn(t,u,_)}}var h=t.return;try{dg(t)}catch(_){qn(t,h,_)}break;case 5:var p=t.return;try{dg(t)}catch(_){qn(t,p,_)}}}catch(_){qn(t,t.return,_)}if(t===e){Ht=null;break}var o=t.sibling;if(o!==null){o.return=t.return,Ht=o;break}Ht=t.return}}var Yj=Math.ceil,p4=xl.ReactCurrentDispatcher,B_=xl.ReactCurrentOwner,wa=xl.ReactCurrentBatchConfig,Rr=0,Si=null,ri=null,zi=0,Wo=0,Mh=Cu(0),hi=0,Sp=null,qc=0,j6=0,F_=0,tp=null,Ao=null,j_=0,Jh=1/0,el=null,m4=!1,gg=null,vu=null,f5=!1,hu=null,g4=0,rp=0,yg=null,U5=-1,V5=0;function co(){return Rr&6?Kn():U5!==-1?U5:U5=Kn()}function xu(e){return e.mode&1?Rr&2&&zi!==0?zi&-zi:Lj.transition!==null?(V5===0&&(V5=IC()),V5):(e=sn,e!==0||(e=window.event,e=e===void 0?16:BC(e.type)),e):1}function is(e,t,r,n){if(50<rp)throw rp=0,yg=null,Error(Pt(185));p2(e,r,n),(!(Rr&2)||e!==Si)&&(e===Si&&(!(Rr&2)&&(j6|=r),hi===4&&lu(e,zi)),ko(e,n),r===1&&Rr===0&&!(t.mode&1)&&(Jh=Kn()+500,z6&&Iu()))}function ko(e,t){var r=e.callbackNode;LF(e,t);var n=Q5(e,e===Si?zi:0);if(n===0)r!==null&&Qw(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Qw(r),t===1)e.tag===0?Dj(WT.bind(null,e)):rI(WT.bind(null,e)),Cj(function(){!(Rr&6)&&Iu()}),r=null;else{switch(OC(n)){case 1:r=h_;break;case 4:r=MC;break;case 16:r=J5;break;case 536870912:r=CC;break;default:r=J5}r=eO(r,HI.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function HI(e,t){if(U5=-1,V5=0,Rr&6)throw Error(Pt(327));var r=e.callbackNode;if(Fh()&&e.callbackNode!==r)return null;var n=Q5(e,e===Si?zi:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=y4(e,n);else{t=n;var u=Rr;Rr|=2;var h=XI();(Si!==e||zi!==t)&&(el=null,Jh=Kn()+500,Fc(e,t));do try{e$();break}catch(o){ZI(e,o)}while(1);S_(),p4.current=h,Rr=u,ri!==null?t=0:(Si=null,zi=0,t=hi)}if(t!==0){if(t===2&&(u=G9(e),u!==0&&(n=u,t=_g(e,u))),t===1)throw r=Sp,Fc(e,0),lu(e,n),ko(e,Kn()),r;if(t===6)lu(e,n);else{if(u=e.current.alternate,!(n&30)&&!Jj(u)&&(t=y4(e,n),t===2&&(h=G9(e),h!==0&&(n=h,t=_g(e,h))),t===1))throw r=Sp,Fc(e,0),lu(e,n),ko(e,Kn()),r;switch(e.finishedWork=u,e.finishedLanes=n,t){case 0:case 1:throw Error(Pt(345));case 2:Sc(e,Ao,el);break;case 3:if(lu(e,n),(n&130023424)===n&&(t=j_+500-Kn(),10<t)){if(Q5(e,0)!==0)break;if(u=e.suspendedLanes,(u&n)!==n){co(),e.pingedLanes|=e.suspendedLanes&u;break}e.timeoutHandle=J9(Sc.bind(null,e,Ao,el),t);break}Sc(e,Ao,el);break;case 4:if(lu(e,n),(n&4194240)===n)break;for(t=e.eventTimes,u=-1;0<n;){var p=31-ns(n);h=1<<p,p=t[p],p>u&&(u=p),n&=~h}if(n=u,n=Kn()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Yj(n/1960))-n,10<n){e.timeoutHandle=J9(Sc.bind(null,e,Ao,el),n);break}Sc(e,Ao,el);break;case 5:Sc(e,Ao,el);break;default:throw Error(Pt(329))}}}return ko(e,Kn()),e.callbackNode===r?HI.bind(null,e):null}function _g(e,t){var r=tp;return e.current.memoizedState.isDehydrated&&(Fc(e,t).flags|=256),e=y4(e,t),e!==2&&(t=Ao,Ao=r,t!==null&&vg(t)),e}function vg(e){Ao===null?Ao=e:Ao.push.apply(Ao,e)}function Jj(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var u=r[n],h=u.getSnapshot;u=u.value;try{if(!as(h(),u))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function lu(e,t){for(t&=~F_,t&=~j6,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ns(t),n=1<<r;e[r]=-1,t&=~n}}function WT(e){if(Rr&6)throw Error(Pt(327));Fh();var t=Q5(e,0);if(!(t&1))return ko(e,Kn()),null;var r=y4(e,t);if(e.tag!==0&&r===2){var n=G9(e);n!==0&&(t=n,r=_g(e,n))}if(r===1)throw r=Sp,Fc(e,0),lu(e,t),ko(e,Kn()),r;if(r===6)throw Error(Pt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Sc(e,Ao,el),ko(e,Kn()),null}function $_(e,t){var r=Rr;Rr|=1;try{return e(t)}finally{Rr=r,Rr===0&&(Jh=Kn()+500,z6&&Iu())}}function Hc(e){hu!==null&&hu.tag===0&&!(Rr&6)&&Fh();var t=Rr;Rr|=1;var r=wa.transition,n=sn;try{if(wa.transition=null,sn=1,e)return e()}finally{sn=n,wa.transition=r,Rr=t,!(Rr&6)&&Iu()}}function N_(){Wo=Mh.current,En(Mh)}function Fc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Mj(r)),ri!==null)for(r=ri.return;r!==null;){var n=r;switch(b_(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&i4();break;case 3:Kh(),En(Io),En(eo),I_();break;case 5:C_(n);break;case 4:Kh();break;case 13:En(Nn);break;case 19:En(Nn);break;case 10:E_(n.type._context);break;case 22:case 23:N_()}r=r.return}if(Si=e,ri=e=bu(e.current,null),zi=Wo=t,hi=0,Sp=null,F_=j6=qc=0,Ao=tp=null,Oc!==null){for(t=0;t<Oc.length;t++)if(r=Oc[t],n=r.interleaved,n!==null){r.interleaved=null;var u=n.next,h=r.pending;if(h!==null){var p=h.next;h.next=u,n.next=p}r.pending=n}Oc=null}return e}function ZI(e,t){do{var r=ri;try{if(S_(),j5.current=d4,f4){for(var n=Un.memoizedState;n!==null;){var u=n.queue;u!==null&&(u.pending=null),n=n.next}f4=!1}if(Wc=0,wi=ci=Un=null,Qd=!1,bp=0,B_.current=null,r===null||r.return===null){hi=1,Sp=t,ri=null;break}e:{var h=e,p=r.return,o=r,_=t;if(t=zi,o.flags|=32768,_!==null&&typeof _=="object"&&typeof _.then=="function"){var b=_,P=o,S=P.tag;if(!(P.mode&1)&&(S===0||S===11||S===15)){var C=P.alternate;C?(P.updateQueue=C.updateQueue,P.memoizedState=C.memoizedState,P.lanes=C.lanes):(P.updateQueue=null,P.memoizedState=null)}var L=kT(p);if(L!==null){L.flags&=-257,DT(L,p,o,h,t),L.mode&1&&OT(h,b,t),t=L,_=b;var F=t.updateQueue;if(F===null){var j=new Set;j.add(_),t.updateQueue=j}else F.add(_);break e}else{if(!(t&1)){OT(h,b,t),U_();break e}_=Error(Pt(426))}}else if(Cn&&o.mode&1){var G=kT(p);if(G!==null){!(G.flags&65536)&&(G.flags|=256),DT(G,p,o,h,t),w_(Yh(_,o));break e}}h=_=Yh(_,o),hi!==4&&(hi=2),tp===null?tp=[h]:tp.push(h),h=p;do{switch(h.tag){case 3:h.flags|=65536,t&=-t,h.lanes|=t;var $=OI(h,_,t);ET(h,$);break e;case 1:o=_;var N=h.type,U=h.stateNode;if(!(h.flags&128)&&(typeof N.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(vu===null||!vu.has(U)))){h.flags|=65536,t&=-t,h.lanes|=t;var J=kI(h,o,t);ET(h,J);break e}}h=h.return}while(h!==null)}YI(r)}catch(q){t=q,ri===r&&r!==null&&(ri=r=r.return);continue}break}while(1)}function XI(){var e=p4.current;return p4.current=d4,e===null?d4:e}function U_(){(hi===0||hi===3||hi===2)&&(hi=4),Si===null||!(qc&268435455)&&!(j6&268435455)||lu(Si,zi)}function y4(e,t){var r=Rr;Rr|=2;var n=XI();(Si!==e||zi!==t)&&(el=null,Fc(e,t));do try{Qj();break}catch(u){ZI(e,u)}while(1);if(S_(),Rr=r,p4.current=n,ri!==null)throw Error(Pt(261));return Si=null,zi=0,hi}function Qj(){for(;ri!==null;)KI(ri)}function e$(){for(;ri!==null&&!EF();)KI(ri)}function KI(e){var t=QI(e.alternate,e,Wo);e.memoizedProps=e.pendingProps,t===null?YI(e):ri=t,B_.current=null}function YI(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Hj(r,t),r!==null){r.flags&=32767,ri=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{hi=6,ri=null;return}}else if(r=qj(r,t,Wo),r!==null){ri=r;return}if(t=t.sibling,t!==null){ri=t;return}ri=t=e}while(t!==null);hi===0&&(hi=5)}function Sc(e,t,r){var n=sn,u=wa.transition;try{wa.transition=null,sn=1,t$(e,t,r,n)}finally{wa.transition=u,sn=n}return null}function t$(e,t,r,n){do Fh();while(hu!==null);if(Rr&6)throw Error(Pt(327));r=e.finishedWork;var u=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Pt(177));e.callbackNode=null,e.callbackPriority=0;var h=r.lanes|r.childLanes;if(zF(e,h),e===Si&&(ri=Si=null,zi=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||f5||(f5=!0,eO(J5,function(){return Fh(),null})),h=(r.flags&15990)!==0,r.subtreeFlags&15990||h){h=wa.transition,wa.transition=null;var p=sn;sn=1;var o=Rr;Rr|=4,B_.current=null,Xj(e,r),WI(r,e),bj(K9),e4=!!X9,K9=X9=null,e.current=r,Kj(r),PF(),Rr=o,sn=p,wa.transition=h}else e.current=r;if(f5&&(f5=!1,hu=e,g4=u),h=e.pendingLanes,h===0&&(vu=null),CF(r.stateNode),ko(e,Kn()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)u=t[r],n(u.value,{componentStack:u.stack,digest:u.digest});if(m4)throw m4=!1,e=gg,gg=null,e;return g4&1&&e.tag!==0&&Fh(),h=e.pendingLanes,h&1?e===yg?rp++:(rp=0,yg=e):rp=0,Iu(),null}function Fh(){if(hu!==null){var e=OC(g4),t=wa.transition,r=sn;try{if(wa.transition=null,sn=16>e?16:e,hu===null)var n=!1;else{if(e=hu,hu=null,g4=0,Rr&6)throw Error(Pt(331));var u=Rr;for(Rr|=4,Ht=e.current;Ht!==null;){var h=Ht,p=h.child;if(Ht.flags&16){var o=h.deletions;if(o!==null){for(var _=0;_<o.length;_++){var b=o[_];for(Ht=b;Ht!==null;){var P=Ht;switch(P.tag){case 0:case 11:case 15:ep(8,P,h)}var S=P.child;if(S!==null)S.return=P,Ht=S;else for(;Ht!==null;){P=Ht;var C=P.sibling,L=P.return;if(UI(P),P===b){Ht=null;break}if(C!==null){C.return=L,Ht=C;break}Ht=L}}}var F=h.alternate;if(F!==null){var j=F.child;if(j!==null){F.child=null;do{var G=j.sibling;j.sibling=null,j=G}while(j!==null)}}Ht=h}}if(h.subtreeFlags&2064&&p!==null)p.return=h,Ht=p;else e:for(;Ht!==null;){if(h=Ht,h.flags&2048)switch(h.tag){case 0:case 11:case 15:ep(9,h,h.return)}var $=h.sibling;if($!==null){$.return=h.return,Ht=$;break e}Ht=h.return}}var N=e.current;for(Ht=N;Ht!==null;){p=Ht;var U=p.child;if(p.subtreeFlags&2064&&U!==null)U.return=p,Ht=U;else e:for(p=N;Ht!==null;){if(o=Ht,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:F6(9,o)}}catch(q){qn(o,o.return,q)}if(o===p){Ht=null;break e}var J=o.sibling;if(J!==null){J.return=o.return,Ht=J;break e}Ht=o.return}}if(Rr=u,Iu(),Es&&typeof Es.onPostCommitFiberRoot=="function")try{Es.onPostCommitFiberRoot(I6,e)}catch{}n=!0}return n}finally{sn=r,wa.transition=t}}return!1}function qT(e,t,r){t=Yh(r,t),t=OI(e,t,1),e=_u(e,t,1),t=co(),e!==null&&(p2(e,1,t),ko(e,t))}function qn(e,t,r){if(e.tag===3)qT(e,e,r);else for(;t!==null;){if(t.tag===3){qT(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(vu===null||!vu.has(n))){e=Yh(r,e),e=kI(t,e,1),t=_u(t,e,1),e=co(),t!==null&&(p2(t,1,e),ko(t,e));break}}t=t.return}}function r$(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=co(),e.pingedLanes|=e.suspendedLanes&r,Si===e&&(zi&r)===r&&(hi===4||hi===3&&(zi&130023424)===zi&&500>Kn()-j_?Fc(e,0):F_|=r),ko(e,t)}function JI(e,t){t===0&&(e.mode&1?(t=r5,r5<<=1,!(r5&130023424)&&(r5=4194304)):t=1);var r=co();e=ml(e,t),e!==null&&(p2(e,t,r),ko(e,r))}function n$(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),JI(e,r)}function i$(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,u=e.memoizedState;u!==null&&(r=u.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(Pt(314))}n!==null&&n.delete(t),JI(e,r)}var QI;QI=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Io.current)Mo=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Mo=!1,Wj(e,t,r);Mo=!!(e.flags&131072)}else Mo=!1,Cn&&t.flags&1048576&&nI(t,s4,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;N5(e,t),e=t.pendingProps;var u=Hh(t,eo.current);Bh(t,r),u=k_(null,t,n,e,u,r);var h=D_();return t.flags|=1,typeof u=="object"&&u!==null&&typeof u.render=="function"&&u.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oo(n)?(h=!0,o4(t)):h=!1,t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,A_(t),u.updater=B6,t.stateNode=u,u._reactInternals=t,og(t,n,e,r),t=lg(null,t,n,!0,h,r)):(t.tag=0,Cn&&h&&x_(t),so(null,t,u,r),t=t.child),t;case 16:n=t.elementType;e:{switch(N5(e,t),e=t.pendingProps,u=n._init,n=u(n._payload),t.type=n,u=t.tag=a$(n),e=Xa(n,e),u){case 0:t=sg(null,t,n,e,r);break e;case 1:t=RT(null,t,n,e,r);break e;case 11:t=LT(null,t,n,e,r);break e;case 14:t=zT(null,t,n,Xa(n.type,e),r);break e}throw Error(Pt(306,n,""))}return t;case 0:return n=t.type,u=t.pendingProps,u=t.elementType===n?u:Xa(n,u),sg(e,t,n,u,r);case 1:return n=t.type,u=t.pendingProps,u=t.elementType===n?u:Xa(n,u),RT(e,t,n,u,r);case 3:e:{if(RI(t),e===null)throw Error(Pt(387));n=t.pendingProps,h=t.memoizedState,u=h.element,uI(e,t),c4(t,n,null,r);var p=t.memoizedState;if(n=p.element,h.isDehydrated)if(h={element:n,isDehydrated:!1,cache:p.cache,pendingSuspenseBoundaries:p.pendingSuspenseBoundaries,transitions:p.transitions},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){u=Yh(Error(Pt(423)),t),t=BT(e,t,n,r,u);break e}else if(n!==u){u=Yh(Error(Pt(424)),t),t=BT(e,t,n,r,u);break e}else for(Yo=yu(t.stateNode.containerInfo.firstChild),Jo=t,Cn=!0,Qa=null,r=sI(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Zh(),n===u){t=gl(e,t,r);break e}so(e,t,n,r)}t=t.child}return t;case 5:return cI(t),e===null&&rg(t),n=t.type,u=t.pendingProps,h=e!==null?e.memoizedProps:null,p=u.children,Y9(n,u)?p=null:h!==null&&Y9(n,h)&&(t.flags|=32),zI(e,t),so(e,t,p,r),t.child;case 6:return e===null&&rg(t),null;case 13:return BI(e,t,r);case 4:return M_(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Xh(t,null,n,r):so(e,t,n,r),t.child;case 11:return n=t.type,u=t.pendingProps,u=t.elementType===n?u:Xa(n,u),LT(e,t,n,u,r);case 7:return so(e,t,t.pendingProps,r),t.child;case 8:return so(e,t,t.pendingProps.children,r),t.child;case 12:return so(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,u=t.pendingProps,h=t.memoizedProps,p=u.value,_n(l4,n._currentValue),n._currentValue=p,h!==null)if(as(h.value,p)){if(h.children===u.children&&!Io.current){t=gl(e,t,r);break e}}else for(h=t.child,h!==null&&(h.return=t);h!==null;){var o=h.dependencies;if(o!==null){p=h.child;for(var _=o.firstContext;_!==null;){if(_.context===n){if(h.tag===1){_=ll(-1,r&-r),_.tag=2;var b=h.updateQueue;if(b!==null){b=b.shared;var P=b.pending;P===null?_.next=_:(_.next=P.next,P.next=_),b.pending=_}}h.lanes|=r,_=h.alternate,_!==null&&(_.lanes|=r),ng(h.return,r,t),o.lanes|=r;break}_=_.next}}else if(h.tag===10)p=h.type===t.type?null:h.child;else if(h.tag===18){if(p=h.return,p===null)throw Error(Pt(341));p.lanes|=r,o=p.alternate,o!==null&&(o.lanes|=r),ng(p,r,t),p=h.sibling}else p=h.child;if(p!==null)p.return=h;else for(p=h;p!==null;){if(p===t){p=null;break}if(h=p.sibling,h!==null){h.return=p.return,p=h;break}p=p.return}h=p}so(e,t,u.children,r),t=t.child}return t;case 9:return u=t.type,n=t.pendingProps.children,Bh(t,r),u=Ea(u),n=n(u),t.flags|=1,so(e,t,n,r),t.child;case 14:return n=t.type,u=Xa(n,t.pendingProps),u=Xa(n.type,u),zT(e,t,n,u,r);case 15:return DI(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,u=t.pendingProps,u=t.elementType===n?u:Xa(n,u),N5(e,t),t.tag=1,Oo(n)?(e=!0,o4(t)):e=!1,Bh(t,r),II(t,n,u),og(t,n,u,r),lg(null,t,n,!0,e,r);case 19:return FI(e,t,r);case 22:return LI(e,t,r)}throw Error(Pt(156,t.tag))};function eO(e,t){return AC(e,t)}function o$(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xa(e,t,r,n){return new o$(e,t,r,n)}function V_(e){return e=e.prototype,!(!e||!e.isReactComponent)}function a$(e){if(typeof e=="function")return V_(e)?1:0;if(e!=null){if(e=e.$$typeof,e===l_)return 11;if(e===u_)return 14}return 2}function bu(e,t){var r=e.alternate;return r===null?(r=xa(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function G5(e,t,r,n,u,h){var p=2;if(n=e,typeof e=="function")V_(e)&&(p=1);else if(typeof e=="string")p=5;else e:switch(e){case _h:return jc(r.children,u,h,t);case s_:p=8,u|=8;break;case C9:return e=xa(12,r,t,u|2),e.elementType=C9,e.lanes=h,e;case I9:return e=xa(13,r,t,u),e.elementType=I9,e.lanes=h,e;case O9:return e=xa(19,r,t,u),e.elementType=O9,e.lanes=h,e;case cC:return $6(r,u,h,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case lC:p=10;break e;case uC:p=9;break e;case l_:p=11;break e;case u_:p=14;break e;case iu:p=16,n=null;break e}throw Error(Pt(130,e==null?e:typeof e,""))}return t=xa(p,r,t,u),t.elementType=e,t.type=n,t.lanes=h,t}function jc(e,t,r,n){return e=xa(7,e,n,t),e.lanes=r,e}function $6(e,t,r,n){return e=xa(22,e,n,t),e.elementType=cC,e.lanes=r,e.stateNode={isHidden:!1},e}function N8(e,t,r){return e=xa(6,e,null,t),e.lanes=r,e}function U8(e,t,r){return t=xa(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function s$(e,t,r,n,u){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=w8(0),this.expirationTimes=w8(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=w8(0),this.identifierPrefix=n,this.onRecoverableError=u,this.mutableSourceEagerHydrationData=null}function G_(e,t,r,n,u,h,p,o,_){return e=new s$(e,t,r,o,_),t===1?(t=1,h===!0&&(t|=8)):t=0,h=xa(3,null,null,t),e.current=h,h.stateNode=e,h.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},A_(h),e}function l$(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:yh,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function tO(e){if(!e)return Pu;e=e._reactInternals;e:{if(t1(e)!==e||e.tag!==1)throw Error(Pt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Pt(171))}if(e.tag===1){var r=e.type;if(Oo(r))return tI(e,r,t)}return t}function rO(e,t,r,n,u,h,p,o,_){return e=G_(r,n,!0,e,u,h,p,o,_),e.context=tO(null),r=e.current,n=co(),u=xu(r),h=ll(n,u),h.callback=t??null,_u(r,h,u),e.current.lanes=u,p2(e,u,n),ko(e,n),e}function N6(e,t,r,n){var u=t.current,h=co(),p=xu(u);return r=tO(r),t.context===null?t.context=r:t.pendingContext=r,t=ll(h,p),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=_u(u,t,p),e!==null&&(is(e,u,p,h),F5(e,u,p)),p}function _4(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function HT(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function W_(e,t){HT(e,t),(e=e.alternate)&&HT(e,t)}function u$(){return null}var nO=typeof reportError=="function"?reportError:function(e){console.error(e)};function q_(e){this._internalRoot=e}U6.prototype.render=q_.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Pt(409));N6(e,t,null,null)};U6.prototype.unmount=q_.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Hc(function(){N6(null,e,null,null)}),t[pl]=null}};function U6(e){this._internalRoot=e}U6.prototype.unstable_scheduleHydration=function(e){if(e){var t=LC();e={blockedOn:null,target:e,priority:t};for(var r=0;r<su.length&&t!==0&&t<su[r].priority;r++);su.splice(r,0,e),r===0&&RC(e)}};function H_(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function V6(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ZT(){}function c$(e,t,r,n,u){if(u){if(typeof n=="function"){var h=n;n=function(){var b=_4(p);h.call(b)}}var p=rO(t,n,e,0,null,!1,!1,"",ZT);return e._reactRootContainer=p,e[pl]=p.current,gp(e.nodeType===8?e.parentNode:e),Hc(),p}for(;u=e.lastChild;)e.removeChild(u);if(typeof n=="function"){var o=n;n=function(){var b=_4(_);o.call(b)}}var _=G_(e,0,!1,null,null,!1,!1,"",ZT);return e._reactRootContainer=_,e[pl]=_.current,gp(e.nodeType===8?e.parentNode:e),Hc(function(){N6(t,_,r,n)}),_}function G6(e,t,r,n,u){var h=r._reactRootContainer;if(h){var p=h;if(typeof u=="function"){var o=u;u=function(){var _=_4(p);o.call(_)}}N6(t,p,e,u)}else p=c$(r,t,e,u,n);return _4(p)}kC=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Vd(t.pendingLanes);r!==0&&(f_(t,r|1),ko(t,Kn()),!(Rr&6)&&(Jh=Kn()+500,Iu()))}break;case 13:Hc(function(){var n=ml(e,1);if(n!==null){var u=co();is(n,e,1,u)}}),W_(e,1)}};d_=function(e){if(e.tag===13){var t=ml(e,134217728);if(t!==null){var r=co();is(t,e,134217728,r)}W_(e,134217728)}};DC=function(e){if(e.tag===13){var t=xu(e),r=ml(e,t);if(r!==null){var n=co();is(r,e,t,n)}W_(e,t)}};LC=function(){return sn};zC=function(e,t){var r=sn;try{return sn=e,t()}finally{sn=r}};N9=function(e,t,r){switch(t){case"input":if(L9(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var u=L6(n);if(!u)throw Error(Pt(90));fC(n),L9(n,u)}}}break;case"textarea":pC(e,r);break;case"select":t=r.value,t!=null&&Dh(e,!!r.multiple,t,!1)}};bC=$_;wC=Hc;var h$={usingClientEntryPoint:!1,Events:[g2,wh,L6,vC,xC,$_]},Sd={findFiberByHostInstance:Ic,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},f$={bundleType:Sd.bundleType,version:Sd.version,rendererPackageName:Sd.rendererPackageName,rendererConfig:Sd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xl.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=EC(e),e===null?null:e.stateNode},findFiberByHostInstance:Sd.findFiberByHostInstance||u$,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var d5=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!d5.isDisabled&&d5.supportsFiber)try{I6=d5.inject(f$),Es=d5}catch{}}ea.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=h$;ea.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!H_(t))throw Error(Pt(200));return l$(e,t,null,r)};ea.createRoot=function(e,t){if(!H_(e))throw Error(Pt(299));var r=!1,n="",u=nO;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(u=t.onRecoverableError)),t=G_(e,1,!1,null,null,r,!1,n,u),e[pl]=t.current,gp(e.nodeType===8?e.parentNode:e),new q_(t)};ea.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Pt(188)):(e=Object.keys(e).join(","),Error(Pt(268,e)));return e=EC(t),e=e===null?null:e.stateNode,e};ea.flushSync=function(e){return Hc(e)};ea.hydrate=function(e,t,r){if(!V6(t))throw Error(Pt(200));return G6(null,e,t,!0,r)};ea.hydrateRoot=function(e,t,r){if(!H_(e))throw Error(Pt(405));var n=r!=null&&r.hydratedSources||null,u=!1,h="",p=nO;if(r!=null&&(r.unstable_strictMode===!0&&(u=!0),r.identifierPrefix!==void 0&&(h=r.identifierPrefix),r.onRecoverableError!==void 0&&(p=r.onRecoverableError)),t=rO(t,null,e,1,r??null,u,!1,h,p),e[pl]=t.current,gp(e),n)for(e=0;e<n.length;e++)r=n[e],u=r._getVersion,u=u(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,u]:t.mutableSourceEagerHydrationData.push(r,u);return new U6(t)};ea.render=function(e,t,r){if(!V6(t))throw Error(Pt(200));return G6(null,e,t,!1,r)};ea.unmountComponentAtNode=function(e){if(!V6(e))throw Error(Pt(40));return e._reactRootContainer?(Hc(function(){G6(null,null,e,!1,function(){e._reactRootContainer=null,e[pl]=null})}),!0):!1};ea.unstable_batchedUpdates=$_;ea.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!V6(r))throw Error(Pt(200));if(e==null||e._reactInternals===void 0)throw Error(Pt(38));return G6(e,t,r,!1,n)};ea.version="18.3.1-next-f1338f8080-20240426";function iO(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(iO)}catch(e){console.error(e)}}iO(),iC.exports=ea;var _2=iC.exports;const d$=Br(_2),p$=Qy({__proto__:null,default:d$},[_2]);var XT=_2;Vw.createRoot=XT.createRoot,Vw.hydrateRoot=XT.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Mn(){return Mn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mn.apply(this,arguments)}var Xn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Xn||(Xn={}));const KT="popstate";function m$(e){e===void 0&&(e={});function t(n,u){let{pathname:h,search:p,hash:o}=n.location;return Ep("",{pathname:h,search:p,hash:o},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function r(n,u){return typeof u=="string"?u:Zc(u)}return y$(t,r,null,e)}function Or(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Qh(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function g$(){return Math.random().toString(36).substr(2,8)}function YT(e,t){return{usr:e.state,key:e.key,idx:t}}function Ep(e,t,r,n){return r===void 0&&(r=null),Mn({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?bl(t):t,{state:r,key:t&&t.key||n||g$()})}function Zc(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function bl(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function y$(e,t,r,n){n===void 0&&(n={});let{window:u=document.defaultView,v5Compat:h=!1}=n,p=u.history,o=Xn.Pop,_=null,b=P();b==null&&(b=0,p.replaceState(Mn({},p.state,{idx:b}),""));function P(){return(p.state||{idx:null}).idx}function S(){o=Xn.Pop;let G=P(),$=G==null?null:G-b;b=G,_&&_({action:o,location:j.location,delta:$})}function C(G,$){o=Xn.Push;let N=Ep(j.location,G,$);r&&r(N,G),b=P()+1;let U=YT(N,b),J=j.createHref(N);try{p.pushState(U,"",J)}catch(q){if(q instanceof DOMException&&q.name==="DataCloneError")throw q;u.location.assign(J)}h&&_&&_({action:o,location:j.location,delta:1})}function L(G,$){o=Xn.Replace;let N=Ep(j.location,G,$);r&&r(N,G),b=P();let U=YT(N,b),J=j.createHref(N);p.replaceState(U,"",J),h&&_&&_({action:o,location:j.location,delta:0})}function F(G){let $=u.location.origin!=="null"?u.location.origin:u.location.href,N=typeof G=="string"?G:Zc(G);return N=N.replace(/ $/,"%20"),Or($,"No window.location.(origin|href) available to create URL for href: "+N),new URL(N,$)}let j={get action(){return o},get location(){return e(u,p)},listen(G){if(_)throw new Error("A history only accepts one active listener");return u.addEventListener(KT,S),_=G,()=>{u.removeEventListener(KT,S),_=null}},createHref(G){return t(u,G)},createURL:F,encodeLocation(G){let $=F(G);return{pathname:$.pathname,search:$.search,hash:$.hash}},push:C,replace:L,go(G){return p.go(G)}};return j}var an;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(an||(an={}));const _$=new Set(["lazy","caseSensitive","path","id","index","children"]);function v$(e){return e.index===!0}function v4(e,t,r,n){return r===void 0&&(r=[]),n===void 0&&(n={}),e.map((u,h)=>{let p=[...r,String(h)],o=typeof u.id=="string"?u.id:p.join("-");if(Or(u.index!==!0||!u.children,"Cannot specify children on an index route"),Or(!n[o],'Found a route id collision on id "'+o+`".  Route id's must be globally unique within Data Router usages`),v$(u)){let _=Mn({},u,t(u),{id:o});return n[o]=_,_}else{let _=Mn({},u,t(u),{id:o,children:void 0});return n[o]=_,u.children&&(_.children=v4(u.children,t,p,n)),_}})}function Mc(e,t,r){return r===void 0&&(r="/"),W5(e,t,r,!1)}function W5(e,t,r,n){let u=typeof t=="string"?bl(t):t,h=Cf(u.pathname||"/",r);if(h==null)return null;let p=oO(e);b$(p);let o=null;for(let _=0;o==null&&_<p.length;++_){let b=k$(h);o=I$(p[_],b,n)}return o}function x$(e,t){let{route:r,pathname:n,params:u}=e;return{id:r.id,pathname:n,params:u,data:t[r.id],handle:r.handle}}function oO(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let u=(h,p,o)=>{let _={relativePath:o===void 0?h.path||"":o,caseSensitive:h.caseSensitive===!0,childrenIndex:p,route:h};_.relativePath.startsWith("/")&&(Or(_.relativePath.startsWith(n),'Absolute route path "'+_.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),_.relativePath=_.relativePath.slice(n.length));let b=ul([n,_.relativePath]),P=r.concat(_);h.children&&h.children.length>0&&(Or(h.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+b+'".')),oO(h.children,t,P,b)),!(h.path==null&&!h.index)&&t.push({path:b,score:M$(b,h.index),routesMeta:P})};return e.forEach((h,p)=>{var o;if(h.path===""||!((o=h.path)!=null&&o.includes("?")))u(h,p);else for(let _ of aO(h.path))u(h,p,_)}),t}function aO(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,u=r.endsWith("?"),h=r.replace(/\?$/,"");if(n.length===0)return u?[h,""]:[h];let p=aO(n.join("/")),o=[];return o.push(...p.map(_=>_===""?h:[h,_].join("/"))),u&&o.push(...p),o.map(_=>e.startsWith("/")&&_===""?"/":_)}function b$(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:C$(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const w$=/^:[\w-]+$/,T$=3,S$=2,E$=1,P$=10,A$=-2,JT=e=>e==="*";function M$(e,t){let r=e.split("/"),n=r.length;return r.some(JT)&&(n+=A$),t&&(n+=S$),r.filter(u=>!JT(u)).reduce((u,h)=>u+(w$.test(h)?T$:h===""?E$:P$),n)}function C$(e,t){return e.length===t.length&&e.slice(0,-1).every((n,u)=>n===t[u])?e[e.length-1]-t[t.length-1]:0}function I$(e,t,r){r===void 0&&(r=!1);let{routesMeta:n}=e,u={},h="/",p=[];for(let o=0;o<n.length;++o){let _=n[o],b=o===n.length-1,P=h==="/"?t:t.slice(h.length)||"/",S=QT({path:_.relativePath,caseSensitive:_.caseSensitive,end:b},P),C=_.route;if(!S&&b&&r&&!n[n.length-1].route.index&&(S=QT({path:_.relativePath,caseSensitive:_.caseSensitive,end:!1},P)),!S)return null;Object.assign(u,S.params),p.push({params:u,pathname:ul([h,S.pathname]),pathnameBase:z$(ul([h,S.pathnameBase])),route:C}),S.pathnameBase!=="/"&&(h=ul([h,S.pathnameBase]))}return p}function QT(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=O$(e.path,e.caseSensitive,e.end),u=t.match(r);if(!u)return null;let h=u[0],p=h.replace(/(.)\/+$/,"$1"),o=u.slice(1);return{params:n.reduce((b,P,S)=>{let{paramName:C,isOptional:L}=P;if(C==="*"){let j=o[S]||"";p=h.slice(0,h.length-j.length).replace(/(.)\/+$/,"$1")}const F=o[S];return L&&!F?b[C]=void 0:b[C]=(F||"").replace(/%2F/g,"/"),b},{}),pathname:h,pathnameBase:p,pattern:e}}function O$(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Qh(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],u="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(p,o,_)=>(n.push({paramName:o,isOptional:_!=null}),_?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),u+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?u+="\\/*$":e!==""&&e!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,t?void 0:"i"),n]}function k$(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Qh(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Cf(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function D$(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:u=""}=typeof e=="string"?bl(e):e;return{pathname:r?r.startsWith("/")?r:L$(r,t):t,search:R$(n),hash:B$(u)}}function L$(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(u=>{u===".."?r.length>1&&r.pop():u!=="."&&r.push(u)}),r.length>1?r.join("/"):"/"}function V8(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function sO(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Z_(e,t){let r=sO(e);return t?r.map((n,u)=>u===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function X_(e,t,r,n){n===void 0&&(n=!1);let u;typeof e=="string"?u=bl(e):(u=Mn({},e),Or(!u.pathname||!u.pathname.includes("?"),V8("?","pathname","search",u)),Or(!u.pathname||!u.pathname.includes("#"),V8("#","pathname","hash",u)),Or(!u.search||!u.search.includes("#"),V8("#","search","hash",u)));let h=e===""||u.pathname==="",p=h?"/":u.pathname,o;if(p==null)o=r;else{let S=t.length-1;if(!n&&p.startsWith("..")){let C=p.split("/");for(;C[0]==="..";)C.shift(),S-=1;u.pathname=C.join("/")}o=S>=0?t[S]:"/"}let _=D$(u,o),b=p&&p!=="/"&&p.endsWith("/"),P=(h||p===".")&&r.endsWith("/");return!_.pathname.endsWith("/")&&(b||P)&&(_.pathname+="/"),_}const ul=e=>e.join("/").replace(/\/\/+/g,"/"),z$=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),R$=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,B$=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;class x4{constructor(t,r,n,u){u===void 0&&(u=!1),this.status=t,this.statusText=r||"",this.internal=u,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}}function Pp(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const lO=["post","put","patch","delete"],F$=new Set(lO),j$=["get",...lO],$$=new Set(j$),N$=new Set([301,302,303,307,308]),U$=new Set([307,308]),G8={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},V$={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Ed={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},K_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,G$=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),uO="remix-router-transitions";function W$(e){const t=e.window?e.window:typeof window<"u"?window:void 0,r=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u",n=!r;Or(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let u;if(e.mapRouteProperties)u=e.mapRouteProperties;else if(e.detectErrorBoundary){let le=e.detectErrorBoundary;u=Ie=>({hasErrorBoundary:le(Ie)})}else u=G$;let h={},p=v4(e.routes,u,void 0,h),o,_=e.basename||"/",b=e.dataStrategy||X$,P=e.patchRoutesOnNavigation,S=Mn({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},e.future),C=null,L=new Set,F=null,j=null,G=null,$=e.hydrationData!=null,N=Mc(p,e.history.location,_),U=!1,J=null;if(N==null&&!P){let le=Po(404,{pathname:e.history.location.pathname}),{matches:Ie,route:je}=cS(p);N=Ie,J={[je.id]:le}}N&&!e.hydrationData&&Oe(N,p,e.history.location.pathname).active&&(N=null);let q;if(N)if(N.some(le=>le.route.lazy))q=!1;else if(!N.some(le=>le.route.loader))q=!0;else if(S.v7_partialHydration){let le=e.hydrationData?e.hydrationData.loaderData:null,Ie=e.hydrationData?e.hydrationData.errors:null;if(Ie){let je=N.findIndex(et=>Ie[et.route.id]!==void 0);q=N.slice(0,je+1).every(et=>!bg(et.route,le,Ie))}else q=N.every(je=>!bg(je.route,le,Ie))}else q=e.hydrationData!=null;else if(q=!1,N=[],S.v7_partialHydration){let le=Oe(null,p,e.history.location.pathname);le.active&&le.matches&&(U=!0,N=le.matches)}let Y,X={historyAction:e.history.action,location:e.history.location,matches:N,initialized:q,navigation:G8,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||J,fetchers:new Map,blockers:new Map},ue=Xn.Pop,oe=!1,Re,ze=!1,De=new Map,Je=null,we=!1,ve=!1,Ce=[],Le=new Set,ge=new Map,$e=0,rt=-1,ft=new Map,lt=new Set,Tt=new Map,qt=new Map,fr=new Set,br=new Map,Mr=new Map,nn;function zt(){if(C=e.history.listen(le=>{let{action:Ie,location:je,delta:et}=le;if(nn){nn(),nn=void 0;return}Qh(Mr.size===0||et!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ht=Q({currentLocation:X.location,nextLocation:je,historyAction:Ie});if(ht&&et!=null){let Et=new Promise(Nt=>{nn=Nt});e.history.go(et*-1),ye(ht,{state:"blocked",location:je,proceed(){ye(ht,{state:"proceeding",proceed:void 0,reset:void 0,location:je}),Et.then(()=>e.history.go(et))},reset(){let Nt=new Map(X.blockers);Nt.set(ht,Ed),dt({blockers:Nt})}});return}return Tr(Ie,je)}),r){uN(t,De);let le=()=>cN(t,De);t.addEventListener("pagehide",le),Je=()=>t.removeEventListener("pagehide",le)}return X.initialized||Tr(Xn.Pop,X.location,{initialHydration:!0}),Y}function rr(){C&&C(),Je&&Je(),L.clear(),Re&&Re.abort(),X.fetchers.forEach((le,Ie)=>Lo(Ie)),X.blockers.forEach((le,Ie)=>zs(Ie))}function Lt(le){return L.add(le),()=>L.delete(le)}function dt(le,Ie){Ie===void 0&&(Ie={}),X=Mn({},X,le);let je=[],et=[];S.v7_fetcherPersist&&X.fetchers.forEach((ht,Et)=>{ht.state==="idle"&&(fr.has(Et)?et.push(Et):je.push(Et))}),fr.forEach(ht=>{!X.fetchers.has(ht)&&!ge.has(ht)&&et.push(ht)}),[...L].forEach(ht=>ht(X,{deletedFetchers:et,viewTransitionOpts:Ie.viewTransitionOpts,flushSync:Ie.flushSync===!0})),S.v7_fetcherPersist?(je.forEach(ht=>X.fetchers.delete(ht)),et.forEach(ht=>Lo(ht))):et.forEach(ht=>fr.delete(ht))}function pr(le,Ie,je){var et,ht;let{flushSync:Et}=je===void 0?{}:je,Nt=X.actionData!=null&&X.navigation.formMethod!=null&&Ya(X.navigation.formMethod)&&X.navigation.state==="loading"&&((et=le.state)==null?void 0:et._isRedirect)!==!0,kt;Ie.actionData?Object.keys(Ie.actionData).length>0?kt=Ie.actionData:kt=null:Nt?kt=X.actionData:kt=null;let Ft=Ie.loaderData?lS(X.loaderData,Ie.loaderData,Ie.matches||[],Ie.errors):X.loaderData,Ot=X.blockers;Ot.size>0&&(Ot=new Map(Ot),Ot.forEach((nr,mn)=>Ot.set(mn,Ed)));let Vt=oe===!0||X.navigation.formMethod!=null&&Ya(X.navigation.formMethod)&&((ht=le.state)==null?void 0:ht._isRedirect)!==!0;o&&(p=o,o=void 0),we||ue===Xn.Pop||(ue===Xn.Push?e.history.push(le,le.state):ue===Xn.Replace&&e.history.replace(le,le.state));let Jt;if(ue===Xn.Pop){let nr=De.get(X.location.pathname);nr&&nr.has(le.pathname)?Jt={currentLocation:X.location,nextLocation:le}:De.has(le.pathname)&&(Jt={currentLocation:le,nextLocation:X.location})}else if(ze){let nr=De.get(X.location.pathname);nr?nr.add(le.pathname):(nr=new Set([le.pathname]),De.set(X.location.pathname,nr)),Jt={currentLocation:X.location,nextLocation:le}}dt(Mn({},Ie,{actionData:kt,loaderData:Ft,historyAction:ue,location:le,initialized:!0,navigation:G8,revalidation:"idle",restoreScrollPosition:Ue(le,Ie.matches||X.matches),preventScrollReset:Vt,blockers:Ot}),{viewTransitionOpts:Jt,flushSync:Et===!0}),ue=Xn.Pop,oe=!1,ze=!1,we=!1,ve=!1,Ce=[]}async function _r(le,Ie){if(typeof le=="number"){e.history.go(le);return}let je=xg(X.location,X.matches,_,S.v7_prependBasename,le,S.v7_relativeSplatPath,Ie==null?void 0:Ie.fromRouteId,Ie==null?void 0:Ie.relative),{path:et,submission:ht,error:Et}=eS(S.v7_normalizeFormMethod,!1,je,Ie),Nt=X.location,kt=Ep(X.location,et,Ie&&Ie.state);kt=Mn({},kt,e.history.encodeLocation(kt));let Ft=Ie&&Ie.replace!=null?Ie.replace:void 0,Ot=Xn.Push;Ft===!0?Ot=Xn.Replace:Ft===!1||ht!=null&&Ya(ht.formMethod)&&ht.formAction===X.location.pathname+X.location.search&&(Ot=Xn.Replace);let Vt=Ie&&"preventScrollReset"in Ie?Ie.preventScrollReset===!0:void 0,Jt=(Ie&&Ie.flushSync)===!0,nr=Q({currentLocation:Nt,nextLocation:kt,historyAction:Ot});if(nr){ye(nr,{state:"blocked",location:kt,proceed(){ye(nr,{state:"proceeding",proceed:void 0,reset:void 0,location:kt}),_r(le,Ie)},reset(){let mn=new Map(X.blockers);mn.set(nr,Ed),dt({blockers:mn})}});return}return await Tr(Ot,kt,{submission:ht,pendingError:Et,preventScrollReset:Vt,replace:Ie&&Ie.replace,enableViewTransition:Ie&&Ie.viewTransition,flushSync:Jt})}function hr(){if(mi(),dt({revalidation:"loading"}),X.navigation.state!=="submitting"){if(X.navigation.state==="idle"){Tr(X.historyAction,X.location,{startUninterruptedRevalidation:!0});return}Tr(ue||X.historyAction,X.navigation.location,{overrideNavigation:X.navigation,enableViewTransition:ze===!0})}}async function Tr(le,Ie,je){Re&&Re.abort(),Re=null,ue=le,we=(je&&je.startUninterruptedRevalidation)===!0,Ve(X.location,X.matches),oe=(je&&je.preventScrollReset)===!0,ze=(je&&je.enableViewTransition)===!0;let et=o||p,ht=je&&je.overrideNavigation,Et=je!=null&&je.initialHydration&&X.matches&&X.matches.length>0&&!U?X.matches:Mc(et,Ie,_),Nt=(je&&je.flushSync)===!0;if(Et&&X.initialized&&!ve&&tN(X.location,Ie)&&!(je&&je.submission&&Ya(je.submission.formMethod))){pr(Ie,{matches:Et},{flushSync:Nt});return}let kt=Oe(Et,et,Ie.pathname);if(kt.active&&kt.matches&&(Et=kt.matches),!Et){let{error:Jr,notFoundMatches:Dr,route:er}=ee(Ie.pathname);pr(Ie,{matches:Dr,loaderData:{},errors:{[er.id]:Jr}},{flushSync:Nt});return}Re=new AbortController;let Ft=ah(e.history,Ie,Re.signal,je&&je.submission),Ot;if(je&&je.pendingError)Ot=[Cc(Et).route.id,{type:an.error,error:je.pendingError}];else if(je&&je.submission&&Ya(je.submission.formMethod)){let Jr=await kn(Ft,Ie,je.submission,Et,kt.active,{replace:je.replace,flushSync:Nt});if(Jr.shortCircuited)return;if(Jr.pendingActionResult){let[Dr,er]=Jr.pendingActionResult;if(Ho(er)&&Pp(er.error)&&er.error.status===404){Re=null,pr(Ie,{matches:Jr.matches,loaderData:{},errors:{[Dr]:er.error}});return}}Et=Jr.matches||Et,Ot=Jr.pendingActionResult,ht=W8(Ie,je.submission),Nt=!1,kt.active=!1,Ft=ah(e.history,Ft.url,Ft.signal)}let{shortCircuited:Vt,matches:Jt,loaderData:nr,errors:mn}=await Gn(Ft,Ie,Et,kt.active,ht,je&&je.submission,je&&je.fetcherSubmission,je&&je.replace,je&&je.initialHydration===!0,Nt,Ot);Vt||(Re=null,pr(Ie,Mn({matches:Jt||Et},uS(Ot),{loaderData:nr,errors:mn})))}async function kn(le,Ie,je,et,ht,Et){Et===void 0&&(Et={}),mi();let Nt=sN(Ie,je);if(dt({navigation:Nt},{flushSync:Et.flushSync===!0}),ht){let Ot=await Xe(et,Ie.pathname,le.signal);if(Ot.type==="aborted")return{shortCircuited:!0};if(Ot.type==="error"){let Vt=Cc(Ot.partialMatches).route.id;return{matches:Ot.partialMatches,pendingActionResult:[Vt,{type:an.error,error:Ot.error}]}}else if(Ot.matches)et=Ot.matches;else{let{notFoundMatches:Vt,error:Jt,route:nr}=ee(Ie.pathname);return{matches:Vt,pendingActionResult:[nr.id,{type:an.error,error:Jt}]}}}let kt,Ft=Wd(et,Ie);if(!Ft.route.action&&!Ft.route.lazy)kt={type:an.error,error:Po(405,{method:le.method,pathname:Ie.pathname,routeId:Ft.route.id})};else if(kt=(await to("action",X,le,[Ft],et,null))[Ft.route.id],le.signal.aborted)return{shortCircuited:!0};if(Dc(kt)){let Ot;return Et&&Et.replace!=null?Ot=Et.replace:Ot=oS(kt.response.headers.get("Location"),new URL(le.url),_)===X.location.pathname+X.location.search,await ii(le,kt,!0,{submission:je,replace:Ot}),{shortCircuited:!0}}if(fu(kt))throw Po(400,{type:"defer-action"});if(Ho(kt)){let Ot=Cc(et,Ft.route.id);return(Et&&Et.replace)!==!0&&(ue=Xn.Push),{matches:et,pendingActionResult:[Ot.route.id,kt]}}return{matches:et,pendingActionResult:[Ft.route.id,kt]}}async function Gn(le,Ie,je,et,ht,Et,Nt,kt,Ft,Ot,Vt){let Jt=ht||W8(Ie,Et),nr=Et||Nt||fS(Jt),mn=!we&&(!S.v7_partialHydration||!Ft);if(et){if(mn){let Qr=vn(Vt);dt(Mn({navigation:Jt},Qr!==void 0?{actionData:Qr}:{}),{flushSync:Ot})}let vr=await Xe(je,Ie.pathname,le.signal);if(vr.type==="aborted")return{shortCircuited:!0};if(vr.type==="error"){let Qr=Cc(vr.partialMatches).route.id;return{matches:vr.partialMatches,loaderData:{},errors:{[Qr]:vr.error}}}else if(vr.matches)je=vr.matches;else{let{error:Qr,notFoundMatches:Qe,route:Ii}=ee(Ie.pathname);return{matches:Qe,loaderData:{},errors:{[Ii.id]:Qr}}}}let Jr=o||p,[Dr,er]=rS(e.history,X,je,nr,Ie,S.v7_partialHydration&&Ft===!0,S.v7_skipActionErrorRevalidation,ve,Ce,Le,fr,Tt,lt,Jr,_,Vt);if(me(vr=>!(je&&je.some(Qr=>Qr.route.id===vr))||Dr&&Dr.some(Qr=>Qr.route.id===vr)),rt=++$e,Dr.length===0&&er.length===0){let vr=na();return pr(Ie,Mn({matches:je,loaderData:{},errors:Vt&&Ho(Vt[1])?{[Vt[0]]:Vt[1].error}:null},uS(Vt),vr?{fetchers:new Map(X.fetchers)}:{}),{flushSync:Ot}),{shortCircuited:!0}}if(mn){let vr={};if(!et){vr.navigation=Jt;let Qr=vn(Vt);Qr!==void 0&&(vr.actionData=Qr)}er.length>0&&(vr.fetchers=po(er)),dt(vr,{flushSync:Ot})}er.forEach(vr=>{gi(vr.key),vr.controller&&ge.set(vr.key,vr.controller)});let oa=()=>er.forEach(vr=>gi(vr.key));Re&&Re.signal.addEventListener("abort",oa);let{loaderResults:Ro,fetcherResults:ro}=await Ds(X,je,Dr,er,le);if(le.signal.aborted)return{shortCircuited:!0};Re&&Re.signal.removeEventListener("abort",oa),er.forEach(vr=>ge.delete(vr.key));let Mi=p5(Ro);if(Mi)return await ii(le,Mi.result,!0,{replace:kt}),{shortCircuited:!0};if(Mi=p5(ro),Mi)return lt.add(Mi.key),await ii(le,Mi.result,!0,{replace:kt}),{shortCircuited:!0};let{loaderData:Fi,errors:Ci}=sS(X,je,Ro,Vt,er,ro,br);br.forEach((vr,Qr)=>{vr.subscribe(Qe=>{(Qe||vr.done)&&br.delete(Qr)})}),S.v7_partialHydration&&Ft&&X.errors&&(Ci=Mn({},X.errors,Ci));let Bo=na(),us=ia(rt),mo=Bo||us||er.length>0;return Mn({matches:je,loaderData:Fi,errors:Ci},mo?{fetchers:new Map(X.fetchers)}:{})}function vn(le){if(le&&!Ho(le[1]))return{[le[0]]:le[1].data};if(X.actionData)return Object.keys(X.actionData).length===0?null:X.actionData}function po(le){return le.forEach(Ie=>{let je=X.fetchers.get(Ie.key),et=Pd(void 0,je?je.data:void 0);X.fetchers.set(Ie.key,et)}),new Map(X.fetchers)}function pi(le,Ie,je,et){if(n)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");gi(le);let ht=(et&&et.flushSync)===!0,Et=o||p,Nt=xg(X.location,X.matches,_,S.v7_prependBasename,je,S.v7_relativeSplatPath,Ie,et==null?void 0:et.relative),kt=Mc(Et,Nt,_),Ft=Oe(kt,Et,Nt);if(Ft.active&&Ft.matches&&(kt=Ft.matches),!kt){Ai(le,Ie,Po(404,{pathname:Nt}),{flushSync:ht});return}let{path:Ot,submission:Vt,error:Jt}=eS(S.v7_normalizeFormMethod,!0,Nt,et);if(Jt){Ai(le,Ie,Jt,{flushSync:ht});return}let nr=Wd(kt,Ot),mn=(et&&et.preventScrollReset)===!0;if(Vt&&Ya(Vt.formMethod)){Pi(le,Ie,Ot,nr,kt,Ft.active,ht,mn,Vt);return}Tt.set(le,{routeId:Ie,path:Ot}),Bi(le,Ie,Ot,nr,kt,Ft.active,ht,mn,Vt)}async function Pi(le,Ie,je,et,ht,Et,Nt,kt,Ft){mi(),Tt.delete(le);function Ot(xr){if(!xr.route.action&&!xr.route.lazy){let fn=Po(405,{method:Ft.formMethod,pathname:je,routeId:Ie});return Ai(le,Ie,fn,{flushSync:Nt}),!0}return!1}if(!Et&&Ot(et))return;let Vt=X.fetchers.get(le);oi(le,lN(Ft,Vt),{flushSync:Nt});let Jt=new AbortController,nr=ah(e.history,je,Jt.signal,Ft);if(Et){let xr=await Xe(ht,new URL(nr.url).pathname,nr.signal,le);if(xr.type==="aborted")return;if(xr.type==="error"){Ai(le,Ie,xr.error,{flushSync:Nt});return}else if(xr.matches){if(ht=xr.matches,et=Wd(ht,je),Ot(et))return}else{Ai(le,Ie,Po(404,{pathname:je}),{flushSync:Nt});return}}ge.set(le,Jt);let mn=$e,Dr=(await to("action",X,nr,[et],ht,le))[et.route.id];if(nr.signal.aborted){ge.get(le)===Jt&&ge.delete(le);return}if(S.v7_fetcherPersist&&fr.has(le)){if(Dc(Dr)||Ho(Dr)){oi(le,nu(void 0));return}}else{if(Dc(Dr))if(ge.delete(le),rt>mn){oi(le,nu(void 0));return}else return lt.add(le),oi(le,Pd(Ft)),ii(nr,Dr,!1,{fetcherSubmission:Ft,preventScrollReset:kt});if(Ho(Dr)){Ai(le,Ie,Dr.error);return}}if(fu(Dr))throw Po(400,{type:"defer-action"});let er=X.navigation.location||X.location,oa=ah(e.history,er,Jt.signal),Ro=o||p,ro=X.navigation.state!=="idle"?Mc(Ro,X.navigation.location,_):X.matches;Or(ro,"Didn't find any matches after fetcher action");let Mi=++$e;ft.set(le,Mi);let Fi=Pd(Ft,Dr.data);X.fetchers.set(le,Fi);let[Ci,Bo]=rS(e.history,X,ro,Ft,er,!1,S.v7_skipActionErrorRevalidation,ve,Ce,Le,fr,Tt,lt,Ro,_,[et.route.id,Dr]);Bo.filter(xr=>xr.key!==le).forEach(xr=>{let fn=xr.key,Ru=X.fetchers.get(fn),go=Pd(void 0,Ru?Ru.data:void 0);X.fetchers.set(fn,go),gi(fn),xr.controller&&ge.set(fn,xr.controller)}),dt({fetchers:new Map(X.fetchers)});let us=()=>Bo.forEach(xr=>gi(xr.key));Jt.signal.addEventListener("abort",us);let{loaderResults:mo,fetcherResults:vr}=await Ds(X,ro,Ci,Bo,oa);if(Jt.signal.aborted)return;Jt.signal.removeEventListener("abort",us),ft.delete(le),ge.delete(le),Bo.forEach(xr=>ge.delete(xr.key));let Qr=p5(mo);if(Qr)return ii(oa,Qr.result,!1,{preventScrollReset:kt});if(Qr=p5(vr),Qr)return lt.add(Qr.key),ii(oa,Qr.result,!1,{preventScrollReset:kt});let{loaderData:Qe,errors:Ii}=sS(X,ro,mo,void 0,Bo,vr,br);if(X.fetchers.has(le)){let xr=nu(Dr.data);X.fetchers.set(le,xr)}ia(Mi),X.navigation.state==="loading"&&Mi>rt?(Or(ue,"Expected pending action"),Re&&Re.abort(),pr(X.navigation.location,{matches:ro,loaderData:Qe,errors:Ii,fetchers:new Map(X.fetchers)})):(dt({errors:Ii,loaderData:lS(X.loaderData,Qe,ro,Ii),fetchers:new Map(X.fetchers)}),ve=!1)}async function Bi(le,Ie,je,et,ht,Et,Nt,kt,Ft){let Ot=X.fetchers.get(le);oi(le,Pd(Ft,Ot?Ot.data:void 0),{flushSync:Nt});let Vt=new AbortController,Jt=ah(e.history,je,Vt.signal);if(Et){let Dr=await Xe(ht,new URL(Jt.url).pathname,Jt.signal,le);if(Dr.type==="aborted")return;if(Dr.type==="error"){Ai(le,Ie,Dr.error,{flushSync:Nt});return}else if(Dr.matches)ht=Dr.matches,et=Wd(ht,je);else{Ai(le,Ie,Po(404,{pathname:je}),{flushSync:Nt});return}}ge.set(le,Vt);let nr=$e,Jr=(await to("loader",X,Jt,[et],ht,le))[et.route.id];if(fu(Jr)&&(Jr=await Y_(Jr,Jt.signal,!0)||Jr),ge.get(le)===Vt&&ge.delete(le),!Jt.signal.aborted){if(fr.has(le)){oi(le,nu(void 0));return}if(Dc(Jr))if(rt>nr){oi(le,nu(void 0));return}else{lt.add(le),await ii(Jt,Jr,!1,{preventScrollReset:kt});return}if(Ho(Jr)){Ai(le,Ie,Jr.error);return}Or(!fu(Jr),"Unhandled fetcher deferred data"),oi(le,nu(Jr.data))}}async function ii(le,Ie,je,et){let{submission:ht,fetcherSubmission:Et,preventScrollReset:Nt,replace:kt}=et===void 0?{}:et;Ie.response.headers.has("X-Remix-Revalidate")&&(ve=!0);let Ft=Ie.response.headers.get("Location");Or(Ft,"Expected a Location header on the redirect Response"),Ft=oS(Ft,new URL(le.url),_);let Ot=Ep(X.location,Ft,{_isRedirect:!0});if(r){let Dr=!1;if(Ie.response.headers.has("X-Remix-Reload-Document"))Dr=!0;else if(K_.test(Ft)){const er=e.history.createURL(Ft);Dr=er.origin!==t.location.origin||Cf(er.pathname,_)==null}if(Dr){kt?t.location.replace(Ft):t.location.assign(Ft);return}}Re=null;let Vt=kt===!0||Ie.response.headers.has("X-Remix-Replace")?Xn.Replace:Xn.Push,{formMethod:Jt,formAction:nr,formEncType:mn}=X.navigation;!ht&&!Et&&Jt&&nr&&mn&&(ht=fS(X.navigation));let Jr=ht||Et;if(U$.has(Ie.response.status)&&Jr&&Ya(Jr.formMethod))await Tr(Vt,Ot,{submission:Mn({},Jr,{formAction:Ft}),preventScrollReset:Nt||oe,enableViewTransition:je?ze:void 0});else{let Dr=W8(Ot,ht);await Tr(Vt,Ot,{overrideNavigation:Dr,fetcherSubmission:Et,preventScrollReset:Nt||oe,enableViewTransition:je?ze:void 0})}}async function to(le,Ie,je,et,ht,Et){let Nt,kt={};try{Nt=await K$(b,le,Ie,je,et,ht,Et,h,u)}catch(Ft){return et.forEach(Ot=>{kt[Ot.route.id]={type:an.error,error:Ft}}),kt}for(let[Ft,Ot]of Object.entries(Nt))if(rN(Ot)){let Vt=Ot.result;kt[Ft]={type:an.redirect,response:Q$(Vt,je,Ft,ht,_,S.v7_relativeSplatPath)}}else kt[Ft]=await J$(Ot);return kt}async function Ds(le,Ie,je,et,ht){let Et=le.matches,Nt=to("loader",le,ht,je,Ie,null),kt=Promise.all(et.map(async Vt=>{if(Vt.matches&&Vt.match&&Vt.controller){let nr=(await to("loader",le,ah(e.history,Vt.path,Vt.controller.signal),[Vt.match],Vt.matches,Vt.key))[Vt.match.route.id];return{[Vt.key]:nr}}else return Promise.resolve({[Vt.key]:{type:an.error,error:Po(404,{pathname:Vt.path})}})})),Ft=await Nt,Ot=(await kt).reduce((Vt,Jt)=>Object.assign(Vt,Jt),{});return await Promise.all([oN(Ie,Ft,ht.signal,Et,le.loaderData),aN(Ie,Ot,et)]),{loaderResults:Ft,fetcherResults:Ot}}function mi(){ve=!0,Ce.push(...me()),Tt.forEach((le,Ie)=>{ge.has(Ie)&&Le.add(Ie),gi(Ie)})}function oi(le,Ie,je){je===void 0&&(je={}),X.fetchers.set(le,Ie),dt({fetchers:new Map(X.fetchers)},{flushSync:(je&&je.flushSync)===!0})}function Ai(le,Ie,je,et){et===void 0&&(et={});let ht=Cc(X.matches,Ie);Lo(le),dt({errors:{[ht.route.id]:je},fetchers:new Map(X.fetchers)},{flushSync:(et&&et.flushSync)===!0})}function ra(le){return qt.set(le,(qt.get(le)||0)+1),fr.has(le)&&fr.delete(le),X.fetchers.get(le)||V$}function Lo(le){let Ie=X.fetchers.get(le);ge.has(le)&&!(Ie&&Ie.state==="loading"&&ft.has(le))&&gi(le),Tt.delete(le),ft.delete(le),lt.delete(le),S.v7_fetcherPersist&&fr.delete(le),Le.delete(le),X.fetchers.delete(le)}function Ls(le){let Ie=(qt.get(le)||0)-1;Ie<=0?(qt.delete(le),fr.add(le),S.v7_fetcherPersist||Lo(le)):qt.set(le,Ie),dt({fetchers:new Map(X.fetchers)})}function gi(le){let Ie=ge.get(le);Ie&&(Ie.abort(),ge.delete(le))}function zo(le){for(let Ie of le){let je=ra(Ie),et=nu(je.data);X.fetchers.set(Ie,et)}}function na(){let le=[],Ie=!1;for(let je of lt){let et=X.fetchers.get(je);Or(et,"Expected fetcher: "+je),et.state==="loading"&&(lt.delete(je),le.push(je),Ie=!0)}return zo(le),Ie}function ia(le){let Ie=[];for(let[je,et]of ft)if(et<le){let ht=X.fetchers.get(je);Or(ht,"Expected fetcher: "+je),ht.state==="loading"&&(gi(je),ft.delete(je),Ie.push(je))}return zo(Ie),Ie.length>0}function ls(le,Ie){let je=X.blockers.get(le)||Ed;return Mr.get(le)!==Ie&&Mr.set(le,Ie),je}function zs(le){X.blockers.delete(le),Mr.delete(le)}function ye(le,Ie){let je=X.blockers.get(le)||Ed;Or(je.state==="unblocked"&&Ie.state==="blocked"||je.state==="blocked"&&Ie.state==="blocked"||je.state==="blocked"&&Ie.state==="proceeding"||je.state==="blocked"&&Ie.state==="unblocked"||je.state==="proceeding"&&Ie.state==="unblocked","Invalid blocker state transition: "+je.state+" -> "+Ie.state);let et=new Map(X.blockers);et.set(le,Ie),dt({blockers:et})}function Q(le){let{currentLocation:Ie,nextLocation:je,historyAction:et}=le;if(Mr.size===0)return;Mr.size>1&&Qh(!1,"A router only supports one blocker at a time");let ht=Array.from(Mr.entries()),[Et,Nt]=ht[ht.length-1],kt=X.blockers.get(Et);if(!(kt&&kt.state==="proceeding")&&Nt({currentLocation:Ie,nextLocation:je,historyAction:et}))return Et}function ee(le){let Ie=Po(404,{pathname:le}),je=o||p,{matches:et,route:ht}=cS(je);return me(),{notFoundMatches:et,route:ht,error:Ie}}function me(le){let Ie=[];return br.forEach((je,et)=>{(!le||le(et))&&(je.cancel(),Ie.push(et),br.delete(et))}),Ie}function Se(le,Ie,je){if(F=le,G=Ie,j=je||null,!$&&X.navigation===G8){$=!0;let et=Ue(X.location,X.matches);et!=null&&dt({restoreScrollPosition:et})}return()=>{F=null,G=null,j=null}}function ke(le,Ie){return j&&j(le,Ie.map(et=>x$(et,X.loaderData)))||le.key}function Ve(le,Ie){if(F&&G){let je=ke(le,Ie);F[je]=G()}}function Ue(le,Ie){if(F){let je=ke(le,Ie),et=F[je];if(typeof et=="number")return et}return null}function Oe(le,Ie,je){if(P)if(le){if(Object.keys(le[0].params).length>0)return{active:!0,matches:W5(Ie,je,_,!0)}}else return{active:!0,matches:W5(Ie,je,_,!0)||[]};return{active:!1,matches:null}}async function Xe(le,Ie,je,et){if(!P)return{type:"success",matches:le};let ht=le;for(;;){let Et=o==null,Nt=o||p,kt=h;try{await P({signal:je,path:Ie,matches:ht,fetcherKey:et,patch:(Vt,Jt)=>{je.aborted||iS(Vt,Jt,Nt,kt,u)}})}catch(Vt){return{type:"error",error:Vt,partialMatches:ht}}finally{Et&&!je.aborted&&(p=[...p])}if(je.aborted)return{type:"aborted"};let Ft=Mc(Nt,Ie,_);if(Ft)return{type:"success",matches:Ft};let Ot=W5(Nt,Ie,_,!0);if(!Ot||ht.length===Ot.length&&ht.every((Vt,Jt)=>Vt.route.id===Ot[Jt].route.id))return{type:"success",matches:null};ht=Ot}}function bt(le){h={},o=v4(le,u,void 0,h)}function St(le,Ie){let je=o==null;iS(le,Ie,o||p,h,u),je&&(p=[...p],dt({}))}return Y={get basename(){return _},get future(){return S},get state(){return X},get routes(){return p},get window(){return t},initialize:zt,subscribe:Lt,enableScrollRestoration:Se,navigate:_r,fetch:pi,revalidate:hr,createHref:le=>e.history.createHref(le),encodeLocation:le=>e.history.encodeLocation(le),getFetcher:ra,deleteFetcher:Ls,dispose:rr,getBlocker:ls,deleteBlocker:zs,patchRoutes:St,_internalFetchControllers:ge,_internalActiveDeferreds:br,_internalSetRoutes:bt},Y}function q$(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function xg(e,t,r,n,u,h,p,o){let _,b;if(p){_=[];for(let S of t)if(_.push(S),S.route.id===p){b=S;break}}else _=t,b=t[t.length-1];let P=X_(u||".",Z_(_,h),Cf(e.pathname,r)||e.pathname,o==="path");if(u==null&&(P.search=e.search,P.hash=e.hash),(u==null||u===""||u===".")&&b){let S=J_(P.search);if(b.route.index&&!S)P.search=P.search?P.search.replace(/^\?/,"?index&"):"?index";else if(!b.route.index&&S){let C=new URLSearchParams(P.search),L=C.getAll("index");C.delete("index"),L.filter(j=>j).forEach(j=>C.append("index",j));let F=C.toString();P.search=F?"?"+F:""}}return n&&r!=="/"&&(P.pathname=P.pathname==="/"?r:ul([r,P.pathname])),Zc(P)}function eS(e,t,r,n){if(!n||!q$(n))return{path:r};if(n.formMethod&&!iN(n.formMethod))return{path:r,error:Po(405,{method:n.formMethod})};let u=()=>({path:r,error:Po(400,{type:"invalid-body"})}),h=n.formMethod||"get",p=e?h.toUpperCase():h.toLowerCase(),o=fO(r);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!Ya(p))return u();let C=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((L,F)=>{let[j,G]=F;return""+L+j+"="+G+`
`},""):String(n.body);return{path:r,submission:{formMethod:p,formAction:o,formEncType:n.formEncType,formData:void 0,json:void 0,text:C}}}else if(n.formEncType==="application/json"){if(!Ya(p))return u();try{let C=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:r,submission:{formMethod:p,formAction:o,formEncType:n.formEncType,formData:void 0,json:C,text:void 0}}}catch{return u()}}}Or(typeof FormData=="function","FormData is not available in this environment");let _,b;if(n.formData)_=wg(n.formData),b=n.formData;else if(n.body instanceof FormData)_=wg(n.body),b=n.body;else if(n.body instanceof URLSearchParams)_=n.body,b=aS(_);else if(n.body==null)_=new URLSearchParams,b=new FormData;else try{_=new URLSearchParams(n.body),b=aS(_)}catch{return u()}let P={formMethod:p,formAction:o,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:b,json:void 0,text:void 0};if(Ya(P.formMethod))return{path:r,submission:P};let S=bl(r);return t&&S.search&&J_(S.search)&&_.append("index",""),S.search="?"+_,{path:Zc(S),submission:P}}function tS(e,t,r){r===void 0&&(r=!1);let n=e.findIndex(u=>u.route.id===t);return n>=0?e.slice(0,r?n+1:n):e}function rS(e,t,r,n,u,h,p,o,_,b,P,S,C,L,F,j){let G=j?Ho(j[1])?j[1].error:j[1].data:void 0,$=e.createURL(t.location),N=e.createURL(u),U=r;h&&t.errors?U=tS(r,Object.keys(t.errors)[0],!0):j&&Ho(j[1])&&(U=tS(r,j[0]));let J=j?j[1].statusCode:void 0,q=p&&J&&J>=400,Y=U.filter((ue,oe)=>{let{route:Re}=ue;if(Re.lazy)return!0;if(Re.loader==null)return!1;if(h)return bg(Re,t.loaderData,t.errors);if(H$(t.loaderData,t.matches[oe],ue)||_.some(Je=>Je===ue.route.id))return!0;let ze=t.matches[oe],De=ue;return nS(ue,Mn({currentUrl:$,currentParams:ze.params,nextUrl:N,nextParams:De.params},n,{actionResult:G,actionStatus:J,defaultShouldRevalidate:q?!1:o||$.pathname+$.search===N.pathname+N.search||$.search!==N.search||cO(ze,De)}))}),X=[];return S.forEach((ue,oe)=>{if(h||!r.some(we=>we.route.id===ue.routeId)||P.has(oe))return;let Re=Mc(L,ue.path,F);if(!Re){X.push({key:oe,routeId:ue.routeId,path:ue.path,matches:null,match:null,controller:null});return}let ze=t.fetchers.get(oe),De=Wd(Re,ue.path),Je=!1;C.has(oe)?Je=!1:b.has(oe)?(b.delete(oe),Je=!0):ze&&ze.state!=="idle"&&ze.data===void 0?Je=o:Je=nS(De,Mn({currentUrl:$,currentParams:t.matches[t.matches.length-1].params,nextUrl:N,nextParams:r[r.length-1].params},n,{actionResult:G,actionStatus:J,defaultShouldRevalidate:q?!1:o})),Je&&X.push({key:oe,routeId:ue.routeId,path:ue.path,matches:Re,match:De,controller:new AbortController})}),[Y,X]}function bg(e,t,r){if(e.lazy)return!0;if(!e.loader)return!1;let n=t!=null&&t[e.id]!==void 0,u=r!=null&&r[e.id]!==void 0;return!n&&u?!1:typeof e.loader=="function"&&e.loader.hydrate===!0?!0:!n&&!u}function H$(e,t,r){let n=!t||r.route.id!==t.route.id,u=e[r.route.id]===void 0;return n||u}function cO(e,t){let r=e.route.path;return e.pathname!==t.pathname||r!=null&&r.endsWith("*")&&e.params["*"]!==t.params["*"]}function nS(e,t){if(e.route.shouldRevalidate){let r=e.route.shouldRevalidate(t);if(typeof r=="boolean")return r}return t.defaultShouldRevalidate}function iS(e,t,r,n,u){var h;let p;if(e){let b=n[e];Or(b,"No route found to patch children into: routeId = "+e),b.children||(b.children=[]),p=b.children}else p=r;let o=t.filter(b=>!p.some(P=>hO(b,P))),_=v4(o,u,[e||"_","patch",String(((h=p)==null?void 0:h.length)||"0")],n);p.push(..._)}function hO(e,t){return"id"in e&&"id"in t&&e.id===t.id?!0:e.index===t.index&&e.path===t.path&&e.caseSensitive===t.caseSensitive?(!e.children||e.children.length===0)&&(!t.children||t.children.length===0)?!0:e.children.every((r,n)=>{var u;return(u=t.children)==null?void 0:u.some(h=>hO(r,h))}):!1}async function Z$(e,t,r){if(!e.lazy)return;let n=await e.lazy();if(!e.lazy)return;let u=r[e.id];Or(u,"No route found in manifest");let h={};for(let p in n){let _=u[p]!==void 0&&p!=="hasErrorBoundary";Qh(!_,'Route "'+u.id+'" has a static property "'+p+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+p+'" will be ignored.')),!_&&!_$.has(p)&&(h[p]=n[p])}Object.assign(u,h),Object.assign(u,Mn({},t(u),{lazy:void 0}))}async function X$(e){let{matches:t}=e,r=t.filter(u=>u.shouldLoad);return(await Promise.all(r.map(u=>u.resolve()))).reduce((u,h,p)=>Object.assign(u,{[r[p].route.id]:h}),{})}async function K$(e,t,r,n,u,h,p,o,_,b){let P=h.map(L=>L.route.lazy?Z$(L.route,_,o):void 0),S=h.map((L,F)=>{let j=P[F],G=u.some(N=>N.route.id===L.route.id);return Mn({},L,{shouldLoad:G,resolve:async N=>(N&&n.method==="GET"&&(L.route.lazy||L.route.loader)&&(G=!0),G?Y$(t,n,L,j,N,b):Promise.resolve({type:an.data,result:void 0}))})}),C=await e({matches:S,request:n,params:h[0].params,fetcherKey:p,context:b});try{await Promise.all(P)}catch{}return C}async function Y$(e,t,r,n,u,h){let p,o,_=b=>{let P,S=new Promise((F,j)=>P=j);o=()=>P(),t.signal.addEventListener("abort",o);let C=F=>typeof b!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+e+'" [routeId: '+r.route.id+"]"))):b({request:t,params:r.params,context:h},...F!==void 0?[F]:[]),L=(async()=>{try{return{type:"data",result:await(u?u(j=>C(j)):C())}}catch(F){return{type:"error",result:F}}})();return Promise.race([L,S])};try{let b=r.route[e];if(n)if(b){let P,[S]=await Promise.all([_(b).catch(C=>{P=C}),n]);if(P!==void 0)throw P;p=S}else if(await n,b=r.route[e],b)p=await _(b);else if(e==="action"){let P=new URL(t.url),S=P.pathname+P.search;throw Po(405,{method:t.method,pathname:S,routeId:r.route.id})}else return{type:an.data,result:void 0};else if(b)p=await _(b);else{let P=new URL(t.url),S=P.pathname+P.search;throw Po(404,{pathname:S})}Or(p.result!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+r.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(b){return{type:an.error,result:b}}finally{o&&t.signal.removeEventListener("abort",o)}return p}async function J$(e){let{result:t,type:r}=e;if(dO(t)){let S;try{let C=t.headers.get("Content-Type");C&&/\bapplication\/json\b/.test(C)?t.body==null?S=null:S=await t.json():S=await t.text()}catch(C){return{type:an.error,error:C}}return r===an.error?{type:an.error,error:new x4(t.status,t.statusText,S),statusCode:t.status,headers:t.headers}:{type:an.data,data:S,statusCode:t.status,headers:t.headers}}if(r===an.error){if(hS(t)){var n,u;if(t.data instanceof Error){var h,p;return{type:an.error,error:t.data,statusCode:(h=t.init)==null?void 0:h.status,headers:(p=t.init)!=null&&p.headers?new Headers(t.init.headers):void 0}}return{type:an.error,error:new x4(((n=t.init)==null?void 0:n.status)||500,void 0,t.data),statusCode:Pp(t)?t.status:void 0,headers:(u=t.init)!=null&&u.headers?new Headers(t.init.headers):void 0}}return{type:an.error,error:t,statusCode:Pp(t)?t.status:void 0}}if(nN(t)){var o,_;return{type:an.deferred,deferredData:t,statusCode:(o=t.init)==null?void 0:o.status,headers:((_=t.init)==null?void 0:_.headers)&&new Headers(t.init.headers)}}if(hS(t)){var b,P;return{type:an.data,data:t.data,statusCode:(b=t.init)==null?void 0:b.status,headers:(P=t.init)!=null&&P.headers?new Headers(t.init.headers):void 0}}return{type:an.data,data:t}}function Q$(e,t,r,n,u,h){let p=e.headers.get("Location");if(Or(p,"Redirects returned/thrown from loaders/actions must have a Location header"),!K_.test(p)){let o=n.slice(0,n.findIndex(_=>_.route.id===r)+1);p=xg(new URL(t.url),o,u,!0,p,h),e.headers.set("Location",p)}return e}function oS(e,t,r){if(K_.test(e)){let n=e,u=n.startsWith("//")?new URL(t.protocol+n):new URL(n),h=Cf(u.pathname,r)!=null;if(u.origin===t.origin&&h)return u.pathname+u.search+u.hash}return e}function ah(e,t,r,n){let u=e.createURL(fO(t)).toString(),h={signal:r};if(n&&Ya(n.formMethod)){let{formMethod:p,formEncType:o}=n;h.method=p.toUpperCase(),o==="application/json"?(h.headers=new Headers({"Content-Type":o}),h.body=JSON.stringify(n.json)):o==="text/plain"?h.body=n.text:o==="application/x-www-form-urlencoded"&&n.formData?h.body=wg(n.formData):h.body=n.formData}return new Request(u,h)}function wg(e){let t=new URLSearchParams;for(let[r,n]of e.entries())t.append(r,typeof n=="string"?n:n.name);return t}function aS(e){let t=new FormData;for(let[r,n]of e.entries())t.append(r,n);return t}function eN(e,t,r,n,u){let h={},p=null,o,_=!1,b={},P=r&&Ho(r[1])?r[1].error:void 0;return e.forEach(S=>{if(!(S.route.id in t))return;let C=S.route.id,L=t[C];if(Or(!Dc(L),"Cannot handle redirect results in processLoaderData"),Ho(L)){let F=L.error;if(P!==void 0&&(F=P,P=void 0),p=p||{},u)p[C]=F;else{let j=Cc(e,C);p[j.route.id]==null&&(p[j.route.id]=F)}h[C]=void 0,_||(_=!0,o=Pp(L.error)?L.error.status:500),L.headers&&(b[C]=L.headers)}else fu(L)?(n.set(C,L.deferredData),h[C]=L.deferredData.data,L.statusCode!=null&&L.statusCode!==200&&!_&&(o=L.statusCode),L.headers&&(b[C]=L.headers)):(h[C]=L.data,L.statusCode&&L.statusCode!==200&&!_&&(o=L.statusCode),L.headers&&(b[C]=L.headers))}),P!==void 0&&r&&(p={[r[0]]:P},h[r[0]]=void 0),{loaderData:h,errors:p,statusCode:o||200,loaderHeaders:b}}function sS(e,t,r,n,u,h,p){let{loaderData:o,errors:_}=eN(t,r,n,p,!1);return u.forEach(b=>{let{key:P,match:S,controller:C}=b,L=h[P];if(Or(L,"Did not find corresponding fetcher result"),!(C&&C.signal.aborted))if(Ho(L)){let F=Cc(e.matches,S==null?void 0:S.route.id);_&&_[F.route.id]||(_=Mn({},_,{[F.route.id]:L.error})),e.fetchers.delete(P)}else if(Dc(L))Or(!1,"Unhandled fetcher revalidation redirect");else if(fu(L))Or(!1,"Unhandled fetcher deferred data");else{let F=nu(L.data);e.fetchers.set(P,F)}}),{loaderData:o,errors:_}}function lS(e,t,r,n){let u=Mn({},t);for(let h of r){let p=h.route.id;if(t.hasOwnProperty(p)?t[p]!==void 0&&(u[p]=t[p]):e[p]!==void 0&&h.route.loader&&(u[p]=e[p]),n&&n.hasOwnProperty(p))break}return u}function uS(e){return e?Ho(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function Cc(e,t){return(t?e.slice(0,e.findIndex(n=>n.route.id===t)+1):[...e]).reverse().find(n=>n.route.hasErrorBoundary===!0)||e[0]}function cS(e){let t=e.length===1?e[0]:e.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function Po(e,t){let{pathname:r,routeId:n,method:u,type:h,message:p}=t===void 0?{}:t,o="Unknown Server Error",_="Unknown @remix-run/router error";return e===400?(o="Bad Request",u&&r&&n?_="You made a "+u+' request to "'+r+'" but '+('did not provide a `loader` for route "'+n+'", ')+"so there is no way to handle the request.":h==="defer-action"?_="defer() is not supported in actions":h==="invalid-body"&&(_="Unable to encode submission body")):e===403?(o="Forbidden",_='Route "'+n+'" does not match URL "'+r+'"'):e===404?(o="Not Found",_='No route matches URL "'+r+'"'):e===405&&(o="Method Not Allowed",u&&r&&n?_="You made a "+u.toUpperCase()+' request to "'+r+'" but '+('did not provide an `action` for route "'+n+'", ')+"so there is no way to handle the request.":u&&(_='Invalid request method "'+u.toUpperCase()+'"')),new x4(e||500,o,new Error(_),!0)}function p5(e){let t=Object.entries(e);for(let r=t.length-1;r>=0;r--){let[n,u]=t[r];if(Dc(u))return{key:n,result:u}}}function fO(e){let t=typeof e=="string"?bl(e):e;return Zc(Mn({},t,{hash:""}))}function tN(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function rN(e){return dO(e.result)&&N$.has(e.result.status)}function fu(e){return e.type===an.deferred}function Ho(e){return e.type===an.error}function Dc(e){return(e&&e.type)===an.redirect}function hS(e){return typeof e=="object"&&e!=null&&"type"in e&&"data"in e&&"init"in e&&e.type==="DataWithResponseInit"}function nN(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function dO(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function iN(e){return $$.has(e.toLowerCase())}function Ya(e){return F$.has(e.toLowerCase())}async function oN(e,t,r,n,u){let h=Object.entries(t);for(let p=0;p<h.length;p++){let[o,_]=h[p],b=e.find(C=>(C==null?void 0:C.route.id)===o);if(!b)continue;let P=n.find(C=>C.route.id===b.route.id),S=P!=null&&!cO(P,b)&&(u&&u[b.route.id])!==void 0;fu(_)&&S&&await Y_(_,r,!1).then(C=>{C&&(t[o]=C)})}}async function aN(e,t,r){for(let n=0;n<r.length;n++){let{key:u,routeId:h,controller:p}=r[n],o=t[u];e.find(b=>(b==null?void 0:b.route.id)===h)&&fu(o)&&(Or(p,"Expected an AbortController for revalidating fetcher deferred result"),await Y_(o,p.signal,!0).then(b=>{b&&(t[u]=b)}))}}async function Y_(e,t,r){if(r===void 0&&(r=!1),!await e.deferredData.resolveData(t)){if(r)try{return{type:an.data,data:e.deferredData.unwrappedData}}catch(u){return{type:an.error,error:u}}return{type:an.data,data:e.deferredData.data}}}function J_(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function Wd(e,t){let r=typeof t=="string"?bl(t).search:t.search;if(e[e.length-1].route.index&&J_(r||""))return e[e.length-1];let n=sO(e);return n[n.length-1]}function fS(e){let{formMethod:t,formAction:r,formEncType:n,text:u,formData:h,json:p}=e;if(!(!t||!r||!n)){if(u!=null)return{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:void 0,text:u};if(h!=null)return{formMethod:t,formAction:r,formEncType:n,formData:h,json:void 0,text:void 0};if(p!==void 0)return{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:p,text:void 0}}}function W8(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function sN(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function Pd(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function lN(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function nu(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function uN(e,t){try{let r=e.sessionStorage.getItem(uO);if(r){let n=JSON.parse(r);for(let[u,h]of Object.entries(n||{}))h&&Array.isArray(h)&&t.set(u,new Set(h||[]))}}catch{}}function cN(e,t){if(t.size>0){let r={};for(let[n,u]of t)r[n]=[...u];try{e.sessionStorage.setItem(uO,JSON.stringify(r))}catch(n){Qh(!1,"Failed to save applied view transitions in sessionStorage ("+n+").")}}}/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ap(){return Ap=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ap.apply(this,arguments)}const W6=Pe.createContext(null),pO=Pe.createContext(null),r1=Pe.createContext(null),q6=Pe.createContext(null),n1=Pe.createContext({outlet:null,matches:[],isDataRoute:!1}),mO=Pe.createContext(null);function hN(e,t){let{relative:r}=t===void 0?{}:t;v2()||Or(!1);let{basename:n,navigator:u}=Pe.useContext(r1),{hash:h,pathname:p,search:o}=yO(e,{relative:r}),_=p;return n!=="/"&&(_=p==="/"?n:ul([n,p])),u.createHref({pathname:_,search:o,hash:h})}function v2(){return Pe.useContext(q6)!=null}function H6(){return v2()||Or(!1),Pe.useContext(q6).location}function gO(e){Pe.useContext(r1).static||Pe.useLayoutEffect(e)}function fN(){let{isDataRoute:e}=Pe.useContext(n1);return e?SN():dN()}function dN(){v2()||Or(!1);let e=Pe.useContext(W6),{basename:t,future:r,navigator:n}=Pe.useContext(r1),{matches:u}=Pe.useContext(n1),{pathname:h}=H6(),p=JSON.stringify(Z_(u,r.v7_relativeSplatPath)),o=Pe.useRef(!1);return gO(()=>{o.current=!0}),Pe.useCallback(function(b,P){if(P===void 0&&(P={}),!o.current)return;if(typeof b=="number"){n.go(b);return}let S=X_(b,JSON.parse(p),h,P.relative==="path");e==null&&t!=="/"&&(S.pathname=S.pathname==="/"?t:ul([t,S.pathname])),(P.replace?n.replace:n.push)(S,P.state,P)},[t,n,p,h,e])}function yO(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=Pe.useContext(r1),{matches:u}=Pe.useContext(n1),{pathname:h}=H6(),p=JSON.stringify(Z_(u,n.v7_relativeSplatPath));return Pe.useMemo(()=>X_(e,JSON.parse(p),h,r==="path"),[e,p,h,r])}function pN(e,t,r,n){v2()||Or(!1);let{navigator:u,static:h}=Pe.useContext(r1),{matches:p}=Pe.useContext(n1),o=p[p.length-1],_=o?o.params:{};o&&o.pathname;let b=o?o.pathnameBase:"/";o&&o.route;let P=H6(),S;if(t){var C;let $=typeof t=="string"?bl(t):t;b==="/"||(C=$.pathname)!=null&&C.startsWith(b)||Or(!1),S=$}else S=P;let L=S.pathname||"/",F=L;if(b!=="/"){let $=b.replace(/^\//,"").split("/");F="/"+L.replace(/^\//,"").split("/").slice($.length).join("/")}let j=!h&&r&&r.matches&&r.matches.length>0?r.matches:Mc(e,{pathname:F}),G=vN(j&&j.map($=>Object.assign({},$,{params:Object.assign({},_,$.params),pathname:ul([b,u.encodeLocation?u.encodeLocation($.pathname).pathname:$.pathname]),pathnameBase:$.pathnameBase==="/"?b:ul([b,u.encodeLocation?u.encodeLocation($.pathnameBase).pathname:$.pathnameBase])})),p,r,n);return t&&G?Pe.createElement(q6.Provider,{value:{location:Ap({pathname:"/",search:"",hash:"",state:null,key:"default"},S),navigationType:Xn.Pop}},G):G}function mN(){let e=TN(),t=Pp(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,u={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},h=null;return Pe.createElement(Pe.Fragment,null,Pe.createElement("h2",null,"Unexpected Application Error!"),Pe.createElement("h3",{style:{fontStyle:"italic"}},t),r?Pe.createElement("pre",{style:u},r):null,h)}const gN=Pe.createElement(mN,null);class yN extends Pe.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?Pe.createElement(n1.Provider,{value:this.props.routeContext},Pe.createElement(mO.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function _N(e){let{routeContext:t,match:r,children:n}=e,u=Pe.useContext(W6);return u&&u.static&&u.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(u.staticContext._deepestRenderedBoundaryId=r.route.id),Pe.createElement(n1.Provider,{value:t},n)}function vN(e,t,r,n){var u;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var h;if(!r)return null;if(r.errors)e=r.matches;else if((h=n)!=null&&h.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let p=e,o=(u=r)==null?void 0:u.errors;if(o!=null){let P=p.findIndex(S=>S.route.id&&(o==null?void 0:o[S.route.id])!==void 0);P>=0||Or(!1),p=p.slice(0,Math.min(p.length,P+1))}let _=!1,b=-1;if(r&&n&&n.v7_partialHydration)for(let P=0;P<p.length;P++){let S=p[P];if((S.route.HydrateFallback||S.route.hydrateFallbackElement)&&(b=P),S.route.id){let{loaderData:C,errors:L}=r,F=S.route.loader&&C[S.route.id]===void 0&&(!L||L[S.route.id]===void 0);if(S.route.lazy||F){_=!0,b>=0?p=p.slice(0,b+1):p=[p[0]];break}}}return p.reduceRight((P,S,C)=>{let L,F=!1,j=null,G=null;r&&(L=o&&S.route.id?o[S.route.id]:void 0,j=S.route.errorElement||gN,_&&(b<0&&C===0?(EN("route-fallback",!1),F=!0,G=null):b===C&&(F=!0,G=S.route.hydrateFallbackElement||null)));let $=t.concat(p.slice(0,C+1)),N=()=>{let U;return L?U=j:F?U=G:S.route.Component?U=Pe.createElement(S.route.Component,null):S.route.element?U=S.route.element:U=P,Pe.createElement(_N,{match:S,routeContext:{outlet:P,matches:$,isDataRoute:r!=null},children:U})};return r&&(S.route.ErrorBoundary||S.route.errorElement||C===0)?Pe.createElement(yN,{location:r.location,revalidation:r.revalidation,component:j,error:L,children:N(),routeContext:{outlet:null,matches:$,isDataRoute:!0}}):N()},null)}var _O=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(_O||{}),b4=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(b4||{});function xN(e){let t=Pe.useContext(W6);return t||Or(!1),t}function bN(e){let t=Pe.useContext(pO);return t||Or(!1),t}function wN(e){let t=Pe.useContext(n1);return t||Or(!1),t}function vO(e){let t=wN(),r=t.matches[t.matches.length-1];return r.route.id||Or(!1),r.route.id}function TN(){var e;let t=Pe.useContext(mO),r=bN(b4.UseRouteError),n=vO(b4.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function SN(){let{router:e}=xN(_O.UseNavigateStable),t=vO(b4.UseNavigateStable),r=Pe.useRef(!1);return gO(()=>{r.current=!0}),Pe.useCallback(function(u,h){h===void 0&&(h={}),r.current&&(typeof u=="number"?e.navigate(u):e.navigate(u,Ap({fromRouteId:t},h)))},[e,t])}const dS={};function EN(e,t,r){!t&&!dS[e]&&(dS[e]=!0)}function PN(e,t){e==null||e.v7_startTransition,(e==null?void 0:e.v7_relativeSplatPath)===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function AN(e){let{basename:t="/",children:r=null,location:n,navigationType:u=Xn.Pop,navigator:h,static:p=!1,future:o}=e;v2()&&Or(!1);let _=t.replace(/^\/*/,"/"),b=Pe.useMemo(()=>({basename:_,navigator:h,static:p,future:Ap({v7_relativeSplatPath:!1},o)}),[_,o,h,p]);typeof n=="string"&&(n=bl(n));let{pathname:P="/",search:S="",hash:C="",state:L=null,key:F="default"}=n,j=Pe.useMemo(()=>{let G=Cf(P,_);return G==null?null:{location:{pathname:G,search:S,hash:C,state:L,key:F},navigationType:u}},[_,P,S,C,L,F,u]);return j==null?null:Pe.createElement(r1.Provider,{value:b},Pe.createElement(q6.Provider,{children:r,value:j}))}new Promise(()=>{});function MN(e){let t={hasErrorBoundary:e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&Object.assign(t,{element:Pe.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:Pe.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:Pe.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Mp(){return Mp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mp.apply(this,arguments)}function CN(e,t){if(e==null)return{};var r={},n=Object.keys(e),u,h;for(h=0;h<n.length;h++)u=n[h],!(t.indexOf(u)>=0)&&(r[u]=e[u]);return r}function IN(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function ON(e,t){return e.button===0&&(!t||t==="_self")&&!IN(e)}const kN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],DN="6";try{window.__reactRouterVersion=DN}catch{}function h2e(e,t){return W$({basename:t==null?void 0:t.basename,future:Mp({},t==null?void 0:t.future,{v7_prependBasename:!0}),history:m$({window:t==null?void 0:t.window}),hydrationData:(t==null?void 0:t.hydrationData)||LN(),routes:e,mapRouteProperties:MN,dataStrategy:t==null?void 0:t.dataStrategy,patchRoutesOnNavigation:t==null?void 0:t.patchRoutesOnNavigation,window:t==null?void 0:t.window}).initialize()}function LN(){var e;let t=(e=window)==null?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=Mp({},t,{errors:zN(t.errors)})),t}function zN(e){if(!e)return null;let t=Object.entries(e),r={};for(let[n,u]of t)if(u&&u.__type==="RouteErrorResponse")r[n]=new x4(u.status,u.statusText,u.data,u.internal===!0);else if(u&&u.__type==="Error"){if(u.__subType){let h=window[u.__subType];if(typeof h=="function")try{let p=new h(u.message);p.stack="",r[n]=p}catch{}}if(r[n]==null){let h=new Error(u.message);h.stack="",r[n]=h}}else r[n]=u;return r}const RN=Pe.createContext({isTransitioning:!1}),BN=Pe.createContext(new Map),FN="startTransition",pS=rF[FN],jN="flushSync",mS=p$[jN];function $N(e){pS?pS(e):e()}function Ad(e){mS?mS(e):e()}class NN{constructor(){this.status="pending",this.promise=new Promise((t,r)=>{this.resolve=n=>{this.status==="pending"&&(this.status="resolved",t(n))},this.reject=n=>{this.status==="pending"&&(this.status="rejected",r(n))}})}}function f2e(e){let{fallbackElement:t,router:r,future:n}=e,[u,h]=Pe.useState(r.state),[p,o]=Pe.useState(),[_,b]=Pe.useState({isTransitioning:!1}),[P,S]=Pe.useState(),[C,L]=Pe.useState(),[F,j]=Pe.useState(),G=Pe.useRef(new Map),{v7_startTransition:$}=n||{},N=Pe.useCallback(ue=>{$?$N(ue):ue()},[$]),U=Pe.useCallback((ue,oe)=>{let{deletedFetchers:Re,flushSync:ze,viewTransitionOpts:De}=oe;ue.fetchers.forEach((we,ve)=>{we.data!==void 0&&G.current.set(ve,we.data)}),Re.forEach(we=>G.current.delete(we));let Je=r.window==null||r.window.document==null||typeof r.window.document.startViewTransition!="function";if(!De||Je){ze?Ad(()=>h(ue)):N(()=>h(ue));return}if(ze){Ad(()=>{C&&(P&&P.resolve(),C.skipTransition()),b({isTransitioning:!0,flushSync:!0,currentLocation:De.currentLocation,nextLocation:De.nextLocation})});let we=r.window.document.startViewTransition(()=>{Ad(()=>h(ue))});we.finished.finally(()=>{Ad(()=>{S(void 0),L(void 0),o(void 0),b({isTransitioning:!1})})}),Ad(()=>L(we));return}C?(P&&P.resolve(),C.skipTransition(),j({state:ue,currentLocation:De.currentLocation,nextLocation:De.nextLocation})):(o(ue),b({isTransitioning:!0,flushSync:!1,currentLocation:De.currentLocation,nextLocation:De.nextLocation}))},[r.window,C,P,G,N]);Pe.useLayoutEffect(()=>r.subscribe(U),[r,U]),Pe.useEffect(()=>{_.isTransitioning&&!_.flushSync&&S(new NN)},[_]),Pe.useEffect(()=>{if(P&&p&&r.window){let ue=p,oe=P.promise,Re=r.window.document.startViewTransition(async()=>{N(()=>h(ue)),await oe});Re.finished.finally(()=>{S(void 0),L(void 0),o(void 0),b({isTransitioning:!1})}),L(Re)}},[N,p,P,r.window]),Pe.useEffect(()=>{P&&p&&u.location.key===p.location.key&&P.resolve()},[P,C,u.location,p]),Pe.useEffect(()=>{!_.isTransitioning&&F&&(o(F.state),b({isTransitioning:!0,flushSync:!1,currentLocation:F.currentLocation,nextLocation:F.nextLocation}),j(void 0))},[_.isTransitioning,F]),Pe.useEffect(()=>{},[]);let J=Pe.useMemo(()=>({createHref:r.createHref,encodeLocation:r.encodeLocation,go:ue=>r.navigate(ue),push:(ue,oe,Re)=>r.navigate(ue,{state:oe,preventScrollReset:Re==null?void 0:Re.preventScrollReset}),replace:(ue,oe,Re)=>r.navigate(ue,{replace:!0,state:oe,preventScrollReset:Re==null?void 0:Re.preventScrollReset})}),[r]),q=r.basename||"/",Y=Pe.useMemo(()=>({router:r,navigator:J,static:!1,basename:q}),[r,J,q]),X=Pe.useMemo(()=>({v7_relativeSplatPath:r.future.v7_relativeSplatPath}),[r.future.v7_relativeSplatPath]);return Pe.useEffect(()=>PN(n,r.future),[n,r.future]),Pe.createElement(Pe.Fragment,null,Pe.createElement(W6.Provider,{value:Y},Pe.createElement(pO.Provider,{value:u},Pe.createElement(BN.Provider,{value:G.current},Pe.createElement(RN.Provider,{value:_},Pe.createElement(AN,{basename:q,location:u.location,navigationType:u.historyAction,navigator:J,future:X},u.initialized||r.future.v7_partialHydration?Pe.createElement(UN,{routes:r.routes,future:r.future,state:u}):t))))),null)}const UN=Pe.memo(VN);function VN(e){let{routes:t,future:r,state:n}=e;return pN(t,void 0,n,r)}const GN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",WN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,d2e=Pe.forwardRef(function(t,r){let{onClick:n,relative:u,reloadDocument:h,replace:p,state:o,target:_,to:b,preventScrollReset:P,viewTransition:S}=t,C=CN(t,kN),{basename:L}=Pe.useContext(r1),F,j=!1;if(typeof b=="string"&&WN.test(b)&&(F=b,GN))try{let U=new URL(window.location.href),J=b.startsWith("//")?new URL(U.protocol+b):new URL(b),q=Cf(J.pathname,L);J.origin===U.origin&&q!=null?b=q+J.search+J.hash:j=!0}catch{}let G=hN(b,{relative:u}),$=qN(b,{replace:p,state:o,target:_,preventScrollReset:P,relative:u,viewTransition:S});function N(U){n&&n(U),U.defaultPrevented||$(U)}return Pe.createElement("a",Mp({},C,{href:F||G,onClick:j||h?n:N,ref:r,target:_}))});var gS;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(gS||(gS={}));var yS;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(yS||(yS={}));function qN(e,t){let{target:r,replace:n,state:u,preventScrollReset:h,relative:p,viewTransition:o}=t===void 0?{}:t,_=fN(),b=H6(),P=yO(e,{relative:p});return Pe.useCallback(S=>{if(ON(S,r)){S.preventDefault();let C=n!==void 0?n:Zc(b)===Zc(P);_(e,{replace:C,state:u,preventScrollReset:h,relative:p,viewTransition:o})}},[b,_,P,n,u,r,e,h,p,o])}var xO={exports:{}},HN="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ZN=HN,XN=ZN;function bO(){}function wO(){}wO.resetWarningCache=bO;var KN=function(){function e(n,u,h,p,o,_){if(_!==XN){var b=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw b.name="Invariant Violation",b}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:wO,resetWarningCache:bO};return r.PropTypes=r,r};xO.exports=KN();var YN=xO.exports;const Kt=Br(YN);var JN=typeof Element<"u",QN=typeof Map=="function",eU=typeof Set=="function",tU=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function q5(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,n,u;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(!q5(e[n],t[n]))return!1;return!0}var h;if(QN&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(h=e.entries();!(n=h.next()).done;)if(!t.has(n.value[0]))return!1;for(h=e.entries();!(n=h.next()).done;)if(!q5(n.value[1],t.get(n.value[0])))return!1;return!0}if(eU&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(h=e.entries();!(n=h.next()).done;)if(!t.has(n.value[0]))return!1;return!0}if(tU&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(e[n]!==t[n])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof t.valueOf=="function")return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof t.toString=="function")return e.toString()===t.toString();if(u=Object.keys(e),r=u.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(t,u[n]))return!1;if(JN&&e instanceof Element)return!1;for(n=r;n--!==0;)if(!((u[n]==="_owner"||u[n]==="__v"||u[n]==="__o")&&e.$$typeof)&&!q5(e[u[n]],t[u[n]]))return!1;return!0}return e!==e&&t!==t}var rU=function(t,r){try{return q5(t,r)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}};const nU=Br(rU);var iU=function(e,t,r,n,u,h,p,o){if(!e){var _;if(t===void 0)_=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var b=[r,n,u,h,p,o],P=0;_=new Error(t.replace(/%s/g,function(){return b[P++]})),_.name="Invariant Violation"}throw _.framesToPop=1,_}},oU=iU;const _S=Br(oU);var aU=function(t,r,n,u){var h=n?n.call(u,t,r):void 0;if(h!==void 0)return!!h;if(t===r)return!0;if(typeof t!="object"||!t||typeof r!="object"||!r)return!1;var p=Object.keys(t),o=Object.keys(r);if(p.length!==o.length)return!1;for(var _=Object.prototype.hasOwnProperty.bind(r),b=0;b<p.length;b++){var P=p[b];if(!_(P))return!1;var S=t[P],C=r[P];if(h=n?n.call(u,S,C,P):void 0,h===!1||h===void 0&&S!==C)return!1}return!0};const sU=Br(aU);function Zn(){return Zn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zn.apply(this,arguments)}function Q_(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Tg(e,t)}function Tg(e,t){return Tg=Object.setPrototypeOf||function(r,n){return r.__proto__=n,r},Tg(e,t)}function vS(e,t){if(e==null)return{};var r,n,u={},h=Object.keys(e);for(n=0;n<h.length;n++)t.indexOf(r=h[n])>=0||(u[r]=e[r]);return u}var cr={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title",FRAGMENT:"Symbol(react.fragment)"},lU={rel:["amphtml","canonical","alternate"]},uU={type:["application/ld+json"]},cU={charset:"",name:["robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]},xS=Object.keys(cr).map(function(e){return cr[e]}),w4={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},hU=Object.keys(w4).reduce(function(e,t){return e[w4[t]]=t,e},{}),jh=function(e,t){for(var r=e.length-1;r>=0;r-=1){var n=e[r];if(Object.prototype.hasOwnProperty.call(n,t))return n[t]}return null},fU=function(e){var t=jh(e,cr.TITLE),r=jh(e,"titleTemplate");if(Array.isArray(t)&&(t=t.join("")),r&&t)return r.replace(/%s/g,function(){return t});var n=jh(e,"defaultTitle");return t||n||void 0},dU=function(e){return jh(e,"onChangeClientState")||function(){}},q8=function(e,t){return t.filter(function(r){return r[e]!==void 0}).map(function(r){return r[e]}).reduce(function(r,n){return Zn({},r,n)},{})},pU=function(e,t){return t.filter(function(r){return r[cr.BASE]!==void 0}).map(function(r){return r[cr.BASE]}).reverse().reduce(function(r,n){if(!r.length)for(var u=Object.keys(n),h=0;h<u.length;h+=1){var p=u[h].toLowerCase();if(e.indexOf(p)!==-1&&n[p])return r.concat(n)}return r},[])},Md=function(e,t,r){var n={};return r.filter(function(u){return!!Array.isArray(u[e])||(u[e]!==void 0&&console&&typeof console.warn=="function"&&console.warn("Helmet: "+e+' should be of type "Array". Instead found type "'+typeof u[e]+'"'),!1)}).map(function(u){return u[e]}).reverse().reduce(function(u,h){var p={};h.filter(function(S){for(var C,L=Object.keys(S),F=0;F<L.length;F+=1){var j=L[F],G=j.toLowerCase();t.indexOf(G)===-1||C==="rel"&&S[C].toLowerCase()==="canonical"||G==="rel"&&S[G].toLowerCase()==="stylesheet"||(C=G),t.indexOf(j)===-1||j!=="innerHTML"&&j!=="cssText"&&j!=="itemprop"||(C=j)}if(!C||!S[C])return!1;var $=S[C].toLowerCase();return n[C]||(n[C]={}),p[C]||(p[C]={}),!n[C][$]&&(p[C][$]=!0,!0)}).reverse().forEach(function(S){return u.push(S)});for(var o=Object.keys(p),_=0;_<o.length;_+=1){var b=o[_],P=Zn({},n[b],p[b]);n[b]=P}return u},[]).reverse()},mU=function(e,t){if(Array.isArray(e)&&e.length){for(var r=0;r<e.length;r+=1)if(e[r][t])return!0}return!1},TO=function(e){return Array.isArray(e)?e.join(""):e},H8=function(e,t){return Array.isArray(e)?e.reduce(function(r,n){return function(u,h){for(var p=Object.keys(u),o=0;o<p.length;o+=1)if(h[p[o]]&&h[p[o]].includes(u[p[o]]))return!0;return!1}(n,t)?r.priority.push(n):r.default.push(n),r},{priority:[],default:[]}):{default:e}},bS=function(e,t){var r;return Zn({},e,((r={})[t]=void 0,r))},gU=[cr.NOSCRIPT,cr.SCRIPT,cr.STYLE],Z8=function(e,t){return t===void 0&&(t=!0),t===!1?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},wS=function(e){return Object.keys(e).reduce(function(t,r){var n=e[r]!==void 0?r+'="'+e[r]+'"':""+r;return t?t+" "+n:n},"")},TS=function(e,t){return t===void 0&&(t={}),Object.keys(e).reduce(function(r,n){return r[w4[n]||n]=e[n],r},t)},H5=function(e,t){return t.map(function(r,n){var u,h=((u={key:n})["data-rh"]=!0,u);return Object.keys(r).forEach(function(p){var o=w4[p]||p;o==="innerHTML"||o==="cssText"?h.dangerouslySetInnerHTML={__html:r.innerHTML||r.cssText}:h[o]=r[p]}),Ne.createElement(e,h)})},pa=function(e,t,r){switch(e){case cr.TITLE:return{toComponent:function(){return u=t.titleAttributes,(h={key:n=t.title})["data-rh"]=!0,p=TS(u,h),[Ne.createElement(cr.TITLE,p,n)];var n,u,h,p},toString:function(){return function(n,u,h,p){var o=wS(h),_=TO(u);return o?"<"+n+' data-rh="true" '+o+">"+Z8(_,p)+"</"+n+">":"<"+n+' data-rh="true">'+Z8(_,p)+"</"+n+">"}(e,t.title,t.titleAttributes,r)}};case"bodyAttributes":case"htmlAttributes":return{toComponent:function(){return TS(t)},toString:function(){return wS(t)}};default:return{toComponent:function(){return H5(e,t)},toString:function(){return function(n,u,h){return u.reduce(function(p,o){var _=Object.keys(o).filter(function(S){return!(S==="innerHTML"||S==="cssText")}).reduce(function(S,C){var L=o[C]===void 0?C:C+'="'+Z8(o[C],h)+'"';return S?S+" "+L:L},""),b=o.innerHTML||o.cssText||"",P=gU.indexOf(n)===-1;return p+"<"+n+' data-rh="true" '+_+(P?"/>":">"+b+"</"+n+">")},"")}(e,t,r)}}}},Sg=function(e){var t=e.baseTag,r=e.bodyAttributes,n=e.encode,u=e.htmlAttributes,h=e.noscriptTags,p=e.styleTags,o=e.title,_=o===void 0?"":o,b=e.titleAttributes,P=e.linkTags,S=e.metaTags,C=e.scriptTags,L={toComponent:function(){},toString:function(){return""}};if(e.prioritizeSeoTags){var F=function(j){var G=j.linkTags,$=j.scriptTags,N=j.encode,U=H8(j.metaTags,cU),J=H8(G,lU),q=H8($,uU);return{priorityMethods:{toComponent:function(){return[].concat(H5(cr.META,U.priority),H5(cr.LINK,J.priority),H5(cr.SCRIPT,q.priority))},toString:function(){return pa(cr.META,U.priority,N)+" "+pa(cr.LINK,J.priority,N)+" "+pa(cr.SCRIPT,q.priority,N)}},metaTags:U.default,linkTags:J.default,scriptTags:q.default}}(e);L=F.priorityMethods,P=F.linkTags,S=F.metaTags,C=F.scriptTags}return{priority:L,base:pa(cr.BASE,t,n),bodyAttributes:pa("bodyAttributes",r,n),htmlAttributes:pa("htmlAttributes",u,n),link:pa(cr.LINK,P,n),meta:pa(cr.META,S,n),noscript:pa(cr.NOSCRIPT,h,n),script:pa(cr.SCRIPT,C,n),style:pa(cr.STYLE,p,n),title:pa(cr.TITLE,{title:_,titleAttributes:b},n)}},m5=[],Eg=function(e,t){var r=this;t===void 0&&(t=typeof document<"u"),this.instances=[],this.value={setHelmet:function(n){r.context.helmet=n},helmetInstances:{get:function(){return r.canUseDOM?m5:r.instances},add:function(n){(r.canUseDOM?m5:r.instances).push(n)},remove:function(n){var u=(r.canUseDOM?m5:r.instances).indexOf(n);(r.canUseDOM?m5:r.instances).splice(u,1)}}},this.context=e,this.canUseDOM=t,t||(e.helmet=Sg({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))},SO=Ne.createContext({}),yU=Kt.shape({setHelmet:Kt.func,helmetInstances:Kt.shape({get:Kt.func,add:Kt.func,remove:Kt.func})}),_U=typeof document<"u",qd=function(e){function t(r){var n;return(n=e.call(this,r)||this).helmetData=new Eg(n.props.context,t.canUseDOM),n}return Q_(t,e),t.prototype.render=function(){return Ne.createElement(SO.Provider,{value:this.helmetData.value},this.props.children)},t}(Pe.Component);qd.canUseDOM=_U,qd.propTypes={context:Kt.shape({helmet:Kt.shape()}),children:Kt.node.isRequired},qd.defaultProps={context:{}},qd.displayName="HelmetProvider";var sh=function(e,t){var r,n=document.head||document.querySelector(cr.HEAD),u=n.querySelectorAll(e+"[data-rh]"),h=[].slice.call(u),p=[];return t&&t.length&&t.forEach(function(o){var _=document.createElement(e);for(var b in o)Object.prototype.hasOwnProperty.call(o,b)&&(b==="innerHTML"?_.innerHTML=o.innerHTML:b==="cssText"?_.styleSheet?_.styleSheet.cssText=o.cssText:_.appendChild(document.createTextNode(o.cssText)):_.setAttribute(b,o[b]===void 0?"":o[b]));_.setAttribute("data-rh","true"),h.some(function(P,S){return r=S,_.isEqualNode(P)})?h.splice(r,1):p.push(_)}),h.forEach(function(o){return o.parentNode.removeChild(o)}),p.forEach(function(o){return n.appendChild(o)}),{oldTags:h,newTags:p}},X8=function(e,t){var r=document.getElementsByTagName(e)[0];if(r){for(var n=r.getAttribute("data-rh"),u=n?n.split(","):[],h=[].concat(u),p=Object.keys(t),o=0;o<p.length;o+=1){var _=p[o],b=t[_]||"";r.getAttribute(_)!==b&&r.setAttribute(_,b),u.indexOf(_)===-1&&u.push(_);var P=h.indexOf(_);P!==-1&&h.splice(P,1)}for(var S=h.length-1;S>=0;S-=1)r.removeAttribute(h[S]);u.length===h.length?r.removeAttribute("data-rh"):r.getAttribute("data-rh")!==p.join(",")&&r.setAttribute("data-rh",p.join(","))}},SS=function(e,t){var r=e.baseTag,n=e.htmlAttributes,u=e.linkTags,h=e.metaTags,p=e.noscriptTags,o=e.onChangeClientState,_=e.scriptTags,b=e.styleTags,P=e.title,S=e.titleAttributes;X8(cr.BODY,e.bodyAttributes),X8(cr.HTML,n),function(j,G){j!==void 0&&document.title!==j&&(document.title=TO(j)),X8(cr.TITLE,G)}(P,S);var C={baseTag:sh(cr.BASE,r),linkTags:sh(cr.LINK,u),metaTags:sh(cr.META,h),noscriptTags:sh(cr.NOSCRIPT,p),scriptTags:sh(cr.SCRIPT,_),styleTags:sh(cr.STYLE,b)},L={},F={};Object.keys(C).forEach(function(j){var G=C[j],$=G.newTags,N=G.oldTags;$.length&&(L[j]=$),N.length&&(F[j]=C[j].oldTags)}),t&&t(),o(e,L,F)},Cd=null,T4=function(e){function t(){for(var n,u=arguments.length,h=new Array(u),p=0;p<u;p++)h[p]=arguments[p];return(n=e.call.apply(e,[this].concat(h))||this).rendered=!1,n}Q_(t,e);var r=t.prototype;return r.shouldComponentUpdate=function(n){return!sU(n,this.props)},r.componentDidUpdate=function(){this.emitChange()},r.componentWillUnmount=function(){this.props.context.helmetInstances.remove(this),this.emitChange()},r.emitChange=function(){var n,u,h=this.props.context,p=h.setHelmet,o=null,_=(n=h.helmetInstances.get().map(function(b){var P=Zn({},b.props);return delete P.context,P}),{baseTag:pU(["href"],n),bodyAttributes:q8("bodyAttributes",n),defer:jh(n,"defer"),encode:jh(n,"encodeSpecialCharacters"),htmlAttributes:q8("htmlAttributes",n),linkTags:Md(cr.LINK,["rel","href"],n),metaTags:Md(cr.META,["name","charset","http-equiv","property","itemprop"],n),noscriptTags:Md(cr.NOSCRIPT,["innerHTML"],n),onChangeClientState:dU(n),scriptTags:Md(cr.SCRIPT,["src","innerHTML"],n),styleTags:Md(cr.STYLE,["cssText"],n),title:fU(n),titleAttributes:q8("titleAttributes",n),prioritizeSeoTags:mU(n,"prioritizeSeoTags")});qd.canUseDOM?(u=_,Cd&&cancelAnimationFrame(Cd),u.defer?Cd=requestAnimationFrame(function(){SS(u,function(){Cd=null})}):(SS(u),Cd=null)):Sg&&(o=Sg(_)),p(o)},r.init=function(){this.rendered||(this.rendered=!0,this.props.context.helmetInstances.add(this),this.emitChange())},r.render=function(){return this.init(),null},t}(Pe.Component);T4.propTypes={context:yU.isRequired},T4.displayName="HelmetDispatcher";var vU=["children"],xU=["children"],K8=function(e){function t(){return e.apply(this,arguments)||this}Q_(t,e);var r=t.prototype;return r.shouldComponentUpdate=function(n){return!nU(bS(this.props,"helmetData"),bS(n,"helmetData"))},r.mapNestedChildrenToProps=function(n,u){if(!u)return null;switch(n.type){case cr.SCRIPT:case cr.NOSCRIPT:return{innerHTML:u};case cr.STYLE:return{cssText:u};default:throw new Error("<"+n.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")}},r.flattenArrayTypeChildren=function(n){var u,h=n.child,p=n.arrayTypeChildren;return Zn({},p,((u={})[h.type]=[].concat(p[h.type]||[],[Zn({},n.newChildProps,this.mapNestedChildrenToProps(h,n.nestedChildren))]),u))},r.mapObjectTypeChildren=function(n){var u,h,p=n.child,o=n.newProps,_=n.newChildProps,b=n.nestedChildren;switch(p.type){case cr.TITLE:return Zn({},o,((u={})[p.type]=b,u.titleAttributes=Zn({},_),u));case cr.BODY:return Zn({},o,{bodyAttributes:Zn({},_)});case cr.HTML:return Zn({},o,{htmlAttributes:Zn({},_)});default:return Zn({},o,((h={})[p.type]=Zn({},_),h))}},r.mapArrayTypeChildrenToProps=function(n,u){var h=Zn({},u);return Object.keys(n).forEach(function(p){var o;h=Zn({},h,((o={})[p]=n[p],o))}),h},r.warnOnInvalidChildren=function(n,u){return _S(xS.some(function(h){return n.type===h}),typeof n.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":"Only elements types "+xS.join(", ")+" are allowed. Helmet does not support rendering <"+n.type+"> elements. Refer to our API for more information."),_S(!u||typeof u=="string"||Array.isArray(u)&&!u.some(function(h){return typeof h!="string"}),"Helmet expects a string as a child of <"+n.type+">. Did you forget to wrap your children in braces? ( <"+n.type+">{``}</"+n.type+"> ) Refer to our API for more information."),!0},r.mapChildrenToProps=function(n,u){var h=this,p={};return Ne.Children.forEach(n,function(o){if(o&&o.props){var _=o.props,b=_.children,P=vS(_,vU),S=Object.keys(P).reduce(function(L,F){return L[hU[F]||F]=P[F],L},{}),C=o.type;switch(typeof C=="symbol"?C=C.toString():h.warnOnInvalidChildren(o,b),C){case cr.FRAGMENT:u=h.mapChildrenToProps(b,u);break;case cr.LINK:case cr.META:case cr.NOSCRIPT:case cr.SCRIPT:case cr.STYLE:p=h.flattenArrayTypeChildren({child:o,arrayTypeChildren:p,newChildProps:S,nestedChildren:b});break;default:u=h.mapObjectTypeChildren({child:o,newProps:u,newChildProps:S,nestedChildren:b})}}}),this.mapArrayTypeChildrenToProps(p,u)},r.render=function(){var n=this.props,u=n.children,h=vS(n,xU),p=Zn({},h),o=h.helmetData;return u&&(p=this.mapChildrenToProps(u,p)),!o||o instanceof Eg||(o=new Eg(o.context,o.instances)),o?Ne.createElement(T4,Zn({},p,{context:o.value,helmetData:void 0})):Ne.createElement(SO.Consumer,null,function(_){return Ne.createElement(T4,Zn({},p,{context:_}))})},t}(Pe.Component);K8.propTypes={base:Kt.object,bodyAttributes:Kt.object,children:Kt.oneOfType([Kt.arrayOf(Kt.node),Kt.node]),defaultTitle:Kt.string,defer:Kt.bool,encodeSpecialCharacters:Kt.bool,htmlAttributes:Kt.object,link:Kt.arrayOf(Kt.object),meta:Kt.arrayOf(Kt.object),noscript:Kt.arrayOf(Kt.object),onChangeClientState:Kt.func,script:Kt.arrayOf(Kt.object),style:Kt.arrayOf(Kt.object),title:Kt.string,titleAttributes:Kt.object,titleTemplate:Kt.string,prioritizeSeoTags:Kt.bool,helmetData:Kt.object},K8.defaultProps={defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1},K8.displayName="Helmet";var EO={exports:{}};(function(e){var t={};function r(h){return Math.floor(Math.abs(h)+.5)*(h>=0?1:-1)}function n(h,p,o){h=r(h*o),p=r(p*o);var _=(h-p)*2;_<0&&(_=-_-1);for(var b="";_>=32;)b+=String.fromCharCode((32|_&31)+63),_/=32;return b+=String.fromCharCode((_|0)+63),b}t.decode=function(h,p){for(var o=0,_=0,b=0,P=[],S=0,C=0,L=null,F,j,G=Math.pow(10,Number.isInteger(p)?p:5);o<h.length;){L=null,S=1,C=0;do L=h.charCodeAt(o++)-63,C+=(L&31)*S,S*=32;while(L>=32);F=C&1?(-C-1)/2:C/2,S=1,C=0;do L=h.charCodeAt(o++)-63,C+=(L&31)*S,S*=32;while(L>=32);j=C&1?(-C-1)/2:C/2,_+=F,b+=j,P.push([_/G,b/G])}return P},t.encode=function(h,p){if(!h.length)return"";for(var o=Math.pow(10,Number.isInteger(p)?p:5),_=n(h[0][0],0,o)+n(h[0][1],0,o),b=1;b<h.length;b++){var P=h[b],S=h[b-1];_+=n(P[0],S[0],o),_+=n(P[1],S[1],o)}return _};function u(h){for(var p=[],o=0;o<h.length;o++){var _=h[o].slice();p.push([_[1],_[0]])}return p}t.fromGeoJSON=function(h,p){if(h&&h.type==="Feature"&&(h=h.geometry),!h||h.type!=="LineString")throw new Error("Input must be a GeoJSON LineString");return t.encode(u(h.coordinates),p)},t.toGeoJSON=function(h,p){var o=t.decode(h,p);return{type:"LineString",coordinates:u(o)}},e.exports&&(e.exports=t)})(EO);var p2e=EO.exports;/* @preserve
 * gcoord 0.3.2, geographic coordinate library
 * Copyright (c) 2021 Jiulong Hu <me@hujiulong.com>
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var S4=function(){return S4=Object.assign||function(t){for(var r,n=1,u=arguments.length;n<u;n++){r=arguments[n];for(var h in r)Object.prototype.hasOwnProperty.call(r,h)&&(t[h]=r[h])}return t},S4.apply(this,arguments)},Zo=Math.sin,bU=Math.cos,ev=Math.sqrt,E4=Math.abs,lo=Math.PI,ES=6378245,PS=.006693421622965823;function PO(e,t){return e>=72.004&&e<=137.8347&&t>=.8293&&t<=55.8271}function wU(e,t){var r=-100+2*e+3*t+.2*t*t+.1*e*t+.2*ev(E4(e));return r+=(20*Zo(6*e*lo)+20*Zo(2*e*lo))*2/3,r+=(20*Zo(t*lo)+40*Zo(t/3*lo))*2/3,r+=(160*Zo(t/12*lo)+320*Zo(t*lo/30))*2/3,r}function TU(e,t){var r=300+e+2*t+.1*e*e+.1*e*t+.1*ev(E4(e));return r+=(20*Zo(6*e*lo)+20*Zo(2*e*lo))*2/3,r+=(20*Zo(e*lo)+40*Zo(e/3*lo))*2/3,r+=(150*Zo(e/12*lo)+300*Zo(e/30*lo))*2/3,r}function SU(e,t){var r=TU(e-105,t-35),n=wU(e-105,t-35),u=t/180*lo,h=Zo(u);h=1-PS*h*h;var p=ev(h);return r=r*180/(ES/p*bU(u)*lo),n=n*180/(ES*(1-PS)/(h*p)*lo),[r,n]}function wu(e){var t=e[0],r=e[1];if(!PO(t,r))return[t,r];var n=SU(t,r);return[t+n[0],r+n[1]]}function ef(e){var t=e[0],r=e[1];if(!PO(t,r))return[t,r];for(var n=[t,r],u=n[0],h=n[1],p=wu([u,h]),o=p[0]-t,_=p[1]-r;E4(o)>1e-6||E4(_)>1e-6;)u-=o,h-=_,p=wu([u,h]),o=p[0]-t,_=p[1]-r;return[u,h]}var P4=Math.sin,A4=Math.cos,AO=Math.atan2,MO=Math.sqrt,EU=Math.PI,M4=EU*3e3/180;function $h(e){var t=e[0],r=e[1],n=t-.0065,u=r-.006,h=MO(n*n+u*u)-2e-5*P4(u*M4),p=AO(u,n)-3e-6*A4(n*M4),o=h*A4(p),_=h*P4(p);return[o,_]}function tf(e){var t=e[0],r=e[1],n=t,u=r,h=MO(n*n+u*u)+2e-5*P4(u*M4),p=AO(u,n)+3e-6*A4(n*M4),o=h*A4(p)+.0065,_=h*P4(p)+.006;return[o,_]}var AS=180/Math.PI,MS=Math.PI/180,C4=6378137,tu=20037508342789244e-9;function g5(e){return[e[0]*AS/C4,(Math.PI*.5-2*Math.atan(Math.exp(-e[1]/C4)))*AS]}function Z6(e){var t=Math.abs(e[0])<=180?e[0]:e[0]-(e[0]<0?-1:1)*360,r=[C4*t*MS,C4*Math.log(Math.tan(Math.PI*.25+.5*e[1]*MS))];return r[0]>tu&&(r[0]=tu),r[0]<-tu&&(r[0]=-tu),r[1]>tu&&(r[1]=tu),r[1]<-tu&&(r[1]=-tu),r}var Pg=Math.abs,CS=[1289059486e-2,836237787e-2,5591021,348198983e-2,167804312e-2,0],IS=[75,60,45,30,15,0],PU=[[1410526172116255e-23,898305509648872e-20,-1.9939833816331,200.9824383106796,-187.2403703815547,91.6087516669843,-23.38765649603339,2.57121317296198,-.03801003308653,173379812e-1],[-7435856389565537e-24,8983055097726239e-21,-.78625201886289,96.32687599759846,-1.85204757529826,-59.36935905485877,47.40033549296737,-16.50741931063887,2.28786674699375,1026014486e-2],[-3030883460898826e-23,898305509983578e-20,.30071316287616,59.74293618442277,7.357984074871,-25.38371002664745,13.45380521110908,-3.29883767235584,.32710905363475,685681737e-2],[-1981981304930552e-23,8983055099779535e-21,.03278182852591,40.31678527705744,.65659298677277,-4.44255534477492,.85341911805263,.12923347998204,-.04625736007561,448277706e-2],[309191371068437e-23,8983055096812155e-21,6995724062e-14,23.10934304144901,-.00023663490511,-.6321817810242,-.00663494467273,.03430082397953,-.00466043876332,25551644e-1],[2890871144776878e-24,8983055095805407e-21,-3068298e-14,7.47137025468032,-353937994e-14,-.02145144861037,-1234426596e-14,.00010322952773,-323890364e-14,826088.5]],AU=[[-.0015702102444,111320.7020616939,0x60e374c3105a3,-0x24bb4115e2e164,0x5cc55543bb0ae8,-0x7ce070193f3784,0x5e7ca61ddf8150,-0x261a578d8b24d0,0x665d60f3742ca,82.5],[.0008277824516172526,111320.7020463578,6477955746671607e-7,-4082003173641316e-6,1077490566351142e-5,-1517187553151559e-5,1205306533862167e-5,-5124939663577472e-6,9133119359512032e-7,67.5],[.00337398766765,111320.7020202162,4481351045890365e-9,-2339375119931662e-8,7968221547186455e-8,-1159649932797253e-7,9723671115602145e-8,-4366194633752821e-8,8477230501135234e-9,52.5],[.00220636496208,111320.7020209128,51751.86112841131,3796837749470245e-9,992013.7397791013,-122195221711287e-8,1340652697009075e-9,-620943.6990984312,144416.9293806241,37.5],[-.0003441963504368392,111320.7020576856,278.2353980772752,2485758690035394e-9,6070.750963243378,54821.18345352118,9540.606633304236,-2710.55326746645,1405.483844121726,22.5],[-.0003218135878613132,111320.7020701615,.00369383431289,823725.6402795718,.46104986909093,2351.343141331292,1.58060784298199,8.77738589078284,.37238884252424,7.45]];function CO(e,t,r){var n=Pg(t)/r[9],u=r[0]+r[1]*Pg(e),h=r[2]+r[3]*n+r[4]*Math.pow(n,2)+r[5]*Math.pow(n,3)+r[6]*Math.pow(n,4)+r[7]*Math.pow(n,5)+r[8]*Math.pow(n,6);return u*=e<0?-1:1,h*=t<0?-1:1,[u,h]}function X6(e){for(var t=e[0],r=e[1],n=[],u=0;u<IS.length;u++)if(Pg(r)>IS[u]){n=AU[u];break}return CO(t,r,n)}function y5(e){for(var t=e[0],r=e[1],n=[],u=0;u<CS.length;u++)if(r>=CS[u]){n=PU[u];break}return CO(t,r,n)}function ru(e,t){if(!e)throw new Error(t)}function IO(e){return!!e&&Object.prototype.toString.call(e)==="[object Array]"}function OS(e){return!isNaN(Number(e))&&e!==null&&!IO(e)}function Ta(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.length-1;return function(){for(var n=[],u=0;u<arguments.length;u++)n[u]=arguments[u];for(var h=r,p=e[r].apply(null,n);h--;)p=e[h].call(null,p);return p}}function OO(e,t,r){if(r===void 0&&(r=!1),e!==null)for(var n,u,h,p,o,_,b,P=0,S=0,C,L=e.type,F=L==="FeatureCollection",j=L==="Feature",G=F?e.features.length:1,$=0;$<G;$++){b=F?e.features[$].geometry:j?e.geometry:e,C=b?b.type==="GeometryCollection":!1,o=C?b.geometries.length:1;for(var N=0;N<o;N++){var U=0,J=0;if(p=C?b.geometries[N]:b,p!==null){var q=p.type;switch(P=r&&(q==="Polygon"||q==="MultiPolygon")?1:0,q){case null:break;case"Point":if(_=p.coordinates,t(_,S,$,U,J)===!1)return!1;S++,U++;break;case"LineString":case"MultiPoint":for(_=p.coordinates,n=0;n<_.length;n++){if(t(_[n],S,$,U,J)===!1)return!1;S++,q==="MultiPoint"&&U++}q==="LineString"&&U++;break;case"Polygon":case"MultiLineString":for(_=p.coordinates,n=0;n<_.length;n++){for(u=0;u<_[n].length-P;u++){if(t(_[n][u],S,$,U,J)===!1)return!1;S++}q==="MultiLineString"&&U++,q==="Polygon"&&J++}q==="Polygon"&&U++;break;case"MultiPolygon":for(_=p.coordinates,n=0;n<_.length;n++){for(J=0,u=0;u<_[n].length;u++){for(h=0;h<_[n][u].length-P;h++){if(t(_[n][u][h],S,$,U,J)===!1)return!1;S++}J++}U++}break;case"GeometryCollection":for(n=0;n<p.geometries.length;n++)if(OO(p.geometries[n],t,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}var lh,uh,ch,hh,fh,In;(function(e){e.WGS84="WGS84",e.WGS1984="WGS84",e.EPSG4326="WGS84",e.GCJ02="GCJ02",e.AMap="GCJ02",e.BD09="BD09",e.BD09LL="BD09",e.Baidu="BD09",e.BMap="BD09",e.BD09MC="BD09MC",e.BD09Meter="BD09MC",e.EPSG3857="EPSG3857",e.EPSG900913="EPSG3857",e.EPSG102100="EPSG3857",e.WebMercator="EPSG3857",e.WM="EPSG3857"})(In||(In={}));var MU={to:(lh={},lh[In.GCJ02]=wu,lh[In.BD09]=Ta(tf,wu),lh[In.BD09MC]=Ta(X6,tf,wu),lh[In.EPSG3857]=Z6,lh)},CU={to:(uh={},uh[In.WGS84]=ef,uh[In.BD09]=tf,uh[In.BD09MC]=Ta(X6,tf),uh[In.EPSG3857]=Ta(Z6,ef),uh)},IU={to:(ch={},ch[In.WGS84]=Ta(ef,$h),ch[In.GCJ02]=$h,ch[In.EPSG3857]=Ta(Z6,ef,$h),ch[In.BD09MC]=X6,ch)},OU={to:(hh={},hh[In.WGS84]=g5,hh[In.GCJ02]=Ta(wu,g5),hh[In.BD09]=Ta(tf,wu,g5),hh[In.BD09MC]=Ta(X6,tf,wu,g5),hh)},kU={to:(fh={},fh[In.WGS84]=Ta(ef,$h,y5),fh[In.GCJ02]=Ta($h,y5),fh[In.EPSG3857]=Ta(Z6,ef,$h,y5),fh[In.BD09]=y5,fh)},DU={WGS84:MU,GCJ02:CU,BD09:IU,EPSG3857:OU,BD09MC:kU};function LU(e,t,r){if(ru(!!e,"The args[0] input coordinate is required"),ru(!!t,"The args[1] original coordinate system is required"),ru(!!r,"The args[2] target coordinate system is required"),t===r)return e;var n=DU[t];ru(!!n,"Invalid original coordinate system: "+t);var u=n.to[r];ru(!!u,"Invalid target coordinate system: "+r);var h=typeof e;if(ru(h==="string"||h==="object","Invalid input coordinate type: "+h),h==="string")try{e=JSON.parse(e)}catch{throw new Error("Invalid input coordinate: "+e)}var p=!1;IO(e)&&(ru(e.length>=2,"Invalid input coordinate: "+e),ru(OS(e[0])&&OS(e[1]),"Invalid input coordinate: "+e),e=e.map(Number),p=!0);var o=u;return p?o(e):(OO(e,function(_){var b;b=o(_),_[0]=b[0],_[1]=b[1]}),e)}var zU=S4(S4({},In),{CRSTypes:In,transform:LU});const m2e=zU;function Cp(e){"@babel/helpers - typeof";return Cp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cp(e)}function RU(e,t){if(Cp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Cp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function BU(e){var t=RU(e,"string");return Cp(t)=="symbol"?t:t+""}function $n(e,t,r){return(t=BU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Xi=1e-6,rf=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});function FU(){var e=new rf(4);return rf!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function jU(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function $U(e,t,r){var n=t[0],u=t[1],h=t[2],p=t[3];return e[0]=r[0]*n+r[4]*u+r[8]*h+r[12]*p,e[1]=r[1]*n+r[5]*u+r[9]*h+r[13]*p,e[2]=r[2]*n+r[6]*u+r[10]*h+r[14]*p,e[3]=r[3]*n+r[7]*u+r[11]*h+r[15]*p,e}(function(){var e=FU();return function(t,r,n,u,h,p){var o,_;for(r||(r=4),n||(n=0),u?_=Math.min(u*r+n,t.length):_=t.length,o=n;o<_;o+=r)e[0]=t[o],e[1]=t[o+1],e[2]=t[o+2],e[3]=t[o+3],h(e,e,p),t[o]=e[0],t[o+1]=e[1],t[o+2]=e[2],t[o+3]=e[3];return t}})();function Z5(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Nh(e,t){const r=$U([],t,e);return jU(r,r,1/r[3]),r}function Ag(e,t,r){return e<t?t:e>r?r:e}function NU(e){return Math.log(e)*Math.LOG2E}const UU=Math.log2||NU;function VU(e,t){var r=t[0],n=t[1],u=t[2],h=t[3],p=t[4],o=t[5],_=t[6],b=t[7],P=t[8],S=t[9],C=t[10],L=t[11],F=t[12],j=t[13],G=t[14],$=t[15],N=r*o-n*p,U=r*_-u*p,J=r*b-h*p,q=n*_-u*o,Y=n*b-h*o,X=u*b-h*_,ue=P*j-S*F,oe=P*G-C*F,Re=P*$-L*F,ze=S*G-C*j,De=S*$-L*j,Je=C*$-L*G,we=N*Je-U*De+J*ze+q*Re-Y*oe+X*ue;return we?(we=1/we,e[0]=(o*Je-_*De+b*ze)*we,e[1]=(u*De-n*Je-h*ze)*we,e[2]=(j*X-G*Y+$*q)*we,e[3]=(C*Y-S*X-L*q)*we,e[4]=(_*Re-p*Je-b*oe)*we,e[5]=(r*Je-u*Re+h*oe)*we,e[6]=(G*J-F*X-$*U)*we,e[7]=(P*X-C*J+L*U)*we,e[8]=(p*De-o*Re+b*ue)*we,e[9]=(n*Re-r*De-h*ue)*we,e[10]=(F*Y-j*J+$*N)*we,e[11]=(S*J-P*Y-L*N)*we,e[12]=(o*oe-p*ze-_*ue)*we,e[13]=(r*ze-n*oe+u*ue)*we,e[14]=(j*U-F*q-G*N)*we,e[15]=(P*q-S*U+C*N)*we,e):null}function Y8(e,t,r){var n=t[0],u=t[1],h=t[2],p=t[3],o=t[4],_=t[5],b=t[6],P=t[7],S=t[8],C=t[9],L=t[10],F=t[11],j=t[12],G=t[13],$=t[14],N=t[15],U=r[0],J=r[1],q=r[2],Y=r[3];return e[0]=U*n+J*o+q*S+Y*j,e[1]=U*u+J*_+q*C+Y*G,e[2]=U*h+J*b+q*L+Y*$,e[3]=U*p+J*P+q*F+Y*N,U=r[4],J=r[5],q=r[6],Y=r[7],e[4]=U*n+J*o+q*S+Y*j,e[5]=U*u+J*_+q*C+Y*G,e[6]=U*h+J*b+q*L+Y*$,e[7]=U*p+J*P+q*F+Y*N,U=r[8],J=r[9],q=r[10],Y=r[11],e[8]=U*n+J*o+q*S+Y*j,e[9]=U*u+J*_+q*C+Y*G,e[10]=U*h+J*b+q*L+Y*$,e[11]=U*p+J*P+q*F+Y*N,U=r[12],J=r[13],q=r[14],Y=r[15],e[12]=U*n+J*o+q*S+Y*j,e[13]=U*u+J*_+q*C+Y*G,e[14]=U*h+J*b+q*L+Y*$,e[15]=U*p+J*P+q*F+Y*N,e}function Mg(e,t,r){var n=r[0],u=r[1],h=r[2],p,o,_,b,P,S,C,L,F,j,G,$;return t===e?(e[12]=t[0]*n+t[4]*u+t[8]*h+t[12],e[13]=t[1]*n+t[5]*u+t[9]*h+t[13],e[14]=t[2]*n+t[6]*u+t[10]*h+t[14],e[15]=t[3]*n+t[7]*u+t[11]*h+t[15]):(p=t[0],o=t[1],_=t[2],b=t[3],P=t[4],S=t[5],C=t[6],L=t[7],F=t[8],j=t[9],G=t[10],$=t[11],e[0]=p,e[1]=o,e[2]=_,e[3]=b,e[4]=P,e[5]=S,e[6]=C,e[7]=L,e[8]=F,e[9]=j,e[10]=G,e[11]=$,e[12]=p*n+P*u+F*h+t[12],e[13]=o*n+S*u+j*h+t[13],e[14]=_*n+C*u+G*h+t[14],e[15]=b*n+L*u+$*h+t[15]),e}function kO(e,t,r){var n=r[0],u=r[1],h=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*u,e[5]=t[5]*u,e[6]=t[6]*u,e[7]=t[7]*u,e[8]=t[8]*h,e[9]=t[9]*h,e[10]=t[10]*h,e[11]=t[11]*h,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function GU(e,t,r){var n=Math.sin(r),u=Math.cos(r),h=t[4],p=t[5],o=t[6],_=t[7],b=t[8],P=t[9],S=t[10],C=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=h*u+b*n,e[5]=p*u+P*n,e[6]=o*u+S*n,e[7]=_*u+C*n,e[8]=b*u-h*n,e[9]=P*u-p*n,e[10]=S*u-o*n,e[11]=C*u-_*n,e}function WU(e,t,r){var n=Math.sin(r),u=Math.cos(r),h=t[0],p=t[1],o=t[2],_=t[3],b=t[4],P=t[5],S=t[6],C=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=h*u+b*n,e[1]=p*u+P*n,e[2]=o*u+S*n,e[3]=_*u+C*n,e[4]=b*u-h*n,e[5]=P*u-p*n,e[6]=S*u-o*n,e[7]=C*u-_*n,e}function qU(e,t,r,n,u){var h=1/Math.tan(t/2),p;return e[0]=h/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=h,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,u!=null&&u!==1/0?(p=1/(n-u),e[10]=(u+n)*p,e[14]=2*u*n*p):(e[10]=-1,e[14]=-2*n),e}var HU=qU;function kS(e,t){var r=e[0],n=e[1],u=e[2],h=e[3],p=e[4],o=e[5],_=e[6],b=e[7],P=e[8],S=e[9],C=e[10],L=e[11],F=e[12],j=e[13],G=e[14],$=e[15],N=t[0],U=t[1],J=t[2],q=t[3],Y=t[4],X=t[5],ue=t[6],oe=t[7],Re=t[8],ze=t[9],De=t[10],Je=t[11],we=t[12],ve=t[13],Ce=t[14],Le=t[15];return Math.abs(r-N)<=Xi*Math.max(1,Math.abs(r),Math.abs(N))&&Math.abs(n-U)<=Xi*Math.max(1,Math.abs(n),Math.abs(U))&&Math.abs(u-J)<=Xi*Math.max(1,Math.abs(u),Math.abs(J))&&Math.abs(h-q)<=Xi*Math.max(1,Math.abs(h),Math.abs(q))&&Math.abs(p-Y)<=Xi*Math.max(1,Math.abs(p),Math.abs(Y))&&Math.abs(o-X)<=Xi*Math.max(1,Math.abs(o),Math.abs(X))&&Math.abs(_-ue)<=Xi*Math.max(1,Math.abs(_),Math.abs(ue))&&Math.abs(b-oe)<=Xi*Math.max(1,Math.abs(b),Math.abs(oe))&&Math.abs(P-Re)<=Xi*Math.max(1,Math.abs(P),Math.abs(Re))&&Math.abs(S-ze)<=Xi*Math.max(1,Math.abs(S),Math.abs(ze))&&Math.abs(C-De)<=Xi*Math.max(1,Math.abs(C),Math.abs(De))&&Math.abs(L-Je)<=Xi*Math.max(1,Math.abs(L),Math.abs(Je))&&Math.abs(F-we)<=Xi*Math.max(1,Math.abs(F),Math.abs(we))&&Math.abs(j-ve)<=Xi*Math.max(1,Math.abs(j),Math.abs(ve))&&Math.abs(G-Ce)<=Xi*Math.max(1,Math.abs(G),Math.abs(Ce))&&Math.abs($-Le)<=Xi*Math.max(1,Math.abs($),Math.abs(Le))}function ZU(){var e=new rf(2);return rf!=Float32Array&&(e[0]=0,e[1]=0),e}function DS(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function XU(e,t){return e[0]=-t[0],e[1]=-t[1],e}function DO(e,t,r,n){var u=t[0],h=t[1];return e[0]=u+n*(r[0]-u),e[1]=h+n*(r[1]-h),e}(function(){var e=ZU();return function(t,r,n,u,h,p){var o,_;for(r||(r=2),n||(n=0),u?_=Math.min(u*r+n,t.length):_=t.length,o=n;o<_;o+=r)e[0]=t[o],e[1]=t[o+1],h(e,e,p),t[o]=e[0],t[o+1]=e[1];return t}})();function KU(){var e=new rf(3);return rf!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function YU(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}function JU(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}function QU(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}var eV=JU;(function(){var e=KU();return function(t,r,n,u,h,p){var o,_;for(r||(r=3),n||(n=0),u?_=Math.min(u*r+n,t.length):_=t.length,o=n;o<_;o+=r)e[0]=t[o],e[1]=t[o+1],e[2]=t[o+2],h(e,e,p),t[o]=e[0],t[o+1]=e[1],t[o+2]=e[2];return t}})();function Au(e,t){if(!e)throw new Error(t||"@math.gl/web-mercator: assertion failed.")}const ts=Math.PI,LO=ts/4,As=ts/180,Cg=180/ts,Ip=512,LS=4003e4,_5=85.051129,zO=1.5;function tV(e){return Math.pow(2,e)}function Ch(e){const[t,r]=e;Au(Number.isFinite(t)),Au(Number.isFinite(r)&&r>=-90&&r<=90,"invalid latitude");const n=t*As,u=r*As,h=Ip*(n+ts)/(2*ts),p=Ip*(ts+Math.log(Math.tan(LO+u*.5)))/(2*ts);return[h,p]}function np(e){const[t,r]=e,n=t/Ip*(2*ts)-ts,u=2*(Math.atan(Math.exp(r/Ip*(2*ts)-ts))-LO);return[n*Cg,u*Cg]}function rV(e){const{latitude:t,longitude:r,highPrecision:n=!1}=e;Au(Number.isFinite(t)&&Number.isFinite(r));const u=Ip,h=Math.cos(t*As),p=u/360,o=p/h,_=u/LS/h,b={unitsPerMeter:[_,_,_],metersPerUnit:[1/_,1/_,1/_],unitsPerDegree:[p,o,_],degreesPerUnit:[1/p,1/o,1/_]};if(n){const P=As*Math.tan(t*As)/h,S=p*P/2,C=u/LS*P,L=C/o*_;b.unitsPerDegree2=[0,S,C],b.unitsPerMeter2=[L,0,L]}return b}function nV(e){const{height:t,pitch:r,bearing:n,altitude:u,scale:h,center:p}=e,o=Z5();Mg(o,o,[0,0,-u]),GU(o,o,-r*As),WU(o,o,n*As);const _=h/t;return kO(o,o,[_,_,_]),p&&Mg(o,o,QU([],p)),o}function iV(e){const{width:t,height:r,altitude:n,pitch:u=0,offset:h,center:p,scale:o,nearZMultiplier:_=1,farZMultiplier:b=1}=e;let{fovy:P=I4(zO)}=e;n!==void 0&&(P=I4(n));const S=P*As,C=u*As,L=RO(P);let F=L;p&&(F+=p[2]*o/Math.cos(C)/r);const j=S*(.5+(h?h[1]:0)/r),G=Math.sin(j)*F/Math.sin(Ag(Math.PI/2-C-j,.01,Math.PI-.01)),$=Math.sin(C)*G+F,N=F*10,U=Math.min($*b,N);return{fov:S,aspect:t/r,focalDistance:L,near:_,far:U}}function oV(e){const{fov:t,aspect:r,near:n,far:u}=iV(e);return HU([],t,r,n,u)}function I4(e){return 2*Math.atan(.5/e)*Cg}function RO(e){return .5/Math.tan(.5*e*As)}function aV(e,t){const[r,n,u=0]=e;return Au(Number.isFinite(r)&&Number.isFinite(n)&&Number.isFinite(u)),Nh(t,[r,n,u,1])}function zS(e,t,r=0){const[n,u,h]=e;if(Au(Number.isFinite(n)&&Number.isFinite(u),"invalid pixel coordinate"),Number.isFinite(h))return Nh(t,[n,u,h,1]);const p=Nh(t,[n,u,0,1]),o=Nh(t,[n,u,1,1]),_=p[2],b=o[2],P=_===b?0:((r||0)-_)/(b-_);return DO([],p,o,P)}function sV(e){const{width:t,height:r,bounds:n,minExtent:u=0,maxZoom:h=24,offset:p=[0,0]}=e,[[o,_],[b,P]]=n,S=lV(e.padding),C=Ch([o,Ag(P,-_5,_5)]),L=Ch([b,Ag(_,-_5,_5)]),F=[Math.max(Math.abs(L[0]-C[0]),u),Math.max(Math.abs(L[1]-C[1]),u)],j=[t-S.left-S.right-Math.abs(p[0])*2,r-S.top-S.bottom-Math.abs(p[1])*2];Au(j[0]>0&&j[1]>0);const G=j[0]/F[0],$=j[1]/F[1],N=(S.right-S.left)/2/G,U=(S.top-S.bottom)/2/$,J=[(L[0]+C[0])/2+N,(L[1]+C[1])/2+U],q=np(J),Y=Math.min(h,UU(Math.abs(Math.min(G,$))));return Au(Number.isFinite(Y)),{longitude:q[0],latitude:q[1],zoom:Y}}function lV(e=0){return typeof e=="number"?{top:e,bottom:e,left:e,right:e}:(Au(Number.isFinite(e.top)&&Number.isFinite(e.bottom)&&Number.isFinite(e.left)&&Number.isFinite(e.right)),e)}const RS=Math.PI/180;function uV(e,t=0){const{width:r,height:n,unproject:u}=e,h={targetZ:t},p=u([0,n],h),o=u([r,n],h);let _,b;const P=e.fovy?.5*e.fovy*RS:Math.atan(.5/e.altitude),S=(90-e.pitch)*RS;return P>S-.01?(_=BS(e,0,t),b=BS(e,r,t)):(_=u([0,0],h),b=u([r,0],h)),[p,o,b,_]}function BS(e,t,r){const{pixelUnprojectionMatrix:n}=e,u=Nh(n,[t,0,1,1]),h=Nh(n,[t,e.height,1,1]),o=(r*e.distanceScales.unitsPerMeter[2]-u[2])/(h[2]-u[2]),_=DO([],u,h,o),b=np(_);return b.push(r),b}class Ig{constructor(t={width:1,height:1}){$n(this,"latitude",void 0),$n(this,"longitude",void 0),$n(this,"zoom",void 0),$n(this,"pitch",void 0),$n(this,"bearing",void 0),$n(this,"altitude",void 0),$n(this,"fovy",void 0),$n(this,"meterOffset",void 0),$n(this,"center",void 0),$n(this,"width",void 0),$n(this,"height",void 0),$n(this,"scale",void 0),$n(this,"distanceScales",void 0),$n(this,"viewMatrix",void 0),$n(this,"projectionMatrix",void 0),$n(this,"viewProjectionMatrix",void 0),$n(this,"pixelProjectionMatrix",void 0),$n(this,"pixelUnprojectionMatrix",void 0),$n(this,"equals",$=>$ instanceof Ig?$.width===this.width&&$.height===this.height&&kS($.projectionMatrix,this.projectionMatrix)&&kS($.viewMatrix,this.viewMatrix):!1),$n(this,"project",($,N={})=>{const{topLeft:U=!0}=N,J=this.projectPosition($),q=aV(J,this.pixelProjectionMatrix),[Y,X]=q,ue=U?X:this.height-X;return $.length===2?[Y,ue]:[Y,ue,q[2]]}),$n(this,"unproject",($,N={})=>{const{topLeft:U=!0,targetZ:J=void 0}=N,[q,Y,X]=$,ue=U?Y:this.height-Y,oe=J&&J*this.distanceScales.unitsPerMeter[2],Re=zS([q,ue,X],this.pixelUnprojectionMatrix,oe),[ze,De,Je]=this.unprojectPosition(Re);return Number.isFinite(X)?[ze,De,Je]:Number.isFinite(J)?[ze,De,J]:[ze,De]}),$n(this,"projectPosition",$=>{const[N,U]=Ch($),J=($[2]||0)*this.distanceScales.unitsPerMeter[2];return[N,U,J]}),$n(this,"unprojectPosition",$=>{const[N,U]=np($),J=($[2]||0)*this.distanceScales.metersPerUnit[2];return[N,U,J]});let{width:r,height:n,altitude:u=null,fovy:h=null}=t;const{latitude:p=0,longitude:o=0,zoom:_=0,pitch:b=0,bearing:P=0,position:S=null,nearZMultiplier:C=.02,farZMultiplier:L=1.01}=t;r=r||1,n=n||1,h===null&&u===null?(u=zO,h=I4(u)):h===null?h=I4(u):u===null&&(u=RO(h));const F=tV(_);u=Math.max(.75,u);const j=rV({longitude:o,latitude:p}),G=Ch([o,p]);G.push(0),S&&YU(G,G,eV([],S,j.unitsPerMeter)),this.projectionMatrix=oV({width:r,height:n,scale:F,center:G,pitch:b,fovy:h,nearZMultiplier:C,farZMultiplier:L}),this.viewMatrix=nV({height:n,scale:F,center:G,pitch:b,bearing:P,altitude:u}),this.width=r,this.height=n,this.scale=F,this.latitude=p,this.longitude=o,this.zoom=_,this.pitch=b,this.bearing=P,this.altitude=u,this.fovy=h,this.center=G,this.meterOffset=S||[0,0,0],this.distanceScales=j,this._initMatrices(),Object.freeze(this)}_initMatrices(){const{width:t,height:r,projectionMatrix:n,viewMatrix:u}=this,h=Z5();Y8(h,h,n),Y8(h,h,u),this.viewProjectionMatrix=h;const p=Z5();kO(p,p,[t/2,-r/2,1]),Mg(p,p,[1,-1,0]),Y8(p,p,h);const o=VU(Z5(),p);if(!o)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=p,this.pixelUnprojectionMatrix=o}projectFlat(t){return Ch(t)}unprojectFlat(t){return np(t)}getMapCenterByLngLatPosition({lngLat:t,pos:r}){const n=zS(r,this.pixelUnprojectionMatrix),u=Ch(t),h=DS([],u,XU([],n)),p=DS([],this.center,h);return np(p)}fitBounds(t,r={}){const{width:n,height:u}=this,{longitude:h,latitude:p,zoom:o}=sV(Object.assign({width:n,height:u,bounds:t},r));return new Ig({width:n,height:u,longitude:h,latitude:p,zoom:o})}getBounds(t){const r=this.getBoundingRegion(t),n=Math.min(...r.map(o=>o[0])),u=Math.max(...r.map(o=>o[0])),h=Math.min(...r.map(o=>o[1])),p=Math.max(...r.map(o=>o[1]));return[[n,h],[u,p]]}getBoundingRegion(t={}){return uV(this,t.z||0)}getLocationAtPoint({lngLat:t,pos:r}){return this.getMapCenterByLngLatPosition({lngLat:t,pos:r})}}const cV="FeatureCollection",hV=[{type:"Feature",properties:{name:"津巴布韦",full_name:"津巴布韦共和国",iso_a2:"ZW",iso_a3:"ZWE",iso_n3:"716"},geometry:{type:"Polygon",coordinates:[[[31.287891,-22.402051],[32.429785,-21.29707],[32.492383,-20.659766],[32.992773,-19.984863],[32.699707,-18.940918],[32.993066,-18.35957],[32.948047,-16.712305],[31.23623,-16.023633],[30.437793,-15.995313],[30.396094,-15.643066],[29.487305,-15.696777],[28.913086,-15.987793],[28.760547,-16.532129],[27.932227,-16.896191],[27.020801,-17.958398],[25.258789,-17.793555],[26.168066,-19.538281],[27.178223,-20.100977],[27.280762,-20.478711],[27.679297,-20.503027],[27.669434,-21.064258],[28.014063,-21.554199],[29.025586,-21.796875],[29.364844,-22.193945],[31.287891,-22.402051]]]}},{type:"Feature",properties:{name:"赞比亚",full_name:"赞比亚共和国",iso_a2:"ZM",iso_a3:"ZMB",iso_n3:"894"},geometry:{type:"Polygon",coordinates:[[[30.396094,-15.643066],[30.231836,-14.990332],[33.201758,-14.013379],[32.67041,-13.59043],[33.021582,-12.630469],[33.512305,-12.347754],[33.252344,-12.112598],[33.261328,-10.893359],[33.661523,-10.553125],[32.919922,-9.407422],[31.033398,-8.597656],[30.751172,-8.193652],[28.898145,-8.485449],[28.400684,-9.224805],[28.645508,-10.550195],[28.383398,-11.566699],[29.064355,-12.348828],[29.485547,-12.418457],[29.795117,-12.155469],[29.775195,-13.438086],[29.554199,-13.248926],[29.014258,-13.368848],[28.412891,-12.518066],[27.573828,-12.227051],[27.15918,-11.579199],[26.824023,-11.965234],[26.025977,-11.890137],[25.349414,-11.623047],[25.28877,-11.212402],[24.37793,-11.41709],[24.365723,-11.129883],[23.966504,-10.871777],[23.962988,-12.988477],[21.978906,-13.000977],[22.040234,-16.262793],[23.380664,-17.640625],[24.73291,-17.517773],[25.258789,-17.793555],[27.020801,-17.958398],[27.932227,-16.896191],[28.760547,-16.532129],[28.913086,-15.987793],[29.487305,-15.696777],[30.396094,-15.643066]]]}},{type:"Feature",properties:{name:"也门",full_name:"也门共和国",iso_a2:"YE",iso_a3:"YEM",iso_n3:"887"},geometry:{type:"MultiPolygon",coordinates:[[[[53.085645,16.648389],[51.977637,18.996143],[49.041992,18.581787],[48.172168,18.156934],[47.143555,16.94668],[46.727637,17.265576],[43.916992,17.324707],[43.417969,17.51626],[43.190918,17.359375],[43.165039,16.689404],[42.799316,16.371777],[42.657812,15.232812],[42.936426,14.938574],[43.231934,13.26709],[43.487598,12.698828],[44.005859,12.607666],[45.038672,12.815869],[45.657324,13.338721],[46.788867,13.465576],[47.989941,14.048096],[48.668359,14.050146],[49.349902,14.637793],[52.21748,15.655518],[52.327734,16.293555],[53.085645,16.648389]]],[[[53.763184,12.636816],[53.31582,12.533154],[53.718848,12.318994],[54.511133,12.552783],[53.763184,12.636816]]]]}},{type:"Feature",properties:{name:"越南",full_name:"越南社会主义共和国",iso_a2:"VN",iso_a3:"VNM",iso_n3:"704"},geometry:{type:"MultiPolygon",coordinates:[[[[104.063965,10.39082],[103.849512,10.371094],[104.018457,10.029199],[104.063965,10.39082]]],[[[107.972656,21.507959],[106.663574,21.978906],[106.550391,22.501367],[106.780273,22.778906],[105.842969,22.922803],[105.275391,23.345215],[103.941504,22.540088],[103.32666,22.769775],[102.981934,22.448242],[102.470898,22.750928],[102.127441,22.379199],[102.662012,21.676025],[102.949609,21.681348],[102.851172,21.265918],[103.104492,20.89165],[103.635059,20.69707],[104.101367,20.945508],[104.583203,20.64668],[104.367773,20.441406],[104.92793,20.018115],[104.587891,19.61875],[104.032031,19.675146],[103.891602,19.30498],[105.146484,18.650977],[105.114551,18.405273],[106.502246,16.954102],[106.656445,16.492627],[107.396387,16.043018],[107.165918,15.80249],[107.653125,15.255225],[107.519434,14.705078],[107.331445,14.126611],[107.605469,13.437793],[107.506445,12.364551],[106.413867,11.948438],[106.399219,11.687012],[105.851465,11.63501],[106.163965,10.794922],[105.755078,10.98999],[105.045703,10.911377],[104.850586,10.534473],[104.426367,10.41123],[105.084473,9.995703],[104.77041,8.597656],[105.114355,8.629199],[106.168359,9.396729],[105.830957,10.000732],[106.484082,9.559424],[106.136426,10.22168],[106.595605,9.859863],[106.785254,10.116455],[106.464063,10.298291],[106.757422,10.295801],[106.605859,10.464941],[106.947461,10.400342],[107.006641,10.660547],[107.261523,10.398389],[108.001367,10.720361],[108.986719,11.336377],[109.198633,11.724854],[109.423926,12.955957],[108.821289,15.37793],[106.370508,17.746875],[106.499023,17.946436],[105.621777,18.966309],[105.984082,19.939062],[106.572852,20.392188],[106.683398,21.000293],[107.164746,20.94873],[107.972656,21.507959]]]]}},{type:"Feature",properties:{name:"委内瑞拉",full_name:"委内瑞拉玻利瓦尔共和国",iso_a2:"VE",iso_a3:"VEN",iso_n3:"862"},geometry:{type:"MultiPolygon",coordinates:[[[[-63.849365,11.131006],[-64.402344,10.981592],[-63.917627,10.887549],[-63.849365,11.131006]]],[[[-60.017529,8.549316],[-61.304004,8.4104],[-61.618701,8.597461],[-61.247266,8.600342],[-60.79248,9.360742],[-61.588867,9.894531],[-61.735938,9.631201],[-62.0771,9.975049],[-62.32041,9.783057],[-62.550342,10.200439],[-62.740576,10.056152],[-62.913574,10.531494],[-61.879492,10.741016],[-64.298193,10.635156],[-63.731885,10.503418],[-65.129102,10.070068],[-65.851758,10.257764],[-66.247217,10.632227],[-68.139941,10.492725],[-68.398633,11.160986],[-68.827979,11.431738],[-69.631592,11.479932],[-70.003955,12.177881],[-70.286523,11.886035],[-69.804785,11.474219],[-71.469531,10.96416],[-71.494238,10.533203],[-71.052686,9.705811],[-71.241406,9.160449],[-71.619531,9.047949],[-72.112842,9.815576],[-71.594336,10.657373],[-71.956934,11.569922],[-71.319727,11.861914],[-71.958105,11.666406],[-72.690088,10.83584],[-73.366211,9.194141],[-72.796387,9.108984],[-72.390332,8.287061],[-72.471973,7.524268],[-72.006641,7.032617],[-70.129199,6.953613],[-69.427148,6.123975],[-67.481982,6.180273],[-67.855273,4.506885],[-67.311133,3.415869],[-67.859082,2.793604],[-67.21084,2.390137],[-66.876025,1.223047],[-66.347119,.767188],[-65.681445,.983447],[-65.473389,.69126],[-64.205029,1.529492],[-64.008496,1.931592],[-63.43252,2.155566],[-63.389258,2.411914],[-64.046582,2.502393],[-64.221094,3.587402],[-64.788672,4.276025],[-64.021484,3.929102],[-63.338672,3.943896],[-62.856982,3.593457],[-62.712109,4.01792],[-61.002832,4.535254],[-60.603857,4.949365],[-60.742139,5.202051],[-61.39082,5.93877],[-61.128711,6.214307],[-61.145605,6.694531],[-60.3521,7.002881],[-60.718652,7.535937],[-59.849072,8.248682],[-60.017529,8.549316]]]]}},{type:"Feature",properties:{name:"梵蒂冈",full_name:"梵蒂冈城国",iso_a2:"VA",iso_a3:"VAT",iso_n3:"336"},geometry:{type:"Polygon",coordinates:[[[12.43916,41.898389],[12.430566,41.905469],[12.430566,41.897559],[12.43916,41.898389]]]}},{type:"Feature",properties:{name:"瓦努阿图",full_name:"瓦努阿图共和国",iso_a2:"VU",iso_a3:"VUT",iso_n3:"548"},geometry:{type:"MultiPolygon",coordinates:[[[[166.745801,-14.826855],[166.567383,-14.641797],[166.631055,-15.406055],[166.758301,-15.631152],[167.093945,-15.580859],[167.075586,-14.935645],[166.810156,-15.157422],[166.745801,-14.826855]]],[[[167.4125,-16.095898],[167.199512,-15.885059],[167.449316,-16.55498],[167.836621,-16.449707],[167.4125,-16.095898]]],[[[168.29668,-16.336523],[168.163867,-16.081641],[167.929004,-16.228711],[168.29668,-16.336523]]],[[[168.445801,-17.542188],[168.158203,-17.710547],[168.524609,-17.798047],[168.445801,-17.542188]]],[[[167.911328,-15.435938],[168.002539,-15.283203],[167.674219,-15.451562],[167.911328,-15.435938]]],[[[169.491309,-19.540137],[169.247461,-19.344727],[169.347266,-19.623535],[169.491309,-19.540137]]],[[[169.334375,-18.940234],[169.01582,-18.64375],[168.986914,-18.871289],[169.334375,-18.940234]]]]}},{type:"Feature",properties:{name:"乌兹别克斯坦",full_name:"乌兹别克斯坦共和国",iso_a2:"UZ",iso_a3:"UZB",iso_n3:"860"},geometry:{type:"Polygon",coordinates:[[[70.946777,42.248682],[69.153613,41.425244],[68.572656,40.622656],[68.291895,40.656104],[67.935742,41.196582],[66.709668,41.17915],[66.498633,41.994873],[66.00957,42.004883],[66.100293,42.99082],[65.803027,42.876953],[64.905469,43.714697],[61.990234,43.492139],[61.00791,44.393799],[58.555273,45.555371],[55.975684,44.994922],[55.977441,41.322217],[57.017969,41.263477],[56.964063,41.856543],[58.028906,42.487646],[58.474414,42.299365],[58.151563,42.628076],[58.589063,42.778467],[59.985156,42.211719],[60.089648,41.399414],[61.902832,41.093701],[62.483203,39.975635],[63.763672,39.160547],[65.612891,38.238574],[66.60625,37.986719],[66.522266,37.348486],[67.758984,37.172217],[68.350293,38.211035],[68.13252,38.927637],[67.357617,39.216699],[67.426172,39.465576],[68.463281,39.536719],[68.97207,40.089941],[68.630664,40.16709],[69.274902,40.198096],[69.357227,40.767383],[69.712891,40.656982],[70.401953,41.035107],[70.751074,40.721777],[70.371582,40.384131],[70.958008,40.238867],[71.69248,40.152344],[73.136914,40.810645],[72.187305,41.025928],[71.664941,41.541211],[71.393066,41.123389],[70.200879,41.514453],[71.228516,42.162891],[70.946777,42.248682]]]}},{type:"Feature",properties:{name:"乌拉圭",full_name:"乌拉圭东岸共和国",iso_a2:"UY",iso_a3:"URY",iso_n3:"858"},geometry:{type:"Polygon",coordinates:[[[-53.370605,-33.742188],[-53.531348,-33.170898],[-53.125586,-32.736719],[-53.761719,-32.056836],[-55.603027,-30.850781],[-56.004687,-31.079199],[-56.044824,-30.777637],[-56.832715,-30.107227],[-57.608887,-30.187793],[-58.201172,-32.47168],[-58.092676,-32.967383],[-58.363525,-33.182324],[-58.438135,-33.719141],[-57.829102,-34.477344],[-57.170703,-34.452344],[-56.249951,-34.90127],[-54.902295,-34.932813],[-53.785303,-34.380371],[-53.370605,-33.742188]]]}},{type:"Feature",properties:{name:"密克罗尼西亚",full_name:"密克罗尼西亚联邦",iso_a2:"FM",iso_a3:"FSM",iso_n3:"583"},geometry:{type:"Polygon",coordinates:[[[158.314844,6.813672],[158.294629,6.951074],[158.134766,6.944824],[158.314844,6.813672]]]}},{type:"Feature",properties:{name:"马绍尔群岛",full_name:"马绍尔群岛共和国",iso_a2:"MH",iso_a3:"MHL",iso_n3:"584"},geometry:{type:"Polygon",coordinates:[[[171.101953,7.138232],[171.035742,7.156104],[171.235352,7.06875],[171.39375,7.110938],[171.101953,7.138232]]]}},{type:"Feature",properties:{name:"北马里亚纳群岛",full_name:"北马里亚纳群岛联邦（美国）",iso_a2:"MP",iso_a3:"MNP",iso_n3:"580"},geometry:{type:"Polygon",coordinates:[[[145.751953,15.133154],[145.821875,15.265381],[145.713184,15.215283],[145.751953,15.133154]]]}},{type:"Feature",properties:{name:"美属维尔京群岛",full_name:"美属维尔京群岛",iso_a2:"VI",iso_a3:"VIR",iso_n3:"850"},geometry:{type:"Polygon",coordinates:[[[-64.765625,17.794336],[-64.889111,17.701709],[-64.580469,17.750195],[-64.765625,17.794336]]]}},{type:"Feature",properties:{name:"关岛",full_name:"关岛",iso_a2:"GU",iso_a3:"GUM",iso_n3:"316"},geometry:{type:"Polygon",coordinates:[[[144.741797,13.259277],[144.875391,13.614648],[144.649316,13.428711],[144.741797,13.259277]]]}},{type:"Feature",properties:{name:"美属萨摩亚",full_name:"美属萨摩亚",iso_a2:"AS",iso_a3:"ASM",iso_n3:"016"},geometry:{type:"Polygon",coordinates:[[[-170.72627,-14.351172],[-170.568115,-14.266797],[-170.820508,-14.312109],[-170.72627,-14.351172]]]}},{type:"Feature",properties:{name:"波多黎各",full_name:"波多黎各自由邦",iso_a2:"PR",iso_a3:"PRI",iso_n3:"630"},geometry:{type:"Polygon",coordinates:[[[-66.129395,18.444922],[-67.158643,18.499219],[-67.196875,17.994189],[-65.970801,17.974365],[-65.62085,18.242334],[-66.129395,18.444922]]]}},{type:"Feature",properties:{name:"美国",full_name:"美利坚合众国",iso_a2:"US",iso_a3:"USA",iso_n3:"840"},geometry:{type:"MultiPolygon",coordinates:[[[[-171.463037,63.640039],[-171.631836,63.351221],[-170.848389,63.444385],[-169.676367,62.956104],[-168.761328,63.21377],[-170.299365,63.680615],[-171.463037,63.640039]]],[[[-166.135449,60.383545],[-167.436426,60.206641],[-166.14873,59.764111],[-165.591797,59.913135],[-166.135449,60.383545]]],[[[-152.898047,57.823926],[-153.841553,57.862842],[-153.687695,57.305127],[-154.116162,57.651221],[-154.673193,57.446094],[-154.338965,56.920898],[-154.24375,57.143018],[-153.793213,56.989502],[-154.027344,56.777979],[-152.679053,57.345117],[-152.940771,57.498096],[-152.216211,57.577002],[-152.898047,57.823926]]],[[[-130.025098,55.888232],[-130.097852,56.109277],[-131.824268,56.58999],[-133.401123,58.410889],[-135.475928,59.793262],[-137.438574,58.903125],[-139.185156,60.083594],[-139.079248,60.343701],[-141.002148,60.300244],[-141.002148,64.975537],[-141.002148,69.650781],[-143.218311,70.11626],[-145.197363,70.008691],[-149.269434,70.500781],[-151.944678,70.4521],[-152.491211,70.880957],[-154.195215,70.801123],[-155.166846,71.099219],[-155.973535,70.841992],[-155.579443,71.121094],[-156.470215,71.407666],[-157.909375,70.860107],[-159.680908,70.786768],[-159.865674,70.278857],[-160.117139,70.591211],[-162.073877,70.161963],[-161.880957,70.331738],[-163.86792,69.03667],[-166.209082,68.885352],[-166.786279,68.359619],[-164.125195,67.606738],[-163.531836,67.102588],[-161.719922,67.020557],[-161.856689,66.700342],[-160.360889,66.6125],[-160.231689,66.420264],[-161.591016,66.459521],[-162.361621,66.947314],[-161.916895,66.411816],[-161.034277,66.188818],[-163.695361,66.083838],[-163.638232,66.574658],[-164.460498,66.588428],[-168.088379,65.657764],[-166.157031,65.28584],[-166.928418,65.15708],[-166.142773,64.582764],[-163.144336,64.423828],[-163.203906,64.652002],[-162.807031,64.374219],[-161.759375,64.81626],[-160.855908,64.755615],[-161.490723,64.433789],[-160.778564,63.818945],[-161.099707,63.55791],[-162.282812,63.529199],[-163.287842,63.046436],[-164.409033,63.215039],[-164.757861,62.496729],[-166.078809,61.803125],[-165.565869,61.102344],[-165.273633,61.274854],[-164.868994,61.111768],[-165.114844,60.932812],[-163.749023,60.969727],[-163.420947,60.757422],[-164.372363,60.591846],[-164.805176,60.892041],[-165.353809,60.541211],[-163.680371,59.801514],[-162.570752,59.989746],[-162.684961,60.268945],[-161.962012,60.695361],[-162.421338,60.283984],[-161.828711,59.588623],[-161.981055,59.146143],[-161.644385,59.109668],[-162.144922,58.644238],[-160.363135,59.051172],[-158.950684,58.404541],[-158.809473,58.973877],[-158.080518,58.977441],[-158.503174,58.850342],[-158.190918,58.614258],[-156.808887,59.134277],[-157.523633,58.421338],[-157.193701,58.194189],[-157.610889,58.05083],[-157.461914,57.506201],[-158.320947,57.2979],[-158.675146,56.794873],[-160.302051,56.314111],[-160.291699,55.805078],[-161.697314,55.907227],[-163.278809,55.121826],[-163.335303,54.83916],[-163.131104,54.916553],[-163.119629,55.064697],[-162.674365,54.996582],[-162.630371,55.24668],[-162.073975,55.139307],[-161.516943,55.618408],[-161.381934,55.371289],[-159.771387,55.841113],[-159.659668,55.625928],[-158.275635,56.19624],[-158.414404,56.43584],[-156.629004,57.009961],[-156.435889,57.359961],[-154.247021,58.159424],[-153.437598,58.754834],[-154.17832,59.155566],[-152.660107,59.997217],[-153.025,60.295654],[-152.540918,60.26543],[-151.593506,60.979639],[-149.433545,61.500781],[-150.053271,61.171094],[-149.075098,60.876416],[-150.44126,61.023584],[-151.356445,60.722949],[-151.853223,59.78208],[-151.046484,59.771826],[-151.884619,59.386328],[-151.738184,59.188525],[-150.934521,59.249121],[-149.713867,59.91958],[-149.598047,59.770459],[-149.395264,60.105762],[-148.430713,59.989111],[-147.964111,60.484863],[-148.640137,60.489453],[-148.256738,60.675293],[-148.556152,60.827002],[-147.751855,61.218945],[-147.891113,60.889893],[-146.284912,61.112646],[-146.570459,60.72915],[-145.674902,60.651123],[-145.898877,60.478174],[-145.248291,60.380127],[-144.691113,60.669092],[-144.901318,60.335156],[-144.147217,60.016406],[-141.40874,60.117676],[-141.408301,59.902783],[-140.419824,59.710742],[-139.431445,60.012256],[-138.988086,59.83501],[-139.286719,59.610938],[-139.512305,59.953564],[-139.773291,59.527295],[-136.607422,58.243994],[-136.061475,58.452734],[-136.989014,59.034473],[-136.22583,58.765479],[-136.150049,59.048096],[-135.897559,58.400195],[-135.090234,58.24585],[-135.363672,59.419434],[-134.776123,58.453857],[-134.208838,58.232959],[-133.876758,58.518164],[-134.031104,58.072168],[-133.194336,57.877686],[-133.535205,57.832959],[-133.117041,57.566211],[-133.64873,57.642285],[-133.465869,57.172168],[-131.551367,56.206787],[-132.15542,55.599561],[-131.032764,56.088086],[-130.748193,55.318018],[-131.047852,55.157666],[-130.575342,54.769678],[-130.214062,55.025879],[-130.025098,55.888232]]],[[[-163.476025,54.980713],[-164.478613,54.906836],[-164.823438,54.419092],[-163.083252,54.668994],[-163.378955,54.815527],[-163.476025,54.980713]]],[[[-133.305078,55.54375],[-133.737109,55.496924],[-133.650195,55.269287],[-133.305078,55.54375]]],[[[-131.339746,55.079834],[-131.56543,55.264111],[-131.329541,54.887744],[-131.339746,55.079834]]],[[[-132.112354,56.109375],[-132.379834,56.498779],[-132.659912,56.078174],[-132.287305,55.929395],[-132.112354,56.109375]]],[[[-130.97915,55.48916],[-131.269238,55.955371],[-131.7625,55.16582],[-131.447559,55.408789],[-131.187891,55.206299],[-130.97915,55.48916]]],[[[-133.366211,57.003516],[-133.979443,57.00957],[-133.48418,56.451758],[-133.158154,56.495166],[-133.328955,56.830078],[-132.95918,56.677051],[-133.366211,57.003516]]],[[[-132.862256,54.894434],[-133.429053,55.303809],[-132.705811,54.68418],[-132.862256,54.894434]]],[[[-160.684912,55.314795],[-160.795068,55.145215],[-160.487549,55.184863],[-160.684912,55.314795]]],[[[-177.148193,51.716748],[-177.110059,51.92876],[-177.670215,51.701074],[-177.148193,51.716748]]],[[[-134.969775,57.351416],[-135.448682,57.534375],[-135.812305,57.009521],[-135.454932,57.249414],[-134.681885,56.216162],[-134.969775,57.351416]]],[[[-134.680273,58.16167],[-134.923486,58.354639],[-134.516016,57.042578],[-133.911133,57.352539],[-134.292334,58.044727],[-133.822754,57.628662],[-134.240088,58.143994],[-134.680273,58.16167]]],[[[-135.730371,58.244238],[-136.568604,57.972168],[-135.910791,57.446582],[-135.564209,57.666406],[-134.931494,57.481152],[-135.338477,57.768652],[-134.954688,58.015332],[-135.613232,57.991846],[-135.730371,58.244238]]],[[[-133.566113,56.339209],[-133.742529,55.964844],[-133.241504,55.920801],[-133.680176,55.785156],[-133.033398,55.589697],[-133.118555,55.327637],[-132.064746,54.713135],[-131.976416,55.208594],[-132.631299,55.473193],[-132.172705,55.480615],[-133.566113,56.339209]]],[[[-133.9896,56.844971],[-134.373682,56.838672],[-134.1896,56.076953],[-133.738379,56.650439],[-133.9896,56.844971]]],[[[-152.416943,58.360205],[-152.841113,58.416406],[-153.381348,58.087207],[-152.068896,58.17793],[-152.416943,58.360205]]],[[[-167.964355,53.345117],[-167.828076,53.507959],[-168.287695,53.500146],[-169.088916,52.832031],[-167.964355,53.345117]]],[[[-166.615332,53.900928],[-167.038086,53.942188],[-166.808984,53.646143],[-167.780859,53.300244],[-166.354541,53.673535],[-166.230859,53.932617],[-166.615332,53.900928]]],[[[-173.55332,52.136279],[-173.99248,52.12334],[-173.0229,52.07915],[-173.55332,52.136279]]],[[[-174.677393,52.03501],[-174.045605,52.367236],[-175.295557,52.022168],[-174.677393,52.03501]]],[[[-176.593311,51.866699],[-176.961621,51.603662],[-176.452344,51.735693],[-176.593311,51.866699]]],[[[-177.879053,51.649707],[-177.644482,51.82627],[-178.168262,51.903027],[-177.879053,51.649707]]],[[[172.811816,53.012988],[172.494824,52.937891],[172.935156,52.7521],[173.436035,52.852051],[172.811816,53.012988]]],[[[-155.581348,19.012012],[-154.804199,19.524463],[-155.831641,20.27583],[-156.048682,19.749951],[-155.881299,19.070508],[-155.581348,19.012012]]],[[[-156.486816,20.932568],[-156.697754,20.949072],[-156.408789,20.605176],[-155.989844,20.757129],[-156.486816,20.932568]]],[[[-157.799365,21.456641],[-157.9625,21.701367],[-158.273145,21.585254],[-158.110352,21.318604],[-157.6354,21.307617],[-157.799365,21.456641]]],[[[-159.372754,21.932373],[-159.352051,22.21958],[-159.78916,22.041797],[-159.372754,21.932373]]],[[[-74.708887,45.003857],[-76.151172,44.303955],[-76.819971,43.628809],[-78.72041,43.624951],[-79.171875,43.466553],[-79.036719,42.802344],[-82.690039,41.675195],[-83.149658,42.141943],[-82.545312,42.624707],[-82.137842,43.570898],[-82.551074,45.347363],[-83.592676,45.817139],[-83.615967,46.116846],[-83.977783,46.084912],[-84.149463,46.542773],[-84.561768,46.457373],[-84.875977,46.899902],[-88.378174,48.303076],[-89.455664,47.99624],[-90.916064,48.209131],[-91.518311,48.058301],[-92.99624,48.611816],[-94.620898,48.742627],[-95.155273,49.369678],[-95.162061,48.991748],[-97.529834,48.993164],[-106.483838,48.993115],[-114.585107,48.993066],[-122.78877,48.993018],[-122.241992,48.010742],[-122.353809,47.371582],[-122.701953,47.110889],[-123.027588,47.138916],[-122.577881,47.293164],[-122.532812,47.919727],[-123.139062,47.386084],[-122.656641,47.881152],[-122.778613,48.137598],[-124.709961,48.380371],[-124.139258,46.954688],[-123.842871,46.963184],[-124.112549,46.862695],[-124.072754,46.279443],[-123.220605,46.153613],[-123.989307,46.219385],[-124.14873,43.691748],[-124.539648,42.812891],[-124.071924,41.459521],[-124.324023,40.251953],[-122.998779,37.988623],[-122.521338,37.826416],[-122.393359,38.144824],[-121.525342,38.055908],[-122.314258,38.007324],[-122.070508,37.478271],[-122.445605,37.797998],[-122.499219,37.542627],[-121.807422,36.851221],[-121.877393,36.331055],[-120.659082,35.122412],[-120.644678,34.57998],[-118.506201,34.017383],[-118.410449,33.743945],[-117.467432,33.295508],[-117.128271,32.53335],[-114.724756,32.715332],[-114.835938,32.508301],[-111.041992,31.324219],[-108.214453,31.329443],[-108.211816,31.779346],[-106.44541,31.768408],[-104.978809,30.645947],[-104.110596,29.386133],[-103.168311,28.998193],[-102.614941,29.752344],[-101.440381,29.776855],[-99.505322,27.54834],[-99.107764,26.446924],[-97.14624,25.961475],[-97.485107,27.237402],[-97.768457,27.45752],[-97.439111,27.328271],[-97.156494,28.144336],[-96.421094,28.457324],[-96.640039,28.708789],[-96.011035,28.631934],[-96.234521,28.488965],[-95.273486,28.963867],[-94.888281,29.370557],[-95.022852,29.702344],[-94.52627,29.547949],[-94.759619,29.384277],[-93.890479,29.689355],[-93.841455,29.979736],[-93.826465,29.725146],[-92.26084,29.556836],[-91.893164,29.836035],[-91.248828,29.564209],[-91.290137,29.288965],[-90.751025,29.130859],[-90.379199,29.295117],[-90.212793,29.104932],[-90.159082,29.537158],[-89.376123,28.981348],[-89.015723,29.202881],[-89.720898,29.619287],[-89.354443,29.820215],[-89.400732,30.046045],[-90.175342,30.029102],[-90.331982,30.277588],[-88.135449,30.366602],[-88.011328,30.694189],[-87.790283,30.291797],[-88.005957,30.230908],[-87.281055,30.339258],[-86.997559,30.570312],[-87.201172,30.339258],[-86.257373,30.493018],[-86.454443,30.399121],[-85.603516,30.286768],[-85.318945,29.680225],[-84.309668,30.064746],[-83.694385,29.925977],[-82.651465,28.8875],[-82.843506,27.845996],[-82.405762,27.862891],[-82.7146,27.499609],[-82.441357,27.059668],[-82.242871,26.848877],[-82.013281,26.961572],[-81.715479,25.983154],[-80.94043,25.264209],[-81.110498,25.138037],[-80.484668,25.229834],[-80.126367,25.833496],[-80.050049,26.807715],[-80.838184,28.757666],[-80.456885,27.900684],[-80.524121,28.486084],[-81.249512,29.793799],[-81.516211,30.801807],[-81.380957,31.353271],[-80.694238,32.215723],[-80.802539,32.448047],[-80.579346,32.287305],[-80.63418,32.511719],[-79.940723,32.667139],[-78.841455,33.724072],[-78.01333,33.911816],[-77.953271,34.168994],[-77.927832,33.939746],[-77.412256,34.730811],[-76.439795,34.84292],[-76.974951,35.025195],[-77.070264,35.154639],[-76.77915,34.990332],[-76.512939,35.27041],[-77.03999,35.527393],[-76.173828,35.35415],[-75.758838,35.843262],[-76.083594,35.690527],[-76.069775,35.970312],[-76.726221,35.957617],[-76.733643,36.22915],[-76.559375,36.015332],[-76.147852,36.279297],[-75.820068,36.112842],[-75.946484,36.659082],[-75.53418,35.819092],[-75.999414,36.912646],[-76.487842,36.897021],[-77.250879,37.329199],[-76.283301,37.052686],[-76.757715,37.50542],[-76.453906,37.273535],[-76.305566,37.571484],[-76.549463,37.669141],[-77.111084,38.165674],[-76.49248,37.682227],[-76.344141,37.675684],[-76.264258,37.893555],[-77.273242,38.351758],[-77.2604,38.6],[-77.030371,38.889258],[-77.23252,38.407715],[-76.341162,38.087012],[-76.668555,38.5375],[-76.394092,38.368994],[-76.57041,39.269336],[-75.958936,39.585059],[-76.341162,38.709668],[-76.016943,38.625098],[-76.264648,38.436426],[-75.858691,38.362061],[-75.659277,37.953955],[-75.934375,37.151904],[-75.03877,38.426367],[-75.187109,38.591113],[-75.088672,38.777539],[-75.392188,39.092773],[-75.587598,39.640771],[-75.07417,39.983496],[-75.524219,39.490186],[-74.897021,39.145459],[-74.954297,38.949951],[-74.794482,39.001904],[-74.0646,39.993115],[-74.079932,39.788135],[-73.972266,40.400342],[-74.264209,40.528613],[-73.969922,41.249707],[-73.987109,40.751367],[-72.924707,41.285156],[-71.522852,41.378955],[-71.390137,41.795312],[-71.168555,41.489404],[-69.948633,41.677148],[-69.977881,41.961279],[-70.108936,42.07832],[-70.001416,41.826172],[-70.42666,41.757275],[-71.046191,42.331104],[-70.612939,42.623242],[-70.733105,43.07002],[-70.178809,43.766357],[-69.226074,43.986475],[-68.762695,44.570752],[-68.53252,44.258643],[-68.450586,44.507617],[-68.056641,44.384326],[-67.19126,44.675586],[-67.124854,45.169434],[-67.802246,45.727539],[-67.806787,47.082812],[-68.235498,47.345947],[-68.937207,47.21123],[-69.242871,47.462988],[-70.865039,45.270703],[-71.327295,45.290088],[-71.517529,45.007568],[-74.708887,45.003857]],[[-122.572754,48.156641],[-122.628613,48.384229],[-122.383154,47.923193],[-122.572754,48.156641]]],[[[-72.509766,40.986035],[-72.274121,41.153027],[-73.573828,40.919629],[-74.014893,40.581201],[-71.903223,41.060693],[-72.509766,40.986035]]],[[[-80.381836,25.142285],[-80.25708,25.347607],[-80.580566,24.954248],[-80.381836,25.142285]]],[[[-84.90791,29.642627],[-84.737158,29.732422],[-85.116748,29.632812],[-84.90791,29.642627]]]]}},{type:"Feature",properties:{name:"南乔治亚和南桑威奇群岛",full_name:"南乔治亚和南桑威奇群岛（英国）",iso_a2:"GS",iso_a3:"SGS",iso_n3:"239"},geometry:{type:"Polygon",coordinates:[[[-37.10332,-54.065625],[-38.017432,-54.008008],[-36.085498,-54.866797],[-35.798584,-54.763477],[-36.326465,-54.251172],[-37.10332,-54.065625]]]}},{type:"Feature",properties:{name:"英属印度洋领地",full_name:"英属印度洋领地",iso_a2:"IO",iso_a3:"IOT",iso_n3:"086"},geometry:{type:"Polygon",coordinates:[[[72.491992,-7.377441],[72.445605,-7.22041],[72.447266,-7.395703],[72.349707,-7.263379],[72.429102,-7.435352],[72.491992,-7.377441]]]}},{type:"Feature",properties:{name:"圣赫勒拿",full_name:"圣赫勒拿岛（英国）",iso_a2:"SH",iso_a3:"SHN",iso_n3:"654"},geometry:{type:"Polygon",coordinates:[[[-5.692139,-15.997754],[-5.707861,-15.906152],[-5.78252,-16.004004],[-5.692139,-15.997754]]]}},{type:"Feature",properties:{name:"皮特凯恩群岛",full_name:"皮特凯恩群岛（英国）",iso_a2:"PN",iso_a3:"PCN",iso_n3:"612"},geometry:{type:"Polygon",coordinates:[[[-128.290088,-24.397363],[-128.330127,-24.323242],[-128.342188,-24.370703],[-128.290088,-24.397363]]]}},{type:"Feature",properties:{name:"安圭拉",full_name:"安圭拉",iso_a2:"AI",iso_a3:"AIA",iso_n3:"660"},geometry:{type:"Polygon",coordinates:[[[-63.001221,18.221777],[-63.026025,18.269727],[-63.16001,18.171387],[-63.001221,18.221777]]]}},{type:"Feature",properties:{name:"马尔维纳斯群岛（福克兰）",full_name:"马尔维纳斯群岛（福克兰）",iso_a2:"FK",iso_a3:"FLK",iso_n3:"238"},geometry:{type:"MultiPolygon",coordinates:[[[[-58.850195,-51.269922],[-59.570801,-51.925391],[-59.395654,-52.308008],[-59.19585,-52.017676],[-58.652783,-52.099219],[-57.791797,-51.636133],[-57.976514,-51.384375],[-58.271582,-51.574707],[-58.850195,-51.269922]]],[[[-60.28623,-51.461914],[-60.568457,-51.357812],[-60.245166,-51.638867],[-60.58252,-51.712695],[-60.238477,-51.771973],[-60.961426,-52.057324],[-60.686377,-52.188379],[-59.268066,-51.427539],[-60.28623,-51.461914]]]]}},{type:"Feature",properties:{name:"开曼群岛",full_name:"开曼群岛",iso_a2:"KY",iso_a3:"CYM",iso_n3:"136"},geometry:{type:"Polygon",coordinates:[[[-81.369531,19.348877],[-81.404785,19.278418],[-81.107129,19.305176],[-81.369531,19.348877]]]}},{type:"Feature",properties:{name:"百慕大",full_name:"百慕大",iso_a2:"BM",iso_a3:"BMU",iso_n3:"060"},geometry:{type:"Polygon",coordinates:[[[-64.730273,32.293457],[-64.668311,32.381934],[-64.862842,32.273877],[-64.730273,32.293457]]]}},{type:"Feature",properties:{name:"英属维尔京群岛",full_name:"英属维尔京群岛",iso_a2:"VG",iso_a3:"VGB",iso_n3:"092"},geometry:{type:"Polygon",coordinates:[[[-64.395215,18.4646],[-64.324658,18.51748],[-64.426074,18.513086],[-64.395215,18.4646]]]}},{type:"Feature",properties:{name:"特克斯和凯科斯群岛",full_name:"特克斯和凯科斯群岛",iso_a2:"TC",iso_a3:"TCA",iso_n3:"796"},geometry:{type:"Polygon",coordinates:[[[-71.661426,21.765234],[-71.668359,21.833447],[-71.847656,21.843457],[-71.661426,21.765234]]]}},{type:"Feature",properties:{name:"蒙特塞拉特",full_name:"蒙特塞拉特",iso_a2:"MS",iso_a3:"MSR",iso_n3:"500"},geometry:{type:"Polygon",coordinates:[[[-62.148438,16.740332],[-62.191357,16.804395],[-62.221631,16.699512],[-62.148438,16.740332]]]}},{type:"Feature",properties:{name:"泽西岛",full_name:"泽西岛",iso_a2:"JE",iso_a3:"JEY",iso_n3:"832"},geometry:{type:"Polygon",coordinates:[[[-2.018652,49.23125],[-2.220508,49.266357],[-2.23584,49.176367],[-2.018652,49.23125]]]}},{type:"Feature",properties:{name:"根西岛",full_name:"根西岛",iso_a2:"GG",iso_a3:"GGY",iso_n3:"831"},geometry:{type:"Polygon",coordinates:[[[-2.512305,49.494531],[-2.639014,49.450928],[-2.547363,49.428711],[-2.512305,49.494531]]]}},{type:"Feature",properties:{name:"马恩岛",full_name:"马恩岛",iso_a2:"IM",iso_a3:"IMN",iso_n3:"833"},geometry:{type:"Polygon",coordinates:[[[-4.412061,54.185352],[-4.424707,54.407178],[-4.785352,54.073047],[-4.412061,54.185352]]]}},{type:"Feature",properties:{name:"英国",full_name:"大不列颠及北爱尔兰联合王国",iso_a2:"GB",iso_a3:"GBR",iso_n3:"826"},geometry:{type:"MultiPolygon",coordinates:[[[[-2.667676,51.622998],[-2.433057,51.740723],[-3.135986,51.205029],[-4.188184,51.188525],[-5.622119,50.050684],[-4.19458,50.393311],[-3.679785,50.239941],[-2.999414,50.716602],[-2.03584,50.603076],[-1.416455,50.896875],[.205078,50.763037],[.960156,50.925879],[1.414941,51.363281],[.424512,51.465625],[1.274414,51.845361],[1.743359,52.578516],[1.271289,52.924561],[.045898,52.905615],[.270996,53.335498],[-.659912,53.724023],[.115332,53.609277],[-.084375,54.118066],[-1.232422,54.703711],[-1.655371,55.570361],[-2.599316,56.027295],[-3.789062,56.095215],[-2.674268,56.253418],[-3.309961,56.363477],[-2.592676,56.561572],[-1.77793,57.49375],[-2.074072,57.702393],[-4.134521,57.577734],[-3.053076,58.634814],[-4.924658,58.588379],[-5.413184,58.069727],[-5.157227,57.881348],[-5.744922,57.668311],[-5.561914,57.232715],[-5.730615,56.853076],[-6.132764,56.718018],[-5.652441,56.531982],[-5.188379,56.758057],[-5.768213,55.362646],[-4.996973,56.23335],[-5.228223,55.886328],[-4.800293,56.15835],[-4.584082,55.938672],[-5.135498,54.85752],[-4.91123,54.689453],[-3.03623,54.953076],[-3.592041,54.564355],[-3.165967,54.12793],[-2.867578,54.177246],[-3.0646,53.512842],[-2.749512,53.310205],[-4.268555,53.144531],[-4.683057,52.806152],[-4.101465,52.915479],[-4.149365,52.32627],[-5.262305,51.880176],[-3.562354,51.413818],[-2.667676,51.622998]]],[[[-4.196777,53.321436],[-4.567871,53.386475],[-4.373047,53.13418],[-4.196777,53.321436]]],[[[-1.308105,60.5375],[-1.66377,60.28252],[-1.299463,59.878662],[-1.308105,60.5375]]],[[[-3.057422,59.029639],[-3.310352,59.130811],[-2.793018,58.906934],[-3.057422,59.029639]]],[[[-5.777881,56.344336],[-6.286328,56.611865],[-6.313428,56.293652],[-5.777881,56.344336]]],[[[-6.198682,58.363281],[-7.085254,58.182178],[-6.983105,57.75],[-6.198682,58.363281]]],[[[-6.144727,57.50498],[-6.305957,57.671973],[-6.761133,57.442383],[-5.949072,57.045166],[-5.672461,57.252686],[-6.135547,57.314258],[-6.144727,57.50498]]],[[[-6.218018,54.088721],[-5.47041,54.500195],[-6.035791,55.144531],[-7.218652,55.091992],[-8.118262,54.414258],[-7.606543,54.143848],[-7.007715,54.406689],[-6.649805,54.058643],[-6.218018,54.088721]]]]}},{type:"Feature",properties:{name:"阿联酋",full_name:"阿拉伯联合酋长国",iso_a2:"AE",iso_a3:"ARE",iso_n3:"784"},geometry:{type:"Polygon",coordinates:[[[56.297852,25.650684],[56.080469,26.062646],[54.147949,24.171191],[52.118555,23.971094],[51.568359,24.286182],[52.555078,22.932812],[55.18584,22.704102],[55.468457,23.941113],[55.985156,24.063379],[55.76084,24.242676],[55.795703,24.868115],[56.000586,24.953223],[56.063867,24.73877],[56.387988,24.979199],[56.297852,25.650684]]]}},{type:"Feature",properties:{name:"乌克兰",full_name:"乌克兰",iso_a2:"UA",iso_a3:"UKR",iso_n3:"804"},geometry:{type:"Polygon",coordinates:[[[38.214355,47.091455],[38.368848,47.609961],[39.778711,47.887549],[39.95791,48.268896],[39.644727,48.591211],[40.003613,48.82207],[39.686523,49.00791],[40.108789,49.251562],[40.080664,49.576855],[38.258594,50.052344],[38.046875,49.92002],[37.422852,50.411475],[36.619434,50.209229],[35.591113,50.36875],[35.311914,51.043896],[34.213867,51.255371],[34.397852,51.78042],[33.735254,52.344775],[31.763379,52.101074],[30.755273,51.895166],[30.544531,51.265039],[30.160742,51.477881],[29.346484,51.382568],[29.102051,51.627539],[28.73125,51.433398],[27.7,51.477979],[27.141992,51.752051],[25.267188,51.937744],[23.605273,51.51792],[24.089941,50.530469],[22.706152,49.606201],[22.852051,49.062744],[22.538672,49.072705],[22.131836,48.405322],[22.87666,47.947266],[23.202637,48.084521],[24.979102,47.724121],[26.618945,48.259863],[27.549219,48.477734],[29.125391,47.964551],[29.134863,47.489697],[30.131055,46.423096],[28.958398,46.458496],[28.947754,46.049951],[28.2125,45.450439],[29.705859,45.259912],[29.628418,45.722461],[30.219043,45.866748],[30.796289,46.552002],[31.563379,46.777295],[31.872852,46.649756],[31.75918,47.212842],[32.044336,46.64248],[32.578027,46.615625],[31.554883,46.554297],[32.008496,46.42998],[31.83125,46.281689],[33.594141,46.09624],[33.806667,46.208288],[35.001674,45.733383],[34.849609,46.189893],[35.230371,46.440625],[35.014551,46.106006],[35.827148,46.624316],[38.214355,47.091455]]]}},{type:"Feature",properties:{name:"乌干达",full_name:"乌干达共和国",iso_a2:"UG",iso_a3:"UGA",iso_n3:"800"},geometry:{type:"Polygon",coordinates:[[[33.903223,-1.002051],[33.943164,.173779],[34.978223,1.773633],[34.437695,3.650586],[33.976074,4.220215],[33.489355,3.755078],[32.997266,3.880176],[32.135938,3.519727],[31.798047,3.802637],[31.152344,3.785596],[30.838574,3.490723],[30.728613,2.455371],[31.252734,2.04458],[29.942871,.819238],[29.576953,-1.387891],[29.930078,-1.469922],[30.509961,-1.067285],[33.903223,-1.002051]]]}},{type:"Feature",properties:{name:"土库曼斯坦",full_name:"土库曼斯坦",iso_a2:"TM",iso_a3:"TKM",iso_n3:"795"},geometry:{type:"Polygon",coordinates:[[[55.977441,41.322217],[55.434375,41.296289],[54.120996,42.335205],[53.055859,42.147754],[52.493848,41.780371],[52.850391,41.200293],[52.97002,41.976221],[53.804688,42.117627],[54.703711,41.071143],[54.377344,40.693262],[53.87002,40.648682],[52.943457,41.038086],[52.733691,40.39873],[53.035547,39.774414],[52.9875,39.987598],[53.487305,39.909375],[53.603125,39.546973],[53.235645,39.608545],[53.156641,39.26499],[53.70459,39.20957],[53.868652,38.949268],[53.91416,37.343555],[54.699414,37.470166],[55.380859,38.051123],[57.193555,38.216406],[58.261621,37.66582],[59.301758,37.510645],[60.341309,36.637646],[61.119629,36.642578],[61.262012,35.61958],[62.307813,35.170801],[62.688086,35.255322],[63.056641,35.445801],[63.12998,35.846191],[64.511035,36.340674],[64.816309,37.13208],[65.55498,37.251172],[65.765039,37.569141],[66.522266,37.348486],[66.60625,37.986719],[65.612891,38.238574],[63.763672,39.160547],[62.483203,39.975635],[61.902832,41.093701],[60.089648,41.399414],[59.985156,42.211719],[58.589063,42.778467],[58.151563,42.628076],[58.474414,42.299365],[58.028906,42.487646],[56.964063,41.856543],[57.017969,41.263477],[55.977441,41.322217]]]}},{type:"Feature",properties:{name:"土耳其",full_name:"土耳其共和国",iso_a2:"TR",iso_a3:"TUR",iso_n3:"792"},geometry:{type:"MultiPolygon",coordinates:[[[[41.510059,41.51748],[40.265234,40.961328],[39.426367,41.106445],[38.381055,40.924512],[36.405371,41.274609],[36.051758,41.682568],[35.297754,41.728516],[35.006445,42.063281],[33.381348,42.017578],[31.254883,41.107617],[29.148145,41.221045],[29.113867,40.937842],[29.849219,40.760107],[28.958008,40.630566],[29.007129,40.389746],[26.738086,40.400244],[26.181348,39.990088],[26.113086,39.467383],[26.899219,39.549658],[26.681836,39.292236],[27.013672,38.886865],[26.763672,38.709619],[27.144238,38.451953],[26.674219,38.335742],[26.441309,38.641211],[26.290723,38.277197],[27.232422,37.978662],[27.067969,37.65791],[27.535059,37.163867],[27.262988,36.976562],[28.242383,37.029053],[27.453906,36.712158],[28.969629,36.715332],[29.689062,36.156689],[30.446094,36.269873],[30.644043,36.865674],[31.240625,36.821729],[32.794824,36.035889],[33.694727,36.181982],[34.703613,36.816797],[35.393164,36.575195],[36.048926,36.910596],[35.892676,35.916553],[36.153613,35.833887],[36.636719,36.233984],[36.658594,36.802539],[37.436328,36.643311],[38.191699,36.901562],[39.356641,36.681592],[40.705664,37.097705],[42.202734,37.297266],[42.358984,37.108594],[42.774609,37.371875],[44.114453,37.301855],[44.281836,36.978027],[44.765137,37.142432],[44.589941,37.710352],[44.211328,37.908057],[44.449902,38.334229],[44.023242,39.377441],[44.389355,39.422119],[44.587109,39.768555],[44.817188,39.650439],[44.768262,39.703516],[43.666211,40.126367],[43.439453,41.107129],[42.754102,41.578906],[41.510059,41.51748]]],[[[28.014453,41.969043],[27.011719,42.058643],[26.320898,41.716553],[26.624902,41.401758],[26.038965,40.726758],[26.79209,40.626611],[26.202734,40.075391],[27.499414,40.973145],[28.95625,41.008203],[29.057227,41.229736],[28.197852,41.554492],[28.014453,41.969043]]]]}},{type:"Feature",properties:{name:"突尼斯",full_name:"突尼斯共和国",iso_a2:"TN",iso_a3:"TUN",iso_n3:"788"},geometry:{type:"Polygon",coordinates:[[[11.50459,33.181934],[10.049023,34.056299],[11.120117,35.240283],[10.476562,36.175146],[11.053906,37.07251],[10.412305,36.731836],[10.196387,37.205859],[9.830273,37.135352],[9.687988,37.340381],[8.576563,36.937207],[8.207617,36.518945],[8.245605,34.734082],[7.500195,33.832471],[8.333398,32.543604],[9.044043,32.072363],[9.51875,30.229395],[10.216406,30.783203],[10.274609,31.684961],[11.50498,32.413672],[11.50459,33.181934]]]}},{type:"Feature",properties:{name:"特立尼达和多巴哥",full_name:"特立尼达和多巴哥共和国",iso_a2:"TT",iso_a3:"TTO",iso_n3:"780"},geometry:{type:"Polygon",coordinates:[[[-61.012109,10.134326],[-60.917627,10.840234],[-61.651172,10.718066],[-61.499316,10.268555],[-61.906104,10.069141],[-61.012109,10.134326]]]}},{type:"Feature",properties:{name:"汤加",full_name:"汤加王国",iso_a2:"TO",iso_a3:"TON",iso_n3:"776"},geometry:{type:"Polygon",coordinates:[[[-175.161914,-21.169336],[-175.362354,-21.106836],[-175.156592,-21.263672],[-175.161914,-21.169336]]]}},{type:"Feature",properties:{name:"多哥",full_name:"多哥共和国",iso_a2:"TG",iso_a3:"TGO",iso_n3:"768"},geometry:{type:"Polygon",coordinates:[[[.900488,10.993262],[-.068604,11.115625],[-.086328,10.673047],[.380859,10.291846],[.233398,9.463525],[.525684,9.398486],[.372559,8.759277],[.686328,8.354883],[.525586,6.850928],[1.187207,6.089404],[1.622656,6.216797],[1.77793,6.294629],[1.530957,6.992432],[1.600195,9.050049],[1.330078,9.996973],[.763379,10.38667],[.900488,10.993262]]]}},{type:"Feature",properties:{name:"东帝汶",full_name:"东帝汶民主共和国",iso_a2:"TL",iso_a3:"TLS",iso_n3:"626"},geometry:{type:"MultiPolygon",coordinates:[[[[125.068164,-9.511914],[127.296094,-8.424512],[125.381836,-8.575391],[124.922266,-8.94248],[125.149023,-9.042578],[124.960156,-9.21377],[125.068164,-9.511914]]],[[[124.036328,-9.341602],[124.282324,-9.42793],[124.444434,-9.190332],[124.036328,-9.341602]]]]}},{type:"Feature",properties:{name:"泰国",full_name:"泰王国",iso_a2:"TH",iso_a3:"THA",iso_n3:"764"},geometry:{type:"MultiPolygon",coordinates:[[[[98.409082,7.902051],[98.32207,8.166309],[98.296289,7.776074],[98.409082,7.902051]]],[[[100.122461,20.31665],[99.458887,20.363037],[99.485938,20.149854],[99.074219,20.099365],[98.916699,19.7729],[98.015039,19.749512],[97.745898,18.588184],[97.373926,18.517969],[98.660742,16.33042],[98.888281,16.351904],[98.202148,14.975928],[99.136816,13.716699],[99.123926,13.030762],[99.614746,11.781201],[98.757227,10.660937],[98.702539,10.190381],[98.241797,8.767871],[98.305469,8.226221],[98.703516,8.256738],[100.119141,6.441992],[100.261426,6.682715],[101.053516,6.242578],[101.113965,5.636768],[101.556055,5.907764],[101.873633,5.825293],[102.101074,6.242236],[101.497949,6.865283],[100.423535,7.187842],[100.160742,7.599268],[100.256641,7.774902],[100.545215,7.226904],[100.279395,8.268506],[99.835547,9.288379],[99.253906,9.265234],[99.165039,10.319824],[99.989062,12.170801],[99.990527,13.243457],[100.235645,13.484473],[100.962695,13.431982],[100.897754,12.653809],[101.835742,12.640381],[102.594141,12.203027],[102.933887,11.706689],[102.336328,13.560303],[103.199414,14.332617],[105.183301,14.34624],[105.497363,14.590674],[105.641016,15.656543],[104.819336,16.466064],[104.739648,17.46167],[103.949609,18.318994],[103.366992,18.42334],[102.680078,17.824121],[102.101465,18.210645],[100.955859,17.541113],[101.211914,19.54834],[100.513574,19.553467],[100.519531,20.17793],[100.122461,20.31665]]]]}},{type:"Feature",properties:{name:"坦桑尼亚",full_name:"坦桑尼亚联合共和国",iso_a2:"TZ",iso_a3:"TZA",iso_n3:"834"},geometry:{type:"MultiPolygon",coordinates:[[[[39.496484,-6.174609],[39.308984,-5.721973],[39.182324,-6.172559],[39.480957,-6.453711],[39.496484,-6.174609]]],[[[39.865039,-4.906152],[39.673438,-4.927051],[39.749316,-5.443848],[39.865039,-4.906152]]],[[[32.919922,-9.407422],[33.888867,-9.670117],[33.995605,-9.49541],[34.320898,-9.731543],[34.60791,-11.080469],[34.959473,-11.578125],[35.911328,-11.454688],[36.305664,-11.706348],[37.372852,-11.710449],[37.920215,-11.294727],[38.491797,-11.413281],[40.463574,-10.464355],[39.725195,-10.000488],[39.304004,-8.443848],[39.288477,-7.517871],[39.546094,-7.024023],[38.804688,-6.070117],[39.221777,-4.692383],[37.608203,-3.49707],[37.643848,-3.04541],[33.903223,-1.002051],[30.509961,-1.067285],[30.876562,-2.143359],[30.553613,-2.400098],[30.433496,-2.874512],[30.780273,-2.984863],[30.790234,-3.274609],[29.947266,-4.307324],[29.403223,-4.449316],[29.54082,-6.313867],[30.212695,-7.037891],[30.751172,-8.193652],[31.033398,-8.597656],[32.919922,-9.407422]]]]}},{type:"Feature",properties:{name:"塔吉克斯坦",full_name:"塔吉克斯坦共和国",iso_a2:"TJ",iso_a3:"TJK",iso_n3:"762"},geometry:{type:"Polygon",coordinates:[[[67.758984,37.172217],[68.067773,36.949805],[68.911816,37.333936],[69.303906,37.116943],[69.49209,37.553076],[70.188672,37.582471],[70.214648,37.924414],[70.878906,38.456396],[71.255859,38.306982],[71.278516,37.918408],[71.582227,37.910107],[71.43291,37.127539],[71.665625,36.696924],[73.38291,37.462256],[73.720605,37.41875],[73.653516,37.239355],[74.349023,37.41875],[74.891309,37.231641],[75.11875,37.385693],[74.812305,38.460303],[73.80166,38.606885],[73.631641,39.448877],[72.22998,39.20752],[71.470312,39.603662],[70.799316,39.394727],[70.501172,39.587354],[69.297656,39.524805],[69.530273,40.097314],[69.966797,40.202246],[70.515137,39.949902],[70.958008,40.238867],[70.371582,40.384131],[70.751074,40.721777],[70.401953,41.035107],[69.712891,40.656982],[69.357227,40.767383],[69.274902,40.198096],[68.630664,40.16709],[68.97207,40.089941],[68.463281,39.536719],[67.426172,39.465576],[67.357617,39.216699],[68.13252,38.927637],[68.350293,38.211035],[67.758984,37.172217]]]}},{type:"Feature",properties:{name:"叙利亚",full_name:"阿拉伯叙利亚共和国",iso_a2:"SY",iso_a3:"SYR",iso_n3:"760"},geometry:{type:"Polygon",coordinates:[[[35.892676,35.916553],[35.97627,34.629199],[36.383887,34.65791],[36.584961,34.22124],[35.869141,33.431738],[35.816125,33.361879],[35.787305,32.734912],[36.818359,32.317285],[38.773535,33.372217],[40.987012,34.429053],[41.295996,36.38335],[42.358984,37.108594],[42.202734,37.297266],[40.705664,37.097705],[39.356641,36.681592],[38.191699,36.901562],[37.436328,36.643311],[36.658594,36.802539],[36.636719,36.233984],[36.153613,35.833887],[35.892676,35.916553]]]}},{type:"Feature",properties:{name:"瑞士",full_name:"瑞士联邦",iso_a2:"CH",iso_a3:"CHE",iso_n3:"756"},geometry:{type:"Polygon",coordinates:[[[9.524023,47.524219],[8.572656,47.775635],[8.454004,47.596191],[7.615625,47.592725],[6.968359,47.453223],[5.97002,46.214697],[6.758105,46.415771],[7.021094,45.925781],[7.787891,45.921826],[8.422559,46.446045],[9.02373,45.845703],[9.260156,46.475195],[10.12832,46.238232],[10.452832,46.864941],[9.580273,47.057373],[9.487695,47.062256],[9.527539,47.270752],[9.524023,47.524219]]]}},{type:"Feature",properties:{name:"瑞典",full_name:"瑞典",iso_a2:"SE",iso_a3:"SWE",iso_n3:"752"},geometry:{type:"MultiPolygon",coordinates:[[[[19.076465,57.835938],[18.136523,57.556641],[18.146387,56.920508],[19.076465,57.835938]]],[[[11.388281,59.036523],[11.248242,58.369141],[12.883691,56.617725],[12.80166,56.263916],[12.471191,56.290527],[12.88584,55.411377],[14.17373,55.396631],[14.401953,55.976758],[15.82666,56.124951],[16.34873,56.709277],[16.923828,58.492578],[16.214258,58.63667],[18.285352,59.109375],[18.560254,59.394482],[17.964258,59.359375],[18.970508,59.757227],[17.955762,60.589795],[17.250977,60.700781],[17.410254,62.508398],[20.762695,63.867822],[21.519629,64.463086],[21.410352,65.317432],[22.400977,65.862109],[24.155469,65.805273],[23.638867,67.954395],[20.622168,69.036865],[20.116699,69.020898],[19.969824,68.356396],[18.303027,68.55542],[17.916699,67.964893],[17.324609,68.103809],[16.783594,67.89502],[15.483789,66.305957],[14.543262,66.129346],[14.479688,65.301465],[13.650293,64.581543],[14.141211,64.173535],[12.792773,64],[12.175195,63.595947],[12.155371,61.720752],[12.880762,61.352295],[12.294141,61.002686],[12.486133,60.106787],[11.680762,59.592285],[11.642773,58.926074],[11.388281,59.036523]]]]}},{type:"Feature",properties:{name:"斯威士兰",full_name:"斯威士兰王国",iso_a2:"SZ",iso_a3:"SWZ",iso_n3:"748"},geometry:{type:"Polygon",coordinates:[[[31.948242,-25.957617],[31.207324,-25.843359],[30.794336,-26.764258],[31.469531,-27.295508],[31.958398,-27.305859],[32.112891,-26.839453],[31.948242,-25.957617]]]}},{type:"Feature",properties:{name:"苏里南",full_name:"苏里南共和国",iso_a2:"SR",iso_a3:"SUR",iso_n3:"740"},geometry:{type:"Polygon",coordinates:[[[-54.155957,5.358984],[-54.054199,5.80791],[-54.833691,5.98833],[-55.828174,5.96167],[-55.897607,5.699316],[-56.969824,5.992871],[-57.194775,5.548438],[-57.331006,5.020166],[-57.917041,4.82041],[-58.054297,4.10166],[-57.646729,3.394531],[-57.303662,3.3771],[-57.197363,2.853271],[-56.482812,1.942139],[-55.929639,1.8875],[-56.137695,2.259033],[-55.957471,2.520459],[-54.978662,2.597656],[-54.61626,2.326758],[-54.00957,3.448535],[-54.479688,4.836523],[-54.155957,5.358984]]]}},{type:"Feature",properties:{name:"南苏丹",full_name:"南苏丹共和国",iso_a2:"SS",iso_a3:"SSD",iso_n3:"728"},geometry:{type:"Polygon",coordinates:[[[33.976074,4.220215],[35.268359,5.492285],[34.710645,6.660303],[33.902441,7.509521],[32.998926,7.899512],[33.281055,8.437256],[34.072754,8.545264],[34.078125,9.461523],[33.871484,9.506152],[33.907031,10.181445],[33.130078,10.745947],[33.199316,12.217285],[32.721875,12.223096],[32.736719,12.009668],[32.072266,12.006738],[32.420801,11.089111],[31.224902,9.799268],[30.755371,9.731201],[30.003027,10.277393],[28.844531,9.326074],[28.048926,9.328613],[27.880859,9.601611],[26.658691,9.484131],[25.858203,10.406494],[25.211719,10.329932],[24.531934,8.886914],[24.147363,8.665625],[24.291406,8.291406],[24.85332,8.137549],[25.278906,7.42749],[26.361816,6.635303],[26.514258,6.069238],[27.143945,5.722949],[27.40332,5.10918],[28.19209,4.350244],[29.676855,4.586914],[30.838574,3.490723],[31.152344,3.785596],[31.798047,3.802637],[32.135938,3.519727],[32.997266,3.880176],[33.489355,3.755078],[33.976074,4.220215]]]}},{type:"Feature",properties:{name:"苏丹",full_name:"苏丹共和国",iso_a2:"SD",iso_a3:"SDN",iso_n3:"729"},geometry:{type:"Polygon",coordinates:[[[34.078125,9.461523],[34.343945,10.658643],[34.931445,10.864795],[35.112305,11.816553],[35.670215,12.62373],[36.125195,12.757031],[36.524316,14.256836],[36.426758,15.13208],[37.008984,17.058887],[37.411035,17.061719],[38.609473,18.005078],[37.471289,18.820117],[37.258594,21.108545],[36.871387,21.996729],[31.434473,21.99585],[31.400293,22.202441],[31.092676,21.994873],[24.980273,21.99585],[24.979492,20.002588],[23.980273,19.995947],[23.980273,19.496631],[23.970801,15.721533],[22.933887,15.533105],[22.932324,15.162109],[22.381543,14.550488],[22.538574,14.161865],[22.106445,13.799805],[22.228125,13.32959],[21.825293,12.790527],[22.352344,12.660449],[22.591113,11.579883],[22.922656,11.344873],[22.860059,10.919678],[23.646289,9.8229],[23.537305,8.81582],[24.147363,8.665625],[24.531934,8.886914],[25.211719,10.329932],[25.858203,10.406494],[26.658691,9.484131],[27.880859,9.601611],[28.048926,9.328613],[28.844531,9.326074],[30.003027,10.277393],[30.755371,9.731201],[31.224902,9.799268],[32.420801,11.089111],[32.072266,12.006738],[32.736719,12.009668],[32.721875,12.223096],[33.199316,12.217285],[33.130078,10.745947],[33.907031,10.181445],[33.871484,9.506152],[34.078125,9.461523]]]}},{type:"Feature",properties:{name:"斯里兰卡",full_name:"斯里兰卡民主社会主义共和国",iso_a2:"LK",iso_a3:"LKA",iso_n3:"144"},geometry:{type:"Polygon",coordinates:[[[79.982324,9.812695],[80.42832,9.480957],[80.086328,9.577832],[79.783496,8.018457],[79.712988,8.182324],[79.859375,6.829297],[80.095313,6.153174],[80.724121,5.979053],[81.637402,6.425146],[81.874121,7.28833],[80.711133,9.366357],[79.982324,9.812695]]]}},{type:"Feature",properties:{name:"西班牙",full_name:"西班牙王国",iso_a2:"ES",iso_a3:"ESP",iso_n3:"724"},geometry:{type:"MultiPolygon",coordinates:[[[[3.145313,39.790088],[3.158691,39.970508],[2.37002,39.57207],[3.072852,39.30127],[3.461816,39.697754],[3.145313,39.790088]]],[[[1.445215,38.918701],[1.564453,39.121045],[1.22334,38.903857],[1.445215,38.918701]]],[[[-1.794043,43.407324],[-4.523047,43.415723],[-8.004687,43.694385],[-9.178076,43.174023],[-8.777148,41.941064],[-8.266064,42.137402],[-8.15249,41.811963],[-6.618262,41.942383],[-6.2125,41.532031],[-6.928467,41.009131],[-6.975391,39.798389],[-7.535693,39.661572],[-6.997949,39.056445],[-7.343018,38.457422],[-6.957568,38.187891],[-7.443945,37.728271],[-7.406152,37.179443],[-6.86377,37.278906],[-6.216797,36.913574],[-6.384131,36.637012],[-5.625488,36.025928],[-4.366846,36.718115],[-2.111523,36.77666],[-1.640967,37.386963],[-.721582,37.631055],[-.520801,38.317285],[.201563,38.75918],[-.327002,39.519873],[.891113,40.722363],[.714648,40.822852],[3.004883,41.767432],[3.211426,42.431152],[1.706055,42.50332],[1.448828,42.437451],[1.42832,42.595898],[.696875,42.845117],[.631641,42.6896],[-.586426,42.798975],[-1.46084,43.051758],[-1.794043,43.407324]]],[[[-16.334473,28.379932],[-16.123633,28.575977],[-16.905322,28.3396],[-16.658008,28.007178],[-16.334473,28.379932]]],[[[-14.196777,28.169287],[-13.928027,28.253467],[-13.857227,28.738037],[-14.491797,28.100928],[-14.196777,28.169287]]],[[[-15.400586,28.147363],[-15.682764,28.154053],[-15.710303,27.784082],[-15.436768,27.810693],[-15.400586,28.147363]]]]}},{type:"Feature",properties:{name:"韩国",full_name:"大韩民国",iso_a2:"KR",iso_a3:"KOR",iso_n3:"410"},geometry:{type:"MultiPolygon",coordinates:[[[[126.633887,37.781836],[126.976855,36.939404],[126.487012,37.007471],[126.160547,36.771924],[126.487695,36.693799],[126.753027,35.871973],[126.291113,35.15415],[126.593359,34.824365],[126.264453,34.673242],[126.531445,34.314258],[127.24707,34.755127],[127.324609,34.463281],[127.714844,34.954688],[128.443945,34.870361],[128.510938,35.100977],[129.076758,35.122705],[129.419141,35.497852],[129.418262,37.059033],[128.374609,38.623438],[128.038965,38.308545],[127.090332,38.283887],[126.633887,37.781836]]],[[[128.741016,34.798535],[128.667969,35.008789],[128.489258,34.865283],[128.741016,34.798535]]],[[[126.326953,33.223633],[126.901172,33.515137],[126.337695,33.4604],[126.326953,33.223633]]]]}},{type:"Feature",properties:{name:"南非",full_name:"南非共和国",iso_a2:"ZA",iso_a3:"ZAF",iso_n3:"710"},geometry:{type:"Polygon",coordinates:[[[29.364844,-22.193945],[28.210156,-22.693652],[27.085547,-23.57793],[26.835059,-24.24082],[25.912109,-24.747461],[25.443652,-25.714453],[24.748145,-25.817383],[23.05752,-25.312305],[22.597656,-26.132715],[21.646289,-26.854199],[20.685059,-26.822461],[20.793164,-25.915625],[19.980469,-24.776758],[19.980469,-28.45127],[19.161719,-28.93877],[18.102734,-28.87168],[17.447949,-28.698145],[17.05625,-28.031055],[16.447559,-28.617578],[18.21084,-31.74248],[18.325293,-32.50498],[17.851074,-32.827441],[18.433008,-33.717285],[18.410352,-34.295605],[18.752148,-34.082617],[18.831348,-34.364062],[20.020605,-34.785742],[20.529883,-34.463086],[21.788965,-34.372656],[22.553809,-34.010059],[25.574219,-34.035352],[25.805859,-33.737109],[26.613672,-33.707422],[27.860645,-33.053906],[29.971191,-31.32207],[31.335156,-29.378125],[32.285742,-28.621484],[32.886133,-26.849316],[32.112891,-26.839453],[31.958398,-27.305859],[31.469531,-27.295508],[30.794336,-26.764258],[31.207324,-25.843359],[31.948242,-25.957617],[31.98584,-24.460645],[31.287891,-22.402051],[29.364844,-22.193945]],[[28.736914,-30.101953],[28.39209,-30.147559],[28.056836,-30.631055],[27.753125,-30.6],[27.056934,-29.625586],[27.735547,-28.940039],[28.625781,-28.581738],[29.390723,-29.269727],[29.098047,-29.919043],[28.736914,-30.101953]]]}},{type:"Feature",properties:{name:"索马里",full_name:"索马里联邦共和国",iso_a2:"SO",iso_a3:"SOM",iso_n3:"706"},geometry:{type:"Polygon",coordinates:[[[41.532715,-1.695312],[43.717578,.857861],[46.878809,3.285645],[47.975293,4.497021],[49.049316,6.173633],[49.852051,7.962549],[50.825,9.428174],[50.930078,10.335547],[51.390234,10.422607],[51.031836,10.444775],[51.254883,11.830713],[50.792285,11.983691],[50.110059,11.529297],[48.938574,11.258447],[48.938086,9.451758],[47.978223,7.99707],[44.940527,4.912012],[43.583496,4.85498],[41.883984,3.977734],[40.964453,2.814648],[40.978711,-.870313],[41.532715,-1.695312]]]}},{type:"Feature",properties:{name:"索马里兰",full_name:"索马里兰",iso_a2:"-99",iso_a3:"-99",iso_n3:"-99"},geometry:{type:"Polygon",coordinates:[[[48.938574,11.258447],[47.40498,11.174023],[46.565039,10.745996],[45.816699,10.835889],[44.386523,10.430225],[43.245996,11.499805],[42.922754,10.999316],[42.656445,10.6],[42.841602,10.203076],[43.983789,9.008838],[46.978223,7.99707],[47.978223,7.99707],[48.938086,9.451758],[48.938574,11.258447]]]}},{type:"Feature",properties:{name:"所罗门群岛",full_name:"所罗门群岛",iso_a2:"SB",iso_a3:"SLB",iso_n3:"090"},geometry:{type:"MultiPolygon",coordinates:[[[[157.763477,-8.242188],[157.490625,-7.965723],[157.217578,-8.262793],[157.558008,-8.269922],[157.819336,-8.612012],[157.763477,-8.242188]]],[[[157.388965,-8.713477],[157.379492,-8.420898],[157.212305,-8.565039],[157.388965,-8.713477]]],[[[156.687891,-7.923047],[156.809082,-7.722852],[156.560938,-7.574023],[156.687891,-7.923047]]],[[[159.750391,-9.272656],[159.612305,-9.470703],[159.802734,-9.763477],[160.818945,-9.862793],[160.35459,-9.421582],[159.750391,-9.272656]]],[[[159.879102,-8.534277],[159.431445,-8.029004],[158.457422,-7.544727],[159.879102,-8.534277]]],[[[157.486719,-7.330371],[156.452539,-6.638281],[157.101562,-7.323633],[157.486719,-7.330371]]],[[[160.749414,-8.313965],[160.59043,-8.372754],[160.77207,-8.963867],[161.367383,-9.61123],[160.749414,-8.313965]]],[[[161.715332,-10.387305],[161.304785,-10.204395],[161.786816,-10.716895],[162.37334,-10.823242],[162.105371,-10.453809],[161.715332,-10.387305]]]]}},{type:"Feature",properties:{name:"斯洛伐克",full_name:"斯洛伐克共和国",iso_a2:"SK",iso_a3:"SVK",iso_n3:"703"},geometry:{type:"Polygon",coordinates:[[[22.538672,49.072705],[21.639648,49.411963],[20.362988,49.385254],[20.057617,49.181299],[19.441602,49.597705],[19.149414,49.4],[18.832227,49.510791],[16.953125,48.598828],[17.147363,48.005957],[17.761914,47.770166],[18.724219,47.787158],[18.791895,48.000293],[19.950391,48.146631],[20.490039,48.526904],[22.131836,48.405322],[22.538672,49.072705]]]}},{type:"Feature",properties:{name:"斯洛文尼亚",full_name:"斯洛文尼亚共和国",iso_a2:"SI",iso_a3:"SVN",iso_n3:"705"},geometry:{type:"Polygon",coordinates:[[[16.516211,46.499902],[16.093066,46.863281],[14.549805,46.399707],[13.7,46.520264],[13.378223,46.261621],[13.719824,45.587598],[13.57793,45.516895],[14.568848,45.657227],[15.339453,45.467041],[15.635938,46.200732],[16.516211,46.499902]]]}},{type:"Feature",properties:{name:"新加坡",full_name:"新加坡共和国",iso_a2:"SG",iso_a3:"SGP",iso_n3:"702"},geometry:{type:"Polygon",coordinates:[[[103.969727,1.331445],[103.817969,1.44707],[103.650195,1.325537],[103.969727,1.331445]]]}},{type:"Feature",properties:{name:"塞拉利昂",full_name:"塞拉利昂共和国",iso_a2:"SL",iso_a3:"SLE",iso_n3:"694"},geometry:{type:"MultiPolygon",coordinates:[[[[-10.283203,8.485156],[-10.712109,8.335254],[-10.500537,8.687549],[-10.690527,9.314258],[-11.273633,9.996533],[-12.427979,9.898145],[-13.292676,9.049219],[-13.059473,8.881152],[-13.181836,8.576904],[-12.894092,8.629785],[-13.272754,8.429736],[-12.850879,7.818701],[-12.480273,7.753271],[-12.485645,7.386279],[-11.50752,6.906543],[-10.647461,7.759375],[-10.283203,8.485156]]],[[[-12.526074,7.436328],[-12.615234,7.637207],[-12.951611,7.57085],[-12.526074,7.436328]]]]}},{type:"Feature",properties:{name:"塞舌尔",full_name:"塞舌尔共和国",iso_a2:"SC",iso_a3:"SYC",iso_n3:"690"},geometry:{type:"Polygon",coordinates:[[[55.540332,-4.693066],[55.383398,-4.609277],[55.542969,-4.785547],[55.540332,-4.693066]]]}},{type:"Feature",properties:{name:"塞尔维亚",full_name:"塞尔维亚共和国",iso_a2:"RS",iso_a3:"SRB",iso_n3:"688"},geometry:{type:"Polygon",coordinates:[[[22.705078,44.237793],[22.64209,44.650977],[22.093066,44.541943],[21.360059,44.82666],[21.490234,45.1479],[20.241797,46.108594],[18.905371,45.931738],[19.004688,45.399512],[19.4,45.2125],[19.007129,44.869189],[19.348633,44.880908],[19.118457,44.359961],[19.583789,44.043457],[19.24502,43.965039],[19.495117,43.642871],[19.194336,43.533301],[20.344336,42.82793],[20.063965,42.547266],[20.566211,41.873682],[21.5625,42.24751],[22.344043,42.313965],[22.466797,42.84248],[22.967969,43.142041],[22.369629,43.781299],[22.705078,44.237793]]]}},{type:"Feature",properties:{name:"塞内加尔",full_name:"塞内加尔共和国",iso_a2:"SN",iso_a3:"SEN",iso_n3:"686"},geometry:{type:"Polygon",coordinates:[[[-12.280615,14.809033],[-13.409668,16.05918],[-14.53374,16.655957],[-16.239014,16.531299],[-16.535254,15.838379],[-17.147168,14.922021],[-17.535645,14.755127],[-16.618115,14.040527],[-16.766943,13.904932],[-16.562305,13.587305],[-15.509668,13.58623],[-15.10835,13.812109],[-13.826709,13.407812],[-14.246777,13.23584],[-15.151123,13.556494],[-15.834277,13.156445],[-16.76333,13.06416],[-16.743896,12.585449],[-16.442871,12.609473],[-16.760303,12.525781],[-16.711816,12.354834],[-15.196094,12.679932],[-13.729248,12.673926],[-12.399072,12.340088],[-11.389404,12.404395],[-11.390381,12.941992],[-12.054199,13.633057],[-12.280615,14.809033]]]}},{type:"Feature",properties:{name:"沙特阿拉伯",full_name:"沙特阿拉伯王国",iso_a2:"SA",iso_a3:"SAU",iso_n3:"682"},geometry:{type:"MultiPolygon",coordinates:[[[[41.987695,16.715625],[41.860449,17.002539],[41.801563,16.77876],[42.157812,16.570703],[41.987695,16.715625]]],[[[51.977637,18.996143],[54.977344,19.995947],[55.641016,22.001855],[55.18584,22.704102],[52.555078,22.932812],[51.568359,24.286182],[51.267969,24.607227],[50.804395,24.789258],[50.081055,25.961377],[50.149805,26.662646],[48.797168,27.724316],[48.44248,28.54292],[47.671289,28.533154],[47.433203,28.989551],[46.531445,29.09624],[44.69082,29.202344],[42.074414,31.080371],[40.369336,31.938965],[39.14541,32.124512],[36.958594,31.491504],[37.980078,30.5],[37.469238,29.995068],[36.755273,29.866016],[36.068457,29.200537],[34.950781,29.353516],[34.625,28.064502],[35.180469,28.034863],[37.148828,25.291113],[37.543066,24.29165],[38.46416,23.711865],[39.062012,22.592188],[38.987891,21.881738],[39.276074,20.973975],[39.72832,20.390332],[40.75918,19.755469],[41.229492,18.678418],[42.293945,17.434961],[42.799316,16.371777],[43.165039,16.689404],[43.190918,17.359375],[43.417969,17.51626],[43.916992,17.324707],[46.727637,17.265576],[47.143555,16.94668],[48.172168,18.156934],[49.041992,18.581787],[51.977637,18.996143]]]]}},{type:"Feature",properties:{name:"圣多美和普林西比",full_name:"圣多美和普林西比民主共和国",iso_a2:"ST",iso_a3:"STP",iso_n3:"678"},geometry:{type:"Polygon",coordinates:[[[6.659961,.120654],[6.686914,.404395],[6.468164,.227344],[6.659961,.120654]]]}},{type:"Feature",properties:{name:"圣马力诺",full_name:"圣马力诺共和国",iso_a2:"SM",iso_a3:"SMR",iso_n3:"674"},geometry:{type:"Polygon",coordinates:[[[12.485254,43.901416],[12.503711,43.989746],[12.396875,43.93457],[12.485254,43.901416]]]}},{type:"Feature",properties:{name:"萨摩亚",full_name:"萨摩亚独立国",iso_a2:"WS",iso_a3:"WSM",iso_n3:"882"},geometry:{type:"Polygon",coordinates:[[[-172.333496,-13.465234],[-172.778516,-13.516797],[-172.224951,-13.804297],[-172.333496,-13.465234]]]}},{type:"Feature",properties:{name:"圣文森特和格林纳丁斯",full_name:"圣文森特和格林纳丁斯",iso_a2:"VC",iso_a3:"VCT",iso_n3:"670"},geometry:{type:"Polygon",coordinates:[[[-61.174512,13.158105],[-61.138965,13.35874],[-61.268457,13.287695],[-61.174512,13.158105]]]}},{type:"Feature",properties:{name:"圣卢西亚",full_name:"圣卢西亚",iso_a2:"LC",iso_a3:"LCA",iso_n3:"662"},geometry:{type:"Polygon",coordinates:[[[-60.895215,13.821973],[-60.908105,14.093359],[-61.073145,13.865576],[-60.895215,13.821973]]]}},{type:"Feature",properties:{name:"圣基茨和尼维斯",full_name:"圣基茨和尼维斯联邦",iso_a2:"KN",iso_a3:"KNA",iso_n3:"659"},geometry:{type:"Polygon",coordinates:[[[-62.630664,17.23999],[-62.827051,17.386426],[-62.838916,17.339258],[-62.630664,17.23999]]]}},{type:"Feature",properties:{name:"卢旺达",full_name:"卢旺达共和国",iso_a2:"RW",iso_a3:"RWA",iso_n3:"646"},geometry:{type:"Polygon",coordinates:[[[29.576953,-1.387891],[28.876367,-2.400293],[29.014355,-2.720215],[29.698047,-2.794727],[29.930176,-2.339551],[30.553613,-2.400098],[30.876562,-2.143359],[30.509961,-1.067285],[29.930078,-1.469922],[29.576953,-1.387891]]]}},{type:"Feature",properties:{name:"俄罗斯",full_name:"俄罗斯联邦",iso_a2:"RU",iso_a3:"RUS",iso_n3:"643"},geometry:{type:"MultiPolygon",coordinates:[[[[-179.798535,68.94043],[-180,68.738672],[-180,68.493896],[-180,68.249121],[-180,68.004395],[-180,67.759619],[-180,67.514844],[-180,67.270117],[-180,67.025342],[-180,66.780566],[-180,66.53584],[-180,66.291064],[-180,66.046289],[-180,65.801562],[-180,65.556787],[-180,65.311963],[-180,65.067236],[-179.3521,65.516748],[-179.683301,66.184131],[-178.526562,66.401562],[-178.939062,66.032764],[-178.4125,65.495557],[-176.093262,65.471045],[-175.395117,64.802393],[-173.729736,64.364502],[-173.32749,64.539551],[-173.275488,64.289648],[-172.903174,64.526074],[-172.401465,64.413916],[-173.085791,64.817334],[-172.213184,65.048145],[-172.783301,65.681055],[-171.105859,65.511035],[-171.421533,65.810352],[-170.666309,65.621533],[-169.777881,66.143115],[-170.604443,66.248926],[-171.795557,66.931738],[-173.00752,67.064893],[-172.520117,66.95249],[-173.258936,66.840088],[-173.679688,67.144775],[-174.550098,67.090625],[-173.773975,66.434668],[-174.065039,66.22959],[-174.084766,66.473096],[-174.394092,66.344238],[-174.924902,66.623145],[-175.345215,67.678076],[-178.373047,68.565674],[-178.055811,68.264893],[-179.798535,68.94043]]],[[[130.687305,42.302539],[130.709375,42.656396],[131.158301,42.626025],[131.938965,43.301953],[131.866602,43.095166],[132.30957,43.313525],[132.303809,42.883301],[133.159961,42.696973],[135.131055,43.525732],[137.685449,45.818359],[140.170605,48.523682],[140.520898,50.800195],[141.485254,52.178516],[140.839648,53.087891],[141.18125,53.015283],[141.37373,53.292773],[139.707422,54.277148],[138.657227,54.29834],[138.450684,53.537012],[138.52793,53.959863],[137.950488,53.603564],[137.253711,53.546143],[137.834766,53.946729],[137.339258,54.100537],[137.666016,54.283301],[137.141602,54.182227],[137.155371,53.82168],[136.718848,53.804102],[136.797266,54.620996],[135.851562,54.583936],[135.2625,54.943311],[137.691504,56.139355],[142.580273,59.240137],[145.55459,59.413525],[146.049512,59.170557],[146.537207,59.456982],[148.72666,59.25791],[148.79707,59.532324],[149.642578,59.77041],[152.260645,59.223584],[151.121094,59.08252],[151.326758,58.875098],[152.817871,58.92627],[153.361133,59.214795],[155.160449,59.190137],[154.971289,59.449609],[154.149805,59.528516],[154.293066,59.83335],[157.08418,61.675684],[160.309375,61.894385],[159.79043,60.956641],[160.378906,61.025488],[160.173633,60.638428],[162.392578,61.662109],[163.085254,61.570557],[163.331738,62.550928],[164.418359,62.704639],[165.417383,62.44707],[164.207227,62.292236],[163.709961,60.916797],[162.068164,60.466406],[158.275195,58.008984],[156.829883,57.779639],[156.848828,57.290186],[155.98252,56.695215],[155.620312,54.864551],[156.847461,51.006592],[158.103516,51.809619],[158.47207,53.032373],[160.025098,53.12959],[160.074414,54.18916],[162.105566,54.752148],[161.723926,55.496143],[162.084961,56.089648],[162.671484,56.490088],[163.038379,56.521875],[162.628125,56.232275],[162.840332,56.065625],[163.335547,56.23252],[163.256543,56.688037],[162.791113,56.875391],[163.225781,57.790381],[162.654297,57.948242],[162.391406,57.717236],[161.960059,58.076904],[163.743848,60.028027],[164.953711,59.843604],[166.352148,60.484814],[166.273047,59.85625],[167.226758,60.406299],[169.226758,60.595947],[170.350977,59.965527],[170.608203,60.434912],[172.856543,61.469189],[177.159473,62.560986],[177.023535,62.777246],[179.120703,62.320361],[179.570508,62.6875],[178.44043,63.605566],[178.381445,64.260889],[177.6875,64.304736],[177.427441,64.763379],[176.140918,64.58584],[176.056543,64.904736],[174.548828,64.683887],[176.061133,64.960889],[177.06875,64.78667],[177.037305,64.999658],[176.341016,65.047314],[176.880859,65.081934],[178.519531,64.602979],[180,65.067236],[180,68.983447],[179.272656,69.259668],[175.921484,69.895312],[173.277441,69.823828],[170.486816,70.107568],[170.160938,69.626562],[170.99541,69.045312],[169.609863,68.786035],[167.856836,69.728223],[166.820312,69.499561],[163.201367,69.714746],[161.536914,69.379541],[161.565625,68.905176],[160.856055,68.53833],[161.309863,68.982275],[160.910742,69.606348],[159.729395,69.870215],[160.006445,70.309668],[159.350684,70.790723],[156.68457,71.09375],[152.508789,70.834473],[151.582422,71.286963],[150.097656,71.226562],[150.599805,71.520117],[148.968164,71.690479],[150.016895,71.895654],[149.501563,72.164307],[147.261816,72.327881],[146.073242,71.80835],[145.188574,71.695801],[145.758594,72.225879],[146.113281,71.944971],[146.831836,72.29541],[144.294922,72.192627],[146.25293,72.442236],[140.808203,72.890967],[141.079297,72.586914],[139.14082,72.329736],[140.187695,72.191309],[139.359277,71.951367],[139.98418,71.491504],[138.23418,71.596338],[137.939648,71.133398],[136.090332,71.61958],[133.688867,71.434229],[132.653906,71.925977],[131.021582,70.746094],[129.761914,71.119531],[128.843262,71.663477],[129.210254,71.916943],[128.911426,71.755322],[127.841406,72.308252],[129.410645,72.166309],[128.418262,72.535156],[129.250391,72.705176],[128.599023,72.895166],[129.100586,73.112354],[127.740332,73.481543],[126.552539,73.334912],[124.541211,73.75127],[123.491113,73.666357],[123.622266,73.193262],[122.260156,72.880566],[119.750391,72.979102],[118.430273,73.246533],[118.870898,73.537891],[115.337695,73.702588],[113.510352,73.50498],[113.664551,72.634521],[113.032813,73.913867],[112.147266,73.708936],[111.550586,74.028516],[110.261426,74.017432],[109.706738,73.74375],[110.868164,73.730713],[109.855273,73.472461],[105.143945,72.777051],[112.924902,75.015039],[113.726172,75.450635],[112.453027,75.830176],[113.567578,75.568408],[113.272656,76.25166],[112.65625,76.053564],[111.39248,76.68667],[106.413574,76.512256],[107.429785,76.926562],[104.202441,77.101807],[106.05957,77.390527],[104.014551,77.73042],[100.989941,76.990479],[101.597754,76.439209],[98.805664,76.480664],[99.540723,75.798584],[98.662012,76.242676],[96.49707,75.891211],[95.65332,75.892188],[95.578711,76.137305],[93.259277,76.098779],[92.89043,75.909961],[94.075195,75.912891],[87.005957,75.169824],[87.041797,74.778857],[85.791016,74.645117],[87.229688,74.363867],[86.001367,74.316016],[87.571191,73.810742],[85.938965,73.456494],[86.677051,73.106787],[85.792578,73.43833],[86.892969,73.887109],[80.583203,73.568457],[80.827051,72.488281],[83.534375,71.683936],[83.15127,71.103613],[83.735938,70.546484],[83.080762,70.093018],[82.869141,70.954834],[82.221191,70.395703],[82.163184,70.598145],[83.233594,71.668164],[81.661621,71.715967],[79.42207,72.380762],[77.471582,72.192139],[78.232422,71.952295],[77.777539,71.836426],[76.871387,72.033008],[76.032422,71.9104],[76.433398,71.55249],[78.942187,70.933789],[75.332031,71.341748],[75.741406,72.29624],[75.152441,72.852734],[74.992188,72.144824],[73.08623,71.444922],[74.343359,70.578711],[73.578125,69.802979],[73.836035,69.143213],[76.000977,69.235059],[77.650684,68.903027],[77.588281,67.751904],[78.922461,67.589111],[77.174414,67.778516],[77.238477,68.46958],[76.10752,68.975732],[74.57959,68.751221],[74.769531,67.766357],[72.321582,66.332129],[70.339453,66.342383],[69.194336,66.578662],[69.217773,66.828613],[70.690723,66.745312],[70.724902,66.519434],[71.539551,66.683105],[71.365234,66.961523],[73.066797,67.766943],[73.591699,68.481885],[72.576758,68.968701],[72.704492,70.963232],[71.867285,71.457373],[72.812109,72.691406],[69.611816,72.981934],[68.269238,71.682812],[66.639648,71.081396],[67.284766,70.738721],[66.89668,69.553809],[67.624121,69.584424],[68.542773,68.96709],[69.140527,68.950635],[68.371191,68.314258],[64.19043,69.534668],[60.909082,69.847119],[60.170605,69.590918],[60.933594,68.986768],[59.725684,68.351611],[59.099023,68.444336],[59.057324,69.006055],[57.126855,68.554004],[55.418066,68.567822],[54.861328,68.201855],[53.260547,68.26748],[53.930859,68.435547],[53.797656,68.907471],[54.491211,68.992334],[53.801953,68.995898],[52.344043,68.608154],[52.39668,68.351709],[51.994727,68.53877],[48.754297,67.895947],[48.833203,67.681494],[47.874707,67.58418],[47.655859,66.975928],[46.492383,66.800195],[44.902148,67.413135],[45.528711,67.757568],[46.69043,67.848828],[45.891992,68.479688],[43.333203,68.673389],[44.204688,68.25376],[44.104395,66.008594],[42.210547,66.519678],[39.816504,65.597949],[40.444922,64.778711],[39.758008,64.577051],[36.882812,65.172363],[36.624219,64.750537],[38.062207,64.091016],[37.442188,63.813379],[35.035352,64.440234],[34.406445,65.395752],[34.691797,65.951855],[31.895313,67.161426],[34.482617,66.550342],[38.653906,66.069043],[40.10332,66.299951],[41.188965,66.826172],[40.966406,67.713477],[35.85791,69.191748],[33.684375,69.310254],[33.141211,69.068701],[33.454297,69.428174],[32.377734,69.479102],[32.176758,69.674023],[33.007812,69.722119],[31.98457,69.953662],[31.546973,69.696924],[30.869727,69.783447],[30.860742,69.538428],[30.180176,69.63584],[28.96582,69.021973],[28.414062,68.90415],[28.685156,68.189795],[29.988086,67.668262],[29.066211,66.891748],[30.102734,65.72627],[29.604199,64.968408],[30.51377,64.2],[29.991504,63.735156],[31.533984,62.8854],[27.797656,60.536133],[28.512793,60.677295],[29.069141,60.191455],[30.172656,59.957129],[28.058008,59.781543],[28.0125,59.484277],[27.43418,58.787256],[27.778516,57.870703],[27.351953,57.528125],[27.828613,57.293311],[27.639453,56.845654],[28.147949,56.14292],[29.375,55.938721],[29.482227,55.68457],[30.233594,55.845215],[30.906836,55.57002],[30.798828,54.783252],[31.754199,53.810449],[32.706445,53.419434],[32.141992,53.091162],[31.417871,53.196045],[31.258789,53.016699],[31.763379,52.101074],[33.735254,52.344775],[34.397852,51.78042],[34.213867,51.255371],[35.311914,51.043896],[35.591113,50.36875],[36.619434,50.209229],[37.422852,50.411475],[38.046875,49.92002],[38.258594,50.052344],[40.080664,49.576855],[40.108789,49.251562],[39.686523,49.00791],[40.003613,48.82207],[39.644727,48.591211],[39.95791,48.268896],[39.778711,47.887549],[38.368848,47.609961],[38.214355,47.091455],[39.02373,47.272217],[39.293457,47.105762],[38.500977,46.663672],[37.766504,46.636133],[38.492285,46.090527],[37.933105,46.001709],[37.647168,45.377197],[36.865918,45.427051],[36.627637,45.151318],[38.717285,44.288086],[39.97832,43.419824],[40.648047,43.533887],[41.580566,43.219238],[42.760645,43.16958],[43.825977,42.571533],[44.870996,42.756396],[45.705273,42.498096],[45.638574,42.205078],[46.429883,41.890967],[47.791016,41.199268],[48.572852,41.844482],[47.463184,43.035059],[47.646484,43.884619],[47.462793,43.555029],[47.307031,44.103125],[46.707227,44.50332],[47.463281,45.679688],[48.72959,45.896826],[49.232227,46.337158],[48.541211,46.605615],[48.959375,46.774609],[48.166992,47.708789],[47.292383,47.740918],[46.660938,48.412256],[47.031348,49.150293],[46.889551,49.696973],[47.429199,50.357959],[48.334961,49.858252],[48.758984,49.92832],[48.625098,50.612695],[50.793945,51.729199],[51.344531,51.475342],[52.219141,51.709375],[53.338086,51.482373],[54.555273,50.535791],[54.641602,51.011572],[55.68623,50.582861],[56.491406,51.019531],[57.442188,50.888867],[57.838867,51.09165],[59.523047,50.492871],[60.058594,50.850293],[60.942285,50.695508],[61.389453,50.861035],[61.554688,51.324609],[60.030273,51.933252],[60.994531,52.336865],[60.774414,52.675781],[61.047461,52.972461],[62.082715,53.00542],[61.199219,53.287158],[61.534961,53.523291],[60.979492,53.621729],[61.231055,54.019482],[65.088379,54.340186],[65.476953,54.623291],[68.155859,54.976709],[68.977246,55.3896],[70.182422,55.162451],[70.738086,55.305176],[71.093164,54.212207],[72.186035,54.325635],[72.446777,53.941846],[72.622266,54.134326],[73.712402,54.042383],[73.406934,53.447559],[73.858984,53.619727],[74.351562,53.487646],[76.837305,54.442383],[76.484766,54.022559],[77.859961,53.269189],[79.98623,50.774561],[80.735254,51.293408],[81.465918,50.739844],[82.493945,50.727588],[83.357324,50.99458],[84.323242,50.23916],[84.989453,50.061426],[85.232617,49.61582],[86.180859,49.499316],[86.675488,49.777295],[87.322852,49.085791],[87.814258,49.162305],[88.192578,49.451709],[89.395605,49.611523],[90.053711,50.09375],[92.354785,50.86416],[94.251074,50.556396],[94.614746,50.02373],[97.359766,49.741455],[98.250293,50.302441],[97.835742,51.05166],[98.893164,52.117285],[102.111523,51.353467],[102.288379,50.585107],[103.304395,50.200293],[105.383594,50.47373],[106.711133,50.312598],[107.233301,49.989404],[107.916602,49.947803],[108.613672,49.322803],[110.709766,49.142969],[112.806445,49.523584],[114.29707,50.274414],[115.429199,49.896484],[116.216797,50.009277],[116.683301,49.823779],[117.873438,49.513477],[119.259863,50.066406],[119.163672,50.406006],[120.749805,52.096533],[120.656152,52.56665],[120.094531,52.787207],[120.985449,53.28457],[123.607813,53.546533],[125.649023,53.042285],[127.590234,50.208984],[127.550781,49.801807],[129.498145,49.388818],[130.553125,48.861182],[130.961914,47.709326],[132.47627,47.71499],[133.144043,48.105664],[134.293359,48.373438],[135.083406,48.436324],[134.665234,48.253906],[134.752344,47.71543],[134.167676,47.302197],[133.113477,45.130713],[131.851855,45.326855],[130.981641,44.844336],[131.257324,43.378076],[131.068555,42.902246],[130.424805,42.727051],[130.526953,42.5354],[130.687305,42.302539]]],[[[47.441992,80.853662],[44.90498,80.611279],[46.141406,80.446729],[47.705273,80.765186],[48.683594,80.633252],[47.441992,80.853662]]],[[[50.278125,80.927246],[49.087793,80.515771],[46.644434,80.300342],[47.737305,80.081689],[51.703613,80.687646],[50.278125,80.927246]]],[[[67.765332,76.237598],[68.941699,76.707666],[67.651855,77.011572],[64.463477,76.378174],[61.20166,76.282031],[58.88125,75.854785],[57.606836,75.34126],[55.810059,75.124902],[56.49873,74.95708],[55.582227,74.627686],[56.137109,74.496094],[53.762891,73.766162],[54.299902,73.350977],[56.963867,73.366553],[58.534668,74.498926],[59.674023,74.610156],[61.355957,75.314844],[67.765332,76.237598]]],[[[55.319824,73.308301],[53.251172,73.182959],[51.511328,71.648096],[53.411621,71.530127],[54.155664,71.125488],[53.383594,70.873535],[57.145898,70.589111],[57.625391,70.728809],[55.297852,71.935352],[56.42959,73.201172],[55.319824,73.308301]]],[[[96.526563,81.075586],[95.15957,81.270996],[92.710352,80.872168],[91.523828,80.358545],[93.654688,80.009619],[97.298438,80.272754],[97.869922,80.763281],[96.526563,81.075586]]],[[[97.674512,80.158252],[94.987305,80.096826],[93.070801,79.495312],[95.02041,79.052686],[98.411133,78.787793],[99.929297,78.961426],[99.041797,79.293018],[100.06123,79.7771],[98.596484,80.052197],[97.65166,79.760645],[97.674512,80.158252]]],[[[102.884766,79.253955],[101.590625,79.350439],[99.500293,77.976074],[105.312598,78.499902],[103.800781,79.149268],[102.412305,78.835449],[102.884766,79.253955]]],[[[140.04873,75.828955],[138.919531,76.196729],[138.207617,76.114941],[136.947656,75.325537],[139.099121,74.656543],[139.68125,74.964062],[142.472754,74.82041],[143.12793,74.970312],[142.30791,75.691699],[144.019727,75.044678],[145.359961,75.530469],[141.485449,76.137158],[140.815918,75.630713],[140.04873,75.828955]]],[[[146.795215,75.370752],[146.5375,75.581787],[146.148535,75.198291],[148.296875,74.800439],[150.646289,74.94458],[150.822363,75.156543],[146.795215,75.370752]]],[[[178.861523,70.826416],[180,70.993018],[180,71.537744],[178.683887,71.105664],[178.861523,70.826416]]],[[[142.761035,54.393945],[142.334961,54.280713],[142.705957,53.895703],[142.526172,53.447461],[141.823535,53.339502],[141.66084,52.272949],[142.206738,51.222559],[141.866309,48.750098],[142.181738,48.013379],[141.830371,46.451074],[142.077148,45.917041],[142.578027,46.700781],[143.282324,46.558984],[143.431641,46.028662],[143.580664,46.360693],[142.556934,47.737891],[143.10498,49.198828],[144.04873,49.24917],[144.71377,48.640283],[143.299512,51.632373],[143.324707,52.963086],[142.761035,54.393945]]],[[[-178.876465,71.577051],[-179.999951,71.537744],[-179.999951,70.993018],[-177.523584,71.166895],[-178.876465,71.577051]]],[[[52.90332,71.36499],[52.249609,71.284912],[53.022656,70.968701],[52.90332,71.36499]]],[[[96.285449,77.02666],[96.528418,77.205518],[95.270312,77.018848],[96.285449,77.02666]]],[[[74.660547,72.873438],[74.961523,73.0625],[74.198535,73.109082],[74.660547,72.873438]]],[[[58.622363,81.04165],[57.210938,81.01709],[58.285645,80.764893],[58.622363,81.04165]]],[[[50.265234,69.185596],[48.844922,69.494727],[48.439062,68.804883],[49.62627,68.859717],[50.265234,69.185596]]],[[[63.373828,80.700098],[65.437402,80.930713],[64.802051,81.197266],[62.592578,80.853027],[63.373828,80.700098]]],[[[57.95625,80.123242],[59.255469,80.343213],[57.075,80.493945],[57.95625,80.123242]]],[[[62.167773,80.834766],[59.592285,80.816504],[59.649805,80.43125],[61.05127,80.418604],[62.167773,80.834766]]],[[[61.14082,80.950342],[61.457422,81.103955],[60.07832,80.99917],[61.14082,80.950342]]],[[[53.521387,80.185205],[52.853906,80.402393],[52.343555,80.213232],[53.521387,80.185205]]],[[[57.078711,80.350928],[55.811621,80.087158],[56.986914,80.071484],[57.078711,80.350928]]],[[[57.810254,81.546045],[55.716699,81.188477],[57.769727,81.169727],[57.810254,81.546045]]],[[[54.718945,81.115967],[54.668164,80.738672],[57.580371,80.755469],[54.718945,81.115967]]],[[[92.683496,79.685205],[93.803125,79.904541],[91.229297,80.030713],[92.683496,79.685205]]],[[[141.010254,73.999463],[141.038574,74.242725],[140.193555,74.236719],[140.409473,73.92168],[141.010254,73.999463]]],[[[142.184863,73.895898],[141.084766,73.865869],[139.785547,73.355225],[143.451465,73.231299],[142.184863,73.895898]]],[[[137.940527,55.092627],[137.577344,55.197021],[137.23291,54.790576],[137.721484,54.663232],[138.206152,55.033545],[137.940527,55.092627]]],[[[169.200781,69.580469],[169.374805,69.882617],[167.864746,69.901074],[169.200781,69.580469]]],[[[163.635156,58.603369],[164.615723,58.885596],[164.572656,59.221143],[163.760938,59.015039],[163.635156,58.603369]]],[[[166.650293,54.839062],[166.275781,55.311963],[165.751074,55.294531],[166.650293,54.839062]]],[[[155.921094,50.302197],[156.096875,50.771875],[155.243066,50.094629],[155.921094,50.302197]]],[[[152.002051,46.897168],[152.288867,47.142188],[151.723438,46.828809],[152.002051,46.897168]]],[[[149.687695,45.642041],[150.553125,46.208545],[149.44707,45.593359],[149.687695,45.642041]]],[[[148.599512,45.317627],[148.812207,45.51001],[148.324219,45.282422],[147.924023,45.383301],[146.897461,44.404297],[148.599512,45.317627]]],[[[146.207617,44.497656],[145.461719,43.870898],[145.555859,43.6646],[146.567773,44.44043],[146.207617,44.497656]]],[[[113.387207,74.400439],[112.084473,74.548975],[111.503418,74.353076],[112.782422,74.095068],[113.387207,74.400439]]],[[[70.673926,73.09502],[71.626172,73.173975],[70.940234,73.514404],[69.995898,73.359375],[70.040723,73.037158],[70.673926,73.09502]]],[[[77.63252,72.29126],[78.365137,72.482422],[77.748535,72.631201],[76.871094,72.317041],[77.63252,72.29126]]],[[[79.501465,72.721924],[79.164258,73.094336],[78.633203,72.850732],[79.501465,72.721924]]],[[[60.450488,69.934863],[59.048047,70.460498],[58.519922,70.318311],[59.637012,69.721045],[60.440234,69.725928],[60.450488,69.934863]]],[[[20.957813,55.278906],[20.899805,55.28667],[19.604395,54.45918],[22.766211,54.356787],[22.567285,55.059131],[21.235742,55.264111],[20.995898,54.902686],[20.594824,54.982373],[20.957813,55.278906]]],[[[33.594141,46.09624],[32.508008,45.403809],[33.555176,45.097656],[33.450684,44.553662],[33.755664,44.398926],[35.472559,45.098486],[36.393359,45.065381],[36.575,45.393555],[35.45752,45.316309],[35.001674,45.733383],[33.806667,46.208288],[33.594141,46.09624]]]]}},{type:"Feature",properties:{name:"罗马尼亚",full_name:"罗马尼亚",iso_a2:"RO",iso_a3:"ROU",iso_n3:"642"},geometry:{type:"Polygon",coordinates:[[[28.2125,45.450439],[28.071777,46.978418],[26.618945,48.259863],[24.979102,47.724121],[23.202637,48.084521],[22.87666,47.947266],[21.999707,47.505029],[21.12168,46.282422],[20.241797,46.108594],[21.490234,45.1479],[21.360059,44.82666],[22.093066,44.541943],[22.64209,44.650977],[22.705078,44.237793],[23.028516,44.077979],[22.919043,43.834473],[25.49707,43.670801],[27.086914,44.167383],[28.585352,43.742236],[28.891504,44.918652],[29.55752,44.843408],[29.705859,45.259912],[28.2125,45.450439]]]}},{type:"Feature",properties:{name:"卡塔尔",full_name:"卡塔尔国",iso_a2:"QA",iso_a3:"QAT",iso_n3:"634"},geometry:{type:"Polygon",coordinates:[[[51.267969,24.607227],[51.608887,25.052881],[51.543066,25.902393],[51.262305,26.153271],[50.762891,25.444727],[50.804395,24.789258],[51.267969,24.607227]]]}},{type:"Feature",properties:{name:"葡萄牙",full_name:"葡萄牙共和国",iso_a2:"PT",iso_a3:"PRT",iso_n3:"620"},geometry:{type:"MultiPolygon",coordinates:[[[[-17.190869,32.868604],[-17.018262,32.662793],[-16.693262,32.758008],[-17.190869,32.868604]]],[[[-8.777148,41.941064],[-8.684619,40.752539],[-9.479736,38.798779],[-9.356738,38.6979],[-9.135791,38.742773],[-8.791602,39.078174],[-9.021484,38.746875],[-9.250391,38.656738],[-9.213281,38.448096],[-8.798877,38.518164],[-8.668311,38.424316],[-8.881104,38.44668],[-8.81416,37.430811],[-8.997803,37.032275],[-7.406152,37.179443],[-7.443945,37.728271],[-6.957568,38.187891],[-7.343018,38.457422],[-6.997949,39.056445],[-7.535693,39.661572],[-6.975391,39.798389],[-6.928467,41.009131],[-6.2125,41.532031],[-6.618262,41.942383],[-8.15249,41.811963],[-8.266064,42.137402],[-8.777148,41.941064]]]]}},{type:"Feature",properties:{name:"波兰",full_name:"波兰共和国",iso_a2:"PL",iso_a3:"POL",iso_n3:"616"},geometry:{type:"Polygon",coordinates:[[[23.605273,51.51792],[23.652441,52.040381],[23.175098,52.286621],[23.91543,52.770264],[23.484668,53.939795],[22.766211,54.356787],[19.604395,54.45918],[18.836426,54.36958],[18.43623,54.744727],[18.759277,54.68457],[18.323438,54.838184],[17.842969,54.816699],[14.211426,53.950342],[14.213672,53.870752],[14.583496,53.639355],[14.258887,53.729639],[14.128613,52.878223],[14.619434,52.528516],[15.016602,51.252734],[14.809375,50.858984],[14.99375,51.014355],[16.282227,50.655615],[16.63916,50.102148],[16.880078,50.427051],[17.702246,50.307178],[17.627051,50.116406],[18.562402,49.879346],[18.832227,49.510791],[19.149414,49.4],[19.441602,49.597705],[20.057617,49.181299],[20.362988,49.385254],[21.639648,49.411963],[22.538672,49.072705],[22.852051,49.062744],[22.706152,49.606201],[24.089941,50.530469],[23.605273,51.51792]]]}},{type:"Feature",properties:{name:"菲律宾",full_name:"菲律宾共和国",iso_a2:"PH",iso_a3:"PHL",iso_n3:"608"},geometry:{type:"MultiPolygon",coordinates:[[[[121.101562,18.615283],[120.599707,18.507861],[120.36875,16.10957],[119.772559,16.255127],[120.082129,14.851074],[120.43877,14.453369],[120.583691,14.88125],[120.941309,14.645068],[120.637109,13.804492],[121.344141,13.649121],[121.77793,13.937646],[122.599902,13.194141],[122.595215,13.907617],[123.310938,13.044092],[123.948535,12.916406],[124.059766,12.56709],[124.142773,13.035791],[123.785156,13.110547],[123.549609,13.645752],[123.815723,13.837109],[123.320312,14.06167],[123.101953,13.750244],[122.627148,14.317529],[122.199707,14.148047],[122.211719,13.930176],[121.766602,14.168066],[121.392285,15.324414],[121.595313,15.933252],[122.135156,16.184814],[122.519141,17.124854],[122.152344,17.664404],[122.265527,18.458838],[121.845605,18.29541],[121.101562,18.615283]]],[[[117.311133,8.4396],[119.686914,10.500342],[119.55332,11.313525],[119.223828,10.477295],[117.349902,8.713574],[117.311133,8.4396]]],[[[122.496191,11.615088],[121.916016,11.854346],[122.103516,11.64292],[121.954004,10.444385],[122.769922,10.823828],[123.119531,11.286816],[123.158301,11.535547],[122.496191,11.615088]]],[[[123.130859,9.064111],[123.320508,9.272949],[123.162012,9.864258],[123.567578,10.780762],[123.256641,10.993945],[122.983301,10.886621],[122.855566,10.086914],[122.399512,9.823047],[123.130859,9.064111]]],[[[124.574609,11.343066],[124.330664,11.535205],[124.445508,10.923584],[124.786719,10.781396],[124.780762,10.168066],[125.026563,10.033105],[124.9875,10.367578],[125.268457,10.307715],[125.026563,11.211719],[124.574609,11.343066]]],[[[125.239551,12.527881],[124.294727,12.569336],[124.445703,12.152783],[124.99502,11.764941],[125.034277,11.34126],[125.735645,11.049609],[125.535645,12.191406],[125.239551,12.527881]]],[[[120.704395,13.479492],[120.338477,13.412354],[121.236719,12.218799],[121.540625,12.638184],[121.522754,13.131201],[121.202734,13.432324],[120.704395,13.479492]]],[[[126.005957,9.320947],[125.471289,9.756787],[125.49873,9.014746],[124.868945,8.972266],[124.731152,8.562988],[124.404883,8.599854],[123.799414,8.049121],[123.849219,8.432715],[123.43457,8.70332],[122.911133,8.156445],[122.243359,7.945117],[121.964258,6.968213],[122.616211,7.763135],[123.390918,7.40752],[123.66582,7.817773],[124.206641,7.396436],[123.985254,6.993701],[124.078125,6.404443],[124.927344,5.875342],[125.231543,6.069531],[125.346484,5.598975],[125.667969,5.978662],[125.380664,6.689941],[125.689258,7.263037],[125.824414,7.333301],[126.189355,6.309668],[126.19209,6.852539],[126.581543,7.247754],[126.458691,8.202832],[126.139551,8.595654],[126.30459,8.952051],[126.005957,9.320947]]],[[[123.370313,9.449609],[124.00498,10.400098],[124.038867,11.273535],[123.38623,9.96709],[123.370313,9.449609]]],[[[121.159375,6.075635],[120.876367,5.952637],[121.411035,5.939844],[121.159375,6.075635]]],[[[120.1,12.167676],[119.885742,12.299854],[120.010547,12.008252],[120.314551,12.012402],[120.1,12.167676]]],[[[124.593848,9.787207],[124.335742,10.159912],[123.817187,9.817383],[124.122461,9.599316],[124.593848,9.787207]]],[[[122.092871,6.42832],[122.323535,6.602246],[121.832031,6.664062],[122.092871,6.42832]]],[[[125.690234,9.914453],[125.666797,10.440137],[125.494824,10.118701],[125.690234,9.914453]]],[[[121.914844,13.540332],[122.004883,13.20498],[122.114551,13.463184],[121.914844,13.540332]]],[[[122.094043,12.354883],[122.14502,12.652637],[122.013965,12.105615],[122.094043,12.354883]]],[[[123.281836,12.853418],[122.95752,13.107178],[123.367188,12.70083],[123.281836,12.853418]]],[[[123.716602,12.287354],[123.236426,12.583496],[123.157813,11.925635],[123.47373,12.21665],[124.045508,11.752441],[123.716602,12.287354]]],[[[124.353613,13.632227],[124.224902,14.077588],[124.038867,13.663135],[124.353613,13.632227]]],[[[122.033496,15.005029],[121.839844,15.038135],[121.933008,14.656055],[122.033496,15.005029]]]]}},{type:"Feature",properties:{name:"秘鲁",full_name:"秘鲁共和国",iso_a2:"PE",iso_a3:"PER",iso_n3:"604"},geometry:{type:"Polygon",coordinates:[[[-69.965918,-4.235938],[-70.339502,-3.814355],[-70.735107,-3.781543],[-70.09585,-2.658203],[-70.968555,-2.206836],[-72.941113,-2.394043],[-73.664307,-1.248828],[-74.246387,-.970605],[-74.801758,-.200098],[-75.284473,-.106543],[-75.62627,-.122852],[-75.259375,-.590137],[-75.570557,-1.53125],[-76.679102,-2.562598],[-77.860596,-2.981641],[-78.158496,-3.465137],[-78.345361,-3.397363],[-78.686035,-4.562402],[-79.033301,-4.969141],[-79.330957,-4.927832],[-79.638525,-4.454883],[-80.478564,-4.430078],[-80.490137,-4.010059],[-80.179248,-3.877734],[-80.324658,-3.387891],[-81.283203,-4.322266],[-81.336621,-4.669531],[-80.881934,-5.635059],[-81.142041,-6.056738],[-79.994971,-6.768945],[-78.762256,-8.616992],[-77.633203,-11.287793],[-76.223633,-13.371191],[-76.289014,-14.133105],[-75.104248,-15.411914],[-72.467676,-16.708105],[-70.418262,-18.345605],[-69.926367,-18.206055],[-69.8521,-17.703809],[-69.510938,-17.506055],[-69.624854,-17.200195],[-68.842773,-16.337891],[-69.217578,-16.149121],[-69.420898,-15.640625],[-69.172461,-15.236621],[-69.359473,-14.795312],[-68.870898,-14.169727],[-69.074121,-13.682813],[-68.978613,-12.880078],[-68.685254,-12.501953],[-69.578613,-10.951758],[-70.642334,-11.010254],[-70.541113,-9.4375],[-71.237939,-9.966016],[-72.142969,-10.005176],[-72.379053,-9.510156],[-73.209424,-9.411426],[-72.974023,-8.993164],[-74.002051,-7.556055],[-73.72041,-7.309277],[-73.758105,-6.905762],[-73.137354,-6.46582],[-73.235547,-6.098438],[-72.887061,-5.122754],[-70.799512,-4.17334],[-69.965918,-4.235938]]]}},{type:"Feature",properties:{name:"巴拉圭",full_name:"巴拉圭共和国",iso_a2:"PY",iso_a3:"PRY",iso_n3:"600"},geometry:{type:"Polygon",coordinates:[[[-58.159766,-20.164648],[-58.180176,-19.817871],[-59.090527,-19.28623],[-61.756836,-19.645312],[-62.276318,-20.5625],[-62.650977,-22.233691],[-61.03291,-23.755664],[-59.89248,-24.093555],[-57.643896,-25.328418],[-58.604834,-27.314355],[-56.437158,-27.553809],[-56.164062,-27.321484],[-55.714648,-27.414844],[-54.825488,-26.652246],[-54.615869,-25.576074],[-54.241797,-24.047266],[-54.625488,-23.8125],[-55.415918,-23.951367],[-55.84917,-22.307617],[-56.447803,-22.076172],[-56.937256,-22.271289],[-57.955908,-22.10918],[-57.830225,-20.997949],[-58.159766,-20.164648]]]}},{type:"Feature",properties:{name:"巴布亚新几内亚",full_name:"巴布亚新几内亚独立国",iso_a2:"PG",iso_a3:"PNG",iso_n3:"598"},geometry:{type:"MultiPolygon",coordinates:[[[[152.96582,-4.756348],[153.016797,-4.105664],[152.03291,-3.251367],[150.825391,-2.572949],[150.746094,-2.738867],[152.279395,-3.582422],[152.96582,-4.756348]]],[[[151.915625,-4.296777],[151.593066,-4.200781],[151.671191,-4.883301],[150.900293,-5.447168],[150.183105,-5.523633],[150.090039,-5.011816],[149.831445,-5.524121],[148.432031,-5.471777],[148.337207,-5.669434],[149.652539,-6.29043],[150.473535,-6.263379],[151.515137,-5.552344],[152.077051,-5.458301],[151.983691,-5.074414],[152.351172,-4.822168],[152.405664,-4.340723],[151.915625,-4.296777]]],[[[140.976172,-9.11875],[142.647168,-9.327832],[143.366211,-8.961035],[143.111816,-8.474512],[142.206836,-8.195801],[143.61377,-8.200391],[143.518164,-8.000684],[143.942285,-7.944238],[143.654883,-7.460352],[144.142871,-7.757227],[144.509863,-7.567383],[146.033203,-8.076367],[147.768652,-10.070117],[149.754102,-10.353027],[150.319922,-10.654883],[150.647168,-10.517969],[150.446094,-10.307324],[150.849512,-10.236035],[149.874414,-10.012988],[149.76123,-9.805859],[150.011035,-9.688184],[149.263184,-9.497852],[149.19834,-9.03125],[148.583105,-9.051758],[148.126758,-8.103613],[147.190039,-7.378125],[146.953613,-6.834082],[147.845508,-6.662402],[147.566699,-6.056934],[145.745215,-5.402441],[145.766992,-4.823047],[144.477734,-3.825293],[140.973438,-2.609766],[140.976172,-9.11875]]],[[[151.080957,-10.020117],[150.776074,-9.709082],[151.230859,-10.194727],[151.296484,-9.956738],[151.080957,-10.020117]]],[[[150.34541,-9.493848],[150.208301,-9.206348],[150.109766,-9.361914],[150.34541,-9.493848]]],[[[147.067578,-1.960156],[146.65625,-1.974023],[146.546484,-2.208594],[147.438086,-2.058984],[147.067578,-1.960156]]],[[[150.436621,-2.661816],[150.227148,-2.38418],[149.961621,-2.473828],[150.436621,-2.661816]]],[[[150.528418,-9.346582],[150.43623,-9.624609],[150.894043,-9.66748],[150.528418,-9.346582]]],[[[153.536133,-11.476172],[153.203613,-11.324121],[153.759863,-11.586328],[153.536133,-11.476172]]],[[[155.957617,-6.686816],[154.729297,-5.444434],[154.759277,-5.931348],[155.344043,-6.72168],[155.719336,-6.862793],[155.957617,-6.686816]]]]}},{type:"Feature",properties:{name:"巴拿马",full_name:"巴拿马共和国",iso_a2:"PA",iso_a3:"PAN",iso_n3:"591"},geometry:{type:"Polygon",coordinates:[[[-77.374219,8.658301],[-78.082764,9.236279],[-79.577295,9.597852],[-81.354785,8.780566],[-81.894482,9.14043],[-81.780225,8.957227],[-82.244189,9.031494],[-82.563574,9.57666],[-82.939844,9.44917],[-82.727832,8.916064],[-83.027344,8.337744],[-82.879346,8.070654],[-82.781152,8.303516],[-82.235449,8.311035],[-81.727637,8.137549],[-81.268408,7.625488],[-81.063867,7.899756],[-80.845557,7.220068],[-80.438867,7.274951],[-80.01123,7.500049],[-80.458984,8.213867],[-79.50708,8.970068],[-79.086377,8.997168],[-78.409863,8.355322],[-78.099463,8.496973],[-77.760547,8.133252],[-78.141895,8.386084],[-78.421582,8.060986],[-77.901172,7.229346],[-77.761914,7.698828],[-77.538281,7.56626],[-77.195996,7.972461],[-77.374219,8.658301]]]}},{type:"Feature",properties:{name:"帕劳",full_name:"帕劳共和国",iso_a2:"PW",iso_a3:"PLW",iso_n3:"585"},geometry:{type:"Polygon",coordinates:[[[134.59541,7.382031],[134.651172,7.712109],[134.515723,7.525781],[134.59541,7.382031]]]}},{type:"Feature",properties:{name:"巴基斯坦",full_name:"巴基斯坦伊斯兰共和国",iso_a2:"PK",iso_a3:"PAK",iso_n3:"586"},geometry:{type:"Polygon",coordinates:[[[76.766895,35.661719],[75.912305,36.048975],[75.772168,36.694922],[74.541406,37.022168],[72.249805,36.734717],[71.23291,36.121777],[71.620508,35.183008],[70.965625,34.530371],[71.051563,34.049707],[69.889648,34.007275],[70.261133,33.289014],[69.501562,33.020068],[69.279297,31.936816],[68.868945,31.634229],[68.161035,31.802979],[67.452832,31.234619],[66.829297,31.263672],[66.346875,30.802783],[66.23125,29.865723],[64.09873,29.391943],[62.476562,29.40835],[60.843359,29.858691],[61.889844,28.546533],[62.758008,28.243555],[62.762988,27.250195],[63.301563,27.151465],[63.157812,26.649756],[61.842383,26.225928],[61.587891,25.202344],[64.059375,25.40293],[64.658984,25.184082],[66.467676,25.445312],[66.131152,25.493262],[66.324219,25.601807],[66.698633,25.226318],[66.703027,24.860938],[67.171484,24.756104],[67.563086,23.881836],[68.165039,23.857324],[68.724121,23.964697],[68.781152,24.313721],[69.805176,24.165234],[71.044043,24.400098],[70.648438,25.666943],[70.100195,25.910059],[70.147656,26.506445],[69.506934,26.742676],[69.537012,27.122949],[70.403711,28.025049],[70.797949,27.709619],[71.870313,27.9625],[72.341895,28.751904],[72.90332,29.02876],[73.381641,29.934375],[73.80918,30.093359],[74.632812,31.034668],[74.555566,31.818555],[75.333496,32.279199],[74.685742,32.493799],[74.663281,32.757666],[74.35459,32.768701],[74.003809,33.189453],[73.976465,33.721289],[74.250879,33.946094],[73.904102,34.075684],[73.96123,34.653467],[75.70918,34.503076],[77.048633,35.109912],[76.766895,35.661719]]]}},{type:"Feature",properties:{name:"阿曼",full_name:"阿曼苏丹国",iso_a2:"OM",iso_a3:"OMN",iso_n3:"512"},geometry:{type:"MultiPolygon",coordinates:[[[[53.085645,16.648389],[54.068164,17.005518],[55.06416,17.038916],[55.479102,17.843262],[56.383496,17.987988],[56.825977,18.753516],[57.811621,19.01709],[57.861816,20.244141],[58.169434,20.589502],[58.474219,20.406885],[59.8,22.219922],[59.823242,22.508984],[59.429395,22.66084],[58.773047,23.517188],[57.123047,23.980713],[56.387988,24.979199],[56.063867,24.73877],[56.000586,24.953223],[55.795703,24.868115],[55.76084,24.242676],[55.985156,24.063379],[55.468457,23.941113],[55.18584,22.704102],[55.641016,22.001855],[54.977344,19.995947],[51.977637,18.996143],[53.085645,16.648389]]],[[[56.297852,25.650684],[56.413086,26.351172],[56.080469,26.062646],[56.297852,25.650684]]]]}},{type:"Feature",properties:{name:"挪威",full_name:"挪威王国",iso_a2:"NO",iso_a3:"NOR",iso_n3:"578"},geometry:{type:"MultiPolygon",coordinates:[[[[20.622168,69.036865],[21.59375,69.273584],[22.410938,68.719873],[23.854004,68.805908],[24.941406,68.593262],[26.072461,69.691553],[27.747852,70.064844],[29.141602,69.671436],[28.96582,69.021973],[30.180176,69.63584],[30.860742,69.538428],[30.869727,69.783447],[29.79209,69.727881],[28.804297,70.092529],[30.944141,70.274414],[30.065137,70.702979],[28.831543,70.863965],[28.192969,70.248584],[28.392285,70.975293],[27.59707,71.091309],[26.989355,70.511377],[26.585059,70.41001],[26.661328,70.939746],[25.043848,70.109033],[25.768164,70.853174],[24.658008,71.001025],[23.353906,69.983398],[22.68457,70.374756],[21.355762,70.233398],[21.974707,69.83457],[20.62207,69.913916],[20.739453,69.520508],[20.054492,69.332666],[20.324219,69.945312],[19.641504,69.424023],[19.722461,69.781641],[19.197266,69.747852],[18.915918,69.335596],[18.259766,69.470605],[18.101465,69.156299],[16.514355,68.532568],[17.552832,68.42627],[16.203809,68.316748],[16.312305,67.881445],[16.00791,68.228711],[14.798926,67.809326],[15.594434,67.348535],[14.961914,67.574268],[14.441699,67.271387],[15.415723,67.202441],[14.108789,67.119238],[13.211426,66.64082],[13.118848,66.230664],[14.03418,66.297559],[12.783789,66.100439],[12.133887,65.27915],[12.915527,65.339258],[11.489355,64.97583],[9.567285,63.706152],[10.055078,63.512695],[11.306641,64.048877],[11.370703,63.804834],[10.020996,63.39082],[9.696875,63.624561],[9.156055,63.459326],[8.576172,63.601172],[8.158008,63.161523],[8.623145,62.84624],[7.571875,63.099512],[6.734961,62.720703],[8.045508,62.77124],[7.653125,62.564014],[6.35293,62.611133],[6.136133,62.407471],[6.580078,62.407275],[5.143164,62.159912],[5.266895,61.935596],[6.730762,61.869775],[4.930078,61.87832],[5.106738,61.187549],[7.173535,61.165967],[7.442578,61.434619],[7.604492,61.210547],[7.038672,60.95293],[6.777832,61.142432],[5.008594,61.038184],[5.11582,60.635986],[5.64834,60.687988],[5.137109,60.445605],[5.688574,60.123193],[5.205664,60.087939],[5.145801,59.638818],[6.15332,60.34624],[6.995703,60.511963],[5.730469,59.863086],[6.216602,59.818359],[5.242188,59.564307],[5.173242,59.162549],[6.415332,59.547119],[5.88916,59.097949],[6.363281,59.000928],[5.555566,58.975195],[5.706836,58.523633],[7.004883,58.024219],[8.166113,58.145312],[9.557227,59.112695],[10.179395,59.009277],[10.595312,59.764551],[10.834473,59.183936],[11.388281,59.036523],[11.642773,58.926074],[11.680762,59.592285],[12.486133,60.106787],[12.294141,61.002686],[12.880762,61.352295],[12.155371,61.720752],[12.175195,63.595947],[12.792773,64],[14.141211,64.173535],[13.650293,64.581543],[14.479688,65.301465],[14.543262,66.129346],[15.483789,66.305957],[16.783594,67.89502],[17.324609,68.103809],[17.916699,67.964893],[18.303027,68.55542],[19.969824,68.356396],[20.116699,69.020898],[20.622168,69.036865]]],[[[23.440527,70.815771],[21.994531,70.657129],[22.829102,70.541553],[23.440527,70.815771]]],[[[15.207129,68.943115],[14.404688,68.663232],[15.22207,68.616309],[15.207129,68.943115]]],[[[19.255078,70.066406],[19.132715,70.244141],[18.129883,69.557861],[19.334766,69.820264],[19.255078,70.066406]]],[[[17.503027,69.59624],[17.08252,69.013672],[17.950684,69.198145],[17.503027,69.59624]]],[[[15.760352,68.56123],[16.048047,69.302051],[15.412598,68.61582],[14.25752,68.190771],[15.975293,68.40249],[16.328906,68.876318],[15.760352,68.56123]]],[[[32.525977,80.119141],[33.629297,80.217432],[31.481934,80.10791],[32.525977,80.119141]]],[[[21.608105,78.595703],[20.22793,78.477832],[21.653125,77.923535],[20.928125,77.459668],[22.685352,77.553516],[22.553711,77.26665],[24.901855,77.756592],[23.116699,77.991504],[21.608105,78.595703]]],[[[20.897852,80.249951],[19.733301,80.477832],[19.343359,80.116406],[17.916895,80.143115],[18.725,79.760742],[20.784082,79.748584],[20.128223,79.4896],[23.947754,79.194287],[25.641211,79.403027],[26.86084,80.16001],[24.297559,80.3604],[23.114551,80.186963],[23.008008,80.473975],[22.289746,80.049219],[20.897852,80.249951]]],[[[16.786719,79.906738],[16.245703,80.049463],[16.34375,78.976123],[14.593652,79.79873],[14.02959,79.344141],[12.555371,79.569482],[13.692871,79.860986],[10.804004,79.798779],[10.737598,79.520166],[13.150195,78.2375],[14.638281,78.4146],[14.689258,78.720947],[15.417383,78.473242],[16.782617,78.663623],[17.00293,78.369385],[13.680566,78.028125],[14.089941,77.771387],[16.914062,77.897998],[13.995703,77.508203],[16.700488,76.579297],[19.676758,78.60957],[21.38877,78.74043],[18.677832,79.261719],[18.397363,79.605176],[17.66875,79.385938],[16.786719,79.906738]]],[[[11.250293,78.610693],[10.558203,78.90293],[12.116406,78.232568],[11.250293,78.610693]]]]}},{type:"Feature",properties:{name:"朝鲜",full_name:"朝鲜民主主义人民共和国",iso_a2:"KP",iso_a3:"PRK",iso_n3:"408"},geometry:{type:"Polygon",coordinates:[[[128.374609,38.623438],[127.394531,39.20791],[127.568164,39.781982],[129.708691,40.857324],[129.756348,41.712256],[130.687305,42.302539],[130.526953,42.5354],[129.898242,42.998145],[129.697852,42.448145],[128.923438,42.038232],[128.045215,41.9875],[128.149414,41.387744],[126.743066,41.724854],[125.989062,40.904639],[124.362109,40.004053],[124.638281,39.615088],[124.775293,39.758057],[125.36084,39.526611],[125.168848,38.805518],[125.554492,38.68623],[124.690918,38.129199],[125.206738,38.081543],[124.98877,37.931445],[125.357813,37.724805],[125.769141,37.985352],[126.116699,37.74292],[126.633887,37.781836],[127.090332,38.283887],[128.038965,38.308545],[128.374609,38.623438]]]}},{type:"Feature",properties:{name:"尼日利亚",full_name:"尼日利亚联邦共和国",iso_a2:"NG",iso_a3:"NGA",iso_n3:"566"},geometry:{type:"Polygon",coordinates:[[[13.606348,13.70459],[12.463184,13.09375],[10.475879,13.330225],[9.615918,12.810645],[8.750586,12.908154],[7.830469,13.340918],[7.005078,12.995557],[6.299805,13.658789],[5.491992,13.872852],[4.664844,13.733203],[4.147559,13.457715],[4.03877,12.934668],[3.64668,12.52998],[3.59541,11.696289],[3.487793,11.39541],[3.834473,10.607422],[3.044922,9.083838],[2.774805,9.048535],[2.706445,6.369238],[3.716992,6.597949],[3.450781,6.427051],[4.431348,6.348584],[5.112402,5.641553],[5.456641,5.611719],[5.199219,5.533545],[5.549707,5.474219],[5.367969,5.337744],[5.493262,4.83877],[6.076563,4.290625],[6.860352,4.37334],[6.767676,4.724707],[6.923242,4.390674],[7.154688,4.514404],[7.076563,4.716162],[7.800781,4.522266],[8.293066,4.557617],[8.252734,4.923975],[8.555859,4.755225],[8.997168,5.917725],[9.779883,6.760156],[10.60625,7.063086],[11.237305,6.450537],[11.861426,7.116406],[12.233398,8.282324],[12.782227,8.817871],[13.699902,10.873145],[14.575391,11.532422],[14.619727,12.150977],[14.197461,12.383789],[14.063965,13.078516],[13.606348,13.70459]]]}},{type:"Feature",properties:{name:"尼日尔",full_name:"尼日尔共和国",iso_a2:"NE",iso_a3:"NER",iso_n3:"562"},geometry:{type:"Polygon",coordinates:[[[13.606348,13.70459],[13.448242,14.380664],[15.474316,16.908398],[15.735059,19.904053],[15.963184,20.346191],[15.181836,21.523389],[14.979004,22.996191],[14.215527,22.619678],[13.48125,23.180176],[11.967871,23.517871],[7.481738,20.873096],[5.836621,19.47915],[4.227637,19.142773],[4.234668,16.996387],[3.842969,15.701709],[3.504297,15.356348],[1.300195,15.272266],[.947461,14.982129],[.21748,14.911475],[.429199,13.972119],[1.201172,13.35752],[.988477,13.364844],[.987305,13.041895],[1.564941,12.6354],[2.10459,12.70127],[2.072949,12.309375],[2.38916,11.89707],[2.366016,12.221924],[2.805273,12.383838],[3.59541,11.696289],[3.64668,12.52998],[4.03877,12.934668],[4.147559,13.457715],[4.664844,13.733203],[5.491992,13.872852],[6.299805,13.658789],[7.005078,12.995557],[7.830469,13.340918],[8.750586,12.908154],[9.615918,12.810645],[10.475879,13.330225],[12.463184,13.09375],[13.606348,13.70459]]]}},{type:"Feature",properties:{name:"尼加拉瓜",full_name:"尼加拉瓜共和国",iso_a2:"NI",iso_a3:"NIC",iso_n3:"558"},geometry:{type:"Polygon",coordinates:[[[-83.15752,14.993066],[-84.453564,14.643701],[-84.985156,14.752441],[-85.733936,13.858691],[-86.040381,14.050146],[-86.733643,13.763477],[-86.729297,13.284375],[-87.337256,12.979248],[-87.667529,12.903564],[-85.744336,11.062109],[-84.63418,11.045605],[-83.919287,10.735352],[-83.641992,10.917236],[-83.867871,11.300049],[-83.651758,11.642041],[-83.754248,12.501953],[-83.593359,12.713086],[-83.510938,12.411816],[-83.567334,13.320312],[-83.187744,14.340088],[-83.413721,14.825342],[-83.15752,14.993066]]]}},{type:"Feature",properties:{name:"新西兰",full_name:"新西兰",iso_a2:"NZ",iso_a3:"NZL",iso_n3:"554"},geometry:{type:"MultiPolygon",coordinates:[[[[173.115332,-41.279297],[172.704395,-40.667773],[172.943652,-40.51875],[172.640625,-40.518262],[171.48623,-41.794727],[171.011719,-42.885059],[170.969922,-42.718359],[169.178906,-43.913086],[168.457422,-44.030566],[167.908984,-44.664746],[167.194531,-44.963477],[167.155664,-45.410938],[166.743066,-45.468457],[167.00332,-45.712109],[166.488281,-45.831836],[166.916699,-45.957227],[166.731543,-46.197852],[167.539453,-46.148535],[168.382129,-46.605371],[169.342285,-46.620508],[170.77627,-45.870898],[171.240723,-44.26416],[172.179785,-43.895996],[172.035547,-43.701758],[173.065625,-43.874609],[172.52666,-43.464746],[172.624023,-43.272461],[173.221191,-42.976562],[174.283105,-41.740625],[174.069336,-41.429492],[174.370117,-41.103711],[174.038574,-41.241895],[174.302539,-41.019531],[173.797852,-41.271973],[173.947168,-40.924121],[173.115332,-41.279297]]],[[[168.144922,-46.862207],[167.783984,-46.699805],[167.521973,-47.258691],[168.240918,-47.07002],[168.144922,-46.862207]]],[[[173.269434,-34.934766],[173.043945,-34.429102],[172.705957,-34.455176],[173.313965,-35.443359],[173.626172,-35.319141],[173.412207,-35.542578],[174.054688,-36.359766],[173.914453,-35.908691],[174.392773,-36.240039],[174.401562,-36.601953],[174.188867,-36.492285],[174.475586,-36.941895],[174.928906,-37.084766],[174.58584,-37.097754],[174.928027,-37.804492],[174.597363,-38.785059],[173.763672,-39.31875],[175.155957,-40.114941],[175.1625,-40.621582],[174.635352,-41.289453],[175.309766,-41.610645],[176.842188,-40.157812],[177.076758,-39.221777],[177.522949,-39.073828],[177.908789,-39.239551],[178.53623,-37.69209],[178.00918,-37.554883],[177.274023,-37.993457],[176.108398,-37.645117],[175.46084,-36.475684],[175.54248,-37.201367],[174.722461,-36.841211],[174.802148,-36.309473],[174.320312,-35.24668],[173.269434,-34.934766]]],[[[166.221094,-50.761523],[166.101367,-50.538965],[165.88916,-50.807715],[166.221094,-50.761523]]],[[[-176.177637,-43.740332],[-176.847656,-43.823926],[-176.515527,-44.116602],[-176.516553,-43.784766],[-176.177637,-43.740332]]]]}},{type:"Feature",properties:{name:"纽埃",full_name:"纽埃",iso_a2:"NU",iso_a3:"NIU",iso_n3:"570"},geometry:{type:"Polygon",coordinates:[[[-169.803418,-19.083008],[-169.834033,-18.966016],[-169.94834,-19.072852],[-169.803418,-19.083008]]]}},{type:"Feature",properties:{name:"库克群岛",full_name:"库克群岛",iso_a2:"CK",iso_a3:"COK",iso_n3:"184"},geometry:{type:"Polygon",coordinates:[[[-159.740527,-21.249219],[-159.768359,-21.188477],[-159.832031,-21.200488],[-159.740527,-21.249219]]]}},{type:"Feature",properties:{name:"荷兰",full_name:"荷兰王国",iso_a2:"NL",iso_a3:"NLD",iso_n3:"528"},geometry:{type:"MultiPolygon",coordinates:[[[[5.993945,50.750439],[5.94873,51.802686],[6.800391,51.967383],[7.035156,52.380225],[6.710742,52.617871],[7.033008,52.651367],[7.197266,53.282275],[6.062207,53.40708],[4.76875,52.941309],[3.946875,51.810547],[4.274121,51.471631],[3.448926,51.540771],[4.226172,51.386475],[5.030957,51.469092],[5.796484,51.153076],[5.639453,50.843604],[5.993945,50.750439]]],[[[4.226172,51.386475],[3.350098,51.377686],[3.902051,51.207666],[4.226172,51.386475]]]]}},{type:"Feature",properties:{name:"阿鲁巴",full_name:"阿鲁巴（荷兰）",iso_a2:"AW",iso_a3:"ABW",iso_n3:"533"},geometry:{type:"Polygon",coordinates:[[[-69.899121,12.452002],[-70.035107,12.614111],[-70.066113,12.546973],[-69.899121,12.452002]]]}},{type:"Feature",properties:{name:"库拉索",full_name:"库拉索岛（荷兰）",iso_a2:"CW",iso_a3:"CUW",iso_n3:"531"},geometry:{type:"Polygon",coordinates:[[[-68.751074,12.059766],[-69.158887,12.380273],[-68.995117,12.141846],[-68.751074,12.059766]]]}},{type:"Feature",properties:{name:"尼泊尔",full_name:"尼泊尔",iso_a2:"NP",iso_a3:"NPL",iso_n3:"524"},geometry:{type:"Polygon",coordinates:[[[88.109766,27.870605],[87.141406,27.83833],[86.137012,28.114355],[85.994531,27.9104],[85.67832,28.277441],[85.122461,28.315967],[85.159082,28.592236],[84.228711,28.911768],[84.101367,29.219971],[83.583496,29.183594],[82.043359,30.326758],[81.010254,30.164502],[80.401855,29.730273],[80.070703,28.830176],[82.733398,27.518994],[84.091016,27.491357],[85.794531,26.60415],[87.995117,26.382373],[88.109766,27.870605]]]}},{type:"Feature",properties:{name:"瑙鲁",full_name:"瑙鲁共和国",iso_a2:"NR",iso_a3:"NRU",iso_n3:"520"},geometry:{type:"Polygon",coordinates:[[[166.958398,-.516602],[166.907031,-.52373],[166.938965,-.550781],[166.958398,-.516602]]]}},{type:"Feature",properties:{name:"纳米比亚",full_name:"纳米比亚共和国",iso_a2:"NA",iso_a3:"NAM",iso_n3:"516"},geometry:{type:"Polygon",coordinates:[[[23.380664,-17.640625],[20.745508,-18.019727],[18.955273,-17.803516],[18.396387,-17.399414],[14.01748,-17.408887],[13.101172,-16.967676],[11.743066,-17.249219],[11.775879,-18.001758],[14.462793,-22.449121],[14.501562,-24.201953],[14.967773,-26.318066],[15.341504,-27.386523],[16.447559,-28.617578],[17.05625,-28.031055],[17.447949,-28.698145],[18.102734,-28.87168],[19.161719,-28.93877],[19.980469,-28.45127],[19.980469,-24.776758],[19.977344,-22.000195],[20.979492,-21.961914],[20.974121,-18.318848],[23.219336,-17.999707],[23.599707,-18.459961],[24.243945,-18.023438],[25.258789,-17.793555],[24.73291,-17.517773],[23.380664,-17.640625]]]}},{type:"Feature",properties:{name:"莫桑比克",full_name:"莫桑比克共和国",iso_a2:"MZ",iso_a3:"MOZ",iso_n3:"508"},geometry:{type:"Polygon",coordinates:[[[31.287891,-22.402051],[31.98584,-24.460645],[31.948242,-25.957617],[32.112891,-26.839453],[32.886133,-26.849316],[32.954883,-26.083594],[32.848828,-26.268066],[32.59043,-26.004102],[32.792188,-25.644336],[34.99209,-24.650586],[35.489648,-24.065527],[35.530078,-22.248145],[35.315723,-22.396875],[34.649414,-19.701367],[34.947852,-19.812695],[36.403711,-18.769727],[37.244531,-17.739941],[39.844629,-16.435645],[40.558984,-15.473438],[40.844531,-14.718652],[40.436816,-12.983105],[40.463574,-10.464355],[38.491797,-11.413281],[37.920215,-11.294727],[37.372852,-11.710449],[36.305664,-11.706348],[35.911328,-11.454688],[34.959473,-11.578125],[34.618555,-11.620215],[34.357813,-12.164746],[34.563672,-13.360156],[35.247461,-13.896875],[35.892773,-14.891797],[35.755273,-16.058301],[35.358496,-16.160547],[35.167188,-16.560254],[35.272559,-17.118457],[34.248242,-15.8875],[34.54082,-15.297266],[34.505273,-14.598145],[34.33252,-14.408594],[33.636426,-14.568164],[33.201758,-14.013379],[30.231836,-14.990332],[30.396094,-15.643066],[30.437793,-15.995313],[31.23623,-16.023633],[32.948047,-16.712305],[32.993066,-18.35957],[32.699707,-18.940918],[32.992773,-19.984863],[32.492383,-20.659766],[32.429785,-21.29707],[31.287891,-22.402051]]]}},{type:"Feature",properties:{name:"摩洛哥",full_name:"摩洛哥王国",iso_a2:"MA",iso_a3:"MAR",iso_n3:"504"},geometry:{type:"Polygon",coordinates:[[[-2.219629,35.104199],[-2.839941,35.127832],[-2.972217,35.407275],[-4.62832,35.206396],[-5.252686,35.614746],[-5.277832,35.902734],[-5.924805,35.785791],[-6.900977,33.969043],[-8.512842,33.252441],[-9.24585,32.572461],[-9.808691,31.424609],[-9.66709,30.109277],[-10.200586,29.380371],[-11.552686,28.310107],[-12.948926,27.91416],[-13.575781,26.735107],[-14.413867,26.253711],[-14.904297,24.719775],[-15.899316,23.844434],[-17.003076,21.420703],[-14.750977,21.500586],[-14.221191,22.310156],[-13.891113,23.691016],[-12.431152,24.830664],[-12.060986,25.99082],[-11.718213,26.104102],[-11.392578,26.883398],[-9.817871,26.850195],[-8.794873,27.120703],[-8.68335,27.656445],[-8.678418,28.689404],[-7.685156,29.349512],[-5.448779,29.956934],[-4.968262,30.465381],[-3.666797,30.964014],[-3.826758,31.661914],[-3.017383,31.834277],[-2.887207,32.068848],[-1.225928,32.107227],[-1.065527,32.468311],[-1.679199,33.318652],[-1.795605,34.751904],[-2.219629,35.104199]]]}},{type:"Feature",properties:{name:"西撒哈拉",full_name:"西撒哈拉",iso_a2:"EH",iso_a3:"ESH",iso_n3:"732"},geometry:{type:"Polygon",coordinates:[[[-8.68335,27.656445],[-8.794873,27.120703],[-9.817871,26.850195],[-11.392578,26.883398],[-11.718213,26.104102],[-12.060986,25.99082],[-12.431152,24.830664],[-13.891113,23.691016],[-14.221191,22.310156],[-14.750977,21.500586],[-17.003076,21.420703],[-17.048047,20.806152],[-16.964551,21.329248],[-13.016211,21.333936],[-13.153271,22.820508],[-12.023438,23.467578],[-12.016309,25.99541],[-8.682227,25.995508],[-8.68335,27.285938],[-8.68335,27.656445]]]}},{type:"Feature",properties:{name:"黑山",full_name:"黑山",iso_a2:"ME",iso_a3:"MNE",iso_n3:"499"},geometry:{type:"Polygon",coordinates:[[[19.194336,43.533301],[18.460156,42.9979],[18.436328,42.559717],[18.51748,42.43291],[19.342383,41.869092],[19.654492,42.628564],[20.063965,42.547266],[20.344336,42.82793],[19.194336,43.533301]]]}},{type:"Feature",properties:{name:"蒙古",full_name:"蒙古国",iso_a2:"MN",iso_a3:"MNG",iso_n3:"496"},geometry:{type:"Polygon",coordinates:[[[87.814258,49.162305],[87.979688,48.555127],[89.047656,48.002539],[90.02793,47.877686],[90.869922,46.954492],[90.877246,45.196094],[93.516211,44.944482],[95.350293,44.278076],[96.385449,42.720361],[101.495313,42.53877],[102.156641,42.158105],[103.711133,41.751318],[104.498242,41.877002],[104.498242,41.658691],[104.982031,41.595508],[106.77002,42.288721],[109.339844,42.438379],[110.400391,42.773682],[111.933203,43.711426],[111.402246,44.367285],[111.898047,45.064062],[113.587012,44.745703],[114.560156,45.38999],[115.681055,45.458252],[116.562598,46.289795],[117.333398,46.362012],[117.438086,46.58623],[119.867188,46.672168],[119.711133,47.15],[118.498438,47.983984],[117.768359,47.987891],[117.350781,47.652197],[116.760547,47.869775],[115.898242,47.686914],[115.616406,47.874805],[116.683301,49.823779],[116.216797,50.009277],[115.429199,49.896484],[114.29707,50.274414],[112.806445,49.523584],[110.709766,49.142969],[108.613672,49.322803],[107.916602,49.947803],[107.233301,49.989404],[106.711133,50.312598],[105.383594,50.47373],[103.304395,50.200293],[102.288379,50.585107],[102.111523,51.353467],[98.893164,52.117285],[97.835742,51.05166],[98.250293,50.302441],[97.359766,49.741455],[94.614746,50.02373],[94.251074,50.556396],[92.354785,50.86416],[90.053711,50.09375],[89.395605,49.611523],[88.192578,49.451709],[87.814258,49.162305]]]}},{type:"Feature",properties:{name:"摩尔多瓦",full_name:"摩尔多瓦共和国",iso_a2:"MD",iso_a3:"MDA",iso_n3:"498"},geometry:{type:"Polygon",coordinates:[[[26.618945,48.259863],[28.071777,46.978418],[28.2125,45.450439],[28.947754,46.049951],[28.958398,46.458496],[30.131055,46.423096],[29.134863,47.489697],[29.125391,47.964551],[27.549219,48.477734],[26.618945,48.259863]]]}},{type:"Feature",properties:{name:"摩纳哥",full_name:"摩纳哥公国",iso_a2:"MC",iso_a3:"MCO",iso_n3:"492"},geometry:{type:"Polygon",coordinates:[[[7.438672,43.750439],[7.39502,43.765332],[7.377734,43.731738],[7.438672,43.750439]]]}},{type:"Feature",properties:{name:"墨西哥",full_name:"墨西哥合众国",iso_a2:"MX",iso_a3:"MEX",iso_n3:"484"},geometry:{type:"MultiPolygon",coordinates:[[[[-117.128271,32.53335],[-115.673828,29.756396],[-114.048486,28.426172],[-114.265869,27.934473],[-114.069336,27.675684],[-114.300586,27.872998],[-114.993506,27.736035],[-113.598535,26.721289],[-113.155811,26.94624],[-113.020752,26.583252],[-112.377246,26.213916],[-112.069873,25.572852],[-112.072559,24.840039],[-110.362695,23.604932],[-110.00625,22.894043],[-109.495703,23.159814],[-109.42085,23.480127],[-110.262891,24.344531],[-110.367432,24.100488],[-110.659326,24.341455],[-111.569678,26.707617],[-111.795264,26.879688],[-111.699414,26.580957],[-111.862646,26.678516],[-112.734033,27.825977],[-112.87085,28.424219],[-114.550488,30.022266],[-114.933594,31.900732],[-113.046729,31.179248],[-113.057666,30.651025],[-112.161768,29.018896],[-111.121387,27.966992],[-110.529883,27.864209],[-110.377295,27.233301],[-109.27627,26.533887],[-109.116699,26.252734],[-109.425635,26.032568],[-109.384961,25.727148],[-108.886572,25.733447],[-109.028809,25.480469],[-108.051465,25.067041],[-108.280762,25.081543],[-107.951172,24.614893],[-107.511914,24.48916],[-107.764941,24.471924],[-105.791797,22.62749],[-105.649121,21.988086],[-105.208691,21.49082],[-105.51084,20.80874],[-105.260156,20.579053],[-105.669434,20.385596],[-104.938477,19.309375],[-103.912451,18.828467],[-103.441602,18.325391],[-101.918701,17.959766],[-100.847803,17.200488],[-97.754785,15.966846],[-96.213574,15.693066],[-94.799414,16.209668],[-95.02085,16.277637],[-94.858691,16.419727],[-94.587109,16.31582],[-94.661523,16.201904],[-94.00127,16.018945],[-94.37417,16.284766],[-93.166895,15.448047],[-92.235156,14.54541],[-92.204248,15.275],[-91.736572,16.070166],[-90.447168,16.072705],[-90.416992,16.391016],[-91.409619,17.255859],[-90.992969,17.252441],[-90.98916,17.816406],[-89.161475,17.814844],[-88.295654,18.472412],[-88.031738,18.838916],[-87.881982,18.273877],[-87.761816,18.446143],[-87.424756,19.58335],[-87.687695,19.637109],[-86.771777,21.150537],[-87.034766,21.592236],[-88.466699,21.569385],[-90.353125,21.009424],[-90.739258,19.352246],[-91.43667,18.889795],[-91.275244,18.624463],[-91.533984,18.456543],[-92.441016,18.675293],[-94.459766,18.16665],[-95.181836,18.700732],[-95.920361,18.81958],[-97.186328,20.717041],[-97.753809,22.02666],[-97.40918,21.272559],[-97.314502,21.564209],[-97.84248,22.510303],[-97.667676,24.38999],[-97.14624,25.961475],[-99.107764,26.446924],[-99.505322,27.54834],[-101.440381,29.776855],[-102.614941,29.752344],[-103.168311,28.998193],[-104.110596,29.386133],[-104.978809,30.645947],[-106.44541,31.768408],[-108.211816,31.779346],[-108.214453,31.329443],[-111.041992,31.324219],[-114.835938,32.508301],[-114.724756,32.715332],[-117.128271,32.53335]]],[[[-115.170605,28.069385],[-115.233545,28.368359],[-115.35293,28.103955],[-115.170605,28.069385]]],[[[-112.203076,29.005322],[-112.423535,29.203662],[-112.514062,28.847607],[-112.278418,28.769336],[-112.203076,29.005322]]],[[[-112.057275,24.545703],[-112.159424,25.285645],[-112.296777,24.789648],[-112.057275,24.545703]]]]}},{type:"Feature",properties:{name:"毛里求斯",full_name:"毛里求斯共和国",iso_a2:"MU",iso_a3:"MUS",iso_n3:"480"},geometry:{type:"Polygon",coordinates:[[[57.65127,-20.484863],[57.656543,-19.989941],[57.317676,-20.427637],[57.65127,-20.484863]]]}},{type:"Feature",properties:{name:"毛里塔尼亚",full_name:"毛里塔尼亚伊斯兰共和国",iso_a2:"MR",iso_a3:"MRT",iso_n3:"478"},geometry:{type:"Polygon",coordinates:[[[-12.280615,14.809033],[-11.940918,14.886914],[-11.502686,15.636816],[-10.895605,15.150488],[-10.696582,15.422656],[-9.446924,15.458203],[-9.350586,15.677393],[-9.176807,15.496094],[-5.5125,15.496289],[-5.359912,16.282861],[-5.628662,16.568652],[-5.941016,19.296191],[-6.594092,24.994629],[-4.822607,24.995605],[-8.68335,27.285938],[-8.682227,25.995508],[-12.016309,25.99541],[-12.023438,23.467578],[-13.153271,22.820508],[-13.016211,21.333936],[-16.964551,21.329248],[-17.048047,20.806152],[-16.92793,21.114795],[-16.210449,20.22793],[-16.514453,19.361963],[-16.213086,19.00332],[-16.030322,17.887939],[-16.535254,15.838379],[-16.239014,16.531299],[-14.53374,16.655957],[-13.409668,16.05918],[-12.280615,14.809033]]]}},{type:"Feature",properties:{name:"马耳他",full_name:"马耳他共和国",iso_a2:"MT",iso_a3:"MLT",iso_n3:"470"},geometry:{type:"Polygon",coordinates:[[[14.566211,35.852734],[14.35127,35.978418],[14.436426,35.82168],[14.566211,35.852734]]]}},{type:"Feature",properties:{name:"马里",full_name:"马里共和国",iso_a2:"ML",iso_a3:"MLI",iso_n3:"466"},geometry:{type:"Polygon",coordinates:[[[-11.389404,12.404395],[-11.502197,12.198633],[-11.305176,12.01543],[-10.933203,12.205176],[-10.709229,11.89873],[-10.274854,12.212646],[-9.754004,12.029932],[-9.358105,12.25542],[-9.395361,12.464648],[-9.043066,12.402344],[-8.822021,11.673242],[-8.398535,11.366553],[-8.666699,11.009473],[-8.337402,10.990625],[-7.990625,10.1625],[-7.497949,10.439795],[-7.01709,10.143262],[-6.65415,10.656445],[-6.261133,10.724072],[-6.196875,10.232129],[-5.523535,10.426025],[-5.288135,11.82793],[-4.428711,12.337598],[-4.151025,13.306201],[-3.301758,13.280762],[-3.248633,13.65835],[-2.95083,13.648438],[-2.586719,14.227588],[-2.113232,14.168457],[-1.973047,14.456543],[-.760449,15.047754],[.21748,14.911475],[.947461,14.982129],[1.300195,15.272266],[3.504297,15.356348],[3.842969,15.701709],[4.234668,16.996387],[4.227637,19.142773],[3.119727,19.103174],[3.130273,19.850195],[1.685449,20.378369],[1.145508,21.102246],[-4.822607,24.995605],[-6.594092,24.994629],[-5.941016,19.296191],[-5.628662,16.568652],[-5.359912,16.282861],[-5.5125,15.496289],[-9.176807,15.496094],[-9.350586,15.677393],[-9.446924,15.458203],[-10.696582,15.422656],[-10.895605,15.150488],[-11.502686,15.636816],[-11.940918,14.886914],[-12.280615,14.809033],[-12.054199,13.633057],[-11.390381,12.941992],[-11.389404,12.404395]]]}},{type:"Feature",properties:{name:"马尔代夫",full_name:"马尔代夫共和国",iso_a2:"MV",iso_a3:"MDV",iso_n3:"462"},geometry:{type:"Polygon",coordinates:[[[73.512207,4.164551],[73.517773,4.247656],[73.473047,4.170703],[73.512207,4.164551]]]}},{type:"Feature",properties:{name:"马来西亚",full_name:"马来西亚",iso_a2:"MY",iso_a3:"MYS",iso_n3:"458"},geometry:{type:"MultiPolygon",coordinates:[[[[100.119141,6.441992],[100.71543,3.966211],[101.299902,3.253271],[101.295508,2.885205],[103.480273,1.329492],[103.694531,1.449658],[103.991504,1.454785],[103.981445,1.623633],[104.250098,1.388574],[103.812207,2.580469],[103.439453,2.933105],[103.41582,4.850293],[103.09707,5.408447],[102.101074,6.242236],[101.873633,5.825293],[101.556055,5.907764],[101.113965,5.636768],[101.053516,6.242578],[100.261426,6.682715],[100.119141,6.441992]]],[[[117.574414,4.170605],[118.54834,4.379248],[118.260547,4.988867],[118.9125,5.0229],[119.266309,5.308105],[118.353125,5.806055],[117.973633,5.70625],[118.003809,6.05332],[117.501172,5.884668],[117.69375,6.35],[117.229883,6.93999],[116.788086,6.606104],[116.749805,6.9771],[115.877148,5.613525],[115.419043,5.413184],[115.554492,5.093555],[115.140039,4.899756],[115.290625,4.352588],[115.026758,4.899707],[114.74668,4.718066],[114.654102,4.037646],[114.063867,4.592676],[112.987891,3.161914],[111.5125,2.743018],[111.028711,1.557812],[111.223242,1.39585],[109.864844,1.764453],[109.628906,2.027539],[109.654004,1.614893],[110.505762,.861963],[111.808984,1.01167],[112.476172,1.559082],[113.622266,1.235938],[114.5125,1.452002],[114.786426,2.250488],[115.179102,2.523193],[115.117578,2.894873],[115.454395,3.034326],[115.678809,4.193018],[116.514746,4.370801],[117.574414,4.170605]]],[[[99.848047,6.465723],[99.646289,6.418359],[99.74375,6.263281],[99.848047,6.465723]]]]}},{type:"Feature",properties:{name:"马拉维",full_name:"马拉维共和国",iso_a2:"MW",iso_a3:"MWI",iso_n3:"454"},geometry:{type:"Polygon",coordinates:[[[33.201758,-14.013379],[33.636426,-14.568164],[34.33252,-14.408594],[34.505273,-14.598145],[34.54082,-15.297266],[34.248242,-15.8875],[35.272559,-17.118457],[35.167188,-16.560254],[35.358496,-16.160547],[35.755273,-16.058301],[35.892773,-14.891797],[35.247461,-13.896875],[34.563672,-13.360156],[34.357813,-12.164746],[34.618555,-11.620215],[34.959473,-11.578125],[34.60791,-11.080469],[34.320898,-9.731543],[33.995605,-9.49541],[33.888867,-9.670117],[32.919922,-9.407422],[33.661523,-10.553125],[33.261328,-10.893359],[33.252344,-12.112598],[33.512305,-12.347754],[33.021582,-12.630469],[32.67041,-13.59043],[33.201758,-14.013379]]]}},{type:"Feature",properties:{name:"马达加斯加",full_name:"马达加斯加共和国",iso_a2:"MG",iso_a3:"MDG",iso_n3:"450"},geometry:{type:"MultiPolygon",coordinates:[[[[49.538281,-12.432129],[49.207031,-12.07959],[48.786328,-12.470898],[48.796484,-13.26748],[48.255273,-13.719336],[47.941016,-13.662402],[47.77334,-14.369922],[47.96416,-14.672559],[47.47832,-15.009375],[47.351953,-14.766113],[47.099219,-15.43418],[46.942285,-15.219043],[46.475098,-15.513477],[46.399609,-15.924609],[46.15752,-15.738281],[44.476172,-16.217285],[43.979395,-17.391602],[44.404688,-19.92207],[43.501855,-21.356445],[43.264844,-22.383594],[44.035352,-24.995703],[45.205762,-25.570508],[46.728516,-25.149902],[47.177344,-24.787207],[49.362891,-18.336328],[49.449316,-17.240625],[49.839063,-16.486523],[49.664355,-15.521582],[49.892578,-15.457715],[50.208984,-15.960449],[50.482715,-15.385645],[49.9375,-13.072266],[49.538281,-12.432129]]],[[[49.936426,-16.90293],[50.023047,-16.695312],[49.824023,-17.086523],[49.936426,-16.90293]]]]}},{type:"Feature",properties:{name:"北马其顿",full_name:"北马其顿共和国",iso_a2:"MK",iso_a3:"MKD",iso_n3:"807"},geometry:{type:"Polygon",coordinates:[[[21.5625,42.24751],[20.566211,41.873682],[20.488965,41.272607],[20.964258,40.849902],[22.916016,41.336279],[23.003613,41.739844],[22.344043,42.313965],[21.5625,42.24751]]]}},{type:"Feature",properties:{name:"卢森堡",full_name:"卢森堡大公国",iso_a2:"LU",iso_a3:"LUX",iso_n3:"442"},geometry:{type:"Polygon",coordinates:[[[6.116504,50.120996],[5.744043,49.919629],[5.789746,49.538281],[6.344336,49.452734],[6.487305,49.798486],[6.116504,50.120996]]]}},{type:"Feature",properties:{name:"立陶宛",full_name:"立陶宛共和国",iso_a2:"LT",iso_a3:"LTU",iso_n3:"440"},geometry:{type:"MultiPolygon",coordinates:[[[[20.957813,55.278906],[21.114844,55.616504],[20.899805,55.28667],[20.957813,55.278906]]],[[[22.766211,54.356787],[23.484668,53.939795],[24.317969,53.892969],[25.461133,54.292773],[25.749219,54.156982],[25.780859,54.833252],[26.775684,55.273096],[26.457617,55.34248],[26.593555,55.667529],[24.841016,56.411182],[24.120703,56.264258],[22.08457,56.406738],[21.046094,56.070068],[21.235742,55.264111],[22.567285,55.059131],[22.766211,54.356787]]]]}},{type:"Feature",properties:{name:"列支敦士登",full_name:"列支敦士登公国",iso_a2:"LI",iso_a3:"LIE",iso_n3:"438"},geometry:{type:"Polygon",coordinates:[[[9.580273,47.057373],[9.527539,47.270752],[9.487695,47.062256],[9.580273,47.057373]]]}},{type:"Feature",properties:{name:"利比亚",full_name:"利比亚国",iso_a2:"LY",iso_a3:"LBY",iso_n3:"434"},geometry:{type:"Polygon",coordinates:[[[9.51875,30.229395],[9.310254,30.115234],[9.805273,29.176953],[9.916016,27.785693],[9.883203,26.630811],[9.448242,26.067139],[10.255859,24.591016],[11.507617,24.314355],[11.967871,23.517871],[13.48125,23.180176],[14.215527,22.619678],[14.979004,22.996191],[15.984082,23.445215],[20.147656,21.389258],[23.980273,19.496631],[23.980273,19.995947],[24.979492,20.002588],[24.980273,21.99585],[24.980273,29.181885],[24.703223,30.201074],[24.961426,30.678516],[24.852734,31.334814],[25.150488,31.65498],[24.878516,31.984277],[23.286328,32.213818],[23.090625,32.61875],[21.635938,32.937305],[20.121484,32.21875],[19.926367,31.817529],[20.111523,30.963721],[19.713281,30.488379],[19.12373,30.266113],[17.830469,30.927588],[15.705957,31.426416],[15.176563,32.391162],[13.283496,32.914648],[12.279883,32.858545],[11.50459,33.181934],[11.50498,32.413672],[10.274609,31.684961],[10.216406,30.783203],[9.51875,30.229395]]]}},{type:"Feature",properties:{name:"利比里亚",full_name:"利比里亚共和国",iso_a2:"LR",iso_a3:"LBR",iso_n3:"430"},geometry:{type:"Polygon",coordinates:[[[-11.50752,6.906543],[-9.132178,5.054639],[-7.544971,4.351318],[-7.454395,5.841309],[-8.603564,6.507812],[-8.302344,6.980957],[-8.486426,7.558496],[-8.659766,7.688379],[-9.117578,7.215918],[-9.463818,7.415869],[-9.518262,8.346094],[-10.283203,8.485156],[-10.647461,7.759375],[-11.50752,6.906543]]]}},{type:"Feature",properties:{name:"莱索托",full_name:"莱索托王国",iso_a2:"LS",iso_a3:"LSO",iso_n3:"426"},geometry:{type:"Polygon",coordinates:[[[28.736914,-30.101953],[29.098047,-29.919043],[29.390723,-29.269727],[28.625781,-28.581738],[27.735547,-28.940039],[27.056934,-29.625586],[27.753125,-30.6],[28.056836,-30.631055],[28.39209,-30.147559],[28.736914,-30.101953]]]}},{type:"Feature",properties:{name:"黎巴嫩",full_name:"黎巴嫩共和国",iso_a2:"LB",iso_a3:"LBN",iso_n3:"422"},geometry:{type:"Polygon",coordinates:[[[35.97627,34.629199],[35.108594,33.083691],[35.840723,33.415674],[35.869141,33.431738],[36.584961,34.22124],[36.383887,34.65791],[35.97627,34.629199]]]}},{type:"Feature",properties:{name:"拉脱维亚",full_name:"拉脱维亚共和国",iso_a2:"LV",iso_a3:"LVA",iso_n3:"428"},geometry:{type:"Polygon",coordinates:[[[26.593555,55.667529],[27.576758,55.798779],[28.147949,56.14292],[27.639453,56.845654],[27.828613,57.293311],[27.351953,57.528125],[26.462109,57.544482],[25.282617,58.048486],[24.322559,57.870605],[24.382617,57.250049],[23.647754,56.971045],[22.55459,57.724268],[21.728711,57.570996],[21.071289,56.82373],[21.046094,56.070068],[22.08457,56.406738],[24.120703,56.264258],[24.841016,56.411182],[26.593555,55.667529]]]}},{type:"Feature",properties:{name:"老挝",full_name:"老挝人民民主共和国",iso_a2:"LA",iso_a3:"LAO",iso_n3:"418"},geometry:{type:"Polygon",coordinates:[[[102.127441,22.379199],[101.73877,22.495264],[101.524512,22.253662],[101.800586,21.212598],[101.247852,21.197314],[101.138867,21.56748],[100.703125,21.251367],[100.622949,20.85957],[100.249316,20.730273],[100.122461,20.31665],[100.519531,20.17793],[100.513574,19.553467],[101.211914,19.54834],[100.955859,17.541113],[102.101465,18.210645],[102.680078,17.824121],[103.366992,18.42334],[103.949609,18.318994],[104.739648,17.46167],[104.819336,16.466064],[105.641016,15.656543],[105.497363,14.590674],[105.183301,14.34624],[106.066797,13.921191],[105.978906,14.343018],[106.501465,14.578223],[106.938086,14.327344],[107.519434,14.705078],[107.653125,15.255225],[107.165918,15.80249],[107.396387,16.043018],[106.656445,16.492627],[106.502246,16.954102],[105.114551,18.405273],[105.146484,18.650977],[103.891602,19.30498],[104.032031,19.675146],[104.587891,19.61875],[104.92793,20.018115],[104.367773,20.441406],[104.583203,20.64668],[104.101367,20.945508],[103.635059,20.69707],[103.104492,20.89165],[102.851172,21.265918],[102.949609,21.681348],[102.662012,21.676025],[102.127441,22.379199]]]}},{type:"Feature",properties:{name:"吉尔吉斯斯坦",full_name:"吉尔吉斯共和国",iso_a2:"KG",iso_a3:"KGZ",iso_n3:"417"},geometry:{type:"Polygon",coordinates:[[[70.958008,40.238867],[70.515137,39.949902],[69.966797,40.202246],[69.530273,40.097314],[69.297656,39.524805],[70.501172,39.587354],[70.799316,39.394727],[71.470312,39.603662],[72.22998,39.20752],[73.631641,39.448877],[73.991602,40.043115],[74.835156,40.482617],[75.555566,40.625195],[75.677148,40.305811],[76.318555,40.352246],[76.907715,41.02417],[78.123438,41.075635],[80.209375,42.190039],[79.12666,42.775732],[75.366211,42.836963],[74.209082,43.240381],[73.55625,43.002783],[73.492969,42.409033],[71.760547,42.821484],[71.256641,42.733545],[70.946777,42.248682],[71.228516,42.162891],[70.200879,41.514453],[71.393066,41.123389],[71.664941,41.541211],[72.187305,41.025928],[73.136914,40.810645],[71.69248,40.152344],[70.958008,40.238867]]]}},{type:"Feature",properties:{name:"科威特",full_name:"科威特国",iso_a2:"KW",iso_a3:"KWT",iso_n3:"414"},geometry:{type:"Polygon",coordinates:[[[48.44248,28.54292],[48.051465,29.355371],[47.722656,29.393018],[48.143457,29.572461],[47.978711,29.982812],[47.148242,30.000977],[46.531445,29.09624],[47.433203,28.989551],[47.671289,28.533154],[48.44248,28.54292]]]}},{type:"Feature",properties:{name:"基里巴斯",full_name:"基里巴斯共和国",iso_a2:"KI",iso_a3:"KIR",iso_n3:"296"},geometry:{type:"Polygon",coordinates:[[[-157.342139,1.855566],[-157.578955,1.902051],[-157.175781,1.739844],[-157.342139,1.855566]]]}},{type:"Feature",properties:{name:"肯尼亚",full_name:"肯尼亚共和国",iso_a2:"KE",iso_a3:"KEN",iso_n3:"404"},geometry:{type:"Polygon",coordinates:[[[33.903223,-1.002051],[37.643848,-3.04541],[37.608203,-3.49707],[39.221777,-4.692383],[40.11543,-3.250586],[40.222461,-2.688379],[41.532715,-1.695312],[40.978711,-.870313],[40.964453,2.814648],[41.883984,3.977734],[41.14043,3.962988],[40.765234,4.273047],[39.494434,3.456104],[38.086133,3.648828],[36.905566,4.411475],[36.021973,4.468115],[35.74502,5.343994],[35.268359,5.492285],[33.976074,4.220215],[34.437695,3.650586],[34.978223,1.773633],[33.943164,.173779],[33.903223,-1.002051]]]}},{type:"Feature",properties:{name:"哈萨克斯坦",full_name:"哈萨克斯坦共和国",iso_a2:"KZ",iso_a3:"KAZ",iso_n3:"398"},geometry:{type:"Polygon",coordinates:[[[70.946777,42.248682],[71.256641,42.733545],[71.760547,42.821484],[73.492969,42.409033],[73.55625,43.002783],[74.209082,43.240381],[75.366211,42.836963],[79.12666,42.775732],[80.209375,42.190039],[80.202246,42.734473],[80.785742,43.161572],[80.355273,44.097266],[80.481543,44.714648],[79.871875,44.883789],[81.691992,45.349365],[82.521484,45.125488],[82.315234,45.594922],[83.029492,47.185938],[84.786133,46.830713],[85.484766,47.063525],[85.749414,48.385059],[86.549414,48.528613],[86.808301,49.049707],[87.322852,49.085791],[86.675488,49.777295],[86.180859,49.499316],[85.232617,49.61582],[84.989453,50.061426],[84.323242,50.23916],[83.357324,50.99458],[82.493945,50.727588],[81.465918,50.739844],[80.735254,51.293408],[79.98623,50.774561],[77.859961,53.269189],[76.484766,54.022559],[76.837305,54.442383],[74.351562,53.487646],[73.858984,53.619727],[73.406934,53.447559],[73.712402,54.042383],[72.622266,54.134326],[72.446777,53.941846],[72.186035,54.325635],[71.093164,54.212207],[70.738086,55.305176],[70.182422,55.162451],[68.977246,55.3896],[68.155859,54.976709],[65.476953,54.623291],[65.088379,54.340186],[61.231055,54.019482],[60.979492,53.621729],[61.534961,53.523291],[61.199219,53.287158],[62.082715,53.00542],[61.047461,52.972461],[60.774414,52.675781],[60.994531,52.336865],[60.030273,51.933252],[61.554688,51.324609],[61.389453,50.861035],[60.942285,50.695508],[60.058594,50.850293],[59.523047,50.492871],[57.838867,51.09165],[57.442188,50.888867],[56.491406,51.019531],[55.68623,50.582861],[54.641602,51.011572],[54.555273,50.535791],[53.338086,51.482373],[52.219141,51.709375],[51.344531,51.475342],[50.793945,51.729199],[48.625098,50.612695],[48.758984,49.92832],[48.334961,49.858252],[47.429199,50.357959],[46.889551,49.696973],[47.031348,49.150293],[46.660938,48.412256],[47.292383,47.740918],[48.166992,47.708789],[48.959375,46.774609],[48.541211,46.605615],[49.232227,46.337158],[51.178027,47.110156],[52.138281,46.828613],[52.483203,46.990674],[53.069434,46.856055],[53.135254,46.19165],[52.773828,45.572754],[53.200391,45.331982],[51.415723,45.357861],[51.009375,44.921826],[51.543555,44.531006],[50.409473,44.624023],[50.25293,44.461523],[50.830762,44.192773],[51.29541,43.174121],[52.596582,42.760156],[52.493848,41.780371],[53.055859,42.147754],[54.120996,42.335205],[55.434375,41.296289],[55.977441,41.322217],[55.975684,44.994922],[58.555273,45.555371],[61.00791,44.393799],[61.990234,43.492139],[64.905469,43.714697],[65.803027,42.876953],[66.100293,42.99082],[66.00957,42.004883],[66.498633,41.994873],[66.709668,41.17915],[67.935742,41.196582],[68.291895,40.656104],[68.572656,40.622656],[69.153613,41.425244],[70.946777,42.248682]]]}},{type:"Feature",properties:{name:"约旦",full_name:"约旦哈希姆王国",iso_a2:"JO",iso_a3:"JOR",iso_n3:"400"},geometry:{type:"Polygon",coordinates:[[[35.787305,32.734912],[35.551465,32.395508],[35.450586,31.479297],[34.973438,29.555029],[34.950781,29.353516],[36.068457,29.200537],[36.755273,29.866016],[37.469238,29.995068],[37.980078,30.5],[36.958594,31.491504],[39.14541,32.124512],[38.773535,33.372217],[36.818359,32.317285],[35.787305,32.734912]]]}},{type:"Feature",properties:{name:"日本",full_name:"日本国",iso_a2:"JP",iso_a3:"JPN",iso_n3:"392"},geometry:{type:"MultiPolygon",coordinates:[[[[134.932812,34.288135],[135.004688,34.544043],[134.667871,34.294141],[134.932812,34.288135]]],[[[143.824316,44.116992],[141.937695,45.509521],[141.667969,45.40127],[141.760938,44.48252],[141.374121,43.279639],[140.392383,43.303125],[140.432227,42.954102],[139.860156,42.581738],[140.085156,41.434082],[140.659863,41.815576],[141.150977,41.805078],[140.32666,42.293359],[140.480469,42.559375],[140.986133,42.342139],[141.851367,42.579053],[143.236523,42.000195],[143.969336,42.881396],[145.833008,43.385938],[145.34082,43.302539],[145.139648,43.6625],[145.369531,44.327393],[144.715234,43.927979],[143.824316,44.116992]]],[[[131.174609,33.602588],[130.715625,33.927783],[129.580078,33.236279],[129.991699,32.851562],[129.679102,33.059961],[129.768555,32.570996],[130.34043,32.701855],[130.2375,33.177637],[130.547266,32.831592],[130.147266,31.408496],[130.58877,31.178516],[130.77627,31.706299],[130.685742,31.015137],[131.070801,31.436865],[131.337207,31.404688],[132.002148,32.882373],[131.896582,33.25459],[131.537402,33.274072],[131.696289,33.602832],[131.174609,33.602588]]],[[[134.357422,34.256348],[133.94834,34.348047],[133.193066,33.933203],[132.935156,34.095312],[132.032617,33.33999],[132.412793,33.430469],[132.495117,32.916602],[132.804297,32.752002],[133.632031,33.510986],[134.181641,33.247217],[134.738867,33.820508],[134.6375,34.226611],[134.357422,34.256348]]],[[[141.229297,41.372656],[140.936914,41.505566],[140.801855,41.253662],[141.244238,41.205615],[141.118555,40.882275],[140.748633,40.830322],[140.627637,41.19541],[140.344434,41.20332],[139.741504,39.92085],[140.064746,39.624414],[139.801953,38.881592],[139.363867,38.099023],[138.319922,37.218408],[137.246289,36.753174],[136.899902,37.117676],[137.322656,37.52207],[136.843457,37.382129],[135.903125,35.606885],[135.326953,35.525537],[135.174316,35.74707],[132.922949,35.511279],[131.354395,34.413184],[131.004199,34.392578],[130.918848,33.975732],[131.740527,34.052051],[132.146484,33.83877],[132.312598,34.324951],[133.142383,34.302441],[134.740039,34.765234],[135.415918,34.61748],[135.12793,34.006982],[135.695312,33.486963],[136.329883,34.176855],[136.853711,34.324072],[136.533008,34.678369],[136.804199,35.050293],[136.871289,34.733105],[137.275195,34.77251],[137.061719,34.582812],[138.189063,34.596338],[138.719629,35.124072],[138.8375,34.619238],[139.249414,35.278027],[139.675,35.149268],[139.834766,35.658057],[140.096875,35.585156],[139.843945,34.914893],[140.354688,35.181445],[140.874023,35.724951],[140.573535,36.231348],[141.00166,37.114648],[140.962109,38.148877],[141.46748,38.40415],[141.976953,39.428809],[141.430469,40.72334],[141.455469,41.404736],[141.229297,41.372656]]],[[[128.258789,26.652783],[128.254883,26.881885],[127.907227,26.693604],[127.653125,26.094727],[128.258789,26.652783]]],[[[129.452539,28.208984],[129.689551,28.51748],[129.164648,28.249756],[129.452539,28.208984]]]]}},{type:"Feature",properties:{name:"牙买加",full_name:"牙买加",iso_a2:"JM",iso_a3:"JAM",iso_n3:"388"},geometry:{type:"Polygon",coordinates:[[[-77.261475,18.457422],[-77.873438,18.522217],[-78.339502,18.287207],[-77.20498,17.714941],[-76.853223,17.97373],[-76.210791,17.913525],[-77.261475,18.457422]]]}},{type:"Feature",properties:{name:"意大利",full_name:"意大利共和国",iso_a2:"IT",iso_a3:"ITA",iso_n3:"380"},geometry:{type:"MultiPolygon",coordinates:[[[[7.021094,45.925781],[6.790918,45.740869],[7.146387,45.381738],[6.634766,45.068164],[6.992676,44.827295],[6.900195,44.335742],[7.637207,44.164844],[7.493164,43.767139],[8.76582,44.422314],[10.188086,43.94751],[10.514844,42.967529],[11.141211,42.389893],[15.692773,39.990186],[16.209961,38.941113],[15.645801,38.034229],[16.056836,37.941846],[16.616699,38.800146],[17.174609,38.998096],[17.114551,39.380615],[16.521875,39.747559],[16.928223,40.458057],[17.865039,40.280176],[18.34375,39.821387],[18.460645,40.221045],[15.900488,41.512061],[16.164648,41.896191],[15.16875,41.934033],[14.540723,42.244287],[13.56416,43.571289],[12.396289,44.223877],[12.274316,45.446045],[13.206348,45.771387],[13.719824,45.587598],[13.378223,46.261621],[13.7,46.520264],[12.388281,46.702637],[12.169434,47.082129],[10.993262,46.777002],[10.452832,46.864941],[10.12832,46.238232],[9.260156,46.475195],[9.02373,45.845703],[8.422559,46.446045],[7.787891,45.921826],[7.021094,45.925781]],[[12.43916,41.898389],[12.430566,41.897559],[12.430566,41.905469],[12.43916,41.898389]],[[12.485254,43.901416],[12.396875,43.93457],[12.503711,43.989746],[12.485254,43.901416]]],[[[15.576563,38.220312],[13.788867,37.981201],[12.734375,38.183057],[12.435547,37.819775],[15.112598,36.687842],[15.295703,37.055176],[15.099512,37.458594],[15.576563,38.220312]]],[[[9.632031,40.882031],[9.228418,41.25708],[8.571875,40.850195],[8.224219,40.91333],[8.648535,38.926562],[9.056348,39.23916],[9.5625,39.166016],[9.632031,40.882031]]]]}},{type:"Feature",properties:{name:"以色列",full_name:"以色列国",iso_a2:"IL",iso_a3:"ISR",iso_n3:"376"},geometry:{type:"Polygon",coordinates:[[[35.840723,33.415674],[35.108594,33.083691],[34.477344,31.584863],[34.245313,31.208301],[34.904297,29.477344],[34.973438,29.555029],[35.450586,31.479297],[34.872754,31.396875],[35.203711,31.75],[34.953809,31.84126],[35.065039,32.460449],[35.551465,32.395508],[35.787305,32.734912],[35.816125,33.361879],[35.840723,33.415674]]]}},{type:"Feature",properties:{name:"巴勒斯坦",full_name:"巴勒斯坦国",iso_a2:"PS",iso_a3:"PSE",iso_n3:"275"},geometry:{type:"MultiPolygon",coordinates:[[[[34.477344,31.584863],[34.198145,31.322607],[34.245313,31.208301],[34.477344,31.584863]]],[[[35.551465,32.395508],[35.065039,32.460449],[34.953809,31.84126],[35.203711,31.75],[34.872754,31.396875],[35.450586,31.479297],[35.551465,32.395508]]]]}},{type:"Feature",properties:{name:"爱尔兰",full_name:"爱尔兰",iso_a2:"IE",iso_a3:"IRL",iso_n3:"372"},geometry:{type:"Polygon",coordinates:[[[-7.218652,55.091992],[-6.96167,55.237891],[-7.308789,55.36582],[-7.65874,54.970947],[-7.66709,55.256494],[-8.274609,55.146289],[-8.763916,54.681201],[-8.133447,54.64082],[-8.545557,54.241211],[-10.056396,54.257812],[-9.578223,53.80542],[-10.09126,53.412842],[-8.930127,53.20708],[-9.916602,52.569727],[-8.783447,52.679639],[-10.356689,52.206934],[-9.909668,52.122949],[-10.341064,51.798926],[-9.598828,51.874414],[-10.120752,51.600684],[-8.813428,51.584912],[-8.40918,51.88877],[-6.325,52.24668],[-6.027393,52.9271],[-6.218018,54.088721],[-6.649805,54.058643],[-7.007715,54.406689],[-7.606543,54.143848],[-8.118262,54.414258],[-7.218652,55.091992]]]}},{type:"Feature",properties:{name:"伊拉克",full_name:"伊拉克共和国",iso_a2:"IQ",iso_a3:"IRQ",iso_n3:"368"},geometry:{type:"Polygon",coordinates:[[[42.358984,37.108594],[41.295996,36.38335],[40.987012,34.429053],[38.773535,33.372217],[39.14541,32.124512],[40.369336,31.938965],[42.074414,31.080371],[44.69082,29.202344],[46.531445,29.09624],[47.148242,30.000977],[47.978711,29.982812],[48.546484,29.962354],[48.014941,30.465625],[48.010645,30.989795],[47.679492,31.002393],[47.82998,31.794434],[47.371289,32.42373],[46.112793,32.957666],[46.019922,33.415723],[45.39707,33.97085],[46.273438,35.773242],[45.361621,36.015332],[44.765137,37.142432],[44.281836,36.978027],[44.114453,37.301855],[42.774609,37.371875],[42.358984,37.108594]]]}},{type:"Feature",properties:{name:"伊朗",full_name:"伊朗伊斯兰共和国",iso_a2:"IR",iso_a3:"IRN",iso_n3:"364"},geometry:{type:"MultiPolygon",coordinates:[[[[56.187988,26.921143],[55.757617,26.947656],[55.762598,26.811963],[55.311523,26.592627],[56.187988,26.921143]]],[[[53.91416,37.343555],[53.970117,36.818311],[52.190137,36.621729],[51.118555,36.742578],[50.130469,37.407129],[49.171191,37.600586],[48.86875,38.435498],[47.996484,38.85376],[48.322168,39.399072],[47.995898,39.683936],[46.490625,38.906689],[46.114453,38.877783],[45.479688,39.00625],[44.817188,39.650439],[44.587109,39.768555],[44.389355,39.422119],[44.023242,39.377441],[44.449902,38.334229],[44.211328,37.908057],[44.589941,37.710352],[44.765137,37.142432],[45.361621,36.015332],[46.273438,35.773242],[45.39707,33.97085],[46.019922,33.415723],[46.112793,32.957666],[47.371289,32.42373],[47.82998,31.794434],[47.679492,31.002393],[48.010645,30.989795],[48.014941,30.465625],[48.546484,29.962354],[48.919141,30.120898],[49.001953,30.506543],[49.554883,30.028955],[50.071582,30.198535],[51.278906,28.131348],[53.705762,26.725586],[54.759277,26.505078],[55.424023,26.770557],[55.650293,26.977539],[56.356152,27.200244],[56.982227,26.905469],[57.33457,25.791553],[59.046094,25.417285],[61.587891,25.202344],[61.842383,26.225928],[63.157812,26.649756],[63.301563,27.151465],[62.762988,27.250195],[62.758008,28.243555],[61.889844,28.546533],[60.843359,29.858691],[61.81084,30.913281],[61.660156,31.382422],[60.820703,31.495166],[60.561914,33.058789],[60.916992,33.505225],[60.51084,33.638916],[60.485742,34.094775],[60.889453,34.319434],[60.72627,34.518262],[61.262012,35.61958],[61.119629,36.642578],[60.341309,36.637646],[59.301758,37.510645],[58.261621,37.66582],[57.193555,38.216406],[55.380859,38.051123],[54.699414,37.470166],[53.91416,37.343555]]]]}},{type:"Feature",properties:{name:"印度尼西亚",full_name:"印度尼西亚共和国",iso_a2:"ID",iso_a3:"IDN",iso_n3:"360"},geometry:{type:"MultiPolygon",coordinates:[[[[97.481543,1.465088],[97.079199,1.425488],[97.82041,.564453],[97.931934,.973926],[97.481543,1.465088]]],[[[99.163867,-1.77793],[98.932617,-.954004],[98.676074,-.970508],[98.827734,-1.609961],[99.163867,-1.77793]]],[[[116.64082,-8.613867],[116.718945,-8.336035],[116.401563,-8.204199],[115.857324,-8.787891],[116.586523,-8.886133],[116.64082,-8.613867]]],[[[115.447852,-8.155176],[114.467578,-8.166309],[115.055078,-8.573047],[115.144922,-8.849023],[115.704297,-8.407129],[115.447852,-8.155176]]],[[[106.045703,-1.669434],[105.45957,-1.574707],[105.133398,-2.042578],[105.78584,-2.181348],[105.99873,-2.824902],[106.667188,-3.071777],[106.818457,-2.57334],[106.365918,-2.464844],[106.045703,-1.669434]]],[[[123.179785,-4.551172],[123.074609,-4.386914],[122.85332,-4.618359],[122.64502,-5.663379],[123.187305,-5.333008],[122.97168,-5.138477],[123.179785,-4.551172]]],[[[122.645117,-5.269434],[122.701953,-4.618652],[122.368945,-4.767188],[122.283105,-5.319531],[122.645117,-5.269434]]],[[[108.316016,3.689648],[108.24834,4.217139],[108.002344,3.982861],[108.316016,3.689648]]],[[[108.207227,-2.997656],[108.215137,-2.696973],[107.666309,-2.566309],[107.614453,-3.209375],[108.055273,-3.226855],[108.207227,-2.997656]]],[[[135.383008,-.651367],[135.915039,-1.178418],[136.375293,-1.094043],[135.383008,-.651367]]],[[[135.474219,-1.591797],[136.228125,-1.893652],[136.892578,-1.799707],[135.474219,-1.591797]]],[[[130.813281,-.004102],[130.236621,-.209668],[130.750195,-.443848],[130.899219,-.344434],[130.622168,-.085938],[131.005371,-.360742],[131.339746,-.290332],[130.813281,-.004102]]],[[[128.453906,2.051758],[128.602148,2.597607],[128.217969,2.297461],[128.453906,2.051758]]],[[[128.153027,-1.660547],[127.64668,-1.332422],[127.39502,-1.589844],[128.153027,-1.660547]]],[[[126.024219,-1.789746],[125.387207,-1.843066],[126.331738,-1.822852],[126.024219,-1.789746]]],[[[124.969531,-1.705469],[124.417578,-1.659277],[124.329688,-1.858887],[125.314063,-1.877148],[124.969531,-1.705469]]],[[[131.325586,-7.999512],[131.624414,-7.626172],[131.643457,-7.112793],[131.137793,-7.684863],[131.11377,-7.997363],[131.325586,-7.999512]]],[[[126.800977,-7.667871],[125.975293,-7.663379],[125.798242,-7.98457],[126.47207,-7.950391],[126.800977,-7.667871]]],[[[124.575586,-8.14082],[124.380664,-8.415137],[125.131738,-8.326465],[124.575586,-8.14082]]],[[[131.001855,-1.315527],[131.033008,-.917578],[130.672949,-.959766],[131.001855,-1.315527]]],[[[96.492578,5.229346],[95.227832,5.564795],[95.578613,4.661963],[96.968945,3.575146],[97.59082,2.846582],[97.700781,2.358545],[98.595313,1.8646],[99.15918,.351758],[99.669824,.045068],[100.308203,-.82666],[100.889551,-2.248535],[101.578613,-3.166992],[104.601562,-5.90459],[104.639551,-5.52041],[105.081348,-5.745508],[105.349414,-5.549512],[105.74834,-5.818262],[106.044336,-3.10625],[105.396973,-2.380176],[104.650781,-2.595215],[104.845215,-2.092969],[104.515918,-1.819434],[104.360547,-1.038379],[103.721094,-.886719],[103.438574,-.575586],[103.428516,-.191797],[103.786719,.046973],[103.672656,.288916],[103.338965,.513721],[102.55,.216455],[103.031836,.578906],[102.389941,.841992],[102.019922,1.442139],[101.47666,1.693066],[101.046191,2.257471],[100.828223,2.242578],[100.887891,1.948242],[100.523828,2.18916],[99.732324,3.183057],[98.307324,4.092871],[97.547168,5.205859],[96.492578,5.229346]]],[[[122.78291,-8.611719],[122.916992,-8.105566],[122.323242,-8.62832],[120.610254,-8.24043],[119.874805,-8.419824],[119.80791,-8.697656],[121.035254,-8.935449],[122.78291,-8.611719]]],[[[120.0125,-9.374707],[118.958789,-9.519336],[120.144824,-10.200098],[120.698047,-10.206641],[120.784473,-9.957031],[120.0125,-9.374707]]],[[[118.242383,-8.317773],[117.755273,-8.149512],[118.234863,-8.591895],[117.969531,-8.728027],[117.164844,-8.367188],[116.835059,-8.532422],[116.788477,-9.006348],[119.129687,-8.668164],[118.926172,-8.297656],[118.242383,-8.317773]]],[[[124.888867,.995312],[125.233789,1.502295],[125.110938,1.685693],[123.930762,.850439],[122.838281,.845703],[121.081738,1.327637],[120.602539,.854395],[120.269531,.970801],[119.721875,-.088477],[119.844336,-.861914],[119.711328,-.680762],[119.508203,-.906738],[119.321875,-1.929688],[118.783301,-2.720801],[118.867676,-3.398047],[119.46748,-3.512988],[119.623633,-4.034375],[119.360352,-5.31416],[119.557422,-5.611035],[120.430371,-5.591016],[120.261035,-2.949316],[120.653613,-2.667578],[121.052148,-2.75166],[120.891797,-3.520605],[121.618066,-4.092676],[121.588672,-4.75957],[122.038086,-4.832422],[122.114258,-4.540234],[122.872266,-4.391992],[122.847949,-4.064551],[122.25293,-3.62041],[122.291699,-2.907617],[121.355469,-1.878223],[122.250684,-1.555273],[122.902832,-.900977],[123.37793,-1.004102],[123.43418,-.778223],[123.171484,-.570703],[121.969629,-.933301],[121.575586,-.828516],[121.148535,-1.339453],[120.667383,-1.370117],[120.062891,-.555566],[120.192285,.268506],[120.579004,.52832],[123.753809,.305518],[124.427539,.470605],[124.888867,.995312]]],[[[107.373926,-6.007617],[106.075,-5.91416],[105.255469,-6.835254],[106.198242,-6.927832],[106.519727,-7.053711],[106.455273,-7.368652],[107.91748,-7.724121],[109.281641,-7.704883],[111.509961,-8.305078],[113.25332,-8.286719],[114.583789,-8.769629],[114.386914,-8.405176],[114.409277,-7.79248],[113.013574,-7.657715],[112.539258,-6.926465],[111.181543,-6.686719],[110.834766,-6.424219],[110.42627,-6.947266],[108.677832,-6.790527],[108.330176,-6.286035],[107.373926,-6.007617]]],[[[109.628906,2.027539],[109.075879,1.495898],[108.944531,.355664],[109.25752,.031152],[109.258789,-.807422],[109.983301,-1.274805],[110.256055,-2.966113],[111.694727,-2.889453],[111.858105,-3.551855],[112.758008,-3.322168],[113.033984,-2.933496],[113.705078,-3.455273],[114.344336,-3.235156],[114.693555,-4.169727],[115.956152,-3.59502],[116.257227,-3.126367],[116.166309,-2.93457],[116.56543,-2.299707],[116.275488,-1.784863],[116.753418,-1.327344],[116.739844,-1.044238],[116.913965,-1.223633],[117.5625,-.770898],[117.522168,.235889],[117.911621,1.098682],[118.534766,.813525],[118.984961,.982129],[117.789258,2.026855],[118.066602,2.317822],[117.055957,3.622656],[117.777246,3.689258],[117.574414,4.170605],[116.514746,4.370801],[115.678809,4.193018],[115.454395,3.034326],[115.117578,2.894873],[115.179102,2.523193],[114.786426,2.250488],[114.5125,1.452002],[113.622266,1.235938],[112.476172,1.559082],[111.808984,1.01167],[110.505762,.861963],[109.654004,1.614893],[109.628906,2.027539]]],[[[127.732715,.848145],[127.652832,1.013867],[128.011719,1.331738],[128.036426,2.199023],[127.631738,1.843701],[127.428516,1.13999],[127.691602,-.241895],[128.425488,-.892676],[127.887402,.29834],[127.983105,.471875],[128.899609,.21626],[128.260645,.733789],[128.702637,1.106396],[128.688379,1.572559],[127.732715,.848145]]],[[[129.754688,-2.86582],[128.198535,-2.865918],[127.902344,-3.496289],[128.132031,-3.157422],[128.516602,-3.449121],[128.8625,-3.234961],[129.467676,-3.453223],[129.844141,-3.327148],[130.805078,-3.857715],[130.569922,-3.130859],[129.754688,-2.86582]]],[[[126.861133,-3.087891],[126.088281,-3.105469],[126.056543,-3.420996],[126.686328,-3.823633],[127.22959,-3.633008],[126.861133,-3.087891]]],[[[124.922266,-8.94248],[124.444434,-9.190332],[124.282324,-9.42793],[124.036328,-9.341602],[123.589258,-9.966797],[123.747266,-10.347168],[124.427539,-10.148633],[125.068164,-9.511914],[124.960156,-9.21377],[125.149023,-9.042578],[124.922266,-8.94248]]],[[[134.746973,-5.707031],[134.570801,-5.427344],[134.205371,-5.707227],[134.343066,-5.833008],[134.154883,-6.062891],[134.441113,-6.334863],[134.71416,-6.295117],[134.746973,-5.707031]]],[[[134.536816,-6.442285],[134.114648,-6.19082],[134.09082,-6.833789],[134.322754,-6.84873],[134.536816,-6.442285]]],[[[138.535352,-8.273633],[138.989063,-7.696094],[138.769824,-7.39043],[138.081836,-7.566211],[137.650391,-8.386133],[138.535352,-8.273633]]],[[[140.973438,-2.609766],[139.789551,-2.348242],[137.80625,-1.483203],[137.123438,-1.840918],[137.07207,-2.105078],[136.389941,-2.27334],[135.85918,-2.995313],[135.251563,-3.368555],[134.886816,-3.209863],[134.627441,-2.536719],[134.459961,-2.832324],[134.194824,-2.309082],[134.25957,-1.362988],[133.974512,-.744336],[132.39375,-.355469],[131.257227,-.855469],[130.995898,-1.424707],[131.930371,-1.559668],[132.307617,-2.242285],[133.921582,-2.102051],[133.700098,-2.624609],[133.191016,-2.437793],[132.725,-2.789062],[131.971191,-2.788574],[132.751367,-3.294629],[132.914453,-4.056934],[133.400879,-3.899023],[133.841504,-3.054785],[133.67832,-3.479492],[133.973828,-3.817969],[134.886523,-3.938477],[134.679688,-4.079102],[135.195605,-4.450684],[137.279785,-4.94541],[138.06084,-5.465234],[138.087109,-5.70918],[138.339648,-5.675684],[138.199609,-5.807031],[138.864551,-6.858398],[138.601367,-6.936523],[139.176855,-7.19043],[138.747949,-7.251465],[139.087988,-7.587207],[138.890625,-8.237793],[139.248828,-7.982422],[139.385645,-8.189062],[140.116992,-7.92373],[140.00293,-8.195508],[140.976172,-9.11875],[140.973438,-2.609766]]],[[[138.895117,-8.388672],[138.796191,-8.173633],[138.563379,-8.309082],[138.895117,-8.388672]]],[[[101.708105,2.078418],[101.409668,2.02168],[101.500781,1.733203],[101.719434,1.78916],[101.708105,2.078418]]],[[[103.027539,.746631],[102.506641,1.08877],[102.49043,.856641],[103.027539,.746631]]],[[[104.585352,1.216113],[104.251953,1.014893],[104.575195,.831934],[104.585352,1.216113]]],[[[104.778613,-.175977],[104.542676,.017725],[104.44707,-.18916],[105.005371,-.282812],[104.778613,-.175977]]],[[[104.474219,-.334668],[104.257129,-.463281],[104.363184,-.658594],[104.590137,-.466602],[104.474219,-.334668]]],[[[109.710254,-1.180664],[109.475977,-.985352],[109.463672,-1.277539],[109.710254,-1.180664]]],[[[113.844531,-7.105371],[114.073633,-6.960156],[113.067383,-6.87998],[112.725879,-7.072754],[113.844531,-7.105371]]],[[[127.566992,-.318945],[127.3,-.500293],[127.761133,-.883691],[127.566992,-.318945]]],[[[128.275586,-3.674609],[128.329102,-3.515918],[127.925,-3.699316],[128.275586,-3.674609]]],[[[130.35332,-1.690527],[129.737695,-1.866895],[130.248047,-2.047754],[130.35332,-1.690527]]],[[[100.425098,-3.18291],[100.198535,-2.785547],[100.465137,-3.328516],[100.425098,-3.18291]]],[[[100.204102,-2.741016],[99.987891,-2.525391],[100.014941,-2.819727],[100.204102,-2.741016]]],[[[98.459277,-.530469],[98.544141,-.257617],[98.322949,-781e-6],[98.459277,-.530469]]],[[[122.042969,-5.437988],[121.913672,-5.072266],[121.808496,-5.256152],[122.042969,-5.437988]]],[[[123.212305,-1.171289],[122.908008,-1.182227],[122.89043,-1.587207],[123.150391,-1.304492],[123.172949,-1.616016],[123.511914,-1.447363],[123.212305,-1.171289]]],[[[120.52832,-6.298438],[120.477344,-5.775293],[120.487305,-6.464844],[120.52832,-6.298438]]],[[[115.377051,-6.970801],[115.546094,-6.938672],[115.240527,-6.86123],[115.377051,-6.970801]]],[[[116.30332,-3.868164],[116.269727,-3.251074],[116.058789,-4.006934],[116.30332,-3.868164]]],[[[122.948926,-10.909277],[123.418164,-10.65127],[123.371094,-10.474902],[122.845703,-10.761816],[122.948926,-10.909277]]],[[[123.924805,-8.272461],[123.391211,-8.280469],[123.230078,-8.530664],[123.924805,-8.272461]]],[[[123.242383,-4.112988],[122.969043,-4.02998],[123.076172,-4.227148],[123.242383,-4.112988]]],[[[117.649023,4.168994],[117.736816,4.004004],[117.884766,4.186133],[117.649023,4.168994]]],[[[121.883008,-10.590332],[121.99834,-10.446973],[121.704688,-10.555664],[121.883008,-10.590332]]]]}},{type:"Feature",properties:{name:"印度",full_name:"印度共和国",iso_a2:"IN",iso_a3:"IND",iso_n3:"356"},geometry:{type:"MultiPolygon",coordinates:[[[[68.165039,23.857324],[68.234961,23.596973],[68.776758,23.8521],[68.41748,23.571484],[69.235937,22.848535],[69.664648,22.759082],[70.489258,23.089502],[70.177246,22.572754],[68.969922,22.290283],[70.485059,20.840186],[71.024609,20.738867],[72.015234,21.155713],[72.254004,21.531006],[72.037207,21.823047],[72.182813,22.269727],[72.80918,22.233301],[72.553027,22.159961],[72.543066,21.696582],[73.1125,21.750439],[72.613281,21.461816],[72.89375,20.672754],[72.667773,19.830957],[72.987207,19.277441],[72.803027,19.079297],[72.97207,19.15332],[72.875488,18.642822],[73.476074,16.054248],[74.382227,14.494727],[74.945508,12.564551],[75.723828,11.361768],[76.553418,8.902783],[77.517578,8.07832],[78.060156,8.38457],[78.421484,9.105029],[79.411426,9.192383],[78.939941,9.565771],[79.314551,10.256689],[79.838184,10.322559],[79.693164,11.312549],[80.342383,13.361328],[80.062109,13.60625],[80.306543,13.485059],[80.053418,15.074023],[80.293457,15.710742],[80.646582,15.89502],[80.978711,15.75835],[81.286133,16.337061],[82.258789,16.559863],[82.35957,17.096191],[84.104102,18.292676],[85.441602,19.626562],[85.180762,19.594873],[85.248633,19.757666],[86.279492,19.919434],[86.975488,20.700146],[86.954102,21.365332],[87.82373,21.727344],[88.159277,22.121729],[87.941406,22.374316],[88.196289,22.139551],[88.12207,21.635791],[88.584668,21.659717],[88.641602,22.121973],[88.74502,21.584375],[89.05166,21.654102],[89.051465,22.093164],[88.928125,23.186621],[88.567383,23.674414],[88.723535,24.274902],[88.023438,24.627832],[88.45625,25.188428],[88.95166,25.259277],[88.08457,25.888232],[88.418164,26.571533],[88.828027,26.252197],[89.018652,26.410254],[89.369727,26.006104],[89.670898,26.213818],[89.833301,25.292773],[92.049707,25.169482],[92.468359,24.944141],[91.876953,24.195312],[91.36709,24.093506],[91.160449,23.660645],[91.315234,23.104395],[91.619531,22.979688],[91.92959,23.685986],[92.246094,23.683594],[92.574902,21.978076],[93.151172,22.230615],[93.32627,24.064209],[94.127637,23.876465],[94.707617,25.04873],[94.579883,25.319824],[95.132422,26.04126],[95.128711,26.597266],[96.19082,27.261279],[96.731641,27.331494],[97.102051,27.11543],[96.876855,27.586719],[97.086778,27.7475],[96.275479,28.228241],[95.832003,28.295186],[95.39715,28.142259],[95.28628,27.939955],[94.88592,27.743098],[94.277372,27.58143],[93.817265,27.025183],[93.111399,26.880082],[92.64698,26.952656],[91.99834,26.85498],[89.609961,26.719434],[88.857617,26.961475],[88.891406,27.316064],[88.803711,28.006934],[88.109766,27.870605],[87.995117,26.382373],[85.794531,26.60415],[84.091016,27.491357],[82.733398,27.518994],[80.070703,28.830176],[80.401855,29.730273],[81.010254,30.164502],[79.707774,31.013593],[78.807678,31.099982],[78.389648,32.519873],[78.700879,32.597021],[78.918945,32.358203],[79.219336,32.501074],[78.72666,34.013379],[78.970117,34.302637],[78.326953,34.606396],[78.042676,35.479785],[77.799414,35.495898],[77.048633,35.109912],[75.70918,34.503076],[73.96123,34.653467],[73.904102,34.075684],[74.250879,33.946094],[73.976465,33.721289],[74.003809,33.189453],[74.35459,32.768701],[74.663281,32.757666],[74.685742,32.493799],[75.333496,32.279199],[74.555566,31.818555],[74.632812,31.034668],[73.80918,30.093359],[73.381641,29.934375],[72.90332,29.02876],[72.341895,28.751904],[71.870313,27.9625],[70.797949,27.709619],[70.403711,28.025049],[69.537012,27.122949],[69.506934,26.742676],[70.147656,26.506445],[70.100195,25.910059],[70.648438,25.666943],[71.044043,24.400098],[69.805176,24.165234],[68.781152,24.313721],[68.724121,23.964697],[68.165039,23.857324]]],[[[93.890039,6.831055],[93.822461,7.236621],[93.658008,7.016064],[93.890039,6.831055]]],[[[92.502832,10.554883],[92.510352,10.897461],[92.352832,10.751123],[92.502832,10.554883]]],[[[92.722754,11.536084],[93.062305,13.545459],[92.533887,11.873389],[92.722754,11.536084]]]]}},{type:"Feature",properties:{name:"冰岛",full_name:"冰岛共和国",iso_a2:"IS",iso_a3:"ISL",iso_n3:"352"},geometry:{type:"Polygon",coordinates:[[[-15.543115,66.228516],[-16.249316,66.5229],[-16.48501,66.195947],[-17.550439,65.964404],[-18.297168,66.157422],[-18.141943,65.734082],[-18.845898,66.183936],[-19.489697,65.768066],[-20.20752,66.100098],[-21.129687,65.266602],[-21.406885,66.025586],[-22.944336,66.429443],[-22.441699,65.908301],[-23.452539,66.181006],[-23.832617,65.849219],[-23.285352,65.75],[-24.092627,65.776465],[-23.856738,65.538379],[-24.475684,65.525195],[-21.844385,65.447363],[-22.509082,65.196777],[-21.892139,65.048779],[-24.026172,64.863428],[-21.590625,64.626367],[-22.053369,64.313916],[-21.46333,64.37915],[-22.701172,64.083203],[-22.652197,63.827734],[-21.152393,63.944531],[-20.198145,63.555811],[-18.653613,63.406689],[-14.927393,64.319678],[-13.599316,65.035938],[-13.617871,65.519336],[-14.8271,65.764258],[-15.117383,66.125635],[-14.59585,66.381543],[-15.543115,66.228516]]]}},{type:"Feature",properties:{name:"匈牙利",full_name:"匈牙利",iso_a2:"HU",iso_a3:"HUN",iso_n3:"348"},geometry:{type:"Polygon",coordinates:[[[22.131836,48.405322],[20.490039,48.526904],[19.950391,48.146631],[18.791895,48.000293],[18.724219,47.787158],[17.761914,47.770166],[17.147363,48.005957],[17.066602,47.707568],[16.421289,47.674463],[16.676563,47.536035],[16.093066,46.863281],[16.516211,46.499902],[17.807129,45.79043],[18.905371,45.931738],[20.241797,46.108594],[21.12168,46.282422],[21.999707,47.505029],[22.87666,47.947266],[22.131836,48.405322]]]}},{type:"Feature",properties:{name:"洪都拉斯",full_name:"洪都拉斯共和国",iso_a2:"HN",iso_a3:"HND",iso_n3:"340"},geometry:{type:"Polygon",coordinates:[[[-83.15752,14.993066],[-84.095068,15.400928],[-83.765283,15.405469],[-84.261426,15.822607],[-84.97373,15.989893],[-88.22832,15.729004],[-89.142578,15.072314],[-89.362598,14.416016],[-88.482666,13.854248],[-87.802246,13.88999],[-87.814209,13.39917],[-87.489111,13.35293],[-87.337256,12.979248],[-86.729297,13.284375],[-86.733643,13.763477],[-86.040381,14.050146],[-85.733936,13.858691],[-84.985156,14.752441],[-84.453564,14.643701],[-83.15752,14.993066]]]}},{type:"Feature",properties:{name:"海地",full_name:"海地共和国",iso_a2:"HT",iso_a3:"HTI",iso_n3:"332"},geometry:{type:"Polygon",coordinates:[[[-71.779248,19.718164],[-73.400537,19.807422],[-72.703223,19.441064],[-72.811084,19.071582],[-72.376074,18.574463],[-72.789355,18.434814],[-74.227734,18.662695],[-74.478125,18.45],[-73.884961,18.041895],[-73.385156,18.251172],[-71.768311,18.03916],[-72.000391,18.5979],[-71.645312,19.163525],[-71.779248,19.718164]]]}},{type:"Feature",properties:{name:"圭亚那",full_name:"圭亚那合作共和国",iso_a2:"GY",iso_a3:"GUY",iso_n3:"328"},geometry:{type:"Polygon",coordinates:[[[-60.742139,5.202051],[-60.142041,5.238818],[-59.990674,5.082861],[-60.148633,4.533252],[-59.703271,4.381104],[-59.551123,3.933545],[-59.854395,3.5875],[-59.994336,2.68999],[-59.666602,1.746289],[-59.231201,1.376025],[-58.821777,1.201221],[-57.31748,1.963477],[-56.482812,1.942139],[-57.197363,2.853271],[-57.303662,3.3771],[-57.646729,3.394531],[-58.054297,4.10166],[-57.917041,4.82041],[-57.331006,5.020166],[-57.194775,5.548438],[-57.227539,6.178418],[-57.982568,6.785889],[-58.41499,6.851172],[-58.672949,6.390771],[-58.511084,7.398047],[-60.017529,8.549316],[-59.849072,8.248682],[-60.718652,7.535937],[-60.3521,7.002881],[-61.145605,6.694531],[-61.128711,6.214307],[-61.39082,5.93877],[-60.742139,5.202051]]]}},{type:"Feature",properties:{name:"几内亚比绍",full_name:"几内亚比绍共和国",iso_a2:"GW",iso_a3:"GNB",iso_n3:"624"},geometry:{type:"Polygon",coordinates:[[[-16.711816,12.354834],[-16.24458,12.237109],[-16.328076,12.051611],[-15.941748,11.786621],[-15.078271,11.968994],[-15.501904,11.723779],[-15.072656,11.597803],[-15.479492,11.410303],[-15.043018,10.940137],[-14.682959,11.508496],[-13.732764,11.736035],[-13.948877,12.178174],[-13.70791,12.312695],[-13.729248,12.673926],[-15.196094,12.679932],[-16.711816,12.354834]]]}},{type:"Feature",properties:{name:"几内亚",full_name:"几内亚共和国",iso_a2:"GN",iso_a3:"GIN",iso_n3:"324"},geometry:{type:"Polygon",coordinates:[[[-10.283203,8.485156],[-9.518262,8.346094],[-9.463818,7.415869],[-9.117578,7.215918],[-8.659766,7.688379],[-8.486426,7.558496],[-8.231885,7.556738],[-8.009863,8.078516],[-8.236963,8.455664],[-7.681201,8.410352],[-7.950977,8.786816],[-7.896191,9.415869],[-8.136963,9.495703],[-7.990625,10.1625],[-8.337402,10.990625],[-8.666699,11.009473],[-8.398535,11.366553],[-8.822021,11.673242],[-9.043066,12.402344],[-9.395361,12.464648],[-9.358105,12.25542],[-9.754004,12.029932],[-10.274854,12.212646],[-10.709229,11.89873],[-10.933203,12.205176],[-11.305176,12.01543],[-11.502197,12.198633],[-11.389404,12.404395],[-12.399072,12.340088],[-13.729248,12.673926],[-13.70791,12.312695],[-13.948877,12.178174],[-13.732764,11.736035],[-14.682959,11.508496],[-15.043018,10.940137],[-14.593506,10.766699],[-14.426904,10.24834],[-13.689795,9.927783],[-13.691357,9.535791],[-13.292676,9.049219],[-12.427979,9.898145],[-11.273633,9.996533],[-10.690527,9.314258],[-10.500537,8.687549],[-10.712109,8.335254],[-10.283203,8.485156]]]}},{type:"Feature",properties:{name:"危地马拉",full_name:"危地马拉共和国",iso_a2:"GT",iso_a3:"GTM",iso_n3:"320"},geometry:{type:"Polygon",coordinates:[[[-92.235156,14.54541],[-91.377344,13.990186],[-90.095215,13.736523],[-89.362598,14.416016],[-89.142578,15.072314],[-88.22832,15.729004],[-88.894043,15.890625],[-89.2375,15.894434],[-89.161475,17.814844],[-90.98916,17.816406],[-90.992969,17.252441],[-91.409619,17.255859],[-90.416992,16.391016],[-90.447168,16.072705],[-91.736572,16.070166],[-92.204248,15.275],[-92.235156,14.54541]]]}},{type:"Feature",properties:{name:"格林纳达",full_name:"格林纳达",iso_a2:"GD",iso_a3:"GRD",iso_n3:"308"},geometry:{type:"Polygon",coordinates:[[[-61.715527,12.012646],[-61.607031,12.223291],[-61.71499,12.185156],[-61.715527,12.012646]]]}},{type:"Feature",properties:{name:"希腊",full_name:"希腊共和国",iso_a2:"GR",iso_a3:"GRC",iso_n3:"300"},geometry:{type:"MultiPolygon",coordinates:[[[[20.612305,38.38335],[20.352539,38.179883],[20.761328,38.070557],[20.612305,38.38335]]],[[[20.07793,39.432715],[19.926074,39.77373],[19.646484,39.76709],[20.07793,39.432715]]],[[[23.41543,38.958643],[22.870313,38.870508],[24.536523,37.979736],[24.127539,38.648486],[23.41543,38.958643]]],[[[26.824414,37.811426],[26.581055,37.72373],[27.055078,37.709277],[26.824414,37.811426]]],[[[26.094043,38.218066],[26.160352,38.540723],[25.846094,38.574023],[26.094043,38.218066]]],[[[26.410156,39.329443],[25.844141,39.200049],[26.46875,38.972803],[26.410156,39.329443]]],[[[27.842773,35.929297],[28.231836,36.433643],[27.716309,36.171582],[27.842773,35.929297]]],[[[23.852246,35.535449],[23.569824,35.534766],[23.592773,35.257227],[24.799805,34.934473],[26.165625,35.018604],[26.320215,35.315137],[25.791309,35.122852],[25.730176,35.348584],[23.852246,35.535449]]],[[[26.320898,41.716553],[25.92334,41.311914],[25.251172,41.243555],[24.487891,41.555225],[22.916016,41.336279],[20.964258,40.849902],[20.657422,40.117383],[20.00127,39.709424],[20.713379,39.035156],[21.118359,39.02998],[20.768555,38.874414],[21.182617,38.345557],[22.42168,38.438525],[23.148926,38.176074],[22.920313,37.958301],[21.824707,38.328125],[21.124707,37.891602],[21.678906,37.387207],[21.58291,37.080957],[21.892383,36.737305],[22.080469,37.028955],[22.427734,36.475781],[22.717188,36.793945],[23.160156,36.448096],[22.725391,37.542139],[23.489258,37.440186],[23.036328,37.878369],[23.501758,38.034863],[24.019727,37.677734],[24.024512,38.139795],[22.569141,38.86748],[23.066699,39.037939],[22.921387,39.306348],[23.327734,39.174902],[22.592188,40.036914],[22.629492,40.495557],[22.922266,40.590869],[23.627344,39.924072],[23.42627,40.263965],[23.94707,39.965576],[23.72793,40.329736],[24.343359,40.147705],[23.762793,40.747803],[25.104492,40.994727],[26.038965,40.726758],[26.624902,41.401758],[26.320898,41.716553]]]]}},{type:"Feature",properties:{name:"加纳",full_name:"加纳共和国",iso_a2:"GH",iso_a3:"GHA",iso_n3:"288"},geometry:{type:"Polygon",coordinates:[[[-.068604,11.115625],[-.627148,10.927393],[-2.829932,10.998389],[-2.69585,9.481348],[-2.505859,8.20874],[-3.235791,6.807227],[-2.75498,5.43252],[-3.019141,5.130811],[-3.086719,5.12832],[-3.114014,5.088672],[-2.001855,4.762451],[.259668,5.757324],[.949707,5.810254],[1.187207,6.089404],[.525586,6.850928],[.686328,8.354883],[.372559,8.759277],[.525684,9.398486],[.233398,9.463525],[.380859,10.291846],[-.086328,10.673047],[-.068604,11.115625]]]}},{type:"Feature",properties:{name:"德国",full_name:"德意志联邦共和国",iso_a2:"DE",iso_a3:"DEU",iso_n3:"276"},geometry:{type:"MultiPolygon",coordinates:[[[[9.524023,47.524219],[10.183008,47.278809],[10.439453,47.551562],[11.041992,47.393115],[12.209277,47.718262],[13.014355,47.478076],[12.760352,48.106982],[13.814746,48.766943],[12.681152,49.414502],[12.089844,50.301758],[12.942676,50.406445],[14.319727,51.037793],[14.809375,50.858984],[15.016602,51.252734],[14.619434,52.528516],[14.128613,52.878223],[14.258887,53.729639],[12.575391,54.467383],[11.399609,53.944629],[10.85459,54.009814],[11.013379,54.37915],[9.868652,54.472461],[9.739746,54.825537],[8.670313,54.903418],[8.92041,53.965332],[9.783984,53.554639],[8.618945,53.875],[8.495215,53.394238],[8.009277,53.690723],[7.285254,53.681348],[7.197266,53.282275],[7.033008,52.651367],[6.710742,52.617871],[7.035156,52.380225],[6.800391,51.967383],[5.94873,51.802686],[5.993945,50.750439],[6.340918,50.451758],[6.116504,50.120996],[6.487305,49.798486],[6.344336,49.452734],[6.735449,49.160596],[8.134863,48.973584],[7.615625,47.592725],[8.454004,47.596191],[8.572656,47.775635],[9.524023,47.524219]]],[[[13.70918,54.382715],[13.336816,54.697119],[13.190039,54.325635],[13.70918,54.382715]]],[[[14.211426,53.950342],[13.827734,54.127246],[14.213672,53.870752],[14.211426,53.950342]]]]}},{type:"Feature",properties:{name:"格鲁吉亚",full_name:"格鲁吉亚",iso_a2:"GE",iso_a3:"GEO",iso_n3:"268"},geometry:{type:"Polygon",coordinates:[[[43.439453,41.107129],[45.001367,41.290967],[45.280957,41.449561],[46.534375,41.088574],[46.672559,41.286816],[46.182129,41.65708],[46.429883,41.890967],[45.638574,42.205078],[45.705273,42.498096],[44.870996,42.756396],[43.825977,42.571533],[42.760645,43.16958],[41.580566,43.219238],[40.648047,43.533887],[39.97832,43.419824],[41.48877,42.659326],[41.762988,41.97002],[41.510059,41.51748],[42.754102,41.578906],[43.439453,41.107129]]]}},{type:"Feature",properties:{name:"冈比亚",full_name:"冈比亚共和国",iso_a2:"GM",iso_a3:"GMB",iso_n3:"270"},geometry:{type:"Polygon",coordinates:[[[-16.562305,13.587305],[-16.351807,13.343359],[-15.42749,13.468359],[-16.413379,13.269727],[-16.669336,13.475],[-16.76333,13.06416],[-15.834277,13.156445],[-15.151123,13.556494],[-14.246777,13.23584],[-13.826709,13.407812],[-15.10835,13.812109],[-15.509668,13.58623],[-16.562305,13.587305]]]}},{type:"Feature",properties:{name:"加蓬",full_name:"加蓬共和国",iso_a2:"GA",iso_a3:"GAB",iso_n3:"266"},geometry:{type:"Polygon",coordinates:[[[13.293555,2.161572],[11.328711,2.167432],[11.335352,.999707],[9.59082,1.031982],[9.617969,.576514],[9.324805,.5521],[10.001465,.194971],[9.796777,.044238],[9.354883,.343604],[9.29668,-.35127],[8.946387,-.68877],[8.703125,-.591016],[9.064648,-1.29834],[9.501074,-1.555176],[9.318848,-1.632031],[9.036328,-1.308887],[9.624609,-2.36709],[10.062012,-2.549902],[9.72207,-2.467578],[11.130176,-3.916309],[11.504297,-3.520312],[11.879883,-3.665918],[11.93418,-3.318555],[11.537793,-2.836719],[11.605469,-2.342578],[12.446387,-2.32998],[12.59043,-1.826855],[12.991992,-2.313379],[13.464941,-2.39541],[13.733789,-2.138477],[13.993848,-2.490625],[14.383984,-1.890039],[14.474121,-.573438],[13.860059,-.20332],[13.949609,.353809],[14.429883,.901465],[14.180859,1.370215],[13.216309,1.248438],[13.293555,2.161572]]]}},{type:"Feature",properties:{name:"法国",full_name:"法兰西共和国",iso_a2:"FR",iso_a3:"FRA",iso_n3:"250"},geometry:{type:"MultiPolygon",coordinates:[[[[9.480371,42.80542],[9.363184,43.017383],[9.313379,42.713184],[8.565625,42.357715],[8.80752,41.588379],[9.186133,41.384912],[9.550684,42.129736],[9.480371,42.80542]]],[[[7.615625,47.592725],[8.134863,48.973584],[6.735449,49.160596],[6.344336,49.452734],[5.789746,49.538281],[4.867578,49.788135],[4.818652,50.153174],[4.149316,49.971582],[4.174609,50.246484],[2.759375,50.750635],[2.524902,51.097119],[1.672266,50.88501],[1.592773,50.252197],[.186719,49.703027],[.416895,49.448389],[-1.138525,49.387891],[-1.258643,49.680176],[-1.856445,49.683789],[-1.376465,48.652588],[-2.692334,48.536816],[-3.231445,48.84082],[-4.7625,48.450244],[-4.241406,48.303662],[-4.678809,48.039502],[-4.312109,47.8229],[-1.742529,47.215967],[-2.19707,47.162939],[-2.059375,46.810303],[-1.146289,46.311377],[-1.195996,45.714453],[-.548486,45.000586],[-1.081006,45.532422],[-1.076953,44.689844],[-1.484863,43.56377],[-1.794043,43.407324],[-1.46084,43.051758],[-.586426,42.798975],[.631641,42.6896],[.696875,42.845117],[1.42832,42.595898],[1.706055,42.50332],[3.211426,42.431152],[3.051758,42.915137],[3.91084,43.563086],[6.115918,43.072363],[7.377734,43.731738],[7.39502,43.765332],[7.438672,43.750439],[7.493164,43.767139],[7.637207,44.164844],[6.900195,44.335742],[6.992676,44.827295],[6.634766,45.068164],[7.146387,45.381738],[6.790918,45.740869],[7.021094,45.925781],[6.758105,46.415771],[5.97002,46.214697],[6.968359,47.453223],[7.615625,47.592725]]],[[[55.797363,-21.339355],[55.661914,-20.90625],[55.311328,-20.904102],[55.362695,-21.273633],[55.797363,-21.339355]]],[[[-60.82627,14.494482],[-61.21333,14.848584],[-61.063721,14.46709],[-60.82627,14.494482]]],[[[-61.327148,16.23042],[-61.172607,16.256104],[-61.471191,16.506641],[-61.522168,16.228027],[-61.327148,16.23042]]],[[[-54.61626,2.326758],[-54.130078,2.121045],[-53.767773,2.354834],[-52.903467,2.211523],[-51.652539,4.061279],[-51.827539,4.635693],[-52.00293,4.352295],[-52.058105,4.717383],[-52.899316,5.425049],[-53.847168,5.782227],[-54.155957,5.358984],[-54.479688,4.836523],[-54.00957,3.448535],[-54.61626,2.326758]]]]}},{type:"Feature",properties:{name:"圣皮埃尔和密克隆群岛",full_name:"圣皮埃尔和密克隆群岛（法国）",iso_a2:"PM",iso_a3:"SPM",iso_n3:"666"},geometry:{type:"Polygon",coordinates:[[[-56.26709,46.838477],[-56.364648,47.098975],[-56.384766,46.819434],[-56.26709,46.838477]]]}},{type:"Feature",properties:{name:"瓦利斯和富图纳群岛",full_name:"瓦利斯和富图纳群岛",iso_a2:"WF",iso_a3:"WLF",iso_n3:"876"},geometry:{type:"Polygon",coordinates:[[[-178.04668,-14.318359],[-178.194385,-14.255469],[-178.158594,-14.311914],[-178.04668,-14.318359]]]}},{type:"Feature",properties:{name:"法属圣马丁",full_name:"法属圣马丁岛",iso_a2:"MF",iso_a3:"MAF",iso_n3:"663"},geometry:{type:"Polygon",coordinates:[[[-63.011182,18.068945],[-63.063086,18.115332],[-63.123047,18.068945],[-63.011182,18.068945]]]}},{type:"Feature",properties:{name:"圣巴泰勒米",full_name:"圣巴泰勒米（法国）",iso_a2:"BL",iso_a3:"BLM",iso_n3:"652"},geometry:{type:"Polygon",coordinates:[[[-62.831934,17.876465],[-62.799707,17.908691],[-62.874219,17.922266],[-62.831934,17.876465]]]}},{type:"Feature",properties:{name:"法属波利尼西亚",full_name:"法属波利尼西亚",iso_a2:"PF",iso_a3:"PYF",iso_n3:"258"},geometry:{type:"MultiPolygon",coordinates:[[[[-149.321533,-17.690039],[-149.63501,-17.564258],[-149.181787,-17.862305],[-149.321533,-17.690039]]],[[[-139.024316,-9.695215],[-139.134082,-9.829492],[-138.827344,-9.741602],[-139.024316,-9.695215]]]]}},{type:"Feature",properties:{name:"新喀里多尼亚",full_name:"新喀里多尼亚",iso_a2:"NC",iso_a3:"NCL",iso_n3:"540"},geometry:{type:"MultiPolygon",coordinates:[[[[164.202344,-20.246094],[164.059668,-20.141504],[164.927441,-21.289844],[166.467969,-22.256055],[166.970313,-22.322852],[166.942383,-22.090137],[165.191797,-20.768848],[164.202344,-20.246094]]],[[[168.010938,-21.42998],[167.81543,-21.392676],[167.966797,-21.641602],[168.010938,-21.42998]]],[[[167.400879,-21.160645],[167.297949,-20.73252],[167.055762,-20.720215],[167.072656,-20.997266],[167.400879,-21.160645]]]]}},{type:"Feature",properties:{name:"法属南部和南极领地",full_name:"法属南部和南极领地",iso_a2:"TF",iso_a3:"ATF",iso_n3:"260"},geometry:{type:"Polygon",coordinates:[[[69.184863,-49.10957],[69.002441,-48.66123],[68.814746,-49.699609],[69.153125,-49.529688],[70.124316,-49.704395],[70.247754,-49.530664],[69.759961,-49.430176],[70.386133,-49.433984],[70.555469,-49.201465],[70.320215,-49.058594],[69.542383,-49.255664],[69.592773,-48.970996],[69.184863,-49.10957]]]}},{type:"Feature",properties:{name:"奥兰群岛",full_name:"奥兰群岛（芬兰）",iso_a2:"AX",iso_a3:"ALA",iso_n3:"248"},geometry:{type:"Polygon",coordinates:[[[19.989551,60.351172],[19.799805,60.081738],[20.258887,60.261279],[19.989551,60.351172]]]}},{type:"Feature",properties:{name:"芬兰",full_name:"芬兰共和国",iso_a2:"FI",iso_a3:"FIN",iso_n3:"246"},geometry:{type:"Polygon",coordinates:[[[24.155469,65.805273],[24.628027,65.85918],[25.347852,65.479248],[25.288184,64.860352],[24.55791,64.801025],[21.143848,62.73999],[21.436035,60.596387],[22.584961,60.380566],[22.462695,60.029199],[22.911719,60.209717],[23.021289,59.816016],[25.758008,60.267529],[26.569336,60.624561],[26.534668,60.412891],[27.797656,60.536133],[31.533984,62.8854],[29.991504,63.735156],[30.51377,64.2],[29.604199,64.968408],[30.102734,65.72627],[29.066211,66.891748],[29.988086,67.668262],[28.685156,68.189795],[28.414062,68.90415],[28.96582,69.021973],[29.141602,69.671436],[27.747852,70.064844],[26.072461,69.691553],[24.941406,68.593262],[23.854004,68.805908],[22.410938,68.719873],[21.59375,69.273584],[20.622168,69.036865],[23.638867,67.954395],[24.155469,65.805273]]]}},{type:"Feature",properties:{name:"斐济",full_name:"斐济共和国",iso_a2:"FJ",iso_a3:"FJI",iso_n3:"242"},geometry:{type:"MultiPolygon",coordinates:[[[[179.999219,-16.168555],[180,-16.15293],[178.497461,-16.787891],[178.706641,-16.976172],[179.202344,-16.712695],[179.92793,-16.744434],[179.930371,-16.519434],[179.56416,-16.636914],[179.999219,-16.168555]]],[[[178.280176,-17.371973],[177.504492,-17.539551],[177.321387,-18.077539],[177.955469,-18.264062],[178.667676,-18.080859],[178.280176,-17.371973]]]]}},{type:"Feature",properties:{name:"埃塞俄比亚",full_name:"埃塞俄比亚联邦民主共和国",iso_a2:"ET",iso_a3:"ETH",iso_n3:"231"},geometry:{type:"Polygon",coordinates:[[[35.268359,5.492285],[35.74502,5.343994],[36.021973,4.468115],[36.905566,4.411475],[38.086133,3.648828],[39.494434,3.456104],[40.765234,4.273047],[41.14043,3.962988],[41.883984,3.977734],[43.583496,4.85498],[44.940527,4.912012],[47.978223,7.99707],[46.978223,7.99707],[43.983789,9.008838],[42.841602,10.203076],[42.656445,10.6],[42.922754,10.999316],[41.798242,10.980469],[41.792676,11.686035],[42.378516,12.466406],[40.820117,14.11167],[40.140625,14.456055],[39.023828,14.628223],[38.431445,14.428613],[37.88418,14.852295],[37.571191,14.149072],[37.257227,14.45376],[36.524316,14.256836],[36.125195,12.757031],[35.670215,12.62373],[35.112305,11.816553],[34.931445,10.864795],[34.343945,10.658643],[34.078125,9.461523],[34.072754,8.545264],[33.281055,8.437256],[32.998926,7.899512],[33.902441,7.509521],[34.710645,6.660303],[35.268359,5.492285]]]}},{type:"Feature",properties:{name:"爱沙尼亚",full_name:"爱沙尼亚共和国",iso_a2:"EE",iso_a3:"EST",iso_n3:"233"},geometry:{type:"MultiPolygon",coordinates:[[[[27.351953,57.528125],[27.778516,57.870703],[27.43418,58.787256],[28.0125,59.484277],[25.509277,59.639014],[23.494434,59.195654],[23.767578,58.36084],[24.529102,58.354248],[24.322559,57.870605],[25.282617,58.048486],[26.462109,57.544482],[27.351953,57.528125]]],[[[22.617383,58.62124],[21.862305,58.497168],[21.996875,57.931348],[23.323242,58.45083],[22.617383,58.62124]]],[[[22.92373,58.826904],[22.649414,59.087109],[22.05625,58.943604],[22.542188,58.68999],[22.92373,58.826904]]]]}},{type:"Feature",properties:{name:"厄立特里亚",full_name:"厄立特里亚国",iso_a2:"ER",iso_a3:"ERI",iso_n3:"232"},geometry:{type:"MultiPolygon",coordinates:[[[[36.524316,14.256836],[37.257227,14.45376],[37.571191,14.149072],[37.88418,14.852295],[38.431445,14.428613],[39.023828,14.628223],[40.140625,14.456055],[40.820117,14.11167],[42.378516,12.466406],[42.703711,12.380322],[43.116699,12.708594],[41.176465,14.620312],[40.204102,15.014111],[39.86377,15.470312],[39.785547,15.124854],[38.609473,18.005078],[37.411035,17.061719],[37.008984,17.058887],[36.426758,15.13208],[36.524316,14.256836]]],[[[40.141211,15.696143],[39.956738,15.889404],[39.975195,15.612451],[40.399023,15.579883],[40.141211,15.696143]]]]}},{type:"Feature",properties:{name:"赤道几内亚",full_name:"赤道几内亚共和国",iso_a2:"GQ",iso_a3:"GNQ",iso_n3:"226"},geometry:{type:"MultiPolygon",coordinates:[[[[8.735742,3.758301],[8.474902,3.264648],[8.704004,3.223633],[8.946094,3.627539],[8.735742,3.758301]]],[[[11.328711,2.167432],[9.800781,2.304443],[9.385938,1.139258],[9.59082,1.031982],[11.335352,.999707],[11.328711,2.167432]]]]}},{type:"Feature",properties:{name:"萨尔瓦多",full_name:"萨尔瓦多共和国",iso_a2:"SV",iso_a3:"SLV",iso_n3:"222"},geometry:{type:"Polygon",coordinates:[[[-89.362598,14.416016],[-90.095215,13.736523],[-88.512012,13.183936],[-88.685645,13.281494],[-87.930859,13.180664],[-87.814209,13.39917],[-87.802246,13.88999],[-88.482666,13.854248],[-89.362598,14.416016]]]}},{type:"Feature",properties:{name:"埃及",full_name:"阿拉伯埃及共和国",iso_a2:"EG",iso_a3:"EGY",iso_n3:"818"},geometry:{type:"Polygon",coordinates:[[[36.871387,21.996729],[35.697852,22.946191],[35.504395,23.779297],[35.783887,23.937793],[35.194141,24.475146],[33.959082,26.649023],[33.54707,27.898145],[32.359766,29.630664],[32.565723,29.973975],[33.247754,28.567725],[34.220117,27.764307],[34.904297,29.477344],[34.245313,31.208301],[34.198145,31.322607],[32.60332,31.06875],[32.216211,31.29375],[32.101758,31.092822],[31.771094,31.292578],[31.892188,31.482471],[32.136035,31.341064],[31.888965,31.541406],[31.08291,31.60332],[29.07207,30.830273],[25.150488,31.65498],[24.852734,31.334814],[24.961426,30.678516],[24.703223,30.201074],[24.980273,29.181885],[24.980273,21.99585],[31.092676,21.994873],[31.400293,22.202441],[31.434473,21.99585],[36.871387,21.996729]]]}},{type:"Feature",properties:{name:"厄瓜多尔",full_name:"厄瓜多尔共和国",iso_a2:"EC",iso_a3:"ECU",iso_n3:"218"},geometry:{type:"MultiPolygon",coordinates:[[[[-75.284473,-.106543],[-76.270605,.439404],[-76.494629,.235449],[-77.396338,.393896],[-77.702881,.837842],[-78.859668,1.455371],[-78.899658,1.20625],[-80.088281,.784766],[-80.046143,.155371],[-80.482275,-.368262],[-80.282373,-.620508],[-80.902393,-1.078906],[-80.760596,-1.93457],[-80.932178,-2.269141],[-80.284717,-2.706738],[-80.006641,-2.353809],[-79.925586,-2.548535],[-79.842139,-2.067383],[-79.729883,-2.579102],[-79.96333,-3.157715],[-80.324658,-3.387891],[-80.179248,-3.877734],[-80.490137,-4.010059],[-80.478564,-4.430078],[-79.638525,-4.454883],[-79.330957,-4.927832],[-79.033301,-4.969141],[-78.686035,-4.562402],[-78.345361,-3.397363],[-78.158496,-3.465137],[-77.860596,-2.981641],[-76.679102,-2.562598],[-75.570557,-1.53125],[-75.259375,-.590137],[-75.62627,-.122852],[-75.284473,-.106543]]],[[[-80.131592,-2.973145],[-79.909033,-2.725586],[-80.223682,-2.753125],[-80.131592,-2.973145]]],[[[-90.334863,-.771582],[-90.269385,-.484668],[-90.531689,-.581445],[-90.334863,-.771582]]],[[[-89.418896,-.911035],[-89.287842,-.689844],[-89.608594,-.888574],[-89.418896,-.911035]]],[[[-91.272168,.025146],[-91.596826,.0021],[-91.120947,-.559082],[-91.49541,-.860938],[-91.131055,-1.019629],[-90.799658,-.752051],[-91.272168,.025146]]]]}},{type:"Feature",properties:{name:"多米尼加",full_name:"多米尼加共和国",iso_a2:"DO",iso_a3:"DOM",iso_n3:"214"},geometry:{type:"Polygon",coordinates:[[[-71.768311,18.03916],[-71.438965,17.635596],[-71.027832,18.273193],[-69.274512,18.439844],[-68.687402,18.214941],[-68.33916,18.611523],[-69.623633,19.117822],[-69.232471,19.271826],[-69.739404,19.299219],[-69.956836,19.671875],[-70.95415,19.913965],[-71.779248,19.718164],[-71.645312,19.163525],[-72.000391,18.5979],[-71.768311,18.03916]]]}},{type:"Feature",properties:{name:"多米尼克",full_name:"多米尼克国",iso_a2:"DM",iso_a3:"DMA",iso_n3:"212"},geometry:{type:"Polygon",coordinates:[[[-61.281689,15.249023],[-61.277246,15.526709],[-61.458105,15.633105],[-61.281689,15.249023]]]}},{type:"Feature",properties:{name:"美国本土外小岛屿",full_name:"美国本土外小岛屿",iso_a2:"UM",iso_a3:"UMI",iso_n3:"581"},geometry:{type:"Polygon",coordinates:[[[166.61939537900003,19.281642971000053],[166.64421634200005,19.27558014500005],[166.63819420700008,19.286444403000075],[166.61939537900003,19.281642971000053]]]}},{type:"Feature",properties:{name:"吉布提",full_name:"吉布提共和国",iso_a2:"DJ",iso_a3:"DJI",iso_n3:"262"},geometry:{type:"Polygon",coordinates:[[[43.245996,11.499805],[42.521777,11.572168],[43.380273,12.09126],[43.116699,12.708594],[42.703711,12.380322],[42.378516,12.466406],[41.792676,11.686035],[41.798242,10.980469],[42.922754,10.999316],[43.245996,11.499805]]]}},{type:"Feature",properties:{name:"格陵兰",full_name:"格陵兰",iso_a2:"GL",iso_a3:"GRL",iso_n3:"304"},geometry:{type:"MultiPolygon",coordinates:[[[[-29.952881,83.564844],[-37.72334,83.497754],[-38.15625,82.998633],[-40.356836,83.332178],[-41.300146,83.100781],[-43.009277,83.2646],[-46.169043,83.063867],[-46.136816,82.858838],[-41.369629,82.75],[-45.556543,82.747021],[-44.238867,82.368164],[-44.729492,81.779834],[-50.037109,82.472412],[-49.541064,81.918066],[-53.022559,82.321729],[-53.555664,81.653271],[-54.548877,82.350635],[-59.261816,82.006641],[-56.615137,81.362891],[-59.281934,81.884033],[-60.842871,81.855371],[-61.435986,81.133594],[-62.903369,81.218359],[-63.028662,80.889551],[-64.515527,81],[-67.050635,80.384521],[-66.843652,80.076221],[-64.17915,80.099268],[-65.825537,79.17373],[-71.651318,78.623145],[-72.818066,78.194336],[-69.351367,77.467139],[-66.691211,77.681201],[-66.389453,77.280273],[-68.135547,77.37959],[-71.141455,77.028662],[-68.114258,76.650635],[-69.484082,76.39917],[-68.14873,76.067041],[-66.674805,75.977393],[-66.992578,76.212939],[-63.291309,76.352051],[-58.516211,75.689062],[-58.565527,75.352734],[-56.255469,74.526807],[-57.230566,74.125293],[-56.225391,74.129102],[-55.288281,73.3271],[-55.668555,73.00791],[-54.737939,72.87251],[-55.601709,72.453467],[-55.581445,72.178857],[-54.840137,72.356104],[-55.594043,71.553516],[-53.962988,71.458984],[-53.652148,72.362646],[-53.440088,71.579004],[-51.769922,71.671729],[-53.007568,71.17998],[-51.018945,71.001318],[-51.774316,71.010449],[-50.872363,70.364893],[-52.801953,70.750586],[-54.530762,70.699268],[-52.254639,70.058936],[-50.291699,70.014453],[-50.945703,68.682666],[-51.623145,68.534814],[-52.60459,68.70874],[-53.383154,68.297363],[-51.210156,68.419922],[-51.456494,68.116064],[-53.151562,68.207764],[-53.735205,67.549023],[-52.344824,67.836914],[-50.968848,67.806641],[-50.613477,67.52793],[-52.666455,67.749707],[-53.884424,67.135547],[-52.386865,66.881152],[-53.41875,66.648535],[-53.53877,66.139355],[-51.225,66.881543],[-53.392041,66.04834],[-53.198975,65.594043],[-52.55127,65.461377],[-51.091895,65.775781],[-52.537695,65.328809],[-51.922607,64.21875],[-50.721582,64.797607],[-50.960645,65.201123],[-50.121631,64.70376],[-50.008984,64.447266],[-50.49209,64.693164],[-51.40376,64.463184],[-51.584912,64.103174],[-50.260693,64.214258],[-51.54751,64.006104],[-51.468848,63.642285],[-50.390088,62.822021],[-49.793115,63.044629],[-50.319238,62.473193],[-49.553467,62.232715],[-49.623779,61.998584],[-48.828711,62.079688],[-49.380273,61.890186],[-49.289062,61.589941],[-48.386426,61.004736],[-47.770312,60.997754],[-48.180811,60.769238],[-46.874463,60.816406],[-45.870215,61.218311],[-46.046631,60.615723],[-45.380518,60.444922],[-44.756738,60.6646],[-45.379248,60.20293],[-44.613281,60.01665],[-44.224365,60.273535],[-44.412939,59.922607],[-43.906543,59.815479],[-43.955029,60.025488],[-43.1229,60.06123],[-43.212988,60.390674],[-43.922705,60.595361],[-43.044092,60.523682],[-42.585303,61.71748],[-42.110205,61.857227],[-42.152979,62.568457],[-42.94165,62.720215],[-41.908984,62.737109],[-41.634473,62.972461],[-42.174512,63.208789],[-41.387891,63.061865],[-40.550391,63.725244],[-40.617773,64.131738],[-41.581006,64.29834],[-40.781738,64.221777],[-40.182227,64.479932],[-41.084424,65.10083],[-39.937256,65.141602],[-39.57793,65.340771],[-40.173535,65.556152],[-38.203369,65.711719],[-38.520361,66.009668],[-38.139941,65.903516],[-37.752344,66.261523],[-38.156641,66.385596],[-37.278711,66.304395],[-37.954785,65.633594],[-36.665186,65.790088],[-36.527246,66.007715],[-36.379199,65.830811],[-35.630078,66.139941],[-35.867236,66.441406],[-35.188574,66.250293],[-34.198242,66.655078],[-32.164551,67.991113],[-32.327441,68.437305],[-30.978564,68.061328],[-26.48291,68.675928],[-22.287061,70.033398],[-25.529883,70.353174],[-27.38418,69.991602],[-27.56084,70.124463],[-26.621777,70.463379],[-29.07207,70.444971],[-28.069873,70.699023],[-28.398438,70.99292],[-26.71792,70.950488],[-25.742236,71.183594],[-25.842725,71.480176],[-27.087207,71.626562],[-25.885156,71.571924],[-24.562207,71.223535],[-23.327832,70.450977],[-22.690674,70.437305],[-22.437012,70.86001],[-22.384131,70.462402],[-21.522656,70.526221],[-21.752246,71.47832],[-22.479639,71.383447],[-21.959668,71.744678],[-25.117871,72.346973],[-24.81333,72.901514],[-26.657617,72.71582],[-24.62998,73.037646],[-24.069043,72.49873],[-22.293213,72.119531],[-22.036328,72.918457],[-24.132666,73.409375],[-27.348047,73.067822],[-27.561621,73.138477],[-26.541846,73.248975],[-27.27041,73.436279],[-26.062305,73.253027],[-24.79126,73.511279],[-25.521289,73.851611],[-22.346875,73.269238],[-20.509668,73.492871],[-20.367285,73.848242],[-22.134814,73.990479],[-22.321582,74.302539],[-21.94292,74.565723],[-21.954932,74.244287],[-20.653125,74.137354],[-19.369141,74.284033],[-19.287012,74.546387],[-19.984912,74.975195],[-20.861572,74.635938],[-20.985791,75.074365],[-22.232861,75.119727],[-20.484961,75.314258],[-19.526367,75.180225],[-19.508984,75.75752],[-20.103613,76.219092],[-21.488232,76.271875],[-22.609326,76.704297],[-20.486719,76.920801],[-18.510303,76.778174],[-18.442627,77.259375],[-20.680811,77.618994],[-19.49043,77.718896],[-20.862598,77.911865],[-21.72959,77.708545],[-21.13374,78.658643],[-18.991992,79.178369],[-20.150146,80.01123],[-19.429199,80.257715],[-16.48877,80.251953],[-16.760596,80.573389],[-11.430664,81.456836],[-14.241992,81.813867],[-17.456055,81.397705],[-19.629932,81.639893],[-23.117725,80.778174],[-21.337988,82.068701],[-24.293066,81.700977],[-25.148828,82.001123],[-29.887402,82.054834],[-23.118066,82.324707],[-21.58252,82.63418],[-25.123389,83.159619],[-32.032715,82.983447],[-25.795068,83.260986],[-29.952881,83.564844]]],[[[-52.731152,69.944727],[-54.371631,70.317285],[-54.919141,69.713623],[-53.578418,69.256641],[-51.900195,69.604785],[-52.731152,69.944727]]],[[[-55.016895,72.791113],[-56.214795,72.719189],[-55.566602,72.564355],[-55.016895,72.791113]]],[[[-44.864551,82.083643],[-44.91748,82.480518],[-47.272266,82.656934],[-44.864551,82.083643]]],[[[-25.432324,70.921338],[-27.617236,70.91377],[-28.035254,70.486816],[-26.604687,70.553369],[-26.217871,70.454053],[-25.432324,70.921338]]],[[[-17.6125,79.825879],[-17.98291,80.055176],[-19.138281,79.852344],[-17.6125,79.825879]]],[[[-18.000537,75.407324],[-18.856055,75.319141],[-18.670801,75.00166],[-17.391992,75.036914],[-18.000537,75.407324]]],[[[-46.266699,60.781396],[-46.205225,60.943506],[-46.788086,60.758398],[-46.266699,60.781396]]]]}},{type:"Feature",properties:{name:"法罗群岛",full_name:"法罗群岛（丹麦）",iso_a2:"FO",iso_a3:"FRO",iso_n3:"234"},geometry:{type:"Polygon",coordinates:[[[-6.631055,62.227881],[-7.172168,62.285596],[-6.725195,61.951465],[-6.631055,62.227881]]]}},{type:"Feature",properties:{name:"丹麦",full_name:"丹麦王国",iso_a2:"DK",iso_a3:"DNK",iso_n3:"208"},geometry:{type:"MultiPolygon",coordinates:[[[[12.56875,55.785059],[12.218945,56.118652],[11.819727,55.697656],[11.627734,55.956885],[10.978906,55.721533],[11.862305,54.772607],[12.56875,55.785059]]],[[[9.739746,54.825537],[9.591113,55.493213],[10.926172,56.443262],[10.282715,56.620508],[10.609961,57.736914],[8.284082,56.852344],[8.468359,56.664551],[9.254883,57.011719],[8.67168,56.495654],[8.163965,56.606885],[8.132129,55.599805],[8.615918,55.418213],[8.670313,54.903418],[9.739746,54.825537]]],[[[10.645117,55.609814],[9.860645,55.515479],[9.98877,55.163184],[10.785254,55.133398],[10.645117,55.609814]]],[[[11.361426,54.89165],[11.035547,54.773096],[11.765918,54.679443],[11.361426,54.89165]]]]}},{type:"Feature",properties:{name:"捷克",full_name:"捷克共和国",iso_a2:"CZ",iso_a3:"CZE",iso_n3:"203"},geometry:{type:"Polygon",coordinates:[[[18.832227,49.510791],[18.562402,49.879346],[17.627051,50.116406],[17.702246,50.307178],[16.880078,50.427051],[16.63916,50.102148],[16.282227,50.655615],[14.99375,51.014355],[14.809375,50.858984],[14.319727,51.037793],[12.942676,50.406445],[12.089844,50.301758],[12.681152,49.414502],[13.814746,48.766943],[14.691309,48.599219],[15.066797,48.997852],[16.953125,48.598828],[18.832227,49.510791]]]}},{type:"Feature",properties:{name:"北塞浦路斯",full_name:"北塞浦路斯土耳其共和国",iso_a2:"-99",iso_a3:"-99",iso_n3:"-99"},geometry:{type:"Polygon",coordinates:[[[34.004492,35.065234],[33.941992,35.292041],[34.556055,35.662061],[32.712695,35.171045],[34.004492,35.065234]]]}},{type:"Feature",properties:{name:"塞浦路斯",full_name:"塞浦路斯共和国",iso_a2:"CY",iso_a3:"CYP",iso_n3:"196"},geometry:{type:"Polygon",coordinates:[[[32.712695,35.171045],[32.317188,34.95332],[33.00791,34.56958],[34.004492,35.065234],[32.712695,35.171045]]]}},{type:"Feature",properties:{name:"古巴",full_name:"古巴共和国",iso_a2:"CU",iso_a3:"CUB",iso_n3:"192"},geometry:{type:"MultiPolygon",coordinates:[[[[-81.837451,23.163037],[-84.044922,22.666016],[-84.361279,22.378906],[-84.326367,22.074316],[-84.887207,21.856982],[-84.030957,21.943115],[-82.738037,22.689258],[-81.838818,22.672461],[-81.710352,22.49668],[-82.077734,22.387695],[-81.849414,22.213672],[-81.185498,22.267969],[-79.357422,21.585156],[-78.727686,21.592725],[-78.116357,20.761865],[-77.22959,20.64375],[-77.103809,20.40752],[-77.715088,19.855469],[-75.116406,19.901416],[-74.153711,20.168555],[-74.882568,20.650635],[-75.724561,20.714551],[-75.722949,21.111035],[-77.252881,21.483496],[-77.366162,21.612646],[-77.144141,21.643604],[-77.497266,21.871631],[-79.275684,22.407617],[-79.820264,22.887012],[-81.837451,23.163037]]],[[[-82.561768,21.57168],[-82.991211,21.942725],[-82.973584,21.592285],[-83.183789,21.593457],[-82.561768,21.57168]]]]}},{type:"Feature",properties:{name:"克罗地亚",full_name:"克罗地亚共和国",iso_a2:"HR",iso_a3:"HRV",iso_n3:"191"},geometry:{type:"MultiPolygon",coordinates:[[[[13.57793,45.516895],[13.860742,44.837402],[14.550488,45.297705],[15.470996,44.271973],[15.18584,44.172119],[15.985547,43.519775],[16.903125,43.392432],[17.585156,42.938379],[15.736621,44.76582],[15.788086,45.178955],[16.293359,45.008838],[16.918652,45.276562],[19.007129,44.869189],[19.4,45.2125],[19.004688,45.399512],[18.905371,45.931738],[17.807129,45.79043],[16.516211,46.499902],[15.635938,46.200732],[15.339453,45.467041],[14.568848,45.657227],[13.57793,45.516895]]],[[[14.810254,44.977051],[14.571094,45.224756],[14.450391,45.079199],[14.810254,44.977051]]],[[[18.436328,42.559717],[17.667578,42.897119],[17.04541,43.014893],[18.51748,42.43291],[18.436328,42.559717]]]]}},{type:"Feature",properties:{name:"科特迪瓦",full_name:"科特迪瓦共和国",iso_a2:"CI",iso_a3:"CIV",iso_n3:"384"},geometry:{type:"Polygon",coordinates:[[[-7.990625,10.1625],[-8.136963,9.495703],[-7.896191,9.415869],[-7.950977,8.786816],[-7.681201,8.410352],[-8.236963,8.455664],[-8.009863,8.078516],[-8.231885,7.556738],[-8.486426,7.558496],[-8.302344,6.980957],[-8.603564,6.507812],[-7.454395,5.841309],[-7.544971,4.351318],[-5.061816,5.130664],[-5.282373,5.210254],[-3.347559,5.130664],[-3.199951,5.354492],[-3.019141,5.130811],[-2.75498,5.43252],[-3.235791,6.807227],[-2.505859,8.20874],[-2.69585,9.481348],[-3.223535,9.895459],[-4.62583,9.713574],[-5.523535,10.426025],[-6.196875,10.232129],[-6.261133,10.724072],[-6.65415,10.656445],[-7.01709,10.143262],[-7.497949,10.439795],[-7.990625,10.1625]]]}},{type:"Feature",properties:{name:"哥斯达黎加",full_name:"哥斯达黎加共和国",iso_a2:"CR",iso_a3:"CRI",iso_n3:"188"},geometry:{type:"Polygon",coordinates:[[[-82.563574,9.57666],[-83.641992,10.917236],[-83.919287,10.735352],[-84.63418,11.045605],[-85.744336,11.062109],[-85.908008,10.897559],[-85.667236,10.74502],[-85.849658,10.292041],[-85.681006,9.958594],[-85.114502,9.581787],[-84.886426,9.820947],[-85.263184,10.256641],[-85.025049,10.115723],[-84.581592,9.568359],[-83.637256,9.035352],[-83.604736,8.480322],[-83.291504,8.406006],[-83.469727,8.706836],[-83.285791,8.664355],[-82.879346,8.070654],[-83.027344,8.337744],[-82.727832,8.916064],[-82.939844,9.44917],[-82.563574,9.57666]]]}},{type:"Feature",properties:{name:"刚果（金）",full_name:"刚果民主共和国",iso_a2:"CD",iso_a3:"COD",iso_n3:"180"},geometry:{type:"Polygon",coordinates:[[[30.751172,-8.193652],[30.212695,-7.037891],[29.54082,-6.313867],[29.403223,-4.449316],[29.014355,-2.720215],[28.876367,-2.400293],[29.576953,-1.387891],[29.942871,.819238],[31.252734,2.04458],[30.728613,2.455371],[30.838574,3.490723],[29.676855,4.586914],[28.19209,4.350244],[27.40332,5.10918],[25.525098,5.312109],[25.065234,4.967432],[22.864551,4.723877],[22.422168,4.134961],[20.558105,4.462695],[19.500977,5.12749],[18.594141,4.34624],[18.610352,3.478418],[18.072168,2.013281],[17.752832,-.549023],[16.879883,-1.225879],[16.215332,-2.177832],[15.990039,-3.766211],[14.70791,-4.881738],[14.410742,-4.83125],[14.358301,-4.299414],[13.71709,-4.454492],[13.414941,-4.837402],[13.072754,-4.634766],[12.451465,-5.071484],[12.503711,-5.695801],[12.213672,-5.758691],[12.45293,-6.000488],[13.068164,-5.864844],[16.431445,-5.900195],[17.57959,-8.099023],[19.34082,-7.966602],[19.527637,-7.144434],[19.875195,-6.986328],[20.590039,-6.919922],[20.607813,-7.277734],[21.781641,-7.314648],[21.813184,-9.46875],[22.274512,-10.259082],[22.226172,-11.121973],[23.966504,-10.871777],[24.365723,-11.129883],[24.37793,-11.41709],[25.28877,-11.212402],[25.349414,-11.623047],[26.025977,-11.890137],[26.824023,-11.965234],[27.15918,-11.579199],[27.573828,-12.227051],[28.412891,-12.518066],[29.014258,-13.368848],[29.554199,-13.248926],[29.775195,-13.438086],[29.795117,-12.155469],[29.485547,-12.418457],[29.064355,-12.348828],[28.383398,-11.566699],[28.645508,-10.550195],[28.400684,-9.224805],[28.898145,-8.485449],[30.751172,-8.193652]]]}},{type:"Feature",properties:{name:"刚果（布）",full_name:"刚果共和国",iso_a2:"CG",iso_a3:"COG",iso_n3:"178"},geometry:{type:"Polygon",coordinates:[[[11.130176,-3.916309],[12.018359,-5.004297],[12.798242,-4.430566],[13.072754,-4.634766],[13.414941,-4.837402],[13.71709,-4.454492],[14.358301,-4.299414],[14.410742,-4.83125],[14.70791,-4.881738],[15.990039,-3.766211],[16.215332,-2.177832],[16.879883,-1.225879],[17.752832,-.549023],[18.072168,2.013281],[18.610352,3.478418],[17.491602,3.687305],[16.610742,3.505371],[16.183398,2.270068],[16.059375,1.676221],[14.578906,2.199121],[13.293555,2.161572],[13.216309,1.248438],[14.180859,1.370215],[14.429883,.901465],[13.949609,.353809],[13.860059,-.20332],[14.474121,-.573438],[14.383984,-1.890039],[13.993848,-2.490625],[13.733789,-2.138477],[13.464941,-2.39541],[12.991992,-2.313379],[12.59043,-1.826855],[12.446387,-2.32998],[11.605469,-2.342578],[11.537793,-2.836719],[11.93418,-3.318555],[11.879883,-3.665918],[11.504297,-3.520312],[11.130176,-3.916309]]]}},{type:"Feature",properties:{name:"科摩罗",full_name:"科摩罗联盟",iso_a2:"KM",iso_a3:"COM",iso_n3:"174"},geometry:{type:"MultiPolygon",coordinates:[[[[44.476367,-12.081543],[44.220117,-12.171387],[44.50498,-12.356543],[44.476367,-12.081543]]],[[[43.46582,-11.90127],[43.299023,-11.374512],[43.22666,-11.751855],[43.46582,-11.90127]]]]}},{type:"Feature",properties:{name:"哥伦比亚",full_name:"哥伦比亚共和国",iso_a2:"CO",iso_a3:"COL",iso_n3:"170"},geometry:{type:"Polygon",coordinates:[[[-71.319727,11.861914],[-71.137305,12.046338],[-71.262109,12.335303],[-71.714551,12.419971],[-73.313379,11.295752],[-74.14292,11.32085],[-74.400879,10.765234],[-74.330225,10.99668],[-74.84458,11.109717],[-75.70835,10.143408],[-75.538574,10.205176],[-75.639355,9.450439],[-76.920459,8.57373],[-76.786572,7.931592],[-77.374219,8.658301],[-77.195996,7.972461],[-77.538281,7.56626],[-77.761914,7.698828],[-77.901172,7.229346],[-77.368799,6.575586],[-77.469434,6.176758],[-77.249268,5.780176],[-77.534424,5.537109],[-77.286328,4.721729],[-77.520703,4.212793],[-77.076807,3.913281],[-77.813574,2.716357],[-78.591699,2.356641],[-78.576904,1.773779],[-79.025439,1.623682],[-78.859668,1.455371],[-77.702881,.837842],[-77.396338,.393896],[-76.494629,.235449],[-76.270605,.439404],[-75.284473,-.106543],[-74.801758,-.200098],[-74.246387,-.970605],[-73.664307,-1.248828],[-72.941113,-2.394043],[-70.968555,-2.206836],[-70.09585,-2.658203],[-70.735107,-3.781543],[-70.339502,-3.814355],[-69.965918,-4.235938],[-69.400244,-1.194922],[-69.633984,-.509277],[-70.070508,-.138867],[-70.053906,.578613],[-69.15332,.658789],[-69.311816,1.050488],[-69.852148,1.059521],[-69.848584,1.70874],[-68.176562,1.719824],[-68.193799,1.987012],[-67.93623,1.748486],[-67.400439,2.116699],[-67.082275,1.1854],[-66.876025,1.223047],[-67.21084,2.390137],[-67.859082,2.793604],[-67.311133,3.415869],[-67.855273,4.506885],[-67.481982,6.180273],[-69.427148,6.123975],[-70.129199,6.953613],[-72.006641,7.032617],[-72.471973,7.524268],[-72.390332,8.287061],[-72.796387,9.108984],[-73.366211,9.194141],[-72.690088,10.83584],[-71.958105,11.666406],[-71.319727,11.861914]]]}},{type:"Feature",properties:{name:"中国",full_name:"中华人民共和国",iso_a2:"CN",iso_a3:"CHN",iso_n3:"156"},geometry:{type:"MultiPolygon",coordinates:[[[[107.972656,21.507959],[108.502148,21.633447],[108.479883,21.904639],[109.081543,21.440283],[109.521484,21.693408],[109.930762,21.480566],[109.662598,20.916895],[110.123145,20.263721],[110.517578,20.46001],[110.154004,20.944629],[110.410937,21.338135],[110.567187,21.214062],[111.602734,21.559082],[111.943945,21.849658],[112.30498,21.741699],[112.359668,21.978027],[112.586328,21.776855],[113.08877,22.207959],[113.548145,22.222607],[113.331055,22.912012],[113.519727,23.1021],[114.01543,22.511914],[113.937305,22.36499],[114.267969,22.295557],[114.266016,22.540967],[116.470703,22.945898],[116.910645,23.64668],[117.367676,23.588623],[118.056055,24.246094],[117.842676,24.474316],[118.657031,24.621436],[118.977539,25.209277],[119.285547,25.232227],[119.180078,25.449805],[119.622461,25.391162],[119.61875,26.003564],[119.139453,26.121777],[119.463086,26.054688],[119.881055,26.33418],[119.588184,26.784961],[120.086719,26.671582],[120.747656,28.009961],[121.145703,28.32666],[121.609961,28.292139],[121.487109,29.193164],[121.917773,29.13501],[121.941211,29.605908],[121.50625,29.48457],[122.08291,29.870361],[121.258008,30.304102],[120.194629,30.241309],[121.87793,30.916992],[120.715527,31.98374],[120.035937,31.936279],[120.520117,32.105859],[121.856348,31.816455],[120.853223,32.661377],[120.266699,34.274023],[119.165332,34.848828],[120.284766,35.984424],[120.183301,36.202441],[120.637891,36.129932],[120.81084,36.632812],[121.932715,36.959473],[122.340918,36.832227],[122.666992,37.402832],[121.640234,37.460352],[120.75,37.833936],[119.760547,37.155078],[119.287402,37.138281],[118.952637,37.331152],[118.940039,38.042773],[117.766699,38.31167],[117.616699,38.852881],[117.865723,39.19126],[118.976953,39.182568],[119.391113,39.75249],[120.479102,40.230957],[121.174512,40.90127],[121.834863,40.974268],[122.275,40.541846],[121.26748,39.544678],[121.818457,39.386523],[121.106738,38.920801],[121.163574,38.731641],[122.840039,39.60083],[124.362109,40.004053],[125.989062,40.904639],[126.743066,41.724854],[128.149414,41.387744],[128.045215,41.9875],[128.923438,42.038232],[129.697852,42.448145],[129.898242,42.998145],[130.526953,42.5354],[130.424805,42.727051],[131.068555,42.902246],[131.257324,43.378076],[130.981641,44.844336],[131.851855,45.326855],[133.113477,45.130713],[134.167676,47.302197],[134.752344,47.71543],[134.665234,48.253906],[135.083406,48.436324],[134.293359,48.373438],[133.144043,48.105664],[132.47627,47.71499],[130.961914,47.709326],[130.553125,48.861182],[129.498145,49.388818],[127.550781,49.801807],[127.590234,50.208984],[125.649023,53.042285],[123.607813,53.546533],[120.985449,53.28457],[120.094531,52.787207],[120.656152,52.56665],[120.749805,52.096533],[119.163672,50.406006],[119.259863,50.066406],[117.873438,49.513477],[116.683301,49.823779],[115.616406,47.874805],[115.898242,47.686914],[116.760547,47.869775],[117.350781,47.652197],[117.768359,47.987891],[118.498438,47.983984],[119.711133,47.15],[119.867188,46.672168],[117.438086,46.58623],[117.333398,46.362012],[116.562598,46.289795],[115.681055,45.458252],[114.560156,45.38999],[113.587012,44.745703],[111.898047,45.064062],[111.402246,44.367285],[111.933203,43.711426],[110.400391,42.773682],[109.339844,42.438379],[106.77002,42.288721],[104.982031,41.595508],[104.498242,41.658691],[104.498242,41.877002],[103.711133,41.751318],[102.156641,42.158105],[101.495313,42.53877],[96.385449,42.720361],[95.350293,44.278076],[93.516211,44.944482],[90.877246,45.196094],[90.869922,46.954492],[90.02793,47.877686],[89.047656,48.002539],[87.979688,48.555127],[87.814258,49.162305],[87.322852,49.085791],[86.808301,49.049707],[86.549414,48.528613],[85.749414,48.385059],[85.484766,47.063525],[84.786133,46.830713],[83.029492,47.185938],[82.315234,45.594922],[82.521484,45.125488],[81.691992,45.349365],[79.871875,44.883789],[80.481543,44.714648],[80.355273,44.097266],[80.785742,43.161572],[80.202246,42.734473],[80.209375,42.190039],[78.123438,41.075635],[76.907715,41.02417],[76.318555,40.352246],[75.677148,40.305811],[75.555566,40.625195],[74.835156,40.482617],[73.991602,40.043115],[73.631641,39.448877],[73.80166,38.606885],[74.812305,38.460303],[75.11875,37.385693],[74.891309,37.231641],[74.372168,37.157715],[74.541406,37.022168],[75.772168,36.694922],[75.912305,36.048975],[76.766895,35.661719],[77.799414,35.495898],[78.042676,35.479785],[78.326953,34.606396],[78.970117,34.302637],[78.72666,34.013379],[79.219336,32.501074],[78.918945,32.358203],[78.700879,32.597021],[78.389648,32.519873],[78.807678,31.099982],[79.707774,31.013593],[81.010254,30.164502],[82.043359,30.326758],[83.583496,29.183594],[84.101367,29.219971],[84.228711,28.911768],[85.159082,28.592236],[85.122461,28.315967],[85.67832,28.277441],[85.994531,27.9104],[86.137012,28.114355],[87.141406,27.83833],[88.109766,27.870605],[88.803711,28.006934],[88.891406,27.316064],[89.981055,28.311182],[90.352734,28.080225],[91.273047,28.078369],[91.631934,27.759961],[91.594727,27.557666],[92.083398,27.290625],[91.99834,26.85498],[92.64698,26.952656],[93.111399,26.880082],[93.817265,27.025183],[94.277372,27.58143],[94.88592,27.743098],[95.28628,27.939955],[95.39715,28.142259],[95.832003,28.295186],[96.275479,28.228241],[97.086778,27.7475],[97.335156,27.937744],[97.322461,28.217969],[97.599219,28.517041],[98.061621,28.185889],[98.298828,27.550098],[98.651172,27.572461],[98.738477,26.785742],[98.65625,25.863574],[97.819531,25.251855],[97.583301,24.774805],[97.564551,23.911035],[98.835059,24.121191],[98.676758,23.905078],[98.86377,23.19126],[99.507129,22.959131],[99.192969,22.125977],[99.917676,22.028027],[100.147656,21.480518],[101.079785,21.755859],[101.138867,21.56748],[101.247852,21.197314],[101.800586,21.212598],[101.524512,22.253662],[101.73877,22.495264],[102.127441,22.379199],[102.470898,22.750928],[102.981934,22.448242],[103.32666,22.769775],[103.941504,22.540088],[105.275391,23.345215],[105.842969,22.922803],[106.780273,22.778906],[106.550391,22.501367],[106.663574,21.978906],[107.972656,21.507959]]],[[[110.88877,19.991943],[110.651758,20.137744],[109.263477,19.882666],[108.665527,19.304102],[108.701563,18.535254],[109.519336,18.218262],[110.067383,18.447559],[111.013672,19.655469],[110.88877,19.991943]]],[[[121.008789,22.620361],[121.397461,23.17251],[121.929004,24.97373],[121.593652,25.275342],[121.040625,25.032812],[120.132129,23.65293],[120.232813,22.71792],[120.839844,21.925],[121.008789,22.620361]]],[[[124.4751,25.9358],[124.4641,25.8592],[124.6536,25.9111],[124.5822,25.9655],[124.4751,25.9358]]],[[[123.7143,26.0025],[123.7967,25.921],[123.7198,25.8716],[123.5962,25.921],[123.7143,26.0025]]],[[[123.4946,25.7554],[123.5797,25.6861],[123.3325,25.6192],[123.2639,25.6712],[123.327,25.7306],[123.4946,25.7554]]],[[[116.769628,20.771721],[116.889736,20.683284],[116.749302,20.600958],[116.862635,20.588633],[116.925461,20.726949],[116.769628,20.771721]]],[[[111.7447,16.552],[111.7886,16.5125],[111.7392,16.4598],[111.7447,16.552]]],[[[111.8134,16.2621],[111.8161,16.2252],[111.5689,16.1619],[111.662292,16.260163],[111.8134,16.2621]]],[[[112.6126,16.059],[112.4753,16.0009],[112.4615,16.0432],[112.6126,16.059]]],[[[113.896887,7.607204],[114.058879,7.537794],[114.368696,7.638642],[114.540543,7.945783],[113.896887,7.607204]]],[[[109.463972,7.344339],[109.948716,7.522962],[109.653065,7.559745],[109.463972,7.344339]]],[[[116.48876,10.395686],[116.467202,10.309144],[116.644592,10.335051],[116.48876,10.395686]]],[[[122.518653,23.460785],[122.798614,24.573674],[122.779218,24.578553],[122.499257,23.465664],[122.518653,23.460785]]],[[[121.172026,20.805459],[121.909388,21.687433],[121.894044,21.700262],[121.156682,20.818287],[121.172026,20.805459]]],[[[119.473662,18.007073],[120.025697,19.024038],[120.00812,19.033579],[119.456084,18.016614],[119.473662,18.007073]]],[[[119.072182,15.007514],[119.072676,16.043885],[119.052676,16.043885],[119.052184,15.00781],[119.072182,15.007514]]],[[[118.686467,11.189592],[118.524042,10.912566],[118.540436,10.90292],[118.704762,11.181475],[118.874599,11.607472],[118.98895,11.985731],[118.969805,11.991519],[118.855579,11.613671],[118.686467,11.189592]]],[[[115.544669,7.146723],[116.250486,7.979279],[116.23523,7.992212],[115.529413,7.159656],[115.544669,7.146723]]],[[[112.307052,3.534873],[111.786901,3.416873],[111.791326,3.397368],[112.312489,3.515623],[112.521474,3.578591],[112.852064,3.732569],[112.843614,3.750696],[112.515016,3.597533],[112.307052,3.534873]]],[[[108.290133,6.012663],[108.308786,6.019877],[108.279563,6.095434],[108.256117,6.227526],[108.2168,6.538165],[108.218763,6.949641],[108.244195,7.073907],[108.224601,7.077917],[108.198768,6.950725],[108.196797,6.537606],[108.236307,6.224768],[108.26004,6.090984],[108.290133,6.012663]]],[[[110.128228,11.368945],[110.055537,11.253354],[110.072467,11.242707],[110.145887,11.359542],[110.207005,11.481288],[110.259018,11.604996],[110.304569,11.783642],[110.328228,11.945713],[110.334243,12.141598],[110.332274,12.240384],[110.312278,12.239982],[110.314245,12.141953],[110.308355,11.948035],[110.284855,11.787051],[110.239823,11.610665],[110.188981,11.489964],[110.128228,11.368945]]],[[[109.845225,15.153166],[109.864809,15.157224],[109.848892,15.233933],[109.789745,15.450683],[109.690053,15.675484],[109.591475,15.836774],[109.532015,15.922592],[109.30888,16.207258],[109.29314,16.194919],[109.515744,15.910958],[109.57456,15.826099],[109.672646,15.665615],[109.77065,15.444688],[109.829516,15.228968],[109.845225,15.153166]]]]}},{type:"Feature",properties:{name:"智利",full_name:"智利共和国",iso_a2:"CL",iso_a3:"CHL",iso_n3:"152"},geometry:{type:"MultiPolygon",coordinates:[[[[-70.418262,-18.345605],[-70.080029,-21.356836],[-70.593359,-23.255469],[-70.392334,-23.565918],[-70.445361,-25.172656],[-70.925781,-27.588672],[-71.519238,-28.926465],[-71.315723,-29.649707],[-71.708936,-30.628027],[-71.452246,-32.65957],[-72.223779,-35.096191],[-73.215967,-37.166895],[-73.662402,-37.341016],[-73.226465,-39.224414],[-73.965869,-41.118262],[-73.624023,-41.773633],[-72.318262,-41.499023],[-72.824072,-41.908789],[-72.499414,-41.980859],[-72.412354,-42.388184],[-72.773242,-42.257715],[-72.758008,-43.039453],[-73.224463,-43.897949],[-73.265088,-44.168652],[-72.663867,-44.436426],[-72.680078,-44.593945],[-73.444971,-45.238184],[-72.933838,-45.452344],[-73.730762,-45.47998],[-73.591846,-45.899121],[-73.845361,-46.566016],[-73.735254,-45.811719],[-73.967578,-46.154102],[-74.392969,-46.217383],[-74.019922,-46.055859],[-73.957178,-45.404395],[-74.157861,-45.767188],[-75.066699,-45.874902],[-74.924463,-46.159668],[-75.706396,-46.705273],[-75.430371,-46.93457],[-75.540332,-46.69873],[-74.98418,-46.512109],[-75.005957,-46.741113],[-74.313574,-46.788184],[-74.158398,-47.18252],[-74.482666,-47.430469],[-74.134082,-47.59082],[-74.654932,-47.702246],[-74.227051,-47.968945],[-73.715869,-47.655469],[-73.391064,-48.145898],[-74.584668,-47.999023],[-74.474414,-48.463965],[-74.009082,-48.475],[-74.341016,-48.595703],[-74.366553,-49.400488],[-73.934961,-49.020898],[-73.836377,-49.609375],[-74.29082,-49.604102],[-73.958594,-49.994727],[-74.62959,-50.194043],[-73.950342,-50.510547],[-74.185596,-50.485352],[-73.978027,-50.827051],[-73.654443,-50.492676],[-73.806543,-50.938379],[-74.139404,-50.817773],[-74.365576,-50.487891],[-74.644482,-50.360938],[-74.685742,-50.662012],[-75.094678,-50.68125],[-74.814746,-51.062891],[-73.939502,-51.266309],[-74.19668,-51.680566],[-73.518164,-52.041016],[-72.600049,-51.799121],[-73.16875,-51.453906],[-72.76123,-51.573242],[-72.489648,-51.763672],[-72.52334,-52.255469],[-72.677051,-52.384668],[-72.79502,-51.949512],[-73.834473,-52.233984],[-74.264941,-52.104883],[-74.014453,-52.639355],[-73.123926,-52.487988],[-73.645215,-52.837012],[-73.122461,-53.073926],[-72.712109,-52.535547],[-71.511279,-52.605371],[-72.727686,-52.762305],[-73.052734,-53.243457],[-72.548926,-53.460742],[-72.278027,-53.132324],[-71.227148,-52.810645],[-71.791455,-53.48457],[-71.941699,-53.234082],[-72.412891,-53.350195],[-71.297754,-53.883398],[-70.795117,-52.76875],[-69.241016,-52.205469],[-68.443359,-52.356641],[-69.960254,-52.008203],[-71.918652,-51.989551],[-72.407666,-51.54082],[-72.340234,-50.681836],[-73.15293,-50.738281],[-73.50127,-50.125293],[-73.554199,-49.463867],[-72.354736,-48.36582],[-72.51792,-47.876367],[-71.699658,-46.651367],[-71.746191,-45.578906],[-71.349316,-45.331934],[-72.063721,-44.771875],[-71.261133,-44.763086],[-71.159717,-44.560254],[-71.82002,-44.383105],[-71.750635,-43.237305],[-72.146436,-42.990039],[-72.108203,-42.251855],[-71.75,-42.046777],[-71.932129,-40.691699],[-71.401562,-38.935059],[-70.858643,-38.604492],[-71.192187,-36.843652],[-70.404785,-36.061719],[-70.555176,-35.246875],[-69.852441,-34.224316],[-69.819629,-33.283789],[-70.084863,-33.201758],[-70.51958,-31.148438],[-69.844287,-30.175],[-70.026807,-29.324023],[-69.656934,-28.413574],[-68.846338,-27.153711],[-68.318652,-26.973242],[-68.591602,-26.47041],[-68.384229,-25.091895],[-68.562012,-24.747363],[-67.356201,-24.033789],[-67.008789,-23.001367],[-67.194873,-22.82168],[-67.879443,-22.822949],[-68.197021,-21.300293],[-68.760547,-20.416211],[-68.462891,-19.432813],[-68.968311,-18.967969],[-69.093945,-18.050488],[-69.510938,-17.506055],[-69.8521,-17.703809],[-69.926367,-18.206055],[-70.418262,-18.345605]],[[-74.385742,-52.922363],[-74.712012,-52.74873],[-73.135205,-53.353906],[-74.385742,-52.922363]]],[[[-68.629932,-52.652637],[-69.414062,-52.48623],[-69.935449,-52.821094],[-70.380127,-52.751953],[-70.329297,-53.377637],[-69.355957,-53.416309],[-70.151123,-53.888086],[-69.044336,-54.406738],[-69.253174,-54.557422],[-70.535303,-54.136133],[-70.531299,-53.627344],[-70.863086,-54.110449],[-70.310986,-54.528516],[-70.797266,-54.327246],[-71.927734,-54.528711],[-68.653223,-54.853613],[-68.629932,-52.652637]]],[[[-67.079932,-55.153809],[-68.301367,-54.980664],[-68.07002,-55.221094],[-67.079932,-55.153809]]],[[[-73.773389,-43.345898],[-73.436328,-42.936523],[-73.789258,-42.585742],[-73.4229,-42.192871],[-73.527832,-41.896289],[-74.03667,-41.795508],[-74.387354,-43.231641],[-73.773389,-43.345898]]],[[[-74.476172,-49.147852],[-74.546094,-48.766895],[-74.89624,-48.733203],[-75.549805,-49.791309],[-75.066016,-49.852344],[-74.723828,-49.423828],[-74.594727,-50.006641],[-74.476172,-49.147852]]],[[[-75.510254,-48.763477],[-75.158496,-48.622656],[-75.391406,-48.019727],[-75.510254,-48.763477]]],[[[-74.567285,-48.591992],[-74.895654,-47.839355],[-75.212891,-48.141699],[-74.923047,-48.626465],[-74.567285,-48.591992]]],[[[-72.923242,-53.481641],[-73.845459,-53.545801],[-73.210645,-53.98584],[-72.76377,-53.864844],[-72.870996,-54.126562],[-72.20542,-53.807422],[-72.923242,-53.481641]]],[[[-74.822949,-51.630176],[-75.105371,-51.788867],[-74.694482,-52.279199],[-74.822949,-51.630176]]],[[[-69.702979,-54.919043],[-69.979785,-55.147461],[-69.411816,-55.444238],[-69.192627,-55.171875],[-68.04834,-55.643164],[-68.458008,-54.959668],[-69.702979,-54.919043]]],[[[-71.390479,-54.032812],[-71.996484,-53.884863],[-72.210449,-54.047754],[-71.948535,-54.300879],[-71.143262,-54.374023],[-71.021924,-54.111816],[-71.390479,-54.032812]]],[[[-73.735352,-44.394531],[-73.994922,-44.140234],[-74.617773,-44.647949],[-74.01626,-45.344922],[-73.728174,-45.195898],[-74.002051,-44.590918],[-73.735352,-44.394531]]],[[[-72.986133,-44.780078],[-72.776367,-44.508594],[-73.207715,-44.334961],[-73.39707,-44.774316],[-72.986133,-44.780078]]],[[[-75.302002,-50.67998],[-75.115332,-50.510449],[-75.427637,-50.480566],[-75.302002,-50.67998]]],[[[-75.106689,-48.836523],[-75.583105,-48.858887],[-75.641162,-49.19541],[-75.106689,-48.836523]]],[[[-74.558643,-51.277051],[-75.153662,-51.278809],[-75.289111,-51.625391],[-74.558643,-51.277051]]],[[[-75.054785,-50.296094],[-74.875977,-50.109961],[-75.32666,-50.011816],[-75.449121,-50.343359],[-75.054785,-50.296094]]],[[[-74.312891,-45.691504],[-74.310547,-45.172656],[-74.689844,-45.662598],[-74.312891,-45.691504]]],[[[-70.991602,-54.867969],[-71.437207,-54.889258],[-70.297852,-55.11377],[-70.991602,-54.867969]]]]}},{type:"Feature",properties:{name:"乍得",full_name:"乍得共和国",iso_a2:"TD",iso_a3:"TCD",iso_n3:"148"},geometry:{type:"Polygon",coordinates:[[[23.980273,19.496631],[20.147656,21.389258],[15.984082,23.445215],[14.979004,22.996191],[15.181836,21.523389],[15.963184,20.346191],[15.735059,19.904053],[15.474316,16.908398],[13.448242,14.380664],[13.606348,13.70459],[14.063965,13.078516],[14.461719,13.021777],[14.84707,12.5021],[15.132227,10.648486],[15.654883,10.007812],[14.243262,9.979736],[13.977246,9.691553],[15.116211,8.557324],[15.549805,7.787891],[15.480078,7.523779],[15.957617,7.507568],[16.545313,7.865479],[16.784766,7.550977],[17.649414,7.983594],[18.56416,8.045898],[19.108691,8.656152],[18.95625,8.938867],[20.34209,9.1271],[21.682715,10.289844],[21.771484,10.642822],[22.493848,10.99624],[22.860059,10.919678],[22.922656,11.344873],[22.591113,11.579883],[22.352344,12.660449],[21.825293,12.790527],[22.228125,13.32959],[22.106445,13.799805],[22.538574,14.161865],[22.381543,14.550488],[22.932324,15.162109],[22.933887,15.533105],[23.970801,15.721533],[23.980273,19.496631]]]}},{type:"Feature",properties:{name:"中非",full_name:"中非共和国",iso_a2:"CF",iso_a3:"CAF",iso_n3:"140"},geometry:{type:"Polygon",coordinates:[[[24.147363,8.665625],[23.537305,8.81582],[23.646289,9.8229],[22.860059,10.919678],[22.493848,10.99624],[21.771484,10.642822],[21.682715,10.289844],[20.34209,9.1271],[18.95625,8.938867],[19.108691,8.656152],[18.56416,8.045898],[17.649414,7.983594],[16.784766,7.550977],[16.545313,7.865479],[15.957617,7.507568],[15.480078,7.523779],[14.431152,6.038721],[14.73125,4.602393],[15.063574,4.284863],[15.128711,3.826904],[16.063477,2.908594],[16.183398,2.270068],[16.610742,3.505371],[17.491602,3.687305],[18.610352,3.478418],[18.594141,4.34624],[19.500977,5.12749],[20.558105,4.462695],[22.422168,4.134961],[22.864551,4.723877],[25.065234,4.967432],[25.525098,5.312109],[27.40332,5.10918],[27.143945,5.722949],[26.514258,6.069238],[26.361816,6.635303],[25.278906,7.42749],[24.85332,8.137549],[24.291406,8.291406],[24.147363,8.665625]]]}},{type:"Feature",properties:{name:"佛得角",full_name:"佛得角共和国",iso_a2:"CV",iso_a3:"CPV",iso_n3:"132"},geometry:{type:"MultiPolygon",coordinates:[[[[-25.169824,16.946484],[-25.034668,17.176465],[-25.337109,17.091016],[-25.169824,16.946484]]],[[[-23.444238,15.007959],[-23.748096,15.328516],[-23.705371,14.961328],[-23.444238,15.007959]]],[[[-22.917725,16.237256],[-22.959277,16.045117],[-22.710107,16.043359],[-22.917725,16.237256]]]]}},{type:"Feature",properties:{name:"加拿大",full_name:"加拿大",iso_a2:"CA",iso_a3:"CAN",iso_n3:"124"},geometry:{type:"MultiPolygon",coordinates:[[[[-132.655518,54.12749],[-133.048389,54.158936],[-133.079492,53.837012],[-132.347266,53.189209],[-131.957422,53.308691],[-131.667627,54.141357],[-132.534668,53.651709],[-132.166113,53.955225],[-132.655518,54.12749]]],[[[-131.753711,53.195557],[-132.546777,53.1375],[-131.221533,52.153613],[-131.455225,52.701709],[-131.971777,52.879834],[-131.634668,52.922168],[-131.753711,53.195557]]],[[[-127.197314,50.640381],[-127.918066,50.860547],[-128.346045,50.744238],[-128.05835,50.498486],[-127.465918,50.583105],[-127.486523,50.404639],[-127.905859,50.445215],[-127.863916,50.127734],[-127.249805,50.137988],[-127.114307,49.879736],[-126.134082,49.672314],[-126.519141,49.396777],[-125.9354,49.401465],[-125.489453,48.933789],[-124.812646,49.212646],[-125.120703,48.760791],[-123.310645,48.411035],[-125.48208,50.316797],[-127.197314,50.640381]]],[[[-130.025098,55.888232],[-130.048486,55.057275],[-129.795166,55.55957],[-129.560645,55.462549],[-130.430273,54.420996],[-129.626025,54.230273],[-130.335254,53.723926],[-129.563721,53.251465],[-128.959375,53.841455],[-128.532129,53.858105],[-128.675537,53.55459],[-127.927832,53.274707],[-128.905615,53.559326],[-128.85459,53.704541],[-129.171582,53.533594],[-128.365039,52.825781],[-128.053271,52.910693],[-128.271533,52.362988],[-127.940234,52.545166],[-128.357617,52.158887],[-128.102246,51.788428],[-127.791895,52.289355],[-126.951367,52.751025],[-127.193994,52.457666],[-126.713965,52.060693],[-127.437939,52.356152],[-127.795361,52.191016],[-127.850537,51.673193],[-127.668701,51.477588],[-127.338721,51.707373],[-126.691455,51.703418],[-127.419678,51.608057],[-127.708105,51.151172],[-127.057568,50.867529],[-126.517334,51.056836],[-126.514355,50.679395],[-125.904102,50.704932],[-126.447461,50.587744],[-126.094336,50.497607],[-125.058789,50.513867],[-124.859863,50.872412],[-125.056689,50.418652],[-124.782373,50.020117],[-124.141602,49.792676],[-123.880127,50.173633],[-123.874414,49.736816],[-123.582471,49.68125],[-124.028613,49.602881],[-123.530566,49.397314],[-123.1875,49.680322],[-123.276758,49.343945],[-122.879102,49.398926],[-123.196338,49.147705],[-122.78877,48.993018],[-114.585107,48.993066],[-106.483838,48.993115],[-97.529834,48.993164],[-95.162061,48.991748],[-95.155273,49.369678],[-94.620898,48.742627],[-92.99624,48.611816],[-91.518311,48.058301],[-90.916064,48.209131],[-89.455664,47.99624],[-88.378174,48.303076],[-84.875977,46.899902],[-84.561768,46.457373],[-84.149463,46.542773],[-83.977783,46.084912],[-83.615967,46.116846],[-83.592676,45.817139],[-82.551074,45.347363],[-82.137842,43.570898],[-82.545312,42.624707],[-83.149658,42.141943],[-82.690039,41.675195],[-79.036719,42.802344],[-79.171875,43.466553],[-78.72041,43.624951],[-76.819971,43.628809],[-76.151172,44.303955],[-74.708887,45.003857],[-73.973828,45.345117],[-74.315088,45.531055],[-73.476611,45.738232],[-72.981006,46.209717],[-71.87959,46.686816],[-71.267773,46.795947],[-70.705859,47.139795],[-69.994434,47.739893],[-69.865527,48.172266],[-71.018262,48.455615],[-69.673877,48.19917],[-68.281934,49.197168],[-67.372021,49.348438],[-66.495508,50.211865],[-62.71543,50.30166],[-61.724854,50.104053],[-59.886328,50.316406],[-58.510352,51.295068],[-56.975977,51.457666],[-55.695215,52.137793],[-56.011719,52.394482],[-55.746484,52.474561],[-56.324902,52.544531],[-55.802832,52.643164],[-55.797949,53.211963],[-56.46499,53.765039],[-57.331738,53.469092],[-57.416064,54.162744],[-58.19209,54.228174],[-57.935986,54.091162],[-60.329492,53.266113],[-60.100293,53.486963],[-60.39541,53.65332],[-58.633203,54.049561],[-57.404492,54.590869],[-57.962451,54.875732],[-58.780176,54.838379],[-59.25957,55.199951],[-59.837793,54.813965],[-59.437891,55.175928],[-59.758789,55.30957],[-60.617139,55.060205],[-60.341016,55.784668],[-61.449512,55.995703],[-61.364697,56.216016],[-61.713086,56.230957],[-61.425293,56.360645],[-62.497266,56.801709],[-61.371631,56.680811],[-61.33374,57.010596],[-62.495557,57.489209],[-61.967969,57.611914],[-61.958643,57.911768],[-62.48623,58.154053],[-63.261523,58.014697],[-62.593848,58.474023],[-63.537061,58.329932],[-62.873877,58.672461],[-63.248437,59.068311],[-63.971143,59.053809],[-63.415137,59.194385],[-63.945459,59.380176],[-64.283496,60.064062],[-64.768457,60.012109],[-64.499414,60.268262],[-64.817334,60.331055],[-65.028174,59.770703],[-65.433398,59.776514],[-65.038232,59.387891],[-65.475098,59.470312],[-65.383545,59.060205],[-66.043066,58.820654],[-66.002393,58.431201],[-66.362402,58.791162],[-67.678271,57.991113],[-68.021045,58.485303],[-68.413574,58.051758],[-69.04082,57.90249],[-68.356543,58.163232],[-68.381152,58.743506],[-68.698193,58.904541],[-70.154346,58.760596],[-69.531641,58.869238],[-69.344043,59.303076],[-69.681885,59.341748],[-69.733936,59.918018],[-70.654834,60.026221],[-69.67373,60.075879],[-69.50332,61.04043],[-69.992432,60.856494],[-71.422705,61.158936],[-71.638281,61.617188],[-72.215869,61.587256],[-72.686963,62.124561],[-73.705078,62.473145],[-74.632568,62.115674],[-77.372412,62.57251],[-78.133398,62.282275],[-77.514355,61.556299],[-78.181348,60.819141],[-77.589551,60.808594],[-77.349072,59.578955],[-77.726172,59.675879],[-78.515088,58.682373],[-76.809814,57.657959],[-76.604053,56.199561],[-77.775293,55.29126],[-79.712354,54.671826],[-78.996045,54.00249],[-78.448096,52.261377],[-78.981641,51.774561],[-78.903174,51.200293],[-79.338672,51.628174],[-79.737451,51.186279],[-79.3479,50.762646],[-80.103564,51.282861],[-80.851221,51.125],[-80.443311,51.388574],[-80.588037,51.667236],[-81.827881,52.224219],[-81.599414,52.432617],[-82.291553,53.030713],[-82.393262,55.067822],[-83.910596,55.314648],[-85.365283,55.079297],[-85.559326,55.540186],[-87.482422,56.021289],[-88.948486,56.851318],[-90.897461,57.256934],[-92.798145,56.921973],[-92.432812,57.320312],[-93.17876,58.725635],[-94.123193,58.736719],[-94.332227,58.297363],[-94.287061,58.716016],[-94.957324,59.068848],[-94.761719,60.498242],[-93.312012,61.767285],[-93.581787,61.942041],[-92.905518,62.215137],[-93.205371,62.364941],[-92.527979,62.168408],[-92.551416,62.546729],[-91.93584,62.592383],[-92.361279,62.819385],[-90.698584,63.063867],[-90.970068,63.442773],[-91.841846,63.697559],[-92.465088,63.555078],[-92.156885,63.691699],[-93.559814,63.865283],[-93.696338,64.147168],[-90.811914,63.580908],[-90.154736,63.689648],[-90.04165,64.140869],[-89.131543,63.968506],[-88.105615,64.183301],[-87.027539,65.198096],[-88.974023,65.348291],[-89.924072,65.780273],[-91.427246,65.9479],[-89.749414,65.936035],[-87.452881,65.338965],[-85.95874,66.119043],[-86.708154,66.523047],[-85.603857,66.568262],[-83.869043,66.213574],[-84.223047,66.682471],[-85.113721,66.906934],[-84.538477,66.972803],[-83.406445,66.37124],[-81.467578,67.069873],[-81.294336,67.497412],[-82.552686,68.446484],[-81.281543,68.657227],[-81.95791,68.883643],[-81.377832,69.185645],[-82.227539,69.248877],[-82.618359,69.691064],[-85.507373,69.845264],[-84.867578,68.77334],[-85.643164,68.699707],[-86.560791,67.482129],[-87.359375,67.177246],[-88.313818,67.950342],[-88.346973,68.288281],[-87.813574,68.345703],[-88.223535,68.915039],[-89.279541,69.255469],[-90.204785,68.257471],[-91.237207,69.285547],[-90.415576,69.456982],[-92.887793,69.668213],[-91.976709,70.038672],[-92.320508,70.235352],[-91.564062,70.178271],[-94.734863,71.982959],[-95.872314,71.573145],[-95.564258,71.336768],[-96.446582,71.239893],[-95.878613,70.548975],[-96.551367,70.210303],[-95.964941,69.802783],[-93.532275,69.480908],[-94.600439,68.803223],[-93.852441,69.000342],[-93.448926,68.618896],[-95.460693,68.021387],[-95.25874,67.262549],[-95.399658,66.949463],[-96.036865,66.9375],[-95.787549,66.616797],[-96.422559,67.051758],[-95.418896,67.013232],[-96.369141,67.509766],[-95.970312,68.249121],[-96.72207,68.03877],[-96.430664,68.310596],[-97.410352,68.496533],[-98.650488,68.363525],[-98.192529,67.922998],[-97.206543,67.855078],[-97.454932,67.616992],[-98.631543,68.072559],[-98.412109,67.807178],[-98.920459,67.725781],[-102.320361,67.735645],[-103.474121,68.115039],[-104.486816,68.063184],[-106.164453,68.919873],[-108.313477,68.610791],[-108.718115,68.297461],[-107.73418,68.17373],[-105.750195,68.592285],[-107.958398,67.818604],[-107.259473,66.398535],[-108.496045,67.092285],[-107.988721,67.256396],[-110.073926,67.99292],[-112.503027,67.681934],[-115.133203,67.819189],[-115.127051,68.132031],[-113.964404,68.399072],[-115.442285,68.940918],[-117.226953,68.913428],[-122.070068,69.816162],[-123.025781,69.81001],[-123.528418,69.389355],[-124.338086,69.364844],[-124.555029,70.151221],[-125.524951,69.351563],[-127.991016,70.573828],[-127.683789,70.260352],[-128.853027,69.751025],[-128.898926,69.966162],[-130.117627,69.720068],[-130.970654,69.209082],[-131.063428,69.450684],[-131.788379,69.431982],[-133.196826,68.739844],[-132.81748,69.205762],[-129.648291,69.997754],[-129.675635,70.192969],[-134.174316,69.252832],[-134.408936,69.681787],[-135.691455,69.311182],[-135.939014,68.97417],[-135.258838,68.684326],[-141.002148,69.650781],[-141.002148,64.975537],[-141.002148,60.300244],[-139.079248,60.343701],[-139.185156,60.083594],[-137.438574,58.903125],[-135.475928,59.793262],[-133.401123,58.410889],[-131.824268,56.58999],[-130.097852,56.109277],[-130.025098,55.888232]]],[[[-109.815967,78.650391],[-110.877588,78.735059],[-113.223047,78.2979],[-109.484473,78.316406],[-109.815967,78.650391]]],[[[-110.458057,78.103223],[-113.215186,77.903516],[-112.372656,77.364111],[-110.198486,77.524512],[-110.865625,77.834131],[-109.622266,78.074756],[-110.458057,78.103223]]],[[[-115.55127,77.363281],[-116.511328,77.547607],[-116.843555,77.339551],[-119.090186,77.305078],[-122.519385,76.353174],[-122.533057,75.950928],[-120.848389,76.182666],[-119.912891,75.858838],[-117.880811,76.805078],[-117.233594,76.281543],[-115.55127,77.363281]]],[[[-108.292383,76.057129],[-109.098242,76.811865],[-110.314453,76.369385],[-108.947168,75.541797],[-111.052686,75.548535],[-112.697607,76.201709],[-114.998486,76.497461],[-115.822168,76.27002],[-114.778613,76.172607],[-116.209863,76.194434],[-116.664551,75.957568],[-114.991504,75.896338],[-117.163623,75.644873],[-115.141846,75.678516],[-117.565234,75.23335],[-115.728857,74.968115],[-114.451758,75.087891],[-114.016504,75.434277],[-113.711768,75.068604],[-111.093457,75.256299],[-114.312695,74.715088],[-112.519336,74.416846],[-108.831299,75.064893],[-107.153418,74.927148],[-106.092627,75.089453],[-105.632666,75.945361],[-106.677002,76.02373],[-106.913525,75.679639],[-108.292383,76.057129]]],[[[-114.521533,72.59292],[-114.051709,73.070996],[-114.638232,73.372656],[-118.133105,72.632812],[-118.987695,71.764258],[-117.742334,71.659326],[-117.935645,71.39209],[-115.303418,71.493701],[-118.269092,71.034717],[-117.587061,70.629541],[-113.757275,70.690723],[-111.632568,70.308838],[-117.19541,70.054053],[-116.513477,69.424609],[-113.694141,69.19502],[-113.127734,68.494141],[-109.472119,68.676709],[-107.439893,69.002148],[-106.659082,69.4396],[-104.571436,68.872119],[-101.857129,69.023975],[-102.045947,69.464844],[-103.120215,69.20459],[-103.464893,69.644482],[-102.621094,69.551514],[-102.182129,69.845947],[-100.982373,69.679883],[-101.042676,70.110791],[-103.58457,70.630859],[-104.514795,71.064258],[-105.415137,72.78833],[-106.482129,73.196191],[-108.029053,73.34873],[-108.237402,73.149902],[-107.306006,71.894678],[-107.812842,71.626172],[-110.008447,72.983643],[-110.66084,73.008203],[-110.205127,72.661279],[-111.675098,72.300146],[-111.269727,72.713721],[-112.753613,72.986035],[-114.521533,72.59292]]],[[[-119.736328,74.112646],[-121.50415,74.545117],[-124.69624,74.348193],[-123.797266,73.768164],[-125.845312,71.978662],[-124.007764,71.677441],[-123.095654,71.093799],[-120.619336,71.505762],[-120.179883,72.212646],[-115.446875,73.438867],[-117.514844,74.231738],[-119.736328,74.112646]]],[[[-69.488867,83.016797],[-72.81167,83.081201],[-72.658691,82.721631],[-74.41416,83.013135],[-77.124902,83.008545],[-76.009375,82.535156],[-77.618066,82.89585],[-80.154932,82.911133],[-78.748779,82.679395],[-81.010156,82.779053],[-82.447559,82.39502],[-79.465625,81.851123],[-84.896826,82.449414],[-86.615625,82.218555],[-85.044824,81.982812],[-88.063184,82.096484],[-91.647559,81.683838],[-89.82168,81.634863],[-90.416309,81.405371],[-87.597021,81.52583],[-89.673682,81.328613],[-89.623047,81.032471],[-84.941211,81.28623],[-89.166895,80.941309],[-88.003662,80.675391],[-83.288818,81.147949],[-86.250342,80.565771],[-81.007031,80.654883],[-76.885107,81.430273],[-78.716211,80.95166],[-76.862988,80.864795],[-82.987012,80.322607],[-80.475928,79.60625],[-83.723633,80.228955],[-86.498535,80.258252],[-86.420752,79.845215],[-83.575879,79.053662],[-84.412012,78.996582],[-81.750098,78.975781],[-83.271436,78.770312],[-86.80791,78.774365],[-87.551758,78.176611],[-85.920068,78.342871],[-85.585938,78.10957],[-84.783203,78.527588],[-84.222705,78.176025],[-85.547559,77.927686],[-85.289355,77.559033],[-83.779395,77.532617],[-82.710352,77.849512],[-83.721289,77.414209],[-84.738672,77.361035],[-86.755078,77.863721],[-88.016992,77.784717],[-86.812256,77.184912],[-89.499756,76.826807],[-89.369629,76.474463],[-88.545801,76.420898],[-88.49585,76.772852],[-88.395996,76.405273],[-87.497559,76.386279],[-87.489795,76.58584],[-86.680225,76.376611],[-86.453711,76.584863],[-85.14126,76.30459],[-84.275342,76.356543],[-84.223779,76.675342],[-83.885693,76.453125],[-82.233154,76.46582],[-82.529834,76.723291],[-80.799707,76.173584],[-78.284326,76.57124],[-78.288867,76.977979],[-82.056787,77.296533],[-81.659082,77.525439],[-78.708496,77.342139],[-78.012598,77.946045],[-75.865967,78.009814],[-75.193457,78.327734],[-76.416113,78.511523],[-74.486328,78.750098],[-78.581641,79.075],[-74.640918,79.035547],[-76.898828,79.512305],[-73.361523,79.504004],[-74.394482,79.874072],[-71.387842,79.761768],[-70.568408,80.093701],[-72.055957,80.123242],[-70.264893,80.233594],[-70.712598,80.5396],[-69.550684,80.383252],[-64.780078,81.492871],[-68.688525,81.293311],[-61.615381,82.184424],[-63.641016,82.812598],[-68.469336,82.653369],[-66.422559,82.926855],[-69.488867,83.016797]]],[[[-95.484375,77.791992],[-95.987061,77.484131],[-93.543945,77.46665],[-93.300977,77.739795],[-95.484375,77.791992]]],[[[-93.542578,75.02793],[-94.878174,75.630029],[-96.599609,75.031787],[-94.534521,74.636719],[-93.573096,74.668848],[-93.542578,75.02793]]],[[[-100.001904,73.945898],[-100.962988,73.791406],[-100.52168,73.449316],[-101.523193,73.486377],[-99.825146,73.213867],[-100.536377,73.197852],[-100.128125,72.906689],[-101.273193,72.72168],[-102.204004,73.077295],[-102.70874,72.764502],[-98.662891,71.3021],[-98.322705,71.852344],[-97.582275,71.629688],[-96.613428,71.833838],[-96.445605,72.552441],[-97.636328,73.027637],[-98.421777,72.941016],[-97.170508,73.824854],[-99.157959,73.731592],[-100.001904,73.945898]]],[[[-84.919629,65.261084],[-85.554688,65.918652],[-86.2521,64.136865],[-87.151904,63.585645],[-85.768945,63.700342],[-85.392627,63.119678],[-83.303955,64.143799],[-81.046387,63.461572],[-80.302051,63.762207],[-80.828955,64.089941],[-81.887109,64.016406],[-82.05,64.644287],[-84.501123,65.458447],[-84.919629,65.261084]]],[[[-97.700928,76.466504],[-98.71084,76.693848],[-98.890332,76.465576],[-100.829736,76.523877],[-99.541064,76.146289],[-99.865479,75.924219],[-101.415186,76.424902],[-102.104688,76.331201],[-100.972803,75.798438],[-102.144727,75.875049],[-102.587402,75.513672],[-99.19458,75.698389],[-100.711914,75.406348],[-100.234375,75.007715],[-97.674316,75.127295],[-97.700928,76.466504]]],[[[-103.426025,79.315625],[-105.514551,79.24248],[-104.895508,78.808154],[-104.151953,78.989893],[-103.371582,78.736328],[-104.763574,78.35166],[-102.731348,78.371045],[-100.274658,77.832715],[-99.166406,77.856934],[-99.609424,78.583057],[-101.703662,79.078906],[-102.576172,78.879395],[-103.426025,79.315625]]],[[[-91.885547,81.132861],[-94.220117,81.330762],[-93.286719,81.100293],[-95.514746,80.838135],[-93.92793,80.55918],[-95.926953,80.720654],[-96.394092,80.315039],[-94.262598,80.194873],[-96.773242,80.135791],[-96.589062,79.91665],[-95.739355,79.660156],[-94.401855,79.736328],[-95.662891,79.527344],[-95.103174,79.289893],[-91.299902,79.372705],[-94.1146,78.928906],[-91.866895,78.542676],[-92.35127,78.312891],[-89.525684,78.159619],[-90.037109,78.606836],[-88.822412,78.185889],[-88.040186,78.995312],[-87.617383,78.676318],[-85.042139,79.28457],[-85.647852,79.611426],[-87.295166,79.580176],[-87.675,80.372119],[-88.857324,80.166211],[-91.885547,81.132861]]],[[[-94.294971,76.912451],[-95.849512,77.066211],[-96.880713,76.73833],[-95.273877,76.264404],[-93.091748,76.354004],[-91.549121,74.655566],[-90.880225,74.817773],[-89.558691,74.554736],[-88.534961,74.831738],[-88.423047,74.494141],[-84.425537,74.508105],[-83.531885,74.585693],[-83.52207,74.901465],[-82.735791,74.530273],[-80.262744,74.584473],[-80.347754,74.902979],[-79.401416,74.917627],[-80.381982,75.03418],[-79.509082,75.259814],[-80.321973,75.629102],[-83.931982,75.818945],[-85.951465,75.39502],[-88.644971,75.658447],[-88.916699,75.453955],[-91.407324,76.220068],[-89.284521,76.301611],[-91.415088,76.455859],[-90.542627,76.495752],[-91.305029,76.680762],[-93.53457,76.447705],[-93.230029,76.770264],[-94.294971,76.912451]]],[[[-96.204492,78.531299],[-98.332617,78.773535],[-96.989648,77.806006],[-94.934277,78.075635],[-94.915381,78.390527],[-96.204492,78.531299]]],[[[-93.17085,74.160986],[-94.973535,74.041406],[-94.697607,73.663574],[-95.63291,73.695459],[-95.007861,72.012793],[-94.037549,72.02876],[-93.555176,72.421143],[-94.211328,72.756934],[-92.11792,72.753809],[-90.381396,73.824756],[-93.17085,74.160986]]],[[[-97.439453,69.642676],[-98.200488,69.796973],[-98.041357,69.456641],[-98.545996,69.5729],[-99.494678,68.95957],[-96.401562,68.470703],[-95.267773,68.826074],[-97.439453,69.642676]]],[[[-61.105176,45.944727],[-60.494531,46.270264],[-60.408203,47.003516],[-61.408643,46.170361],[-61.449805,45.716211],[-60.672949,45.59082],[-59.842188,45.941553],[-60.297949,46.31123],[-60.737891,45.751416],[-61.059033,45.703369],[-60.865234,45.983496],[-61.105176,45.944727]]],[[[-67.124854,45.169434],[-66.439844,45.095898],[-66.026562,45.417578],[-65.884473,45.2229],[-64.778516,45.638428],[-64.632715,45.946631],[-64.314648,45.835693],[-64.873145,45.35459],[-63.368018,45.364795],[-64.135498,45.023047],[-64.448145,45.337451],[-66.090625,44.504932],[-65.868018,44.568799],[-66.125732,43.813818],[-65.481689,43.518066],[-64.286084,44.550342],[-63.609766,44.47998],[-63.604004,44.683203],[-61.031543,45.291748],[-61.955518,45.868164],[-62.750098,45.648242],[-64.541504,46.240332],[-64.831396,47.060791],[-65.318896,47.101221],[-64.703223,47.724854],[-65.607227,47.67002],[-66.704395,48.022461],[-65.926709,48.188867],[-65.259424,48.02124],[-64.348828,48.423193],[-64.513721,48.841113],[-64.216211,48.873633],[-64.836328,49.191748],[-66.178174,49.213135],[-68.238184,48.626416],[-70.519482,47.03252],[-71.261182,46.75625],[-72.109277,46.551221],[-73.15957,46.010059],[-73.558105,45.425098],[-74.708887,45.003857],[-71.517529,45.007568],[-71.327295,45.290088],[-70.865039,45.270703],[-69.242871,47.462988],[-68.937207,47.21123],[-68.235498,47.345947],[-67.806787,47.082812],[-67.802246,45.727539],[-67.124854,45.169434]]],[[[-55.45874,51.536523],[-56.025586,51.568359],[-57.035937,51.01084],[-57.791309,49.48999],[-58.213379,49.38667],[-57.990527,48.987939],[-58.403662,49.084326],[-58.716455,48.598047],[-58.841797,48.746436],[-59.167676,48.558496],[-58.330225,48.522119],[-59.320654,47.736914],[-59.116943,47.570703],[-58.336865,47.730859],[-56.774121,47.56499],[-55.85791,47.819189],[-56.127246,47.502832],[-55.576123,47.465234],[-54.784619,47.664746],[-55.919238,47.016895],[-55.788525,46.867236],[-54.488135,47.403857],[-54.191846,47.859814],[-53.849512,47.440332],[-54.17373,46.880371],[-53.597363,47.145996],[-53.589795,46.638867],[-53.114844,46.655811],[-52.653662,47.549414],[-52.782422,47.769434],[-53.169824,47.512109],[-52.866016,48.112988],[-53.672363,47.648242],[-53.86958,48.019678],[-53.027588,48.634717],[-54.114453,48.393604],[-53.706348,48.655518],[-54.161279,48.787695],[-53.619434,49.321631],[-54.448242,49.329443],[-54.502197,49.527344],[-55.353174,49.079443],[-55.229541,49.508154],[-56.087305,49.451953],[-55.869824,49.670166],[-56.140186,49.619141],[-55.50293,49.983154],[-56.161279,49.940137],[-56.179395,50.11499],[-56.822168,49.613477],[-55.8,51.033301],[-56.031104,51.328369],[-55.45874,51.536523]]],[[[-86.589355,71.010791],[-85.023389,71.353223],[-86.218457,71.899121],[-86.656299,72.724023],[-84.946777,73.721631],[-85.950781,73.850146],[-88.705176,73.403271],[-89.861523,72.411914],[-89.805371,71.462305],[-87.140088,71.011621],[-89.455908,71.061719],[-88.782715,70.494482],[-87.838135,70.246582],[-86.396875,70.465332],[-85.780029,70.03667],[-81.564697,69.942725],[-80.921729,69.730908],[-81.651953,70.094629],[-78.889648,69.97749],[-79.066406,70.603564],[-75.647754,69.212549],[-76.557227,69.009473],[-76.585059,68.69873],[-74.716699,69.045508],[-74.892969,68.808154],[-74.270117,68.541211],[-73.822119,68.685986],[-72.22002,67.254297],[-74.416406,66.16709],[-73.550781,65.485254],[-75.798682,65.29751],[-75.4521,64.841602],[-75.82832,65.227051],[-77.326709,65.453125],[-78.095605,64.939258],[-78.045215,64.499268],[-76.856152,64.237646],[-74.694727,64.496582],[-74.681396,64.830664],[-74.064795,64.424658],[-73.271289,64.58252],[-72.498438,63.823486],[-71.380859,63.580322],[-71.992236,63.416162],[-71.347266,63.066113],[-69.604736,62.767725],[-68.535889,62.255615],[-66.123877,61.893066],[-65.980176,62.208887],[-68.911084,63.703223],[-67.722559,63.422754],[-67.893262,63.73374],[-66.697461,63.069531],[-66.65498,63.264746],[-65.108496,62.626465],[-65.162793,62.932617],[-64.672363,62.921973],[-65.191846,63.764258],[-64.664648,63.245361],[-64.410937,63.706348],[-65.580322,64.293848],[-65.074609,64.43667],[-65.529346,64.504785],[-65.274805,64.631543],[-66.635498,65.000342],[-66.697412,64.815186],[-67.117969,65.440381],[-67.936768,65.564893],[-68.748926,66.200049],[-67.350439,65.929736],[-67.883398,66.467432],[-67.225391,66.310254],[-66.986328,66.62749],[-66.063721,66.132715],[-65.656348,66.204736],[-65.825732,65.996924],[-64.445361,66.317139],[-65.401611,65.764014],[-64.555078,65.116602],[-64.269678,65.400781],[-63.606592,64.928076],[-63.45874,65.853027],[-62.658887,65.639941],[-62.624121,66.01626],[-61.991602,66.035303],[-62.553125,66.406836],[-61.570801,66.3729],[-62.12334,66.643066],[-61.353418,66.689209],[-62.123584,67.046729],[-63.701562,66.822363],[-63.040137,67.23501],[-64.699951,67.350537],[-63.850195,67.566064],[-65.021094,67.787549],[-64.922314,68.031641],[-65.40127,67.674854],[-65.942383,68.070947],[-66.443945,67.833838],[-66.212402,68.28042],[-66.923096,68.065723],[-66.742725,68.457764],[-69.319092,68.856982],[-67.883203,68.783984],[-67.832617,69.065967],[-69.040625,69.097998],[-68.406299,69.232227],[-66.707422,69.168213],[-67.236963,69.460107],[-69.250781,69.511914],[-67.221631,69.730713],[-67.363672,70.034424],[-68.059082,70.317236],[-68.744043,69.941406],[-68.778223,70.203564],[-70.057715,70.042627],[-68.363525,70.48125],[-69.949805,70.84502],[-71.429443,70.127783],[-71.275879,70.500293],[-71.890186,70.431543],[-70.672656,71.052197],[-72.632715,70.830762],[-71.229395,71.33877],[-72.901953,71.677783],[-73.180615,71.282861],[-73.712842,71.587598],[-74.197266,71.40415],[-73.814062,71.771436],[-74.996191,71.218115],[-74.700781,71.675586],[-75.204785,71.709131],[-74.209326,71.978662],[-74.903174,72.100488],[-75.922803,71.717236],[-75.052686,72.226367],[-75.704297,72.571533],[-77.753223,72.724756],[-78.484277,72.470605],[-77.516504,72.177783],[-78.699268,72.351416],[-78.585107,71.880615],[-79.831299,72.446289],[-80.925146,71.907666],[-80.611475,72.45083],[-81.229346,72.311719],[-80.277246,72.770166],[-81.946143,73.729834],[-85.454736,73.105469],[-84.256641,72.796729],[-85.262109,72.954004],[-85.649902,72.722168],[-84.28374,72.044482],[-85.321875,72.233154],[-85.911621,71.986523],[-84.699414,71.631445],[-84.82373,71.028613],[-86.589355,71.010791]]],[[[-61.801123,49.093896],[-62.858545,49.705469],[-64.485205,49.886963],[-63.041504,49.224951],[-61.801123,49.093896]]],[[[-63.811279,46.468701],[-63.993555,47.061572],[-64.388037,46.640869],[-63.641016,46.230469],[-62.978467,46.316357],[-63.02207,46.066602],[-62.531348,45.977295],[-62.02373,46.421582],[-63.811279,46.468701]]],[[[-82.000488,62.954199],[-83.376416,62.904932],[-83.910498,62.45415],[-83.698877,62.160254],[-82.568262,62.403223],[-82.000488,62.954199]]],[[[-79.545312,62.411719],[-80.260059,62.109033],[-79.816113,61.594629],[-79.323926,62.026074],[-79.545312,62.411719]]],[[[-75.675879,68.32251],[-76.595801,68.278955],[-77.125879,67.94707],[-76.944189,67.250293],[-75.201953,67.45918],[-75.078125,68.173145],[-75.675879,68.32251]]],[[[-79.537305,73.654492],[-80.848877,73.72124],[-79.820703,72.826318],[-76.183398,72.843066],[-77.206543,73.499561],[-79.537305,73.654492]]],[[[-80.731689,52.747266],[-81.135596,53.205811],[-82.039258,53.049902],[-80.731689,52.747266]]],[[[-78.935596,56.266064],[-79.272412,56.600439],[-79.536328,56.180078],[-79.458887,56.539746],[-79.9875,55.892139],[-79.544727,56.128369],[-79.764746,55.806787],[-79.495117,55.874756],[-79.182129,56.212158],[-79.175488,55.885059],[-78.935596,56.266064]]],[[[-89.833252,77.267627],[-91.019043,77.643896],[-90.993213,77.329492],[-89.833252,77.267627]]],[[[-98.791602,79.981104],[-100.053271,80.093359],[-98.945215,79.724072],[-98.791602,79.981104]]],[[[-105.288916,72.919922],[-104.5875,73.578076],[-106.613965,73.695605],[-106.921533,73.479834],[-105.288916,72.919922]]],[[[-102.227344,76.014893],[-102.728027,76.307031],[-104.350635,76.182324],[-103.314746,75.764209],[-102.227344,76.014893]]],[[[-104.022852,76.583105],[-104.35752,76.334619],[-103.311377,76.347559],[-104.022852,76.583105]]],[[[-118.328125,75.579688],[-117.633691,76.115088],[-119.39458,75.617334],[-118.328125,75.579688]]],[[[-113.832471,77.754639],[-114.330371,78.077539],[-114.98042,77.91543],[-113.832471,77.754639]]],[[[-130.236279,53.958545],[-130.447998,54.089014],[-130.703174,53.892236],[-130.236279,53.958545]]],[[[-128.552441,52.939746],[-129.033252,53.279932],[-129.175928,52.964941],[-128.746338,52.763379],[-128.678955,52.289648],[-128.552441,52.939746]]],[[[-73.566504,45.469092],[-73.476074,45.704736],[-73.960547,45.441406],[-73.566504,45.469092]]],[[[-68.233789,60.240918],[-67.818848,60.449512],[-68.087598,60.587842],[-68.233789,60.240918]]],[[[-64.832617,61.366064],[-64.789648,61.662207],[-65.432129,61.649512],[-64.832617,61.366064]]],[[[-79.063086,75.925879],[-79.009326,76.145898],[-79.63877,75.84292],[-79.063086,75.925879]]],[[[-79.384277,51.951953],[-79.271289,52.086816],[-79.64375,52.010059],[-79.384277,51.951953]]],[[[-73.621729,67.783838],[-73.49375,68.000635],[-74.706543,68.06709],[-74.573389,67.828662],[-73.621729,67.783838]]],[[[-77.876709,63.470557],[-78.536768,63.42373],[-77.942432,63.114404],[-77.532715,63.233643],[-77.876709,63.470557]]],[[[-98.270361,73.868506],[-97.698242,74.108691],[-99.416992,73.89541],[-98.270361,73.868506]]],[[[-79.430664,69.787793],[-80.794775,69.689258],[-79.977832,69.509668],[-79.430664,69.787793]]],[[[-76.995361,69.14375],[-76.668848,69.366162],[-77.187549,69.440088],[-76.995361,69.14375]]],[[[-83.725977,65.796729],[-84.407178,66.131006],[-84.118262,65.771777],[-83.332422,65.631055],[-83.725977,65.796729]]],[[[-101.693555,77.696582],[-101.193213,77.829785],[-102.447705,77.880615],[-101.693555,77.696582]]],[[[-96.078564,75.510107],[-96.367822,75.654639],[-96.915137,75.379688],[-96.078564,75.510107]]],[[[-104.119922,75.036328],[-104.346191,75.429932],[-104.887402,75.147754],[-104.119922,75.036328]]]]}},{type:"Feature",properties:{name:"喀麦隆",full_name:"喀麦隆共和国",iso_a2:"CM",iso_a3:"CMR",iso_n3:"120"},geometry:{type:"Polygon",coordinates:[[[8.555859,4.755225],[8.574414,4.526221],[8.918262,4.55376],[9.000098,4.091602],[9.688867,4.056396],[9.556152,3.798047],[9.948438,3.079053],[9.800781,2.304443],[11.328711,2.167432],[13.293555,2.161572],[14.578906,2.199121],[16.059375,1.676221],[16.183398,2.270068],[16.063477,2.908594],[15.128711,3.826904],[15.063574,4.284863],[14.73125,4.602393],[14.431152,6.038721],[15.480078,7.523779],[15.549805,7.787891],[15.116211,8.557324],[13.977246,9.691553],[14.243262,9.979736],[15.654883,10.007812],[15.132227,10.648486],[14.84707,12.5021],[14.461719,13.021777],[14.063965,13.078516],[14.197461,12.383789],[14.619727,12.150977],[14.575391,11.532422],[13.699902,10.873145],[12.782227,8.817871],[12.233398,8.282324],[11.861426,7.116406],[11.237305,6.450537],[10.60625,7.063086],[9.779883,6.760156],[8.997168,5.917725],[8.555859,4.755225]]]}},{type:"Feature",properties:{name:"柬埔寨",full_name:"柬埔寨王国",iso_a2:"KH",iso_a3:"KHM",iso_n3:"116"},geometry:{type:"Polygon",coordinates:[[[107.519434,14.705078],[106.938086,14.327344],[106.501465,14.578223],[105.978906,14.343018],[106.066797,13.921191],[105.183301,14.34624],[103.199414,14.332617],[102.336328,13.560303],[102.933887,11.706689],[103.152832,10.913721],[103.532422,11.14668],[103.721875,10.890137],[103.587109,10.552197],[104.426367,10.41123],[104.850586,10.534473],[105.045703,10.911377],[105.755078,10.98999],[106.163965,10.794922],[105.851465,11.63501],[106.399219,11.687012],[106.413867,11.948438],[107.506445,12.364551],[107.605469,13.437793],[107.331445,14.126611],[107.519434,14.705078]]]}},{type:"Feature",properties:{name:"缅甸",full_name:"缅甸联邦共和国",iso_a2:"MM",iso_a3:"MMR",iso_n3:"104"},geometry:{type:"MultiPolygon",coordinates:[[[[100.122461,20.31665],[100.249316,20.730273],[100.622949,20.85957],[100.703125,21.251367],[101.138867,21.56748],[101.079785,21.755859],[100.147656,21.480518],[99.917676,22.028027],[99.192969,22.125977],[99.507129,22.959131],[98.86377,23.19126],[98.676758,23.905078],[98.835059,24.121191],[97.564551,23.911035],[97.583301,24.774805],[97.819531,25.251855],[98.65625,25.863574],[98.738477,26.785742],[98.651172,27.572461],[98.298828,27.550098],[98.061621,28.185889],[97.599219,28.517041],[97.322461,28.217969],[97.335156,27.937744],[96.876855,27.586719],[97.102051,27.11543],[96.731641,27.331494],[96.19082,27.261279],[95.128711,26.597266],[95.132422,26.04126],[94.579883,25.319824],[94.707617,25.04873],[94.127637,23.876465],[93.32627,24.064209],[93.151172,22.230615],[92.574902,21.978076],[92.631641,21.306201],[92.17959,21.293115],[92.324121,20.791846],[92.722852,20.295605],[92.735645,20.562695],[92.82832,20.177588],[93.066797,20.377637],[93.129492,19.858008],[93.25,20.070117],[93.707031,19.912158],[93.998145,19.440869],[93.824902,19.238477],[93.493066,19.369482],[93.929199,18.899658],[94.044922,19.287402],[94.588965,17.569336],[94.223828,16.016455],[94.70332,16.511914],[94.661523,15.904395],[94.893164,16.182812],[94.942578,15.818262],[95.176953,15.825684],[95.346777,16.097607],[95.389551,15.722754],[96.324316,16.444434],[96.189063,16.768311],[96.431152,16.504932],[96.76543,16.710352],[96.851465,17.401025],[97.375879,16.522949],[97.725977,16.568555],[97.584277,16.01958],[97.812305,14.858936],[98.110645,13.712891],[98.200391,13.980176],[98.575977,13.161914],[98.636328,11.738379],[98.875977,11.719727],[98.464941,10.67583],[98.562598,10.034961],[98.702539,10.190381],[98.757227,10.660937],[99.614746,11.781201],[99.123926,13.030762],[99.136816,13.716699],[98.202148,14.975928],[98.888281,16.351904],[98.660742,16.33042],[97.373926,18.517969],[97.745898,18.588184],[98.015039,19.749512],[98.916699,19.7729],[99.074219,20.099365],[99.485938,20.149854],[99.458887,20.363037],[100.122461,20.31665]]],[[[98.553809,11.744873],[98.376465,11.791504],[98.434766,11.56709],[98.553809,11.744873]]],[[[93.69082,18.684277],[93.744727,18.865527],[93.4875,18.867529],[93.69082,18.684277]]]]}},{type:"Feature",properties:{name:"布隆迪",full_name:"布隆迪共和国",iso_a2:"BI",iso_a3:"BDI",iso_n3:"108"},geometry:{type:"Polygon",coordinates:[[[30.553613,-2.400098],[29.930176,-2.339551],[29.698047,-2.794727],[29.014355,-2.720215],[29.403223,-4.449316],[29.947266,-4.307324],[30.790234,-3.274609],[30.780273,-2.984863],[30.433496,-2.874512],[30.553613,-2.400098]]]}},{type:"Feature",properties:{name:"布基纳法索",full_name:"布基纳法索",iso_a2:"BF",iso_a3:"BFA",iso_n3:"854"},geometry:{type:"Polygon",coordinates:[[[.900488,10.993262],[1.426758,11.447119],[1.980371,11.418408],[2.38916,11.89707],[2.072949,12.309375],[2.10459,12.70127],[1.564941,12.6354],[.987305,13.041895],[.988477,13.364844],[1.201172,13.35752],[.429199,13.972119],[.21748,14.911475],[-.760449,15.047754],[-1.973047,14.456543],[-2.113232,14.168457],[-2.586719,14.227588],[-2.95083,13.648438],[-3.248633,13.65835],[-3.301758,13.280762],[-4.151025,13.306201],[-4.428711,12.337598],[-5.288135,11.82793],[-5.523535,10.426025],[-4.62583,9.713574],[-3.223535,9.895459],[-2.69585,9.481348],[-2.829932,10.998389],[-.627148,10.927393],[-.068604,11.115625],[.900488,10.993262]]]}},{type:"Feature",properties:{name:"保加利亚",full_name:"保加利亚共和国",iso_a2:"BG",iso_a3:"BGR",iso_n3:"100"},geometry:{type:"Polygon",coordinates:[[[28.014453,41.969043],[27.484766,42.468066],[28.585352,43.742236],[27.086914,44.167383],[25.49707,43.670801],[22.919043,43.834473],[23.028516,44.077979],[22.705078,44.237793],[22.369629,43.781299],[22.967969,43.142041],[22.466797,42.84248],[22.344043,42.313965],[23.003613,41.739844],[22.916016,41.336279],[24.487891,41.555225],[25.251172,41.243555],[25.92334,41.311914],[26.320898,41.716553],[27.011719,42.058643],[28.014453,41.969043]]]}},{type:"Feature",properties:{name:"文莱",full_name:"文莱达鲁萨兰国",iso_a2:"BN",iso_a3:"BRN",iso_n3:"096"},geometry:{type:"MultiPolygon",coordinates:[[[[115.140039,4.899756],[115.026758,4.899707],[115.290625,4.352588],[115.140039,4.899756]]],[[[115.026758,4.899707],[114.063867,4.592676],[114.654102,4.037646],[114.74668,4.718066],[115.026758,4.899707]]]]}},{type:"Feature",properties:{name:"巴西",full_name:"巴西联邦共和国",iso_a2:"BR",iso_a3:"BRA",iso_n3:"076"},geometry:{type:"MultiPolygon",coordinates:[[[[-66.876025,1.223047],[-67.082275,1.1854],[-67.400439,2.116699],[-67.93623,1.748486],[-68.193799,1.987012],[-68.176562,1.719824],[-69.848584,1.70874],[-69.852148,1.059521],[-69.311816,1.050488],[-69.15332,.658789],[-70.053906,.578613],[-70.070508,-.138867],[-69.633984,-.509277],[-69.400244,-1.194922],[-69.965918,-4.235938],[-70.799512,-4.17334],[-72.887061,-5.122754],[-73.235547,-6.098438],[-73.137354,-6.46582],[-73.758105,-6.905762],[-73.72041,-7.309277],[-74.002051,-7.556055],[-72.974023,-8.993164],[-73.209424,-9.411426],[-72.379053,-9.510156],[-72.142969,-10.005176],[-71.237939,-9.966016],[-70.541113,-9.4375],[-70.642334,-11.010254],[-69.578613,-10.951758],[-68.622656,-11.10918],[-66.575342,-9.899902],[-65.396143,-9.712402],[-65.389893,-11.246289],[-64.992529,-11.975195],[-64.420508,-12.439746],[-63.06748,-12.669141],[-61.789941,-13.525586],[-61.077002,-13.489746],[-60.506592,-13.789844],[-60.27334,-15.08877],[-60.583203,-15.09834],[-60.242334,-15.47959],[-60.175586,-16.269336],[-58.345605,-16.284375],[-58.395996,-17.234277],[-57.832471,-17.512109],[-57.495654,-18.214648],[-58.131494,-19.744531],[-57.860742,-19.97959],[-58.159766,-20.164648],[-57.830225,-20.997949],[-57.955908,-22.10918],[-56.937256,-22.271289],[-56.447803,-22.076172],[-55.84917,-22.307617],[-55.415918,-23.951367],[-54.625488,-23.8125],[-54.241797,-24.047266],[-54.615869,-25.576074],[-53.891162,-25.668848],[-53.668555,-26.288184],[-53.838184,-27.121094],[-55.725488,-28.204102],[-57.608887,-30.187793],[-56.832715,-30.107227],[-56.044824,-30.777637],[-56.004687,-31.079199],[-55.603027,-30.850781],[-53.761719,-32.056836],[-53.125586,-32.736719],[-53.531348,-33.170898],[-53.370605,-33.742188],[-52.652246,-33.137793],[-51.972461,-31.383789],[-51.283057,-30.751562],[-51.298047,-30.034863],[-51.024951,-30.368652],[-50.563525,-30.253613],[-50.581934,-30.438867],[-51.272168,-31.476953],[-52.063232,-31.830371],[-52.039209,-32.114844],[-50.921387,-31.258398],[-49.745996,-29.363184],[-48.799658,-28.575293],[-48.55415,-27.195996],[-48.748291,-26.268652],[-48.401172,-25.597363],[-48.731738,-25.36875],[-48.202734,-25.416504],[-46.867285,-24.236328],[-45.97207,-23.795508],[-45.464307,-23.802539],[-44.569678,-23.274023],[-44.637256,-23.055469],[-43.22417,-22.991211],[-43.154297,-22.725195],[-42.958301,-22.96709],[-42.042383,-22.94707],[-41.705518,-22.309668],[-41.000293,-21.999023],[-40.954541,-21.237891],[-39.783301,-19.571777],[-39.650781,-18.252344],[-39.154004,-17.703906],[-38.880615,-15.864258],[-39.089355,-13.588184],[-38.851758,-12.790137],[-38.690967,-12.623926],[-38.498926,-12.956641],[-38.239746,-12.844238],[-37.359229,-11.252539],[-37.356006,-11.403906],[-35.340869,-9.230664],[-34.834668,-7.971484],[-34.805469,-7.288379],[-35.481689,-5.166016],[-37.174658,-4.912402],[-38.475781,-3.71748],[-39.964697,-2.861523],[-41.479932,-2.916504],[-43.380078,-2.376074],[-44.192676,-2.80957],[-44.228613,-2.471289],[-44.723047,-3.204785],[-44.381836,-2.365527],[-44.435449,-2.168066],[-44.756348,-2.265527],[-44.537793,-2.052734],[-44.65127,-1.745801],[-45.076367,-1.466406],[-45.32915,-1.717285],[-45.458594,-1.35625],[-47.398096,-.62666],[-48.115088,-.7375],[-48.449805,-1.145508],[-48.349805,-1.482129],[-48.71001,-1.487695],[-49.211035,-1.916504],[-49.636523,-2.656934],[-49.313672,-1.731738],[-50.403223,-2.015527],[-50.690039,-1.761719],[-50.894922,-.937598],[-51.947559,-1.586719],[-52.66416,-1.551758],[-51.980811,-1.367969],[-51.28291,-.085205],[-49.898877,1.162988],[-49.957129,1.659863],[-50.714404,2.134033],[-51.219922,4.093604],[-51.54707,4.310889],[-51.652539,4.061279],[-52.903467,2.211523],[-53.767773,2.354834],[-54.130078,2.121045],[-54.61626,2.326758],[-54.978662,2.597656],[-55.957471,2.520459],[-56.137695,2.259033],[-55.929639,1.8875],[-56.482812,1.942139],[-57.31748,1.963477],[-58.821777,1.201221],[-59.231201,1.376025],[-59.666602,1.746289],[-59.994336,2.68999],[-59.854395,3.5875],[-59.551123,3.933545],[-59.703271,4.381104],[-60.148633,4.533252],[-59.990674,5.082861],[-60.142041,5.238818],[-60.742139,5.202051],[-60.603857,4.949365],[-61.002832,4.535254],[-62.712109,4.01792],[-62.856982,3.593457],[-63.338672,3.943896],[-64.021484,3.929102],[-64.788672,4.276025],[-64.221094,3.587402],[-64.046582,2.502393],[-63.389258,2.411914],[-63.43252,2.155566],[-64.008496,1.931592],[-64.205029,1.529492],[-65.473389,.69126],[-65.681445,.983447],[-66.347119,.767188],[-66.876025,1.223047]]],[[[-49.628662,-.229199],[-50.645508,-.272852],[-50.796094,-.90625],[-50.507617,-1.787988],[-49.805127,-1.790234],[-48.833594,-1.390039],[-48.392676,-.297363],[-49.628662,-.229199]]],[[[-45.260254,-23.88916],[-45.302344,-23.727539],[-45.451416,-23.895605],[-45.260254,-23.88916]]],[[[-49.738232,.268164],[-50.272656,.231738],[-50.339453,.043359],[-49.91709,-.023193],[-49.738232,.268164]]],[[[-49.443896,-.112402],[-49.503467,.083691],[-49.830078,-.093896],[-49.443896,-.112402]]],[[[-50.426123,.139258],[-50.372754,.590869],[-50.623926,.054395],[-50.426123,.139258]]],[[[-50.15293,.393018],[-50.058838,.638037],[-50.281689,.516504],[-50.15293,.393018]]],[[[-51.83252,-1.433789],[-51.276318,-1.021777],[-51.254004,-.541406],[-51.546045,-.649609],[-51.83252,-1.433789]]]]}},{type:"Feature",properties:{name:"博茨瓦纳",full_name:"博茨瓦纳共和国",iso_a2:"BW",iso_a3:"BWA",iso_n3:"072"},geometry:{type:"Polygon",coordinates:[[[25.258789,-17.793555],[24.243945,-18.023438],[23.599707,-18.459961],[23.219336,-17.999707],[20.974121,-18.318848],[20.979492,-21.961914],[19.977344,-22.000195],[19.980469,-24.776758],[20.793164,-25.915625],[20.685059,-26.822461],[21.646289,-26.854199],[22.597656,-26.132715],[23.05752,-25.312305],[24.748145,-25.817383],[25.443652,-25.714453],[25.912109,-24.747461],[26.835059,-24.24082],[27.085547,-23.57793],[28.210156,-22.693652],[29.364844,-22.193945],[29.025586,-21.796875],[28.014063,-21.554199],[27.669434,-21.064258],[27.679297,-20.503027],[27.280762,-20.478711],[27.178223,-20.100977],[26.168066,-19.538281],[25.258789,-17.793555]]]}},{type:"Feature",properties:{name:"波黑",full_name:"波斯尼亚和黑塞哥维那",iso_a2:"BA",iso_a3:"BIH",iso_n3:"070"},geometry:{type:"Polygon",coordinates:[[[19.194336,43.533301],[19.495117,43.642871],[19.24502,43.965039],[19.583789,44.043457],[19.118457,44.359961],[19.348633,44.880908],[19.007129,44.869189],[16.918652,45.276562],[16.293359,45.008838],[15.788086,45.178955],[15.736621,44.76582],[17.585156,42.938379],[17.667578,42.897119],[18.436328,42.559717],[18.460156,42.9979],[19.194336,43.533301]]]}},{type:"Feature",properties:{name:"玻利维亚",full_name:"多民族玻利维亚国",iso_a2:"BO",iso_a3:"BOL",iso_n3:"068"},geometry:{type:"Polygon",coordinates:[[[-69.510938,-17.506055],[-69.093945,-18.050488],[-68.968311,-18.967969],[-68.462891,-19.432813],[-68.760547,-20.416211],[-68.197021,-21.300293],[-67.879443,-22.822949],[-67.194873,-22.82168],[-66.220166,-21.802539],[-65.771045,-22.099609],[-64.605518,-22.228809],[-64.325293,-22.827637],[-63.92168,-22.028613],[-62.843359,-21.997266],[-62.650977,-22.233691],[-62.276318,-20.5625],[-61.756836,-19.645312],[-59.090527,-19.28623],[-58.180176,-19.817871],[-58.159766,-20.164648],[-57.860742,-19.97959],[-58.131494,-19.744531],[-57.495654,-18.214648],[-57.832471,-17.512109],[-58.395996,-17.234277],[-58.345605,-16.284375],[-60.175586,-16.269336],[-60.242334,-15.47959],[-60.583203,-15.09834],[-60.27334,-15.08877],[-60.506592,-13.789844],[-61.077002,-13.489746],[-61.789941,-13.525586],[-63.06748,-12.669141],[-64.420508,-12.439746],[-64.992529,-11.975195],[-65.389893,-11.246289],[-65.396143,-9.712402],[-66.575342,-9.899902],[-68.622656,-11.10918],[-69.578613,-10.951758],[-68.685254,-12.501953],[-68.978613,-12.880078],[-69.074121,-13.682813],[-68.870898,-14.169727],[-69.359473,-14.795312],[-69.172461,-15.236621],[-69.420898,-15.640625],[-69.217578,-16.149121],[-68.842773,-16.337891],[-69.624854,-17.200195],[-69.510938,-17.506055]]]}},{type:"Feature",properties:{name:"不丹",full_name:"不丹王国",iso_a2:"BT",iso_a3:"BTN",iso_n3:"064"},geometry:{type:"Polygon",coordinates:[[[91.631934,27.759961],[91.273047,28.078369],[90.352734,28.080225],[89.981055,28.311182],[88.891406,27.316064],[88.857617,26.961475],[89.609961,26.719434],[91.99834,26.85498],[92.083398,27.290625],[91.594727,27.557666],[91.631934,27.759961]]]}},{type:"Feature",properties:{name:"贝宁",full_name:"贝宁共和国",iso_a2:"BJ",iso_a3:"BEN",iso_n3:"204"},geometry:{type:"Polygon",coordinates:[[[1.622656,6.216797],[2.706445,6.369238],[2.774805,9.048535],[3.044922,9.083838],[3.834473,10.607422],[3.487793,11.39541],[3.59541,11.696289],[2.805273,12.383838],[2.366016,12.221924],[2.38916,11.89707],[1.980371,11.418408],[1.426758,11.447119],[.900488,10.993262],[.763379,10.38667],[1.330078,9.996973],[1.600195,9.050049],[1.530957,6.992432],[1.77793,6.294629],[1.622656,6.216797]]]}},{type:"Feature",properties:{name:"伯利兹",full_name:"伯利兹",iso_a2:"BZ",iso_a3:"BLZ",iso_n3:"084"},geometry:{type:"Polygon",coordinates:[[[-89.161475,17.814844],[-89.2375,15.894434],[-88.894043,15.890625],[-88.313428,16.632764],[-88.085254,18.226123],[-88.295654,18.472412],[-89.161475,17.814844]]]}},{type:"Feature",properties:{name:"比利时",full_name:"比利时王国",iso_a2:"BE",iso_a3:"BEL",iso_n3:"056"},geometry:{type:"Polygon",coordinates:[[[4.226172,51.386475],[3.902051,51.207666],[3.350098,51.377686],[2.524902,51.097119],[2.759375,50.750635],[4.174609,50.246484],[4.149316,49.971582],[4.818652,50.153174],[4.867578,49.788135],[5.789746,49.538281],[5.744043,49.919629],[6.116504,50.120996],[6.340918,50.451758],[5.993945,50.750439],[5.639453,50.843604],[5.796484,51.153076],[5.030957,51.469092],[4.226172,51.386475]]]}},{type:"Feature",properties:{name:"白俄罗斯",full_name:"白俄罗斯共和国",iso_a2:"BY",iso_a3:"BLR",iso_n3:"112"},geometry:{type:"Polygon",coordinates:[[[31.763379,52.101074],[31.258789,53.016699],[31.417871,53.196045],[32.141992,53.091162],[32.706445,53.419434],[31.754199,53.810449],[30.798828,54.783252],[30.906836,55.57002],[30.233594,55.845215],[29.482227,55.68457],[29.375,55.938721],[28.147949,56.14292],[27.576758,55.798779],[26.593555,55.667529],[26.457617,55.34248],[26.775684,55.273096],[25.780859,54.833252],[25.749219,54.156982],[25.461133,54.292773],[24.317969,53.892969],[23.484668,53.939795],[23.91543,52.770264],[23.175098,52.286621],[23.652441,52.040381],[23.605273,51.51792],[25.267188,51.937744],[27.141992,51.752051],[27.7,51.477979],[28.73125,51.433398],[29.102051,51.627539],[29.346484,51.382568],[30.160742,51.477881],[30.544531,51.265039],[30.755273,51.895166],[31.763379,52.101074]]]}},{type:"Feature",properties:{name:"巴巴多斯",full_name:"巴巴多斯",iso_a2:"BB",iso_a3:"BRB",iso_n3:"052"},geometry:{type:"Polygon",coordinates:[[[-59.493311,13.081982],[-59.427637,13.152783],[-59.64668,13.303125],[-59.493311,13.081982]]]}},{type:"Feature",properties:{name:"孟加拉国",full_name:"孟加拉人民共和国",iso_a2:"BD",iso_a3:"BGD",iso_n3:"050"},geometry:{type:"MultiPolygon",coordinates:[[[[89.051465,22.093164],[89.353711,21.721094],[89.483203,22.275537],[89.568555,21.767432],[89.985156,22.466406],[89.918066,22.116162],[90.20957,22.156592],[90.230566,21.829785],[90.616113,22.362158],[90.435059,22.751904],[90.590918,23.266406],[90.269141,23.455859],[90.604004,23.591357],[90.945605,22.597021],[91.480078,22.884814],[91.863379,22.350488],[92.324121,20.791846],[92.17959,21.293115],[92.631641,21.306201],[92.574902,21.978076],[92.246094,23.683594],[91.92959,23.685986],[91.619531,22.979688],[91.315234,23.104395],[91.160449,23.660645],[91.36709,24.093506],[91.876953,24.195312],[92.468359,24.944141],[92.049707,25.169482],[89.833301,25.292773],[89.670898,26.213818],[89.369727,26.006104],[89.018652,26.410254],[88.828027,26.252197],[88.418164,26.571533],[88.08457,25.888232],[88.95166,25.259277],[88.45625,25.188428],[88.023438,24.627832],[88.723535,24.274902],[88.567383,23.674414],[88.928125,23.186621],[89.051465,22.093164]]],[[[90.777637,22.089307],[90.868164,22.484863],[90.596484,22.863525],[90.680469,22.32749],[90.515039,22.065137],[90.777637,22.089307]]]]}},{type:"Feature",properties:{name:"巴林",full_name:"巴林王国",iso_a2:"BH",iso_a3:"BHR",iso_n3:"048"},geometry:{type:"Polygon",coordinates:[[[50.607227,25.883105],[50.585938,26.240723],[50.469922,26.228955],[50.607227,25.883105]]]}},{type:"Feature",properties:{name:"巴哈马",full_name:"巴哈马国",iso_a2:"BS",iso_a3:"BHS",iso_n3:"044"},geometry:{type:"MultiPolygon",coordinates:[[[[-77.657715,24.249463],[-77.999902,24.219824],[-77.57373,23.73916],[-77.657715,24.249463]]],[[[-77.225635,25.904199],[-77.066357,26.530176],[-77.533887,26.903418],[-77.94375,26.903564],[-77.238623,26.561133],[-77.403174,26.024707],[-77.225635,25.904199]]],[[[-73.026855,21.192383],[-73.523096,21.19082],[-73.681152,20.975586],[-73.164551,20.97915],[-73.026855,21.192383]]],[[[-77.743848,24.707422],[-78.211377,25.19126],[-78.366504,24.544189],[-78.044922,24.287451],[-77.743848,24.707422]]],[[[-78.492871,26.729053],[-78.985645,26.689502],[-78.743652,26.500684],[-77.922461,26.691113],[-78.492871,26.729053]]],[[[-76.648828,25.487402],[-76.1604,25.119336],[-76.169531,24.649414],[-76.126611,25.140527],[-76.648828,25.487402]]],[[[-74.840479,22.894336],[-75.315967,23.668359],[-75.22334,23.165332],[-74.840479,22.894336]]],[[[-75.308398,24.2],[-75.72666,24.689355],[-75.503223,24.139062],[-75.308398,24.2]]]]}},{type:"Feature",properties:{name:"阿塞拜疆",full_name:"阿塞拜疆共和国",iso_a2:"AZ",iso_a3:"AZE",iso_n3:"031"},geometry:{type:"MultiPolygon",coordinates:[[[[44.817188,39.650439],[45.479688,39.00625],[46.114453,38.877783],[45.784473,39.545605],[44.768262,39.703516],[44.817188,39.650439]]],[[[48.86875,38.435498],[49.551172,40.194141],[50.365918,40.279492],[49.456738,40.799854],[48.572852,41.844482],[47.791016,41.199268],[46.429883,41.890967],[46.182129,41.65708],[46.672559,41.286816],[46.534375,41.088574],[45.280957,41.449561],[45.001367,41.290967],[45.5875,40.846924],[45.454395,40.532373],[45.964648,40.233789],[45.579785,39.977539],[46.481445,39.555176],[46.490625,38.906689],[47.995898,39.683936],[48.322168,39.399072],[47.996484,38.85376],[48.86875,38.435498]]]]}},{type:"Feature",properties:{name:"奥地利",full_name:"奥地利共和国",iso_a2:"AT",iso_a3:"AUT",iso_n3:"040"},geometry:{type:"Polygon",coordinates:[[[9.527539,47.270752],[9.580273,47.057373],[10.452832,46.864941],[10.993262,46.777002],[12.169434,47.082129],[12.388281,46.702637],[13.7,46.520264],[14.549805,46.399707],[16.093066,46.863281],[16.676563,47.536035],[16.421289,47.674463],[17.066602,47.707568],[17.147363,48.005957],[16.953125,48.598828],[15.066797,48.997852],[14.691309,48.599219],[13.814746,48.766943],[12.760352,48.106982],[13.014355,47.478076],[12.209277,47.718262],[11.041992,47.393115],[10.439453,47.551562],[10.183008,47.278809],[9.524023,47.524219],[9.527539,47.270752]]]}},{type:"Feature",properties:{name:"澳大利亚",full_name:"澳大利亚联邦",iso_a2:"AU",iso_a3:"AUS",iso_n3:"036"},geometry:{type:"MultiPolygon",coordinates:[[[[143.178906,-11.954492],[142.872559,-11.821387],[142.779688,-11.115332],[142.456445,-10.707324],[142.168359,-10.946582],[141.961133,-12.054297],[141.688574,-12.351074],[141.929785,-12.739844],[141.613574,-12.943457],[141.625488,-15.056641],[141.291406,-16.463477],[140.830469,-17.414453],[140.03584,-17.702637],[139.248438,-17.328613],[139.009863,-16.899316],[138.24502,-16.718359],[135.45332,-14.923145],[135.954492,-13.934863],[135.927344,-13.304297],[136.461035,-13.225195],[136.897461,-12.243555],[136.443359,-11.951465],[136.081836,-12.422461],[136.008496,-12.191406],[135.704395,-12.209863],[135.922461,-11.825781],[135.029688,-12.19375],[131.961523,-11.180859],[131.822461,-11.302441],[132.072852,-11.474707],[132.674219,-11.649023],[132.712793,-12.123438],[131.438281,-12.276953],[131.291602,-12.067871],[130.867383,-12.557813],[130.622656,-12.431055],[130.168164,-12.957422],[130.259766,-13.302246],[129.838867,-13.572949],[129.378711,-14.39248],[129.84873,-14.828906],[129.637109,-14.850977],[129.634766,-15.139746],[129.267578,-14.871484],[129.21582,-15.160254],[129.058203,-14.884375],[128.575781,-14.774512],[128.069434,-15.329297],[128.180469,-14.711621],[127.457617,-14.031445],[126.903223,-13.744141],[126.569727,-14.160938],[126.053906,-13.977246],[126.020703,-14.494531],[125.661621,-14.529492],[125.627734,-14.256641],[125.178711,-14.714746],[125.355664,-15.119824],[124.839063,-15.160742],[125.062988,-15.442285],[124.692578,-15.273633],[124.439551,-15.493555],[124.381641,-15.758203],[124.648535,-15.870215],[124.404883,-16.298926],[124.771973,-16.402637],[123.607031,-16.224023],[123.49043,-16.490723],[123.874414,-16.918652],[123.831055,-17.120801],[123.593555,-17.030371],[123.563086,-17.520898],[122.970703,-16.436816],[122.260938,-17.135742],[122.34541,-18.111914],[120.997949,-19.604395],[119.104492,-19.995313],[117.40625,-20.721191],[116.706738,-20.653809],[114.709277,-21.823438],[114.141602,-22.483105],[114.022852,-21.881445],[113.417676,-24.435645],[114.214258,-25.851562],[114.215723,-26.289453],[113.72373,-26.129785],[113.451367,-25.599121],[113.836426,-26.500586],[113.581641,-26.558105],[113.356055,-26.080469],[113.184766,-26.182227],[114.028125,-27.347266],[114.165137,-28.080664],[114.856836,-29.142969],[115.07793,-30.560449],[115.698438,-31.694531],[115.683008,-33.192871],[115.358789,-33.639941],[114.993848,-33.515332],[115.008789,-34.255859],[116.517188,-34.987891],[117.581934,-35.097754],[119.450586,-34.368262],[119.854102,-33.974707],[123.506836,-33.916211],[124.24375,-33.015234],[125.917188,-32.296973],[127.319824,-32.264062],[129.187695,-31.659961],[131.143652,-31.495703],[134.23418,-32.548535],[134.173535,-32.979102],[134.791016,-33.32832],[135.45,-34.581055],[135.123047,-34.585742],[135.647559,-34.939648],[135.969727,-34.981836],[135.891016,-34.660938],[136.430664,-34.02998],[137.237305,-33.629492],[137.783203,-32.578125],[137.931836,-33.579102],[137.493848,-34.161133],[137.391016,-34.913281],[137.014258,-34.91582],[136.883594,-35.239746],[137.691699,-35.142969],[138.089258,-34.169824],[138.511133,-35.024414],[138.184375,-35.612695],[139.28252,-35.375391],[139.289453,-35.611328],[138.968945,-35.580762],[139.729004,-36.371387],[139.784277,-37.245801],[140.39043,-37.89668],[141.424219,-38.363477],[142.455859,-38.386328],[143.538965,-38.820898],[144.891309,-37.899805],[145.119922,-38.091309],[144.717773,-38.340332],[144.95957,-38.500781],[145.475781,-38.24375],[145.397266,-38.535352],[146.4,-39.145508],[146.21748,-38.727441],[146.856836,-38.663477],[147.876758,-37.93418],[149.932715,-37.528516],[150.195312,-35.833594],[150.80459,-35.012891],[151.29209,-33.580957],[152.47041,-32.439062],[152.943945,-31.434863],[153.616895,-28.673047],[153.116797,-27.194434],[153.164941,-25.96416],[151.831641,-24.122949],[150.843164,-23.458008],[150.672461,-22.418164],[150.541309,-22.559082],[150.076172,-22.164453],[149.974414,-22.550684],[149.703906,-22.440527],[149.454102,-21.578711],[148.683691,-20.580176],[148.884766,-20.480859],[148.759375,-20.289551],[147.418555,-19.378125],[146.383398,-18.977051],[146.032227,-18.272852],[145.912109,-16.9125],[145.426074,-16.406152],[145.287695,-14.943164],[144.473047,-14.231836],[143.756348,-14.348828],[143.178906,-11.954492]]],[[[139.507812,-16.573047],[139.587891,-16.395215],[139.15957,-16.741699],[139.507812,-16.573047]]],[[[136.714648,-13.803906],[136.424707,-13.864844],[136.335449,-14.211816],[136.894336,-14.293066],[136.89082,-13.786621],[136.714648,-13.803906]]],[[[130.459277,-11.679297],[130.294922,-11.336816],[130.043262,-11.787305],[130.60625,-11.816602],[130.459277,-11.679297]]],[[[130.618848,-11.376074],[130.38457,-11.192188],[130.511914,-11.617871],[130.950977,-11.926465],[131.538574,-11.436914],[131.268262,-11.189844],[130.618848,-11.376074]]],[[[137.596484,-35.738672],[137.334082,-35.59248],[136.540625,-35.890137],[137.448438,-36.074805],[138.123438,-35.852344],[137.596484,-35.738672]]],[[[146.27832,-18.23125],[146.098828,-18.251758],[146.298828,-18.484766],[146.27832,-18.23125]]],[[[136.338672,-11.602344],[136.479297,-11.465918],[136.180273,-11.676758],[136.338672,-11.602344]]],[[[145.042969,-40.786719],[144.718555,-40.672266],[144.766113,-41.390039],[145.516602,-42.354492],[145.198828,-42.230859],[145.487598,-42.92666],[146.208008,-43.316211],[146.043164,-43.547168],[146.873926,-43.6125],[147.297949,-42.790918],[147.94541,-43.181836],[148.213672,-41.97002],[148.342578,-42.215332],[148.215234,-40.854883],[146.31748,-41.163477],[145.042969,-40.786719]]],[[[148.000391,-39.757617],[147.767188,-39.870313],[148.105664,-40.262109],[148.297363,-39.985742],[148.000391,-39.757617]]],[[[148.32627,-40.306934],[148.020117,-40.404199],[148.404004,-40.486523],[148.32627,-40.306934]]]]}},{type:"Feature",properties:{name:"圣诞岛",full_name:"圣诞岛（澳大利亚）",iso_a2:"CX",iso_a3:"CXR",iso_n3:"162"},geometry:{type:"Polygon",coordinates:[[[105.725391,-10.492969],[105.584082,-10.5125],[105.696875,-10.56416],[105.725391,-10.492969]]]}},{type:"Feature",properties:{name:"赫德岛和麦克唐纳群岛",full_name:"赫德岛和麦克唐纳群岛",iso_a2:"HM",iso_a3:"HMD",iso_n3:"334"},geometry:{type:"Polygon",coordinates:[[[73.707422,-53.137109],[73.251172,-52.975781],[73.465137,-53.18418],[73.707422,-53.137109]]]}},{type:"Feature",properties:{name:"诺福克岛",full_name:"诺福克岛（澳大利亚）",iso_a2:"NF",iso_a3:"NFK",iso_n3:"574"},geometry:{type:"Polygon",coordinates:[[[167.939453,-29.017676],[167.960742,-29.096289],[167.99043,-29.04209],[167.939453,-29.017676]]]}},{type:"Feature",properties:{name:"阿什莫尔和卡捷群岛",full_name:"阿什莫尔和卡捷群岛（澳大利亚）",iso_a2:"AU",iso_a3:"AUS",iso_n3:"036"},geometry:{type:"Polygon",coordinates:[[[123.594531,-12.425684],[123.572461,-12.423926],[123.573145,-12.43418],[123.594531,-12.425684]]]}},{type:"Feature",properties:{name:"亚美尼亚",full_name:"亚美尼亚共和国",iso_a2:"AM",iso_a3:"ARM",iso_n3:"051"},geometry:{type:"Polygon",coordinates:[[[44.768262,39.703516],[45.784473,39.545605],[46.114453,38.877783],[46.490625,38.906689],[46.481445,39.555176],[45.579785,39.977539],[45.964648,40.233789],[45.454395,40.532373],[45.5875,40.846924],[45.001367,41.290967],[43.439453,41.107129],[43.666211,40.126367],[44.768262,39.703516]]]}},{type:"Feature",properties:{name:"阿根廷",full_name:"阿根廷共和国",iso_a2:"AR",iso_a3:"ARG",iso_n3:"032"},geometry:{type:"MultiPolygon",coordinates:[[[[-57.608887,-30.187793],[-55.725488,-28.204102],[-53.838184,-27.121094],[-53.668555,-26.288184],[-53.891162,-25.668848],[-54.615869,-25.576074],[-54.825488,-26.652246],[-55.714648,-27.414844],[-56.164062,-27.321484],[-56.437158,-27.553809],[-58.604834,-27.314355],[-57.643896,-25.328418],[-59.89248,-24.093555],[-61.03291,-23.755664],[-62.650977,-22.233691],[-62.843359,-21.997266],[-63.92168,-22.028613],[-64.325293,-22.827637],[-64.605518,-22.228809],[-65.771045,-22.099609],[-66.220166,-21.802539],[-67.194873,-22.82168],[-67.008789,-23.001367],[-67.356201,-24.033789],[-68.562012,-24.747363],[-68.384229,-25.091895],[-68.591602,-26.47041],[-68.318652,-26.973242],[-68.846338,-27.153711],[-69.656934,-28.413574],[-70.026807,-29.324023],[-69.844287,-30.175],[-70.51958,-31.148438],[-70.084863,-33.201758],[-69.819629,-33.283789],[-69.852441,-34.224316],[-70.555176,-35.246875],[-70.404785,-36.061719],[-71.192187,-36.843652],[-70.858643,-38.604492],[-71.401562,-38.935059],[-71.932129,-40.691699],[-71.75,-42.046777],[-72.108203,-42.251855],[-72.146436,-42.990039],[-71.750635,-43.237305],[-71.82002,-44.383105],[-71.159717,-44.560254],[-71.261133,-44.763086],[-72.063721,-44.771875],[-71.349316,-45.331934],[-71.746191,-45.578906],[-71.699658,-46.651367],[-72.51792,-47.876367],[-72.354736,-48.36582],[-73.554199,-49.463867],[-73.50127,-50.125293],[-73.15293,-50.738281],[-72.340234,-50.681836],[-72.407666,-51.54082],[-71.918652,-51.989551],[-69.960254,-52.008203],[-68.443359,-52.356641],[-68.965332,-51.677148],[-69.46543,-51.584473],[-69.035303,-51.488965],[-69.358594,-51.028125],[-69.044775,-50.499121],[-68.421875,-50.15791],[-68.97959,-50.003027],[-68.667578,-49.752539],[-68.257227,-50.10459],[-67.825977,-49.919629],[-67.466309,-48.951758],[-65.810059,-47.941113],[-66.225244,-47.826758],[-65.738086,-47.344922],[-65.998535,-47.09375],[-66.776855,-47.005859],[-67.599561,-46.052539],[-66.941406,-45.257324],[-65.63877,-45.007812],[-65.252344,-43.571875],[-64.319141,-42.968945],[-64.970703,-42.666309],[-64.487842,-42.513477],[-64.034766,-42.88125],[-63.617334,-42.695801],[-63.795557,-42.113867],[-64.42041,-42.433789],[-64.986377,-42.102051],[-65.133398,-40.880664],[-64.869482,-40.73584],[-63.621777,-41.159766],[-62.39502,-40.89082],[-62.053662,-39.373828],[-62.334766,-38.800098],[-61.602539,-38.998828],[-59.82832,-38.838184],[-57.546973,-38.085645],[-56.672021,-36.85127],[-56.698096,-36.426465],[-57.335449,-36.026758],[-57.303662,-35.188477],[-58.28335,-34.683496],[-58.525488,-34.296191],[-58.39248,-34.192969],[-58.547217,-33.663477],[-58.424463,-33.111523],[-58.170996,-32.959277],[-58.201172,-32.47168],[-57.608887,-30.187793]]],[[[-68.653223,-54.853613],[-66.511133,-55.032129],[-65.179004,-54.678125],[-67.294238,-54.049805],[-68.488525,-53.260938],[-68.240137,-53.081836],[-68.629932,-52.652637],[-68.653223,-54.853613]]],[[[-64.54917,-54.716211],[-64.637354,-54.902539],[-63.81543,-54.725098],[-64.54917,-54.716211]]]]}},{type:"Feature",properties:{name:"安提瓜和巴布达",full_name:"安提瓜和巴布达",iso_a2:"AG",iso_a3:"ATG",iso_n3:"028"},geometry:{type:"Polygon",coordinates:[[[-61.716064,17.037012],[-61.817285,17.168945],[-61.887109,17.098145],[-61.716064,17.037012]]]}},{type:"Feature",properties:{name:"安哥拉",full_name:"安哥拉共和国",iso_a2:"AO",iso_a3:"AGO",iso_n3:"024"},geometry:{type:"MultiPolygon",coordinates:[[[[13.072754,-4.634766],[12.798242,-4.430566],[12.018359,-5.004297],[12.213672,-5.758691],[12.503711,-5.695801],[12.451465,-5.071484],[13.072754,-4.634766]]],[[[23.966504,-10.871777],[22.226172,-11.121973],[22.274512,-10.259082],[21.813184,-9.46875],[21.781641,-7.314648],[20.607813,-7.277734],[20.590039,-6.919922],[19.875195,-6.986328],[19.527637,-7.144434],[19.34082,-7.966602],[17.57959,-8.099023],[16.431445,-5.900195],[13.068164,-5.864844],[12.283301,-6.124316],[13.378516,-8.369727],[12.998535,-9.048047],[13.833594,-10.929688],[13.785352,-11.812793],[12.550488,-13.437793],[11.750879,-15.831934],[11.743066,-17.249219],[13.101172,-16.967676],[14.01748,-17.408887],[18.396387,-17.399414],[18.955273,-17.803516],[20.745508,-18.019727],[23.380664,-17.640625],[22.040234,-16.262793],[21.978906,-13.000977],[23.962988,-12.988477],[23.966504,-10.871777]]]]}},{type:"Feature",properties:{name:"安道尔",full_name:"安道尔公国",iso_a2:"AD",iso_a3:"AND",iso_n3:"020"},geometry:{type:"Polygon",coordinates:[[[1.706055,42.50332],[1.42832,42.595898],[1.448828,42.437451],[1.706055,42.50332]]]}},{type:"Feature",properties:{name:"阿尔及利亚",full_name:"阿尔及利亚民主人民共和国",iso_a2:"DZ",iso_a3:"DZA",iso_n3:"012"},geometry:{type:"Polygon",coordinates:[[[8.576563,36.937207],[6.486523,37.085742],[5.29541,36.648242],[4.758105,36.896338],[3.779004,36.896191],[1.257227,36.51958],[-.048242,35.832812],[-2.219629,35.104199],[-1.795605,34.751904],[-1.679199,33.318652],[-1.065527,32.468311],[-1.225928,32.107227],[-2.887207,32.068848],[-3.017383,31.834277],[-3.826758,31.661914],[-3.666797,30.964014],[-4.968262,30.465381],[-5.448779,29.956934],[-7.685156,29.349512],[-8.678418,28.689404],[-8.68335,27.656445],[-8.68335,27.285938],[-4.822607,24.995605],[1.145508,21.102246],[1.685449,20.378369],[3.130273,19.850195],[3.119727,19.103174],[4.227637,19.142773],[5.836621,19.47915],[7.481738,20.873096],[11.967871,23.517871],[11.507617,24.314355],[10.255859,24.591016],[9.448242,26.067139],[9.883203,26.630811],[9.916016,27.785693],[9.805273,29.176953],[9.310254,30.115234],[9.51875,30.229395],[9.044043,32.072363],[8.333398,32.543604],[7.500195,33.832471],[8.245605,34.734082],[8.207617,36.518945],[8.576563,36.937207]]]}},{type:"Feature",properties:{name:"阿尔巴尼亚",full_name:"阿尔巴尼亚共和国",iso_a2:"AL",iso_a3:"ALB",iso_n3:"008"},geometry:{type:"Polygon",coordinates:[[[19.342383,41.869092],[19.575684,41.64043],[19.322266,40.40708],[20.00127,39.709424],[20.657422,40.117383],[20.964258,40.849902],[20.488965,41.272607],[20.566211,41.873682],[20.063965,42.547266],[19.654492,42.628564],[19.342383,41.869092]]]}},{type:"Feature",properties:{name:"阿富汗",full_name:"阿富汗",iso_a2:"AF",iso_a3:"AFG",iso_n3:"004"},geometry:{type:"Polygon",coordinates:[[[66.522266,37.348486],[65.765039,37.569141],[65.55498,37.251172],[64.816309,37.13208],[64.511035,36.340674],[63.12998,35.846191],[63.056641,35.445801],[62.688086,35.255322],[62.307813,35.170801],[61.262012,35.61958],[60.72627,34.518262],[60.889453,34.319434],[60.485742,34.094775],[60.51084,33.638916],[60.916992,33.505225],[60.561914,33.058789],[60.820703,31.495166],[61.660156,31.382422],[61.81084,30.913281],[60.843359,29.858691],[62.476562,29.40835],[64.09873,29.391943],[66.23125,29.865723],[66.346875,30.802783],[66.829297,31.263672],[67.452832,31.234619],[68.161035,31.802979],[68.868945,31.634229],[69.279297,31.936816],[69.501562,33.020068],[70.261133,33.289014],[69.889648,34.007275],[71.051563,34.049707],[70.965625,34.530371],[71.620508,35.183008],[71.23291,36.121777],[72.249805,36.734717],[74.541406,37.022168],[74.372168,37.157715],[74.891309,37.231641],[74.349023,37.41875],[73.653516,37.239355],[73.720605,37.41875],[73.38291,37.462256],[71.665625,36.696924],[71.43291,37.127539],[71.582227,37.910107],[71.278516,37.918408],[71.255859,38.306982],[70.878906,38.456396],[70.214648,37.924414],[70.188672,37.582471],[69.49209,37.553076],[69.303906,37.116943],[68.911816,37.333936],[68.067773,36.949805],[67.758984,37.172217],[66.522266,37.348486]]]}},{type:"Feature",properties:{name:"锡亚琴冰川",full_name:"锡亚琴冰川",iso_a2:"-99",iso_a3:"-99",iso_n3:"-99"},geometry:{type:"Polygon",coordinates:[[[77.048633,35.109912],[77.799414,35.495898],[76.766895,35.661719],[77.048633,35.109912]]]}},{type:"Feature",properties:{name:"南极洲",full_name:"南极洲",iso_a2:"AQ",iso_a3:"ATA",iso_n3:"010"},geometry:{type:"MultiPolygon",coordinates:[[[[-57.020654,-63.372852],[-57.389648,-63.22627],[-58.87207,-63.551855],[-60.86416,-64.073438],[-61.631787,-64.604688],[-62.503467,-64.656445],[-63.059082,-65.139355],[-63.760254,-65.033496],[-63.818115,-65.531543],[-64.646582,-65.747852],[-64.613525,-66.019043],[-65.617285,-66.135254],[-65.766406,-66.624902],[-66.503613,-66.689844],[-66.498682,-67.289062],[-67.034473,-66.945117],[-67.493359,-67.112793],[-67.544531,-67.534668],[-66.677246,-67.560254],[-67.390527,-68.86123],[-66.974902,-69.161035],[-67.371777,-69.412305],[-68.707959,-69.432227],[-66.827734,-72.09043],[-68.000342,-72.935547],[-72.929199,-73.447949],[-73.996045,-73.699805],[-75.293066,-73.63877],[-77.048926,-73.844141],[-76.850488,-73.460449],[-78.78623,-73.506738],[-80.442236,-72.944531],[-80.336377,-73.41416],[-81.176416,-73.248828],[-81.30874,-73.738281],[-82.183496,-73.856836],[-85.801416,-73.19209],[-86.791016,-73.363672],[-88.419385,-73.229004],[-88.194092,-72.7875],[-88.77998,-72.683008],[-90.920947,-73.319141],[-92.828369,-73.164648],[-96.394238,-73.301172],[-98.208594,-73.022266],[-102.409277,-72.987402],[-102.855859,-72.716211],[-103.375,-72.818848],[-102.908789,-73.285156],[-98.896143,-73.611133],[-102.862744,-73.783594],[-101.251709,-74.485742],[-100.118604,-74.515039],[-100.47334,-74.872363],[-98.752344,-75.31709],[-101.039355,-75.421875],[-101.708105,-75.127344],[-103.121045,-75.095215],[-106.618848,-75.343945],[-111.358789,-75.219922],[-110.229785,-74.536328],[-111.180176,-74.188086],[-111.69624,-74.792188],[-114.110449,-74.981836],[-113.508496,-74.088867],[-114.62373,-73.90293],[-115.222607,-74.487402],[-118.655762,-74.392773],[-121.543945,-74.75],[-135.362061,-74.69043],[-136.649854,-75.161719],[-139.691162,-75.212793],[-141.22334,-75.545898],[-140.874316,-75.745898],[-142.329834,-75.490918],[-145.987744,-75.88877],[-145.44209,-76.40918],[-148.458984,-76.117969],[-149.654248,-76.365332],[-147.34043,-76.438379],[-145.750488,-76.749023],[-145.677148,-77.488086],[-148.572412,-77.105078],[-148.155713,-77.462305],[-149.717725,-77.797461],[-154.814941,-77.126953],[-158.213574,-77.157129],[-158.285889,-77.950781],[-157.266797,-78.199805],[-154.293018,-78.259082],[-156.114551,-78.744629],[-152.137695,-79.115918],[-148.176514,-79.775879],[-150.575391,-80.353711],[-148.023438,-80.835742],[-156.528223,-81.162305],[-157.03252,-81.319141],[-153.956641,-81.700195],[-153.009863,-82.449609],[-159.444385,-83.543164],[-174.235938,-82.793457],[-167.801221,-83.79082],[-164.950879,-83.805859],[-165.135352,-84.409863],[-156.986328,-84.811133],[-156.459131,-85.186035],[-171.703662,-84.542383],[-180,-84.351562],[-180,-85.05752],[-180,-85.763379],[-180,-86.469336],[-180,-87.175195],[-180,-87.881055],[-180,-88.587012],[-180,-89.292969],[-180,-89.58291],[-180,-89.998926],[-1.40625,-89.998926],[180,-89.998926],[180,-84.351562],[171.035742,-83.448438],[168.110059,-83.362012],[168.607324,-83.065332],[164.980078,-82.384961],[161.283203,-82.489941],[163.602344,-82.120605],[160.469824,-81.340625],[160.637305,-80.449902],[158.573633,-80.423438],[160.558789,-80.010547],[159.975879,-79.585645],[160.873535,-79.049707],[161.951465,-79.02998],[161.669238,-78.536133],[162.639453,-78.897754],[164.634766,-78.603223],[167.130273,-78.606152],[165.662988,-78.305664],[165.417578,-78.042188],[163.977637,-78.223828],[164.420898,-77.883496],[162.450293,-76.955664],[162.815723,-75.846191],[160.910742,-75.334668],[162.410059,-75.237598],[163.397852,-74.382129],[165.408594,-74.558594],[164.812988,-73.396777],[165.733691,-73.866699],[165.860156,-73.592676],[167.709082,-73.394238],[166.452832,-72.936035],[167.155664,-73.147266],[169.54502,-73.050391],[169.828613,-72.728809],[168.428418,-72.383398],[170.206445,-72.565332],[170.030078,-72.115527],[170.859082,-71.868555],[170.435742,-71.41875],[170.162305,-71.630469],[166.626953,-70.664258],[163.566504,-70.642285],[162.674805,-70.30459],[162.021973,-70.439844],[162.189453,-71.039551],[159.783984,-69.521875],[155.520313,-69.024414],[153.908008,-68.323145],[153.081836,-68.856836],[151.28877,-68.81709],[150.935938,-68.358496],[147.093652,-68.368652],[145.975195,-67.624219],[143.977344,-67.864551],[144.621191,-67.141406],[143.730371,-66.876758],[142.6875,-67.012793],[135.351953,-66.127148],[134.289453,-66.476758],[133.148242,-66.094824],[130.120508,-66.291504],[129.236914,-67.041602],[128.430566,-67.119141],[125.865625,-66.364453],[119.133008,-67.370703],[120.374805,-66.983789],[116.713477,-67.047168],[114.026563,-67.441211],[113.991211,-67.211914],[115.635352,-66.771191],[113.099414,-65.799902],[110.906738,-66.07666],[110.622266,-66.524023],[109.462793,-66.908691],[102.674219,-65.865137],[101.381348,-65.973047],[100.889063,-66.358008],[99.370117,-66.648242],[98.257617,-66.46748],[94.839844,-66.501367],[93.964258,-66.689648],[92.073438,-66.50791],[84.485156,-67.114453],[83.304297,-67.603027],[79.035156,-68.175391],[77.81748,-69.068945],[75.423828,-69.893066],[73.324805,-69.848926],[71.771387,-70.80127],[71.276758,-71.623926],[68.419824,-72.515039],[67.32207,-73.300293],[66.497656,-73.125488],[69.250195,-70.431055],[67.267969,-70.273145],[68.178125,-69.837305],[69.082617,-69.866602],[68.90625,-69.372754],[69.629492,-69.231641],[69.982227,-68.464258],[69.55918,-67.763184],[68.32793,-67.889551],[63.699023,-67.508301],[59.250781,-67.484961],[57.627441,-67.014063],[56.154883,-67.264551],[56.145898,-66.626074],[57.185449,-66.613281],[55.504492,-66.002637],[53.671777,-65.858691],[51.88457,-66.02002],[50.332422,-66.444629],[50.553027,-67.194336],[49.24707,-66.941602],[48.465234,-67.043457],[49.219336,-67.226855],[48.374512,-67.988086],[48.209961,-67.699316],[47.489844,-67.72793],[47.351562,-67.361914],[46.559668,-67.268164],[46.399023,-67.617578],[42.960938,-68.095312],[40.215625,-68.804883],[38.885547,-70.171875],[37.787109,-69.725684],[35.357031,-69.681348],[34.595898,-69.094531],[33.813672,-69.099316],[34.192871,-68.702441],[33.465625,-68.670703],[32.641602,-68.868945],[32.621289,-70.000586],[30.00332,-70.3],[26.498828,-71.019531],[24.756738,-70.89209],[24.024121,-70.413379],[23.149902,-70.796289],[22.44541,-70.739746],[21.70498,-70.258496],[21.070801,-70.843457],[19.651855,-70.920605],[19.009375,-70.212109],[18.124609,-70.540332],[16.381055,-70.145117],[13.822656,-70.343164],[13.065625,-70.053613],[11.70127,-70.766602],[9.141602,-70.183691],[8.523047,-70.473828],[7.676758,-70.356348],[2.609473,-70.900098],[-.543164,-71.712695],[-1.067773,-71.265625],[-6.11748,-71.325977],[-5.936328,-70.712695],[-7.752734,-70.842773],[-7.713721,-71.546484],[-8.497705,-71.674805],[-10.270605,-70.935742],[-10.825439,-71.55332],[-12.351318,-71.389746],[-11.009229,-71.75791],[-11.496973,-72.412891],[-13.208594,-72.785059],[-14.297754,-72.733008],[-14.164697,-73.102441],[-15.595996,-73.096777],[-16.435205,-73.425684],[-16.220117,-73.915723],[-14.573828,-73.9375],[-15.67251,-74.407324],[-17.43584,-74.379102],[-18.749219,-75.24209],[-18.30459,-75.431348],[-26.059326,-75.957227],[-34.075781,-77.425391],[-36.23916,-78.774219],[-32.994238,-79.228809],[-30.645264,-79.124121],[-29.949316,-79.599023],[-23.406836,-79.858984],[-31.01543,-80.308105],[-35.327002,-80.650684],[-37.209277,-81.063867],[-38.771729,-80.882324],[-41.125879,-81.214844],[-45.04375,-82.437988],[-46.516748,-82.45459],[-46.258057,-81.946973],[-48.360791,-81.892285],[-53.986084,-82.200586],[-59.516016,-83.458398],[-61.425293,-83.395605],[-62.735645,-82.527344],[-60.527734,-82.199902],[-64.91958,-82.370508],[-66.133838,-81.953418],[-62.490234,-81.556738],[-65.573682,-81.460547],[-70.687891,-80.62627],[-73.029492,-80.917285],[-75.075586,-80.860059],[-76.407324,-80.094922],[-79.6604,-79.996875],[-76.557861,-79.903516],[-76.217676,-79.387207],[-80.151172,-79.268066],[-80.891992,-79.501855],[-83.696631,-78.537305],[-83.779004,-77.983594],[-80.292285,-78.822754],[-77.54502,-78.65957],[-77.858105,-78.350977],[-81.580957,-77.846094],[-80.601562,-77.751953],[-74.812061,-78.177832],[-73.251562,-77.894238],[-72.851953,-77.590234],[-75.748145,-77.398438],[-77.190039,-76.629785],[-70.550781,-76.718066],[-63.363379,-75.451465],[-64.279541,-75.292871],[-63.231055,-75.153809],[-63.924707,-75.004492],[-63.178125,-74.68418],[-62.137793,-74.926367],[-62.235303,-74.441309],[-60.704297,-74.307129],[-61.842773,-74.289648],[-60.790283,-73.711816],[-62.008301,-73.147656],[-60.122217,-73.275293],[-60.009766,-72.937891],[-61.286133,-72.600781],[-60.719434,-72.072656],[-62.256641,-72.017578],[-60.949023,-71.747266],[-61.213574,-71.564062],[-61.958789,-71.657812],[-60.962256,-71.244629],[-62.04043,-70.801367],[-61.504687,-70.490527],[-62.377783,-70.364844],[-61.961084,-70.120117],[-63.747021,-68.70459],[-62.933301,-68.442578],[-63.924463,-68.497656],[-64.078467,-68.771191],[-65.15835,-68.617969],[-65.452002,-68.336719],[-64.829492,-68.127441],[-65.639502,-68.130566],[-65.503125,-67.377246],[-64.819287,-67.307324],[-64.686279,-66.80625],[-63.754736,-66.872949],[-63.752539,-66.277734],[-62.628906,-66.706152],[-62.682031,-66.237305],[-61.756006,-66.429199],[-61.431934,-66.144727],[-61.028418,-66.336523],[-60.618311,-65.933105],[-61.839062,-66.119531],[-62.293262,-65.916406],[-61.703125,-64.987207],[-61.059863,-64.98125],[-59.963086,-64.431348],[-59.645996,-64.583691],[-59.546777,-64.358789],[-58.786084,-64.524219],[-59.005322,-64.194922],[-57.460645,-63.513574],[-56.834766,-63.63125],[-57.020654,-63.372852]]],[[[-45.222656,-78.810742],[-43.947217,-78.597559],[-44.093994,-78.167285],[-45.993164,-77.826855],[-47.69209,-77.840137],[-50.14165,-78.556738],[-50.339258,-79.479492],[-52.297168,-80.141211],[-53.393896,-80.108789],[-54.1625,-80.870117],[-43.52793,-80.191406],[-43.544336,-78.901953],[-45.222656,-78.810742]]],[[[-59.733936,-80.344141],[-60.578809,-79.741016],[-61.633301,-80.344141],[-66.771143,-80.293848],[-60.582812,-80.948145],[-59.733936,-80.344141]]],[[[-70.051123,-69.189062],[-70.416992,-68.788965],[-72.137891,-69.114551],[-71.728516,-70.053711],[-69.618359,-70.398047],[-71.190039,-70.65957],[-69.875781,-70.875977],[-69.869775,-71.125684],[-70.380664,-70.946387],[-72.710449,-71.072949],[-72.21167,-71.335059],[-75.335449,-71.645215],[-73.995605,-72.169824],[-73.775977,-71.848926],[-72.927637,-71.92168],[-72.336621,-71.632227],[-70.820996,-71.906543],[-71.892188,-72.152832],[-70.206006,-72.227734],[-72.7375,-72.280566],[-72.36748,-72.669727],[-69.209326,-72.53418],[-68.241016,-71.822168],[-68.459473,-70.68291],[-70.051123,-69.189062]]],[[[-98.091113,-71.9125],[-98.61543,-71.76377],[-99.833203,-72.046094],[-100.218652,-71.83291],[-102.313623,-72.081055],[-98.407812,-72.547656],[-95.575391,-72.409961],[-95.6854,-72.056641],[-96.978906,-72.221875],[-96.38335,-71.836328],[-97.345215,-72.189062],[-97.584766,-71.882617],[-98.167969,-72.123047],[-98.091113,-71.9125]]],[[[-120.55625,-73.756055],[-123.112158,-73.682227],[-122.859082,-74.342676],[-121.002441,-74.326367],[-120.55625,-73.756055]]],[[[-126.329883,-73.28623],[-127.267627,-73.304004],[-127.211621,-73.724414],[-123.937402,-74.256152],[-124.128516,-73.833984],[-125.798584,-73.801953],[-125.263965,-73.666406],[-126.329883,-73.28623]]],[[[-159.05293,-79.807422],[-159.963525,-79.324316],[-163.256104,-78.72207],[-164.225781,-79.320801],[-159.05293,-79.807422]]],[[[167.084082,-77.32168],[166.506348,-77.189355],[166.729004,-77.850977],[169.352734,-77.524707],[167.084082,-77.32168]]],[[[-31.118848,-79.798438],[-31.68042,-79.634277],[-31.594238,-79.887695],[-29.614453,-79.90957],[-30.779932,-79.647363],[-31.118848,-79.798438]]],[[[-33.93418,-79.32041],[-35.534668,-79.090039],[-36.565967,-79.208789],[-33.93418,-79.32041]]],[[[-70.334082,-79.679883],[-67.038135,-78.315723],[-71.454004,-79.128906],[-71.68667,-79.568066],[-70.334082,-79.679883]]],[[[-57.845996,-64.053906],[-57.925684,-63.806055],[-58.424951,-64.067773],[-58.214062,-64.369727],[-57.294678,-64.366992],[-57.479736,-63.961621],[-57.845996,-64.053906]]],[[[-55.528027,-63.173535],[-56.462842,-63.418066],[-55.075195,-63.324316],[-55.528027,-63.173535]]],[[[-57.978418,-61.911914],[-59.003711,-62.209766],[-57.639551,-62.02041],[-57.978418,-61.911914]]],[[[-63.180566,-64.469531],[-63.485596,-64.260547],[-64.27207,-64.697559],[-63.739502,-64.834277],[-62.836523,-64.571875],[-63.180566,-64.469531]]],[[[-62.325781,-64.424414],[-62.058496,-64.138086],[-62.451416,-64.012402],[-62.781787,-64.479004],[-62.325781,-64.424414]]],[[[-67.988477,-67.474414],[-67.830518,-66.624316],[-69.120361,-67.57793],[-68.58042,-67.732813],[-67.988477,-67.474414]]],[[[-73.706641,-70.635156],[-74.400977,-70.575879],[-74.589697,-70.791992],[-74.953613,-70.590234],[-76.421484,-71.09043],[-74.205029,-70.924121],[-73.706641,-70.635156]]],[[[-74.987109,-69.727832],[-75.80415,-70.038184],[-74.848828,-70.179297],[-74.437988,-69.949609],[-74.987109,-69.727832]]],[[[-74.354443,-73.098438],[-75.376855,-72.82041],[-76.096387,-73.150488],[-74.574658,-73.611328],[-74.354443,-73.098438]]],[[[-91.160693,-73.182227],[-90.76333,-72.681055],[-91.303516,-72.547363],[-91.160693,-73.182227]]],[[[167.642773,-78.141406],[166.111133,-78.089648],[166.121875,-78.274609],[167.642773,-78.141406]]],[[[100.981445,-65.677539],[101.220605,-65.472266],[100.545117,-65.408984],[100.292578,-65.65127],[100.981445,-65.677539]]],[[[26.857227,-70.381152],[26.301074,-70.072461],[26.005371,-70.372949],[26.857227,-70.381152]]],[[[-66.173633,-80.077832],[-65.579248,-79.770801],[-67.687939,-79.528418],[-66.173633,-80.077832]]],[[[-67.261914,-79.452637],[-68.032568,-79.227148],[-68.548926,-79.437402],[-67.261914,-79.452637]]],[[[-55.16543,-61.22041],[-54.670996,-61.116992],[-55.387012,-61.072656],[-55.16543,-61.22041]]],[[[-61.997607,-69.721875],[-61.815967,-69.376172],[-62.442139,-69.145996],[-61.997607,-69.721875]]],[[[-60.625,-62.560059],[-61.149805,-62.63418],[-59.849561,-62.614941],[-60.625,-62.560059]]],[[[96.612695,-66.03584],[96.307031,-66.18584],[96.933984,-66.200781],[96.612695,-66.03584]]],[[[16.222656,-70.007617],[16.573438,-69.723242],[15.596875,-69.828027],[16.222656,-70.007617]]],[[[3.036914,-70.597363],[3.072168,-70.381641],[2.584668,-70.53457],[3.036914,-70.597363]]],[[[-2.532812,-70.767773],[-3.574658,-70.703125],[-2.783496,-71.16748],[-2.092285,-70.820898],[-2.532812,-70.767773]]],[[[-20.607422,-73.886621],[-20.580225,-73.619238],[-22.035352,-74.106543],[-20.489014,-74.492676],[-20.607422,-73.886621]]],[[[-67.348926,-67.766211],[-67.246729,-67.59873],[-67.743262,-67.66123],[-67.348926,-67.766211]]],[[[-116.738623,-74.165039],[-116.381299,-73.865527],[-117.376465,-74.082813],[-116.738623,-74.165039]]],[[[-131.066699,-74.583789],[-130.981104,-74.414062],[-132.162646,-74.425781],[-131.066699,-74.583789]]],[[[-149.230664,-77.120508],[-149.870605,-76.875],[-150.788525,-76.981641],[-149.230664,-77.120508]]]]}},{type:"Feature",properties:{name:"荷属圣马丁",full_name:"荷属圣马丁岛",iso_a2:"SX",iso_a3:"SXM",iso_n3:"534"},geometry:{type:"Polygon",coordinates:[[[-63.123047,18.068945],[-63.023047,18.019189],[-63.011182,18.068945],[-63.123047,18.068945]]]}},{type:"Feature",properties:{name:"图瓦卢",full_name:"图瓦卢",iso_a2:"TV",iso_a3:"TUV",iso_n3:"798"},geometry:{type:"Polygon",coordinates:[[[179.213672,-8.524219],[179.203027,-8.466309],[179.195703,-8.534766],[179.213672,-8.524219]]]}}],g2e={type:cV,features:hV},fV="modulepreload",dV=function(e){return"/"+e},FS={},pV=function(t,r,n){if(!r||r.length===0)return t();const u=document.getElementsByTagName("link");return Promise.all(r.map(h=>{if(h=dV(h),h in FS)return;FS[h]=!0;const p=h.endsWith(".css"),o=p?'[rel="stylesheet"]':"";if(!!n)for(let P=u.length-1;P>=0;P--){const S=u[P];if(S.href===h&&(!p||S.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${h}"]${o}`))return;const b=document.createElement("link");if(b.rel=p?"stylesheet":fV,p||(b.as="script",b.crossOrigin=""),b.href=h,document.head.appendChild(b),p)return new Promise((P,S)=>{b.addEventListener("load",P),b.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${h}`)))})})).then(()=>t()).catch(h=>{const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=h,window.dispatchEvent(p),!p.defaultPrevented)throw h})};var BO={exports:{}};(function(e){function t(b){if(b=Object.assign({},b),!(this instanceof t))throw new Error("MapboxLanguage needs to be called with the new keyword");this.setLanguage=this.setLanguage.bind(this),this._initialStyleUpdate=this._initialStyleUpdate.bind(this),this._defaultLanguage=b.defaultLanguage,this._isLanguageField=b.languageField||/^name_/,this._getLanguageField=b.getLanguageField||function(S){return S==="mul"?"name":`name_${S}`},this._languageSource=b.languageSource||null,this._languageTransform=b.languageTransform,this._excludedLayerIds=b.excludedLayerIds||[],this.supportedLanguages=b.supportedLanguages||["ar","de","en","es","fr","it","ja","ko","mul","pt","ru","vi","zh-Hans","zh-Hant"]}const r=/^\{name/;function n(b,P){const S=Array.isArray(P)&&P[0]==="get";return S&&r.test(P[1])&&console.warn("This plugin no longer supports the use of token syntax (e.g. {name}). Please use a get expression. See https://docs.mapbox.com/mapbox-gl-js/style-spec/expressions/ for more details."),S&&b.test(P[1])}function u(b,P,S){if(Array.isArray(P))for(let C=1;C<P.length;C++)Array.isArray(P[C])&&(n(b,P[C])&&(P[C][1]=S),u(b,P[C],S))}function h(b,P,S){if(n(b,P)&&(P[1]=S),u(b,P,S),P[0]==="get"&&P[1]==="name"){const C=P.slice();P=["coalesce",["get",S],C]}return P}function p(b,P,S,C){return P.layout&&P.layout["text-field"]&&C.indexOf(P.id)===-1?Object.assign({},P,{layout:Object.assign({},P.layout,{"text-field":h(b,P.layout["text-field"],S)})}):P}function o(b){const P=Object.keys(b.sources).filter(S=>{const C=b.sources[S].url;return C&&C.indexOf("mapbox.mapbox-streets-v8")>-1||/mapbox-streets-v[1-9][1-9]/.test(C)});if(!P.length)throw new Error('If using MapboxLanguage with a Mapbox style, the style must be based on vector tile version 8, e.g. "streets-v11"');return P[0]}t.prototype.setLanguage=function(b,P){if(this.supportedLanguages.indexOf(P)<0)throw new Error(`Language ${P} is not supported`);const S=this._languageSource||o(b);if(!S)return b;const C=this._getLanguageField(P),L=this._isLanguageField,F=this._excludedLayerIds,j=b.layers.map($=>$.source===S?p(L,$,C,F):$),G=Object.assign({},b,{layers:j});return this._languageTransform?this._languageTransform(G,P):G},t.prototype._initialStyleUpdate=function(){const b=this._map.getStyle(),P=this._defaultLanguage||_(this.supportedLanguages);this._map.setStyle(this.setLanguage(b,P))};function _(b){const P=navigator.languages?navigator.languages[0]:navigator.language||navigator.userLanguage,S=P&&P.split("-");let C=P;return S.length>1&&(C=S[0]),b.indexOf(C)>-1?C:null}t.prototype.onAdd=function(b){return this._map=b,this._map.on("style.load",this._initialStyleUpdate),this._container=document.createElement("div"),this._container},t.prototype.onRemove=function(){this._map.off("style.load",this._initialStyleUpdate),this._map=void 0},e.exports=t})(BO);var mV=BO.exports;const y2e=Br(mV),gV=Pe.createContext(null);function yV(e,t){const r=Array.isArray(e)?e[0]:e?e.x:0,n=Array.isArray(e)?e[1]:e?e.y:0,u=Array.isArray(t)?t[0]:t?t.x:0,h=Array.isArray(t)?t[1]:t?t.y:0;return r===u&&n===h}function Xo(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!Xo(e[r],t[r]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(const u of r)if(!t.hasOwnProperty(u)||!Xo(e[u],t[u]))return!1;return!0}return!1}function _V(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}function jS(e,t){if(!e.getProjection)return;const r=e.getProjection(),n=t.getProjection();Xo(r,n)||t.setProjection(r)}function $S(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function NS(e,t){const r=t.viewState||t;let n=!1;if("zoom"in r){const u=e.zoom;e.zoom=r.zoom,n=n||u!==e.zoom}if("bearing"in r){const u=e.bearing;e.bearing=r.bearing,n=n||u!==e.bearing}if("pitch"in r){const u=e.pitch;e.pitch=r.pitch,n=n||u!==e.pitch}if(r.padding&&!e.isPaddingEqual(r.padding)&&(n=!0,e.padding=r.padding),"longitude"in r&&"latitude"in r){const u=e.center;e.center=new u.constructor(r.longitude,r.latitude),n=n||u!==e.center}return n}const vV=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function US(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const n of e.layers)t[n.id]=n;const r=e.layers.map(n=>{let u=null;"interactive"in n&&(u=Object.assign({},n),delete u.interactive);const h=t[n.ref];if(h){u=u||Object.assign({},n),delete u.ref;for(const p of vV)p in h&&(u[p]=h[p])}return u||n});return{...e,layers:r}}const VS={version:8,sources:{},layers:[]},GS={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},J8={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},WS={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},xV=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],bV=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class nf{constructor(t,r,n){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=u=>{const h=this.props[WS[u.type]];h?h(u):u.type==="error"&&console.error(u.error)},this._onPointerEvent=u=>{(u.type==="mousemove"||u.type==="mouseout")&&this._updateHover(u);const h=this.props[GS[u.type]];h&&(this.props.interactiveLayerIds&&u.type!=="mouseover"&&u.type!=="mouseout"&&(u.features=this._hoveredFeatures||this._queryRenderedFeatures(u.point)),h(u),delete u.features)},this._onCameraEvent=u=>{if(!this._internalUpdate){const h=this.props[J8[u.type]];h&&h(u)}u.type in this._deferredEvents&&(this._deferredEvents[u.type]=!1)},this._MapClass=t,this.props=r,this._initialize(n)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const r=this.props;this.props=t;const n=this._updateSettings(t,r);n&&this._createShadowTransform(this._map);const u=this._updateSize(t),h=this._updateViewState(t,!0);this._updateStyle(t,r),this._updateStyleComponents(t,r),this._updateHandlers(t,r),(n||u||h&&!this._map.isMoving())&&this.redraw()}static reuse(t,r){const n=nf.savedMaps.pop();if(!n)return null;const u=n.map,h=u.getContainer();for(r.className=h.className;h.childNodes.length>0;)r.appendChild(h.childNodes[0]);u._container=r;const p=u._resizeObserver;p&&(p.disconnect(),p.observe(r)),n.setProps({...t,styleDiffing:!1}),u.resize();const{initialViewState:o}=t;return o&&(o.bounds?u.fitBounds(o.bounds,{...o.fitBoundsOptions,duration:0}):n._updateViewState(o,!1)),u.isStyleLoaded()?u.fire("load"):u.once("styledata",()=>u.fire("load")),u._update(),n}_initialize(t){const{props:r}=this,{mapStyle:n=VS}=r,u={...r,...r.initialViewState,accessToken:r.mapboxAccessToken||wV()||null,container:t,style:US(n)},h=u.initialViewState||u.viewState||u;if(Object.assign(u,{center:[h.longitude||0,h.latitude||0],zoom:h.zoom||0,pitch:h.pitch||0,bearing:h.bearing||0}),r.gl){const P=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=P,r.gl)}const p=new this._MapClass(u);h.padding&&p.setPadding(h.padding),r.cursor&&(p.getCanvas().style.cursor=r.cursor),this._createShadowTransform(p);const o=p._render;p._render=P=>{this._inRender=!0,o.call(p,P),this._inRender=!1};const _=p._renderTaskQueue.run;p._renderTaskQueue.run=P=>{_.call(p._renderTaskQueue,P),this._onBeforeRepaint()},p.on("render",()=>this._onAfterRepaint());const b=p.fire;p.fire=this._fireEvent.bind(this,b),p.on("resize",()=>{this._renderTransform.resize(p.transform.width,p.transform.height)}),p.on("styledata",()=>{this._updateStyleComponents(this.props,{}),jS(p.transform,this._renderTransform)}),p.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const P in GS)p.on(P,this._onPointerEvent);for(const P in J8)p.on(P,this._onCameraEvent);for(const P in WS)p.on(P,this._onEvent);this._map=p}recycle(){const r=this.map.getContainer().querySelector("[mapboxgl-children]");r==null||r.remove(),nf.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_createShadowTransform(t){const r=_V(t.transform);t.painter.transform=r,this._renderTransform=r}_updateSize(t){const{viewState:r}=t;if(r){const n=this._map;if(r.width!==n.transform.width||r.height!==n.transform.height)return n.resize(),!0}return!1}_updateViewState(t,r){if(this._internalUpdate)return!1;const n=this._map,u=this._renderTransform,{zoom:h,pitch:p,bearing:o}=u,_=n.isMoving();_&&(u.cameraElevationReference="sea");const b=NS(u,{...$S(n.transform),...t});if(_&&(u.cameraElevationReference="ground"),b&&r){const P=this._deferredEvents;P.move=!0,P.zoom||(P.zoom=h!==u.zoom),P.rotate||(P.rotate=o!==u.bearing),P.pitch||(P.pitch=p!==u.pitch)}return _||NS(n.transform,t),b}_updateSettings(t,r){const n=this._map;let u=!1;for(const h of xV)if(h in t&&!Xo(t[h],r[h])){u=!0;const p=n[`set${h[0].toUpperCase()}${h.slice(1)}`];p==null||p.call(n,t[h])}return u}_updateStyle(t,r){if(t.cursor!==r.cursor&&(this._map.getCanvas().style.cursor=t.cursor||""),t.mapStyle!==r.mapStyle){const{mapStyle:n=VS,styleDiffing:u=!0}=t,h={diff:u};return"localIdeographFontFamily"in t&&(h.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(US(n),h),!0}return!1}_updateStyleComponents(t,r){const n=this._map;let u=!1;return n.isStyleLoaded()&&("light"in t&&n.setLight&&!Xo(t.light,r.light)&&(u=!0,n.setLight(t.light)),"fog"in t&&n.setFog&&!Xo(t.fog,r.fog)&&(u=!0,n.setFog(t.fog)),"terrain"in t&&n.setTerrain&&!Xo(t.terrain,r.terrain)&&(!t.terrain||n.getSource(t.terrain.source))&&(u=!0,n.setTerrain(t.terrain))),u}_updateHandlers(t,r){var n,u;const h=this._map;let p=!1;for(const o of bV){const _=(n=t[o])!==null&&n!==void 0?n:!0,b=(u=r[o])!==null&&u!==void 0?u:!0;Xo(_,b)||(p=!0,_?h[o].enable(_):h[o].disable())}return p}_queryRenderedFeatures(t){const r=this._map,n=r.transform,{interactiveLayerIds:u=[]}=this.props;try{return r.transform=this._renderTransform,r.queryRenderedFeatures(t,{layers:u.filter(r.getLayer.bind(r))})}catch{return[]}finally{r.transform=n}}_updateHover(t){var r;const{props:n}=this;if(n.interactiveLayerIds&&(n.onMouseMove||n.onMouseEnter||n.onMouseLeave)){const h=t.type,p=((r=this._hoveredFeatures)===null||r===void 0?void 0:r.length)>0,o=this._queryRenderedFeatures(t.point),_=o.length>0;!_&&p&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=o,_&&!p&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=h}else this._hoveredFeatures=null}_fireEvent(t,r,n){const u=this._map,h=u.transform,p=typeof r=="string"?r:r.type;return p==="move"&&this._updateViewState(this.props,!1),p in J8&&(typeof r=="object"&&(r.viewState=$S(h)),this._map.isMoving())?(u.transform=this._renderTransform,t.call(u,r,n),u.transform=h,u):(t.call(u,r,n),u)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const n in this._deferredEvents)this._deferredEvents[n]&&t.fire(n);this._internalUpdate=!1;const r=this._map.transform;t.transform=this._renderTransform,this._onAfterRepaint=()=>{jS(this._renderTransform,r),t.transform=r}}}nf.savedMaps=[];function wV(){let e=null;if(typeof location<"u"){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||{}.MapboxAccessToken}catch{}try{e=e||{}.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}const TV=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function SV(e){if(!e)return null;const t=e.map,r={getMap:()=>t,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:n=>{const u=t.transform;t.transform=e.transform;const h=t.project(n);return t.transform=u,h},unproject:n=>{const u=t.transform;t.transform=e.transform;const h=t.unproject(n);return t.transform=u,h},queryTerrainElevation:(n,u)=>{const h=t.transform;t.transform=e.transform;const p=t.queryTerrainElevation(n,u);return t.transform=h,p},queryRenderedFeatures:(n,u)=>{const h=t.transform;t.transform=e.transform;const p=t.queryRenderedFeatures(n,u);return t.transform=h,p}};for(const n of EV(t))!(n in r)&&!TV.includes(n)&&(r[n]=t[n].bind(t));return r}function EV(e){const t=new Set;let r=e;for(;r;){for(const n of Object.getOwnPropertyNames(r))n[0]!=="_"&&typeof e[n]=="function"&&n!=="fire"&&n!=="setEventedParent"&&t.add(n);r=Object.getPrototypeOf(r)}return Array.from(t)}const PV=typeof document<"u"?Pe.useLayoutEffect:Pe.useEffect,AV=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function MV(e,t){for(const n of AV)n in t&&(e[n]=t[n]);const{RTLTextPlugin:r="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=t;r&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(r,n=>{n&&console.error(n)},!0)}const If=Pe.createContext(null);function CV(e,t,r){const n=Pe.useContext(gV),[u,h]=Pe.useState(null),p=Pe.useRef(),{current:o}=Pe.useRef({mapLib:null,map:null});Pe.useEffect(()=>{const P=e.mapLib;let S=!0,C;return Promise.resolve(P||r).then(L=>{if(!S)return;if(!L)throw new Error("Invalid mapLib");const F="Map"in L?L:L.default;if(!F.Map)throw new Error("Invalid mapLib");if(MV(F,e),!F.supported||F.supported(e))e.reuseMaps&&(C=nf.reuse(e,p.current)),C||(C=new nf(F.Map,e,p.current)),o.map=SV(C),o.mapLib=F,h(C),n==null||n.onMapMount(o.map,e.id);else throw new Error("Map is not supported by this browser")}).catch(L=>{const{onError:F}=e;F?F({type:"error",target:null,originalEvent:null,error:L}):console.error(L)}),()=>{S=!1,C&&(n==null||n.onMapUnmount(e.id),e.reuseMaps?C.recycle():C.destroy())}},[]),PV(()=>{u&&u.setProps(e)}),Pe.useImperativeHandle(t,()=>o.map,[u]);const _=Pe.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]),b={height:"100%"};return Pe.createElement("div",{id:e.id,ref:p,style:_},u&&Pe.createElement(If.Provider,{value:o},Pe.createElement("div",{"mapboxgl-children":"",style:b},e.children)))}const IV=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function i1(e,t){if(!e||!t)return;const r=e.style;for(const n in t){const u=t[n];Number.isFinite(u)&&!IV.test(n)?r[n]=`${u}px`:r[n]=u}}function OV(e,t){const{map:r,mapLib:n}=Pe.useContext(If),u=Pe.useRef({props:e});u.current.props=e;const h=Pe.useMemo(()=>{let j=!1;Pe.Children.forEach(e.children,N=>{N&&(j=!0)});const G={...e,element:j?document.createElement("div"):null},$=new n.Marker(G);return $.setLngLat([e.longitude,e.latitude]),$.getElement().addEventListener("click",N=>{var U,J;(J=(U=u.current.props).onClick)===null||J===void 0||J.call(U,{type:"click",target:$,originalEvent:N})}),$.on("dragstart",N=>{var U,J;const q=N;q.lngLat=h.getLngLat(),(J=(U=u.current.props).onDragStart)===null||J===void 0||J.call(U,q)}),$.on("drag",N=>{var U,J;const q=N;q.lngLat=h.getLngLat(),(J=(U=u.current.props).onDrag)===null||J===void 0||J.call(U,q)}),$.on("dragend",N=>{var U,J;const q=N;q.lngLat=h.getLngLat(),(J=(U=u.current.props).onDragEnd)===null||J===void 0||J.call(U,q)}),$},[]);Pe.useEffect(()=>(h.addTo(r.getMap()),()=>{h.remove()}),[]);const{longitude:p,latitude:o,offset:_,style:b,draggable:P=!1,popup:S=null,rotation:C=0,rotationAlignment:L="auto",pitchAlignment:F="auto"}=e;return Pe.useEffect(()=>{i1(h.getElement(),b)},[b]),Pe.useImperativeHandle(t,()=>h,[]),(h.getLngLat().lng!==p||h.getLngLat().lat!==o)&&h.setLngLat([p,o]),_&&!yV(h.getOffset(),_)&&h.setOffset(_),h.isDraggable()!==P&&h.setDraggable(P),h.getRotation()!==C&&h.setRotation(C),h.getRotationAlignment()!==L&&h.setRotationAlignment(L),h.getPitchAlignment()!==F&&h.setPitchAlignment(F),h.getPopup()!==S&&h.setPopup(S),_2.createPortal(e.children,h.getElement())}const kV=Pe.memo(Pe.forwardRef(OV));function qS(e){return new Set(e?e.trim().split(/\s+/):[])}function DV(e,t){const{map:r,mapLib:n}=Pe.useContext(If),u=Pe.useMemo(()=>document.createElement("div"),[]),h=Pe.useRef({props:e});h.current.props=e;const p=Pe.useMemo(()=>{const o={...e},_=new n.Popup(o);return _.setLngLat([e.longitude,e.latitude]),_.once("open",b=>{var P,S;(S=(P=h.current.props).onOpen)===null||S===void 0||S.call(P,b)}),_},[]);if(Pe.useEffect(()=>{const o=_=>{var b,P;(P=(b=h.current.props).onClose)===null||P===void 0||P.call(b,_)};return p.on("close",o),p.setDOMContent(u).addTo(r.getMap()),()=>{p.off("close",o),p.isOpen()&&p.remove()}},[]),Pe.useEffect(()=>{i1(p.getElement(),e.style)},[e.style]),Pe.useImperativeHandle(t,()=>p,[]),p.isOpen()&&((p.getLngLat().lng!==e.longitude||p.getLngLat().lat!==e.latitude)&&p.setLngLat([e.longitude,e.latitude]),e.offset&&!Xo(p.options.offset,e.offset)&&p.setOffset(e.offset),(p.options.anchor!==e.anchor||p.options.maxWidth!==e.maxWidth)&&(p.options.anchor=e.anchor,p.setMaxWidth(e.maxWidth)),p.options.className!==e.className)){const o=qS(p.options.className),_=qS(e.className);for(const b of o)_.has(b)||p.removeClassName(b);for(const b of _)o.has(b)||p.addClassName(b);p.options.className=e.className}return _2.createPortal(e.children,u)}Pe.memo(Pe.forwardRef(DV));function x2(e,t,r,n){const u=Pe.useContext(If),h=Pe.useMemo(()=>e(u),[]);return Pe.useEffect(()=>{const p=n||r||t,o=typeof t=="function"&&typeof r=="function"?t:null,_=typeof r=="function"?r:typeof t=="function"?t:null,{map:b}=u;return b.hasControl(h)||(b.addControl(h,p==null?void 0:p.position),o&&o(u)),()=>{_&&_(u),b.hasControl(h)&&b.removeControl(h)}},[]),h}function LV(e){const t=x2(({mapLib:r})=>new r.AttributionControl(e),{position:e.position});return Pe.useEffect(()=>{i1(t._container,e.style)},[e.style]),null}Pe.memo(LV);function zV(e){const t=x2(({mapLib:r})=>new r.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return Pe.useEffect(()=>{i1(t._controlContainer,e.style)},[e.style]),null}const RV=Pe.memo(zV);function BV(e,t){const r=Pe.useRef({props:e}),n=x2(({mapLib:u})=>{const h=new u.GeolocateControl(e),p=h._setupUI;return h._setupUI=o=>{h._container.hasChildNodes()||p(o)},h.on("geolocate",o=>{var _,b;(b=(_=r.current.props).onGeolocate)===null||b===void 0||b.call(_,o)}),h.on("error",o=>{var _,b;(b=(_=r.current.props).onError)===null||b===void 0||b.call(_,o)}),h.on("outofmaxbounds",o=>{var _,b;(b=(_=r.current.props).onOutOfMaxBounds)===null||b===void 0||b.call(_,o)}),h.on("trackuserlocationstart",o=>{var _,b;(b=(_=r.current.props).onTrackUserLocationStart)===null||b===void 0||b.call(_,o)}),h.on("trackuserlocationend",o=>{var _,b;(b=(_=r.current.props).onTrackUserLocationEnd)===null||b===void 0||b.call(_,o)}),h},{position:e.position});return r.current.props=e,Pe.useImperativeHandle(t,()=>n,[]),Pe.useEffect(()=>{i1(n._container,e.style)},[e.style]),null}Pe.memo(Pe.forwardRef(BV));function FV(e){const t=x2(({mapLib:r})=>new r.NavigationControl(e),{position:e.position});return Pe.useEffect(()=>{i1(t._container,e.style)},[e.style]),null}const jV=Pe.memo(FV);function $V(e){const t=x2(({mapLib:h})=>new h.ScaleControl(e),{position:e.position}),r=Pe.useRef(e),n=r.current;r.current=e;const{style:u}=e;return e.maxWidth!==void 0&&e.maxWidth!==n.maxWidth&&(t.options.maxWidth=e.maxWidth),e.unit!==void 0&&e.unit!==n.unit&&t.setUnit(e.unit),Pe.useEffect(()=>{i1(t._container,u)},[u]),null}Pe.memo($V);function O4(e,t){if(!e)throw new Error(t)}function NV(e,t,r,n){if(O4(r.id===n.id,"layer id changed"),O4(r.type===n.type,"layer type changed"),r.type==="custom"||n.type==="custom")return;const{layout:u={},paint:h={},filter:p,minzoom:o,maxzoom:_,beforeId:b}=r;if(b!==n.beforeId&&e.moveLayer(t,b),u!==n.layout){const P=n.layout||{};for(const S in u)Xo(u[S],P[S])||e.setLayoutProperty(t,S,u[S]);for(const S in P)u.hasOwnProperty(S)||e.setLayoutProperty(t,S,void 0)}if(h!==n.paint){const P=n.paint||{};for(const S in h)Xo(h[S],P[S])||e.setPaintProperty(t,S,h[S]);for(const S in P)h.hasOwnProperty(S)||e.setPaintProperty(t,S,void 0)}Xo(p,n.filter)||e.setFilter(t,p),(o!==n.minzoom||_!==n.maxzoom)&&e.setLayerZoomRange(t,o,_)}function UV(e,t,r){if(e.style&&e.style._loaded&&(!("source"in r)||e.getSource(r.source))){const n={...r,id:t};delete n.beforeId,e.addLayer(n,r.beforeId)}}let VV=0;function GV(e){const t=Pe.useContext(If).map.getMap(),r=Pe.useRef(e),[,n]=Pe.useState(0),u=Pe.useMemo(()=>e.id||`jsx-layer-${VV++}`,[]);if(Pe.useEffect(()=>{if(t){const p=()=>n(o=>o+1);return t.on("styledata",p),p(),()=>{t.off("styledata",p),t.style&&t.style._loaded&&t.getLayer(u)&&t.removeLayer(u)}}},[t]),t&&t.style&&t.getLayer(u))try{NV(t,u,e,r.current)}catch(p){console.warn(p)}else UV(t,u,e);return r.current=e,null}let WV=0;function qV(e,t,r){if(e.style&&e.style._loaded){const n={...r};return delete n.id,delete n.children,e.addSource(t,n),e.getSource(t)}return null}function HV(e,t,r){O4(t.id===r.id,"source id changed"),O4(t.type===r.type,"source type changed");let n="",u=0;for(const p in t)p!=="children"&&p!=="id"&&!Xo(r[p],t[p])&&(n=p,u++);if(!u)return;const h=t.type;h==="geojson"?e.setData(t.data):h==="image"?e.updateImage({url:t.url,coordinates:t.coordinates}):"setCoordinates"in e&&u===1&&n==="coordinates"?e.setCoordinates(t.coordinates):"setUrl"in e&&n==="url"?e.setUrl(t.url):"setTiles"in e&&n==="tiles"?e.setTiles(t.tiles):console.warn(`Unable to update <Source> prop: ${n}`)}function ZV(e){const t=Pe.useContext(If).map.getMap(),r=Pe.useRef(e),[,n]=Pe.useState(0),u=Pe.useMemo(()=>e.id||`jsx-source-${WV++}`,[]);Pe.useEffect(()=>{if(t){const p=()=>setTimeout(()=>n(o=>o+1),0);return t.on("styledata",p),p(),()=>{var o;if(t.off("styledata",p),t.style&&t.style._loaded&&t.getSource(u)){const _=(o=t.getStyle())===null||o===void 0?void 0:o.layers;if(_)for(const b of _)b.source===u&&t.removeLayer(b.id);t.removeSource(u)}}}},[t]);let h=t&&t.style&&t.getSource(u);return h?HV(h,e,r.current):h=qV(t,u,e),r.current=e,h&&Pe.Children.map(e.children,p=>p&&Pe.cloneElement(p,{source:u}))||null}const XV=pV(()=>Promise.resolve().then(()=>u2e),void 0),_2e=(()=>Pe.forwardRef(function(t,r){return CV(t,r,XV)}))(),v2e=kV,x2e=RV,b2e=jV,w2e=GV,T2e=ZV;var KV={},FO={},jO={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=function(){for(var u=arguments.length,h=new Array(u),p=0;p<u;p++)h[p]=arguments[p];if(typeof window<"u"){var o;typeof window.gtag>"u"&&(window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)}),(o=window).gtag.apply(o,h)}},r=t;e.default=r})(jO);var $O={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=p;var t=/^(a|an|and|as|at|but|by|en|for|if|in|nor|of|on|or|per|the|to|vs?\.?|via)$/i;function r(o){return o.toString().trim().replace(/[A-Za-z0-9\u00C0-\u00FF]+[^\s-]*/g,function(_,b,P){return b>0&&b+_.length!==P.length&&_.search(t)>-1&&P.charAt(b-2)!==":"&&(P.charAt(b+_.length)!=="-"||P.charAt(b-1)==="-")&&P.charAt(b-1).search(/[^\s-]/)<0?_.toLowerCase():_.substr(1).search(/[A-Z]|\../)>-1?_:_.charAt(0).toUpperCase()+_.substr(1)})}function n(o){return typeof o=="string"&&o.indexOf("@")!==-1}var u="REDACTED (Potential Email Address)";function h(o){return n(o)?(console.warn("This arg looks like an email address, redacting."),u):o}function p(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",_=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,P=o||"";return _&&(P=r(o)),b&&(P=h(P)),P}})($O);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.GA4=void 0;var t=p(jO),r=p($O),n=["eventCategory","eventAction","eventLabel","eventValue","hitType"],u=["title","location"],h=["page","hitType"];function p(we){return we&&we.__esModule?we:{default:we}}function o(we,ve){if(we==null)return{};var Ce=_(we,ve),Le,ge;if(Object.getOwnPropertySymbols){var $e=Object.getOwnPropertySymbols(we);for(ge=0;ge<$e.length;ge++)Le=$e[ge],!(ve.indexOf(Le)>=0)&&Object.prototype.propertyIsEnumerable.call(we,Le)&&(Ce[Le]=we[Le])}return Ce}function _(we,ve){if(we==null)return{};var Ce={},Le=Object.keys(we),ge,$e;for($e=0;$e<Le.length;$e++)ge=Le[$e],!(ve.indexOf(ge)>=0)&&(Ce[ge]=we[ge]);return Ce}function b(we){"@babel/helpers - typeof";return b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ve){return typeof ve}:function(ve){return ve&&typeof Symbol=="function"&&ve.constructor===Symbol&&ve!==Symbol.prototype?"symbol":typeof ve},b(we)}function P(we){return L(we)||C(we)||N(we)||S()}function S(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function C(we){if(typeof Symbol<"u"&&we[Symbol.iterator]!=null||we["@@iterator"]!=null)return Array.from(we)}function L(we){if(Array.isArray(we))return U(we)}function F(we,ve){var Ce=Object.keys(we);if(Object.getOwnPropertySymbols){var Le=Object.getOwnPropertySymbols(we);ve&&(Le=Le.filter(function(ge){return Object.getOwnPropertyDescriptor(we,ge).enumerable})),Ce.push.apply(Ce,Le)}return Ce}function j(we){for(var ve=1;ve<arguments.length;ve++){var Ce=arguments[ve]!=null?arguments[ve]:{};ve%2?F(Object(Ce),!0).forEach(function(Le){oe(we,Le,Ce[Le])}):Object.getOwnPropertyDescriptors?Object.defineProperties(we,Object.getOwnPropertyDescriptors(Ce)):F(Object(Ce)).forEach(function(Le){Object.defineProperty(we,Le,Object.getOwnPropertyDescriptor(Ce,Le))})}return we}function G(we,ve){return q(we)||J(we,ve)||N(we,ve)||$()}function $(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function N(we,ve){if(we){if(typeof we=="string")return U(we,ve);var Ce=Object.prototype.toString.call(we).slice(8,-1);if(Ce==="Object"&&we.constructor&&(Ce=we.constructor.name),Ce==="Map"||Ce==="Set")return Array.from(we);if(Ce==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ce))return U(we,ve)}}function U(we,ve){(ve==null||ve>we.length)&&(ve=we.length);for(var Ce=0,Le=new Array(ve);Ce<ve;Ce++)Le[Ce]=we[Ce];return Le}function J(we,ve){var Ce=we==null?null:typeof Symbol<"u"&&we[Symbol.iterator]||we["@@iterator"];if(Ce!=null){var Le,ge,$e,rt,ft=[],lt=!0,Tt=!1;try{if($e=(Ce=Ce.call(we)).next,ve===0){if(Object(Ce)!==Ce)return;lt=!1}else for(;!(lt=(Le=$e.call(Ce)).done)&&(ft.push(Le.value),ft.length!==ve);lt=!0);}catch(qt){Tt=!0,ge=qt}finally{try{if(!lt&&Ce.return!=null&&(rt=Ce.return(),Object(rt)!==rt))return}finally{if(Tt)throw ge}}return ft}}function q(we){if(Array.isArray(we))return we}function Y(we,ve){if(!(we instanceof ve))throw new TypeError("Cannot call a class as a function")}function X(we,ve){for(var Ce=0;Ce<ve.length;Ce++){var Le=ve[Ce];Le.enumerable=Le.enumerable||!1,Le.configurable=!0,"value"in Le&&(Le.writable=!0),Object.defineProperty(we,Re(Le.key),Le)}}function ue(we,ve,Ce){return ve&&X(we.prototype,ve),Ce&&X(we,Ce),Object.defineProperty(we,"prototype",{writable:!1}),we}function oe(we,ve,Ce){return ve=Re(ve),ve in we?Object.defineProperty(we,ve,{value:Ce,enumerable:!0,configurable:!0,writable:!0}):we[ve]=Ce,we}function Re(we){var ve=ze(we,"string");return b(ve)==="symbol"?ve:String(ve)}function ze(we,ve){if(b(we)!=="object"||we===null)return we;var Ce=we[Symbol.toPrimitive];if(Ce!==void 0){var Le=Ce.call(we,ve||"default");if(b(Le)!=="object")return Le;throw new TypeError("@@toPrimitive must return a primitive value.")}return(ve==="string"?String:Number)(we)}var De=function(){function we(){var ve=this;Y(this,we),oe(this,"reset",function(){ve.isInitialized=!1,ve._testMode=!1,ve._currentMeasurementId,ve._hasLoadedGA=!1,ve._isQueuing=!1,ve._queueGtag=[]}),oe(this,"_gtag",function(){for(var Ce=arguments.length,Le=new Array(Ce),ge=0;ge<Ce;ge++)Le[ge]=arguments[ge];ve._testMode||ve._isQueuing?ve._queueGtag.push(Le):t.default.apply(void 0,Le)}),oe(this,"_loadGA",function(Ce,Le){var ge=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"https://www.googletagmanager.com/gtag/js";if(!(typeof window>"u"||typeof document>"u")&&!ve._hasLoadedGA){var $e=document.createElement("script");$e.async=!0,$e.src="".concat(ge,"?id=").concat(Ce),Le&&$e.setAttribute("nonce",Le),document.body.appendChild($e),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},ve._hasLoadedGA=!0}}),oe(this,"_toGtagOptions",function(Ce){if(Ce){var Le={cookieUpdate:"cookie_update",cookieExpires:"cookie_expires",cookieDomain:"cookie_domain",cookieFlags:"cookie_flags",userId:"user_id",clientId:"client_id",anonymizeIp:"anonymize_ip",contentGroup1:"content_group1",contentGroup2:"content_group2",contentGroup3:"content_group3",contentGroup4:"content_group4",contentGroup5:"content_group5",allowAdFeatures:"allow_google_signals",allowAdPersonalizationSignals:"allow_ad_personalization_signals",nonInteraction:"non_interaction",page:"page_path",hitCallback:"event_callback"},ge=Object.entries(Ce).reduce(function($e,rt){var ft=G(rt,2),lt=ft[0],Tt=ft[1];return Le[lt]?$e[Le[lt]]=Tt:$e[lt]=Tt,$e},{});return ge}}),oe(this,"initialize",function(Ce){var Le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Ce)throw new Error("Require GA_MEASUREMENT_ID");var ge=typeof Ce=="string"?[{trackingId:Ce}]:Ce;ve._currentMeasurementId=ge[0].trackingId;var $e=Le.gaOptions,rt=Le.gtagOptions,ft=Le.nonce,lt=Le.testMode,Tt=lt===void 0?!1:lt,qt=Le.gtagUrl;if(ve._testMode=Tt,Tt||ve._loadGA(ve._currentMeasurementId,ft,qt),ve.isInitialized||(ve._gtag("js",new Date),ge.forEach(function(Mr){var nn=j(j(j({},ve._toGtagOptions(j(j({},$e),Mr.gaOptions))),rt),Mr.gtagOptions);Object.keys(nn).length?ve._gtag("config",Mr.trackingId,nn):ve._gtag("config",Mr.trackingId)})),ve.isInitialized=!0,!Tt){var fr=P(ve._queueGtag);for(ve._queueGtag=[],ve._isQueuing=!1;fr.length;){var br=fr.shift();ve._gtag.apply(ve,P(br)),br[0]==="get"&&(ve._isQueuing=!0)}}}),oe(this,"set",function(Ce){if(!Ce){console.warn("`fieldsObject` is required in .set()");return}if(b(Ce)!=="object"){console.warn("Expected `fieldsObject` arg to be an Object");return}Object.keys(Ce).length===0&&console.warn("empty `fieldsObject` given to .set()"),ve._gaCommand("set",Ce)}),oe(this,"_gaCommandSendEvent",function(Ce,Le,ge,$e,rt){ve._gtag("event",Le,j(j({event_category:Ce,event_label:ge,value:$e},rt&&{non_interaction:rt.nonInteraction}),ve._toGtagOptions(rt)))}),oe(this,"_gaCommandSendEventParameters",function(){for(var Ce=arguments.length,Le=new Array(Ce),ge=0;ge<Ce;ge++)Le[ge]=arguments[ge];if(typeof Le[0]=="string")ve._gaCommandSendEvent.apply(ve,P(Le.slice(1)));else{var $e=Le[0],rt=$e.eventCategory,ft=$e.eventAction,lt=$e.eventLabel,Tt=$e.eventValue;$e.hitType;var qt=o($e,n);ve._gaCommandSendEvent(rt,ft,lt,Tt,qt)}}),oe(this,"_gaCommandSendTiming",function(Ce,Le,ge,$e){ve._gtag("event","timing_complete",{name:Le,value:ge,event_category:Ce,event_label:$e})}),oe(this,"_gaCommandSendPageview",function(Ce,Le){if(Le&&Object.keys(Le).length){var ge=ve._toGtagOptions(Le),$e=ge.title,rt=ge.location,ft=o(ge,u);ve._gtag("event","page_view",j(j(j(j({},Ce&&{page_path:Ce}),$e&&{page_title:$e}),rt&&{page_location:rt}),ft))}else Ce?ve._gtag("event","page_view",{page_path:Ce}):ve._gtag("event","page_view")}),oe(this,"_gaCommandSendPageviewParameters",function(){for(var Ce=arguments.length,Le=new Array(Ce),ge=0;ge<Ce;ge++)Le[ge]=arguments[ge];if(typeof Le[0]=="string")ve._gaCommandSendPageview.apply(ve,P(Le.slice(1)));else{var $e=Le[0],rt=$e.page;$e.hitType;var ft=o($e,h);ve._gaCommandSendPageview(rt,ft)}}),oe(this,"_gaCommandSend",function(){for(var Ce=arguments.length,Le=new Array(Ce),ge=0;ge<Ce;ge++)Le[ge]=arguments[ge];var $e=typeof Le[0]=="string"?Le[0]:Le[0].hitType;switch($e){case"event":ve._gaCommandSendEventParameters.apply(ve,Le);break;case"pageview":ve._gaCommandSendPageviewParameters.apply(ve,Le);break;case"timing":ve._gaCommandSendTiming.apply(ve,P(Le.slice(1)));break;case"screenview":case"transaction":case"item":case"social":case"exception":console.warn("Unsupported send command: ".concat($e));break;default:console.warn("Send command doesn't exist: ".concat($e))}}),oe(this,"_gaCommandSet",function(){for(var Ce=arguments.length,Le=new Array(Ce),ge=0;ge<Ce;ge++)Le[ge]=arguments[ge];typeof Le[0]=="string"&&(Le[0]=oe({},Le[0],Le[1])),ve._gtag("set",ve._toGtagOptions(Le[0]))}),oe(this,"_gaCommand",function(Ce){for(var Le=arguments.length,ge=new Array(Le>1?Le-1:0),$e=1;$e<Le;$e++)ge[$e-1]=arguments[$e];switch(Ce){case"send":ve._gaCommandSend.apply(ve,ge);break;case"set":ve._gaCommandSet.apply(ve,ge);break;default:console.warn("Command doesn't exist: ".concat(Ce))}}),oe(this,"ga",function(){for(var Ce=arguments.length,Le=new Array(Ce),ge=0;ge<Ce;ge++)Le[ge]=arguments[ge];if(typeof Le[0]=="string")ve._gaCommand.apply(ve,Le);else{var $e=Le[0];ve._gtag("get",ve._currentMeasurementId,"client_id",function(rt){ve._isQueuing=!1;var ft=ve._queueGtag;for($e({get:function(qt){return qt==="clientId"?rt:qt==="trackingId"?ve._currentMeasurementId:qt==="apiVersion"?"1":void 0}});ft.length;){var lt=ft.shift();ve._gtag.apply(ve,P(lt))}}),ve._isQueuing=!0}return ve.ga}),oe(this,"event",function(Ce,Le){if(typeof Ce=="string")ve._gtag("event",Ce,ve._toGtagOptions(Le));else{var ge=Ce.action,$e=Ce.category,rt=Ce.label,ft=Ce.value,lt=Ce.nonInteraction,Tt=Ce.transport;if(!$e||!ge){console.warn("args.category AND args.action are required in event()");return}var qt={hitType:"event",eventCategory:(0,r.default)($e),eventAction:(0,r.default)(ge)};rt&&(qt.eventLabel=(0,r.default)(rt)),typeof ft<"u"&&(typeof ft!="number"?console.warn("Expected `args.value` arg to be a Number."):qt.eventValue=ft),typeof lt<"u"&&(typeof lt!="boolean"?console.warn("`args.nonInteraction` must be a boolean."):qt.nonInteraction=lt),typeof Tt<"u"&&(typeof Tt!="string"?console.warn("`args.transport` must be a string."):(["beacon","xhr","image"].indexOf(Tt)===-1&&console.warn("`args.transport` must be either one of these values: `beacon`, `xhr` or `image`"),qt.transport=Tt)),ve._gaCommand("send",qt)}}),oe(this,"send",function(Ce){ve._gaCommand("send",Ce)}),this.reset()}return ue(we,[{key:"gtag",value:function(){this._gtag.apply(this,arguments)}}]),we}();e.GA4=De;var Je=new De;e.default=Je})(FO);(function(e){function t(o){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},t(o)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.ReactGAImplementation=void 0;var r=u(FO);function n(o){if(typeof WeakMap!="function")return null;var _=new WeakMap,b=new WeakMap;return(n=function(S){return S?b:_})(o)}function u(o,_){if(!_&&o&&o.__esModule)return o;if(o===null||t(o)!=="object"&&typeof o!="function")return{default:o};var b=n(_);if(b&&b.has(o))return b.get(o);var P={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var C in o)if(C!=="default"&&Object.prototype.hasOwnProperty.call(o,C)){var L=S?Object.getOwnPropertyDescriptor(o,C):null;L&&(L.get||L.set)?Object.defineProperty(P,C,L):P[C]=o[C]}return P.default=o,b&&b.set(o,P),P}var h=r.GA4;e.ReactGAImplementation=h;var p=r.default;e.default=p})(KV);function NO(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var u=e.length;for(t=0;t<u;t++)e[t]&&(r=NO(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function rn(){for(var e,t,r=0,n="",u=arguments.length;r<u;r++)(e=arguments[r])&&(t=NO(e))&&(n&&(n+=" "),n+=t);return n}var YV=Array.isArray,Do=YV,JV=typeof $d=="object"&&$d&&$d.Object===Object&&$d,UO=JV,QV=UO,eG=typeof self=="object"&&self&&self.Object===Object&&self,tG=QV||eG||Function("return this")(),ks=tG,rG=ks,nG=rG.Symbol,b2=nG,HS=b2,VO=Object.prototype,iG=VO.hasOwnProperty,oG=VO.toString,Id=HS?HS.toStringTag:void 0;function aG(e){var t=iG.call(e,Id),r=e[Id];try{e[Id]=void 0;var n=!0}catch{}var u=oG.call(e);return n&&(t?e[Id]=r:delete e[Id]),u}var sG=aG,lG=Object.prototype,uG=lG.toString;function cG(e){return uG.call(e)}var hG=cG,ZS=b2,fG=sG,dG=hG,pG="[object Null]",mG="[object Undefined]",XS=ZS?ZS.toStringTag:void 0;function gG(e){return e==null?e===void 0?mG:pG:XS&&XS in Object(e)?fG(e):dG(e)}var wl=gG;function yG(e){return e!=null&&typeof e=="object"}var Tl=yG,_G=wl,vG=Tl,xG="[object Symbol]";function bG(e){return typeof e=="symbol"||vG(e)&&_G(e)==xG}var Of=bG,wG=Do,TG=Of,SG=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,EG=/^\w*$/;function PG(e,t){if(wG(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||TG(e)?!0:EG.test(e)||!SG.test(e)||t!=null&&e in Object(t)}var tv=PG;function AG(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Ou=AG;const kf=Br(Ou);var MG=wl,CG=Ou,IG="[object AsyncFunction]",OG="[object Function]",kG="[object GeneratorFunction]",DG="[object Proxy]";function LG(e){if(!CG(e))return!1;var t=MG(e);return t==OG||t==kG||t==IG||t==DG}var rv=LG;const Ar=Br(rv);var zG=ks,RG=zG["__core-js_shared__"],BG=RG,Q8=BG,KS=function(){var e=/[^.]+$/.exec(Q8&&Q8.keys&&Q8.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function FG(e){return!!KS&&KS in e}var jG=FG,$G=Function.prototype,NG=$G.toString;function UG(e){if(e!=null){try{return NG.call(e)}catch{}try{return e+""}catch{}}return""}var GO=UG,VG=rv,GG=jG,WG=Ou,qG=GO,HG=/[\\^$.*+?()[\]{}|]/g,ZG=/^\[object .+?Constructor\]$/,XG=Function.prototype,KG=Object.prototype,YG=XG.toString,JG=KG.hasOwnProperty,QG=RegExp("^"+YG.call(JG).replace(HG,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function eW(e){if(!WG(e)||GG(e))return!1;var t=VG(e)?QG:ZG;return t.test(qG(e))}var tW=eW;function rW(e,t){return e==null?void 0:e[t]}var nW=rW,iW=tW,oW=nW;function aW(e,t){var r=oW(e,t);return iW(r)?r:void 0}var o1=aW,sW=o1,lW=sW(Object,"create"),K6=lW,YS=K6;function uW(){this.__data__=YS?YS(null):{},this.size=0}var cW=uW;function hW(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var fW=hW,dW=K6,pW="__lodash_hash_undefined__",mW=Object.prototype,gW=mW.hasOwnProperty;function yW(e){var t=this.__data__;if(dW){var r=t[e];return r===pW?void 0:r}return gW.call(t,e)?t[e]:void 0}var _W=yW,vW=K6,xW=Object.prototype,bW=xW.hasOwnProperty;function wW(e){var t=this.__data__;return vW?t[e]!==void 0:bW.call(t,e)}var TW=wW,SW=K6,EW="__lodash_hash_undefined__";function PW(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=SW&&t===void 0?EW:t,this}var AW=PW,MW=cW,CW=fW,IW=_W,OW=TW,kW=AW;function Df(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Df.prototype.clear=MW;Df.prototype.delete=CW;Df.prototype.get=IW;Df.prototype.has=OW;Df.prototype.set=kW;var DW=Df;function LW(){this.__data__=[],this.size=0}var zW=LW;function RW(e,t){return e===t||e!==e&&t!==t}var nv=RW,BW=nv;function FW(e,t){for(var r=e.length;r--;)if(BW(e[r][0],t))return r;return-1}var Y6=FW,jW=Y6,$W=Array.prototype,NW=$W.splice;function UW(e){var t=this.__data__,r=jW(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():NW.call(t,r,1),--this.size,!0}var VW=UW,GW=Y6;function WW(e){var t=this.__data__,r=GW(t,e);return r<0?void 0:t[r][1]}var qW=WW,HW=Y6;function ZW(e){return HW(this.__data__,e)>-1}var XW=ZW,KW=Y6;function YW(e,t){var r=this.__data__,n=KW(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var JW=YW,QW=zW,eq=VW,tq=qW,rq=XW,nq=JW;function Lf(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Lf.prototype.clear=QW;Lf.prototype.delete=eq;Lf.prototype.get=tq;Lf.prototype.has=rq;Lf.prototype.set=nq;var J6=Lf,iq=o1,oq=ks,aq=iq(oq,"Map"),iv=aq,JS=DW,sq=J6,lq=iv;function uq(){this.size=0,this.__data__={hash:new JS,map:new(lq||sq),string:new JS}}var cq=uq;function hq(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var fq=hq,dq=fq;function pq(e,t){var r=e.__data__;return dq(t)?r[typeof t=="string"?"string":"hash"]:r.map}var Q6=pq,mq=Q6;function gq(e){var t=mq(this,e).delete(e);return this.size-=t?1:0,t}var yq=gq,_q=Q6;function vq(e){return _q(this,e).get(e)}var xq=vq,bq=Q6;function wq(e){return bq(this,e).has(e)}var Tq=wq,Sq=Q6;function Eq(e,t){var r=Sq(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var Pq=Eq,Aq=cq,Mq=yq,Cq=xq,Iq=Tq,Oq=Pq;function zf(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}zf.prototype.clear=Aq;zf.prototype.delete=Mq;zf.prototype.get=Cq;zf.prototype.has=Iq;zf.prototype.set=Oq;var ov=zf,WO=ov,kq="Expected a function";function av(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(kq);var r=function(){var n=arguments,u=t?t.apply(this,n):n[0],h=r.cache;if(h.has(u))return h.get(u);var p=e.apply(this,n);return r.cache=h.set(u,p)||h,p};return r.cache=new(av.Cache||WO),r}av.Cache=WO;var qO=av;const Dq=Br(qO);var Lq=qO,zq=500;function Rq(e){var t=Lq(e,function(n){return r.size===zq&&r.clear(),n}),r=t.cache;return t}var Bq=Rq,Fq=Bq,jq=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$q=/\\(\\)?/g,Nq=Fq(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(jq,function(r,n,u,h){t.push(u?h.replace($q,"$1"):n||r)}),t}),Uq=Nq;function Vq(e,t){for(var r=-1,n=e==null?0:e.length,u=Array(n);++r<n;)u[r]=t(e[r],r,e);return u}var sv=Vq,QS=b2,Gq=sv,Wq=Do,qq=Of,Hq=1/0,eE=QS?QS.prototype:void 0,tE=eE?eE.toString:void 0;function HO(e){if(typeof e=="string")return e;if(Wq(e))return Gq(e,HO)+"";if(qq(e))return tE?tE.call(e):"";var t=e+"";return t=="0"&&1/e==-Hq?"-0":t}var Zq=HO,Xq=Zq;function Kq(e){return e==null?"":Xq(e)}var ZO=Kq,Yq=Do,Jq=tv,Qq=Uq,eH=ZO;function tH(e,t){return Yq(e)?e:Jq(e,t)?[e]:Qq(eH(e))}var XO=tH,rH=Of,nH=1/0;function iH(e){if(typeof e=="string"||rH(e))return e;var t=e+"";return t=="0"&&1/e==-nH?"-0":t}var em=iH,oH=XO,aH=em;function sH(e,t){t=oH(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[aH(t[r++])];return r&&r==n?e:void 0}var lv=sH,lH=lv;function uH(e,t,r){var n=e==null?void 0:lH(e,t);return n===void 0?r:n}var KO=uH;const Sa=Br(KO);function cH(e){return e==null}var hH=cH;const tn=Br(hH);var fH=wl,dH=Do,pH=Tl,mH="[object String]";function gH(e){return typeof e=="string"||!dH(e)&&pH(e)&&fH(e)==mH}var yH=gH;const Xc=Br(yH);var YO={exports:{}},ln={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uv=Symbol.for("react.element"),cv=Symbol.for("react.portal"),tm=Symbol.for("react.fragment"),rm=Symbol.for("react.strict_mode"),nm=Symbol.for("react.profiler"),im=Symbol.for("react.provider"),om=Symbol.for("react.context"),_H=Symbol.for("react.server_context"),am=Symbol.for("react.forward_ref"),sm=Symbol.for("react.suspense"),lm=Symbol.for("react.suspense_list"),um=Symbol.for("react.memo"),cm=Symbol.for("react.lazy"),vH=Symbol.for("react.offscreen"),JO;JO=Symbol.for("react.module.reference");function Ma(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case uv:switch(e=e.type,e){case tm:case nm:case rm:case sm:case lm:return e;default:switch(e=e&&e.$$typeof,e){case _H:case om:case am:case cm:case um:case im:return e;default:return t}}case cv:return t}}}ln.ContextConsumer=om;ln.ContextProvider=im;ln.Element=uv;ln.ForwardRef=am;ln.Fragment=tm;ln.Lazy=cm;ln.Memo=um;ln.Portal=cv;ln.Profiler=nm;ln.StrictMode=rm;ln.Suspense=sm;ln.SuspenseList=lm;ln.isAsyncMode=function(){return!1};ln.isConcurrentMode=function(){return!1};ln.isContextConsumer=function(e){return Ma(e)===om};ln.isContextProvider=function(e){return Ma(e)===im};ln.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===uv};ln.isForwardRef=function(e){return Ma(e)===am};ln.isFragment=function(e){return Ma(e)===tm};ln.isLazy=function(e){return Ma(e)===cm};ln.isMemo=function(e){return Ma(e)===um};ln.isPortal=function(e){return Ma(e)===cv};ln.isProfiler=function(e){return Ma(e)===nm};ln.isStrictMode=function(e){return Ma(e)===rm};ln.isSuspense=function(e){return Ma(e)===sm};ln.isSuspenseList=function(e){return Ma(e)===lm};ln.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===tm||e===nm||e===rm||e===sm||e===lm||e===vH||typeof e=="object"&&e!==null&&(e.$$typeof===cm||e.$$typeof===um||e.$$typeof===im||e.$$typeof===om||e.$$typeof===am||e.$$typeof===JO||e.getModuleId!==void 0)};ln.typeOf=Ma;YO.exports=ln;var xH=YO.exports,bH=wl,wH=Tl,TH="[object Number]";function SH(e){return typeof e=="number"||wH(e)&&bH(e)==TH}var QO=SH;const EH=Br(QO);var PH=QO;function AH(e){return PH(e)&&e!=+e}var MH=AH;const w2=Br(MH);var rs=function(t){return t===0?0:t>0?1:-1},Lc=function(t){return Xc(t)&&t.indexOf("%")===t.length-1},Bt=function(t){return EH(t)&&!w2(t)},fi=function(t){return Bt(t)||Xc(t)},CH=0,hm=function(t){var r=++CH;return"".concat(t||"").concat(r)},Kc=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Bt(t)&&!Xc(t))return n;var h;if(Lc(t)){var p=t.indexOf("%");h=r*parseFloat(t.slice(0,p))/100}else h=+t;return w2(h)&&(h=n),u&&h>r&&(h=r),h},uu=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},IH=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},u=0;u<r;u++)if(!n[t[u]])n[t[u]]=!0;else return!0;return!1},dh=function(t,r){return Bt(t)&&Bt(r)?function(n){return t+n*(r-t)}:function(){return r}};function Og(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):Sa(n,t))===r})}var OH=function(t,r){return Bt(t)&&Bt(r)?t-r:Xc(t)&&Xc(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function Uh(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function kg(e){"@babel/helpers - typeof";return kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kg(e)}var kH=["viewBox","children"],DH=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],rE=["points","pathLength"],e9={svg:kH,polygon:rE,polyline:rE},hv=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],k4=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(Pe.isValidElement(t)&&(n=t.props),!kf(n))return null;var u={};return Object.keys(n).forEach(function(h){hv.includes(h)&&(u[h]=r||function(p){return n[h](n,p)})}),u},LH=function(t,r,n){return function(u){return t(r,n,u),null}},D4=function(t,r,n){if(!kf(t)||kg(t)!=="object")return null;var u=null;return Object.keys(t).forEach(function(h){var p=t[h];hv.includes(h)&&typeof p=="function"&&(u||(u={}),u[h]=LH(p,r,n))}),u},zH=["children"],RH=["children"];function nE(e,t){if(e==null)return{};var r=BH(e,t),n,u;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(u=0;u<h.length;u++)n=h[u],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function BH(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var iE={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},cl=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},oE=null,t9=null,fv=function e(t){if(t===oE&&Array.isArray(t9))return t9;var r=[];return Pe.Children.forEach(t,function(n){tn(n)||(xH.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),t9=r,oE=t,r};function os(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(u){return cl(u)}):n=[cl(t)],fv(e).forEach(function(u){var h=Sa(u,"type.displayName")||Sa(u,"type.name");n.indexOf(h)!==-1&&r.push(u)}),r}function qo(e,t){var r=os(e,t);return r&&r[0]}var aE=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,u=r.height;return!(!Bt(n)||n<=0||!Bt(u)||u<=0)},FH=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],jH=function(t){return t&&t.type&&Xc(t.type)&&FH.indexOf(t.type)>=0},$H=function(t,r,n,u){var h,p=(h=e9==null?void 0:e9[u])!==null&&h!==void 0?h:[];return r.startsWith("data-")||!Ar(t)&&(u&&p.includes(r)||DH.includes(r))||n&&hv.includes(r)},Yr=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var u=t;if(Pe.isValidElement(t)&&(u=t.props),!kf(u))return null;var h={};return Object.keys(u).forEach(function(p){var o;$H((o=u)===null||o===void 0?void 0:o[p],p,r,n)&&(h[p]=u[p])}),h},Dg=function e(t,r){if(t===r)return!0;var n=Pe.Children.count(t);if(n!==Pe.Children.count(r))return!1;if(n===0)return!0;if(n===1)return sE(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var u=0;u<n;u++){var h=t[u],p=r[u];if(Array.isArray(h)||Array.isArray(p)){if(!e(h,p))return!1}else if(!sE(h,p))return!1}return!0},sE=function(t,r){if(tn(t)&&tn(r))return!0;if(!tn(t)&&!tn(r)){var n=t.props||{},u=n.children,h=nE(n,zH),p=r.props||{},o=p.children,_=nE(p,RH);return u&&o?Uh(h,_)&&Dg(u,o):!u&&!o?Uh(h,_):!1}return!1},lE=function(t,r){var n=[],u={};return fv(t).forEach(function(h,p){if(jH(h))n.push(h);else if(h){var o=cl(h.type),_=r[o]||{},b=_.handler,P=_.once;if(b&&(!P||!u[o])){var S=b(h,o,p);n.push(S),u[o]=!0}}}),n},NH=function(t){var r=t&&t.type;return r&&iE[r]?iE[r]:null},UH=function(t,r){return fv(r).indexOf(t)},VH=["children","width","height","viewBox","className","style","title","desc"];function Lg(){return Lg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lg.apply(this,arguments)}function GH(e,t){if(e==null)return{};var r=WH(e,t),n,u;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(u=0;u<h.length;u++)n=h[u],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function WH(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function zg(e){var t=e.children,r=e.width,n=e.height,u=e.viewBox,h=e.className,p=e.style,o=e.title,_=e.desc,b=GH(e,VH),P=u||{width:r,height:n,x:0,y:0},S=rn("recharts-surface",h);return Ne.createElement("svg",Lg({},Yr(b,!0,"svg"),{className:S,width:r,height:n,style:p,viewBox:"".concat(P.x," ").concat(P.y," ").concat(P.width," ").concat(P.height)}),Ne.createElement("title",null,o),Ne.createElement("desc",null,_),t)}var qH=["children","className"];function Rg(){return Rg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rg.apply(this,arguments)}function HH(e,t){if(e==null)return{};var r=ZH(e,t),n,u;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(u=0;u<h.length;u++)n=h[u],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ZH(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Ti=Ne.forwardRef(function(e,t){var r=e.children,n=e.className,u=HH(e,qH),h=rn("recharts-layer",n);return Ne.createElement("g",Rg({className:h},Yr(u,!0),{ref:t}),r)}),hl=function(t,r){for(var n=arguments.length,u=new Array(n>2?n-2:0),h=2;h<n;h++)u[h-2]=arguments[h]};function XH(e,t,r){var n=-1,u=e.length;t<0&&(t=-t>u?0:u+t),r=r>u?u:r,r<0&&(r+=u),u=t>r?0:r-t>>>0,t>>>=0;for(var h=Array(u);++n<u;)h[n]=e[n+t];return h}var KH=XH,YH=KH;function JH(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:YH(e,t,r)}var QH=JH,eZ="\\ud800-\\udfff",tZ="\\u0300-\\u036f",rZ="\\ufe20-\\ufe2f",nZ="\\u20d0-\\u20ff",iZ=tZ+rZ+nZ,oZ="\\ufe0e\\ufe0f",aZ="\\u200d",sZ=RegExp("["+aZ+eZ+iZ+oZ+"]");function lZ(e){return sZ.test(e)}var ek=lZ;function uZ(e){return e.split("")}var cZ=uZ,tk="\\ud800-\\udfff",hZ="\\u0300-\\u036f",fZ="\\ufe20-\\ufe2f",dZ="\\u20d0-\\u20ff",pZ=hZ+fZ+dZ,mZ="\\ufe0e\\ufe0f",gZ="["+tk+"]",Bg="["+pZ+"]",Fg="\\ud83c[\\udffb-\\udfff]",yZ="(?:"+Bg+"|"+Fg+")",rk="[^"+tk+"]",nk="(?:\\ud83c[\\udde6-\\uddff]){2}",ik="[\\ud800-\\udbff][\\udc00-\\udfff]",_Z="\\u200d",ok=yZ+"?",ak="["+mZ+"]?",vZ="(?:"+_Z+"(?:"+[rk,nk,ik].join("|")+")"+ak+ok+")*",xZ=ak+ok+vZ,bZ="(?:"+[rk+Bg+"?",Bg,nk,ik,gZ].join("|")+")",wZ=RegExp(Fg+"(?="+Fg+")|"+bZ+xZ,"g");function TZ(e){return e.match(wZ)||[]}var SZ=TZ,EZ=cZ,PZ=ek,AZ=SZ;function MZ(e){return PZ(e)?AZ(e):EZ(e)}var CZ=MZ,IZ=QH,OZ=ek,kZ=CZ,DZ=ZO;function LZ(e){return function(t){t=DZ(t);var r=OZ(t)?kZ(t):void 0,n=r?r[0]:t.charAt(0),u=r?IZ(r,1).join(""):t.slice(1);return n[e]()+u}}var zZ=LZ,RZ=zZ,BZ=RZ("toUpperCase"),FZ=BZ;const fm=Br(FZ);function yn(e){return function(){return e}}const sk=Math.cos,L4=Math.sin,ss=Math.sqrt,z4=Math.PI,dm=2*z4,jg=Math.PI,$g=2*jg,Ec=1e-6,jZ=$g-Ec;function lk(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function $Z(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return lk;const r=10**t;return function(n){this._+=n[0];for(let u=1,h=n.length;u<h;++u)this._+=Math.round(arguments[u]*r)/r+n[u]}}class NZ{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?lk:$Z(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,u){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+u}`}bezierCurveTo(t,r,n,u,h,p){this._append`C${+t},${+r},${+n},${+u},${this._x1=+h},${this._y1=+p}`}arcTo(t,r,n,u,h){if(t=+t,r=+r,n=+n,u=+u,h=+h,h<0)throw new Error(`negative radius: ${h}`);let p=this._x1,o=this._y1,_=n-t,b=u-r,P=p-t,S=o-r,C=P*P+S*S;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(C>Ec)if(!(Math.abs(S*_-b*P)>Ec)||!h)this._append`L${this._x1=t},${this._y1=r}`;else{let L=n-p,F=u-o,j=_*_+b*b,G=L*L+F*F,$=Math.sqrt(j),N=Math.sqrt(C),U=h*Math.tan((jg-Math.acos((j+C-G)/(2*$*N)))/2),J=U/N,q=U/$;Math.abs(J-1)>Ec&&this._append`L${t+J*P},${r+J*S}`,this._append`A${h},${h},0,0,${+(S*L>P*F)},${this._x1=t+q*_},${this._y1=r+q*b}`}}arc(t,r,n,u,h,p){if(t=+t,r=+r,n=+n,p=!!p,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(u),_=n*Math.sin(u),b=t+o,P=r+_,S=1^p,C=p?u-h:h-u;this._x1===null?this._append`M${b},${P}`:(Math.abs(this._x1-b)>Ec||Math.abs(this._y1-P)>Ec)&&this._append`L${b},${P}`,n&&(C<0&&(C=C%$g+$g),C>jZ?this._append`A${n},${n},0,1,${S},${t-o},${r-_}A${n},${n},0,1,${S},${this._x1=b},${this._y1=P}`:C>Ec&&this._append`A${n},${n},0,${+(C>=jg)},${S},${this._x1=t+n*Math.cos(h)},${this._y1=r+n*Math.sin(h)}`)}rect(t,r,n,u){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+u}h${-n}Z`}toString(){return this._}}function dv(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new NZ(t)}function pv(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function uk(e){this._context=e}uk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function pm(e){return new uk(e)}function ck(e){return e[0]}function hk(e){return e[1]}function fk(e,t){var r=yn(!0),n=null,u=pm,h=null,p=dv(o);e=typeof e=="function"?e:e===void 0?ck:yn(e),t=typeof t=="function"?t:t===void 0?hk:yn(t);function o(_){var b,P=(_=pv(_)).length,S,C=!1,L;for(n==null&&(h=u(L=p())),b=0;b<=P;++b)!(b<P&&r(S=_[b],b,_))===C&&((C=!C)?h.lineStart():h.lineEnd()),C&&h.point(+e(S,b,_),+t(S,b,_));if(L)return h=null,L+""||null}return o.x=function(_){return arguments.length?(e=typeof _=="function"?_:yn(+_),o):e},o.y=function(_){return arguments.length?(t=typeof _=="function"?_:yn(+_),o):t},o.defined=function(_){return arguments.length?(r=typeof _=="function"?_:yn(!!_),o):r},o.curve=function(_){return arguments.length?(u=_,n!=null&&(h=u(n)),o):u},o.context=function(_){return arguments.length?(_==null?n=h=null:h=u(n=_),o):n},o}function v5(e,t,r){var n=null,u=yn(!0),h=null,p=pm,o=null,_=dv(b);e=typeof e=="function"?e:e===void 0?ck:yn(+e),t=typeof t=="function"?t:yn(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?hk:yn(+r);function b(S){var C,L,F,j=(S=pv(S)).length,G,$=!1,N,U=new Array(j),J=new Array(j);for(h==null&&(o=p(N=_())),C=0;C<=j;++C){if(!(C<j&&u(G=S[C],C,S))===$)if($=!$)L=C,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),F=C-1;F>=L;--F)o.point(U[F],J[F]);o.lineEnd(),o.areaEnd()}$&&(U[C]=+e(G,C,S),J[C]=+t(G,C,S),o.point(n?+n(G,C,S):U[C],r?+r(G,C,S):J[C]))}if(N)return o=null,N+""||null}function P(){return fk().defined(u).curve(p).context(h)}return b.x=function(S){return arguments.length?(e=typeof S=="function"?S:yn(+S),n=null,b):e},b.x0=function(S){return arguments.length?(e=typeof S=="function"?S:yn(+S),b):e},b.x1=function(S){return arguments.length?(n=S==null?null:typeof S=="function"?S:yn(+S),b):n},b.y=function(S){return arguments.length?(t=typeof S=="function"?S:yn(+S),r=null,b):t},b.y0=function(S){return arguments.length?(t=typeof S=="function"?S:yn(+S),b):t},b.y1=function(S){return arguments.length?(r=S==null?null:typeof S=="function"?S:yn(+S),b):r},b.lineX0=b.lineY0=function(){return P().x(e).y(t)},b.lineY1=function(){return P().x(e).y(r)},b.lineX1=function(){return P().x(n).y(t)},b.defined=function(S){return arguments.length?(u=typeof S=="function"?S:yn(!!S),b):u},b.curve=function(S){return arguments.length?(p=S,h!=null&&(o=p(h)),b):p},b.context=function(S){return arguments.length?(S==null?h=o=null:o=p(h=S),b):h},b}class dk{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function UZ(e){return new dk(e,!0)}function VZ(e){return new dk(e,!1)}const mv={draw(e,t){const r=ss(t/z4);e.moveTo(r,0),e.arc(0,0,r,0,dm)}},GZ={draw(e,t){const r=ss(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},pk=ss(1/3),WZ=pk*2,qZ={draw(e,t){const r=ss(t/WZ),n=r*pk;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},HZ={draw(e,t){const r=ss(t),n=-r/2;e.rect(n,n,r,r)}},ZZ=.8908130915292852,mk=L4(z4/10)/L4(7*z4/10),XZ=L4(dm/10)*mk,KZ=-sk(dm/10)*mk,YZ={draw(e,t){const r=ss(t*ZZ),n=XZ*r,u=KZ*r;e.moveTo(0,-r),e.lineTo(n,u);for(let h=1;h<5;++h){const p=dm*h/5,o=sk(p),_=L4(p);e.lineTo(_*r,-o*r),e.lineTo(o*n-_*u,_*n+o*u)}e.closePath()}},r9=ss(3),JZ={draw(e,t){const r=-ss(t/(r9*3));e.moveTo(0,r*2),e.lineTo(-r9*r,-r),e.lineTo(r9*r,-r),e.closePath()}},ma=-.5,ga=ss(3)/2,Ng=1/ss(12),QZ=(Ng/2+1)*3,eX={draw(e,t){const r=ss(t/QZ),n=r/2,u=r*Ng,h=n,p=r*Ng+r,o=-h,_=p;e.moveTo(n,u),e.lineTo(h,p),e.lineTo(o,_),e.lineTo(ma*n-ga*u,ga*n+ma*u),e.lineTo(ma*h-ga*p,ga*h+ma*p),e.lineTo(ma*o-ga*_,ga*o+ma*_),e.lineTo(ma*n+ga*u,ma*u-ga*n),e.lineTo(ma*h+ga*p,ma*p-ga*h),e.lineTo(ma*o+ga*_,ma*_-ga*o),e.closePath()}};function tX(e,t){let r=null,n=dv(u);e=typeof e=="function"?e:yn(e||mv),t=typeof t=="function"?t:yn(t===void 0?64:+t);function u(){let h;if(r||(r=h=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),h)return r=null,h+""||null}return u.type=function(h){return arguments.length?(e=typeof h=="function"?h:yn(h),u):e},u.size=function(h){return arguments.length?(t=typeof h=="function"?h:yn(+h),u):t},u.context=function(h){return arguments.length?(r=h??null,u):r},u}function R4(){}function B4(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function gk(e){this._context=e}gk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:B4(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:B4(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function rX(e){return new gk(e)}function yk(e){this._context=e}yk.prototype={areaStart:R4,areaEnd:R4,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:B4(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function nX(e){return new yk(e)}function _k(e){this._context=e}_k.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:B4(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function iX(e){return new _k(e)}function vk(e){this._context=e}vk.prototype={areaStart:R4,areaEnd:R4,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function oX(e){return new vk(e)}function uE(e){return e<0?-1:1}function cE(e,t,r){var n=e._x1-e._x0,u=t-e._x1,h=(e._y1-e._y0)/(n||u<0&&-0),p=(r-e._y1)/(u||n<0&&-0),o=(h*u+p*n)/(n+u);return(uE(h)+uE(p))*Math.min(Math.abs(h),Math.abs(p),.5*Math.abs(o))||0}function hE(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function n9(e,t,r){var n=e._x0,u=e._y0,h=e._x1,p=e._y1,o=(h-n)/3;e._context.bezierCurveTo(n+o,u+o*t,h-o,p-o*r,h,p)}function F4(e){this._context=e}F4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:n9(this,this._t0,hE(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,n9(this,hE(this,r=cE(this,e,t)),r);break;default:n9(this,this._t0,r=cE(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function xk(e){this._context=new bk(e)}(xk.prototype=Object.create(F4.prototype)).point=function(e,t){F4.prototype.point.call(this,t,e)};function bk(e){this._context=e}bk.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,u,h){this._context.bezierCurveTo(t,e,n,r,h,u)}};function aX(e){return new F4(e)}function sX(e){return new xk(e)}function wk(e){this._context=e}wk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=fE(e),u=fE(t),h=0,p=1;p<r;++h,++p)this._context.bezierCurveTo(n[0][h],u[0][h],n[1][h],u[1][h],e[p],t[p]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function fE(e){var t,r=e.length-1,n,u=new Array(r),h=new Array(r),p=new Array(r);for(u[0]=0,h[0]=2,p[0]=e[0]+2*e[1],t=1;t<r-1;++t)u[t]=1,h[t]=4,p[t]=4*e[t]+2*e[t+1];for(u[r-1]=2,h[r-1]=7,p[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=u[t]/h[t-1],h[t]-=n,p[t]-=n*p[t-1];for(u[r-1]=p[r-1]/h[r-1],t=r-2;t>=0;--t)u[t]=(p[t]-u[t+1])/h[t];for(h[r-1]=(e[r]+u[r-1])/2,t=0;t<r-1;++t)h[t]=2*e[t+1]-u[t+1];return[u,h]}function lX(e){return new wk(e)}function mm(e,t){this._context=e,this._t=t}mm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function uX(e){return new mm(e,.5)}function cX(e){return new mm(e,0)}function hX(e){return new mm(e,1)}function of(e,t){if((p=e.length)>1)for(var r=1,n,u,h=e[t[0]],p,o=h.length;r<p;++r)for(u=h,h=e[t[r]],n=0;n<o;++n)h[n][1]+=h[n][0]=isNaN(u[n][1])?u[n][0]:u[n][1]}function Ug(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function fX(e,t){return e[t]}function dX(e){const t=[];return t.key=e,t}function pX(){var e=yn([]),t=Ug,r=of,n=fX;function u(h){var p=Array.from(e.apply(this,arguments),dX),o,_=p.length,b=-1,P;for(const S of h)for(o=0,++b;o<_;++o)(p[o][b]=[0,+n(S,p[o].key,b,h)]).data=S;for(o=0,P=pv(t(p));o<_;++o)p[P[o]].index=o;return r(p,P),p}return u.keys=function(h){return arguments.length?(e=typeof h=="function"?h:yn(Array.from(h)),u):e},u.value=function(h){return arguments.length?(n=typeof h=="function"?h:yn(+h),u):n},u.order=function(h){return arguments.length?(t=h==null?Ug:typeof h=="function"?h:yn(Array.from(h)),u):t},u.offset=function(h){return arguments.length?(r=h??of,u):r},u}function mX(e,t){if((n=e.length)>0){for(var r,n,u=0,h=e[0].length,p;u<h;++u){for(p=r=0;r<n;++r)p+=e[r][u][1]||0;if(p)for(r=0;r<n;++r)e[r][u][1]/=p}of(e,t)}}function gX(e,t){if((u=e.length)>0){for(var r=0,n=e[t[0]],u,h=n.length;r<h;++r){for(var p=0,o=0;p<u;++p)o+=e[p][r][1]||0;n[r][1]+=n[r][0]=-o/2}of(e,t)}}function yX(e,t){if(!(!((p=e.length)>0)||!((h=(u=e[t[0]]).length)>0))){for(var r=0,n=1,u,h,p;n<h;++n){for(var o=0,_=0,b=0;o<p;++o){for(var P=e[t[o]],S=P[n][1]||0,C=P[n-1][1]||0,L=(S-C)/2,F=0;F<o;++F){var j=e[t[F]],G=j[n][1]||0,$=j[n-1][1]||0;L+=G-$}_+=S,b+=L*S}u[n-1][1]+=u[n-1][0]=r,_&&(r-=b/_)}u[n-1][1]+=u[n-1][0]=r,of(e,t)}}function Op(e){"@babel/helpers - typeof";return Op=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Op(e)}var _X=["type","size","sizeType"];function Vg(){return Vg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vg.apply(this,arguments)}function dE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function pE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dE(Object(r),!0).forEach(function(n){vX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vX(e,t,r){return t=xX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xX(e){var t=bX(e,"string");return Op(t)=="symbol"?t:t+""}function bX(e,t){if(Op(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Op(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wX(e,t){if(e==null)return{};var r=TX(e,t),n,u;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(u=0;u<h.length;u++)n=h[u],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function TX(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Tk={symbolCircle:mv,symbolCross:GZ,symbolDiamond:qZ,symbolSquare:HZ,symbolStar:YZ,symbolTriangle:JZ,symbolWye:eX},SX=Math.PI/180,EX=function(t){var r="symbol".concat(fm(t));return Tk[r]||mv},PX=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var u=18*SX;return 1.25*t*t*(Math.tan(u)-Math.tan(u*2)*Math.pow(Math.tan(u),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},AX=function(t,r){Tk["symbol".concat(fm(t))]=r},gv=function(t){var r=t.type,n=r===void 0?"circle":r,u=t.size,h=u===void 0?64:u,p=t.sizeType,o=p===void 0?"area":p,_=wX(t,_X),b=pE(pE({},_),{},{type:n,size:h,sizeType:o}),P=function(){var G=EX(n),$=tX().type(G).size(PX(h,o,n));return $()},S=b.className,C=b.cx,L=b.cy,F=Yr(b,!0);return C===+C&&L===+L&&h===+h?Ne.createElement("path",Vg({},F,{className:rn("recharts-symbols",S),transform:"translate(".concat(C,", ").concat(L,")"),d:P()})):null};gv.registerSymbol=AX;function af(e){"@babel/helpers - typeof";return af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},af(e)}function Gg(){return Gg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gg.apply(this,arguments)}function mE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function MX(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mE(Object(r),!0).forEach(function(n){kp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function CX(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ek(n.key),n)}}function IX(e,t,r){return t&&gE(e.prototype,t),r&&gE(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function OX(e,t,r){return t=j4(t),kX(e,Sk()?Reflect.construct(t,r||[],j4(e).constructor):t.apply(e,r))}function kX(e,t){if(t&&(af(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return DX(e)}function DX(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sk(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Sk=function(){return!!e})()}function j4(e){return j4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},j4(e)}function LX(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wg(e,t)}function Wg(e,t){return Wg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,u){return n.__proto__=u,n},Wg(e,t)}function kp(e,t,r){return t=Ek(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ek(e){var t=zX(e,"string");return af(t)=="symbol"?t:t+""}function zX(e,t){if(af(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(af(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ya=32,yv=function(e){function t(){return CX(this,t),OX(this,t,arguments)}return LX(t,e),IX(t,[{key:"renderIcon",value:function(n){var u=this.props.inactiveColor,h=ya/2,p=ya/6,o=ya/3,_=n.inactive?u:n.color;if(n.type==="plainline")return Ne.createElement("line",{strokeWidth:4,fill:"none",stroke:_,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:h,x2:ya,y2:h,className:"recharts-legend-icon"});if(n.type==="line")return Ne.createElement("path",{strokeWidth:4,fill:"none",stroke:_,d:"M0,".concat(h,"h").concat(o,`
            A`).concat(p,",").concat(p,",0,1,1,").concat(2*o,",").concat(h,`
            H`).concat(ya,"M").concat(2*o,",").concat(h,`
            A`).concat(p,",").concat(p,",0,1,1,").concat(o,",").concat(h),className:"recharts-legend-icon"});if(n.type==="rect")return Ne.createElement("path",{stroke:"none",fill:_,d:"M0,".concat(ya/8,"h").concat(ya,"v").concat(ya*3/4,"h").concat(-ya,"z"),className:"recharts-legend-icon"});if(Ne.isValidElement(n.legendIcon)){var b=MX({},n);return delete b.legendIcon,Ne.cloneElement(n.legendIcon,b)}return Ne.createElement(gv,{fill:_,cx:h,cy:h,size:ya,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,u=this.props,h=u.payload,p=u.iconSize,o=u.layout,_=u.formatter,b=u.inactiveColor,P={x:0,y:0,width:ya,height:ya},S={display:o==="horizontal"?"inline-block":"block",marginRight:10},C={display:"inline-block",verticalAlign:"middle",marginRight:4};return h.map(function(L,F){var j=L.formatter||_,G=rn(kp(kp({"recharts-legend-item":!0},"legend-item-".concat(F),!0),"inactive",L.inactive));if(L.type==="none")return null;var $=Ar(L.value)?null:L.value;hl(!Ar(L.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var N=L.inactive?b:L.color;return Ne.createElement("li",Gg({className:G,style:S,key:"legend-item-".concat(F)},D4(n.props,L,F)),Ne.createElement(zg,{width:p,height:p,viewBox:P,style:C},n.renderIcon(L)),Ne.createElement("span",{className:"recharts-legend-item-text",style:{color:N}},j?j($,L,F):$))})}},{key:"render",value:function(){var n=this.props,u=n.payload,h=n.layout,p=n.align;if(!u||!u.length)return null;var o={padding:0,margin:0,textAlign:h==="horizontal"?p:"left"};return Ne.createElement("ul",{className:"recharts-default-legend",style:o},this.renderItems())}}])}(Pe.PureComponent);kp(yv,"displayName","Legend");kp(yv,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var RX=J6;function BX(){this.__data__=new RX,this.size=0}var FX=BX;function jX(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var $X=jX;function NX(e){return this.__data__.get(e)}var UX=NX;function VX(e){return this.__data__.has(e)}var GX=VX,WX=J6,qX=iv,HX=ov,ZX=200;function XX(e,t){var r=this.__data__;if(r instanceof WX){var n=r.__data__;if(!qX||n.length<ZX-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new HX(n)}return r.set(e,t),this.size=r.size,this}var KX=XX,YX=J6,JX=FX,QX=$X,eK=UX,tK=GX,rK=KX;function Rf(e){var t=this.__data__=new YX(e);this.size=t.size}Rf.prototype.clear=JX;Rf.prototype.delete=QX;Rf.prototype.get=eK;Rf.prototype.has=tK;Rf.prototype.set=rK;var Pk=Rf,nK="__lodash_hash_undefined__";function iK(e){return this.__data__.set(e,nK),this}var oK=iK;function aK(e){return this.__data__.has(e)}var sK=aK,lK=ov,uK=oK,cK=sK;function $4(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new lK;++t<r;)this.add(e[t])}$4.prototype.add=$4.prototype.push=uK;$4.prototype.has=cK;var Ak=$4;function hK(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var Mk=hK;function fK(e,t){return e.has(t)}var Ck=fK,dK=Ak,pK=Mk,mK=Ck,gK=1,yK=2;function _K(e,t,r,n,u,h){var p=r&gK,o=e.length,_=t.length;if(o!=_&&!(p&&_>o))return!1;var b=h.get(e),P=h.get(t);if(b&&P)return b==t&&P==e;var S=-1,C=!0,L=r&yK?new dK:void 0;for(h.set(e,t),h.set(t,e);++S<o;){var F=e[S],j=t[S];if(n)var G=p?n(j,F,S,t,e,h):n(F,j,S,e,t,h);if(G!==void 0){if(G)continue;C=!1;break}if(L){if(!pK(t,function($,N){if(!mK(L,N)&&(F===$||u(F,$,r,n,h)))return L.push(N)})){C=!1;break}}else if(!(F===j||u(F,j,r,n,h))){C=!1;break}}return h.delete(e),h.delete(t),C}var Ik=_K,vK=ks,xK=vK.Uint8Array,bK=xK;function wK(e){var t=-1,r=Array(e.size);return e.forEach(function(n,u){r[++t]=[u,n]}),r}var TK=wK;function SK(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var _v=SK,yE=b2,_E=bK,EK=nv,PK=Ik,AK=TK,MK=_v,CK=1,IK=2,OK="[object Boolean]",kK="[object Date]",DK="[object Error]",LK="[object Map]",zK="[object Number]",RK="[object RegExp]",BK="[object Set]",FK="[object String]",jK="[object Symbol]",$K="[object ArrayBuffer]",NK="[object DataView]",vE=yE?yE.prototype:void 0,i9=vE?vE.valueOf:void 0;function UK(e,t,r,n,u,h,p){switch(r){case NK:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case $K:return!(e.byteLength!=t.byteLength||!h(new _E(e),new _E(t)));case OK:case kK:case zK:return EK(+e,+t);case DK:return e.name==t.name&&e.message==t.message;case RK:case FK:return e==t+"";case LK:var o=AK;case BK:var _=n&CK;if(o||(o=MK),e.size!=t.size&&!_)return!1;var b=p.get(e);if(b)return b==t;n|=IK,p.set(e,t);var P=PK(o(e),o(t),n,u,h,p);return p.delete(e),P;case jK:if(i9)return i9.call(e)==i9.call(t)}return!1}var VK=UK;function GK(e,t){for(var r=-1,n=t.length,u=e.length;++r<n;)e[u+r]=t[r];return e}var Ok=GK,WK=Ok,qK=Do;function HK(e,t,r){var n=t(e);return qK(e)?n:WK(n,r(e))}var ZK=HK;function XK(e,t){for(var r=-1,n=e==null?0:e.length,u=0,h=[];++r<n;){var p=e[r];t(p,r,e)&&(h[u++]=p)}return h}var KK=XK;function YK(){return[]}var JK=YK,QK=KK,eY=JK,tY=Object.prototype,rY=tY.propertyIsEnumerable,xE=Object.getOwnPropertySymbols,nY=xE?function(e){return e==null?[]:(e=Object(e),QK(xE(e),function(t){return rY.call(e,t)}))}:eY,iY=nY;function oY(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var aY=oY,sY=wl,lY=Tl,uY="[object Arguments]";function cY(e){return lY(e)&&sY(e)==uY}var hY=cY,bE=hY,fY=Tl,kk=Object.prototype,dY=kk.hasOwnProperty,pY=kk.propertyIsEnumerable,mY=bE(function(){return arguments}())?bE:function(e){return fY(e)&&dY.call(e,"callee")&&!pY.call(e,"callee")},vv=mY,N4={exports:{}};function gY(){return!1}var yY=gY;N4.exports;(function(e,t){var r=ks,n=yY,u=t&&!t.nodeType&&t,h=u&&!0&&e&&!e.nodeType&&e,p=h&&h.exports===u,o=p?r.Buffer:void 0,_=o?o.isBuffer:void 0,b=_||n;e.exports=b})(N4,N4.exports);var Dk=N4.exports,_Y=9007199254740991,vY=/^(?:0|[1-9]\d*)$/;function xY(e,t){var r=typeof e;return t=t??_Y,!!t&&(r=="number"||r!="symbol"&&vY.test(e))&&e>-1&&e%1==0&&e<t}var xv=xY,bY=9007199254740991;function wY(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=bY}var bv=wY,TY=wl,SY=bv,EY=Tl,PY="[object Arguments]",AY="[object Array]",MY="[object Boolean]",CY="[object Date]",IY="[object Error]",OY="[object Function]",kY="[object Map]",DY="[object Number]",LY="[object Object]",zY="[object RegExp]",RY="[object Set]",BY="[object String]",FY="[object WeakMap]",jY="[object ArrayBuffer]",$Y="[object DataView]",NY="[object Float32Array]",UY="[object Float64Array]",VY="[object Int8Array]",GY="[object Int16Array]",WY="[object Int32Array]",qY="[object Uint8Array]",HY="[object Uint8ClampedArray]",ZY="[object Uint16Array]",XY="[object Uint32Array]",Tn={};Tn[NY]=Tn[UY]=Tn[VY]=Tn[GY]=Tn[WY]=Tn[qY]=Tn[HY]=Tn[ZY]=Tn[XY]=!0;Tn[PY]=Tn[AY]=Tn[jY]=Tn[MY]=Tn[$Y]=Tn[CY]=Tn[IY]=Tn[OY]=Tn[kY]=Tn[DY]=Tn[LY]=Tn[zY]=Tn[RY]=Tn[BY]=Tn[FY]=!1;function KY(e){return EY(e)&&SY(e.length)&&!!Tn[TY(e)]}var YY=KY;function JY(e){return function(t){return e(t)}}var Lk=JY,U4={exports:{}};U4.exports;(function(e,t){var r=UO,n=t&&!t.nodeType&&t,u=n&&!0&&e&&!e.nodeType&&e,h=u&&u.exports===n,p=h&&r.process,o=function(){try{var _=u&&u.require&&u.require("util").types;return _||p&&p.binding&&p.binding("util")}catch{}}();e.exports=o})(U4,U4.exports);var QY=U4.exports,eJ=YY,tJ=Lk,wE=QY,TE=wE&&wE.isTypedArray,rJ=TE?tJ(TE):eJ,zk=rJ,nJ=aY,iJ=vv,oJ=Do,aJ=Dk,sJ=xv,lJ=zk,uJ=Object.prototype,cJ=uJ.hasOwnProperty;function hJ(e,t){var r=oJ(e),n=!r&&iJ(e),u=!r&&!n&&aJ(e),h=!r&&!n&&!u&&lJ(e),p=r||n||u||h,o=p?nJ(e.length,String):[],_=o.length;for(var b in e)(t||cJ.call(e,b))&&!(p&&(b=="length"||u&&(b=="offset"||b=="parent")||h&&(b=="buffer"||b=="byteLength"||b=="byteOffset")||sJ(b,_)))&&o.push(b);return o}var fJ=hJ,dJ=Object.prototype;function pJ(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||dJ;return e===r}var mJ=pJ;function gJ(e,t){return function(r){return e(t(r))}}var Rk=gJ,yJ=Rk,_J=yJ(Object.keys,Object),vJ=_J,xJ=mJ,bJ=vJ,wJ=Object.prototype,TJ=wJ.hasOwnProperty;function SJ(e){if(!xJ(e))return bJ(e);var t=[];for(var r in Object(e))TJ.call(e,r)&&r!="constructor"&&t.push(r);return t}var EJ=SJ,PJ=rv,AJ=bv;function MJ(e){return e!=null&&AJ(e.length)&&!PJ(e)}var T2=MJ,CJ=fJ,IJ=EJ,OJ=T2;function kJ(e){return OJ(e)?CJ(e):IJ(e)}var gm=kJ,DJ=ZK,LJ=iY,zJ=gm;function RJ(e){return DJ(e,zJ,LJ)}var BJ=RJ,SE=BJ,FJ=1,jJ=Object.prototype,$J=jJ.hasOwnProperty;function NJ(e,t,r,n,u,h){var p=r&FJ,o=SE(e),_=o.length,b=SE(t),P=b.length;if(_!=P&&!p)return!1;for(var S=_;S--;){var C=o[S];if(!(p?C in t:$J.call(t,C)))return!1}var L=h.get(e),F=h.get(t);if(L&&F)return L==t&&F==e;var j=!0;h.set(e,t),h.set(t,e);for(var G=p;++S<_;){C=o[S];var $=e[C],N=t[C];if(n)var U=p?n(N,$,C,t,e,h):n($,N,C,e,t,h);if(!(U===void 0?$===N||u($,N,r,n,h):U)){j=!1;break}G||(G=C=="constructor")}if(j&&!G){var J=e.constructor,q=t.constructor;J!=q&&"constructor"in e&&"constructor"in t&&!(typeof J=="function"&&J instanceof J&&typeof q=="function"&&q instanceof q)&&(j=!1)}return h.delete(e),h.delete(t),j}var UJ=NJ,VJ=o1,GJ=ks,WJ=VJ(GJ,"DataView"),qJ=WJ,HJ=o1,ZJ=ks,XJ=HJ(ZJ,"Promise"),KJ=XJ,YJ=o1,JJ=ks,QJ=YJ(JJ,"Set"),Bk=QJ,eQ=o1,tQ=ks,rQ=eQ(tQ,"WeakMap"),nQ=rQ,qg=qJ,Hg=iv,Zg=KJ,Xg=Bk,Kg=nQ,Fk=wl,Bf=GO,EE="[object Map]",iQ="[object Object]",PE="[object Promise]",AE="[object Set]",ME="[object WeakMap]",CE="[object DataView]",oQ=Bf(qg),aQ=Bf(Hg),sQ=Bf(Zg),lQ=Bf(Xg),uQ=Bf(Kg),Pc=Fk;(qg&&Pc(new qg(new ArrayBuffer(1)))!=CE||Hg&&Pc(new Hg)!=EE||Zg&&Pc(Zg.resolve())!=PE||Xg&&Pc(new Xg)!=AE||Kg&&Pc(new Kg)!=ME)&&(Pc=function(e){var t=Fk(e),r=t==iQ?e.constructor:void 0,n=r?Bf(r):"";if(n)switch(n){case oQ:return CE;case aQ:return EE;case sQ:return PE;case lQ:return AE;case uQ:return ME}return t});var cQ=Pc,o9=Pk,hQ=Ik,fQ=VK,dQ=UJ,IE=cQ,OE=Do,kE=Dk,pQ=zk,mQ=1,DE="[object Arguments]",LE="[object Array]",x5="[object Object]",gQ=Object.prototype,zE=gQ.hasOwnProperty;function yQ(e,t,r,n,u,h){var p=OE(e),o=OE(t),_=p?LE:IE(e),b=o?LE:IE(t);_=_==DE?x5:_,b=b==DE?x5:b;var P=_==x5,S=b==x5,C=_==b;if(C&&kE(e)){if(!kE(t))return!1;p=!0,P=!1}if(C&&!P)return h||(h=new o9),p||pQ(e)?hQ(e,t,r,n,u,h):fQ(e,t,_,r,n,u,h);if(!(r&mQ)){var L=P&&zE.call(e,"__wrapped__"),F=S&&zE.call(t,"__wrapped__");if(L||F){var j=L?e.value():e,G=F?t.value():t;return h||(h=new o9),u(j,G,r,n,h)}}return C?(h||(h=new o9),dQ(e,t,r,n,u,h)):!1}var _Q=yQ,vQ=_Q,RE=Tl;function jk(e,t,r,n,u){return e===t?!0:e==null||t==null||!RE(e)&&!RE(t)?e!==e&&t!==t:vQ(e,t,r,n,jk,u)}var wv=jk,xQ=Pk,bQ=wv,wQ=1,TQ=2;function SQ(e,t,r,n){var u=r.length,h=u,p=!n;if(e==null)return!h;for(e=Object(e);u--;){var o=r[u];if(p&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++u<h;){o=r[u];var _=o[0],b=e[_],P=o[1];if(p&&o[2]){if(b===void 0&&!(_ in e))return!1}else{var S=new xQ;if(n)var C=n(b,P,_,e,t,S);if(!(C===void 0?bQ(P,b,wQ|TQ,n,S):C))return!1}}return!0}var EQ=SQ,PQ=Ou;function AQ(e){return e===e&&!PQ(e)}var $k=AQ,MQ=$k,CQ=gm;function IQ(e){for(var t=CQ(e),r=t.length;r--;){var n=t[r],u=e[n];t[r]=[n,u,MQ(u)]}return t}var OQ=IQ;function kQ(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var Nk=kQ,DQ=EQ,LQ=OQ,zQ=Nk;function RQ(e){var t=LQ(e);return t.length==1&&t[0][2]?zQ(t[0][0],t[0][1]):function(r){return r===e||DQ(r,e,t)}}var BQ=RQ;function FQ(e,t){return e!=null&&t in Object(e)}var jQ=FQ,$Q=XO,NQ=vv,UQ=Do,VQ=xv,GQ=bv,WQ=em;function qQ(e,t,r){t=$Q(t,e);for(var n=-1,u=t.length,h=!1;++n<u;){var p=WQ(t[n]);if(!(h=e!=null&&r(e,p)))break;e=e[p]}return h||++n!=u?h:(u=e==null?0:e.length,!!u&&GQ(u)&&VQ(p,u)&&(UQ(e)||NQ(e)))}var HQ=qQ,ZQ=jQ,XQ=HQ;function KQ(e,t){return e!=null&&XQ(e,t,ZQ)}var YQ=KQ,JQ=wv,QQ=KO,eee=YQ,tee=tv,ree=$k,nee=Nk,iee=em,oee=1,aee=2;function see(e,t){return tee(e)&&ree(t)?nee(iee(e),t):function(r){var n=QQ(r,e);return n===void 0&&n===t?eee(r,e):JQ(t,n,oee|aee)}}var lee=see;function uee(e){return e}var Ff=uee;function cee(e){return function(t){return t==null?void 0:t[e]}}var hee=cee,fee=lv;function dee(e){return function(t){return fee(t,e)}}var pee=dee,mee=hee,gee=pee,yee=tv,_ee=em;function vee(e){return yee(e)?mee(_ee(e)):gee(e)}var xee=vee,bee=BQ,wee=lee,Tee=Ff,See=Do,Eee=xee;function Pee(e){return typeof e=="function"?e:e==null?Tee:typeof e=="object"?See(e)?wee(e[0],e[1]):bee(e):Eee(e)}var ku=Pee;function Aee(e,t,r,n){for(var u=e.length,h=r+(n?1:-1);n?h--:++h<u;)if(t(e[h],h,e))return h;return-1}var Uk=Aee;function Mee(e){return e!==e}var Cee=Mee;function Iee(e,t,r){for(var n=r-1,u=e.length;++n<u;)if(e[n]===t)return n;return-1}var Oee=Iee,kee=Uk,Dee=Cee,Lee=Oee;function zee(e,t,r){return t===t?Lee(e,t,r):kee(e,Dee,r)}var Ree=zee,Bee=Ree;function Fee(e,t){var r=e==null?0:e.length;return!!r&&Bee(e,t,0)>-1}var jee=Fee;function $ee(e,t,r){for(var n=-1,u=e==null?0:e.length;++n<u;)if(r(t,e[n]))return!0;return!1}var Nee=$ee;function Uee(){}var Vee=Uee,a9=Bk,Gee=Vee,Wee=_v,qee=1/0,Hee=a9&&1/Wee(new a9([,-0]))[1]==qee?function(e){return new a9(e)}:Gee,Zee=Hee,Xee=Ak,Kee=jee,Yee=Nee,Jee=Ck,Qee=Zee,ete=_v,tte=200;function rte(e,t,r){var n=-1,u=Kee,h=e.length,p=!0,o=[],_=o;if(r)p=!1,u=Yee;else if(h>=tte){var b=t?null:Qee(e);if(b)return ete(b);p=!1,u=Jee,_=new Xee}else _=t?[]:o;e:for(;++n<h;){var P=e[n],S=t?t(P):P;if(P=r||P!==0?P:0,p&&S===S){for(var C=_.length;C--;)if(_[C]===S)continue e;t&&_.push(S),o.push(P)}else u(_,S,r)||(_!==o&&_.push(S),o.push(P))}return o}var nte=rte,ite=ku,ote=nte;function ate(e,t){return e&&e.length?ote(e,ite(t)):[]}var ste=ate;const BE=Br(ste);function Vk(e,t,r){return t===!0?BE(e,r):Ar(t)?BE(e,t):e}function sf(e){"@babel/helpers - typeof";return sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sf(e)}var lte=["ref"];function FE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function Qs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FE(Object(r),!0).forEach(function(n){ym(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ute(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Wk(n.key),n)}}function cte(e,t,r){return t&&jE(e.prototype,t),r&&jE(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function hte(e,t,r){return t=V4(t),fte(e,Gk()?Reflect.construct(t,r||[],V4(e).constructor):t.apply(e,r))}function fte(e,t){if(t&&(sf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dte(e)}function dte(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gk(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Gk=function(){return!!e})()}function V4(e){return V4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},V4(e)}function pte(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yg(e,t)}function Yg(e,t){return Yg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,u){return n.__proto__=u,n},Yg(e,t)}function ym(e,t,r){return t=Wk(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wk(e){var t=mte(e,"string");return sf(t)=="symbol"?t:t+""}function mte(e,t){if(sf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(sf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gte(e,t){if(e==null)return{};var r=yte(e,t),n,u;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(u=0;u<h.length;u++)n=h[u],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function yte(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function _te(e){return e.value}function vte(e,t){if(Ne.isValidElement(e))return Ne.cloneElement(e,t);if(typeof e=="function")return Ne.createElement(e,t);t.ref;var r=gte(t,lte);return Ne.createElement(yv,r)}var $E=1,Vh=function(e){function t(){var r;ute(this,t);for(var n=arguments.length,u=new Array(n),h=0;h<n;h++)u[h]=arguments[h];return r=hte(this,t,[].concat(u)),ym(r,"lastBoundingBox",{width:-1,height:-1}),r}return pte(t,e),cte(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,u=this.getBBox();u?(Math.abs(u.width-this.lastBoundingBox.width)>$E||Math.abs(u.height-this.lastBoundingBox.height)>$E)&&(this.lastBoundingBox.width=u.width,this.lastBoundingBox.height=u.height,n&&n(u)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Qs({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var u=this.props,h=u.layout,p=u.align,o=u.verticalAlign,_=u.margin,b=u.chartWidth,P=u.chartHeight,S,C;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(p==="center"&&h==="vertical"){var L=this.getBBoxSnapshot();S={left:((b||0)-L.width)/2}}else S=p==="right"?{right:_&&_.right||0}:{left:_&&_.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(o==="middle"){var F=this.getBBoxSnapshot();C={top:((P||0)-F.height)/2}}else C=o==="bottom"?{bottom:_&&_.bottom||0}:{top:_&&_.top||0};return Qs(Qs({},S),C)}},{key:"render",value:function(){var n=this,u=this.props,h=u.content,p=u.width,o=u.height,_=u.wrapperStyle,b=u.payloadUniqBy,P=u.payload,S=Qs(Qs({position:"absolute",width:p||"auto",height:o||"auto"},this.getDefaultPosition(_)),_);return Ne.createElement("div",{className:"recharts-legend-wrapper",style:S,ref:function(L){n.wrapperNode=L}},vte(h,Qs(Qs({},this.props),{},{payload:Vk(P,b,_te)})))}}],[{key:"getWithHeight",value:function(n,u){var h=Qs(Qs({},this.defaultProps),n.props),p=h.layout;return p==="vertical"&&Bt(n.props.height)?{height:n.props.height}:p==="horizontal"?{width:n.props.width||u}:null}}])}(Pe.PureComponent);ym(Vh,"displayName","Legend");ym(Vh,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var NE=b2,xte=vv,bte=Do,UE=NE?NE.isConcatSpreadable:void 0;function wte(e){return bte(e)||xte(e)||!!(UE&&e&&e[UE])}var Tte=wte,Ste=Ok,Ete=Tte;function qk(e,t,r,n,u){var h=-1,p=e.length;for(r||(r=Ete),u||(u=[]);++h<p;){var o=e[h];t>0&&r(o)?t>1?qk(o,t-1,r,n,u):Ste(u,o):n||(u[u.length]=o)}return u}var Hk=qk;function Pte(e){return function(t,r,n){for(var u=-1,h=Object(t),p=n(t),o=p.length;o--;){var _=p[e?o:++u];if(r(h[_],_,h)===!1)break}return t}}var Ate=Pte,Mte=Ate,Cte=Mte(),Ite=Cte,Ote=Ite,kte=gm;function Dte(e,t){return e&&Ote(e,t,kte)}var Zk=Dte,Lte=T2;function zte(e,t){return function(r,n){if(r==null)return r;if(!Lte(r))return e(r,n);for(var u=r.length,h=t?u:-1,p=Object(r);(t?h--:++h<u)&&n(p[h],h,p)!==!1;);return r}}var Rte=zte,Bte=Zk,Fte=Rte,jte=Fte(Bte),Tv=jte,$te=Tv,Nte=T2;function Ute(e,t){var r=-1,n=Nte(e)?Array(e.length):[];return $te(e,function(u,h,p){n[++r]=t(u,h,p)}),n}var Xk=Ute;function Vte(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var Gte=Vte,VE=Of;function Wte(e,t){if(e!==t){var r=e!==void 0,n=e===null,u=e===e,h=VE(e),p=t!==void 0,o=t===null,_=t===t,b=VE(t);if(!o&&!b&&!h&&e>t||h&&p&&_&&!o&&!b||n&&p&&_||!r&&_||!u)return 1;if(!n&&!h&&!b&&e<t||b&&r&&u&&!n&&!h||o&&r&&u||!p&&u||!_)return-1}return 0}var qte=Wte,Hte=qte;function Zte(e,t,r){for(var n=-1,u=e.criteria,h=t.criteria,p=u.length,o=r.length;++n<p;){var _=Hte(u[n],h[n]);if(_){if(n>=o)return _;var b=r[n];return _*(b=="desc"?-1:1)}}return e.index-t.index}var Xte=Zte,s9=sv,Kte=lv,Yte=ku,Jte=Xk,Qte=Gte,ere=Lk,tre=Xte,rre=Ff,nre=Do;function ire(e,t,r){t.length?t=s9(t,function(h){return nre(h)?function(p){return Kte(p,h.length===1?h[0]:h)}:h}):t=[rre];var n=-1;t=s9(t,ere(Yte));var u=Jte(e,function(h,p,o){var _=s9(t,function(b){return b(h)});return{criteria:_,index:++n,value:h}});return Qte(u,function(h,p){return tre(h,p,r)})}var ore=ire;function are(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var sre=are,lre=sre,GE=Math.max;function ure(e,t,r){return t=GE(t===void 0?e.length-1:t,0),function(){for(var n=arguments,u=-1,h=GE(n.length-t,0),p=Array(h);++u<h;)p[u]=n[t+u];u=-1;for(var o=Array(t+1);++u<t;)o[u]=n[u];return o[t]=r(p),lre(e,this,o)}}var cre=ure;function hre(e){return function(){return e}}var fre=hre,dre=o1,pre=function(){try{var e=dre(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Kk=pre,mre=fre,WE=Kk,gre=Ff,yre=WE?function(e,t){return WE(e,"toString",{configurable:!0,enumerable:!1,value:mre(t),writable:!0})}:gre,_re=yre,vre=800,xre=16,bre=Date.now;function wre(e){var t=0,r=0;return function(){var n=bre(),u=xre-(n-r);if(r=n,u>0){if(++t>=vre)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Tre=wre,Sre=_re,Ere=Tre,Pre=Ere(Sre),Are=Pre,Mre=Ff,Cre=cre,Ire=Are;function Ore(e,t){return Ire(Cre(e,t,Mre),e+"")}var kre=Ore,Dre=nv,Lre=T2,zre=xv,Rre=Ou;function Bre(e,t,r){if(!Rre(r))return!1;var n=typeof t;return(n=="number"?Lre(r)&&zre(t,r.length):n=="string"&&t in r)?Dre(r[t],e):!1}var _m=Bre,Fre=Hk,jre=ore,$re=kre,qE=_m,Nre=$re(function(e,t){if(e==null)return[];var r=t.length;return r>1&&qE(e,t[0],t[1])?t=[]:r>2&&qE(t[0],t[1],t[2])&&(t=[t[0]]),jre(e,Fre(t,1),[])}),Ure=Nre;const Sv=Br(Ure);function Dp(e){"@babel/helpers - typeof";return Dp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dp(e)}function Jg(){return Jg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Jg.apply(this,arguments)}function Vre(e,t){return Hre(e)||qre(e,t)||Wre(e,t)||Gre()}function Gre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wre(e,t){if(e){if(typeof e=="string")return HE(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return HE(e,t)}}function HE(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function qre(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,u,h,p,o=[],_=!0,b=!1;try{if(h=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;_=!1}else for(;!(_=(n=h.call(r)).done)&&(o.push(n.value),o.length!==t);_=!0);}catch(P){b=!0,u=P}finally{try{if(!_&&r.return!=null&&(p=r.return(),Object(p)!==p))return}finally{if(b)throw u}}return o}}function Hre(e){if(Array.isArray(e))return e}function ZE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function l9(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZE(Object(r),!0).forEach(function(n){Zre(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Zre(e,t,r){return t=Xre(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xre(e){var t=Kre(e,"string");return Dp(t)=="symbol"?t:t+""}function Kre(e,t){if(Dp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Dp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yre(e){return Array.isArray(e)&&fi(e[0])&&fi(e[1])?e.join(" ~ "):e}var Jre=function(t){var r=t.separator,n=r===void 0?" : ":r,u=t.contentStyle,h=u===void 0?{}:u,p=t.itemStyle,o=p===void 0?{}:p,_=t.labelStyle,b=_===void 0?{}:_,P=t.payload,S=t.formatter,C=t.itemSorter,L=t.wrapperClassName,F=t.labelClassName,j=t.label,G=t.labelFormatter,$=t.accessibilityLayer,N=$===void 0?!1:$,U=function(){if(P&&P.length){var De={padding:0,margin:0},Je=(C?Sv(P,C):P).map(function(we,ve){if(we.type==="none")return null;var Ce=l9({display:"block",paddingTop:4,paddingBottom:4,color:we.color||"#000"},o),Le=we.formatter||S||Yre,ge=we.value,$e=we.name,rt=ge,ft=$e;if(Le&&rt!=null&&ft!=null){var lt=Le(ge,$e,we,ve,P);if(Array.isArray(lt)){var Tt=Vre(lt,2);rt=Tt[0],ft=Tt[1]}else rt=lt}return Ne.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(ve),style:Ce},fi(ft)?Ne.createElement("span",{className:"recharts-tooltip-item-name"},ft):null,fi(ft)?Ne.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,Ne.createElement("span",{className:"recharts-tooltip-item-value"},rt),Ne.createElement("span",{className:"recharts-tooltip-item-unit"},we.unit||""))});return Ne.createElement("ul",{className:"recharts-tooltip-item-list",style:De},Je)}return null},J=l9({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},h),q=l9({margin:0},b),Y=!tn(j),X=Y?j:"",ue=rn("recharts-default-tooltip",L),oe=rn("recharts-tooltip-label",F);Y&&G&&P!==void 0&&P!==null&&(X=G(j,P));var Re=N?{role:"status","aria-live":"assertive"}:{};return Ne.createElement("div",Jg({className:ue,style:J},Re),Ne.createElement("p",{className:oe,style:q},Ne.isValidElement(X)?X:"".concat(X)),U())};function Lp(e){"@babel/helpers - typeof";return Lp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lp(e)}function b5(e,t,r){return t=Qre(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qre(e){var t=ene(e,"string");return Lp(t)=="symbol"?t:t+""}function ene(e,t){if(Lp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Lp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Od="recharts-tooltip-wrapper",tne={visibility:"hidden"};function rne(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return rn(Od,b5(b5(b5(b5({},"".concat(Od,"-right"),Bt(r)&&t&&Bt(t.x)&&r>=t.x),"".concat(Od,"-left"),Bt(r)&&t&&Bt(t.x)&&r<t.x),"".concat(Od,"-bottom"),Bt(n)&&t&&Bt(t.y)&&n>=t.y),"".concat(Od,"-top"),Bt(n)&&t&&Bt(t.y)&&n<t.y))}function XE(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,u=e.offsetTopLeft,h=e.position,p=e.reverseDirection,o=e.tooltipDimension,_=e.viewBox,b=e.viewBoxDimension;if(h&&Bt(h[n]))return h[n];var P=r[n]-o-u,S=r[n]+u;if(t[n])return p[n]?P:S;if(p[n]){var C=P,L=_[n];return C<L?Math.max(S,_[n]):Math.max(P,_[n])}var F=S+o,j=_[n]+b;return F>j?Math.max(P,_[n]):Math.max(S,_[n])}function nne(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function ine(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,u=e.position,h=e.reverseDirection,p=e.tooltipBox,o=e.useTranslate3d,_=e.viewBox,b,P,S;return p.height>0&&p.width>0&&r?(P=XE({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:u,reverseDirection:h,tooltipDimension:p.width,viewBox:_,viewBoxDimension:_.width}),S=XE({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:u,reverseDirection:h,tooltipDimension:p.height,viewBox:_,viewBoxDimension:_.height}),b=nne({translateX:P,translateY:S,useTranslate3d:o})):b=tne,{cssProperties:b,cssClasses:rne({translateX:P,translateY:S,coordinate:r})}}function lf(e){"@babel/helpers - typeof";return lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lf(e)}function KE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function YE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KE(Object(r),!0).forEach(function(n){ey(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function one(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function JE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Jk(n.key),n)}}function ane(e,t,r){return t&&JE(e.prototype,t),r&&JE(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function sne(e,t,r){return t=G4(t),lne(e,Yk()?Reflect.construct(t,r||[],G4(e).constructor):t.apply(e,r))}function lne(e,t){if(t&&(lf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return une(e)}function une(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Yk(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Yk=function(){return!!e})()}function G4(e){return G4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},G4(e)}function cne(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qg(e,t)}function Qg(e,t){return Qg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,u){return n.__proto__=u,n},Qg(e,t)}function ey(e,t,r){return t=Jk(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jk(e){var t=hne(e,"string");return lf(t)=="symbol"?t:t+""}function hne(e,t){if(lf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(lf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var QE=1,fne=function(e){function t(){var r;one(this,t);for(var n=arguments.length,u=new Array(n),h=0;h<n;h++)u[h]=arguments[h];return r=sne(this,t,[].concat(u)),ey(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),ey(r,"handleKeyDown",function(p){if(p.key==="Escape"){var o,_,b,P;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(o=(_=r.props.coordinate)===null||_===void 0?void 0:_.x)!==null&&o!==void 0?o:0,y:(b=(P=r.props.coordinate)===null||P===void 0?void 0:P.y)!==null&&b!==void 0?b:0}})}}),r}return cne(t,e),ane(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>QE||Math.abs(n.height-this.state.lastBoundingBox.height)>QE)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,u;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((u=this.props.coordinate)===null||u===void 0?void 0:u.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,u=this.props,h=u.active,p=u.allowEscapeViewBox,o=u.animationDuration,_=u.animationEasing,b=u.children,P=u.coordinate,S=u.hasPayload,C=u.isAnimationActive,L=u.offset,F=u.position,j=u.reverseDirection,G=u.useTranslate3d,$=u.viewBox,N=u.wrapperStyle,U=ine({allowEscapeViewBox:p,coordinate:P,offsetTopLeft:L,position:F,reverseDirection:j,tooltipBox:this.state.lastBoundingBox,useTranslate3d:G,viewBox:$}),J=U.cssClasses,q=U.cssProperties,Y=YE(YE({transition:C&&h?"transform ".concat(o,"ms ").concat(_):void 0},q),{},{pointerEvents:"none",visibility:!this.state.dismissed&&h&&S?"visible":"hidden",position:"absolute",top:0,left:0},N);return Ne.createElement("div",{tabIndex:-1,className:J,style:Y,ref:function(ue){n.wrapperNode=ue}},b)}}])}(Pe.PureComponent),dne=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Tu={isSsr:dne(),get:function(t){return Tu[t]},set:function(t,r){if(typeof t=="string")Tu[t]=r;else{var n=Object.keys(t);n&&n.length&&n.forEach(function(u){Tu[u]=t[u]})}}};function uf(e){"@babel/helpers - typeof";return uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uf(e)}function eP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function tP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eP(Object(r),!0).forEach(function(n){Ev(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,eD(n.key),n)}}function mne(e,t,r){return t&&rP(e.prototype,t),r&&rP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function gne(e,t,r){return t=W4(t),yne(e,Qk()?Reflect.construct(t,r||[],W4(e).constructor):t.apply(e,r))}function yne(e,t){if(t&&(uf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _ne(e)}function _ne(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qk(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Qk=function(){return!!e})()}function W4(e){return W4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},W4(e)}function vne(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ty(e,t)}function ty(e,t){return ty=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,u){return n.__proto__=u,n},ty(e,t)}function Ev(e,t,r){return t=eD(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eD(e){var t=xne(e,"string");return uf(t)=="symbol"?t:t+""}function xne(e,t){if(uf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(uf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bne(e){return e.dataKey}function wne(e,t){return Ne.isValidElement(e)?Ne.cloneElement(e,t):typeof e=="function"?Ne.createElement(e,t):Ne.createElement(Jre,t)}var tl=function(e){function t(){return pne(this,t),gne(this,t,arguments)}return vne(t,e),mne(t,[{key:"render",value:function(){var n=this,u=this.props,h=u.active,p=u.allowEscapeViewBox,o=u.animationDuration,_=u.animationEasing,b=u.content,P=u.coordinate,S=u.filterNull,C=u.isAnimationActive,L=u.offset,F=u.payload,j=u.payloadUniqBy,G=u.position,$=u.reverseDirection,N=u.useTranslate3d,U=u.viewBox,J=u.wrapperStyle,q=F??[];S&&q.length&&(q=Vk(F.filter(function(X){return X.value!=null&&(X.hide!==!0||n.props.includeHidden)}),j,bne));var Y=q.length>0;return Ne.createElement(fne,{allowEscapeViewBox:p,animationDuration:o,animationEasing:_,isAnimationActive:C,active:h,coordinate:P,hasPayload:Y,offset:L,position:G,reverseDirection:$,useTranslate3d:N,viewBox:U,wrapperStyle:J},wne(b,tP(tP({},this.props),{},{payload:q})))}}])}(Pe.PureComponent);Ev(tl,"displayName","Tooltip");Ev(tl,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Tu.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Tne=ks,Sne=function(){return Tne.Date.now()},Ene=Sne,Pne=/\s/;function Ane(e){for(var t=e.length;t--&&Pne.test(e.charAt(t)););return t}var Mne=Ane,Cne=Mne,Ine=/^\s+/;function One(e){return e&&e.slice(0,Cne(e)+1).replace(Ine,"")}var kne=One,Dne=kne,nP=Ou,Lne=Of,iP=0/0,zne=/^[-+]0x[0-9a-f]+$/i,Rne=/^0b[01]+$/i,Bne=/^0o[0-7]+$/i,Fne=parseInt;function jne(e){if(typeof e=="number")return e;if(Lne(e))return iP;if(nP(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=nP(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Dne(e);var r=Rne.test(e);return r||Bne.test(e)?Fne(e.slice(2),r?2:8):zne.test(e)?iP:+e}var tD=jne,$ne=Ou,u9=Ene,oP=tD,Nne="Expected a function",Une=Math.max,Vne=Math.min;function Gne(e,t,r){var n,u,h,p,o,_,b=0,P=!1,S=!1,C=!0;if(typeof e!="function")throw new TypeError(Nne);t=oP(t)||0,$ne(r)&&(P=!!r.leading,S="maxWait"in r,h=S?Une(oP(r.maxWait)||0,t):h,C="trailing"in r?!!r.trailing:C);function L(Y){var X=n,ue=u;return n=u=void 0,b=Y,p=e.apply(ue,X),p}function F(Y){return b=Y,o=setTimeout($,t),P?L(Y):p}function j(Y){var X=Y-_,ue=Y-b,oe=t-X;return S?Vne(oe,h-ue):oe}function G(Y){var X=Y-_,ue=Y-b;return _===void 0||X>=t||X<0||S&&ue>=h}function $(){var Y=u9();if(G(Y))return N(Y);o=setTimeout($,j(Y))}function N(Y){return o=void 0,C&&n?L(Y):(n=u=void 0,p)}function U(){o!==void 0&&clearTimeout(o),b=0,n=_=u=o=void 0}function J(){return o===void 0?p:N(u9())}function q(){var Y=u9(),X=G(Y);if(n=arguments,u=this,_=Y,X){if(o===void 0)return F(_);if(S)return clearTimeout(o),o=setTimeout($,t),L(_)}return o===void 0&&(o=setTimeout($,t)),p}return q.cancel=U,q.flush=J,q}var Wne=Gne,qne=Wne,Hne=Ou,Zne="Expected a function";function Xne(e,t,r){var n=!0,u=!0;if(typeof e!="function")throw new TypeError(Zne);return Hne(r)&&(n="leading"in r?!!r.leading:n,u="trailing"in r?!!r.trailing:u),qne(e,t,{leading:n,maxWait:t,trailing:u})}var Kne=Xne;const rD=Br(Kne);function zp(e){"@babel/helpers - typeof";return zp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zp(e)}function aP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function w5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aP(Object(r),!0).forEach(function(n){Yne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Yne(e,t,r){return t=Jne(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jne(e){var t=Qne(e,"string");return zp(t)=="symbol"?t:t+""}function Qne(e,t){if(zp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(zp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eie(e,t){return iie(e)||nie(e,t)||rie(e,t)||tie()}function tie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rie(e,t){if(e){if(typeof e=="string")return sP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sP(e,t)}}function sP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function nie(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,u,h,p,o=[],_=!0,b=!1;try{if(h=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;_=!1}else for(;!(_=(n=h.call(r)).done)&&(o.push(n.value),o.length!==t);_=!0);}catch(P){b=!0,u=P}finally{try{if(!_&&r.return!=null&&(p=r.return(),Object(p)!==p))return}finally{if(b)throw u}}return o}}function iie(e){if(Array.isArray(e))return e}var S2e=Pe.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,u=n===void 0?{width:-1,height:-1}:n,h=e.width,p=h===void 0?"100%":h,o=e.height,_=o===void 0?"100%":o,b=e.minWidth,P=b===void 0?0:b,S=e.minHeight,C=e.maxHeight,L=e.children,F=e.debounce,j=F===void 0?0:F,G=e.id,$=e.className,N=e.onResize,U=e.style,J=U===void 0?{}:U,q=Pe.useRef(null),Y=Pe.useRef();Y.current=N,Pe.useImperativeHandle(t,function(){return Object.defineProperty(q.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),q.current},configurable:!0})});var X=Pe.useState({containerWidth:u.width,containerHeight:u.height}),ue=eie(X,2),oe=ue[0],Re=ue[1],ze=Pe.useCallback(function(Je,we){Re(function(ve){var Ce=Math.round(Je),Le=Math.round(we);return ve.containerWidth===Ce&&ve.containerHeight===Le?ve:{containerWidth:Ce,containerHeight:Le}})},[]);Pe.useEffect(function(){var Je=function($e){var rt,ft=$e[0].contentRect,lt=ft.width,Tt=ft.height;ze(lt,Tt),(rt=Y.current)===null||rt===void 0||rt.call(Y,lt,Tt)};j>0&&(Je=rD(Je,j,{trailing:!0,leading:!1}));var we=new ResizeObserver(Je),ve=q.current.getBoundingClientRect(),Ce=ve.width,Le=ve.height;return ze(Ce,Le),we.observe(q.current),function(){we.disconnect()}},[ze,j]);var De=Pe.useMemo(function(){var Je=oe.containerWidth,we=oe.containerHeight;if(Je<0||we<0)return null;hl(Lc(p)||Lc(_),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,p,_),hl(!r||r>0,"The aspect(%s) must be greater than zero.",r);var ve=Lc(p)?Je:p,Ce=Lc(_)?we:_;r&&r>0&&(ve?Ce=ve/r:Ce&&(ve=Ce*r),C&&Ce>C&&(Ce=C)),hl(ve>0||Ce>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,ve,Ce,p,_,P,S,r);var Le=!Array.isArray(L)&&cl(L.type).endsWith("Chart");return Ne.Children.map(L,function(ge){return Ne.isValidElement(ge)?Pe.cloneElement(ge,w5({width:ve,height:Ce},Le?{style:w5({height:"100%",width:"100%",maxHeight:Ce,maxWidth:ve},ge.props.style)}:{})):ge})},[r,L,_,C,S,P,oe,p]);return Ne.createElement("div",{id:G?"".concat(G):void 0,className:rn("recharts-responsive-container",$),style:w5(w5({},J),{},{width:p,height:_,minWidth:P,minHeight:S,maxHeight:C}),ref:q},De)}),nD=function(t){return null};nD.displayName="Cell";function Rp(e){"@babel/helpers - typeof";return Rp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rp(e)}function lP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function ry(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lP(Object(r),!0).forEach(function(n){oie(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oie(e,t,r){return t=aie(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aie(e){var t=sie(e,"string");return Rp(t)=="symbol"?t:t+""}function sie(e,t){if(Rp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Rp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ph={widthCache:{},cacheCount:0},lie=2e3,uie={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},uP="recharts_measurement_span";function cie(e){var t=ry({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var ip=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Tu.isSsr)return{width:0,height:0};var n=cie(r),u=JSON.stringify({text:t,copyStyle:n});if(ph.widthCache[u])return ph.widthCache[u];try{var h=document.getElementById(uP);h||(h=document.createElement("span"),h.setAttribute("id",uP),h.setAttribute("aria-hidden","true"),document.body.appendChild(h));var p=ry(ry({},uie),n);Object.assign(h.style,p),h.textContent="".concat(t);var o=h.getBoundingClientRect(),_={width:o.width,height:o.height};return ph.widthCache[u]=_,++ph.cacheCount>lie&&(ph.cacheCount=0,ph.widthCache={}),_}catch{return{width:0,height:0}}},hie=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Bp(e){"@babel/helpers - typeof";return Bp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bp(e)}function q4(e,t){return mie(e)||pie(e,t)||die(e,t)||fie()}function fie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function die(e,t){if(e){if(typeof e=="string")return cP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cP(e,t)}}function cP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function pie(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,u,h,p,o=[],_=!0,b=!1;try{if(h=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;_=!1}else for(;!(_=(n=h.call(r)).done)&&(o.push(n.value),o.length!==t);_=!0);}catch(P){b=!0,u=P}finally{try{if(!_&&r.return!=null&&(p=r.return(),Object(p)!==p))return}finally{if(b)throw u}}return o}}function mie(e){if(Array.isArray(e))return e}function gie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_ie(n.key),n)}}function yie(e,t,r){return t&&hP(e.prototype,t),r&&hP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _ie(e){var t=vie(e,"string");return Bp(t)=="symbol"?t:t+""}function vie(e,t){if(Bp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Bp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,dP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,xie=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,bie=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,iD={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},wie=Object.keys(iD),Ih="NaN";function Tie(e,t){return e*iD[t]}var T5=function(){function e(t,r){gie(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!xie.test(r)&&(this.num=NaN,this.unit=""),wie.includes(r)&&(this.num=Tie(t,r),this.unit="px")}return yie(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,u=(n=bie.exec(r))!==null&&n!==void 0?n:[],h=q4(u,3),p=h[1],o=h[2];return new e(parseFloat(p),o??"")}}])}();function oD(e){if(e.includes(Ih))return Ih;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=fP.exec(t))!==null&&r!==void 0?r:[],u=q4(n,4),h=u[1],p=u[2],o=u[3],_=T5.parse(h??""),b=T5.parse(o??""),P=p==="*"?_.multiply(b):_.divide(b);if(P.isNaN())return Ih;t=t.replace(fP,P.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var S,C=(S=dP.exec(t))!==null&&S!==void 0?S:[],L=q4(C,4),F=L[1],j=L[2],G=L[3],$=T5.parse(F??""),N=T5.parse(G??""),U=j==="+"?$.add(N):$.subtract(N);if(U.isNaN())return Ih;t=t.replace(dP,U.toString())}return t}var pP=/\(([^()]*)\)/;function Sie(e){for(var t=e;t.includes("(");){var r=pP.exec(t),n=q4(r,2),u=n[1];t=t.replace(pP,oD(u))}return t}function Eie(e){var t=e.replace(/\s+/g,"");return t=Sie(t),t=oD(t),t}function Pie(e){try{return Eie(e)}catch{return Ih}}function c9(e){var t=Pie(e.slice(5,-1));return t===Ih?"":t}var Aie=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Mie=["dx","dy","angle","className","breakAll"];function ny(){return ny=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ny.apply(this,arguments)}function mP(e,t){if(e==null)return{};var r=Cie(e,t),n,u;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(u=0;u<h.length;u++)n=h[u],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Cie(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function gP(e,t){return Die(e)||kie(e,t)||Oie(e,t)||Iie()}function Iie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Oie(e,t){if(e){if(typeof e=="string")return yP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yP(e,t)}}function yP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function kie(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,u,h,p,o=[],_=!0,b=!1;try{if(h=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;_=!1}else for(;!(_=(n=h.call(r)).done)&&(o.push(n.value),o.length!==t);_=!0);}catch(P){b=!0,u=P}finally{try{if(!_&&r.return!=null&&(p=r.return(),Object(p)!==p))return}finally{if(b)throw u}}return o}}function Die(e){if(Array.isArray(e))return e}var aD=/[ \f\n\r\t\v\u2028\u2029]+/,sD=function(t){var r=t.children,n=t.breakAll,u=t.style;try{var h=[];tn(r)||(n?h=r.toString().split(""):h=r.toString().split(aD));var p=h.map(function(_){return{word:_,width:ip(_,u).width}}),o=n?0:ip(" ",u).width;return{wordsWithComputedWidth:p,spaceWidth:o}}catch{return null}},Lie=function(t,r,n,u,h){var p=t.maxLines,o=t.children,_=t.style,b=t.breakAll,P=Bt(p),S=o,C=function(){var ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return ve.reduce(function(Ce,Le){var ge=Le.word,$e=Le.width,rt=Ce[Ce.length-1];if(rt&&(u==null||h||rt.width+$e+n<Number(u)))rt.words.push(ge),rt.width+=$e+n;else{var ft={words:[ge],width:$e};Ce.push(ft)}return Ce},[])},L=C(r),F=function(ve){return ve.reduce(function(Ce,Le){return Ce.width>Le.width?Ce:Le})};if(!P)return L;for(var j="…",G=function(ve){var Ce=S.slice(0,ve),Le=sD({breakAll:b,style:_,children:Ce+j}).wordsWithComputedWidth,ge=C(Le),$e=ge.length>p||F(ge).width>Number(u);return[$e,ge]},$=0,N=S.length-1,U=0,J;$<=N&&U<=S.length-1;){var q=Math.floor(($+N)/2),Y=q-1,X=G(Y),ue=gP(X,2),oe=ue[0],Re=ue[1],ze=G(q),De=gP(ze,1),Je=De[0];if(!oe&&!Je&&($=q+1),oe&&Je&&(N=q-1),!oe&&Je){J=Re;break}U++}return J||L},_P=function(t){var r=tn(t)?[]:t.toString().split(aD);return[{words:r}]},zie=function(t){var r=t.width,n=t.scaleToFit,u=t.children,h=t.style,p=t.breakAll,o=t.maxLines;if((r||n)&&!Tu.isSsr){var _,b,P=sD({breakAll:p,children:u,style:h});if(P){var S=P.wordsWithComputedWidth,C=P.spaceWidth;_=S,b=C}else return _P(u);return Lie({breakAll:p,children:u,maxLines:o,style:h},_,b,r,n)}return _P(u)},vP="#808080",H4=function(t){var r=t.x,n=r===void 0?0:r,u=t.y,h=u===void 0?0:u,p=t.lineHeight,o=p===void 0?"1em":p,_=t.capHeight,b=_===void 0?"0.71em":_,P=t.scaleToFit,S=P===void 0?!1:P,C=t.textAnchor,L=C===void 0?"start":C,F=t.verticalAnchor,j=F===void 0?"end":F,G=t.fill,$=G===void 0?vP:G,N=mP(t,Aie),U=Pe.useMemo(function(){return zie({breakAll:N.breakAll,children:N.children,maxLines:N.maxLines,scaleToFit:S,style:N.style,width:N.width})},[N.breakAll,N.children,N.maxLines,S,N.style,N.width]),J=N.dx,q=N.dy,Y=N.angle,X=N.className,ue=N.breakAll,oe=mP(N,Mie);if(!fi(n)||!fi(h))return null;var Re=n+(Bt(J)?J:0),ze=h+(Bt(q)?q:0),De;switch(j){case"start":De=c9("calc(".concat(b,")"));break;case"middle":De=c9("calc(".concat((U.length-1)/2," * -").concat(o," + (").concat(b," / 2))"));break;default:De=c9("calc(".concat(U.length-1," * -").concat(o,")"));break}var Je=[];if(S){var we=U[0].width,ve=N.width;Je.push("scale(".concat((Bt(ve)?ve/we:1)/we,")"))}return Y&&Je.push("rotate(".concat(Y,", ").concat(Re,", ").concat(ze,")")),Je.length&&(oe.transform=Je.join(" ")),Ne.createElement("text",ny({},Yr(oe,!0),{x:Re,y:ze,className:rn("recharts-text",X),textAnchor:L,fill:$.includes("url")?vP:$}),U.map(function(Ce,Le){var ge=Ce.words.join(ue?"":" ");return Ne.createElement("tspan",{x:Re,dy:Le===0?De:o,key:"".concat(ge,"-").concat(Le)},ge)}))};function Su(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Rie(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Pv(e){let t,r,n;e.length!==2?(t=Su,r=(o,_)=>Su(e(o),_),n=(o,_)=>e(o)-_):(t=e===Su||e===Rie?e:Bie,r=e,n=e);function u(o,_,b=0,P=o.length){if(b<P){if(t(_,_)!==0)return P;do{const S=b+P>>>1;r(o[S],_)<0?b=S+1:P=S}while(b<P)}return b}function h(o,_,b=0,P=o.length){if(b<P){if(t(_,_)!==0)return P;do{const S=b+P>>>1;r(o[S],_)<=0?b=S+1:P=S}while(b<P)}return b}function p(o,_,b=0,P=o.length){const S=u(o,_,b,P-1);return S>b&&n(o[S-1],_)>-n(o[S],_)?S-1:S}return{left:u,center:p,right:h}}function Bie(){return 0}function lD(e){return e===null?NaN:+e}function*Fie(e,t){if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&(yield r);else{let r=-1;for(let n of e)(n=t(n,++r,e))!=null&&(n=+n)>=n&&(yield n)}}const jie=Pv(Su),$ie=jie.right;Pv(lD).center;const S2=$ie;class xP extends Map{constructor(t,r=Vie){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,u]of t)this.set(n,u)}get(t){return super.get(bP(this,t))}has(t){return super.has(bP(this,t))}set(t,r){return super.set(Nie(this,t),r)}delete(t){return super.delete(Uie(this,t))}}function bP({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function Nie({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function Uie({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function Vie(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Gie(e=Su){if(e===Su)return uD;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function uD(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Wie=Math.sqrt(50),qie=Math.sqrt(10),Hie=Math.sqrt(2);function Z4(e,t,r){const n=(t-e)/Math.max(0,r),u=Math.floor(Math.log10(n)),h=n/Math.pow(10,u),p=h>=Wie?10:h>=qie?5:h>=Hie?2:1;let o,_,b;return u<0?(b=Math.pow(10,-u)/p,o=Math.round(e*b),_=Math.round(t*b),o/b<e&&++o,_/b>t&&--_,b=-b):(b=Math.pow(10,u)*p,o=Math.round(e/b),_=Math.round(t/b),o*b<e&&++o,_*b>t&&--_),_<o&&.5<=r&&r<2?Z4(e,t,r*2):[o,_,b]}function iy(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[u,h,p]=n?Z4(t,e,r):Z4(e,t,r);if(!(h>=u))return[];const o=h-u+1,_=new Array(o);if(n)if(p<0)for(let b=0;b<o;++b)_[b]=(h-b)/-p;else for(let b=0;b<o;++b)_[b]=(h-b)*p;else if(p<0)for(let b=0;b<o;++b)_[b]=(u+b)/-p;else for(let b=0;b<o;++b)_[b]=(u+b)*p;return _}function oy(e,t,r){return t=+t,e=+e,r=+r,Z4(e,t,r)[2]}function ay(e,t,r){t=+t,e=+e,r=+r;const n=t<e,u=n?oy(t,e,r):oy(e,t,r);return(n?-1:1)*(u<0?1/-u:u)}function wP(e,t){let r;if(t===void 0)for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let u of e)(u=t(u,++n,e))!=null&&(r<u||r===void 0&&u>=u)&&(r=u)}return r}function TP(e,t){let r;if(t===void 0)for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let u of e)(u=t(u,++n,e))!=null&&(r>u||r===void 0&&u>=u)&&(r=u)}return r}function cD(e,t,r=0,n=1/0,u){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(u=u===void 0?uD:Gie(u);n>r;){if(n-r>600){const _=n-r+1,b=t-r+1,P=Math.log(_),S=.5*Math.exp(2*P/3),C=.5*Math.sqrt(P*S*(_-S)/_)*(b-_/2<0?-1:1),L=Math.max(r,Math.floor(t-b*S/_+C)),F=Math.min(n,Math.floor(t+(_-b)*S/_+C));cD(e,t,L,F,u)}const h=e[t];let p=r,o=n;for(kd(e,r,t),u(e[n],h)>0&&kd(e,r,n);p<o;){for(kd(e,p,o),++p,--o;u(e[p],h)<0;)++p;for(;u(e[o],h)>0;)--o}u(e[r],h)===0?kd(e,r,o):(++o,kd(e,o,n)),o<=t&&(r=o+1),t<=o&&(n=o-1)}return e}function kd(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function Zie(e,t,r){if(e=Float64Array.from(Fie(e,r)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return TP(e);if(t>=1)return wP(e);var n,u=(n-1)*t,h=Math.floor(u),p=wP(cD(e,h).subarray(0,h+1)),o=TP(e.subarray(h+1));return p+(o-p)*(u-h)}}function Xie(e,t,r=lD){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,u=(n-1)*t,h=Math.floor(u),p=+r(e[h],h,e),o=+r(e[h+1],h+1,e);return p+(o-p)*(u-h)}}function Kie(e,t,r){e=+e,t=+t,r=(u=arguments.length)<2?(t=e,e=0,1):u<3?1:+r;for(var n=-1,u=Math.max(0,Math.ceil((t-e)/r))|0,h=new Array(u);++n<u;)h[n]=e+n*r;return h}function Ca(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Sl(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const sy=Symbol("implicit");function Av(){var e=new xP,t=[],r=[],n=sy;function u(h){let p=e.get(h);if(p===void 0){if(n!==sy)return n;e.set(h,p=t.push(h)-1)}return r[p%r.length]}return u.domain=function(h){if(!arguments.length)return t.slice();t=[],e=new xP;for(const p of h)e.has(p)||e.set(p,t.push(p)-1);return u},u.range=function(h){return arguments.length?(r=Array.from(h),u):r.slice()},u.unknown=function(h){return arguments.length?(n=h,u):n},u.copy=function(){return Av(t,r).unknown(n)},Ca.apply(u,arguments),u}function Fp(){var e=Av().unknown(void 0),t=e.domain,r=e.range,n=0,u=1,h,p,o=!1,_=0,b=0,P=.5;delete e.unknown;function S(){var C=t().length,L=u<n,F=L?u:n,j=L?n:u;h=(j-F)/Math.max(1,C-_+b*2),o&&(h=Math.floor(h)),F+=(j-F-h*(C-_))*P,p=h*(1-_),o&&(F=Math.round(F),p=Math.round(p));var G=Kie(C).map(function($){return F+h*$});return r(L?G.reverse():G)}return e.domain=function(C){return arguments.length?(t(C),S()):t()},e.range=function(C){return arguments.length?([n,u]=C,n=+n,u=+u,S()):[n,u]},e.rangeRound=function(C){return[n,u]=C,n=+n,u=+u,o=!0,S()},e.bandwidth=function(){return p},e.step=function(){return h},e.round=function(C){return arguments.length?(o=!!C,S()):o},e.padding=function(C){return arguments.length?(_=Math.min(1,b=+C),S()):_},e.paddingInner=function(C){return arguments.length?(_=Math.min(1,C),S()):_},e.paddingOuter=function(C){return arguments.length?(b=+C,S()):b},e.align=function(C){return arguments.length?(P=Math.max(0,Math.min(1,C)),S()):P},e.copy=function(){return Fp(t(),[n,u]).round(o).paddingInner(_).paddingOuter(b).align(P)},Ca.apply(S(),arguments)}function hD(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return hD(t())},e}function op(){return hD(Fp.apply(null,arguments).paddingInner(1))}function Mv(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function fD(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function E2(){}var jp=.7,X4=1/jp,Gh="\\s*([+-]?\\d+)\\s*",$p="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ms="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Yie=/^#([0-9a-f]{3,8})$/,Jie=new RegExp(`^rgb\\(${Gh},${Gh},${Gh}\\)$`),Qie=new RegExp(`^rgb\\(${Ms},${Ms},${Ms}\\)$`),eoe=new RegExp(`^rgba\\(${Gh},${Gh},${Gh},${$p}\\)$`),toe=new RegExp(`^rgba\\(${Ms},${Ms},${Ms},${$p}\\)$`),roe=new RegExp(`^hsl\\(${$p},${Ms},${Ms}\\)$`),noe=new RegExp(`^hsla\\(${$p},${Ms},${Ms},${$p}\\)$`),SP={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Mv(E2,Np,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:EP,formatHex:EP,formatHex8:ioe,formatHsl:ooe,formatRgb:PP,toString:PP});function EP(){return this.rgb().formatHex()}function ioe(){return this.rgb().formatHex8()}function ooe(){return dD(this).formatHsl()}function PP(){return this.rgb().formatRgb()}function Np(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=Yie.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?AP(t):r===3?new Co(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?S5(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?S5(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Jie.exec(e))?new Co(t[1],t[2],t[3],1):(t=Qie.exec(e))?new Co(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=eoe.exec(e))?S5(t[1],t[2],t[3],t[4]):(t=toe.exec(e))?S5(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=roe.exec(e))?IP(t[1],t[2]/100,t[3]/100,1):(t=noe.exec(e))?IP(t[1],t[2]/100,t[3]/100,t[4]):SP.hasOwnProperty(e)?AP(SP[e]):e==="transparent"?new Co(NaN,NaN,NaN,0):null}function AP(e){return new Co(e>>16&255,e>>8&255,e&255,1)}function S5(e,t,r,n){return n<=0&&(e=t=r=NaN),new Co(e,t,r,n)}function aoe(e){return e instanceof E2||(e=Np(e)),e?(e=e.rgb(),new Co(e.r,e.g,e.b,e.opacity)):new Co}function ly(e,t,r,n){return arguments.length===1?aoe(e):new Co(e,t,r,n??1)}function Co(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}Mv(Co,ly,fD(E2,{brighter(e){return e=e==null?X4:Math.pow(X4,e),new Co(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?jp:Math.pow(jp,e),new Co(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Co($c(this.r),$c(this.g),$c(this.b),K4(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:MP,formatHex:MP,formatHex8:soe,formatRgb:CP,toString:CP}));function MP(){return`#${zc(this.r)}${zc(this.g)}${zc(this.b)}`}function soe(){return`#${zc(this.r)}${zc(this.g)}${zc(this.b)}${zc((isNaN(this.opacity)?1:this.opacity)*255)}`}function CP(){const e=K4(this.opacity);return`${e===1?"rgb(":"rgba("}${$c(this.r)}, ${$c(this.g)}, ${$c(this.b)}${e===1?")":`, ${e})`}`}function K4(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function $c(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function zc(e){return e=$c(e),(e<16?"0":"")+e.toString(16)}function IP(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new es(e,t,r,n)}function dD(e){if(e instanceof es)return new es(e.h,e.s,e.l,e.opacity);if(e instanceof E2||(e=Np(e)),!e)return new es;if(e instanceof es)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,u=Math.min(t,r,n),h=Math.max(t,r,n),p=NaN,o=h-u,_=(h+u)/2;return o?(t===h?p=(r-n)/o+(r<n)*6:r===h?p=(n-t)/o+2:p=(t-r)/o+4,o/=_<.5?h+u:2-h-u,p*=60):o=_>0&&_<1?0:p,new es(p,o,_,e.opacity)}function loe(e,t,r,n){return arguments.length===1?dD(e):new es(e,t,r,n??1)}function es(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}Mv(es,loe,fD(E2,{brighter(e){return e=e==null?X4:Math.pow(X4,e),new es(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?jp:Math.pow(jp,e),new es(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,u=2*r-n;return new Co(h9(e>=240?e-240:e+120,u,n),h9(e,u,n),h9(e<120?e+240:e-120,u,n),this.opacity)},clamp(){return new es(OP(this.h),E5(this.s),E5(this.l),K4(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=K4(this.opacity);return`${e===1?"hsl(":"hsla("}${OP(this.h)}, ${E5(this.s)*100}%, ${E5(this.l)*100}%${e===1?")":`, ${e})`}`}}));function OP(e){return e=(e||0)%360,e<0?e+360:e}function E5(e){return Math.max(0,Math.min(1,e||0))}function h9(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const Cv=e=>()=>e;function uoe(e,t){return function(r){return e+r*t}}function coe(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function hoe(e){return(e=+e)==1?pD:function(t,r){return r-t?coe(t,r,e):Cv(isNaN(t)?r:t)}}function pD(e,t){var r=t-e;return r?uoe(e,r):Cv(isNaN(e)?t:e)}const kP=function e(t){var r=hoe(t);function n(u,h){var p=r((u=ly(u)).r,(h=ly(h)).r),o=r(u.g,h.g),_=r(u.b,h.b),b=pD(u.opacity,h.opacity);return function(P){return u.r=p(P),u.g=o(P),u.b=_(P),u.opacity=b(P),u+""}}return n.gamma=e,n}(1);function foe(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),u;return function(h){for(u=0;u<r;++u)n[u]=e[u]*(1-h)+t[u]*h;return n}}function doe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function poe(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,u=new Array(n),h=new Array(r),p;for(p=0;p<n;++p)u[p]=jf(e[p],t[p]);for(;p<r;++p)h[p]=t[p];return function(o){for(p=0;p<n;++p)h[p]=u[p](o);return h}}function moe(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Y4(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function goe(e,t){var r={},n={},u;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(u in t)u in e?r[u]=jf(e[u],t[u]):n[u]=t[u];return function(h){for(u in r)n[u]=r[u](h);return n}}var uy=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,f9=new RegExp(uy.source,"g");function yoe(e){return function(){return e}}function _oe(e){return function(t){return e(t)+""}}function voe(e,t){var r=uy.lastIndex=f9.lastIndex=0,n,u,h,p=-1,o=[],_=[];for(e=e+"",t=t+"";(n=uy.exec(e))&&(u=f9.exec(t));)(h=u.index)>r&&(h=t.slice(r,h),o[p]?o[p]+=h:o[++p]=h),(n=n[0])===(u=u[0])?o[p]?o[p]+=u:o[++p]=u:(o[++p]=null,_.push({i:p,x:Y4(n,u)})),r=f9.lastIndex;return r<t.length&&(h=t.slice(r),o[p]?o[p]+=h:o[++p]=h),o.length<2?_[0]?_oe(_[0].x):yoe(t):(t=_.length,function(b){for(var P=0,S;P<t;++P)o[(S=_[P]).i]=S.x(b);return o.join("")})}function jf(e,t){var r=typeof t,n;return t==null||r==="boolean"?Cv(t):(r==="number"?Y4:r==="string"?(n=Np(t))?(t=n,kP):voe:t instanceof Np?kP:t instanceof Date?moe:doe(t)?foe:Array.isArray(t)?poe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?goe:Y4)(e,t)}function Iv(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function xoe(e,t){t===void 0&&(t=e,e=jf);for(var r=0,n=t.length-1,u=t[0],h=new Array(n<0?0:n);r<n;)h[r]=e(u,u=t[++r]);return function(p){var o=Math.max(0,Math.min(n-1,Math.floor(p*=n)));return h[o](p-o)}}function boe(e){return function(){return e}}function J4(e){return+e}var DP=[0,1];function uo(e){return e}function cy(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:boe(isNaN(t)?NaN:.5)}function woe(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function Toe(e,t,r){var n=e[0],u=e[1],h=t[0],p=t[1];return u<n?(n=cy(u,n),h=r(p,h)):(n=cy(n,u),h=r(h,p)),function(o){return h(n(o))}}function Soe(e,t,r){var n=Math.min(e.length,t.length)-1,u=new Array(n),h=new Array(n),p=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++p<n;)u[p]=cy(e[p],e[p+1]),h[p]=r(t[p],t[p+1]);return function(o){var _=S2(e,o,1,n)-1;return h[_](u[_](o))}}function P2(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function vm(){var e=DP,t=DP,r=jf,n,u,h,p=uo,o,_,b;function P(){var C=Math.min(e.length,t.length);return p!==uo&&(p=woe(e[0],e[C-1])),o=C>2?Soe:Toe,_=b=null,S}function S(C){return C==null||isNaN(C=+C)?h:(_||(_=o(e.map(n),t,r)))(n(p(C)))}return S.invert=function(C){return p(u((b||(b=o(t,e.map(n),Y4)))(C)))},S.domain=function(C){return arguments.length?(e=Array.from(C,J4),P()):e.slice()},S.range=function(C){return arguments.length?(t=Array.from(C),P()):t.slice()},S.rangeRound=function(C){return t=Array.from(C),r=Iv,P()},S.clamp=function(C){return arguments.length?(p=C?!0:uo,P()):p!==uo},S.interpolate=function(C){return arguments.length?(r=C,P()):r},S.unknown=function(C){return arguments.length?(h=C,S):h},function(C,L){return n=C,u=L,P()}}function Ov(){return vm()(uo,uo)}function Eoe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Q4(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function cf(e){return e=Q4(Math.abs(e)),e?e[1]:NaN}function Poe(e,t){return function(r,n){for(var u=r.length,h=[],p=0,o=e[0],_=0;u>0&&o>0&&(_+o+1>n&&(o=Math.max(1,n-_)),h.push(r.substring(u-=o,u+o)),!((_+=o+1)>n));)o=e[p=(p+1)%e.length];return h.reverse().join(t)}}function Aoe(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var Moe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Up(e){if(!(t=Moe.exec(e)))throw new Error("invalid format: "+e);var t;return new kv({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Up.prototype=kv.prototype;function kv(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}kv.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Coe(e){e:for(var t=e.length,r=1,n=-1,u;r<t;++r)switch(e[r]){case".":n=u=r;break;case"0":n===0&&(n=r),u=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(u+1):e}var mD;function Ioe(e,t){var r=Q4(e,t);if(!r)return e+"";var n=r[0],u=r[1],h=u-(mD=Math.max(-8,Math.min(8,Math.floor(u/3)))*3)+1,p=n.length;return h===p?n:h>p?n+new Array(h-p+1).join("0"):h>0?n.slice(0,h)+"."+n.slice(h):"0."+new Array(1-h).join("0")+Q4(e,Math.max(0,t+h-1))[0]}function LP(e,t){var r=Q4(e,t);if(!r)return e+"";var n=r[0],u=r[1];return u<0?"0."+new Array(-u).join("0")+n:n.length>u+1?n.slice(0,u+1)+"."+n.slice(u+1):n+new Array(u-n.length+2).join("0")}const zP={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Eoe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>LP(e*100,t),r:LP,s:Ioe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function RP(e){return e}var BP=Array.prototype.map,FP=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Ooe(e){var t=e.grouping===void 0||e.thousands===void 0?RP:Poe(BP.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",u=e.decimal===void 0?".":e.decimal+"",h=e.numerals===void 0?RP:Aoe(BP.call(e.numerals,String)),p=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"−":e.minus+"",_=e.nan===void 0?"NaN":e.nan+"";function b(S){S=Up(S);var C=S.fill,L=S.align,F=S.sign,j=S.symbol,G=S.zero,$=S.width,N=S.comma,U=S.precision,J=S.trim,q=S.type;q==="n"?(N=!0,q="g"):zP[q]||(U===void 0&&(U=12),J=!0,q="g"),(G||C==="0"&&L==="=")&&(G=!0,C="0",L="=");var Y=j==="$"?r:j==="#"&&/[boxX]/.test(q)?"0"+q.toLowerCase():"",X=j==="$"?n:/[%p]/.test(q)?p:"",ue=zP[q],oe=/[defgprs%]/.test(q);U=U===void 0?6:/[gprs]/.test(q)?Math.max(1,Math.min(21,U)):Math.max(0,Math.min(20,U));function Re(ze){var De=Y,Je=X,we,ve,Ce;if(q==="c")Je=ue(ze)+Je,ze="";else{ze=+ze;var Le=ze<0||1/ze<0;if(ze=isNaN(ze)?_:ue(Math.abs(ze),U),J&&(ze=Coe(ze)),Le&&+ze==0&&F!=="+"&&(Le=!1),De=(Le?F==="("?F:o:F==="-"||F==="("?"":F)+De,Je=(q==="s"?FP[8+mD/3]:"")+Je+(Le&&F==="("?")":""),oe){for(we=-1,ve=ze.length;++we<ve;)if(Ce=ze.charCodeAt(we),48>Ce||Ce>57){Je=(Ce===46?u+ze.slice(we+1):ze.slice(we))+Je,ze=ze.slice(0,we);break}}}N&&!G&&(ze=t(ze,1/0));var ge=De.length+ze.length+Je.length,$e=ge<$?new Array($-ge+1).join(C):"";switch(N&&G&&(ze=t($e+ze,$e.length?$-Je.length:1/0),$e=""),L){case"<":ze=De+ze+Je+$e;break;case"=":ze=De+$e+ze+Je;break;case"^":ze=$e.slice(0,ge=$e.length>>1)+De+ze+Je+$e.slice(ge);break;default:ze=$e+De+ze+Je;break}return h(ze)}return Re.toString=function(){return S+""},Re}function P(S,C){var L=b((S=Up(S),S.type="f",S)),F=Math.max(-8,Math.min(8,Math.floor(cf(C)/3)))*3,j=Math.pow(10,-F),G=FP[8+F/3];return function($){return L(j*$)+G}}return{format:b,formatPrefix:P}}var P5,Dv,gD;koe({thousands:",",grouping:[3],currency:["$",""]});function koe(e){return P5=Ooe(e),Dv=P5.format,gD=P5.formatPrefix,P5}function Doe(e){return Math.max(0,-cf(Math.abs(e)))}function Loe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(cf(t)/3)))*3-cf(Math.abs(e)))}function zoe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,cf(t)-cf(e))+1}function yD(e,t,r,n){var u=ay(e,t,r),h;switch(n=Up(n??",f"),n.type){case"s":{var p=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(h=Loe(u,p))&&(n.precision=h),gD(n,p)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(h=zoe(u,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=h-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(h=Doe(u))&&(n.precision=h-(n.type==="%")*2);break}}return Dv(n)}function Du(e){var t=e.domain;return e.ticks=function(r){var n=t();return iy(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var u=t();return yD(u[0],u[u.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),u=0,h=n.length-1,p=n[u],o=n[h],_,b,P=10;for(o<p&&(b=p,p=o,o=b,b=u,u=h,h=b);P-- >0;){if(b=oy(p,o,r),b===_)return n[u]=p,n[h]=o,t(n);if(b>0)p=Math.floor(p/b)*b,o=Math.ceil(o/b)*b;else if(b<0)p=Math.ceil(p*b)/b,o=Math.floor(o*b)/b;else break;_=b}return e},e}function e6(){var e=Ov();return e.copy=function(){return P2(e,e6())},Ca.apply(e,arguments),Du(e)}function _D(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,J4),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return _D(e).unknown(t)},e=arguments.length?Array.from(e,J4):[0,1],Du(r)}function vD(e,t){e=e.slice();var r=0,n=e.length-1,u=e[r],h=e[n],p;return h<u&&(p=r,r=n,n=p,p=u,u=h,h=p),e[r]=t.floor(u),e[n]=t.ceil(h),e}function jP(e){return Math.log(e)}function $P(e){return Math.exp(e)}function Roe(e){return-Math.log(-e)}function Boe(e){return-Math.exp(-e)}function Foe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function joe(e){return e===10?Foe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function $oe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function NP(e){return(t,r)=>-e(-t,r)}function Lv(e){const t=e(jP,$P),r=t.domain;let n=10,u,h;function p(){return u=$oe(n),h=joe(n),r()[0]<0?(u=NP(u),h=NP(h),e(Roe,Boe)):e(jP,$P),t}return t.base=function(o){return arguments.length?(n=+o,p()):n},t.domain=function(o){return arguments.length?(r(o),p()):r()},t.ticks=o=>{const _=r();let b=_[0],P=_[_.length-1];const S=P<b;S&&([b,P]=[P,b]);let C=u(b),L=u(P),F,j;const G=o==null?10:+o;let $=[];if(!(n%1)&&L-C<G){if(C=Math.floor(C),L=Math.ceil(L),b>0){for(;C<=L;++C)for(F=1;F<n;++F)if(j=C<0?F/h(-C):F*h(C),!(j<b)){if(j>P)break;$.push(j)}}else for(;C<=L;++C)for(F=n-1;F>=1;--F)if(j=C>0?F/h(-C):F*h(C),!(j<b)){if(j>P)break;$.push(j)}$.length*2<G&&($=iy(b,P,G))}else $=iy(C,L,Math.min(L-C,G)).map(h);return S?$.reverse():$},t.tickFormat=(o,_)=>{if(o==null&&(o=10),_==null&&(_=n===10?"s":","),typeof _!="function"&&(!(n%1)&&(_=Up(_)).precision==null&&(_.trim=!0),_=Dv(_)),o===1/0)return _;const b=Math.max(1,n*o/t.ticks().length);return P=>{let S=P/h(Math.round(u(P)));return S*n<n-.5&&(S*=n),S<=b?_(P):""}},t.nice=()=>r(vD(r(),{floor:o=>h(Math.floor(u(o))),ceil:o=>h(Math.ceil(u(o)))})),t}function xD(){const e=Lv(vm()).domain([1,10]);return e.copy=()=>P2(e,xD()).base(e.base()),Ca.apply(e,arguments),e}function UP(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function VP(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function zv(e){var t=1,r=e(UP(t),VP(t));return r.constant=function(n){return arguments.length?e(UP(t=+n),VP(t)):t},Du(r)}function bD(){var e=zv(vm());return e.copy=function(){return P2(e,bD()).constant(e.constant())},Ca.apply(e,arguments)}function GP(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Noe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Uoe(e){return e<0?-e*e:e*e}function Rv(e){var t=e(uo,uo),r=1;function n(){return r===1?e(uo,uo):r===.5?e(Noe,Uoe):e(GP(r),GP(1/r))}return t.exponent=function(u){return arguments.length?(r=+u,n()):r},Du(t)}function Bv(){var e=Rv(vm());return e.copy=function(){return P2(e,Bv()).exponent(e.exponent())},Ca.apply(e,arguments),e}function Voe(){return Bv.apply(null,arguments).exponent(.5)}function WP(e){return Math.sign(e)*e*e}function Goe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function wD(){var e=Ov(),t=[0,1],r=!1,n;function u(h){var p=Goe(e(h));return isNaN(p)?n:r?Math.round(p):p}return u.invert=function(h){return e.invert(WP(h))},u.domain=function(h){return arguments.length?(e.domain(h),u):e.domain()},u.range=function(h){return arguments.length?(e.range((t=Array.from(h,J4)).map(WP)),u):t.slice()},u.rangeRound=function(h){return u.range(h).round(!0)},u.round=function(h){return arguments.length?(r=!!h,u):r},u.clamp=function(h){return arguments.length?(e.clamp(h),u):e.clamp()},u.unknown=function(h){return arguments.length?(n=h,u):n},u.copy=function(){return wD(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Ca.apply(u,arguments),Du(u)}function TD(){var e=[],t=[],r=[],n;function u(){var p=0,o=Math.max(1,t.length);for(r=new Array(o-1);++p<o;)r[p-1]=Xie(e,p/o);return h}function h(p){return p==null||isNaN(p=+p)?n:t[S2(r,p)]}return h.invertExtent=function(p){var o=t.indexOf(p);return o<0?[NaN,NaN]:[o>0?r[o-1]:e[0],o<r.length?r[o]:e[e.length-1]]},h.domain=function(p){if(!arguments.length)return e.slice();e=[];for(let o of p)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(Su),u()},h.range=function(p){return arguments.length?(t=Array.from(p),u()):t.slice()},h.unknown=function(p){return arguments.length?(n=p,h):n},h.quantiles=function(){return r.slice()},h.copy=function(){return TD().domain(e).range(t).unknown(n)},Ca.apply(h,arguments)}function SD(){var e=0,t=1,r=1,n=[.5],u=[0,1],h;function p(_){return _!=null&&_<=_?u[S2(n,_,0,r)]:h}function o(){var _=-1;for(n=new Array(r);++_<r;)n[_]=((_+1)*t-(_-r)*e)/(r+1);return p}return p.domain=function(_){return arguments.length?([e,t]=_,e=+e,t=+t,o()):[e,t]},p.range=function(_){return arguments.length?(r=(u=Array.from(_)).length-1,o()):u.slice()},p.invertExtent=function(_){var b=u.indexOf(_);return b<0?[NaN,NaN]:b<1?[e,n[0]]:b>=r?[n[r-1],t]:[n[b-1],n[b]]},p.unknown=function(_){return arguments.length&&(h=_),p},p.thresholds=function(){return n.slice()},p.copy=function(){return SD().domain([e,t]).range(u).unknown(h)},Ca.apply(Du(p),arguments)}function ED(){var e=[.5],t=[0,1],r,n=1;function u(h){return h!=null&&h<=h?t[S2(e,h,0,n)]:r}return u.domain=function(h){return arguments.length?(e=Array.from(h),n=Math.min(e.length,t.length-1),u):e.slice()},u.range=function(h){return arguments.length?(t=Array.from(h),n=Math.min(e.length,t.length-1),u):t.slice()},u.invertExtent=function(h){var p=t.indexOf(h);return[e[p-1],e[p]]},u.unknown=function(h){return arguments.length?(r=h,u):r},u.copy=function(){return ED().domain(e).range(t).unknown(r)},Ca.apply(u,arguments)}const d9=new Date,p9=new Date;function di(e,t,r,n){function u(h){return e(h=arguments.length===0?new Date:new Date(+h)),h}return u.floor=h=>(e(h=new Date(+h)),h),u.ceil=h=>(e(h=new Date(h-1)),t(h,1),e(h),h),u.round=h=>{const p=u(h),o=u.ceil(h);return h-p<o-h?p:o},u.offset=(h,p)=>(t(h=new Date(+h),p==null?1:Math.floor(p)),h),u.range=(h,p,o)=>{const _=[];if(h=u.ceil(h),o=o==null?1:Math.floor(o),!(h<p)||!(o>0))return _;let b;do _.push(b=new Date(+h)),t(h,o),e(h);while(b<h&&h<p);return _},u.filter=h=>di(p=>{if(p>=p)for(;e(p),!h(p);)p.setTime(p-1)},(p,o)=>{if(p>=p)if(o<0)for(;++o<=0;)for(;t(p,-1),!h(p););else for(;--o>=0;)for(;t(p,1),!h(p););}),r&&(u.count=(h,p)=>(d9.setTime(+h),p9.setTime(+p),e(d9),e(p9),Math.floor(r(d9,p9))),u.every=h=>(h=Math.floor(h),!isFinite(h)||!(h>0)?null:h>1?u.filter(n?p=>n(p)%h===0:p=>u.count(0,p)%h===0):u)),u}const t6=di(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);t6.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?di(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):t6);t6.range;const ol=1e3,ba=ol*60,al=ba*60,yl=al*24,Fv=yl*7,qP=yl*30,m9=yl*365,Rc=di(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*ol)},(e,t)=>(t-e)/ol,e=>e.getUTCSeconds());Rc.range;const jv=di(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ol)},(e,t)=>{e.setTime(+e+t*ba)},(e,t)=>(t-e)/ba,e=>e.getMinutes());jv.range;const $v=di(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ba)},(e,t)=>(t-e)/ba,e=>e.getUTCMinutes());$v.range;const Nv=di(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ol-e.getMinutes()*ba)},(e,t)=>{e.setTime(+e+t*al)},(e,t)=>(t-e)/al,e=>e.getHours());Nv.range;const Uv=di(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*al)},(e,t)=>(t-e)/al,e=>e.getUTCHours());Uv.range;const A2=di(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ba)/yl,e=>e.getDate()-1);A2.range;const xm=di(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/yl,e=>e.getUTCDate()-1);xm.range;const PD=di(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/yl,e=>Math.floor(e/yl));PD.range;function a1(e){return di(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*ba)/Fv)}const bm=a1(0),r6=a1(1),Woe=a1(2),qoe=a1(3),hf=a1(4),Hoe=a1(5),Zoe=a1(6);bm.range;r6.range;Woe.range;qoe.range;hf.range;Hoe.range;Zoe.range;function s1(e){return di(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/Fv)}const wm=s1(0),n6=s1(1),Xoe=s1(2),Koe=s1(3),ff=s1(4),Yoe=s1(5),Joe=s1(6);wm.range;n6.range;Xoe.range;Koe.range;ff.range;Yoe.range;Joe.range;const Vv=di(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Vv.range;const Gv=di(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Gv.range;const _l=di(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());_l.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:di(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});_l.range;const vl=di(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());vl.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:di(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});vl.range;function AD(e,t,r,n,u,h){const p=[[Rc,1,ol],[Rc,5,5*ol],[Rc,15,15*ol],[Rc,30,30*ol],[h,1,ba],[h,5,5*ba],[h,15,15*ba],[h,30,30*ba],[u,1,al],[u,3,3*al],[u,6,6*al],[u,12,12*al],[n,1,yl],[n,2,2*yl],[r,1,Fv],[t,1,qP],[t,3,3*qP],[e,1,m9]];function o(b,P,S){const C=P<b;C&&([b,P]=[P,b]);const L=S&&typeof S.range=="function"?S:_(b,P,S),F=L?L.range(b,+P+1):[];return C?F.reverse():F}function _(b,P,S){const C=Math.abs(P-b)/S,L=Pv(([,,G])=>G).right(p,C);if(L===p.length)return e.every(ay(b/m9,P/m9,S));if(L===0)return t6.every(Math.max(ay(b,P,S),1));const[F,j]=p[C/p[L-1][2]<p[L][2]/C?L-1:L];return F.every(j)}return[o,_]}const[Qoe,eae]=AD(vl,Gv,wm,PD,Uv,$v),[tae,rae]=AD(_l,Vv,bm,A2,Nv,jv);function g9(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function y9(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Dd(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function nae(e){var t=e.dateTime,r=e.date,n=e.time,u=e.periods,h=e.days,p=e.shortDays,o=e.months,_=e.shortMonths,b=Ld(u),P=zd(u),S=Ld(h),C=zd(h),L=Ld(p),F=zd(p),j=Ld(o),G=zd(o),$=Ld(_),N=zd(_),U={a:Le,A:ge,b:$e,B:rt,c:null,d:JP,e:JP,f:Pae,g:Rae,G:Fae,H:Tae,I:Sae,j:Eae,L:MD,m:Aae,M:Mae,p:ft,q:lt,Q:tA,s:rA,S:Cae,u:Iae,U:Oae,V:kae,w:Dae,W:Lae,x:null,X:null,y:zae,Y:Bae,Z:jae,"%":eA},J={a:Tt,A:qt,b:fr,B:br,c:null,d:QP,e:QP,f:Vae,g:Qae,G:tse,H:$ae,I:Nae,j:Uae,L:ID,m:Gae,M:Wae,p:Mr,q:nn,Q:tA,s:rA,S:qae,u:Hae,U:Zae,V:Xae,w:Kae,W:Yae,x:null,X:null,y:Jae,Y:ese,Z:rse,"%":eA},q={a:Re,A:ze,b:De,B:Je,c:we,d:KP,e:KP,f:vae,g:XP,G:ZP,H:YP,I:YP,j:mae,L:_ae,m:pae,M:gae,p:oe,q:dae,Q:bae,s:wae,S:yae,u:lae,U:uae,V:cae,w:sae,W:hae,x:ve,X:Ce,y:XP,Y:ZP,Z:fae,"%":xae};U.x=Y(r,U),U.X=Y(n,U),U.c=Y(t,U),J.x=Y(r,J),J.X=Y(n,J),J.c=Y(t,J);function Y(zt,rr){return function(Lt){var dt=[],pr=-1,_r=0,hr=zt.length,Tr,kn,Gn;for(Lt instanceof Date||(Lt=new Date(+Lt));++pr<hr;)zt.charCodeAt(pr)===37&&(dt.push(zt.slice(_r,pr)),(kn=HP[Tr=zt.charAt(++pr)])!=null?Tr=zt.charAt(++pr):kn=Tr==="e"?" ":"0",(Gn=rr[Tr])&&(Tr=Gn(Lt,kn)),dt.push(Tr),_r=pr+1);return dt.push(zt.slice(_r,pr)),dt.join("")}}function X(zt,rr){return function(Lt){var dt=Dd(1900,void 0,1),pr=ue(dt,zt,Lt+="",0),_r,hr;if(pr!=Lt.length)return null;if("Q"in dt)return new Date(dt.Q);if("s"in dt)return new Date(dt.s*1e3+("L"in dt?dt.L:0));if(rr&&!("Z"in dt)&&(dt.Z=0),"p"in dt&&(dt.H=dt.H%12+dt.p*12),dt.m===void 0&&(dt.m="q"in dt?dt.q:0),"V"in dt){if(dt.V<1||dt.V>53)return null;"w"in dt||(dt.w=1),"Z"in dt?(_r=y9(Dd(dt.y,0,1)),hr=_r.getUTCDay(),_r=hr>4||hr===0?n6.ceil(_r):n6(_r),_r=xm.offset(_r,(dt.V-1)*7),dt.y=_r.getUTCFullYear(),dt.m=_r.getUTCMonth(),dt.d=_r.getUTCDate()+(dt.w+6)%7):(_r=g9(Dd(dt.y,0,1)),hr=_r.getDay(),_r=hr>4||hr===0?r6.ceil(_r):r6(_r),_r=A2.offset(_r,(dt.V-1)*7),dt.y=_r.getFullYear(),dt.m=_r.getMonth(),dt.d=_r.getDate()+(dt.w+6)%7)}else("W"in dt||"U"in dt)&&("w"in dt||(dt.w="u"in dt?dt.u%7:"W"in dt?1:0),hr="Z"in dt?y9(Dd(dt.y,0,1)).getUTCDay():g9(Dd(dt.y,0,1)).getDay(),dt.m=0,dt.d="W"in dt?(dt.w+6)%7+dt.W*7-(hr+5)%7:dt.w+dt.U*7-(hr+6)%7);return"Z"in dt?(dt.H+=dt.Z/100|0,dt.M+=dt.Z%100,y9(dt)):g9(dt)}}function ue(zt,rr,Lt,dt){for(var pr=0,_r=rr.length,hr=Lt.length,Tr,kn;pr<_r;){if(dt>=hr)return-1;if(Tr=rr.charCodeAt(pr++),Tr===37){if(Tr=rr.charAt(pr++),kn=q[Tr in HP?rr.charAt(pr++):Tr],!kn||(dt=kn(zt,Lt,dt))<0)return-1}else if(Tr!=Lt.charCodeAt(dt++))return-1}return dt}function oe(zt,rr,Lt){var dt=b.exec(rr.slice(Lt));return dt?(zt.p=P.get(dt[0].toLowerCase()),Lt+dt[0].length):-1}function Re(zt,rr,Lt){var dt=L.exec(rr.slice(Lt));return dt?(zt.w=F.get(dt[0].toLowerCase()),Lt+dt[0].length):-1}function ze(zt,rr,Lt){var dt=S.exec(rr.slice(Lt));return dt?(zt.w=C.get(dt[0].toLowerCase()),Lt+dt[0].length):-1}function De(zt,rr,Lt){var dt=$.exec(rr.slice(Lt));return dt?(zt.m=N.get(dt[0].toLowerCase()),Lt+dt[0].length):-1}function Je(zt,rr,Lt){var dt=j.exec(rr.slice(Lt));return dt?(zt.m=G.get(dt[0].toLowerCase()),Lt+dt[0].length):-1}function we(zt,rr,Lt){return ue(zt,t,rr,Lt)}function ve(zt,rr,Lt){return ue(zt,r,rr,Lt)}function Ce(zt,rr,Lt){return ue(zt,n,rr,Lt)}function Le(zt){return p[zt.getDay()]}function ge(zt){return h[zt.getDay()]}function $e(zt){return _[zt.getMonth()]}function rt(zt){return o[zt.getMonth()]}function ft(zt){return u[+(zt.getHours()>=12)]}function lt(zt){return 1+~~(zt.getMonth()/3)}function Tt(zt){return p[zt.getUTCDay()]}function qt(zt){return h[zt.getUTCDay()]}function fr(zt){return _[zt.getUTCMonth()]}function br(zt){return o[zt.getUTCMonth()]}function Mr(zt){return u[+(zt.getUTCHours()>=12)]}function nn(zt){return 1+~~(zt.getUTCMonth()/3)}return{format:function(zt){var rr=Y(zt+="",U);return rr.toString=function(){return zt},rr},parse:function(zt){var rr=X(zt+="",!1);return rr.toString=function(){return zt},rr},utcFormat:function(zt){var rr=Y(zt+="",J);return rr.toString=function(){return zt},rr},utcParse:function(zt){var rr=X(zt+="",!0);return rr.toString=function(){return zt},rr}}}var HP={"-":"",_:" ",0:"0"},Ei=/^\s*\d+/,iae=/^%/,oae=/[\\^$*+?|[\]().{}]/g;function qr(e,t,r){var n=e<0?"-":"",u=(n?-e:e)+"",h=u.length;return n+(h<r?new Array(r-h+1).join(t)+u:u)}function aae(e){return e.replace(oae,"\\$&")}function Ld(e){return new RegExp("^(?:"+e.map(aae).join("|")+")","i")}function zd(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function sae(e,t,r){var n=Ei.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function lae(e,t,r){var n=Ei.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function uae(e,t,r){var n=Ei.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function cae(e,t,r){var n=Ei.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function hae(e,t,r){var n=Ei.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function ZP(e,t,r){var n=Ei.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function XP(e,t,r){var n=Ei.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function fae(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function dae(e,t,r){var n=Ei.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function pae(e,t,r){var n=Ei.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function KP(e,t,r){var n=Ei.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function mae(e,t,r){var n=Ei.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function YP(e,t,r){var n=Ei.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function gae(e,t,r){var n=Ei.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function yae(e,t,r){var n=Ei.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function _ae(e,t,r){var n=Ei.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function vae(e,t,r){var n=Ei.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function xae(e,t,r){var n=iae.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function bae(e,t,r){var n=Ei.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function wae(e,t,r){var n=Ei.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function JP(e,t){return qr(e.getDate(),t,2)}function Tae(e,t){return qr(e.getHours(),t,2)}function Sae(e,t){return qr(e.getHours()%12||12,t,2)}function Eae(e,t){return qr(1+A2.count(_l(e),e),t,3)}function MD(e,t){return qr(e.getMilliseconds(),t,3)}function Pae(e,t){return MD(e,t)+"000"}function Aae(e,t){return qr(e.getMonth()+1,t,2)}function Mae(e,t){return qr(e.getMinutes(),t,2)}function Cae(e,t){return qr(e.getSeconds(),t,2)}function Iae(e){var t=e.getDay();return t===0?7:t}function Oae(e,t){return qr(bm.count(_l(e)-1,e),t,2)}function CD(e){var t=e.getDay();return t>=4||t===0?hf(e):hf.ceil(e)}function kae(e,t){return e=CD(e),qr(hf.count(_l(e),e)+(_l(e).getDay()===4),t,2)}function Dae(e){return e.getDay()}function Lae(e,t){return qr(r6.count(_l(e)-1,e),t,2)}function zae(e,t){return qr(e.getFullYear()%100,t,2)}function Rae(e,t){return e=CD(e),qr(e.getFullYear()%100,t,2)}function Bae(e,t){return qr(e.getFullYear()%1e4,t,4)}function Fae(e,t){var r=e.getDay();return e=r>=4||r===0?hf(e):hf.ceil(e),qr(e.getFullYear()%1e4,t,4)}function jae(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+qr(t/60|0,"0",2)+qr(t%60,"0",2)}function QP(e,t){return qr(e.getUTCDate(),t,2)}function $ae(e,t){return qr(e.getUTCHours(),t,2)}function Nae(e,t){return qr(e.getUTCHours()%12||12,t,2)}function Uae(e,t){return qr(1+xm.count(vl(e),e),t,3)}function ID(e,t){return qr(e.getUTCMilliseconds(),t,3)}function Vae(e,t){return ID(e,t)+"000"}function Gae(e,t){return qr(e.getUTCMonth()+1,t,2)}function Wae(e,t){return qr(e.getUTCMinutes(),t,2)}function qae(e,t){return qr(e.getUTCSeconds(),t,2)}function Hae(e){var t=e.getUTCDay();return t===0?7:t}function Zae(e,t){return qr(wm.count(vl(e)-1,e),t,2)}function OD(e){var t=e.getUTCDay();return t>=4||t===0?ff(e):ff.ceil(e)}function Xae(e,t){return e=OD(e),qr(ff.count(vl(e),e)+(vl(e).getUTCDay()===4),t,2)}function Kae(e){return e.getUTCDay()}function Yae(e,t){return qr(n6.count(vl(e)-1,e),t,2)}function Jae(e,t){return qr(e.getUTCFullYear()%100,t,2)}function Qae(e,t){return e=OD(e),qr(e.getUTCFullYear()%100,t,2)}function ese(e,t){return qr(e.getUTCFullYear()%1e4,t,4)}function tse(e,t){var r=e.getUTCDay();return e=r>=4||r===0?ff(e):ff.ceil(e),qr(e.getUTCFullYear()%1e4,t,4)}function rse(){return"+0000"}function eA(){return"%"}function tA(e){return+e}function rA(e){return Math.floor(+e/1e3)}var mh,kD,DD;nse({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function nse(e){return mh=nae(e),kD=mh.format,mh.parse,DD=mh.utcFormat,mh.utcParse,mh}function ise(e){return new Date(e)}function ose(e){return e instanceof Date?+e:+new Date(+e)}function Wv(e,t,r,n,u,h,p,o,_,b){var P=Ov(),S=P.invert,C=P.domain,L=b(".%L"),F=b(":%S"),j=b("%I:%M"),G=b("%I %p"),$=b("%a %d"),N=b("%b %d"),U=b("%B"),J=b("%Y");function q(Y){return(_(Y)<Y?L:o(Y)<Y?F:p(Y)<Y?j:h(Y)<Y?G:n(Y)<Y?u(Y)<Y?$:N:r(Y)<Y?U:J)(Y)}return P.invert=function(Y){return new Date(S(Y))},P.domain=function(Y){return arguments.length?C(Array.from(Y,ose)):C().map(ise)},P.ticks=function(Y){var X=C();return e(X[0],X[X.length-1],Y??10)},P.tickFormat=function(Y,X){return X==null?q:b(X)},P.nice=function(Y){var X=C();return(!Y||typeof Y.range!="function")&&(Y=t(X[0],X[X.length-1],Y??10)),Y?C(vD(X,Y)):P},P.copy=function(){return P2(P,Wv(e,t,r,n,u,h,p,o,_,b))},P}function ase(){return Ca.apply(Wv(tae,rae,_l,Vv,bm,A2,Nv,jv,Rc,kD).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function sse(){return Ca.apply(Wv(Qoe,eae,vl,Gv,wm,xm,Uv,$v,Rc,DD).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Tm(){var e=0,t=1,r,n,u,h,p=uo,o=!1,_;function b(S){return S==null||isNaN(S=+S)?_:p(u===0?.5:(S=(h(S)-r)*u,o?Math.max(0,Math.min(1,S)):S))}b.domain=function(S){return arguments.length?([e,t]=S,r=h(e=+e),n=h(t=+t),u=r===n?0:1/(n-r),b):[e,t]},b.clamp=function(S){return arguments.length?(o=!!S,b):o},b.interpolator=function(S){return arguments.length?(p=S,b):p};function P(S){return function(C){var L,F;return arguments.length?([L,F]=C,p=S(L,F),b):[p(0),p(1)]}}return b.range=P(jf),b.rangeRound=P(Iv),b.unknown=function(S){return arguments.length?(_=S,b):_},function(S){return h=S,r=S(e),n=S(t),u=r===n?0:1/(n-r),b}}function Lu(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function LD(){var e=Du(Tm()(uo));return e.copy=function(){return Lu(e,LD())},Sl.apply(e,arguments)}function zD(){var e=Lv(Tm()).domain([1,10]);return e.copy=function(){return Lu(e,zD()).base(e.base())},Sl.apply(e,arguments)}function RD(){var e=zv(Tm());return e.copy=function(){return Lu(e,RD()).constant(e.constant())},Sl.apply(e,arguments)}function qv(){var e=Rv(Tm());return e.copy=function(){return Lu(e,qv()).exponent(e.exponent())},Sl.apply(e,arguments)}function lse(){return qv.apply(null,arguments).exponent(.5)}function BD(){var e=[],t=uo;function r(n){if(n!=null&&!isNaN(n=+n))return t((S2(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let u of n)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(Su),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,u)=>t(u/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(u,h)=>Zie(e,h/n))},r.copy=function(){return BD(t).domain(e)},Sl.apply(r,arguments)}function Sm(){var e=0,t=.5,r=1,n=1,u,h,p,o,_,b=uo,P,S=!1,C;function L(j){return isNaN(j=+j)?C:(j=.5+((j=+P(j))-h)*(n*j<n*h?o:_),b(S?Math.max(0,Math.min(1,j)):j))}L.domain=function(j){return arguments.length?([e,t,r]=j,u=P(e=+e),h=P(t=+t),p=P(r=+r),o=u===h?0:.5/(h-u),_=h===p?0:.5/(p-h),n=h<u?-1:1,L):[e,t,r]},L.clamp=function(j){return arguments.length?(S=!!j,L):S},L.interpolator=function(j){return arguments.length?(b=j,L):b};function F(j){return function(G){var $,N,U;return arguments.length?([$,N,U]=G,b=xoe(j,[$,N,U]),L):[b(0),b(.5),b(1)]}}return L.range=F(jf),L.rangeRound=F(Iv),L.unknown=function(j){return arguments.length?(C=j,L):C},function(j){return P=j,u=j(e),h=j(t),p=j(r),o=u===h?0:.5/(h-u),_=h===p?0:.5/(p-h),n=h<u?-1:1,L}}function FD(){var e=Du(Sm()(uo));return e.copy=function(){return Lu(e,FD())},Sl.apply(e,arguments)}function jD(){var e=Lv(Sm()).domain([.1,1,10]);return e.copy=function(){return Lu(e,jD()).base(e.base())},Sl.apply(e,arguments)}function $D(){var e=zv(Sm());return e.copy=function(){return Lu(e,$D()).constant(e.constant())},Sl.apply(e,arguments)}function Hv(){var e=Rv(Sm());return e.copy=function(){return Lu(e,Hv()).exponent(e.exponent())},Sl.apply(e,arguments)}function use(){return Hv.apply(null,arguments).exponent(.5)}const nA=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Fp,scaleDiverging:FD,scaleDivergingLog:jD,scaleDivergingPow:Hv,scaleDivergingSqrt:use,scaleDivergingSymlog:$D,scaleIdentity:_D,scaleImplicit:sy,scaleLinear:e6,scaleLog:xD,scaleOrdinal:Av,scalePoint:op,scalePow:Bv,scaleQuantile:TD,scaleQuantize:SD,scaleRadial:wD,scaleSequential:LD,scaleSequentialLog:zD,scaleSequentialPow:qv,scaleSequentialQuantile:BD,scaleSequentialSqrt:lse,scaleSequentialSymlog:RD,scaleSqrt:Voe,scaleSymlog:bD,scaleThreshold:ED,scaleTime:ase,scaleUtc:sse,tickFormat:yD},Symbol.toStringTag,{value:"Module"}));var cse=Of;function hse(e,t,r){for(var n=-1,u=e.length;++n<u;){var h=e[n],p=t(h);if(p!=null&&(o===void 0?p===p&&!cse(p):r(p,o)))var o=p,_=h}return _}var ND=hse;function fse(e,t){return e>t}var dse=fse,pse=ND,mse=dse,gse=Ff;function yse(e){return e&&e.length?pse(e,gse,mse):void 0}var _se=yse;const Em=Br(_se);function vse(e,t){return e<t}var xse=vse,bse=ND,wse=xse,Tse=Ff;function Sse(e){return e&&e.length?bse(e,Tse,wse):void 0}var Ese=Sse;const Pm=Br(Ese);var Pse=sv,Ase=ku,Mse=Xk,Cse=Do;function Ise(e,t){var r=Cse(e)?Pse:Mse;return r(e,Ase(t))}var Ose=Ise,kse=Hk,Dse=Ose;function Lse(e,t){return kse(Dse(e,t),1)}var zse=Lse;const Rse=Br(zse);var Bse=wv;function Fse(e,t){return Bse(e,t)}var jse=Fse;const Zv=Br(jse);var $f=1e9,$se={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Kv,On=!0,Aa="[DecimalError] ",Nc=Aa+"Invalid argument: ",Xv=Aa+"Exponent out of range: ",Nf=Math.floor,Ac=Math.pow,Nse=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ko,bi=1e7,Sn=7,UD=9007199254740991,i6=Nf(UD/Sn),Zt={};Zt.absoluteValue=Zt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Zt.comparedTo=Zt.cmp=function(e){var t,r,n,u,h=this;if(e=new h.constructor(e),h.s!==e.s)return h.s||-e.s;if(h.e!==e.e)return h.e>e.e^h.s<0?1:-1;for(n=h.d.length,u=e.d.length,t=0,r=n<u?n:u;t<r;++t)if(h.d[t]!==e.d[t])return h.d[t]>e.d[t]^h.s<0?1:-1;return n===u?0:n>u^h.s<0?1:-1};Zt.decimalPlaces=Zt.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Sn;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Zt.dividedBy=Zt.div=function(e){return fl(this,new this.constructor(e))};Zt.dividedToIntegerBy=Zt.idiv=function(e){var t=this,r=t.constructor;return pn(fl(t,new r(e),0,1),r.precision)};Zt.equals=Zt.eq=function(e){return!this.cmp(e)};Zt.exponent=function(){return ni(this)};Zt.greaterThan=Zt.gt=function(e){return this.cmp(e)>0};Zt.greaterThanOrEqualTo=Zt.gte=function(e){return this.cmp(e)>=0};Zt.isInteger=Zt.isint=function(){return this.e>this.d.length-2};Zt.isNegative=Zt.isneg=function(){return this.s<0};Zt.isPositive=Zt.ispos=function(){return this.s>0};Zt.isZero=function(){return this.s===0};Zt.lessThan=Zt.lt=function(e){return this.cmp(e)<0};Zt.lessThanOrEqualTo=Zt.lte=function(e){return this.cmp(e)<1};Zt.logarithm=Zt.log=function(e){var t,r=this,n=r.constructor,u=n.precision,h=u+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Ko))throw Error(Aa+"NaN");if(r.s<1)throw Error(Aa+(r.s?"NaN":"-Infinity"));return r.eq(Ko)?new n(0):(On=!1,t=fl(Vp(r,h),Vp(e,h),h),On=!0,pn(t,u))};Zt.minus=Zt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?WD(t,e):VD(t,(e.s=-e.s,e))};Zt.modulo=Zt.mod=function(e){var t,r=this,n=r.constructor,u=n.precision;if(e=new n(e),!e.s)throw Error(Aa+"NaN");return r.s?(On=!1,t=fl(r,e,0,1).times(e),On=!0,r.minus(t)):pn(new n(r),u)};Zt.naturalExponential=Zt.exp=function(){return GD(this)};Zt.naturalLogarithm=Zt.ln=function(){return Vp(this)};Zt.negated=Zt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Zt.plus=Zt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?VD(t,e):WD(t,(e.s=-e.s,e))};Zt.precision=Zt.sd=function(e){var t,r,n,u=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Nc+e);if(t=ni(u)+1,n=u.d.length-1,r=n*Sn+1,n=u.d[n],n){for(;n%10==0;n/=10)r--;for(n=u.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Zt.squareRoot=Zt.sqrt=function(){var e,t,r,n,u,h,p,o=this,_=o.constructor;if(o.s<1){if(!o.s)return new _(0);throw Error(Aa+"NaN")}for(e=ni(o),On=!1,u=Math.sqrt(+o),u==0||u==1/0?(t=Ss(o.d),(t.length+e)%2==0&&(t+="0"),u=Math.sqrt(t),e=Nf((e+1)/2)-(e<0||e%2),u==1/0?t="5e"+e:(t=u.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new _(t)):n=new _(u.toString()),r=_.precision,u=p=r+3;;)if(h=n,n=h.plus(fl(o,h,p+2)).times(.5),Ss(h.d).slice(0,p)===(t=Ss(n.d)).slice(0,p)){if(t=t.slice(p-3,p+1),u==p&&t=="4999"){if(pn(h,r+1,0),h.times(h).eq(o)){n=h;break}}else if(t!="9999")break;p+=4}return On=!0,pn(n,r)};Zt.times=Zt.mul=function(e){var t,r,n,u,h,p,o,_,b,P=this,S=P.constructor,C=P.d,L=(e=new S(e)).d;if(!P.s||!e.s)return new S(0);for(e.s*=P.s,r=P.e+e.e,_=C.length,b=L.length,_<b&&(h=C,C=L,L=h,p=_,_=b,b=p),h=[],p=_+b,n=p;n--;)h.push(0);for(n=b;--n>=0;){for(t=0,u=_+n;u>n;)o=h[u]+L[n]*C[u-n-1]+t,h[u--]=o%bi|0,t=o/bi|0;h[u]=(h[u]+t)%bi|0}for(;!h[--p];)h.pop();return t?++r:h.shift(),e.d=h,e.e=r,On?pn(e,S.precision):e};Zt.toDecimalPlaces=Zt.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Is(e,0,$f),t===void 0?t=n.rounding:Is(t,0,8),pn(r,e+ni(r)+1,t))};Zt.toExponential=function(e,t){var r,n=this,u=n.constructor;return e===void 0?r=Yc(n,!0):(Is(e,0,$f),t===void 0?t=u.rounding:Is(t,0,8),n=pn(new u(n),e+1,t),r=Yc(n,!0,e+1)),r};Zt.toFixed=function(e,t){var r,n,u=this,h=u.constructor;return e===void 0?Yc(u):(Is(e,0,$f),t===void 0?t=h.rounding:Is(t,0,8),n=pn(new h(u),e+ni(u)+1,t),r=Yc(n.abs(),!1,e+ni(n)+1),u.isneg()&&!u.isZero()?"-"+r:r)};Zt.toInteger=Zt.toint=function(){var e=this,t=e.constructor;return pn(new t(e),ni(e)+1,t.rounding)};Zt.toNumber=function(){return+this};Zt.toPower=Zt.pow=function(e){var t,r,n,u,h,p,o=this,_=o.constructor,b=12,P=+(e=new _(e));if(!e.s)return new _(Ko);if(o=new _(o),!o.s){if(e.s<1)throw Error(Aa+"Infinity");return o}if(o.eq(Ko))return o;if(n=_.precision,e.eq(Ko))return pn(o,n);if(t=e.e,r=e.d.length-1,p=t>=r,h=o.s,p){if((r=P<0?-P:P)<=UD){for(u=new _(Ko),t=Math.ceil(n/Sn+4),On=!1;r%2&&(u=u.times(o),oA(u.d,t)),r=Nf(r/2),r!==0;)o=o.times(o),oA(o.d,t);return On=!0,e.s<0?new _(Ko).div(u):pn(u,n)}}else if(h<0)throw Error(Aa+"NaN");return h=h<0&&e.d[Math.max(t,r)]&1?-1:1,o.s=1,On=!1,u=e.times(Vp(o,n+b)),On=!0,u=GD(u),u.s=h,u};Zt.toPrecision=function(e,t){var r,n,u=this,h=u.constructor;return e===void 0?(r=ni(u),n=Yc(u,r<=h.toExpNeg||r>=h.toExpPos)):(Is(e,1,$f),t===void 0?t=h.rounding:Is(t,0,8),u=pn(new h(u),e,t),r=ni(u),n=Yc(u,e<=r||r<=h.toExpNeg,e)),n};Zt.toSignificantDigits=Zt.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Is(e,1,$f),t===void 0?t=n.rounding:Is(t,0,8)),pn(new n(r),e,t)};Zt.toString=Zt.valueOf=Zt.val=Zt.toJSON=Zt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=ni(e),r=e.constructor;return Yc(e,t<=r.toExpNeg||t>=r.toExpPos)};function VD(e,t){var r,n,u,h,p,o,_,b,P=e.constructor,S=P.precision;if(!e.s||!t.s)return t.s||(t=new P(e)),On?pn(t,S):t;if(_=e.d,b=t.d,p=e.e,u=t.e,_=_.slice(),h=p-u,h){for(h<0?(n=_,h=-h,o=b.length):(n=b,u=p,o=_.length),p=Math.ceil(S/Sn),o=p>o?p+1:o+1,h>o&&(h=o,n.length=1),n.reverse();h--;)n.push(0);n.reverse()}for(o=_.length,h=b.length,o-h<0&&(h=o,n=b,b=_,_=n),r=0;h;)r=(_[--h]=_[h]+b[h]+r)/bi|0,_[h]%=bi;for(r&&(_.unshift(r),++u),o=_.length;_[--o]==0;)_.pop();return t.d=_,t.e=u,On?pn(t,S):t}function Is(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Nc+e)}function Ss(e){var t,r,n,u=e.length-1,h="",p=e[0];if(u>0){for(h+=p,t=1;t<u;t++)n=e[t]+"",r=Sn-n.length,r&&(h+=au(r)),h+=n;p=e[t],n=p+"",r=Sn-n.length,r&&(h+=au(r))}else if(p===0)return"0";for(;p%10===0;)p/=10;return h+p}var fl=function(){function e(n,u){var h,p=0,o=n.length;for(n=n.slice();o--;)h=n[o]*u+p,n[o]=h%bi|0,p=h/bi|0;return p&&n.unshift(p),n}function t(n,u,h,p){var o,_;if(h!=p)_=h>p?1:-1;else for(o=_=0;o<h;o++)if(n[o]!=u[o]){_=n[o]>u[o]?1:-1;break}return _}function r(n,u,h){for(var p=0;h--;)n[h]-=p,p=n[h]<u[h]?1:0,n[h]=p*bi+n[h]-u[h];for(;!n[0]&&n.length>1;)n.shift()}return function(n,u,h,p){var o,_,b,P,S,C,L,F,j,G,$,N,U,J,q,Y,X,ue,oe=n.constructor,Re=n.s==u.s?1:-1,ze=n.d,De=u.d;if(!n.s)return new oe(n);if(!u.s)throw Error(Aa+"Division by zero");for(_=n.e-u.e,X=De.length,q=ze.length,L=new oe(Re),F=L.d=[],b=0;De[b]==(ze[b]||0);)++b;if(De[b]>(ze[b]||0)&&--_,h==null?N=h=oe.precision:p?N=h+(ni(n)-ni(u))+1:N=h,N<0)return new oe(0);if(N=N/Sn+2|0,b=0,X==1)for(P=0,De=De[0],N++;(b<q||P)&&N--;b++)U=P*bi+(ze[b]||0),F[b]=U/De|0,P=U%De|0;else{for(P=bi/(De[0]+1)|0,P>1&&(De=e(De,P),ze=e(ze,P),X=De.length,q=ze.length),J=X,j=ze.slice(0,X),G=j.length;G<X;)j[G++]=0;ue=De.slice(),ue.unshift(0),Y=De[0],De[1]>=bi/2&&++Y;do P=0,o=t(De,j,X,G),o<0?($=j[0],X!=G&&($=$*bi+(j[1]||0)),P=$/Y|0,P>1?(P>=bi&&(P=bi-1),S=e(De,P),C=S.length,G=j.length,o=t(S,j,C,G),o==1&&(P--,r(S,X<C?ue:De,C))):(P==0&&(o=P=1),S=De.slice()),C=S.length,C<G&&S.unshift(0),r(j,S,G),o==-1&&(G=j.length,o=t(De,j,X,G),o<1&&(P++,r(j,X<G?ue:De,G))),G=j.length):o===0&&(P++,j=[0]),F[b++]=P,o&&j[0]?j[G++]=ze[J]||0:(j=[ze[J]],G=1);while((J++<q||j[0]!==void 0)&&N--)}return F[0]||F.shift(),L.e=_,pn(L,p?h+ni(L)+1:h)}}();function GD(e,t){var r,n,u,h,p,o,_=0,b=0,P=e.constructor,S=P.precision;if(ni(e)>16)throw Error(Xv+ni(e));if(!e.s)return new P(Ko);for(t==null?(On=!1,o=S):o=t,p=new P(.03125);e.abs().gte(.1);)e=e.times(p),b+=5;for(n=Math.log(Ac(2,b))/Math.LN10*2+5|0,o+=n,r=u=h=new P(Ko),P.precision=o;;){if(u=pn(u.times(e),o),r=r.times(++_),p=h.plus(fl(u,r,o)),Ss(p.d).slice(0,o)===Ss(h.d).slice(0,o)){for(;b--;)h=pn(h.times(h),o);return P.precision=S,t==null?(On=!0,pn(h,S)):h}h=p}}function ni(e){for(var t=e.e*Sn,r=e.d[0];r>=10;r/=10)t++;return t}function _9(e,t,r){if(t>e.LN10.sd())throw On=!0,r&&(e.precision=r),Error(Aa+"LN10 precision limit exceeded");return pn(new e(e.LN10),t)}function au(e){for(var t="";e--;)t+="0";return t}function Vp(e,t){var r,n,u,h,p,o,_,b,P,S=1,C=10,L=e,F=L.d,j=L.constructor,G=j.precision;if(L.s<1)throw Error(Aa+(L.s?"NaN":"-Infinity"));if(L.eq(Ko))return new j(0);if(t==null?(On=!1,b=G):b=t,L.eq(10))return t==null&&(On=!0),_9(j,b);if(b+=C,j.precision=b,r=Ss(F),n=r.charAt(0),h=ni(L),Math.abs(h)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)L=L.times(e),r=Ss(L.d),n=r.charAt(0),S++;h=ni(L),n>1?(L=new j("0."+r),h++):L=new j(n+"."+r.slice(1))}else return _=_9(j,b+2,G).times(h+""),L=Vp(new j(n+"."+r.slice(1)),b-C).plus(_),j.precision=G,t==null?(On=!0,pn(L,G)):L;for(o=p=L=fl(L.minus(Ko),L.plus(Ko),b),P=pn(L.times(L),b),u=3;;){if(p=pn(p.times(P),b),_=o.plus(fl(p,new j(u),b)),Ss(_.d).slice(0,b)===Ss(o.d).slice(0,b))return o=o.times(2),h!==0&&(o=o.plus(_9(j,b+2,G).times(h+""))),o=fl(o,new j(S),b),j.precision=G,t==null?(On=!0,pn(o,G)):o;o=_,u+=2}}function iA(e,t){var r,n,u;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(u=t.length;t.charCodeAt(u-1)===48;)--u;if(t=t.slice(n,u),t){if(u-=n,r=r-n-1,e.e=Nf(r/Sn),e.d=[],n=(r+1)%Sn,r<0&&(n+=Sn),n<u){for(n&&e.d.push(+t.slice(0,n)),u-=Sn;n<u;)e.d.push(+t.slice(n,n+=Sn));t=t.slice(n),n=Sn-t.length}else n-=u;for(;n--;)t+="0";if(e.d.push(+t),On&&(e.e>i6||e.e<-i6))throw Error(Xv+r)}else e.s=0,e.e=0,e.d=[0];return e}function pn(e,t,r){var n,u,h,p,o,_,b,P,S=e.d;for(p=1,h=S[0];h>=10;h/=10)p++;if(n=t-p,n<0)n+=Sn,u=t,b=S[P=0];else{if(P=Math.ceil((n+1)/Sn),h=S.length,P>=h)return e;for(b=h=S[P],p=1;h>=10;h/=10)p++;n%=Sn,u=n-Sn+p}if(r!==void 0&&(h=Ac(10,p-u-1),o=b/h%10|0,_=t<0||S[P+1]!==void 0||b%h,_=r<4?(o||_)&&(r==0||r==(e.s<0?3:2)):o>5||o==5&&(r==4||_||r==6&&(n>0?u>0?b/Ac(10,p-u):0:S[P-1])%10&1||r==(e.s<0?8:7))),t<1||!S[0])return _?(h=ni(e),S.length=1,t=t-h-1,S[0]=Ac(10,(Sn-t%Sn)%Sn),e.e=Nf(-t/Sn)||0):(S.length=1,S[0]=e.e=e.s=0),e;if(n==0?(S.length=P,h=1,P--):(S.length=P+1,h=Ac(10,Sn-n),S[P]=u>0?(b/Ac(10,p-u)%Ac(10,u)|0)*h:0),_)for(;;)if(P==0){(S[0]+=h)==bi&&(S[0]=1,++e.e);break}else{if(S[P]+=h,S[P]!=bi)break;S[P--]=0,h=1}for(n=S.length;S[--n]===0;)S.pop();if(On&&(e.e>i6||e.e<-i6))throw Error(Xv+ni(e));return e}function WD(e,t){var r,n,u,h,p,o,_,b,P,S,C=e.constructor,L=C.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new C(e),On?pn(t,L):t;if(_=e.d,S=t.d,n=t.e,b=e.e,_=_.slice(),p=b-n,p){for(P=p<0,P?(r=_,p=-p,o=S.length):(r=S,n=b,o=_.length),u=Math.max(Math.ceil(L/Sn),o)+2,p>u&&(p=u,r.length=1),r.reverse(),u=p;u--;)r.push(0);r.reverse()}else{for(u=_.length,o=S.length,P=u<o,P&&(o=u),u=0;u<o;u++)if(_[u]!=S[u]){P=_[u]<S[u];break}p=0}for(P&&(r=_,_=S,S=r,t.s=-t.s),o=_.length,u=S.length-o;u>0;--u)_[o++]=0;for(u=S.length;u>p;){if(_[--u]<S[u]){for(h=u;h&&_[--h]===0;)_[h]=bi-1;--_[h],_[u]+=bi}_[u]-=S[u]}for(;_[--o]===0;)_.pop();for(;_[0]===0;_.shift())--n;return _[0]?(t.d=_,t.e=n,On?pn(t,L):t):new C(0)}function Yc(e,t,r){var n,u=ni(e),h=Ss(e.d),p=h.length;return t?(r&&(n=r-p)>0?h=h.charAt(0)+"."+h.slice(1)+au(n):p>1&&(h=h.charAt(0)+"."+h.slice(1)),h=h+(u<0?"e":"e+")+u):u<0?(h="0."+au(-u-1)+h,r&&(n=r-p)>0&&(h+=au(n))):u>=p?(h+=au(u+1-p),r&&(n=r-u-1)>0&&(h=h+"."+au(n))):((n=u+1)<p&&(h=h.slice(0,n)+"."+h.slice(n)),r&&(n=r-p)>0&&(u+1===p&&(h+="."),h+=au(n))),e.s<0?"-"+h:h}function oA(e,t){if(e.length>t)return e.length=t,!0}function qD(e){var t,r,n;function u(h){var p=this;if(!(p instanceof u))return new u(h);if(p.constructor=u,h instanceof u){p.s=h.s,p.e=h.e,p.d=(h=h.d)?h.slice():h;return}if(typeof h=="number"){if(h*0!==0)throw Error(Nc+h);if(h>0)p.s=1;else if(h<0)h=-h,p.s=-1;else{p.s=0,p.e=0,p.d=[0];return}if(h===~~h&&h<1e7){p.e=0,p.d=[h];return}return iA(p,h.toString())}else if(typeof h!="string")throw Error(Nc+h);if(h.charCodeAt(0)===45?(h=h.slice(1),p.s=-1):p.s=1,Nse.test(h))iA(p,h);else throw Error(Nc+h)}if(u.prototype=Zt,u.ROUND_UP=0,u.ROUND_DOWN=1,u.ROUND_CEIL=2,u.ROUND_FLOOR=3,u.ROUND_HALF_UP=4,u.ROUND_HALF_DOWN=5,u.ROUND_HALF_EVEN=6,u.ROUND_HALF_CEIL=7,u.ROUND_HALF_FLOOR=8,u.clone=qD,u.config=u.set=Use,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return u.config(e),u}function Use(e){if(!e||typeof e!="object")throw Error(Aa+"Object expected");var t,r,n,u=["precision",1,$f,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<u.length;t+=3)if((n=e[r=u[t]])!==void 0)if(Nf(n)===n&&n>=u[t+1]&&n<=u[t+2])this[r]=n;else throw Error(Nc+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Nc+r+": "+n);return this}var Kv=qD($se);Ko=new Kv(1);const hn=Kv;function Vse(e){return Hse(e)||qse(e)||Wse(e)||Gse()}function Gse(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wse(e,t){if(e){if(typeof e=="string")return hy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hy(e,t)}}function qse(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Hse(e){if(Array.isArray(e))return hy(e)}function hy(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Zse=function(t){return t},HD={"@@functional/placeholder":!0},ZD=function(t){return t===HD},aA=function(t){return function r(){return arguments.length===0||arguments.length===1&&ZD(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},Xse=function e(t,r){return t===1?r:aA(function(){for(var n=arguments.length,u=new Array(n),h=0;h<n;h++)u[h]=arguments[h];var p=u.filter(function(o){return o!==HD}).length;return p>=t?r.apply(void 0,u):e(t-p,aA(function(){for(var o=arguments.length,_=new Array(o),b=0;b<o;b++)_[b]=arguments[b];var P=u.map(function(S){return ZD(S)?_.shift():S});return r.apply(void 0,Vse(P).concat(_))}))})},Am=function(t){return Xse(t.length,t)},fy=function(t,r){for(var n=[],u=t;u<r;++u)n[u-t]=u;return n},Kse=Am(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),Yse=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return Zse;var u=r.reverse(),h=u[0],p=u.slice(1);return function(){return p.reduce(function(o,_){return _(o)},h.apply(void 0,arguments))}},dy=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},XD=function(t){var r=null,n=null;return function(){for(var u=arguments.length,h=new Array(u),p=0;p<u;p++)h[p]=arguments[p];return r&&h.every(function(o,_){return o===r[_]})||(r=h,n=t.apply(void 0,h)),n}};function Jse(e){var t;return e===0?t=1:t=Math.floor(new hn(e).abs().log(10).toNumber())+1,t}function Qse(e,t,r){for(var n=new hn(e),u=0,h=[];n.lt(t)&&u<1e5;)h.push(n.toNumber()),n=n.add(r),u++;return h}var ele=Am(function(e,t,r){var n=+e,u=+t;return n+r*(u-n)}),tle=Am(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),rle=Am(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const Mm={rangeStep:Qse,getDigitCount:Jse,interpolateNumber:ele,uninterpolateNumber:tle,uninterpolateTruncation:rle};function py(e){return ole(e)||ile(e)||KD(e)||nle()}function nle(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ile(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function ole(e){if(Array.isArray(e))return my(e)}function Gp(e,t){return lle(e)||sle(e,t)||KD(e,t)||ale()}function ale(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KD(e,t){if(e){if(typeof e=="string")return my(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return my(e,t)}}function my(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function sle(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,u=!1,h=void 0;try{for(var p=e[Symbol.iterator](),o;!(n=(o=p.next()).done)&&(r.push(o.value),!(t&&r.length===t));n=!0);}catch(_){u=!0,h=_}finally{try{!n&&p.return!=null&&p.return()}finally{if(u)throw h}}return r}}function lle(e){if(Array.isArray(e))return e}function YD(e){var t=Gp(e,2),r=t[0],n=t[1],u=r,h=n;return r>n&&(u=n,h=r),[u,h]}function JD(e,t,r){if(e.lte(0))return new hn(0);var n=Mm.getDigitCount(e.toNumber()),u=new hn(10).pow(n),h=e.div(u),p=n!==1?.05:.1,o=new hn(Math.ceil(h.div(p).toNumber())).add(r).mul(p),_=o.mul(u);return t?_:new hn(Math.ceil(_))}function ule(e,t,r){var n=1,u=new hn(e);if(!u.isint()&&r){var h=Math.abs(e);h<1?(n=new hn(10).pow(Mm.getDigitCount(e)-1),u=new hn(Math.floor(u.div(n).toNumber())).mul(n)):h>1&&(u=new hn(Math.floor(e)))}else e===0?u=new hn(Math.floor((t-1)/2)):r||(u=new hn(Math.floor(e)));var p=Math.floor((t-1)/2),o=Yse(Kse(function(_){return u.add(new hn(_-p).mul(n)).toNumber()}),fy);return o(0,t)}function QD(e,t,r,n){var u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new hn(0),tickMin:new hn(0),tickMax:new hn(0)};var h=JD(new hn(t).sub(e).div(r-1),n,u),p;e<=0&&t>=0?p=new hn(0):(p=new hn(e).add(t).div(2),p=p.sub(new hn(p).mod(h)));var o=Math.ceil(p.sub(e).div(h).toNumber()),_=Math.ceil(new hn(t).sub(p).div(h).toNumber()),b=o+_+1;return b>r?QD(e,t,r,n,u+1):(b<r&&(_=t>0?_+(r-b):_,o=t>0?o:o+(r-b)),{step:h,tickMin:p.sub(new hn(o).mul(h)),tickMax:p.add(new hn(_).mul(h))})}function cle(e){var t=Gp(e,2),r=t[0],n=t[1],u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,p=Math.max(u,2),o=YD([r,n]),_=Gp(o,2),b=_[0],P=_[1];if(b===-1/0||P===1/0){var S=P===1/0?[b].concat(py(fy(0,u-1).map(function(){return 1/0}))):[].concat(py(fy(0,u-1).map(function(){return-1/0})),[P]);return r>n?dy(S):S}if(b===P)return ule(b,u,h);var C=QD(b,P,p,h),L=C.step,F=C.tickMin,j=C.tickMax,G=Mm.rangeStep(F,j.add(new hn(.1).mul(L)),L);return r>n?dy(G):G}function hle(e,t){var r=Gp(e,2),n=r[0],u=r[1],h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,p=YD([n,u]),o=Gp(p,2),_=o[0],b=o[1];if(_===-1/0||b===1/0)return[n,u];if(_===b)return[_];var P=Math.max(t,2),S=JD(new hn(b).sub(_).div(P-1),h,0),C=[].concat(py(Mm.rangeStep(new hn(_),new hn(b).sub(new hn(.99).mul(S)),S)),[b]);return n>u?dy(C):C}var fle=XD(cle),dle=XD(hle),ple=!0,v9="Invariant failed";function Jc(e,t){if(!e){if(ple)throw new Error(v9);var r=typeof t=="function"?t():t,n=r?"".concat(v9,": ").concat(r):v9;throw new Error(n)}}var mle=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function df(e){"@babel/helpers - typeof";return df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},df(e)}function o6(){return o6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o6.apply(this,arguments)}function gle(e,t){return xle(e)||vle(e,t)||_le(e,t)||yle()}function yle(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _le(e,t){if(e){if(typeof e=="string")return sA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sA(e,t)}}function sA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function vle(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,u,h,p,o=[],_=!0,b=!1;try{if(h=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;_=!1}else for(;!(_=(n=h.call(r)).done)&&(o.push(n.value),o.length!==t);_=!0);}catch(P){b=!0,u=P}finally{try{if(!_&&r.return!=null&&(p=r.return(),Object(p)!==p))return}finally{if(b)throw u}}return o}}function xle(e){if(Array.isArray(e))return e}function ble(e,t){if(e==null)return{};var r=wle(e,t),n,u;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(u=0;u<h.length;u++)n=h[u],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function wle(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Tle(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,rL(n.key),n)}}function Sle(e,t,r){return t&&lA(e.prototype,t),r&&lA(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ele(e,t,r){return t=a6(t),Ple(e,eL()?Reflect.construct(t,r||[],a6(e).constructor):t.apply(e,r))}function Ple(e,t){if(t&&(df(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ale(e)}function Ale(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eL=function(){return!!e})()}function a6(e){return a6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},a6(e)}function Mle(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gy(e,t)}function gy(e,t){return gy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,u){return n.__proto__=u,n},gy(e,t)}function tL(e,t,r){return t=rL(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rL(e){var t=Cle(e,"string");return df(t)=="symbol"?t:t+""}function Cle(e,t){if(df(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(df(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Cm=function(e){function t(){return Tle(this,t),Ele(this,t,arguments)}return Mle(t,e),Sle(t,[{key:"render",value:function(){var n=this.props,u=n.offset,h=n.layout,p=n.width,o=n.dataKey,_=n.data,b=n.dataPointFormatter,P=n.xAxis,S=n.yAxis,C=ble(n,mle),L=Yr(C,!1);this.props.direction==="x"&&P.type!=="number"&&Jc(!1);var F=_.map(function(j){var G=b(j,o),$=G.x,N=G.y,U=G.value,J=G.errorVal;if(!J)return null;var q=[],Y,X;if(Array.isArray(J)){var ue=gle(J,2);Y=ue[0],X=ue[1]}else Y=X=J;if(h==="vertical"){var oe=P.scale,Re=N+u,ze=Re+p,De=Re-p,Je=oe(U-Y),we=oe(U+X);q.push({x1:we,y1:ze,x2:we,y2:De}),q.push({x1:Je,y1:Re,x2:we,y2:Re}),q.push({x1:Je,y1:ze,x2:Je,y2:De})}else if(h==="horizontal"){var ve=S.scale,Ce=$+u,Le=Ce-p,ge=Ce+p,$e=ve(U-Y),rt=ve(U+X);q.push({x1:Le,y1:rt,x2:ge,y2:rt}),q.push({x1:Ce,y1:$e,x2:Ce,y2:rt}),q.push({x1:Le,y1:$e,x2:ge,y2:$e})}return Ne.createElement(Ti,o6({className:"recharts-errorBar",key:"bar-".concat(q.map(function(ft){return"".concat(ft.x1,"-").concat(ft.x2,"-").concat(ft.y1,"-").concat(ft.y2)}))},L),q.map(function(ft){return Ne.createElement("line",o6({},ft,{key:"line-".concat(ft.x1,"-").concat(ft.x2,"-").concat(ft.y1,"-").concat(ft.y2)}))}))});return Ne.createElement(Ti,{className:"recharts-errorBars"},F)}}])}(Ne.Component);tL(Cm,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});tL(Cm,"displayName","ErrorBar");function Wp(e){"@babel/helpers - typeof";return Wp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wp(e)}function uA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function wc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uA(Object(r),!0).forEach(function(n){Ile(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ile(e,t,r){return t=Ole(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ole(e){var t=kle(e,"string");return Wp(t)=="symbol"?t:t+""}function kle(e,t){if(Wp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Wp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nL=function(t){var r=t.children,n=t.formattedGraphicalItems,u=t.legendWidth,h=t.legendContent,p=qo(r,Vh);if(!p)return null;var o=Vh.defaultProps,_=o!==void 0?wc(wc({},o),p.props):{},b;return p.props&&p.props.payload?b=p.props&&p.props.payload:h==="children"?b=(n||[]).reduce(function(P,S){var C=S.item,L=S.props,F=L.sectors||L.data||[];return P.concat(F.map(function(j){return{type:p.props.iconType||C.props.legendType,value:j.name,color:j.fill,payload:j}}))},[]):b=(n||[]).map(function(P){var S=P.item,C=S.type.defaultProps,L=C!==void 0?wc(wc({},C),S.props):{},F=L.dataKey,j=L.name,G=L.legendType,$=L.hide;return{inactive:$,dataKey:F,type:_.iconType||G||"square",color:Yv(S),value:j||F,payload:L}}),wc(wc(wc({},_),Vh.getWithHeight(p,u)),{},{payload:b,item:p})};function qp(e){"@babel/helpers - typeof";return qp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qp(e)}function cA(e){return Rle(e)||zle(e)||Lle(e)||Dle()}function Dle(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lle(e,t){if(e){if(typeof e=="string")return yy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yy(e,t)}}function zle(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Rle(e){if(Array.isArray(e))return yy(e)}function yy(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function hA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function Hn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hA(Object(r),!0).forEach(function(n){Wh(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Wh(e,t,r){return t=Ble(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ble(e){var t=Fle(e,"string");return qp(t)=="symbol"?t:t+""}function Fle(e,t){if(qp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(qp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Os(e,t,r){return tn(e)||tn(t)?r:fi(t)?Sa(e,t,r):Ar(t)?t(e):r}function ap(e,t,r,n){var u=Rse(e,function(o){return Os(o,t)});if(r==="number"){var h=u.filter(function(o){return Bt(o)||parseFloat(o)});return h.length?[Pm(h),Em(h)]:[1/0,-1/0]}var p=n?u.filter(function(o){return!tn(o)}):u;return p.map(function(o){return fi(o)||o instanceof Date?o:""})}var jle=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],u=arguments.length>2?arguments[2]:void 0,h=arguments.length>3?arguments[3]:void 0,p=-1,o=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(o<=1)return 0;if(h&&h.axisType==="angleAxis"&&Math.abs(Math.abs(h.range[1]-h.range[0])-360)<=1e-6)for(var _=h.range,b=0;b<o;b++){var P=b>0?u[b-1].coordinate:u[o-1].coordinate,S=u[b].coordinate,C=b>=o-1?u[0].coordinate:u[b+1].coordinate,L=void 0;if(rs(S-P)!==rs(C-S)){var F=[];if(rs(C-S)===rs(_[1]-_[0])){L=C;var j=S+_[1]-_[0];F[0]=Math.min(j,(j+P)/2),F[1]=Math.max(j,(j+P)/2)}else{L=P;var G=C+_[1]-_[0];F[0]=Math.min(S,(G+S)/2),F[1]=Math.max(S,(G+S)/2)}var $=[Math.min(S,(L+S)/2),Math.max(S,(L+S)/2)];if(t>$[0]&&t<=$[1]||t>=F[0]&&t<=F[1]){p=u[b].index;break}}else{var N=Math.min(P,C),U=Math.max(P,C);if(t>(N+S)/2&&t<=(U+S)/2){p=u[b].index;break}}}else for(var J=0;J<o;J++)if(J===0&&t<=(n[J].coordinate+n[J+1].coordinate)/2||J>0&&J<o-1&&t>(n[J].coordinate+n[J-1].coordinate)/2&&t<=(n[J].coordinate+n[J+1].coordinate)/2||J===o-1&&t>(n[J].coordinate+n[J-1].coordinate)/2){p=n[J].index;break}return p},Yv=function(t){var r,n=t,u=n.type.displayName,h=(r=t.type)!==null&&r!==void 0&&r.defaultProps?Hn(Hn({},t.type.defaultProps),t.props):t.props,p=h.stroke,o=h.fill,_;switch(u){case"Line":_=p;break;case"Area":case"Radar":_=p&&p!=="none"?p:o;break;default:_=o;break}return _},$le=function(t){var r=t.barSize,n=t.totalSize,u=t.stackGroups,h=u===void 0?{}:u;if(!h)return{};for(var p={},o=Object.keys(h),_=0,b=o.length;_<b;_++)for(var P=h[o[_]].stackGroups,S=Object.keys(P),C=0,L=S.length;C<L;C++){var F=P[S[C]],j=F.items,G=F.cateAxisId,$=j.filter(function(X){return cl(X.type).indexOf("Bar")>=0});if($&&$.length){var N=$[0].type.defaultProps,U=N!==void 0?Hn(Hn({},N),$[0].props):$[0].props,J=U.barSize,q=U[G];p[q]||(p[q]=[]);var Y=tn(J)?r:J;p[q].push({item:$[0],stackList:$.slice(1),barSize:tn(Y)?void 0:Kc(Y,n,0)})}}return p},Nle=function(t){var r=t.barGap,n=t.barCategoryGap,u=t.bandSize,h=t.sizeList,p=h===void 0?[]:h,o=t.maxBarSize,_=p.length;if(_<1)return null;var b=Kc(r,u,0,!0),P,S=[];if(p[0].barSize===+p[0].barSize){var C=!1,L=u/_,F=p.reduce(function(J,q){return J+q.barSize||0},0);F+=(_-1)*b,F>=u&&(F-=(_-1)*b,b=0),F>=u&&L>0&&(C=!0,L*=.9,F=_*L);var j=(u-F)/2>>0,G={offset:j-b,size:0};P=p.reduce(function(J,q){var Y={item:q.item,position:{offset:G.offset+G.size+b,size:C?L:q.barSize}},X=[].concat(cA(J),[Y]);return G=X[X.length-1].position,q.stackList&&q.stackList.length&&q.stackList.forEach(function(ue){X.push({item:ue,position:G})}),X},S)}else{var $=Kc(n,u,0,!0);u-2*$-(_-1)*b<=0&&(b=0);var N=(u-2*$-(_-1)*b)/_;N>1&&(N>>=0);var U=o===+o?Math.min(N,o):N;P=p.reduce(function(J,q,Y){var X=[].concat(cA(J),[{item:q.item,position:{offset:$+(N+b)*Y+(N-U)/2,size:U}}]);return q.stackList&&q.stackList.length&&q.stackList.forEach(function(ue){X.push({item:ue,position:X[X.length-1].position})}),X},S)}return P},Ule=function(t,r,n,u){var h=n.children,p=n.width,o=n.margin,_=p-(o.left||0)-(o.right||0),b=nL({children:h,legendWidth:_});if(b){var P=u||{},S=P.width,C=P.height,L=b.align,F=b.verticalAlign,j=b.layout;if((j==="vertical"||j==="horizontal"&&F==="middle")&&L!=="center"&&Bt(t[L]))return Hn(Hn({},t),{},Wh({},L,t[L]+(S||0)));if((j==="horizontal"||j==="vertical"&&L==="center")&&F!=="middle"&&Bt(t[F]))return Hn(Hn({},t),{},Wh({},F,t[F]+(C||0)))}return t},Vle=function(t,r,n){return tn(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},iL=function(t,r,n,u,h){var p=r.props.children,o=os(p,Cm).filter(function(b){return Vle(u,h,b.props.direction)});if(o&&o.length){var _=o.map(function(b){return b.props.dataKey});return t.reduce(function(b,P){var S=Os(P,n);if(tn(S))return b;var C=Array.isArray(S)?[Pm(S),Em(S)]:[S,S],L=_.reduce(function(F,j){var G=Os(P,j,0),$=C[0]-Math.abs(Array.isArray(G)?G[0]:G),N=C[1]+Math.abs(Array.isArray(G)?G[1]:G);return[Math.min($,F[0]),Math.max(N,F[1])]},[1/0,-1/0]);return[Math.min(L[0],b[0]),Math.max(L[1],b[1])]},[1/0,-1/0])}return null},Gle=function(t,r,n,u,h){var p=r.map(function(o){return iL(t,o,n,h,u)}).filter(function(o){return!tn(o)});return p&&p.length?p.reduce(function(o,_){return[Math.min(o[0],_[0]),Math.max(o[1],_[1])]},[1/0,-1/0]):null},oL=function(t,r,n,u,h){var p=r.map(function(_){var b=_.props.dataKey;return n==="number"&&b&&iL(t,_,b,u)||ap(t,b,n,h)});if(n==="number")return p.reduce(function(_,b){return[Math.min(_[0],b[0]),Math.max(_[1],b[1])]},[1/0,-1/0]);var o={};return p.reduce(function(_,b){for(var P=0,S=b.length;P<S;P++)o[b[P]]||(o[b[P]]=!0,_.push(b[P]));return _},[])},aL=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},sL=function(t,r,n,u){if(u)return t.map(function(_){return _.coordinate});var h,p,o=t.map(function(_){return _.coordinate===r&&(h=!0),_.coordinate===n&&(p=!0),_.coordinate});return h||o.push(r),p||o.push(n),o},sl=function(t,r,n){if(!t)return null;var u=t.scale,h=t.duplicateDomain,p=t.type,o=t.range,_=t.realScaleType==="scaleBand"?u.bandwidth()/2:2,b=(r||n)&&p==="category"&&u.bandwidth?u.bandwidth()/_:0;if(b=t.axisType==="angleAxis"&&(o==null?void 0:o.length)>=2?rs(o[0]-o[1])*2*b:b,r&&(t.ticks||t.niceTicks)){var P=(t.ticks||t.niceTicks).map(function(S){var C=h?h.indexOf(S):S;return{coordinate:u(C)+b,value:S,offset:b}});return P.filter(function(S){return!w2(S.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(S,C){return{coordinate:u(S)+b,value:S,index:C,offset:b}}):u.ticks&&!n?u.ticks(t.tickCount).map(function(S){return{coordinate:u(S)+b,value:S,offset:b}}):u.domain().map(function(S,C){return{coordinate:u(S)+b,value:h?h[S]:S,index:C,offset:b}})},x9=new WeakMap,A5=function(t,r){if(typeof r!="function")return t;x9.has(t)||x9.set(t,new WeakMap);var n=x9.get(t);if(n.has(r))return n.get(r);var u=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,u),u},Wle=function(t,r,n){var u=t.scale,h=t.type,p=t.layout,o=t.axisType;if(u==="auto")return p==="radial"&&o==="radiusAxis"?{scale:Fp(),realScaleType:"band"}:p==="radial"&&o==="angleAxis"?{scale:e6(),realScaleType:"linear"}:h==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:op(),realScaleType:"point"}:h==="category"?{scale:Fp(),realScaleType:"band"}:{scale:e6(),realScaleType:"linear"};if(Xc(u)){var _="scale".concat(fm(u));return{scale:(nA[_]||op)(),realScaleType:nA[_]?_:"point"}}return Ar(u)?{scale:u}:{scale:op(),realScaleType:"point"}},fA=1e-4,qle=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,u=t.range(),h=Math.min(u[0],u[1])-fA,p=Math.max(u[0],u[1])+fA,o=t(r[0]),_=t(r[n-1]);(o<h||o>p||_<h||_>p)&&t.domain([r[0],r[n-1]])}},Hle=function(t,r){if(!t)return null;for(var n=0,u=t.length;n<u;n++)if(t[n].item===r)return t[n].position;return null},Zle=function(t,r){if(!r||r.length!==2||!Bt(r[0])||!Bt(r[1]))return t;var n=Math.min(r[0],r[1]),u=Math.max(r[0],r[1]),h=[t[0],t[1]];return(!Bt(t[0])||t[0]<n)&&(h[0]=n),(!Bt(t[1])||t[1]>u)&&(h[1]=u),h[0]>u&&(h[0]=u),h[1]<n&&(h[1]=n),h},Xle=function(t){var r=t.length;if(!(r<=0))for(var n=0,u=t[0].length;n<u;++n)for(var h=0,p=0,o=0;o<r;++o){var _=w2(t[o][n][1])?t[o][n][0]:t[o][n][1];_>=0?(t[o][n][0]=h,t[o][n][1]=h+_,h=t[o][n][1]):(t[o][n][0]=p,t[o][n][1]=p+_,p=t[o][n][1])}},Kle=function(t){var r=t.length;if(!(r<=0))for(var n=0,u=t[0].length;n<u;++n)for(var h=0,p=0;p<r;++p){var o=w2(t[p][n][1])?t[p][n][0]:t[p][n][1];o>=0?(t[p][n][0]=h,t[p][n][1]=h+o,h=t[p][n][1]):(t[p][n][0]=0,t[p][n][1]=0)}},Yle={sign:Xle,expand:mX,none:of,silhouette:gX,wiggle:yX,positive:Kle},Jle=function(t,r,n){var u=r.map(function(o){return o.props.dataKey}),h=Yle[n],p=pX().keys(u).value(function(o,_){return+Os(o,_,0)}).order(Ug).offset(h);return p(t)},Qle=function(t,r,n,u,h,p){if(!t)return null;var o=p?r.reverse():r,_={},b=o.reduce(function(S,C){var L,F=(L=C.type)!==null&&L!==void 0&&L.defaultProps?Hn(Hn({},C.type.defaultProps),C.props):C.props,j=F.stackId,G=F.hide;if(G)return S;var $=F[n],N=S[$]||{hasStack:!1,stackGroups:{}};if(fi(j)){var U=N.stackGroups[j]||{numericAxisId:n,cateAxisId:u,items:[]};U.items.push(C),N.hasStack=!0,N.stackGroups[j]=U}else N.stackGroups[hm("_stackId_")]={numericAxisId:n,cateAxisId:u,items:[C]};return Hn(Hn({},S),{},Wh({},$,N))},_),P={};return Object.keys(b).reduce(function(S,C){var L=b[C];if(L.hasStack){var F={};L.stackGroups=Object.keys(L.stackGroups).reduce(function(j,G){var $=L.stackGroups[G];return Hn(Hn({},j),{},Wh({},G,{numericAxisId:n,cateAxisId:u,items:$.items,stackedData:Jle(t,$.items,h)}))},F)}return Hn(Hn({},S),{},Wh({},C,L))},P)},eue=function(t,r){var n=r.realScaleType,u=r.type,h=r.tickCount,p=r.originalDomain,o=r.allowDecimals,_=n||r.scale;if(_!=="auto"&&_!=="linear")return null;if(h&&u==="number"&&p&&(p[0]==="auto"||p[1]==="auto")){var b=t.domain();if(!b.length)return null;var P=fle(b,h,o);return t.domain([Pm(P),Em(P)]),{niceTicks:P}}if(h&&u==="number"){var S=t.domain(),C=dle(S,h,o);return{niceTicks:C}}return null},dA=function(t){var r=t.axis,n=t.ticks,u=t.offset,h=t.bandSize,p=t.entry,o=t.index;if(r.type==="category")return n[o]?n[o].coordinate+u:null;var _=Os(p,r.dataKey,r.domain[o]);return tn(_)?null:r.scale(_)-h/2+u},tue=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var u=Math.min(n[0],n[1]),h=Math.max(n[0],n[1]);return u<=0&&h>=0?0:h<0?h:u}return n[0]},rue=function(t,r){var n,u=(n=t.type)!==null&&n!==void 0&&n.defaultProps?Hn(Hn({},t.type.defaultProps),t.props):t.props,h=u.stackId;if(fi(h)){var p=r[h];if(p){var o=p.items.indexOf(t);return o>=0?p.stackedData[o]:null}}return null},nue=function(t){return t.reduce(function(r,n){return[Pm(n.concat([r[0]]).filter(Bt)),Em(n.concat([r[1]]).filter(Bt))]},[1/0,-1/0])},lL=function(t,r,n){return Object.keys(t).reduce(function(u,h){var p=t[h],o=p.stackedData,_=o.reduce(function(b,P){var S=nue(P.slice(r,n+1));return[Math.min(b[0],S[0]),Math.max(b[1],S[1])]},[1/0,-1/0]);return[Math.min(_[0],u[0]),Math.max(_[1],u[1])]},[1/0,-1/0]).map(function(u){return u===1/0||u===-1/0?0:u})},pA=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,mA=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,_y=function(t,r,n){if(Ar(t))return t(r,n);if(!Array.isArray(t))return r;var u=[];if(Bt(t[0]))u[0]=n?t[0]:Math.min(t[0],r[0]);else if(pA.test(t[0])){var h=+pA.exec(t[0])[1];u[0]=r[0]-h}else Ar(t[0])?u[0]=t[0](r[0]):u[0]=r[0];if(Bt(t[1]))u[1]=n?t[1]:Math.max(t[1],r[1]);else if(mA.test(t[1])){var p=+mA.exec(t[1])[1];u[1]=r[1]+p}else Ar(t[1])?u[1]=t[1](r[1]):u[1]=r[1];return u},s6=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var u=t.scale.bandwidth();if(!n||u>0)return u}if(t&&r&&r.length>=2){for(var h=Sv(r,function(S){return S.coordinate}),p=1/0,o=1,_=h.length;o<_;o++){var b=h[o],P=h[o-1];p=Math.min((b.coordinate||0)-(P.coordinate||0),p)}return p===1/0?0:p}return n?void 0:0},gA=function(t,r,n){return!t||!t.length||Zv(t,Sa(n,"type.defaultProps.domain"))?r:t},uL=function(t,r){var n=t.type.defaultProps?Hn(Hn({},t.type.defaultProps),t.props):t.props,u=n.dataKey,h=n.name,p=n.unit,o=n.formatter,_=n.tooltipType,b=n.chartType,P=n.hide;return Hn(Hn({},Yr(t,!1)),{},{dataKey:u,unit:p,formatter:o,name:h||u,color:Yv(t),value:Os(r,u),type:_,payload:r,chartType:b,hide:P})};function Hp(e){"@babel/helpers - typeof";return Hp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hp(e)}function yA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function _A(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yA(Object(r),!0).forEach(function(n){iue(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iue(e,t,r){return t=oue(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oue(e){var t=aue(e,"string");return Hp(t)=="symbol"?t:t+""}function aue(e,t){if(Hp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Hp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var l6=Math.PI/180,sue=function(t){return t*180/Math.PI},Li=function(t,r,n,u){return{x:t+Math.cos(-l6*u)*n,y:r+Math.sin(-l6*u)*n}},lue=function(t,r){var n=t.x,u=t.y,h=r.x,p=r.y;return Math.sqrt(Math.pow(n-h,2)+Math.pow(u-p,2))},uue=function(t,r){var n=t.x,u=t.y,h=r.cx,p=r.cy,o=lue({x:n,y:u},{x:h,y:p});if(o<=0)return{radius:o};var _=(n-h)/o,b=Math.acos(_);return u>p&&(b=2*Math.PI-b),{radius:o,angle:sue(b),angleInRadian:b}},cue=function(t){var r=t.startAngle,n=t.endAngle,u=Math.floor(r/360),h=Math.floor(n/360),p=Math.min(u,h);return{startAngle:r-p*360,endAngle:n-p*360}},hue=function(t,r){var n=r.startAngle,u=r.endAngle,h=Math.floor(n/360),p=Math.floor(u/360),o=Math.min(h,p);return t+o*360},vA=function(t,r){var n=t.x,u=t.y,h=uue({x:n,y:u},r),p=h.radius,o=h.angle,_=r.innerRadius,b=r.outerRadius;if(p<_||p>b)return!1;if(p===0)return!0;var P=cue(r),S=P.startAngle,C=P.endAngle,L=o,F;if(S<=C){for(;L>C;)L-=360;for(;L<S;)L+=360;F=L>=S&&L<=C}else{for(;L>S;)L-=360;for(;L<C;)L+=360;F=L>=C&&L<=S}return F?_A(_A({},r),{},{radius:p,angle:hue(L,r)}):null};function Zp(e){"@babel/helpers - typeof";return Zp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zp(e)}var fue=["offset"];function due(e){return yue(e)||gue(e)||mue(e)||pue()}function pue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mue(e,t){if(e){if(typeof e=="string")return vy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vy(e,t)}}function gue(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function yue(e){if(Array.isArray(e))return vy(e)}function vy(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _ue(e,t){if(e==null)return{};var r=vue(e,t),n,u;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(u=0;u<h.length;u++)n=h[u],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function vue(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function xA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function ui(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xA(Object(r),!0).forEach(function(n){xue(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xue(e,t,r){return t=bue(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bue(e){var t=wue(e,"string");return Zp(t)=="symbol"?t:t+""}function wue(e,t){if(Zp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Zp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xp(){return Xp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xp.apply(this,arguments)}var Tue=function(t){var r=t.value,n=t.formatter,u=tn(t.children)?r:t.children;return Ar(n)?n(u):u},Sue=function(t,r){var n=rs(r-t),u=Math.min(Math.abs(r-t),360);return n*u},Eue=function(t,r,n){var u=t.position,h=t.viewBox,p=t.offset,o=t.className,_=h,b=_.cx,P=_.cy,S=_.innerRadius,C=_.outerRadius,L=_.startAngle,F=_.endAngle,j=_.clockWise,G=(S+C)/2,$=Sue(L,F),N=$>=0?1:-1,U,J;u==="insideStart"?(U=L+N*p,J=j):u==="insideEnd"?(U=F-N*p,J=!j):u==="end"&&(U=F+N*p,J=j),J=$<=0?J:!J;var q=Li(b,P,G,U),Y=Li(b,P,G,U+(J?1:-1)*359),X="M".concat(q.x,",").concat(q.y,`
    A`).concat(G,",").concat(G,",0,1,").concat(J?0:1,`,
    `).concat(Y.x,",").concat(Y.y),ue=tn(t.id)?hm("recharts-radial-line-"):t.id;return Ne.createElement("text",Xp({},n,{dominantBaseline:"central",className:rn("recharts-radial-bar-label",o)}),Ne.createElement("defs",null,Ne.createElement("path",{id:ue,d:X})),Ne.createElement("textPath",{xlinkHref:"#".concat(ue)},r))},Pue=function(t){var r=t.viewBox,n=t.offset,u=t.position,h=r,p=h.cx,o=h.cy,_=h.innerRadius,b=h.outerRadius,P=h.startAngle,S=h.endAngle,C=(P+S)/2;if(u==="outside"){var L=Li(p,o,b+n,C),F=L.x,j=L.y;return{x:F,y:j,textAnchor:F>=p?"start":"end",verticalAnchor:"middle"}}if(u==="center")return{x:p,y:o,textAnchor:"middle",verticalAnchor:"middle"};if(u==="centerTop")return{x:p,y:o,textAnchor:"middle",verticalAnchor:"start"};if(u==="centerBottom")return{x:p,y:o,textAnchor:"middle",verticalAnchor:"end"};var G=(_+b)/2,$=Li(p,o,G,C),N=$.x,U=$.y;return{x:N,y:U,textAnchor:"middle",verticalAnchor:"middle"}},Aue=function(t){var r=t.viewBox,n=t.parentViewBox,u=t.offset,h=t.position,p=r,o=p.x,_=p.y,b=p.width,P=p.height,S=P>=0?1:-1,C=S*u,L=S>0?"end":"start",F=S>0?"start":"end",j=b>=0?1:-1,G=j*u,$=j>0?"end":"start",N=j>0?"start":"end";if(h==="top"){var U={x:o+b/2,y:_-S*u,textAnchor:"middle",verticalAnchor:L};return ui(ui({},U),n?{height:Math.max(_-n.y,0),width:b}:{})}if(h==="bottom"){var J={x:o+b/2,y:_+P+C,textAnchor:"middle",verticalAnchor:F};return ui(ui({},J),n?{height:Math.max(n.y+n.height-(_+P),0),width:b}:{})}if(h==="left"){var q={x:o-G,y:_+P/2,textAnchor:$,verticalAnchor:"middle"};return ui(ui({},q),n?{width:Math.max(q.x-n.x,0),height:P}:{})}if(h==="right"){var Y={x:o+b+G,y:_+P/2,textAnchor:N,verticalAnchor:"middle"};return ui(ui({},Y),n?{width:Math.max(n.x+n.width-Y.x,0),height:P}:{})}var X=n?{width:b,height:P}:{};return h==="insideLeft"?ui({x:o+G,y:_+P/2,textAnchor:N,verticalAnchor:"middle"},X):h==="insideRight"?ui({x:o+b-G,y:_+P/2,textAnchor:$,verticalAnchor:"middle"},X):h==="insideTop"?ui({x:o+b/2,y:_+C,textAnchor:"middle",verticalAnchor:F},X):h==="insideBottom"?ui({x:o+b/2,y:_+P-C,textAnchor:"middle",verticalAnchor:L},X):h==="insideTopLeft"?ui({x:o+G,y:_+C,textAnchor:N,verticalAnchor:F},X):h==="insideTopRight"?ui({x:o+b-G,y:_+C,textAnchor:$,verticalAnchor:F},X):h==="insideBottomLeft"?ui({x:o+G,y:_+P-C,textAnchor:N,verticalAnchor:L},X):h==="insideBottomRight"?ui({x:o+b-G,y:_+P-C,textAnchor:$,verticalAnchor:L},X):kf(h)&&(Bt(h.x)||Lc(h.x))&&(Bt(h.y)||Lc(h.y))?ui({x:o+Kc(h.x,b),y:_+Kc(h.y,P),textAnchor:"end",verticalAnchor:"end"},X):ui({x:o+b/2,y:_+P/2,textAnchor:"middle",verticalAnchor:"middle"},X)},Mue=function(t){return"cx"in t&&Bt(t.cx)};function Ji(e){var t=e.offset,r=t===void 0?5:t,n=_ue(e,fue),u=ui({offset:r},n),h=u.viewBox,p=u.position,o=u.value,_=u.children,b=u.content,P=u.className,S=P===void 0?"":P,C=u.textBreakAll;if(!h||tn(o)&&tn(_)&&!Pe.isValidElement(b)&&!Ar(b))return null;if(Pe.isValidElement(b))return Pe.cloneElement(b,u);var L;if(Ar(b)){if(L=Pe.createElement(b,u),Pe.isValidElement(L))return L}else L=Tue(u);var F=Mue(h),j=Yr(u,!0);if(F&&(p==="insideStart"||p==="insideEnd"||p==="end"))return Eue(u,L,j);var G=F?Pue(u):Aue(u);return Ne.createElement(H4,Xp({className:rn("recharts-label",S)},j,G,{breakAll:C}),L)}Ji.displayName="Label";var cL=function(t){var r=t.cx,n=t.cy,u=t.angle,h=t.startAngle,p=t.endAngle,o=t.r,_=t.radius,b=t.innerRadius,P=t.outerRadius,S=t.x,C=t.y,L=t.top,F=t.left,j=t.width,G=t.height,$=t.clockWise,N=t.labelViewBox;if(N)return N;if(Bt(j)&&Bt(G)){if(Bt(S)&&Bt(C))return{x:S,y:C,width:j,height:G};if(Bt(L)&&Bt(F))return{x:L,y:F,width:j,height:G}}return Bt(S)&&Bt(C)?{x:S,y:C,width:0,height:0}:Bt(r)&&Bt(n)?{cx:r,cy:n,startAngle:h||u||0,endAngle:p||u||0,innerRadius:b||0,outerRadius:P||_||o||0,clockWise:$}:t.viewBox?t.viewBox:{}},Cue=function(t,r){return t?t===!0?Ne.createElement(Ji,{key:"label-implicit",viewBox:r}):fi(t)?Ne.createElement(Ji,{key:"label-implicit",viewBox:r,value:t}):Pe.isValidElement(t)?t.type===Ji?Pe.cloneElement(t,{key:"label-implicit",viewBox:r}):Ne.createElement(Ji,{key:"label-implicit",content:t,viewBox:r}):Ar(t)?Ne.createElement(Ji,{key:"label-implicit",content:t,viewBox:r}):kf(t)?Ne.createElement(Ji,Xp({viewBox:r},t,{key:"label-implicit"})):null:null},Iue=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var u=t.children,h=cL(t),p=os(u,Ji).map(function(_,b){return Pe.cloneElement(_,{viewBox:r||h,key:"label-".concat(b)})});if(!n)return p;var o=Cue(t.label,r||h);return[o].concat(due(p))};Ji.parseViewBox=cL;Ji.renderCallByParent=Iue;function Oue(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var kue=Oue;const Due=Br(kue);function Kp(e){"@babel/helpers - typeof";return Kp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kp(e)}var Lue=["valueAccessor"],zue=["data","dataKey","clockWise","id","textBreakAll"];function Rue(e){return $ue(e)||jue(e)||Fue(e)||Bue()}function Bue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fue(e,t){if(e){if(typeof e=="string")return xy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xy(e,t)}}function jue(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function $ue(e){if(Array.isArray(e))return xy(e)}function xy(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u6(){return u6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u6.apply(this,arguments)}function bA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function wA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bA(Object(r),!0).forEach(function(n){Nue(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Nue(e,t,r){return t=Uue(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Uue(e){var t=Vue(e,"string");return Kp(t)=="symbol"?t:t+""}function Vue(e,t){if(Kp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Kp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function TA(e,t){if(e==null)return{};var r=Gue(e,t),n,u;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(u=0;u<h.length;u++)n=h[u],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Gue(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Wue=function(t){return Array.isArray(t.value)?Due(t.value):t.value};function Uc(e){var t=e.valueAccessor,r=t===void 0?Wue:t,n=TA(e,Lue),u=n.data,h=n.dataKey,p=n.clockWise,o=n.id,_=n.textBreakAll,b=TA(n,zue);return!u||!u.length?null:Ne.createElement(Ti,{className:"recharts-label-list"},u.map(function(P,S){var C=tn(h)?r(P,S):Os(P&&P.payload,h),L=tn(o)?{}:{id:"".concat(o,"-").concat(S)};return Ne.createElement(Ji,u6({},Yr(P,!0),b,L,{parentViewBox:P.parentViewBox,value:C,textBreakAll:_,viewBox:Ji.parseViewBox(tn(p)?P:wA(wA({},P),{},{clockWise:p})),key:"label-".concat(S),index:S}))}))}Uc.displayName="LabelList";function que(e,t){return e?e===!0?Ne.createElement(Uc,{key:"labelList-implicit",data:t}):Ne.isValidElement(e)||Ar(e)?Ne.createElement(Uc,{key:"labelList-implicit",data:t,content:e}):kf(e)?Ne.createElement(Uc,u6({data:t},e,{key:"labelList-implicit"})):null:null}function Hue(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,u=os(n,Uc).map(function(p,o){return Pe.cloneElement(p,{data:t,key:"labelList-".concat(o)})});if(!r)return u;var h=que(e.label,t);return[h].concat(Rue(u))}Uc.renderCallByParent=Hue;function Yp(e){"@babel/helpers - typeof";return Yp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yp(e)}function by(){return by=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},by.apply(this,arguments)}function SA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function EA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SA(Object(r),!0).forEach(function(n){Zue(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Zue(e,t,r){return t=Xue(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xue(e){var t=Kue(e,"string");return Yp(t)=="symbol"?t:t+""}function Kue(e,t){if(Yp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Yp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Yue=function(t,r){var n=rs(r-t),u=Math.min(Math.abs(r-t),359.999);return n*u},M5=function(t){var r=t.cx,n=t.cy,u=t.radius,h=t.angle,p=t.sign,o=t.isExternal,_=t.cornerRadius,b=t.cornerIsExternal,P=_*(o?1:-1)+u,S=Math.asin(_/P)/l6,C=b?h:h+p*S,L=Li(r,n,P,C),F=Li(r,n,u,C),j=b?h-p*S:h,G=Li(r,n,P*Math.cos(S*l6),j);return{center:L,circleTangency:F,lineTangency:G,theta:S}},hL=function(t){var r=t.cx,n=t.cy,u=t.innerRadius,h=t.outerRadius,p=t.startAngle,o=t.endAngle,_=Yue(p,o),b=p+_,P=Li(r,n,h,p),S=Li(r,n,h,b),C="M ".concat(P.x,",").concat(P.y,`
    A `).concat(h,",").concat(h,`,0,
    `).concat(+(Math.abs(_)>180),",").concat(+(p>b),`,
    `).concat(S.x,",").concat(S.y,`
  `);if(u>0){var L=Li(r,n,u,p),F=Li(r,n,u,b);C+="L ".concat(F.x,",").concat(F.y,`
            A `).concat(u,",").concat(u,`,0,
            `).concat(+(Math.abs(_)>180),",").concat(+(p<=b),`,
            `).concat(L.x,",").concat(L.y," Z")}else C+="L ".concat(r,",").concat(n," Z");return C},Jue=function(t){var r=t.cx,n=t.cy,u=t.innerRadius,h=t.outerRadius,p=t.cornerRadius,o=t.forceCornerRadius,_=t.cornerIsExternal,b=t.startAngle,P=t.endAngle,S=rs(P-b),C=M5({cx:r,cy:n,radius:h,angle:b,sign:S,cornerRadius:p,cornerIsExternal:_}),L=C.circleTangency,F=C.lineTangency,j=C.theta,G=M5({cx:r,cy:n,radius:h,angle:P,sign:-S,cornerRadius:p,cornerIsExternal:_}),$=G.circleTangency,N=G.lineTangency,U=G.theta,J=_?Math.abs(b-P):Math.abs(b-P)-j-U;if(J<0)return o?"M ".concat(F.x,",").concat(F.y,`
        a`).concat(p,",").concat(p,",0,0,1,").concat(p*2,`,0
        a`).concat(p,",").concat(p,",0,0,1,").concat(-p*2,`,0
      `):hL({cx:r,cy:n,innerRadius:u,outerRadius:h,startAngle:b,endAngle:P});var q="M ".concat(F.x,",").concat(F.y,`
    A`).concat(p,",").concat(p,",0,0,").concat(+(S<0),",").concat(L.x,",").concat(L.y,`
    A`).concat(h,",").concat(h,",0,").concat(+(J>180),",").concat(+(S<0),",").concat($.x,",").concat($.y,`
    A`).concat(p,",").concat(p,",0,0,").concat(+(S<0),",").concat(N.x,",").concat(N.y,`
  `);if(u>0){var Y=M5({cx:r,cy:n,radius:u,angle:b,sign:S,isExternal:!0,cornerRadius:p,cornerIsExternal:_}),X=Y.circleTangency,ue=Y.lineTangency,oe=Y.theta,Re=M5({cx:r,cy:n,radius:u,angle:P,sign:-S,isExternal:!0,cornerRadius:p,cornerIsExternal:_}),ze=Re.circleTangency,De=Re.lineTangency,Je=Re.theta,we=_?Math.abs(b-P):Math.abs(b-P)-oe-Je;if(we<0&&p===0)return"".concat(q,"L").concat(r,",").concat(n,"Z");q+="L".concat(De.x,",").concat(De.y,`
      A`).concat(p,",").concat(p,",0,0,").concat(+(S<0),",").concat(ze.x,",").concat(ze.y,`
      A`).concat(u,",").concat(u,",0,").concat(+(we>180),",").concat(+(S>0),",").concat(X.x,",").concat(X.y,`
      A`).concat(p,",").concat(p,",0,0,").concat(+(S<0),",").concat(ue.x,",").concat(ue.y,"Z")}else q+="L".concat(r,",").concat(n,"Z");return q},Que={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},fL=function(t){var r=EA(EA({},Que),t),n=r.cx,u=r.cy,h=r.innerRadius,p=r.outerRadius,o=r.cornerRadius,_=r.forceCornerRadius,b=r.cornerIsExternal,P=r.startAngle,S=r.endAngle,C=r.className;if(p<h||P===S)return null;var L=rn("recharts-sector",C),F=p-h,j=Kc(o,F,0,!0),G;return j>0&&Math.abs(P-S)<360?G=Jue({cx:n,cy:u,innerRadius:h,outerRadius:p,cornerRadius:Math.min(j,F/2),forceCornerRadius:_,cornerIsExternal:b,startAngle:P,endAngle:S}):G=hL({cx:n,cy:u,innerRadius:h,outerRadius:p,startAngle:P,endAngle:S}),Ne.createElement("path",by({},Yr(r,!0),{className:L,d:G,role:"img"}))};function Jp(e){"@babel/helpers - typeof";return Jp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jp(e)}function wy(){return wy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wy.apply(this,arguments)}function PA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function AA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PA(Object(r),!0).forEach(function(n){ece(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ece(e,t,r){return t=tce(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tce(e){var t=rce(e,"string");return Jp(t)=="symbol"?t:t+""}function rce(e,t){if(Jp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Jp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var MA={curveBasisClosed:nX,curveBasisOpen:iX,curveBasis:rX,curveBumpX:UZ,curveBumpY:VZ,curveLinearClosed:oX,curveLinear:pm,curveMonotoneX:aX,curveMonotoneY:sX,curveNatural:lX,curveStep:uX,curveStepAfter:hX,curveStepBefore:cX},C5=function(t){return t.x===+t.x&&t.y===+t.y},Rd=function(t){return t.x},Bd=function(t){return t.y},nce=function(t,r){if(Ar(t))return t;var n="curve".concat(fm(t));return(n==="curveMonotone"||n==="curveBump")&&r?MA["".concat(n).concat(r==="vertical"?"Y":"X")]:MA[n]||pm},ice=function(t){var r=t.type,n=r===void 0?"linear":r,u=t.points,h=u===void 0?[]:u,p=t.baseLine,o=t.layout,_=t.connectNulls,b=_===void 0?!1:_,P=nce(n,o),S=b?h.filter(function(j){return C5(j)}):h,C;if(Array.isArray(p)){var L=b?p.filter(function(j){return C5(j)}):p,F=S.map(function(j,G){return AA(AA({},j),{},{base:L[G]})});return o==="vertical"?C=v5().y(Bd).x1(Rd).x0(function(j){return j.base.x}):C=v5().x(Rd).y1(Bd).y0(function(j){return j.base.y}),C.defined(C5).curve(P),C(F)}return o==="vertical"&&Bt(p)?C=v5().y(Bd).x1(Rd).x0(p):Bt(p)?C=v5().x(Rd).y1(Bd).y0(p):C=fk().x(Rd).y(Bd),C.defined(C5).curve(P),C(S)},CA=function(t){var r=t.className,n=t.points,u=t.path,h=t.pathRef;if((!n||!n.length)&&!u)return null;var p=n&&n.length?ice(t):u;return Ne.createElement("path",wy({},Yr(t,!1),k4(t),{className:rn("recharts-curve",r),d:p,ref:h}))},oce=Object.getOwnPropertyNames,ace=Object.getOwnPropertySymbols,sce=Object.prototype.hasOwnProperty;function IA(e,t){return function(n,u,h){return e(n,u,h)&&t(n,u,h)}}function I5(e){return function(r,n,u){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,u);var h=u.cache,p=h.get(r),o=h.get(n);if(p&&o)return p===n&&o===r;h.set(r,n),h.set(n,r);var _=e(r,n,u);return h.delete(r),h.delete(n),_}}function OA(e){return oce(e).concat(ace(e))}var lce=Object.hasOwn||function(e,t){return sce.call(e,t)};function l1(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var uce="__v",cce="__o",hce="_owner",kA=Object.getOwnPropertyDescriptor,DA=Object.keys;function fce(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function dce(e,t){return l1(e.getTime(),t.getTime())}function pce(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function mce(e,t){return e===t}function LA(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var u=new Array(n),h=e.entries(),p,o,_=0;(p=h.next())&&!p.done;){for(var b=t.entries(),P=!1,S=0;(o=b.next())&&!o.done;){if(u[S]){S++;continue}var C=p.value,L=o.value;if(r.equals(C[0],L[0],_,S,e,t,r)&&r.equals(C[1],L[1],C[0],L[0],e,t,r)){P=u[S]=!0;break}S++}if(!P)return!1;_++}return!0}var gce=l1;function yce(e,t,r){var n=DA(e),u=n.length;if(DA(t).length!==u)return!1;for(;u-- >0;)if(!dL(e,t,r,n[u]))return!1;return!0}function Fd(e,t,r){var n=OA(e),u=n.length;if(OA(t).length!==u)return!1;for(var h,p,o;u-- >0;)if(h=n[u],!dL(e,t,r,h)||(p=kA(e,h),o=kA(t,h),(p||o)&&(!p||!o||p.configurable!==o.configurable||p.enumerable!==o.enumerable||p.writable!==o.writable)))return!1;return!0}function _ce(e,t){return l1(e.valueOf(),t.valueOf())}function vce(e,t){return e.source===t.source&&e.flags===t.flags}function zA(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var u=new Array(n),h=e.values(),p,o;(p=h.next())&&!p.done;){for(var _=t.values(),b=!1,P=0;(o=_.next())&&!o.done;){if(!u[P]&&r.equals(p.value,o.value,p.value,o.value,e,t,r)){b=u[P]=!0;break}P++}if(!b)return!1}return!0}function xce(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function bce(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function dL(e,t,r,n){return(n===hce||n===cce||n===uce)&&(e.$$typeof||t.$$typeof)?!0:lce(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}var wce="[object Arguments]",Tce="[object Boolean]",Sce="[object Date]",Ece="[object Error]",Pce="[object Map]",Ace="[object Number]",Mce="[object Object]",Cce="[object RegExp]",Ice="[object Set]",Oce="[object String]",kce="[object URL]",Dce=Array.isArray,RA=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,BA=Object.assign,Lce=Object.prototype.toString.call.bind(Object.prototype.toString);function zce(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areErrorsEqual,u=e.areFunctionsEqual,h=e.areMapsEqual,p=e.areNumbersEqual,o=e.areObjectsEqual,_=e.arePrimitiveWrappersEqual,b=e.areRegExpsEqual,P=e.areSetsEqual,S=e.areTypedArraysEqual,C=e.areUrlsEqual;return function(F,j,G){if(F===j)return!0;if(F==null||j==null)return!1;var $=typeof F;if($!==typeof j)return!1;if($!=="object")return $==="number"?p(F,j,G):$==="function"?u(F,j,G):!1;var N=F.constructor;if(N!==j.constructor)return!1;if(N===Object)return o(F,j,G);if(Dce(F))return t(F,j,G);if(RA!=null&&RA(F))return S(F,j,G);if(N===Date)return r(F,j,G);if(N===RegExp)return b(F,j,G);if(N===Map)return h(F,j,G);if(N===Set)return P(F,j,G);var U=Lce(F);return U===Sce?r(F,j,G):U===Cce?b(F,j,G):U===Pce?h(F,j,G):U===Ice?P(F,j,G):U===Mce?typeof F.then!="function"&&typeof j.then!="function"&&o(F,j,G):U===kce?C(F,j,G):U===Ece?n(F,j,G):U===wce?o(F,j,G):U===Tce||U===Ace||U===Oce?_(F,j,G):!1}}function Rce(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,u={areArraysEqual:n?Fd:fce,areDatesEqual:dce,areErrorsEqual:pce,areFunctionsEqual:mce,areMapsEqual:n?IA(LA,Fd):LA,areNumbersEqual:gce,areObjectsEqual:n?Fd:yce,arePrimitiveWrappersEqual:_ce,areRegExpsEqual:vce,areSetsEqual:n?IA(zA,Fd):zA,areTypedArraysEqual:n?Fd:xce,areUrlsEqual:bce};if(r&&(u=BA({},u,r(u))),t){var h=I5(u.areArraysEqual),p=I5(u.areMapsEqual),o=I5(u.areObjectsEqual),_=I5(u.areSetsEqual);u=BA({},u,{areArraysEqual:h,areMapsEqual:p,areObjectsEqual:o,areSetsEqual:_})}return u}function Bce(e){return function(t,r,n,u,h,p,o){return e(t,r,o)}}function Fce(e){var t=e.circular,r=e.comparator,n=e.createState,u=e.equals,h=e.strict;if(n)return function(_,b){var P=n(),S=P.cache,C=S===void 0?t?new WeakMap:void 0:S,L=P.meta;return r(_,b,{cache:C,equals:u,meta:L,strict:h})};if(t)return function(_,b){return r(_,b,{cache:new WeakMap,equals:u,meta:void 0,strict:h})};var p={cache:void 0,equals:u,meta:void 0,strict:h};return function(_,b){return r(_,b,p)}}var jce=zu();zu({strict:!0});zu({circular:!0});zu({circular:!0,strict:!0});zu({createInternalComparator:function(){return l1}});zu({strict:!0,createInternalComparator:function(){return l1}});zu({circular:!0,createInternalComparator:function(){return l1}});zu({circular:!0,createInternalComparator:function(){return l1},strict:!0});function zu(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,n=e.createInternalComparator,u=e.createState,h=e.strict,p=h===void 0?!1:h,o=Rce(e),_=zce(o),b=n?n(_):Bce(_);return Fce({circular:r,comparator:_,createState:u,equals:b,strict:p})}function $ce(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function FA(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function u(h){r<0&&(r=h),h-r>t?(e(h),r=-1):$ce(u)};requestAnimationFrame(n)}function Ty(e){"@babel/helpers - typeof";return Ty=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ty(e)}function Nce(e){return Wce(e)||Gce(e)||Vce(e)||Uce()}function Uce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vce(e,t){if(e){if(typeof e=="string")return jA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jA(e,t)}}function jA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Gce(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Wce(e){if(Array.isArray(e))return e}function qce(){var e={},t=function(){return null},r=!1,n=function u(h){if(!r){if(Array.isArray(h)){if(!h.length)return;var p=h,o=Nce(p),_=o[0],b=o.slice(1);if(typeof _=="number"){FA(u.bind(null,b),_);return}u(_),FA(u.bind(null,b));return}Ty(h)==="object"&&(e=h,t(e)),typeof h=="function"&&h()}};return{stop:function(){r=!0},start:function(h){r=!1,n(h)},subscribe:function(h){return t=h,function(){t=function(){return null}}}}}function Qp(e){"@babel/helpers - typeof";return Qp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qp(e)}function $A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function NA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$A(Object(r),!0).forEach(function(n){pL(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$A(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pL(e,t,r){return t=Hce(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hce(e){var t=Zce(e,"string");return Qp(t)==="symbol"?t:String(t)}function Zce(e,t){if(Qp(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Qp(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Xce=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,u){return n.filter(function(h){return u.includes(h)})})},Kce=function(t){return t},Yce=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},sp=function(t,r){return Object.keys(r).reduce(function(n,u){return NA(NA({},n),{},pL({},u,t(u,r[u])))},{})},UA=function(t,r,n){return t.map(function(u){return"".concat(Yce(u)," ").concat(r,"ms ").concat(n)}).join(",")};function Jce(e,t){return t1e(e)||e1e(e,t)||mL(e,t)||Qce()}function Qce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function e1e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,u,h,p,o=[],_=!0,b=!1;try{if(h=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;_=!1}else for(;!(_=(n=h.call(r)).done)&&(o.push(n.value),o.length!==t);_=!0);}catch(P){b=!0,u=P}finally{try{if(!_&&r.return!=null&&(p=r.return(),Object(p)!==p))return}finally{if(b)throw u}}return o}}function t1e(e){if(Array.isArray(e))return e}function r1e(e){return o1e(e)||i1e(e)||mL(e)||n1e()}function n1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mL(e,t){if(e){if(typeof e=="string")return Sy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Sy(e,t)}}function i1e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function o1e(e){if(Array.isArray(e))return Sy(e)}function Sy(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c6=1e-4,gL=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},yL=function(t,r){return t.map(function(n,u){return n*Math.pow(r,u)}).reduce(function(n,u){return n+u})},VA=function(t,r){return function(n){var u=gL(t,r);return yL(u,n)}},a1e=function(t,r){return function(n){var u=gL(t,r),h=[].concat(r1e(u.map(function(p,o){return p*o}).slice(1)),[0]);return yL(h,n)}},GA=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var u=r[0],h=r[1],p=r[2],o=r[3];if(r.length===1)switch(r[0]){case"linear":u=0,h=0,p=1,o=1;break;case"ease":u=.25,h=.1,p=.25,o=1;break;case"ease-in":u=.42,h=0,p=1,o=1;break;case"ease-out":u=.42,h=0,p=.58,o=1;break;case"ease-in-out":u=0,h=0,p=.58,o=1;break;default:{var _=r[0].split("(");if(_[0]==="cubic-bezier"&&_[1].split(")")[0].split(",").length===4){var b=_[1].split(")")[0].split(",").map(function(G){return parseFloat(G)}),P=Jce(b,4);u=P[0],h=P[1],p=P[2],o=P[3]}}}var S=VA(u,p),C=VA(h,o),L=a1e(u,p),F=function($){return $>1?1:$<0?0:$},j=function($){for(var N=$>1?1:$,U=N,J=0;J<8;++J){var q=S(U)-N,Y=L(U);if(Math.abs(q-N)<c6||Y<c6)return C(U);U=F(U-q/Y)}return C(U)};return j.isStepper=!1,j},s1e=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,u=t.damping,h=u===void 0?8:u,p=t.dt,o=p===void 0?17:p,_=function(P,S,C){var L=-(P-S)*n,F=C*h,j=C+(L-F)*o/1e3,G=C*o/1e3+P;return Math.abs(G-S)<c6&&Math.abs(j)<c6?[S,0]:[G,j]};return _.isStepper=!0,_.dt=o,_},l1e=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var u=r[0];if(typeof u=="string")switch(u){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return GA(u);case"spring":return s1e();default:if(u.split("(")[0]==="cubic-bezier")return GA(u)}return typeof u=="function"?u:null};function e2(e){"@babel/helpers - typeof";return e2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e2(e)}function WA(e){return h1e(e)||c1e(e)||_L(e)||u1e()}function u1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function c1e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function h1e(e){if(Array.isArray(e))return Py(e)}function qA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function ki(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qA(Object(r),!0).forEach(function(n){Ey(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ey(e,t,r){return t=f1e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f1e(e){var t=d1e(e,"string");return e2(t)==="symbol"?t:String(t)}function d1e(e,t){if(e2(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(e2(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function p1e(e,t){return y1e(e)||g1e(e,t)||_L(e,t)||m1e()}function m1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _L(e,t){if(e){if(typeof e=="string")return Py(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Py(e,t)}}function Py(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function g1e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,u,h,p,o=[],_=!0,b=!1;try{if(h=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;_=!1}else for(;!(_=(n=h.call(r)).done)&&(o.push(n.value),o.length!==t);_=!0);}catch(P){b=!0,u=P}finally{try{if(!_&&r.return!=null&&(p=r.return(),Object(p)!==p))return}finally{if(b)throw u}}return o}}function y1e(e){if(Array.isArray(e))return e}var h6=function(t,r,n){return t+(r-t)*n},Ay=function(t){var r=t.from,n=t.to;return r!==n},_1e=function e(t,r,n){var u=sp(function(h,p){if(Ay(p)){var o=t(p.from,p.to,p.velocity),_=p1e(o,2),b=_[0],P=_[1];return ki(ki({},p),{},{from:b,velocity:P})}return p},r);return n<1?sp(function(h,p){return Ay(p)?ki(ki({},p),{},{velocity:h6(p.velocity,u[h].velocity,n),from:h6(p.from,u[h].from,n)}):p},r):e(t,u,n-1)};const v1e=function(e,t,r,n,u){var h=Xce(e,t),p=h.reduce(function(G,$){return ki(ki({},G),{},Ey({},$,[e[$],t[$]]))},{}),o=h.reduce(function(G,$){return ki(ki({},G),{},Ey({},$,{from:e[$],velocity:0,to:t[$]}))},{}),_=-1,b,P,S=function(){return null},C=function(){return sp(function($,N){return N.from},o)},L=function(){return!Object.values(o).filter(Ay).length},F=function($){b||(b=$);var N=$-b,U=N/r.dt;o=_1e(r,o,U),u(ki(ki(ki({},e),t),C())),b=$,L()||(_=requestAnimationFrame(S))},j=function($){P||(P=$);var N=($-P)/n,U=sp(function(q,Y){return h6.apply(void 0,WA(Y).concat([r(N)]))},p);if(u(ki(ki(ki({},e),t),U)),N<1)_=requestAnimationFrame(S);else{var J=sp(function(q,Y){return h6.apply(void 0,WA(Y).concat([r(1)]))},p);u(ki(ki(ki({},e),t),J))}};return S=r.isStepper?F:j,function(){return requestAnimationFrame(S),function(){cancelAnimationFrame(_)}}};function pf(e){"@babel/helpers - typeof";return pf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pf(e)}var x1e=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function b1e(e,t){if(e==null)return{};var r=w1e(e,t),n,u;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(u=0;u<h.length;u++)n=h[u],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function w1e(e,t){if(e==null)return{};var r={},n=Object.keys(e),u,h;for(h=0;h<n.length;h++)u=n[h],!(t.indexOf(u)>=0)&&(r[u]=e[u]);return r}function b9(e){return P1e(e)||E1e(e)||S1e(e)||T1e()}function T1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S1e(e,t){if(e){if(typeof e=="string")return My(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return My(e,t)}}function E1e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function P1e(e){if(Array.isArray(e))return My(e)}function My(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function HA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function Za(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HA(Object(r),!0).forEach(function(n){Hd(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Hd(e,t,r){return t=vL(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A1e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ZA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,vL(n.key),n)}}function M1e(e,t,r){return t&&ZA(e.prototype,t),r&&ZA(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function vL(e){var t=C1e(e,"string");return pf(t)==="symbol"?t:String(t)}function C1e(e,t){if(pf(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(pf(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function I1e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Cy(e,t)}function Cy(e,t){return Cy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,u){return n.__proto__=u,n},Cy(e,t)}function O1e(e){var t=k1e();return function(){var n=f6(e),u;if(t){var h=f6(this).constructor;u=Reflect.construct(n,arguments,h)}else u=n.apply(this,arguments);return Iy(this,u)}}function Iy(e,t){if(t&&(pf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Oy(e)}function Oy(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k1e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function f6(e){return f6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},f6(e)}var Im=function(e){I1e(r,e);var t=O1e(r);function r(n,u){var h;A1e(this,r),h=t.call(this,n,u);var p=h.props,o=p.isActive,_=p.attributeName,b=p.from,P=p.to,S=p.steps,C=p.children,L=p.duration;if(h.handleStyleChange=h.handleStyleChange.bind(Oy(h)),h.changeStyle=h.changeStyle.bind(Oy(h)),!o||L<=0)return h.state={style:{}},typeof C=="function"&&(h.state={style:P}),Iy(h);if(S&&S.length)h.state={style:S[0].style};else if(b){if(typeof C=="function")return h.state={style:b},Iy(h);h.state={style:_?Hd({},_,b):b}}else h.state={style:{}};return h}return M1e(r,[{key:"componentDidMount",value:function(){var u=this.props,h=u.isActive,p=u.canBegin;this.mounted=!0,!(!h||!p)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(u){var h=this.props,p=h.isActive,o=h.canBegin,_=h.attributeName,b=h.shouldReAnimate,P=h.to,S=h.from,C=this.state.style;if(o){if(!p){var L={style:_?Hd({},_,P):P};this.state&&C&&(_&&C[_]!==P||!_&&C!==P)&&this.setState(L);return}if(!(jce(u.to,P)&&u.canBegin&&u.isActive)){var F=!u.canBegin||!u.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var j=F||b?S:u.to;if(this.state&&C){var G={style:_?Hd({},_,j):j};(_&&C[_]!==j||!_&&C!==j)&&this.setState(G)}this.runAnimation(Za(Za({},this.props),{},{from:j,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var u=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),u&&u()}},{key:"handleStyleChange",value:function(u){this.changeStyle(u)}},{key:"changeStyle",value:function(u){this.mounted&&this.setState({style:u})}},{key:"runJSAnimation",value:function(u){var h=this,p=u.from,o=u.to,_=u.duration,b=u.easing,P=u.begin,S=u.onAnimationEnd,C=u.onAnimationStart,L=v1e(p,o,l1e(b),_,this.changeStyle),F=function(){h.stopJSAnimation=L()};this.manager.start([C,P,F,_,S])}},{key:"runStepAnimation",value:function(u){var h=this,p=u.steps,o=u.begin,_=u.onAnimationStart,b=p[0],P=b.style,S=b.duration,C=S===void 0?0:S,L=function(j,G,$){if($===0)return j;var N=G.duration,U=G.easing,J=U===void 0?"ease":U,q=G.style,Y=G.properties,X=G.onAnimationEnd,ue=$>0?p[$-1]:G,oe=Y||Object.keys(q);if(typeof J=="function"||J==="spring")return[].concat(b9(j),[h.runJSAnimation.bind(h,{from:ue.style,to:q,duration:N,easing:J}),N]);var Re=UA(oe,N,J),ze=Za(Za(Za({},ue.style),q),{},{transition:Re});return[].concat(b9(j),[ze,N,X]).filter(Kce)};return this.manager.start([_].concat(b9(p.reduce(L,[P,Math.max(C,o)])),[u.onAnimationEnd]))}},{key:"runAnimation",value:function(u){this.manager||(this.manager=qce());var h=u.begin,p=u.duration,o=u.attributeName,_=u.to,b=u.easing,P=u.onAnimationStart,S=u.onAnimationEnd,C=u.steps,L=u.children,F=this.manager;if(this.unSubscribe=F.subscribe(this.handleStyleChange),typeof b=="function"||typeof L=="function"||b==="spring"){this.runJSAnimation(u);return}if(C.length>1){this.runStepAnimation(u);return}var j=o?Hd({},o,_):_,G=UA(Object.keys(j),p,b);F.start([P,h,Za(Za({},j),{},{transition:G}),p,S])}},{key:"render",value:function(){var u=this.props,h=u.children;u.begin;var p=u.duration;u.attributeName,u.easing;var o=u.isActive;u.steps,u.from,u.to,u.canBegin,u.onAnimationEnd,u.shouldReAnimate,u.onAnimationReStart;var _=b1e(u,x1e),b=Pe.Children.count(h),P=this.state.style;if(typeof h=="function")return h(P);if(!o||b===0||p<=0)return h;var S=function(L){var F=L.props,j=F.style,G=j===void 0?{}:j,$=F.className,N=Pe.cloneElement(L,Za(Za({},_),{},{style:Za(Za({},G),P),className:$}));return N};return b===1?S(Pe.Children.only(h)):Ne.createElement("div",null,Pe.Children.map(h,function(C){return S(C)}))}}]),r}(Pe.PureComponent);Im.displayName="Animate";Im.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Im.propTypes={from:Kt.oneOfType([Kt.object,Kt.string]),to:Kt.oneOfType([Kt.object,Kt.string]),attributeName:Kt.string,duration:Kt.number,begin:Kt.number,easing:Kt.oneOfType([Kt.string,Kt.func]),steps:Kt.arrayOf(Kt.shape({duration:Kt.number.isRequired,style:Kt.object.isRequired,easing:Kt.oneOfType([Kt.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Kt.func]),properties:Kt.arrayOf("string"),onAnimationEnd:Kt.func})),children:Kt.oneOfType([Kt.node,Kt.func]),isActive:Kt.bool,canBegin:Kt.bool,onAnimationEnd:Kt.func,shouldReAnimate:Kt.bool,onAnimationStart:Kt.func,onAnimationReStart:Kt.func};const t2=Im;function r2(e){"@babel/helpers - typeof";return r2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r2(e)}function d6(){return d6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d6.apply(this,arguments)}function D1e(e,t){return B1e(e)||R1e(e,t)||z1e(e,t)||L1e()}function L1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function z1e(e,t){if(e){if(typeof e=="string")return XA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return XA(e,t)}}function XA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function R1e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,u,h,p,o=[],_=!0,b=!1;try{if(h=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;_=!1}else for(;!(_=(n=h.call(r)).done)&&(o.push(n.value),o.length!==t);_=!0);}catch(P){b=!0,u=P}finally{try{if(!_&&r.return!=null&&(p=r.return(),Object(p)!==p))return}finally{if(b)throw u}}return o}}function B1e(e){if(Array.isArray(e))return e}function KA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function YA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KA(Object(r),!0).forEach(function(n){F1e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function F1e(e,t,r){return t=j1e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j1e(e){var t=$1e(e,"string");return r2(t)=="symbol"?t:t+""}function $1e(e,t){if(r2(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(r2(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var JA=function(t,r,n,u,h){var p=Math.min(Math.abs(n)/2,Math.abs(u)/2),o=u>=0?1:-1,_=n>=0?1:-1,b=u>=0&&n>=0||u<0&&n<0?1:0,P;if(p>0&&h instanceof Array){for(var S=[0,0,0,0],C=0,L=4;C<L;C++)S[C]=h[C]>p?p:h[C];P="M".concat(t,",").concat(r+o*S[0]),S[0]>0&&(P+="A ".concat(S[0],",").concat(S[0],",0,0,").concat(b,",").concat(t+_*S[0],",").concat(r)),P+="L ".concat(t+n-_*S[1],",").concat(r),S[1]>0&&(P+="A ".concat(S[1],",").concat(S[1],",0,0,").concat(b,`,
        `).concat(t+n,",").concat(r+o*S[1])),P+="L ".concat(t+n,",").concat(r+u-o*S[2]),S[2]>0&&(P+="A ".concat(S[2],",").concat(S[2],",0,0,").concat(b,`,
        `).concat(t+n-_*S[2],",").concat(r+u)),P+="L ".concat(t+_*S[3],",").concat(r+u),S[3]>0&&(P+="A ".concat(S[3],",").concat(S[3],",0,0,").concat(b,`,
        `).concat(t,",").concat(r+u-o*S[3])),P+="Z"}else if(p>0&&h===+h&&h>0){var F=Math.min(p,h);P="M ".concat(t,",").concat(r+o*F,`
            A `).concat(F,",").concat(F,",0,0,").concat(b,",").concat(t+_*F,",").concat(r,`
            L `).concat(t+n-_*F,",").concat(r,`
            A `).concat(F,",").concat(F,",0,0,").concat(b,",").concat(t+n,",").concat(r+o*F,`
            L `).concat(t+n,",").concat(r+u-o*F,`
            A `).concat(F,",").concat(F,",0,0,").concat(b,",").concat(t+n-_*F,",").concat(r+u,`
            L `).concat(t+_*F,",").concat(r+u,`
            A `).concat(F,",").concat(F,",0,0,").concat(b,",").concat(t,",").concat(r+u-o*F," Z")}else P="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(u," h ").concat(-n," Z");return P},N1e=function(t,r){if(!t||!r)return!1;var n=t.x,u=t.y,h=r.x,p=r.y,o=r.width,_=r.height;if(Math.abs(o)>0&&Math.abs(_)>0){var b=Math.min(h,h+o),P=Math.max(h,h+o),S=Math.min(p,p+_),C=Math.max(p,p+_);return n>=b&&n<=P&&u>=S&&u<=C}return!1},U1e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Jv=function(t){var r=YA(YA({},U1e),t),n=Pe.useRef(),u=Pe.useState(-1),h=D1e(u,2),p=h[0],o=h[1];Pe.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var J=n.current.getTotalLength();J&&o(J)}catch{}},[]);var _=r.x,b=r.y,P=r.width,S=r.height,C=r.radius,L=r.className,F=r.animationEasing,j=r.animationDuration,G=r.animationBegin,$=r.isAnimationActive,N=r.isUpdateAnimationActive;if(_!==+_||b!==+b||P!==+P||S!==+S||P===0||S===0)return null;var U=rn("recharts-rectangle",L);return N?Ne.createElement(t2,{canBegin:p>0,from:{width:P,height:S,x:_,y:b},to:{width:P,height:S,x:_,y:b},duration:j,animationEasing:F,isActive:N},function(J){var q=J.width,Y=J.height,X=J.x,ue=J.y;return Ne.createElement(t2,{canBegin:p>0,from:"0px ".concat(p===-1?1:p,"px"),to:"".concat(p,"px 0px"),attributeName:"strokeDasharray",begin:G,duration:j,isActive:$,easing:F},Ne.createElement("path",d6({},Yr(r,!0),{className:U,d:JA(X,ue,q,Y,C),ref:n})))}):Ne.createElement("path",d6({},Yr(r,!0),{className:U,d:JA(_,b,P,S,C)}))};function ky(){return ky=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ky.apply(this,arguments)}var xL=function(t){var r=t.cx,n=t.cy,u=t.r,h=t.className,p=rn("recharts-dot",h);return r===+r&&n===+n&&u===+u?Ne.createElement("circle",ky({},Yr(t,!1),k4(t),{className:p,cx:r,cy:n,r:u})):null};function n2(e){"@babel/helpers - typeof";return n2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n2(e)}var V1e=["x","y","top","left","width","height","className"];function Dy(){return Dy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dy.apply(this,arguments)}function QA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function G1e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QA(Object(r),!0).forEach(function(n){W1e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function W1e(e,t,r){return t=q1e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q1e(e){var t=H1e(e,"string");return n2(t)=="symbol"?t:t+""}function H1e(e,t){if(n2(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(n2(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Z1e(e,t){if(e==null)return{};var r=X1e(e,t),n,u;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(u=0;u<h.length;u++)n=h[u],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function X1e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var K1e=function(t,r,n,u,h,p){return"M".concat(t,",").concat(h,"v").concat(u,"M").concat(p,",").concat(r,"h").concat(n)},Y1e=function(t){var r=t.x,n=r===void 0?0:r,u=t.y,h=u===void 0?0:u,p=t.top,o=p===void 0?0:p,_=t.left,b=_===void 0?0:_,P=t.width,S=P===void 0?0:P,C=t.height,L=C===void 0?0:C,F=t.className,j=Z1e(t,V1e),G=G1e({x:n,y:h,top:o,left:b,width:S,height:L},j);return!Bt(n)||!Bt(h)||!Bt(S)||!Bt(L)||!Bt(o)||!Bt(b)?null:Ne.createElement("path",Dy({},Yr(G,!0),{className:rn("recharts-cross",F),d:K1e(n,h,S,L,o,b)}))},J1e=Rk,Q1e=J1e(Object.getPrototypeOf,Object),ehe=Q1e,the=wl,rhe=ehe,nhe=Tl,ihe="[object Object]",ohe=Function.prototype,ahe=Object.prototype,bL=ohe.toString,she=ahe.hasOwnProperty,lhe=bL.call(Object);function uhe(e){if(!nhe(e)||the(e)!=ihe)return!1;var t=rhe(e);if(t===null)return!0;var r=she.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&bL.call(r)==lhe}var che=uhe;const hhe=Br(che);var fhe=wl,dhe=Tl,phe="[object Boolean]";function mhe(e){return e===!0||e===!1||dhe(e)&&fhe(e)==phe}var ghe=mhe;const yhe=Br(ghe);function i2(e){"@babel/helpers - typeof";return i2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i2(e)}function p6(){return p6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},p6.apply(this,arguments)}function _he(e,t){return whe(e)||bhe(e,t)||xhe(e,t)||vhe()}function vhe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xhe(e,t){if(e){if(typeof e=="string")return eM(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eM(e,t)}}function eM(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function bhe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,u,h,p,o=[],_=!0,b=!1;try{if(h=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;_=!1}else for(;!(_=(n=h.call(r)).done)&&(o.push(n.value),o.length!==t);_=!0);}catch(P){b=!0,u=P}finally{try{if(!_&&r.return!=null&&(p=r.return(),Object(p)!==p))return}finally{if(b)throw u}}return o}}function whe(e){if(Array.isArray(e))return e}function tM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function rM(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tM(Object(r),!0).forEach(function(n){The(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function The(e,t,r){return t=She(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function She(e){var t=Ehe(e,"string");return i2(t)=="symbol"?t:t+""}function Ehe(e,t){if(i2(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(i2(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nM=function(t,r,n,u,h){var p=n-u,o;return o="M ".concat(t,",").concat(r),o+="L ".concat(t+n,",").concat(r),o+="L ".concat(t+n-p/2,",").concat(r+h),o+="L ".concat(t+n-p/2-u,",").concat(r+h),o+="L ".concat(t,",").concat(r," Z"),o},Phe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Ahe=function(t){var r=rM(rM({},Phe),t),n=Pe.useRef(),u=Pe.useState(-1),h=_he(u,2),p=h[0],o=h[1];Pe.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var U=n.current.getTotalLength();U&&o(U)}catch{}},[]);var _=r.x,b=r.y,P=r.upperWidth,S=r.lowerWidth,C=r.height,L=r.className,F=r.animationEasing,j=r.animationDuration,G=r.animationBegin,$=r.isUpdateAnimationActive;if(_!==+_||b!==+b||P!==+P||S!==+S||C!==+C||P===0&&S===0||C===0)return null;var N=rn("recharts-trapezoid",L);return $?Ne.createElement(t2,{canBegin:p>0,from:{upperWidth:0,lowerWidth:0,height:C,x:_,y:b},to:{upperWidth:P,lowerWidth:S,height:C,x:_,y:b},duration:j,animationEasing:F,isActive:$},function(U){var J=U.upperWidth,q=U.lowerWidth,Y=U.height,X=U.x,ue=U.y;return Ne.createElement(t2,{canBegin:p>0,from:"0px ".concat(p===-1?1:p,"px"),to:"".concat(p,"px 0px"),attributeName:"strokeDasharray",begin:G,duration:j,easing:F},Ne.createElement("path",p6({},Yr(r,!0),{className:N,d:nM(X,ue,J,q,Y),ref:n})))}):Ne.createElement("g",null,Ne.createElement("path",p6({},Yr(r,!0),{className:N,d:nM(_,b,P,S,C)})))},Mhe=["option","shapeType","propTransformer","activeClassName","isActive"];function o2(e){"@babel/helpers - typeof";return o2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o2(e)}function Che(e,t){if(e==null)return{};var r=Ihe(e,t),n,u;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(u=0;u<h.length;u++)n=h[u],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Ihe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function iM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function m6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iM(Object(r),!0).forEach(function(n){Ohe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ohe(e,t,r){return t=khe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function khe(e){var t=Dhe(e,"string");return o2(t)=="symbol"?t:t+""}function Dhe(e,t){if(o2(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(o2(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lhe(e,t){return m6(m6({},t),e)}function zhe(e,t){return e==="symbols"}function oM(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return Ne.createElement(Jv,r);case"trapezoid":return Ne.createElement(Ahe,r);case"sector":return Ne.createElement(fL,r);case"symbols":if(zhe(t))return Ne.createElement(gv,r);break;default:return null}}function Rhe(e){return Pe.isValidElement(e)?e.props:e}function Bhe(e){var t=e.option,r=e.shapeType,n=e.propTransformer,u=n===void 0?Lhe:n,h=e.activeClassName,p=h===void 0?"recharts-active-shape":h,o=e.isActive,_=Che(e,Mhe),b;if(Pe.isValidElement(t))b=Pe.cloneElement(t,m6(m6({},_),Rhe(t)));else if(Ar(t))b=t(_);else if(hhe(t)&&!yhe(t)){var P=u(t,_);b=Ne.createElement(oM,{shapeType:r,elementProps:P})}else{var S=_;b=Ne.createElement(oM,{shapeType:r,elementProps:S})}return o?Ne.createElement(Ti,{className:p},b):b}function Om(e,t){return t!=null&&"trapezoids"in e.props}function km(e,t){return t!=null&&"sectors"in e.props}function a2(e,t){return t!=null&&"points"in e.props}function Fhe(e,t){var r,n,u=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,h=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return u&&h}function jhe(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function $he(e,t){var r=e.x===t.x,n=e.y===t.y,u=e.z===t.z;return r&&n&&u}function Nhe(e,t){var r;return Om(e,t)?r=Fhe:km(e,t)?r=jhe:a2(e,t)&&(r=$he),r}function Uhe(e,t){var r;return Om(e,t)?r="trapezoids":km(e,t)?r="sectors":a2(e,t)&&(r="points"),r}function Vhe(e,t){if(Om(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(km(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return a2(e,t)?t.payload:{}}function Ghe(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,u=Uhe(r,t),h=Vhe(r,t),p=n.filter(function(_,b){var P=Zv(h,_),S=r.props[u].filter(function(F){var j=Nhe(r,t);return j(F,t)}),C=r.props[u].indexOf(S[S.length-1]),L=b===C;return P&&L}),o=n.indexOf(p[p.length-1]);return o}var Whe=Math.ceil,qhe=Math.max;function Hhe(e,t,r,n){for(var u=-1,h=qhe(Whe((t-e)/(r||1)),0),p=Array(h);h--;)p[n?h:++u]=e,e+=r;return p}var Zhe=Hhe,Xhe=tD,aM=1/0,Khe=17976931348623157e292;function Yhe(e){if(!e)return e===0?e:0;if(e=Xhe(e),e===aM||e===-aM){var t=e<0?-1:1;return t*Khe}return e===e?e:0}var wL=Yhe,Jhe=Zhe,Qhe=_m,w9=wL;function efe(e){return function(t,r,n){return n&&typeof n!="number"&&Qhe(t,r,n)&&(r=n=void 0),t=w9(t),r===void 0?(r=t,t=0):r=w9(r),n=n===void 0?t<r?1:-1:w9(n),Jhe(t,r,n,e)}}var tfe=efe,rfe=tfe,nfe=rfe(),ife=nfe;const g6=Br(ife);function s2(e){"@babel/helpers - typeof";return s2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s2(e)}function sM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function lM(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sM(Object(r),!0).forEach(function(n){TL(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function TL(e,t,r){return t=ofe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ofe(e){var t=afe(e,"string");return s2(t)=="symbol"?t:t+""}function afe(e,t){if(s2(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(s2(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sfe=["Webkit","Moz","O","ms"],lfe=function(t,r){if(!t)return null;var n=t.replace(/(\w)/,function(h){return h.toUpperCase()}),u=sfe.reduce(function(h,p){return lM(lM({},h),{},TL({},p+n,r))},{});return u[t]=r,u};function mf(e){"@babel/helpers - typeof";return mf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mf(e)}function y6(){return y6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},y6.apply(this,arguments)}function uM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function T9(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uM(Object(r),!0).forEach(function(n){Go(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ufe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,EL(n.key),n)}}function cfe(e,t,r){return t&&cM(e.prototype,t),r&&cM(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function hfe(e,t,r){return t=_6(t),ffe(e,SL()?Reflect.construct(t,r||[],_6(e).constructor):t.apply(e,r))}function ffe(e,t){if(t&&(mf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dfe(e)}function dfe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function SL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(SL=function(){return!!e})()}function _6(e){return _6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},_6(e)}function pfe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ly(e,t)}function Ly(e,t){return Ly=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,u){return n.__proto__=u,n},Ly(e,t)}function Go(e,t,r){return t=EL(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EL(e){var t=mfe(e,"string");return mf(t)=="symbol"?t:t+""}function mfe(e,t){if(mf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(mf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gfe=function(t){var r=t.data,n=t.startIndex,u=t.endIndex,h=t.x,p=t.width,o=t.travellerWidth;if(!r||!r.length)return{};var _=r.length,b=op().domain(g6(0,_)).range([h,h+p-o]),P=b.domain().map(function(S){return b(S)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:b(n),endX:b(u),scale:b,scaleValues:P}},hM=function(t){return t.changedTouches&&!!t.changedTouches.length},gf=function(e){function t(r){var n;return ufe(this,t),n=hfe(this,t,[r]),Go(n,"handleDrag",function(u){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(u):n.state.isSlideMoving&&n.handleSlideDrag(u)}),Go(n,"handleTouchMove",function(u){u.changedTouches!=null&&u.changedTouches.length>0&&n.handleDrag(u.changedTouches[0])}),Go(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var u=n.props,h=u.endIndex,p=u.onDragEnd,o=u.startIndex;p==null||p({endIndex:h,startIndex:o})}),n.detachDragEndListener()}),Go(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),Go(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),Go(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),Go(n,"handleSlideDragStart",function(u){var h=hM(u)?u.changedTouches[0]:u;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:h.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return pfe(t,e),cfe(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var u=n.startX,h=n.endX,p=this.state.scaleValues,o=this.props,_=o.gap,b=o.data,P=b.length-1,S=Math.min(u,h),C=Math.max(u,h),L=t.getIndexInRange(p,S),F=t.getIndexInRange(p,C);return{startIndex:L-L%_,endIndex:F===P?P:F-F%_}}},{key:"getTextOfTick",value:function(n){var u=this.props,h=u.data,p=u.tickFormatter,o=u.dataKey,_=Os(h[n],o,n);return Ar(p)?p(_,n):_}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var u=this.state,h=u.slideMoveStartX,p=u.startX,o=u.endX,_=this.props,b=_.x,P=_.width,S=_.travellerWidth,C=_.startIndex,L=_.endIndex,F=_.onChange,j=n.pageX-h;j>0?j=Math.min(j,b+P-S-o,b+P-S-p):j<0&&(j=Math.max(j,b-p,b-o));var G=this.getIndex({startX:p+j,endX:o+j});(G.startIndex!==C||G.endIndex!==L)&&F&&F(G),this.setState({startX:p+j,endX:o+j,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,u){var h=hM(u)?u.changedTouches[0]:u;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:h.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var u=this.state,h=u.brushMoveStartX,p=u.movingTravellerId,o=u.endX,_=u.startX,b=this.state[p],P=this.props,S=P.x,C=P.width,L=P.travellerWidth,F=P.onChange,j=P.gap,G=P.data,$={startX:this.state.startX,endX:this.state.endX},N=n.pageX-h;N>0?N=Math.min(N,S+C-L-b):N<0&&(N=Math.max(N,S-b)),$[p]=b+N;var U=this.getIndex($),J=U.startIndex,q=U.endIndex,Y=function(){var ue=G.length-1;return p==="startX"&&(o>_?J%j===0:q%j===0)||o<_&&q===ue||p==="endX"&&(o>_?q%j===0:J%j===0)||o>_&&q===ue};this.setState(Go(Go({},p,b+N),"brushMoveStartX",n.pageX),function(){F&&Y()&&F(U)})}},{key:"handleTravellerMoveKeyboard",value:function(n,u){var h=this,p=this.state,o=p.scaleValues,_=p.startX,b=p.endX,P=this.state[u],S=o.indexOf(P);if(S!==-1){var C=S+n;if(!(C===-1||C>=o.length)){var L=o[C];u==="startX"&&L>=b||u==="endX"&&L<=_||this.setState(Go({},u,L),function(){h.props.onChange(h.getIndex({startX:h.state.startX,endX:h.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,u=n.x,h=n.y,p=n.width,o=n.height,_=n.fill,b=n.stroke;return Ne.createElement("rect",{stroke:b,fill:_,x:u,y:h,width:p,height:o})}},{key:"renderPanorama",value:function(){var n=this.props,u=n.x,h=n.y,p=n.width,o=n.height,_=n.data,b=n.children,P=n.padding,S=Pe.Children.only(b);return S?Ne.cloneElement(S,{x:u,y:h,width:p,height:o,margin:P,compact:!0,data:_}):null}},{key:"renderTravellerLayer",value:function(n,u){var h,p,o=this,_=this.props,b=_.y,P=_.travellerWidth,S=_.height,C=_.traveller,L=_.ariaLabel,F=_.data,j=_.startIndex,G=_.endIndex,$=Math.max(n,this.props.x),N=T9(T9({},Yr(this.props,!1)),{},{x:$,y:b,width:P,height:S}),U=L||"Min value: ".concat((h=F[j])===null||h===void 0?void 0:h.name,", Max value: ").concat((p=F[G])===null||p===void 0?void 0:p.name);return Ne.createElement(Ti,{tabIndex:0,role:"slider","aria-label":U,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[u],onTouchStart:this.travellerDragStartHandlers[u],onKeyDown:function(q){["ArrowLeft","ArrowRight"].includes(q.key)&&(q.preventDefault(),q.stopPropagation(),o.handleTravellerMoveKeyboard(q.key==="ArrowRight"?1:-1,u))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(C,N))}},{key:"renderSlide",value:function(n,u){var h=this.props,p=h.y,o=h.height,_=h.stroke,b=h.travellerWidth,P=Math.min(n,u)+b,S=Math.max(Math.abs(u-n)-b,0);return Ne.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:_,fillOpacity:.2,x:P,y:p,width:S,height:o})}},{key:"renderText",value:function(){var n=this.props,u=n.startIndex,h=n.endIndex,p=n.y,o=n.height,_=n.travellerWidth,b=n.stroke,P=this.state,S=P.startX,C=P.endX,L=5,F={pointerEvents:"none",fill:b};return Ne.createElement(Ti,{className:"recharts-brush-texts"},Ne.createElement(H4,y6({textAnchor:"end",verticalAnchor:"middle",x:Math.min(S,C)-L,y:p+o/2},F),this.getTextOfTick(u)),Ne.createElement(H4,y6({textAnchor:"start",verticalAnchor:"middle",x:Math.max(S,C)+_+L,y:p+o/2},F),this.getTextOfTick(h)))}},{key:"render",value:function(){var n=this.props,u=n.data,h=n.className,p=n.children,o=n.x,_=n.y,b=n.width,P=n.height,S=n.alwaysShowText,C=this.state,L=C.startX,F=C.endX,j=C.isTextActive,G=C.isSlideMoving,$=C.isTravellerMoving,N=C.isTravellerFocused;if(!u||!u.length||!Bt(o)||!Bt(_)||!Bt(b)||!Bt(P)||b<=0||P<=0)return null;var U=rn("recharts-brush",h),J=Ne.Children.count(p)===1,q=lfe("userSelect","none");return Ne.createElement(Ti,{className:U,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:q},this.renderBackground(),J&&this.renderPanorama(),this.renderSlide(L,F),this.renderTravellerLayer(L,"startX"),this.renderTravellerLayer(F,"endX"),(j||G||$||N||S)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var u=n.x,h=n.y,p=n.width,o=n.height,_=n.stroke,b=Math.floor(h+o/2)-1;return Ne.createElement(Ne.Fragment,null,Ne.createElement("rect",{x:u,y:h,width:p,height:o,fill:_,stroke:"none"}),Ne.createElement("line",{x1:u+1,y1:b,x2:u+p-1,y2:b,fill:"none",stroke:"#fff"}),Ne.createElement("line",{x1:u+1,y1:b+2,x2:u+p-1,y2:b+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,u){var h;return Ne.isValidElement(n)?h=Ne.cloneElement(n,u):Ar(n)?h=n(u):h=t.renderDefaultTraveller(u),h}},{key:"getDerivedStateFromProps",value:function(n,u){var h=n.data,p=n.width,o=n.x,_=n.travellerWidth,b=n.updateId,P=n.startIndex,S=n.endIndex;if(h!==u.prevData||b!==u.prevUpdateId)return T9({prevData:h,prevTravellerWidth:_,prevUpdateId:b,prevX:o,prevWidth:p},h&&h.length?gfe({data:h,width:p,x:o,travellerWidth:_,startIndex:P,endIndex:S}):{scale:null,scaleValues:null});if(u.scale&&(p!==u.prevWidth||o!==u.prevX||_!==u.prevTravellerWidth)){u.scale.range([o,o+p-_]);var C=u.scale.domain().map(function(L){return u.scale(L)});return{prevData:h,prevTravellerWidth:_,prevUpdateId:b,prevX:o,prevWidth:p,startX:u.scale(n.startIndex),endX:u.scale(n.endIndex),scaleValues:C}}return null}},{key:"getIndexInRange",value:function(n,u){for(var h=n.length,p=0,o=h-1;o-p>1;){var _=Math.floor((p+o)/2);n[_]>u?o=_:p=_}return u>=n[o]?o:p}}])}(Pe.PureComponent);Go(gf,"displayName","Brush");Go(gf,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var yfe=Tv;function _fe(e,t){var r;return yfe(e,function(n,u,h){return r=t(n,u,h),!r}),!!r}var vfe=_fe,xfe=Mk,bfe=ku,wfe=vfe,Tfe=Do,Sfe=_m;function Efe(e,t,r){var n=Tfe(e)?xfe:wfe;return r&&Sfe(e,t,r)&&(t=void 0),n(e,bfe(t))}var Pfe=Efe;const Afe=Br(Pfe);var Cs=function(t,r){var n=t.alwaysShow,u=t.ifOverflow;return n&&(u="extendDomain"),u===r},fM=Kk;function Mfe(e,t,r){t=="__proto__"&&fM?fM(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var Cfe=Mfe,Ife=Cfe,Ofe=Zk,kfe=ku;function Dfe(e,t){var r={};return t=kfe(t),Ofe(e,function(n,u,h){Ife(r,u,t(n,u,h))}),r}var Lfe=Dfe;const zfe=Br(Lfe);function Rfe(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}var Bfe=Rfe,Ffe=Tv;function jfe(e,t){var r=!0;return Ffe(e,function(n,u,h){return r=!!t(n,u,h),r}),r}var $fe=jfe,Nfe=Bfe,Ufe=$fe,Vfe=ku,Gfe=Do,Wfe=_m;function qfe(e,t,r){var n=Gfe(e)?Nfe:Ufe;return r&&Wfe(e,t,r)&&(t=void 0),n(e,Vfe(t))}var Hfe=qfe;const PL=Br(Hfe);var Zfe=["x","y"];function l2(e){"@babel/helpers - typeof";return l2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l2(e)}function zy(){return zy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zy.apply(this,arguments)}function dM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function jd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dM(Object(r),!0).forEach(function(n){Xfe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Xfe(e,t,r){return t=Kfe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kfe(e){var t=Yfe(e,"string");return l2(t)=="symbol"?t:t+""}function Yfe(e,t){if(l2(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(l2(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Jfe(e,t){if(e==null)return{};var r=Qfe(e,t),n,u;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(u=0;u<h.length;u++)n=h[u],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Qfe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function e0e(e,t){var r=e.x,n=e.y,u=Jfe(e,Zfe),h="".concat(r),p=parseInt(h,10),o="".concat(n),_=parseInt(o,10),b="".concat(t.height||u.height),P=parseInt(b,10),S="".concat(t.width||u.width),C=parseInt(S,10);return jd(jd(jd(jd(jd({},t),u),p?{x:p}:{}),_?{y:_}:{}),{},{height:P,width:C,name:t.name,radius:t.radius})}function pM(e){return Ne.createElement(Bhe,zy({shapeType:"rectangle",propTransformer:e0e,activeClassName:"recharts-active-bar"},e))}var t0e=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,u){if(typeof t=="number")return t;var h=typeof n=="number";return h?t(n,u):(h||Jc(!1),r)}},r0e=["value","background"],AL;function yf(e){"@babel/helpers - typeof";return yf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yf(e)}function n0e(e,t){if(e==null)return{};var r=i0e(e,t),n,u;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(u=0;u<h.length;u++)n=h[u],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function i0e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function v6(){return v6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},v6.apply(this,arguments)}function mM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function ti(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mM(Object(r),!0).forEach(function(n){du(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function o0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,CL(n.key),n)}}function a0e(e,t,r){return t&&gM(e.prototype,t),r&&gM(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function s0e(e,t,r){return t=x6(t),l0e(e,ML()?Reflect.construct(t,r||[],x6(e).constructor):t.apply(e,r))}function l0e(e,t){if(t&&(yf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return u0e(e)}function u0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ML(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ML=function(){return!!e})()}function x6(e){return x6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},x6(e)}function c0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ry(e,t)}function Ry(e,t){return Ry=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,u){return n.__proto__=u,n},Ry(e,t)}function du(e,t,r){return t=CL(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CL(e){var t=h0e(e,"string");return yf(t)=="symbol"?t:t+""}function h0e(e,t){if(yf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(yf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Uf=function(e){function t(){var r;o0e(this,t);for(var n=arguments.length,u=new Array(n),h=0;h<n;h++)u[h]=arguments[h];return r=s0e(this,t,[].concat(u)),du(r,"state",{isAnimationFinished:!1}),du(r,"id",hm("recharts-bar-")),du(r,"handleAnimationEnd",function(){var p=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),p&&p()}),du(r,"handleAnimationStart",function(){var p=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),p&&p()}),r}return c0e(t,e),a0e(t,[{key:"renderRectanglesStatically",value:function(n){var u=this,h=this.props,p=h.shape,o=h.dataKey,_=h.activeIndex,b=h.activeBar,P=Yr(this.props,!1);return n&&n.map(function(S,C){var L=C===_,F=L?b:p,j=ti(ti(ti({},P),S),{},{isActive:L,option:F,index:C,dataKey:o,onAnimationStart:u.handleAnimationStart,onAnimationEnd:u.handleAnimationEnd});return Ne.createElement(Ti,v6({className:"recharts-bar-rectangle"},D4(u.props,S,C),{key:"rectangle-".concat(S==null?void 0:S.x,"-").concat(S==null?void 0:S.y,"-").concat(S==null?void 0:S.value,"-").concat(C)}),Ne.createElement(pM,j))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,u=this.props,h=u.data,p=u.layout,o=u.isAnimationActive,_=u.animationBegin,b=u.animationDuration,P=u.animationEasing,S=u.animationId,C=this.state.prevData;return Ne.createElement(t2,{begin:_,duration:b,isActive:o,easing:P,from:{t:0},to:{t:1},key:"bar-".concat(S),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(L){var F=L.t,j=h.map(function(G,$){var N=C&&C[$];if(N){var U=dh(N.x,G.x),J=dh(N.y,G.y),q=dh(N.width,G.width),Y=dh(N.height,G.height);return ti(ti({},G),{},{x:U(F),y:J(F),width:q(F),height:Y(F)})}if(p==="horizontal"){var X=dh(0,G.height),ue=X(F);return ti(ti({},G),{},{y:G.y+G.height-ue,height:ue})}var oe=dh(0,G.width),Re=oe(F);return ti(ti({},G),{},{width:Re})});return Ne.createElement(Ti,null,n.renderRectanglesStatically(j))})}},{key:"renderRectangles",value:function(){var n=this.props,u=n.data,h=n.isAnimationActive,p=this.state.prevData;return h&&u&&u.length&&(!p||!Zv(p,u))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(u)}},{key:"renderBackground",value:function(){var n=this,u=this.props,h=u.data,p=u.dataKey,o=u.activeIndex,_=Yr(this.props.background,!1);return h.map(function(b,P){b.value;var S=b.background,C=n0e(b,r0e);if(!S)return null;var L=ti(ti(ti(ti(ti({},C),{},{fill:"#eee"},S),_),D4(n.props,b,P)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:p,index:P,className:"recharts-bar-background-rectangle"});return Ne.createElement(pM,v6({key:"background-bar-".concat(P),option:n.props.background,isActive:P===o},L))})}},{key:"renderErrorBar",value:function(n,u){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var h=this.props,p=h.data,o=h.xAxis,_=h.yAxis,b=h.layout,P=h.children,S=os(P,Cm);if(!S)return null;var C=b==="vertical"?p[0].height/2:p[0].width/2,L=function(G,$){var N=Array.isArray(G.value)?G.value[1]:G.value;return{x:G.x,y:G.y,value:N,errorVal:Os(G,$)}},F={clipPath:n?"url(#clipPath-".concat(u,")"):null};return Ne.createElement(Ti,F,S.map(function(j){return Ne.cloneElement(j,{key:"error-bar-".concat(u,"-").concat(j.props.dataKey),data:p,xAxis:o,yAxis:_,layout:b,offset:C,dataPointFormatter:L})}))}},{key:"render",value:function(){var n=this.props,u=n.hide,h=n.data,p=n.className,o=n.xAxis,_=n.yAxis,b=n.left,P=n.top,S=n.width,C=n.height,L=n.isAnimationActive,F=n.background,j=n.id;if(u||!h||!h.length)return null;var G=this.state.isAnimationFinished,$=rn("recharts-bar",p),N=o&&o.allowDataOverflow,U=_&&_.allowDataOverflow,J=N||U,q=tn(j)?this.id:j;return Ne.createElement(Ti,{className:$},N||U?Ne.createElement("defs",null,Ne.createElement("clipPath",{id:"clipPath-".concat(q)},Ne.createElement("rect",{x:N?b:b-S/2,y:U?P:P-C/2,width:N?S:S*2,height:U?C:C*2}))):null,Ne.createElement(Ti,{className:"recharts-bar-rectangles",clipPath:J?"url(#clipPath-".concat(q,")"):null},F?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(J,q),(!L||G)&&Uc.renderCallByParent(this.props,h))}}],[{key:"getDerivedStateFromProps",value:function(n,u){return n.animationId!==u.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:u.curData}:n.data!==u.curData?{curData:n.data}:null}}])}(Pe.PureComponent);AL=Uf;du(Uf,"displayName","Bar");du(Uf,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Tu.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});du(Uf,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,u=e.bandSize,h=e.xAxis,p=e.yAxis,o=e.xAxisTicks,_=e.yAxisTicks,b=e.stackedData,P=e.dataStartIndex,S=e.displayedData,C=e.offset,L=Hle(n,r);if(!L)return null;var F=t.layout,j=r.type.defaultProps,G=j!==void 0?ti(ti({},j),r.props):r.props,$=G.dataKey,N=G.children,U=G.minPointSize,J=F==="horizontal"?p:h,q=b?J.scale.domain():null,Y=tue({numericAxis:J}),X=os(N,nD),ue=S.map(function(oe,Re){var ze,De,Je,we,ve,Ce;b?ze=Zle(b[P+Re],q):(ze=Os(oe,$),Array.isArray(ze)||(ze=[Y,ze]));var Le=t0e(U,AL.defaultProps.minPointSize)(ze[1],Re);if(F==="horizontal"){var ge,$e=[p.scale(ze[0]),p.scale(ze[1])],rt=$e[0],ft=$e[1];De=dA({axis:h,ticks:o,bandSize:u,offset:L.offset,entry:oe,index:Re}),Je=(ge=ft??rt)!==null&&ge!==void 0?ge:void 0,we=L.size;var lt=rt-ft;if(ve=Number.isNaN(lt)?0:lt,Ce={x:De,y:p.y,width:we,height:p.height},Math.abs(Le)>0&&Math.abs(ve)<Math.abs(Le)){var Tt=rs(ve||Le)*(Math.abs(Le)-Math.abs(ve));Je-=Tt,ve+=Tt}}else{var qt=[h.scale(ze[0]),h.scale(ze[1])],fr=qt[0],br=qt[1];if(De=fr,Je=dA({axis:p,ticks:_,bandSize:u,offset:L.offset,entry:oe,index:Re}),we=br-fr,ve=L.size,Ce={x:h.x,y:Je,width:h.width,height:ve},Math.abs(Le)>0&&Math.abs(we)<Math.abs(Le)){var Mr=rs(we||Le)*(Math.abs(Le)-Math.abs(we));we+=Mr}}return ti(ti(ti({},oe),{},{x:De,y:Je,width:we,height:ve,value:b?ze:ze[1],payload:oe,background:Ce},X&&X[Re]&&X[Re].props),{},{tooltipPayload:[uL(r,oe)],tooltipPosition:{x:De+we/2,y:Je+ve/2}})});return ti({data:ue,layout:F},C)});function u2(e){"@babel/helpers - typeof";return u2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u2(e)}function f0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,IL(n.key),n)}}function d0e(e,t,r){return t&&yM(e.prototype,t),r&&yM(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function Ja(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_M(Object(r),!0).forEach(function(n){Dm(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_M(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Dm(e,t,r){return t=IL(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IL(e){var t=p0e(e,"string");return u2(t)=="symbol"?t:t+""}function p0e(e,t){if(u2(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(u2(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var m0e=function(t,r,n,u,h){var p=t.width,o=t.height,_=t.layout,b=t.children,P=Object.keys(r),S={left:n.left,leftMirror:n.left,right:p-n.right,rightMirror:p-n.right,top:n.top,topMirror:n.top,bottom:o-n.bottom,bottomMirror:o-n.bottom},C=!!qo(b,Uf);return P.reduce(function(L,F){var j=r[F],G=j.orientation,$=j.domain,N=j.padding,U=N===void 0?{}:N,J=j.mirror,q=j.reversed,Y="".concat(G).concat(J?"Mirror":""),X,ue,oe,Re,ze;if(j.type==="number"&&(j.padding==="gap"||j.padding==="no-gap")){var De=$[1]-$[0],Je=1/0,we=j.categoricalDomain.sort(OH);if(we.forEach(function(qt,fr){fr>0&&(Je=Math.min((qt||0)-(we[fr-1]||0),Je))}),Number.isFinite(Je)){var ve=Je/De,Ce=j.layout==="vertical"?n.height:n.width;if(j.padding==="gap"&&(X=ve*Ce/2),j.padding==="no-gap"){var Le=Kc(t.barCategoryGap,ve*Ce),ge=ve*Ce/2;X=ge-Le-(ge-Le)/Ce*Le}}}u==="xAxis"?ue=[n.left+(U.left||0)+(X||0),n.left+n.width-(U.right||0)-(X||0)]:u==="yAxis"?ue=_==="horizontal"?[n.top+n.height-(U.bottom||0),n.top+(U.top||0)]:[n.top+(U.top||0)+(X||0),n.top+n.height-(U.bottom||0)-(X||0)]:ue=j.range,q&&(ue=[ue[1],ue[0]]);var $e=Wle(j,h,C),rt=$e.scale,ft=$e.realScaleType;rt.domain($).range(ue),qle(rt);var lt=eue(rt,Ja(Ja({},j),{},{realScaleType:ft}));u==="xAxis"?(ze=G==="top"&&!J||G==="bottom"&&J,oe=n.left,Re=S[Y]-ze*j.height):u==="yAxis"&&(ze=G==="left"&&!J||G==="right"&&J,oe=S[Y]-ze*j.width,Re=n.top);var Tt=Ja(Ja(Ja({},j),lt),{},{realScaleType:ft,x:oe,y:Re,scale:rt,width:u==="xAxis"?n.width:j.width,height:u==="yAxis"?n.height:j.height});return Tt.bandSize=s6(Tt,lt),!j.hide&&u==="xAxis"?S[Y]+=(ze?-1:1)*Tt.height:j.hide||(S[Y]+=(ze?-1:1)*Tt.width),Ja(Ja({},L),{},Dm({},F,Tt))},{})},OL=function(t,r){var n=t.x,u=t.y,h=r.x,p=r.y;return{x:Math.min(n,h),y:Math.min(u,p),width:Math.abs(h-n),height:Math.abs(p-u)}},g0e=function(t){var r=t.x1,n=t.y1,u=t.x2,h=t.y2;return OL({x:r,y:n},{x:u,y:h})},kL=function(){function e(t){f0e(this,e),this.scale=t}return d0e(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=n.bandAware,h=n.position;if(r!==void 0){if(h)switch(h){case"start":return this.scale(r);case"middle":{var p=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+p}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(r)+o}default:return this.scale(r)}if(u){var _=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+_}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),u=n[0],h=n[n.length-1];return u<=h?r>=u&&r<=h:r>=h&&r<=u}}],[{key:"create",value:function(r){return new e(r)}}])}();Dm(kL,"EPS",1e-4);var Qv=function(t){var r=Object.keys(t).reduce(function(n,u){return Ja(Ja({},n),{},Dm({},u,kL.create(t[u])))},{});return Ja(Ja({},r),{},{apply:function(u){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},p=h.bandAware,o=h.position;return zfe(u,function(_,b){return r[b].apply(_,{bandAware:p,position:o})})},isInRange:function(u){return PL(u,function(h,p){return r[p].isInRange(h)})}})};function y0e(e){return(e%180+180)%180}var _0e=function(t){var r=t.width,n=t.height,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,h=y0e(u),p=h*Math.PI/180,o=Math.atan(n/r),_=p>o&&p<Math.PI-o?n/Math.sin(p):r/Math.cos(p);return Math.abs(_)},v0e=ku,x0e=T2,b0e=gm;function w0e(e){return function(t,r,n){var u=Object(t);if(!x0e(t)){var h=v0e(r);t=b0e(t),r=function(o){return h(u[o],o,u)}}var p=e(t,r,n);return p>-1?u[h?t[p]:p]:void 0}}var T0e=w0e,S0e=wL;function E0e(e){var t=S0e(e),r=t%1;return t===t?r?t-r:t:0}var P0e=E0e,A0e=Uk,M0e=ku,C0e=P0e,I0e=Math.max;function O0e(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var u=r==null?0:C0e(r);return u<0&&(u=I0e(n+u,0)),A0e(e,M0e(t),u)}var k0e=O0e,D0e=T0e,L0e=k0e,z0e=D0e(L0e),R0e=z0e;const B0e=Br(R0e);var F0e=Dq(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),ex=Pe.createContext(void 0),tx=Pe.createContext(void 0),DL=Pe.createContext(void 0),LL=Pe.createContext({}),zL=Pe.createContext(void 0),RL=Pe.createContext(0),BL=Pe.createContext(0),vM=function(t){var r=t.state,n=r.xAxisMap,u=r.yAxisMap,h=r.offset,p=t.clipPathId,o=t.children,_=t.width,b=t.height,P=F0e(h);return Ne.createElement(ex.Provider,{value:n},Ne.createElement(tx.Provider,{value:u},Ne.createElement(LL.Provider,{value:h},Ne.createElement(DL.Provider,{value:P},Ne.createElement(zL.Provider,{value:p},Ne.createElement(RL.Provider,{value:b},Ne.createElement(BL.Provider,{value:_},o)))))))},j0e=function(){return Pe.useContext(zL)},FL=function(t){var r=Pe.useContext(ex);r==null&&Jc(!1);var n=r[t];return n==null&&Jc(!1),n},$0e=function(){var t=Pe.useContext(ex);return uu(t)},N0e=function(){var t=Pe.useContext(tx),r=B0e(t,function(n){return PL(n.domain,Number.isFinite)});return r||uu(t)},jL=function(t){var r=Pe.useContext(tx);r==null&&Jc(!1);var n=r[t];return n==null&&Jc(!1),n},U0e=function(){var t=Pe.useContext(DL);return t},V0e=function(){return Pe.useContext(LL)},rx=function(){return Pe.useContext(BL)},nx=function(){return Pe.useContext(RL)};function _f(e){"@babel/helpers - typeof";return _f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_f(e)}function G0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,NL(n.key),n)}}function W0e(e,t,r){return t&&xM(e.prototype,t),r&&xM(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function q0e(e,t,r){return t=b6(t),H0e(e,$L()?Reflect.construct(t,r||[],b6(e).constructor):t.apply(e,r))}function H0e(e,t){if(t&&(_f(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Z0e(e)}function Z0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $L(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($L=function(){return!!e})()}function b6(e){return b6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},b6(e)}function X0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&By(e,t)}function By(e,t){return By=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,u){return n.__proto__=u,n},By(e,t)}function bM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function wM(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bM(Object(r),!0).forEach(function(n){ix(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ix(e,t,r){return t=NL(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NL(e){var t=K0e(e,"string");return _f(t)=="symbol"?t:t+""}function K0e(e,t){if(_f(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(_f(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Y0e(e,t){return tde(e)||ede(e,t)||Q0e(e,t)||J0e()}function J0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Q0e(e,t){if(e){if(typeof e=="string")return TM(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return TM(e,t)}}function TM(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ede(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,u,h,p,o=[],_=!0,b=!1;try{if(h=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;_=!1}else for(;!(_=(n=h.call(r)).done)&&(o.push(n.value),o.length!==t);_=!0);}catch(P){b=!0,u=P}finally{try{if(!_&&r.return!=null&&(p=r.return(),Object(p)!==p))return}finally{if(b)throw u}}return o}}function tde(e){if(Array.isArray(e))return e}function Fy(){return Fy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fy.apply(this,arguments)}var rde=function(t,r){var n;return Ne.isValidElement(t)?n=Ne.cloneElement(t,r):Ar(t)?n=t(r):n=Ne.createElement("line",Fy({},r,{className:"recharts-reference-line-line"})),n},nde=function(t,r,n,u,h,p,o,_,b){var P=h.x,S=h.y,C=h.width,L=h.height;if(n){var F=b.y,j=t.y.apply(F,{position:p});if(Cs(b,"discard")&&!t.y.isInRange(j))return null;var G=[{x:P+C,y:j},{x:P,y:j}];return _==="left"?G.reverse():G}if(r){var $=b.x,N=t.x.apply($,{position:p});if(Cs(b,"discard")&&!t.x.isInRange(N))return null;var U=[{x:N,y:S+L},{x:N,y:S}];return o==="top"?U.reverse():U}if(u){var J=b.segment,q=J.map(function(Y){return t.apply(Y,{position:p})});return Cs(b,"discard")&&Afe(q,function(Y){return!t.isInRange(Y)})?null:q}return null};function ide(e){var t=e.x,r=e.y,n=e.segment,u=e.xAxisId,h=e.yAxisId,p=e.shape,o=e.className,_=e.alwaysShow,b=j0e(),P=FL(u),S=jL(h),C=U0e();if(!b||!C)return null;hl(_===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var L=Qv({x:P.scale,y:S.scale}),F=fi(t),j=fi(r),G=n&&n.length===2,$=nde(L,F,j,G,C,e.position,P.orientation,S.orientation,e);if(!$)return null;var N=Y0e($,2),U=N[0],J=U.x,q=U.y,Y=N[1],X=Y.x,ue=Y.y,oe=Cs(e,"hidden")?"url(#".concat(b,")"):void 0,Re=wM(wM({clipPath:oe},Yr(e,!0)),{},{x1:J,y1:q,x2:X,y2:ue});return Ne.createElement(Ti,{className:rn("recharts-reference-line",o)},rde(p,Re),Ji.renderCallByParent(e,g0e({x1:J,y1:q,x2:X,y2:ue})))}var ox=function(e){function t(){return G0e(this,t),q0e(this,t,arguments)}return X0e(t,e),W0e(t,[{key:"render",value:function(){return Ne.createElement(ide,this.props)}}])}(Ne.Component);ix(ox,"displayName","ReferenceLine");ix(ox,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function jy(){return jy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jy.apply(this,arguments)}function vf(e){"@babel/helpers - typeof";return vf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vf(e)}function SM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function EM(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SM(Object(r),!0).forEach(function(n){Lm(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ode(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function PM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,VL(n.key),n)}}function ade(e,t,r){return t&&PM(e.prototype,t),r&&PM(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function sde(e,t,r){return t=w6(t),lde(e,UL()?Reflect.construct(t,r||[],w6(e).constructor):t.apply(e,r))}function lde(e,t){if(t&&(vf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ude(e)}function ude(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function UL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(UL=function(){return!!e})()}function w6(e){return w6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},w6(e)}function cde(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$y(e,t)}function $y(e,t){return $y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,u){return n.__proto__=u,n},$y(e,t)}function Lm(e,t,r){return t=VL(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VL(e){var t=hde(e,"string");return vf(t)=="symbol"?t:t+""}function hde(e,t){if(vf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(vf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fde=function(t){var r=t.x,n=t.y,u=t.xAxis,h=t.yAxis,p=Qv({x:u.scale,y:h.scale}),o=p.apply({x:r,y:n},{bandAware:!0});return Cs(t,"discard")&&!p.isInRange(o)?null:o},zm=function(e){function t(){return ode(this,t),sde(this,t,arguments)}return cde(t,e),ade(t,[{key:"render",value:function(){var n=this.props,u=n.x,h=n.y,p=n.r,o=n.alwaysShow,_=n.clipPathId,b=fi(u),P=fi(h);if(hl(o===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!b||!P)return null;var S=fde(this.props);if(!S)return null;var C=S.x,L=S.y,F=this.props,j=F.shape,G=F.className,$=Cs(this.props,"hidden")?"url(#".concat(_,")"):void 0,N=EM(EM({clipPath:$},Yr(this.props,!0)),{},{cx:C,cy:L});return Ne.createElement(Ti,{className:rn("recharts-reference-dot",G)},t.renderDot(j,N),Ji.renderCallByParent(this.props,{x:C-p,y:L-p,width:2*p,height:2*p}))}}])}(Ne.Component);Lm(zm,"displayName","ReferenceDot");Lm(zm,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Lm(zm,"renderDot",function(e,t){var r;return Ne.isValidElement(e)?r=Ne.cloneElement(e,t):Ar(e)?r=e(t):r=Ne.createElement(xL,jy({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function Ny(){return Ny=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ny.apply(this,arguments)}function xf(e){"@babel/helpers - typeof";return xf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xf(e)}function AM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function MM(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AM(Object(r),!0).forEach(function(n){Rm(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dde(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function CM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,WL(n.key),n)}}function pde(e,t,r){return t&&CM(e.prototype,t),r&&CM(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function mde(e,t,r){return t=T6(t),gde(e,GL()?Reflect.construct(t,r||[],T6(e).constructor):t.apply(e,r))}function gde(e,t){if(t&&(xf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yde(e)}function yde(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function GL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(GL=function(){return!!e})()}function T6(e){return T6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},T6(e)}function _de(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Uy(e,t)}function Uy(e,t){return Uy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,u){return n.__proto__=u,n},Uy(e,t)}function Rm(e,t,r){return t=WL(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WL(e){var t=vde(e,"string");return xf(t)=="symbol"?t:t+""}function vde(e,t){if(xf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(xf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xde=function(t,r,n,u,h){var p=h.x1,o=h.x2,_=h.y1,b=h.y2,P=h.xAxis,S=h.yAxis;if(!P||!S)return null;var C=Qv({x:P.scale,y:S.scale}),L={x:t?C.x.apply(p,{position:"start"}):C.x.rangeMin,y:n?C.y.apply(_,{position:"start"}):C.y.rangeMin},F={x:r?C.x.apply(o,{position:"end"}):C.x.rangeMax,y:u?C.y.apply(b,{position:"end"}):C.y.rangeMax};return Cs(h,"discard")&&(!C.isInRange(L)||!C.isInRange(F))?null:OL(L,F)},Bm=function(e){function t(){return dde(this,t),mde(this,t,arguments)}return _de(t,e),pde(t,[{key:"render",value:function(){var n=this.props,u=n.x1,h=n.x2,p=n.y1,o=n.y2,_=n.className,b=n.alwaysShow,P=n.clipPathId;hl(b===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var S=fi(u),C=fi(h),L=fi(p),F=fi(o),j=this.props.shape;if(!S&&!C&&!L&&!F&&!j)return null;var G=xde(S,C,L,F,this.props);if(!G&&!j)return null;var $=Cs(this.props,"hidden")?"url(#".concat(P,")"):void 0;return Ne.createElement(Ti,{className:rn("recharts-reference-area",_)},t.renderRect(j,MM(MM({clipPath:$},Yr(this.props,!0)),G)),Ji.renderCallByParent(this.props,G))}}])}(Ne.Component);Rm(Bm,"displayName","ReferenceArea");Rm(Bm,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Rm(Bm,"renderRect",function(e,t){var r;return Ne.isValidElement(e)?r=Ne.cloneElement(e,t):Ar(e)?r=e(t):r=Ne.createElement(Jv,Ny({},t,{className:"recharts-reference-area-rect"})),r});function qL(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],u=0;u<e.length;u+=t)if(r===void 0||r(e[u])===!0)n.push(e[u]);else return;return n}function bde(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return _0e(n,r)}function wde(e,t,r){var n=r==="width",u=e.x,h=e.y,p=e.width,o=e.height;return t===1?{start:n?u:h,end:n?u+p:h+o}:{start:n?u+p:h+o,end:n?u:h}}function S6(e,t,r,n,u){if(e*t<e*n||e*t>e*u)return!1;var h=r();return e*(t-e*h/2-n)>=0&&e*(t+e*h/2-u)<=0}function Tde(e,t){return qL(e,t+1)}function Sde(e,t,r,n,u){for(var h=(n||[]).slice(),p=t.start,o=t.end,_=0,b=1,P=p,S=function(){var F=n==null?void 0:n[_];if(F===void 0)return{v:qL(n,b)};var j=_,G,$=function(){return G===void 0&&(G=r(F,j)),G},N=F.coordinate,U=_===0||S6(e,N,$,P,o);U||(_=0,P=p,b+=1),U&&(P=N+e*($()/2+u),_+=b)},C;b<=h.length;)if(C=S(),C)return C.v;return[]}function c2(e){"@babel/helpers - typeof";return c2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c2(e)}function IM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function Ki(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IM(Object(r),!0).forEach(function(n){Ede(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ede(e,t,r){return t=Pde(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pde(e){var t=Ade(e,"string");return c2(t)=="symbol"?t:t+""}function Ade(e,t){if(c2(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(c2(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mde(e,t,r,n,u){for(var h=(n||[]).slice(),p=h.length,o=t.start,_=t.end,b=function(C){var L=h[C],F,j=function(){return F===void 0&&(F=r(L,C)),F};if(C===p-1){var G=e*(L.coordinate+e*j()/2-_);h[C]=L=Ki(Ki({},L),{},{tickCoord:G>0?L.coordinate-G*e:L.coordinate})}else h[C]=L=Ki(Ki({},L),{},{tickCoord:L.coordinate});var $=S6(e,L.tickCoord,j,o,_);$&&(_=L.tickCoord-e*(j()/2+u),h[C]=Ki(Ki({},L),{},{isShow:!0}))},P=p-1;P>=0;P--)b(P);return h}function Cde(e,t,r,n,u,h){var p=(n||[]).slice(),o=p.length,_=t.start,b=t.end;if(h){var P=n[o-1],S=r(P,o-1),C=e*(P.coordinate+e*S/2-b);p[o-1]=P=Ki(Ki({},P),{},{tickCoord:C>0?P.coordinate-C*e:P.coordinate});var L=S6(e,P.tickCoord,function(){return S},_,b);L&&(b=P.tickCoord-e*(S/2+u),p[o-1]=Ki(Ki({},P),{},{isShow:!0}))}for(var F=h?o-1:o,j=function(N){var U=p[N],J,q=function(){return J===void 0&&(J=r(U,N)),J};if(N===0){var Y=e*(U.coordinate-e*q()/2-_);p[N]=U=Ki(Ki({},U),{},{tickCoord:Y<0?U.coordinate-Y*e:U.coordinate})}else p[N]=U=Ki(Ki({},U),{},{tickCoord:U.coordinate});var X=S6(e,U.tickCoord,q,_,b);X&&(_=U.tickCoord+e*(q()/2+u),p[N]=Ki(Ki({},U),{},{isShow:!0}))},G=0;G<F;G++)j(G);return p}function ax(e,t,r){var n=e.tick,u=e.ticks,h=e.viewBox,p=e.minTickGap,o=e.orientation,_=e.interval,b=e.tickFormatter,P=e.unit,S=e.angle;if(!u||!u.length||!n)return[];if(Bt(_)||Tu.isSsr)return Tde(u,typeof _=="number"&&Bt(_)?_:0);var C=[],L=o==="top"||o==="bottom"?"width":"height",F=P&&L==="width"?ip(P,{fontSize:t,letterSpacing:r}):{width:0,height:0},j=function(U,J){var q=Ar(b)?b(U.value,J):U.value;return L==="width"?bde(ip(q,{fontSize:t,letterSpacing:r}),F,S):ip(q,{fontSize:t,letterSpacing:r})[L]},G=u.length>=2?rs(u[1].coordinate-u[0].coordinate):1,$=wde(h,G,L);return _==="equidistantPreserveStart"?Sde(G,$,j,u,p):(_==="preserveStart"||_==="preserveStartEnd"?C=Cde(G,$,j,u,p,_==="preserveStartEnd"):C=Mde(G,$,j,u,p),C.filter(function(N){return N.isShow}))}var Ide=["viewBox"],Ode=["viewBox"],kde=["ticks"];function bf(e){"@babel/helpers - typeof";return bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bf(e)}function Oh(){return Oh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Oh.apply(this,arguments)}function OM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function ao(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OM(Object(r),!0).forEach(function(n){sx(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function S9(e,t){if(e==null)return{};var r=Dde(e,t),n,u;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(u=0;u<h.length;u++)n=h[u],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Dde(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Lde(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ZL(n.key),n)}}function zde(e,t,r){return t&&kM(e.prototype,t),r&&kM(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Rde(e,t,r){return t=E6(t),Bde(e,HL()?Reflect.construct(t,r||[],E6(e).constructor):t.apply(e,r))}function Bde(e,t){if(t&&(bf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fde(e)}function Fde(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function HL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(HL=function(){return!!e})()}function E6(e){return E6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},E6(e)}function jde(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vy(e,t)}function Vy(e,t){return Vy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,u){return n.__proto__=u,n},Vy(e,t)}function sx(e,t,r){return t=ZL(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZL(e){var t=$de(e,"string");return bf(t)=="symbol"?t:t+""}function $de(e,t){if(bf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(bf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Vf=function(e){function t(r){var n;return Lde(this,t),n=Rde(this,t,[r]),n.state={fontSize:"",letterSpacing:""},n}return jde(t,e),zde(t,[{key:"shouldComponentUpdate",value:function(n,u){var h=n.viewBox,p=S9(n,Ide),o=this.props,_=o.viewBox,b=S9(o,Ode);return!Uh(h,_)||!Uh(p,b)||!Uh(u,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var u=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];u&&this.setState({fontSize:window.getComputedStyle(u).fontSize,letterSpacing:window.getComputedStyle(u).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var u=this.props,h=u.x,p=u.y,o=u.width,_=u.height,b=u.orientation,P=u.tickSize,S=u.mirror,C=u.tickMargin,L,F,j,G,$,N,U=S?-1:1,J=n.tickSize||P,q=Bt(n.tickCoord)?n.tickCoord:n.coordinate;switch(b){case"top":L=F=n.coordinate,G=p+ +!S*_,j=G-U*J,N=j-U*C,$=q;break;case"left":j=G=n.coordinate,F=h+ +!S*o,L=F-U*J,$=L-U*C,N=q;break;case"right":j=G=n.coordinate,F=h+ +S*o,L=F+U*J,$=L+U*C,N=q;break;default:L=F=n.coordinate,G=p+ +S*_,j=G+U*J,N=j+U*C,$=q;break}return{line:{x1:L,y1:j,x2:F,y2:G},tick:{x:$,y:N}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,u=n.orientation,h=n.mirror,p;switch(u){case"left":p=h?"start":"end";break;case"right":p=h?"end":"start";break;default:p="middle";break}return p}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,u=n.orientation,h=n.mirror,p="end";switch(u){case"left":case"right":p="middle";break;case"top":p=h?"start":"end";break;default:p=h?"end":"start";break}return p}},{key:"renderAxisLine",value:function(){var n=this.props,u=n.x,h=n.y,p=n.width,o=n.height,_=n.orientation,b=n.mirror,P=n.axisLine,S=ao(ao(ao({},Yr(this.props,!1)),Yr(P,!1)),{},{fill:"none"});if(_==="top"||_==="bottom"){var C=+(_==="top"&&!b||_==="bottom"&&b);S=ao(ao({},S),{},{x1:u,y1:h+C*o,x2:u+p,y2:h+C*o})}else{var L=+(_==="left"&&!b||_==="right"&&b);S=ao(ao({},S),{},{x1:u+L*p,y1:h,x2:u+L*p,y2:h+o})}return Ne.createElement("line",Oh({},S,{className:rn("recharts-cartesian-axis-line",Sa(P,"className"))}))}},{key:"renderTicks",value:function(n,u,h){var p=this,o=this.props,_=o.tickLine,b=o.stroke,P=o.tick,S=o.tickFormatter,C=o.unit,L=ax(ao(ao({},this.props),{},{ticks:n}),u,h),F=this.getTickTextAnchor(),j=this.getTickVerticalAnchor(),G=Yr(this.props,!1),$=Yr(P,!1),N=ao(ao({},G),{},{fill:"none"},Yr(_,!1)),U=L.map(function(J,q){var Y=p.getTickLineCoord(J),X=Y.line,ue=Y.tick,oe=ao(ao(ao(ao({textAnchor:F,verticalAnchor:j},G),{},{stroke:"none",fill:b},$),ue),{},{index:q,payload:J,visibleTicksCount:L.length,tickFormatter:S});return Ne.createElement(Ti,Oh({className:"recharts-cartesian-axis-tick",key:"tick-".concat(J.value,"-").concat(J.coordinate,"-").concat(J.tickCoord)},D4(p.props,J,q)),_&&Ne.createElement("line",Oh({},N,X,{className:rn("recharts-cartesian-axis-tick-line",Sa(_,"className"))})),P&&t.renderTickItem(P,oe,"".concat(Ar(S)?S(J.value,q):J.value).concat(C||"")))});return Ne.createElement("g",{className:"recharts-cartesian-axis-ticks"},U)}},{key:"render",value:function(){var n=this,u=this.props,h=u.axisLine,p=u.width,o=u.height,_=u.ticksGenerator,b=u.className,P=u.hide;if(P)return null;var S=this.props,C=S.ticks,L=S9(S,kde),F=C;return Ar(_)&&(F=C&&C.length>0?_(this.props):_(L)),p<=0||o<=0||!F||!F.length?null:Ne.createElement(Ti,{className:rn("recharts-cartesian-axis",b),ref:function(G){n.layerReference=G}},h&&this.renderAxisLine(),this.renderTicks(F,this.state.fontSize,this.state.letterSpacing),Ji.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,u,h){var p;return Ne.isValidElement(n)?p=Ne.cloneElement(n,u):Ar(n)?p=n(u):p=Ne.createElement(H4,Oh({},u,{className:"recharts-cartesian-axis-tick-value"}),h),p}}])}(Pe.Component);sx(Vf,"displayName","CartesianAxis");sx(Vf,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Nde=["x1","y1","x2","y2","key"],Ude=["offset"];function Qc(e){"@babel/helpers - typeof";return Qc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qc(e)}function DM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function Qi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DM(Object(r),!0).forEach(function(n){Vde(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Vde(e,t,r){return t=Gde(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gde(e){var t=Wde(e,"string");return Qc(t)=="symbol"?t:t+""}function Wde(e,t){if(Qc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Qc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bc(){return Bc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bc.apply(this,arguments)}function LM(e,t){if(e==null)return{};var r=qde(e,t),n,u;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(u=0;u<h.length;u++)n=h[u],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function qde(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Hde=function(t){var r=t.fill;if(!r||r==="none")return null;var n=t.fillOpacity,u=t.x,h=t.y,p=t.width,o=t.height,_=t.ry;return Ne.createElement("rect",{x:u,y:h,ry:_,width:p,height:o,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function XL(e,t){var r;if(Ne.isValidElement(e))r=Ne.cloneElement(e,t);else if(Ar(e))r=e(t);else{var n=t.x1,u=t.y1,h=t.x2,p=t.y2,o=t.key,_=LM(t,Nde),b=Yr(_,!1);b.offset;var P=LM(b,Ude);r=Ne.createElement("line",Bc({},P,{x1:n,y1:u,x2:h,y2:p,fill:"none",key:o}))}return r}function Zde(e){var t=e.x,r=e.width,n=e.horizontal,u=n===void 0?!0:n,h=e.horizontalPoints;if(!u||!h||!h.length)return null;var p=h.map(function(o,_){var b=Qi(Qi({},e),{},{x1:t,y1:o,x2:t+r,y2:o,key:"line-".concat(_),index:_});return XL(u,b)});return Ne.createElement("g",{className:"recharts-cartesian-grid-horizontal"},p)}function Xde(e){var t=e.y,r=e.height,n=e.vertical,u=n===void 0?!0:n,h=e.verticalPoints;if(!u||!h||!h.length)return null;var p=h.map(function(o,_){var b=Qi(Qi({},e),{},{x1:o,y1:t,x2:o,y2:t+r,key:"line-".concat(_),index:_});return XL(u,b)});return Ne.createElement("g",{className:"recharts-cartesian-grid-vertical"},p)}function Kde(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,u=e.y,h=e.width,p=e.height,o=e.horizontalPoints,_=e.horizontal,b=_===void 0?!0:_;if(!b||!t||!t.length)return null;var P=o.map(function(C){return Math.round(C+u-u)}).sort(function(C,L){return C-L});u!==P[0]&&P.unshift(0);var S=P.map(function(C,L){var F=!P[L+1],j=F?u+p-C:P[L+1]-C;if(j<=0)return null;var G=L%t.length;return Ne.createElement("rect",{key:"react-".concat(L),y:C,x:n,height:j,width:h,stroke:"none",fill:t[G],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return Ne.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},S)}function Yde(e){var t=e.vertical,r=t===void 0?!0:t,n=e.verticalFill,u=e.fillOpacity,h=e.x,p=e.y,o=e.width,_=e.height,b=e.verticalPoints;if(!r||!n||!n.length)return null;var P=b.map(function(C){return Math.round(C+h-h)}).sort(function(C,L){return C-L});h!==P[0]&&P.unshift(0);var S=P.map(function(C,L){var F=!P[L+1],j=F?h+o-C:P[L+1]-C;if(j<=0)return null;var G=L%n.length;return Ne.createElement("rect",{key:"react-".concat(L),x:C,y:p,width:j,height:_,stroke:"none",fill:n[G],fillOpacity:u,className:"recharts-cartesian-grid-bg"})});return Ne.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},S)}var Jde=function(t,r){var n=t.xAxis,u=t.width,h=t.height,p=t.offset;return sL(ax(Qi(Qi(Qi({},Vf.defaultProps),n),{},{ticks:sl(n,!0),viewBox:{x:0,y:0,width:u,height:h}})),p.left,p.left+p.width,r)},Qde=function(t,r){var n=t.yAxis,u=t.width,h=t.height,p=t.offset;return sL(ax(Qi(Qi(Qi({},Vf.defaultProps),n),{},{ticks:sl(n,!0),viewBox:{x:0,y:0,width:u,height:h}})),p.top,p.top+p.height,r)},gh={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function epe(e){var t,r,n,u,h,p,o=rx(),_=nx(),b=V0e(),P=Qi(Qi({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:gh.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:gh.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:gh.horizontal,horizontalFill:(u=e.horizontalFill)!==null&&u!==void 0?u:gh.horizontalFill,vertical:(h=e.vertical)!==null&&h!==void 0?h:gh.vertical,verticalFill:(p=e.verticalFill)!==null&&p!==void 0?p:gh.verticalFill,x:Bt(e.x)?e.x:b.left,y:Bt(e.y)?e.y:b.top,width:Bt(e.width)?e.width:b.width,height:Bt(e.height)?e.height:b.height}),S=P.x,C=P.y,L=P.width,F=P.height,j=P.syncWithTicks,G=P.horizontalValues,$=P.verticalValues,N=$0e(),U=N0e();if(!Bt(L)||L<=0||!Bt(F)||F<=0||!Bt(S)||S!==+S||!Bt(C)||C!==+C)return null;var J=P.verticalCoordinatesGenerator||Jde,q=P.horizontalCoordinatesGenerator||Qde,Y=P.horizontalPoints,X=P.verticalPoints;if((!Y||!Y.length)&&Ar(q)){var ue=G&&G.length,oe=q({yAxis:U?Qi(Qi({},U),{},{ticks:ue?G:U.ticks}):void 0,width:o,height:_,offset:b},ue?!0:j);hl(Array.isArray(oe),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Qc(oe),"]")),Array.isArray(oe)&&(Y=oe)}if((!X||!X.length)&&Ar(J)){var Re=$&&$.length,ze=J({xAxis:N?Qi(Qi({},N),{},{ticks:Re?$:N.ticks}):void 0,width:o,height:_,offset:b},Re?!0:j);hl(Array.isArray(ze),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Qc(ze),"]")),Array.isArray(ze)&&(X=ze)}return Ne.createElement("g",{className:"recharts-cartesian-grid"},Ne.createElement(Hde,{fill:P.fill,fillOpacity:P.fillOpacity,x:P.x,y:P.y,width:P.width,height:P.height,ry:P.ry}),Ne.createElement(Zde,Bc({},P,{offset:b,horizontalPoints:Y,xAxis:N,yAxis:U})),Ne.createElement(Xde,Bc({},P,{offset:b,verticalPoints:X,xAxis:N,yAxis:U})),Ne.createElement(Kde,Bc({},P,{horizontalPoints:Y})),Ne.createElement(Yde,Bc({},P,{verticalPoints:X})))}epe.displayName="CartesianGrid";function wf(e){"@babel/helpers - typeof";return wf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wf(e)}function tpe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,JL(n.key),n)}}function rpe(e,t,r){return t&&zM(e.prototype,t),r&&zM(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function npe(e,t,r){return t=P6(t),ipe(e,KL()?Reflect.construct(t,r||[],P6(e).constructor):t.apply(e,r))}function ipe(e,t){if(t&&(wf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ope(e)}function ope(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function KL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(KL=function(){return!!e})()}function P6(e){return P6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},P6(e)}function ape(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gy(e,t)}function Gy(e,t){return Gy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,u){return n.__proto__=u,n},Gy(e,t)}function YL(e,t,r){return t=JL(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JL(e){var t=spe(e,"string");return wf(t)=="symbol"?t:t+""}function spe(e,t){if(wf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(wf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Wy(){return Wy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wy.apply(this,arguments)}function lpe(e){var t=e.xAxisId,r=rx(),n=nx(),u=FL(t);return u==null?null:Ne.createElement(Vf,Wy({},u,{className:rn("recharts-".concat(u.axisType," ").concat(u.axisType),u.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(p){return sl(p,!0)}}))}var lx=function(e){function t(){return tpe(this,t),npe(this,t,arguments)}return ape(t,e),rpe(t,[{key:"render",value:function(){return Ne.createElement(lpe,this.props)}}])}(Ne.Component);YL(lx,"displayName","XAxis");YL(lx,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Tf(e){"@babel/helpers - typeof";return Tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tf(e)}function upe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function RM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,tz(n.key),n)}}function cpe(e,t,r){return t&&RM(e.prototype,t),r&&RM(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function hpe(e,t,r){return t=A6(t),fpe(e,QL()?Reflect.construct(t,r||[],A6(e).constructor):t.apply(e,r))}function fpe(e,t){if(t&&(Tf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dpe(e)}function dpe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function QL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(QL=function(){return!!e})()}function A6(e){return A6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},A6(e)}function ppe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qy(e,t)}function qy(e,t){return qy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,u){return n.__proto__=u,n},qy(e,t)}function ez(e,t,r){return t=tz(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tz(e){var t=mpe(e,"string");return Tf(t)=="symbol"?t:t+""}function mpe(e,t){if(Tf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Tf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hy(){return Hy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hy.apply(this,arguments)}var gpe=function(t){var r=t.yAxisId,n=rx(),u=nx(),h=jL(r);return h==null?null:Ne.createElement(Vf,Hy({},h,{className:rn("recharts-".concat(h.axisType," ").concat(h.axisType),h.className),viewBox:{x:0,y:0,width:n,height:u},ticksGenerator:function(o){return sl(o,!0)}}))},ux=function(e){function t(){return upe(this,t),hpe(this,t,arguments)}return ppe(t,e),cpe(t,[{key:"render",value:function(){return Ne.createElement(gpe,this.props)}}])}(Ne.Component);ez(ux,"displayName","YAxis");ez(ux,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function BM(e){return xpe(e)||vpe(e)||_pe(e)||ype()}function ype(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _pe(e,t){if(e){if(typeof e=="string")return Zy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Zy(e,t)}}function vpe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function xpe(e){if(Array.isArray(e))return Zy(e)}function Zy(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Xy=function(t,r,n,u,h){var p=os(t,ox),o=os(t,zm),_=[].concat(BM(p),BM(o)),b=os(t,Bm),P="".concat(u,"Id"),S=u[0],C=r;if(_.length&&(C=_.reduce(function(j,G){if(G.props[P]===n&&Cs(G.props,"extendDomain")&&Bt(G.props[S])){var $=G.props[S];return[Math.min(j[0],$),Math.max(j[1],$)]}return j},C)),b.length){var L="".concat(S,"1"),F="".concat(S,"2");C=b.reduce(function(j,G){if(G.props[P]===n&&Cs(G.props,"extendDomain")&&Bt(G.props[L])&&Bt(G.props[F])){var $=G.props[L],N=G.props[F];return[Math.min(j[0],$,N),Math.max(j[1],$,N)]}return j},C)}return h&&h.length&&(C=h.reduce(function(j,G){return Bt(G)?[Math.min(j[0],G),Math.max(j[1],G)]:j},C)),C},rz={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function u(_,b,P){this.fn=_,this.context=b,this.once=P||!1}function h(_,b,P,S,C){if(typeof P!="function")throw new TypeError("The listener must be a function");var L=new u(P,S||_,C),F=r?r+b:b;return _._events[F]?_._events[F].fn?_._events[F]=[_._events[F],L]:_._events[F].push(L):(_._events[F]=L,_._eventsCount++),_}function p(_,b){--_._eventsCount===0?_._events=new n:delete _._events[b]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var b=[],P,S;if(this._eventsCount===0)return b;for(S in P=this._events)t.call(P,S)&&b.push(r?S.slice(1):S);return Object.getOwnPropertySymbols?b.concat(Object.getOwnPropertySymbols(P)):b},o.prototype.listeners=function(b){var P=r?r+b:b,S=this._events[P];if(!S)return[];if(S.fn)return[S.fn];for(var C=0,L=S.length,F=new Array(L);C<L;C++)F[C]=S[C].fn;return F},o.prototype.listenerCount=function(b){var P=r?r+b:b,S=this._events[P];return S?S.fn?1:S.length:0},o.prototype.emit=function(b,P,S,C,L,F){var j=r?r+b:b;if(!this._events[j])return!1;var G=this._events[j],$=arguments.length,N,U;if(G.fn){switch(G.once&&this.removeListener(b,G.fn,void 0,!0),$){case 1:return G.fn.call(G.context),!0;case 2:return G.fn.call(G.context,P),!0;case 3:return G.fn.call(G.context,P,S),!0;case 4:return G.fn.call(G.context,P,S,C),!0;case 5:return G.fn.call(G.context,P,S,C,L),!0;case 6:return G.fn.call(G.context,P,S,C,L,F),!0}for(U=1,N=new Array($-1);U<$;U++)N[U-1]=arguments[U];G.fn.apply(G.context,N)}else{var J=G.length,q;for(U=0;U<J;U++)switch(G[U].once&&this.removeListener(b,G[U].fn,void 0,!0),$){case 1:G[U].fn.call(G[U].context);break;case 2:G[U].fn.call(G[U].context,P);break;case 3:G[U].fn.call(G[U].context,P,S);break;case 4:G[U].fn.call(G[U].context,P,S,C);break;default:if(!N)for(q=1,N=new Array($-1);q<$;q++)N[q-1]=arguments[q];G[U].fn.apply(G[U].context,N)}}return!0},o.prototype.on=function(b,P,S){return h(this,b,P,S,!1)},o.prototype.once=function(b,P,S){return h(this,b,P,S,!0)},o.prototype.removeListener=function(b,P,S,C){var L=r?r+b:b;if(!this._events[L])return this;if(!P)return p(this,L),this;var F=this._events[L];if(F.fn)F.fn===P&&(!C||F.once)&&(!S||F.context===S)&&p(this,L);else{for(var j=0,G=[],$=F.length;j<$;j++)(F[j].fn!==P||C&&!F[j].once||S&&F[j].context!==S)&&G.push(F[j]);G.length?this._events[L]=G.length===1?G[0]:G:p(this,L)}return this},o.prototype.removeAllListeners=function(b){var P;return b?(P=r?r+b:b,this._events[P]&&p(this,P)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o})(rz);var bpe=rz.exports;const wpe=Br(bpe);var E9=new wpe,P9="recharts.syncMouseEvents";function h2(e){"@babel/helpers - typeof";return h2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h2(e)}function Tpe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function FM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,nz(n.key),n)}}function Spe(e,t,r){return t&&FM(e.prototype,t),r&&FM(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function A9(e,t,r){return t=nz(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nz(e){var t=Epe(e,"string");return h2(t)=="symbol"?t:t+""}function Epe(e,t){if(h2(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(h2(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ppe=function(){function e(){Tpe(this,e),A9(this,"activeIndex",0),A9(this,"coordinateList",[]),A9(this,"layout","horizontal")}return Spe(e,[{key:"setDetails",value:function(r){var n,u=r.coordinateList,h=u===void 0?null:u,p=r.container,o=p===void 0?null:p,_=r.layout,b=_===void 0?null:_,P=r.offset,S=P===void 0?null:P,C=r.mouseHandlerCallback,L=C===void 0?null:C;this.coordinateList=(n=h??this.coordinateList)!==null&&n!==void 0?n:[],this.container=o??this.container,this.layout=b??this.layout,this.offset=S??this.offset,this.mouseHandlerCallback=L??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var u=this.container.getBoundingClientRect(),h=u.x,p=u.y,o=u.height,_=this.coordinateList[this.activeIndex].coordinate,b=((r=window)===null||r===void 0?void 0:r.scrollX)||0,P=((n=window)===null||n===void 0?void 0:n.scrollY)||0,S=h+_+b,C=p+this.offset.top+o/2+P;this.mouseHandlerCallback({pageX:S,pageY:C})}}}])}();function Ape(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e==null?void 0:e[0],u=e==null?void 0:e[1];if(n&&u&&Bt(n)&&Bt(u))return!0}return!1}function Mpe(e,t,r,n){var u=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-u:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-u,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function iz(e){var t=e.cx,r=e.cy,n=e.radius,u=e.startAngle,h=e.endAngle,p=Li(t,r,n,u),o=Li(t,r,n,h);return{points:[p,o],cx:t,cy:r,radius:n,startAngle:u,endAngle:h}}function Cpe(e,t,r){var n,u,h,p;if(e==="horizontal")n=t.x,h=n,u=r.top,p=r.top+r.height;else if(e==="vertical")u=t.y,p=u,n=r.left,h=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var o=t.cx,_=t.cy,b=t.innerRadius,P=t.outerRadius,S=t.angle,C=Li(o,_,b,S),L=Li(o,_,P,S);n=C.x,u=C.y,h=L.x,p=L.y}else return iz(t);return[{x:n,y:u},{x:h,y:p}]}function f2(e){"@babel/helpers - typeof";return f2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f2(e)}function jM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function O5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jM(Object(r),!0).forEach(function(n){Ipe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ipe(e,t,r){return t=Ope(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ope(e){var t=kpe(e,"string");return f2(t)=="symbol"?t:t+""}function kpe(e,t){if(f2(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(f2(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Dpe(e){var t,r,n=e.element,u=e.tooltipEventType,h=e.isActive,p=e.activeCoordinate,o=e.activePayload,_=e.offset,b=e.activeTooltipIndex,P=e.tooltipAxisBandSize,S=e.layout,C=e.chartName,L=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!L||!h||!p||C!=="ScatterChart"&&u!=="axis")return null;var F,j=CA;if(C==="ScatterChart")F=p,j=Y1e;else if(C==="BarChart")F=Mpe(S,p,_,P),j=Jv;else if(S==="radial"){var G=iz(p),$=G.cx,N=G.cy,U=G.radius,J=G.startAngle,q=G.endAngle;F={cx:$,cy:N,startAngle:J,endAngle:q,innerRadius:U,outerRadius:U},j=fL}else F={points:Cpe(S,p,_)},j=CA;var Y=O5(O5(O5(O5({stroke:"#ccc",pointerEvents:"none"},_),F),Yr(L,!1)),{},{payload:o,payloadIndex:b,className:rn("recharts-tooltip-cursor",L.className)});return Pe.isValidElement(L)?Pe.cloneElement(L,Y):Pe.createElement(j,Y)}var Lpe=["item"],zpe=["children","className","width","height","style","compact","title","desc"];function Sf(e){"@babel/helpers - typeof";return Sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sf(e)}function kh(){return kh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kh.apply(this,arguments)}function $M(e,t){return Fpe(e)||Bpe(e,t)||az(e,t)||Rpe()}function Rpe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bpe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,u,h,p,o=[],_=!0,b=!1;try{if(h=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;_=!1}else for(;!(_=(n=h.call(r)).done)&&(o.push(n.value),o.length!==t);_=!0);}catch(P){b=!0,u=P}finally{try{if(!_&&r.return!=null&&(p=r.return(),Object(p)!==p))return}finally{if(b)throw u}}return o}}function Fpe(e){if(Array.isArray(e))return e}function NM(e,t){if(e==null)return{};var r=jpe(e,t),n,u;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(u=0;u<h.length;u++)n=h[u],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function jpe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function $pe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function UM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,sz(n.key),n)}}function Npe(e,t,r){return t&&UM(e.prototype,t),r&&UM(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Upe(e,t,r){return t=M6(t),Vpe(e,oz()?Reflect.construct(t,r||[],M6(e).constructor):t.apply(e,r))}function Vpe(e,t){if(t&&(Sf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Gpe(e)}function Gpe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oz=function(){return!!e})()}function M6(e){return M6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},M6(e)}function Wpe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ky(e,t)}function Ky(e,t){return Ky=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,u){return n.__proto__=u,n},Ky(e,t)}function Ef(e){return Zpe(e)||Hpe(e)||az(e)||qpe()}function qpe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function az(e,t){if(e){if(typeof e=="string")return Yy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Yy(e,t)}}function Hpe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Zpe(e){if(Array.isArray(e))return Yy(e)}function Yy(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function VM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function ct(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VM(Object(r),!0).forEach(function(n){ur(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ur(e,t,r){return t=sz(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sz(e){var t=Xpe(e,"string");return Sf(t)=="symbol"?t:t+""}function Xpe(e,t){if(Sf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Sf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Kpe={xAxis:["bottom","top"],yAxis:["left","right"]},Ype={width:"100%",height:"100%"},lz={x:0,y:0};function k5(e){return e}var Jpe=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},Qpe=function(t,r,n,u){var h=r.find(function(P){return P&&P.index===n});if(h){if(t==="horizontal")return{x:h.coordinate,y:u.y};if(t==="vertical")return{x:u.x,y:h.coordinate};if(t==="centric"){var p=h.coordinate,o=u.radius;return ct(ct(ct({},u),Li(u.cx,u.cy,o,p)),{},{angle:p,radius:o})}var _=h.coordinate,b=u.angle;return ct(ct(ct({},u),Li(u.cx,u.cy,_,b)),{},{angle:b,radius:_})}return lz},Fm=function(t,r){var n=r.graphicalItems,u=r.dataStartIndex,h=r.dataEndIndex,p=(n??[]).reduce(function(o,_){var b=_.props.data;return b&&b.length?[].concat(Ef(o),Ef(b)):o},[]);return p.length>0?p:t&&t.length&&Bt(u)&&Bt(h)?t.slice(u,h+1):[]};function uz(e){return e==="number"?[0,"auto"]:void 0}var Jy=function(t,r,n,u){var h=t.graphicalItems,p=t.tooltipAxis,o=Fm(r,t);return n<0||!h||!h.length||n>=o.length?null:h.reduce(function(_,b){var P,S=(P=b.props.data)!==null&&P!==void 0?P:r;S&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(S=S.slice(t.dataStartIndex,t.dataEndIndex+1));var C;if(p.dataKey&&!p.allowDuplicatedCategory){var L=S===void 0?o:S;C=Og(L,p.dataKey,u)}else C=S&&S[n]||o[n];return C?[].concat(Ef(_),[uL(b,C)]):_},[])},GM=function(t,r,n,u){var h=u||{x:t.chartX,y:t.chartY},p=Jpe(h,n),o=t.orderedTooltipTicks,_=t.tooltipAxis,b=t.tooltipTicks,P=jle(p,o,b,_);if(P>=0&&b){var S=b[P]&&b[P].value,C=Jy(t,r,P,S),L=Qpe(n,o,P,h);return{activeTooltipIndex:P,activeLabel:S,activePayload:C,activeCoordinate:L}}return null},e2e=function(t,r){var n=r.axes,u=r.graphicalItems,h=r.axisType,p=r.axisIdKey,o=r.stackGroups,_=r.dataStartIndex,b=r.dataEndIndex,P=t.layout,S=t.children,C=t.stackOffset,L=aL(P,h);return n.reduce(function(F,j){var G,$=j.type.defaultProps!==void 0?ct(ct({},j.type.defaultProps),j.props):j.props,N=$.type,U=$.dataKey,J=$.allowDataOverflow,q=$.allowDuplicatedCategory,Y=$.scale,X=$.ticks,ue=$.includeHidden,oe=$[p];if(F[oe])return F;var Re=Fm(t.data,{graphicalItems:u.filter(function(lt){var Tt,qt=p in lt.props?lt.props[p]:(Tt=lt.type.defaultProps)===null||Tt===void 0?void 0:Tt[p];return qt===oe}),dataStartIndex:_,dataEndIndex:b}),ze=Re.length,De,Je,we;Ape($.domain,J,N)&&(De=_y($.domain,null,J),L&&(N==="number"||Y!=="auto")&&(we=ap(Re,U,"category")));var ve=uz(N);if(!De||De.length===0){var Ce,Le=(Ce=$.domain)!==null&&Ce!==void 0?Ce:ve;if(U){if(De=ap(Re,U,N),N==="category"&&L){var ge=IH(De);q&&ge?(Je=De,De=g6(0,ze)):q||(De=gA(Le,De,j).reduce(function(lt,Tt){return lt.indexOf(Tt)>=0?lt:[].concat(Ef(lt),[Tt])},[]))}else if(N==="category")q?De=De.filter(function(lt){return lt!==""&&!tn(lt)}):De=gA(Le,De,j).reduce(function(lt,Tt){return lt.indexOf(Tt)>=0||Tt===""||tn(Tt)?lt:[].concat(Ef(lt),[Tt])},[]);else if(N==="number"){var $e=Gle(Re,u.filter(function(lt){var Tt,qt,fr=p in lt.props?lt.props[p]:(Tt=lt.type.defaultProps)===null||Tt===void 0?void 0:Tt[p],br="hide"in lt.props?lt.props.hide:(qt=lt.type.defaultProps)===null||qt===void 0?void 0:qt.hide;return fr===oe&&(ue||!br)}),U,h,P);$e&&(De=$e)}L&&(N==="number"||Y!=="auto")&&(we=ap(Re,U,"category"))}else L?De=g6(0,ze):o&&o[oe]&&o[oe].hasStack&&N==="number"?De=C==="expand"?[0,1]:lL(o[oe].stackGroups,_,b):De=oL(Re,u.filter(function(lt){var Tt=p in lt.props?lt.props[p]:lt.type.defaultProps[p],qt="hide"in lt.props?lt.props.hide:lt.type.defaultProps.hide;return Tt===oe&&(ue||!qt)}),N,P,!0);if(N==="number")De=Xy(S,De,oe,h,X),Le&&(De=_y(Le,De,J));else if(N==="category"&&Le){var rt=Le,ft=De.every(function(lt){return rt.indexOf(lt)>=0});ft&&(De=rt)}}return ct(ct({},F),{},ur({},oe,ct(ct({},$),{},{axisType:h,domain:De,categoricalDomain:we,duplicateDomain:Je,originalDomain:(G=$.domain)!==null&&G!==void 0?G:ve,isCategorical:L,layout:P})))},{})},t2e=function(t,r){var n=r.graphicalItems,u=r.Axis,h=r.axisType,p=r.axisIdKey,o=r.stackGroups,_=r.dataStartIndex,b=r.dataEndIndex,P=t.layout,S=t.children,C=Fm(t.data,{graphicalItems:n,dataStartIndex:_,dataEndIndex:b}),L=C.length,F=aL(P,h),j=-1;return n.reduce(function(G,$){var N=$.type.defaultProps!==void 0?ct(ct({},$.type.defaultProps),$.props):$.props,U=N[p],J=uz("number");if(!G[U]){j++;var q;return F?q=g6(0,L):o&&o[U]&&o[U].hasStack?(q=lL(o[U].stackGroups,_,b),q=Xy(S,q,U,h)):(q=_y(J,oL(C,n.filter(function(Y){var X,ue,oe=p in Y.props?Y.props[p]:(X=Y.type.defaultProps)===null||X===void 0?void 0:X[p],Re="hide"in Y.props?Y.props.hide:(ue=Y.type.defaultProps)===null||ue===void 0?void 0:ue.hide;return oe===U&&!Re}),"number",P),u.defaultProps.allowDataOverflow),q=Xy(S,q,U,h)),ct(ct({},G),{},ur({},U,ct(ct({axisType:h},u.defaultProps),{},{hide:!0,orientation:Sa(Kpe,"".concat(h,".").concat(j%2),null),domain:q,originalDomain:J,isCategorical:F,layout:P})))}return G},{})},r2e=function(t,r){var n=r.axisType,u=n===void 0?"xAxis":n,h=r.AxisComp,p=r.graphicalItems,o=r.stackGroups,_=r.dataStartIndex,b=r.dataEndIndex,P=t.children,S="".concat(u,"Id"),C=os(P,h),L={};return C&&C.length?L=e2e(t,{axes:C,graphicalItems:p,axisType:u,axisIdKey:S,stackGroups:o,dataStartIndex:_,dataEndIndex:b}):p&&p.length&&(L=t2e(t,{Axis:h,graphicalItems:p,axisType:u,axisIdKey:S,stackGroups:o,dataStartIndex:_,dataEndIndex:b})),L},n2e=function(t){var r=uu(t),n=sl(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:Sv(n,function(u){return u.coordinate}),tooltipAxis:r,tooltipAxisBandSize:s6(r,n)}},WM=function(t){var r=t.children,n=t.defaultShowTooltip,u=qo(r,gf),h=0,p=0;return t.data&&t.data.length!==0&&(p=t.data.length-1),u&&u.props&&(u.props.startIndex>=0&&(h=u.props.startIndex),u.props.endIndex>=0&&(p=u.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:h,dataEndIndex:p,activeTooltipIndex:-1,isTooltipActive:!!n}},i2e=function(t){return!t||!t.length?!1:t.some(function(r){var n=cl(r&&r.type);return n&&n.indexOf("Bar")>=0})},qM=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},o2e=function(t,r){var n=t.props,u=t.graphicalItems,h=t.xAxisMap,p=h===void 0?{}:h,o=t.yAxisMap,_=o===void 0?{}:o,b=n.width,P=n.height,S=n.children,C=n.margin||{},L=qo(S,gf),F=qo(S,Vh),j=Object.keys(_).reduce(function(q,Y){var X=_[Y],ue=X.orientation;return!X.mirror&&!X.hide?ct(ct({},q),{},ur({},ue,q[ue]+X.width)):q},{left:C.left||0,right:C.right||0}),G=Object.keys(p).reduce(function(q,Y){var X=p[Y],ue=X.orientation;return!X.mirror&&!X.hide?ct(ct({},q),{},ur({},ue,Sa(q,"".concat(ue))+X.height)):q},{top:C.top||0,bottom:C.bottom||0}),$=ct(ct({},G),j),N=$.bottom;L&&($.bottom+=L.props.height||gf.defaultProps.height),F&&r&&($=Ule($,u,n,r));var U=b-$.left-$.right,J=P-$.top-$.bottom;return ct(ct({brushBottom:N},$),{},{width:Math.max(U,0),height:Math.max(J,0)})},a2e=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},s2e=function(t){var r=t.chartName,n=t.GraphicalChild,u=t.defaultTooltipEventType,h=u===void 0?"axis":u,p=t.validateTooltipEventTypes,o=p===void 0?["axis"]:p,_=t.axisComponents,b=t.legendContent,P=t.formatAxisMap,S=t.defaultProps,C=function($,N){var U=N.graphicalItems,J=N.stackGroups,q=N.offset,Y=N.updateId,X=N.dataStartIndex,ue=N.dataEndIndex,oe=$.barSize,Re=$.layout,ze=$.barGap,De=$.barCategoryGap,Je=$.maxBarSize,we=qM(Re),ve=we.numericAxisName,Ce=we.cateAxisName,Le=i2e(U),ge=[];return U.forEach(function($e,rt){var ft=Fm($.data,{graphicalItems:[$e],dataStartIndex:X,dataEndIndex:ue}),lt=$e.type.defaultProps!==void 0?ct(ct({},$e.type.defaultProps),$e.props):$e.props,Tt=lt.dataKey,qt=lt.maxBarSize,fr=lt["".concat(ve,"Id")],br=lt["".concat(Ce,"Id")],Mr={},nn=_.reduce(function(pi,Pi){var Bi=N["".concat(Pi.axisType,"Map")],ii=lt["".concat(Pi.axisType,"Id")];Bi&&Bi[ii]||Pi.axisType==="zAxis"||Jc(!1);var to=Bi[ii];return ct(ct({},pi),{},ur(ur({},Pi.axisType,to),"".concat(Pi.axisType,"Ticks"),sl(to)))},Mr),zt=nn[Ce],rr=nn["".concat(Ce,"Ticks")],Lt=J&&J[fr]&&J[fr].hasStack&&rue($e,J[fr].stackGroups),dt=cl($e.type).indexOf("Bar")>=0,pr=s6(zt,rr),_r=[],hr=Le&&$le({barSize:oe,stackGroups:J,totalSize:a2e(nn,Ce)});if(dt){var Tr,kn,Gn=tn(qt)?Je:qt,vn=(Tr=(kn=s6(zt,rr,!0))!==null&&kn!==void 0?kn:Gn)!==null&&Tr!==void 0?Tr:0;_r=Nle({barGap:ze,barCategoryGap:De,bandSize:vn!==pr?vn:pr,sizeList:hr[br],maxBarSize:Gn}),vn!==pr&&(_r=_r.map(function(pi){return ct(ct({},pi),{},{position:ct(ct({},pi.position),{},{offset:pi.position.offset-vn/2})})}))}var po=$e&&$e.type&&$e.type.getComposedData;po&&ge.push({props:ct(ct({},po(ct(ct({},nn),{},{displayedData:ft,props:$,dataKey:Tt,item:$e,bandSize:pr,barPosition:_r,offset:q,stackedData:Lt,layout:Re,dataStartIndex:X,dataEndIndex:ue}))),{},ur(ur(ur({key:$e.key||"item-".concat(rt)},ve,nn[ve]),Ce,nn[Ce]),"animationId",Y)),childIndex:UH($e,$.children),item:$e})}),ge},L=function($,N){var U=$.props,J=$.dataStartIndex,q=$.dataEndIndex,Y=$.updateId;if(!aE({props:U}))return null;var X=U.children,ue=U.layout,oe=U.stackOffset,Re=U.data,ze=U.reverseStackOrder,De=qM(ue),Je=De.numericAxisName,we=De.cateAxisName,ve=os(X,n),Ce=Qle(Re,ve,"".concat(Je,"Id"),"".concat(we,"Id"),oe,ze),Le=_.reduce(function(lt,Tt){var qt="".concat(Tt.axisType,"Map");return ct(ct({},lt),{},ur({},qt,r2e(U,ct(ct({},Tt),{},{graphicalItems:ve,stackGroups:Tt.axisType===Je&&Ce,dataStartIndex:J,dataEndIndex:q}))))},{}),ge=o2e(ct(ct({},Le),{},{props:U,graphicalItems:ve}),N==null?void 0:N.legendBBox);Object.keys(Le).forEach(function(lt){Le[lt]=P(U,Le[lt],ge,lt.replace("Map",""),r)});var $e=Le["".concat(we,"Map")],rt=n2e($e),ft=C(U,ct(ct({},Le),{},{dataStartIndex:J,dataEndIndex:q,updateId:Y,graphicalItems:ve,stackGroups:Ce,offset:ge}));return ct(ct({formattedGraphicalItems:ft,graphicalItems:ve,offset:ge,stackGroups:Ce},rt),Le)},F=function(G){function $(N){var U,J,q;return $pe(this,$),q=Upe(this,$,[N]),ur(q,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),ur(q,"accessibilityManager",new Ppe),ur(q,"handleLegendBBoxUpdate",function(Y){if(Y){var X=q.state,ue=X.dataStartIndex,oe=X.dataEndIndex,Re=X.updateId;q.setState(ct({legendBBox:Y},L({props:q.props,dataStartIndex:ue,dataEndIndex:oe,updateId:Re},ct(ct({},q.state),{},{legendBBox:Y}))))}}),ur(q,"handleReceiveSyncEvent",function(Y,X,ue){if(q.props.syncId===Y){if(ue===q.eventEmitterSymbol&&typeof q.props.syncMethod!="function")return;q.applySyncEvent(X)}}),ur(q,"handleBrushChange",function(Y){var X=Y.startIndex,ue=Y.endIndex;if(X!==q.state.dataStartIndex||ue!==q.state.dataEndIndex){var oe=q.state.updateId;q.setState(function(){return ct({dataStartIndex:X,dataEndIndex:ue},L({props:q.props,dataStartIndex:X,dataEndIndex:ue,updateId:oe},q.state))}),q.triggerSyncEvent({dataStartIndex:X,dataEndIndex:ue})}}),ur(q,"handleMouseEnter",function(Y){var X=q.getMouseInfo(Y);if(X){var ue=ct(ct({},X),{},{isTooltipActive:!0});q.setState(ue),q.triggerSyncEvent(ue);var oe=q.props.onMouseEnter;Ar(oe)&&oe(ue,Y)}}),ur(q,"triggeredAfterMouseMove",function(Y){var X=q.getMouseInfo(Y),ue=X?ct(ct({},X),{},{isTooltipActive:!0}):{isTooltipActive:!1};q.setState(ue),q.triggerSyncEvent(ue);var oe=q.props.onMouseMove;Ar(oe)&&oe(ue,Y)}),ur(q,"handleItemMouseEnter",function(Y){q.setState(function(){return{isTooltipActive:!0,activeItem:Y,activePayload:Y.tooltipPayload,activeCoordinate:Y.tooltipPosition||{x:Y.cx,y:Y.cy}}})}),ur(q,"handleItemMouseLeave",function(){q.setState(function(){return{isTooltipActive:!1}})}),ur(q,"handleMouseMove",function(Y){Y.persist(),q.throttleTriggeredAfterMouseMove(Y)}),ur(q,"handleMouseLeave",function(Y){q.throttleTriggeredAfterMouseMove.cancel();var X={isTooltipActive:!1};q.setState(X),q.triggerSyncEvent(X);var ue=q.props.onMouseLeave;Ar(ue)&&ue(X,Y)}),ur(q,"handleOuterEvent",function(Y){var X=NH(Y),ue=Sa(q.props,"".concat(X));if(X&&Ar(ue)){var oe,Re;/.*touch.*/i.test(X)?Re=q.getMouseInfo(Y.changedTouches[0]):Re=q.getMouseInfo(Y),ue((oe=Re)!==null&&oe!==void 0?oe:{},Y)}}),ur(q,"handleClick",function(Y){var X=q.getMouseInfo(Y);if(X){var ue=ct(ct({},X),{},{isTooltipActive:!0});q.setState(ue),q.triggerSyncEvent(ue);var oe=q.props.onClick;Ar(oe)&&oe(ue,Y)}}),ur(q,"handleMouseDown",function(Y){var X=q.props.onMouseDown;if(Ar(X)){var ue=q.getMouseInfo(Y);X(ue,Y)}}),ur(q,"handleMouseUp",function(Y){var X=q.props.onMouseUp;if(Ar(X)){var ue=q.getMouseInfo(Y);X(ue,Y)}}),ur(q,"handleTouchMove",function(Y){Y.changedTouches!=null&&Y.changedTouches.length>0&&q.throttleTriggeredAfterMouseMove(Y.changedTouches[0])}),ur(q,"handleTouchStart",function(Y){Y.changedTouches!=null&&Y.changedTouches.length>0&&q.handleMouseDown(Y.changedTouches[0])}),ur(q,"handleTouchEnd",function(Y){Y.changedTouches!=null&&Y.changedTouches.length>0&&q.handleMouseUp(Y.changedTouches[0])}),ur(q,"handleDoubleClick",function(Y){var X=q.props.onDoubleClick;if(Ar(X)){var ue=q.getMouseInfo(Y);X(ue,Y)}}),ur(q,"handleContextMenu",function(Y){var X=q.props.onContextMenu;if(Ar(X)){var ue=q.getMouseInfo(Y);X(ue,Y)}}),ur(q,"triggerSyncEvent",function(Y){q.props.syncId!==void 0&&E9.emit(P9,q.props.syncId,Y,q.eventEmitterSymbol)}),ur(q,"applySyncEvent",function(Y){var X=q.props,ue=X.layout,oe=X.syncMethod,Re=q.state.updateId,ze=Y.dataStartIndex,De=Y.dataEndIndex;if(Y.dataStartIndex!==void 0||Y.dataEndIndex!==void 0)q.setState(ct({dataStartIndex:ze,dataEndIndex:De},L({props:q.props,dataStartIndex:ze,dataEndIndex:De,updateId:Re},q.state)));else if(Y.activeTooltipIndex!==void 0){var Je=Y.chartX,we=Y.chartY,ve=Y.activeTooltipIndex,Ce=q.state,Le=Ce.offset,ge=Ce.tooltipTicks;if(!Le)return;if(typeof oe=="function")ve=oe(ge,Y);else if(oe==="value"){ve=-1;for(var $e=0;$e<ge.length;$e++)if(ge[$e].value===Y.activeLabel){ve=$e;break}}var rt=ct(ct({},Le),{},{x:Le.left,y:Le.top}),ft=Math.min(Je,rt.x+rt.width),lt=Math.min(we,rt.y+rt.height),Tt=ge[ve]&&ge[ve].value,qt=Jy(q.state,q.props.data,ve),fr=ge[ve]?{x:ue==="horizontal"?ge[ve].coordinate:ft,y:ue==="horizontal"?lt:ge[ve].coordinate}:lz;q.setState(ct(ct({},Y),{},{activeLabel:Tt,activeCoordinate:fr,activePayload:qt,activeTooltipIndex:ve}))}else q.setState(Y)}),ur(q,"renderCursor",function(Y){var X,ue=q.state,oe=ue.isTooltipActive,Re=ue.activeCoordinate,ze=ue.activePayload,De=ue.offset,Je=ue.activeTooltipIndex,we=ue.tooltipAxisBandSize,ve=q.getTooltipEventType(),Ce=(X=Y.props.active)!==null&&X!==void 0?X:oe,Le=q.props.layout,ge=Y.key||"_recharts-cursor";return Ne.createElement(Dpe,{key:ge,activeCoordinate:Re,activePayload:ze,activeTooltipIndex:Je,chartName:r,element:Y,isActive:Ce,layout:Le,offset:De,tooltipAxisBandSize:we,tooltipEventType:ve})}),ur(q,"renderPolarAxis",function(Y,X,ue){var oe=Sa(Y,"type.axisType"),Re=Sa(q.state,"".concat(oe,"Map")),ze=Y.type.defaultProps,De=ze!==void 0?ct(ct({},ze),Y.props):Y.props,Je=Re&&Re[De["".concat(oe,"Id")]];return Pe.cloneElement(Y,ct(ct({},Je),{},{className:rn(oe,Je.className),key:Y.key||"".concat(X,"-").concat(ue),ticks:sl(Je,!0)}))}),ur(q,"renderPolarGrid",function(Y){var X=Y.props,ue=X.radialLines,oe=X.polarAngles,Re=X.polarRadius,ze=q.state,De=ze.radiusAxisMap,Je=ze.angleAxisMap,we=uu(De),ve=uu(Je),Ce=ve.cx,Le=ve.cy,ge=ve.innerRadius,$e=ve.outerRadius;return Pe.cloneElement(Y,{polarAngles:Array.isArray(oe)?oe:sl(ve,!0).map(function(rt){return rt.coordinate}),polarRadius:Array.isArray(Re)?Re:sl(we,!0).map(function(rt){return rt.coordinate}),cx:Ce,cy:Le,innerRadius:ge,outerRadius:$e,key:Y.key||"polar-grid",radialLines:ue})}),ur(q,"renderLegend",function(){var Y=q.state.formattedGraphicalItems,X=q.props,ue=X.children,oe=X.width,Re=X.height,ze=q.props.margin||{},De=oe-(ze.left||0)-(ze.right||0),Je=nL({children:ue,formattedGraphicalItems:Y,legendWidth:De,legendContent:b});if(!Je)return null;var we=Je.item,ve=NM(Je,Lpe);return Pe.cloneElement(we,ct(ct({},ve),{},{chartWidth:oe,chartHeight:Re,margin:ze,onBBoxUpdate:q.handleLegendBBoxUpdate}))}),ur(q,"renderTooltip",function(){var Y,X=q.props,ue=X.children,oe=X.accessibilityLayer,Re=qo(ue,tl);if(!Re)return null;var ze=q.state,De=ze.isTooltipActive,Je=ze.activeCoordinate,we=ze.activePayload,ve=ze.activeLabel,Ce=ze.offset,Le=(Y=Re.props.active)!==null&&Y!==void 0?Y:De;return Pe.cloneElement(Re,{viewBox:ct(ct({},Ce),{},{x:Ce.left,y:Ce.top}),active:Le,label:ve,payload:Le?we:[],coordinate:Je,accessibilityLayer:oe})}),ur(q,"renderBrush",function(Y){var X=q.props,ue=X.margin,oe=X.data,Re=q.state,ze=Re.offset,De=Re.dataStartIndex,Je=Re.dataEndIndex,we=Re.updateId;return Pe.cloneElement(Y,{key:Y.key||"_recharts-brush",onChange:A5(q.handleBrushChange,Y.props.onChange),data:oe,x:Bt(Y.props.x)?Y.props.x:ze.left,y:Bt(Y.props.y)?Y.props.y:ze.top+ze.height+ze.brushBottom-(ue.bottom||0),width:Bt(Y.props.width)?Y.props.width:ze.width,startIndex:De,endIndex:Je,updateId:"brush-".concat(we)})}),ur(q,"renderReferenceElement",function(Y,X,ue){if(!Y)return null;var oe=q,Re=oe.clipPathId,ze=q.state,De=ze.xAxisMap,Je=ze.yAxisMap,we=ze.offset,ve=Y.type.defaultProps||{},Ce=Y.props,Le=Ce.xAxisId,ge=Le===void 0?ve.xAxisId:Le,$e=Ce.yAxisId,rt=$e===void 0?ve.yAxisId:$e;return Pe.cloneElement(Y,{key:Y.key||"".concat(X,"-").concat(ue),xAxis:De[ge],yAxis:Je[rt],viewBox:{x:we.left,y:we.top,width:we.width,height:we.height},clipPathId:Re})}),ur(q,"renderActivePoints",function(Y){var X=Y.item,ue=Y.activePoint,oe=Y.basePoint,Re=Y.childIndex,ze=Y.isRange,De=[],Je=X.props.key,we=X.item.type.defaultProps!==void 0?ct(ct({},X.item.type.defaultProps),X.item.props):X.item.props,ve=we.activeDot,Ce=we.dataKey,Le=ct(ct({index:Re,dataKey:Ce,cx:ue.x,cy:ue.y,r:4,fill:Yv(X.item),strokeWidth:2,stroke:"#fff",payload:ue.payload,value:ue.value},Yr(ve,!1)),k4(ve));return De.push($.renderActiveDot(ve,Le,"".concat(Je,"-activePoint-").concat(Re))),oe?De.push($.renderActiveDot(ve,ct(ct({},Le),{},{cx:oe.x,cy:oe.y}),"".concat(Je,"-basePoint-").concat(Re))):ze&&De.push(null),De}),ur(q,"renderGraphicChild",function(Y,X,ue){var oe=q.filterFormatItem(Y,X,ue);if(!oe)return null;var Re=q.getTooltipEventType(),ze=q.state,De=ze.isTooltipActive,Je=ze.tooltipAxis,we=ze.activeTooltipIndex,ve=ze.activeLabel,Ce=q.props.children,Le=qo(Ce,tl),ge=oe.props,$e=ge.points,rt=ge.isRange,ft=ge.baseLine,lt=oe.item.type.defaultProps!==void 0?ct(ct({},oe.item.type.defaultProps),oe.item.props):oe.item.props,Tt=lt.activeDot,qt=lt.hide,fr=lt.activeBar,br=lt.activeShape,Mr=!!(!qt&&De&&Le&&(Tt||fr||br)),nn={};Re!=="axis"&&Le&&Le.props.trigger==="click"?nn={onClick:A5(q.handleItemMouseEnter,Y.props.onClick)}:Re!=="axis"&&(nn={onMouseLeave:A5(q.handleItemMouseLeave,Y.props.onMouseLeave),onMouseEnter:A5(q.handleItemMouseEnter,Y.props.onMouseEnter)});var zt=Pe.cloneElement(Y,ct(ct({},oe.props),nn));function rr(Pi){return typeof Je.dataKey=="function"?Je.dataKey(Pi.payload):null}if(Mr)if(we>=0){var Lt,dt;if(Je.dataKey&&!Je.allowDuplicatedCategory){var pr=typeof Je.dataKey=="function"?rr:"payload.".concat(Je.dataKey.toString());Lt=Og($e,pr,ve),dt=rt&&ft&&Og(ft,pr,ve)}else Lt=$e==null?void 0:$e[we],dt=rt&&ft&&ft[we];if(br||fr){var _r=Y.props.activeIndex!==void 0?Y.props.activeIndex:we;return[Pe.cloneElement(Y,ct(ct(ct({},oe.props),nn),{},{activeIndex:_r})),null,null]}if(!tn(Lt))return[zt].concat(Ef(q.renderActivePoints({item:oe,activePoint:Lt,basePoint:dt,childIndex:we,isRange:rt})))}else{var hr,Tr=(hr=q.getItemByXY(q.state.activeCoordinate))!==null&&hr!==void 0?hr:{graphicalItem:zt},kn=Tr.graphicalItem,Gn=kn.item,vn=Gn===void 0?Y:Gn,po=kn.childIndex,pi=ct(ct(ct({},oe.props),nn),{},{activeIndex:po});return[Pe.cloneElement(vn,pi),null,null]}return rt?[zt,null,null]:[zt,null]}),ur(q,"renderCustomized",function(Y,X,ue){return Pe.cloneElement(Y,ct(ct({key:"recharts-customized-".concat(ue)},q.props),q.state))}),ur(q,"renderMap",{CartesianGrid:{handler:k5,once:!0},ReferenceArea:{handler:q.renderReferenceElement},ReferenceLine:{handler:k5},ReferenceDot:{handler:q.renderReferenceElement},XAxis:{handler:k5},YAxis:{handler:k5},Brush:{handler:q.renderBrush,once:!0},Bar:{handler:q.renderGraphicChild},Line:{handler:q.renderGraphicChild},Area:{handler:q.renderGraphicChild},Radar:{handler:q.renderGraphicChild},RadialBar:{handler:q.renderGraphicChild},Scatter:{handler:q.renderGraphicChild},Pie:{handler:q.renderGraphicChild},Funnel:{handler:q.renderGraphicChild},Tooltip:{handler:q.renderCursor,once:!0},PolarGrid:{handler:q.renderPolarGrid,once:!0},PolarAngleAxis:{handler:q.renderPolarAxis},PolarRadiusAxis:{handler:q.renderPolarAxis},Customized:{handler:q.renderCustomized}}),q.clipPathId="".concat((U=N.id)!==null&&U!==void 0?U:hm("recharts"),"-clip"),q.throttleTriggeredAfterMouseMove=rD(q.triggeredAfterMouseMove,(J=N.throttleDelay)!==null&&J!==void 0?J:1e3/60),q.state={},q}return Wpe($,G),Npe($,[{key:"componentDidMount",value:function(){var U,J;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(U=this.props.margin.left)!==null&&U!==void 0?U:0,top:(J=this.props.margin.top)!==null&&J!==void 0?J:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var U=this.props,J=U.children,q=U.data,Y=U.height,X=U.layout,ue=qo(J,tl);if(ue){var oe=ue.props.defaultIndex;if(!(typeof oe!="number"||oe<0||oe>this.state.tooltipTicks.length-1)){var Re=this.state.tooltipTicks[oe]&&this.state.tooltipTicks[oe].value,ze=Jy(this.state,q,oe,Re),De=this.state.tooltipTicks[oe].coordinate,Je=(this.state.offset.top+Y)/2,we=X==="horizontal",ve=we?{x:De,y:Je}:{y:De,x:Je},Ce=this.state.formattedGraphicalItems.find(function(ge){var $e=ge.item;return $e.type.name==="Scatter"});Ce&&(ve=ct(ct({},ve),Ce.props.points[oe].tooltipPosition),ze=Ce.props.points[oe].tooltipPayload);var Le={activeTooltipIndex:oe,isTooltipActive:!0,activeLabel:Re,activePayload:ze,activeCoordinate:ve};this.setState(Le),this.renderCursor(ue),this.accessibilityManager.setIndex(oe)}}}},{key:"getSnapshotBeforeUpdate",value:function(U,J){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==J.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==U.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==U.margin){var q,Y;this.accessibilityManager.setDetails({offset:{left:(q=this.props.margin.left)!==null&&q!==void 0?q:0,top:(Y=this.props.margin.top)!==null&&Y!==void 0?Y:0}})}return null}},{key:"componentDidUpdate",value:function(U){Dg([qo(U.children,tl)],[qo(this.props.children,tl)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var U=qo(this.props.children,tl);if(U&&typeof U.props.shared=="boolean"){var J=U.props.shared?"axis":"item";return o.indexOf(J)>=0?J:h}return h}},{key:"getMouseInfo",value:function(U){if(!this.container)return null;var J=this.container,q=J.getBoundingClientRect(),Y=hie(q),X={chartX:Math.round(U.pageX-Y.left),chartY:Math.round(U.pageY-Y.top)},ue=q.width/J.offsetWidth||1,oe=this.inRange(X.chartX,X.chartY,ue);if(!oe)return null;var Re=this.state,ze=Re.xAxisMap,De=Re.yAxisMap,Je=this.getTooltipEventType(),we=GM(this.state,this.props.data,this.props.layout,oe);if(Je!=="axis"&&ze&&De){var ve=uu(ze).scale,Ce=uu(De).scale,Le=ve&&ve.invert?ve.invert(X.chartX):null,ge=Ce&&Ce.invert?Ce.invert(X.chartY):null;return ct(ct({},X),{},{xValue:Le,yValue:ge},we)}return we?ct(ct({},X),we):null}},{key:"inRange",value:function(U,J){var q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,Y=this.props.layout,X=U/q,ue=J/q;if(Y==="horizontal"||Y==="vertical"){var oe=this.state.offset,Re=X>=oe.left&&X<=oe.left+oe.width&&ue>=oe.top&&ue<=oe.top+oe.height;return Re?{x:X,y:ue}:null}var ze=this.state,De=ze.angleAxisMap,Je=ze.radiusAxisMap;if(De&&Je){var we=uu(De);return vA({x:X,y:ue},we)}return null}},{key:"parseEventsOfWrapper",value:function(){var U=this.props.children,J=this.getTooltipEventType(),q=qo(U,tl),Y={};q&&J==="axis"&&(q.props.trigger==="click"?Y={onClick:this.handleClick}:Y={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var X=k4(this.props,this.handleOuterEvent);return ct(ct({},X),Y)}},{key:"addListener",value:function(){E9.on(P9,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){E9.removeListener(P9,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(U,J,q){for(var Y=this.state.formattedGraphicalItems,X=0,ue=Y.length;X<ue;X++){var oe=Y[X];if(oe.item===U||oe.props.key===U.key||J===cl(oe.item.type)&&q===oe.childIndex)return oe}return null}},{key:"renderClipPath",value:function(){var U=this.clipPathId,J=this.state.offset,q=J.left,Y=J.top,X=J.height,ue=J.width;return Ne.createElement("defs",null,Ne.createElement("clipPath",{id:U},Ne.createElement("rect",{x:q,y:Y,height:X,width:ue})))}},{key:"getXScales",value:function(){var U=this.state.xAxisMap;return U?Object.entries(U).reduce(function(J,q){var Y=$M(q,2),X=Y[0],ue=Y[1];return ct(ct({},J),{},ur({},X,ue.scale))},{}):null}},{key:"getYScales",value:function(){var U=this.state.yAxisMap;return U?Object.entries(U).reduce(function(J,q){var Y=$M(q,2),X=Y[0],ue=Y[1];return ct(ct({},J),{},ur({},X,ue.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(U){var J;return(J=this.state.xAxisMap)===null||J===void 0||(J=J[U])===null||J===void 0?void 0:J.scale}},{key:"getYScaleByAxisId",value:function(U){var J;return(J=this.state.yAxisMap)===null||J===void 0||(J=J[U])===null||J===void 0?void 0:J.scale}},{key:"getItemByXY",value:function(U){var J=this.state,q=J.formattedGraphicalItems,Y=J.activeItem;if(q&&q.length)for(var X=0,ue=q.length;X<ue;X++){var oe=q[X],Re=oe.props,ze=oe.item,De=ze.type.defaultProps!==void 0?ct(ct({},ze.type.defaultProps),ze.props):ze.props,Je=cl(ze.type);if(Je==="Bar"){var we=(Re.data||[]).find(function(ge){return N1e(U,ge)});if(we)return{graphicalItem:oe,payload:we}}else if(Je==="RadialBar"){var ve=(Re.data||[]).find(function(ge){return vA(U,ge)});if(ve)return{graphicalItem:oe,payload:ve}}else if(Om(oe,Y)||km(oe,Y)||a2(oe,Y)){var Ce=Ghe({graphicalItem:oe,activeTooltipItem:Y,itemData:De.data}),Le=De.activeIndex===void 0?Ce:De.activeIndex;return{graphicalItem:ct(ct({},oe),{},{childIndex:Le}),payload:a2(oe,Y)?De.data[Ce]:oe.props.data[Ce]}}}return null}},{key:"render",value:function(){var U=this;if(!aE(this))return null;var J=this.props,q=J.children,Y=J.className,X=J.width,ue=J.height,oe=J.style,Re=J.compact,ze=J.title,De=J.desc,Je=NM(J,zpe),we=Yr(Je,!1);if(Re)return Ne.createElement(vM,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Ne.createElement(zg,kh({},we,{width:X,height:ue,title:ze,desc:De}),this.renderClipPath(),lE(q,this.renderMap)));if(this.props.accessibilityLayer){var ve,Ce;we.tabIndex=(ve=this.props.tabIndex)!==null&&ve!==void 0?ve:0,we.role=(Ce=this.props.role)!==null&&Ce!==void 0?Ce:"application",we.onKeyDown=function(ge){U.accessibilityManager.keyboardEvent(ge)},we.onFocus=function(){U.accessibilityManager.focus()}}var Le=this.parseEventsOfWrapper();return Ne.createElement(vM,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Ne.createElement("div",kh({className:rn("recharts-wrapper",Y),style:ct({position:"relative",cursor:"default",width:X,height:ue},oe)},Le,{ref:function($e){U.container=$e}}),Ne.createElement(zg,kh({},we,{width:X,height:ue,title:ze,desc:De,style:Ype}),this.renderClipPath(),lE(q,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(Pe.Component);ur(F,"displayName",r),ur(F,"defaultProps",ct({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},S)),ur(F,"getDerivedStateFromProps",function(G,$){var N=G.dataKey,U=G.data,J=G.children,q=G.width,Y=G.height,X=G.layout,ue=G.stackOffset,oe=G.margin,Re=$.dataStartIndex,ze=$.dataEndIndex;if($.updateId===void 0){var De=WM(G);return ct(ct(ct({},De),{},{updateId:0},L(ct(ct({props:G},De),{},{updateId:0}),$)),{},{prevDataKey:N,prevData:U,prevWidth:q,prevHeight:Y,prevLayout:X,prevStackOffset:ue,prevMargin:oe,prevChildren:J})}if(N!==$.prevDataKey||U!==$.prevData||q!==$.prevWidth||Y!==$.prevHeight||X!==$.prevLayout||ue!==$.prevStackOffset||!Uh(oe,$.prevMargin)){var Je=WM(G),we={chartX:$.chartX,chartY:$.chartY,isTooltipActive:$.isTooltipActive},ve=ct(ct({},GM($,U,X)),{},{updateId:$.updateId+1}),Ce=ct(ct(ct({},Je),we),ve);return ct(ct(ct({},Ce),L(ct({props:G},Ce),$)),{},{prevDataKey:N,prevData:U,prevWidth:q,prevHeight:Y,prevLayout:X,prevStackOffset:ue,prevMargin:oe,prevChildren:J})}if(!Dg(J,$.prevChildren)){var Le,ge,$e,rt,ft=qo(J,gf),lt=ft&&(Le=(ge=ft.props)===null||ge===void 0?void 0:ge.startIndex)!==null&&Le!==void 0?Le:Re,Tt=ft&&($e=(rt=ft.props)===null||rt===void 0?void 0:rt.endIndex)!==null&&$e!==void 0?$e:ze,qt=lt!==Re||Tt!==ze,fr=!tn(U),br=fr&&!qt?$.updateId:$.updateId+1;return ct(ct({updateId:br},L(ct(ct({props:G},$),{},{updateId:br,dataStartIndex:lt,dataEndIndex:Tt}),$)),{},{prevChildren:J,dataStartIndex:lt,dataEndIndex:Tt})}return null}),ur(F,"renderActiveDot",function(G,$,N){var U;return Pe.isValidElement(G)?U=Pe.cloneElement(G,$):Ar(G)?U=G($):U=Ne.createElement(xL,$),Ne.createElement(Ti,{className:"recharts-active-dot",key:N},U)});var j=Pe.forwardRef(function($,N){return Ne.createElement(F,kh({},$,{ref:N}))});return j.displayName=F.displayName,j},E2e=s2e({chartName:"BarChart",GraphicalChild:Uf,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:lx},{axisType:"yAxis",AxisComp:ux}],formatAxisMap:m0e}),cz={exports:{}};(function(e,t){(function(r,n){e.exports=n()})($d,function(){var r,n,u;function h(o,_){if(!r)r=_;else if(!n)n=_;else{var b="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+r+")(sharedChunk); ("+n+")(sharedChunk); self.onerror = null;",P={};r(P),u=_(P),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(u.workerUrl=window.URL.createObjectURL(new Blob([b],{type:"text/javascript"})))}}h(["exports"],function(o){var _=typeof self<"u"?self:{},b="2.15.0";let P;const S={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(P==null){const a=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{P={}.API_URL_REGEX!=null?new RegExp({}.API_URL_REGEX):a}catch{P=a}}return P},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!S.API_URL)return null;try{const a=new URL(S.API_URL);return a.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":a.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},C={supported:!1,testSupport:function(a){!j&&F&&(G?$(a):L=a)}};let L,F,j=!1,G=!1;function $(a){const i=a.createTexture();a.bindTexture(a.TEXTURE_2D,i);try{if(a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,F),a.isContextLost())return;C.supported=!0}catch{}a.deleteTexture(i),j=!0}_.document&&(F=_.document.createElement("img"),F.onload=function(){L&&$(L),L=null,G=!0},F.onerror=function(){j=!0,L=null},F.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const N="01";function U(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var J=q;function q(a,i,s,c){this.cx=3*a,this.bx=3*(s-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*i,this.by=3*(c-i)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=i,this.p2x=s,this.p2y=c}q.prototype={sampleCurveX:function(a){return((this.ax*a+this.bx)*a+this.cx)*a},sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},solveCurveX:function(a,i){if(i===void 0&&(i=1e-6),a<0)return 0;if(a>1)return 1;for(var s=a,c=0;c<8;c++){var d=this.sampleCurveX(s)-a;if(Math.abs(d)<i)return s;var g=this.sampleCurveDerivativeX(s);if(Math.abs(g)<1e-6)break;s-=d/g}var v=0,w=1;for(s=a,c=0;c<20&&(d=this.sampleCurveX(s),!(Math.abs(d-a)<i));c++)a>d?v=s:w=s,s=.5*(w-v)+v;return s},solve:function(a,i){return this.sampleCurveY(this.solveCurveX(a,i))}};var Y=U(J),X=ue;function ue(a,i){this.x=a,this.y=i}ue.prototype={clone:function(){return new ue(this.x,this.y)},add:function(a){return this.clone()._add(a)},sub:function(a){return this.clone()._sub(a)},multByPoint:function(a){return this.clone()._multByPoint(a)},divByPoint:function(a){return this.clone()._divByPoint(a)},mult:function(a){return this.clone()._mult(a)},div:function(a){return this.clone()._div(a)},rotate:function(a){return this.clone()._rotate(a)},rotateAround:function(a,i){return this.clone()._rotateAround(a,i)},matMult:function(a){return this.clone()._matMult(a)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(a){return this.x===a.x&&this.y===a.y},dist:function(a){return Math.sqrt(this.distSqr(a))},distSqr:function(a){var i=a.x-this.x,s=a.y-this.y;return i*i+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(a){return Math.atan2(this.y-a.y,this.x-a.x)},angleWith:function(a){return this.angleWithSep(a.x,a.y)},angleWithSep:function(a,i){return Math.atan2(this.x*i-this.y*a,this.x*a+this.y*i)},_matMult:function(a){var i=a[2]*this.x+a[3]*this.y;return this.x=a[0]*this.x+a[1]*this.y,this.y=i,this},_add:function(a){return this.x+=a.x,this.y+=a.y,this},_sub:function(a){return this.x-=a.x,this.y-=a.y,this},_mult:function(a){return this.x*=a,this.y*=a,this},_div:function(a){return this.x/=a,this.y/=a,this},_multByPoint:function(a){return this.x*=a.x,this.y*=a.y,this},_divByPoint:function(a){return this.x/=a.x,this.y/=a.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var a=this.y;return this.y=this.x,this.x=-a,this},_rotate:function(a){var i=Math.cos(a),s=Math.sin(a),c=s*this.x+i*this.y;return this.x=i*this.x-s*this.y,this.y=c,this},_rotateAround:function(a,i){var s=Math.cos(a),c=Math.sin(a),d=i.y+c*(this.x-i.x)+s*(this.y-i.y);return this.x=i.x+s*(this.x-i.x)-c*(this.y-i.y),this.y=d,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},ue.convert=function(a){return a instanceof ue?a:Array.isArray(a)?new ue(a[0],a[1]):a};var oe=U(X);const Re=Math.PI/180,ze=180/Math.PI;function De(a){return a*Re}function Je(a){return a*ze}const we=[[0,0],[1,0],[1,1],[0,1]];function ve(a){if(a<=0)return 0;if(a>=1)return 1;const i=a*a,s=i*a;return 4*(a<.5?s:3*(a-i)+s-.75)}function Ce(a,i,s,c){const d=new Y(a,i,s,c);return function(g){return d.solve(g)}}const Le=Ce(.25,.1,.25,1);function ge(a,i,s){return Math.min(s,Math.max(i,a))}function $e(a,i,s){return(s=ge((s-a)/(i-a),0,1))*s*(3-2*s)}function rt(a,i,s){const c=s-i,d=((a-i)%c+c)%c+i;return d===i?s:d}function ft(a,i,s){if(!a.length)return s(null,[]);let c=a.length;const d=new Array(a.length);let g=null;a.forEach((v,w)=>{i(v,(E,A)=>{E&&(g=E),d[w]=A,--c==0&&s(g,d)})})}function lt(a){const i=[];for(const s in a)i.push(a[s]);return i}function Tt(a,...i){for(const s of i)for(const c in s)a[c]=s[c];return a}let qt=1;function fr(){return qt++}function br(){return function a(i){return i?(i^Math.random()*(16>>i/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,a)}()}function Mr(a){return a<=1?1:Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))}function nn(a){return!!a&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(a)}function zt(a,i){a.forEach(s=>{i[s]&&(i[s]=i[s].bind(i))})}function rr(a,i){return a.indexOf(i,a.length-i.length)!==-1}function Lt(a,i,s){const c={};for(const d in a)c[d]=i.call(s||this,a[d],d,a);return c}function dt(a,i,s){const c={};for(const d in a)i.call(s||this,a[d],d,a)&&(c[d]=a[d]);return c}function pr(a){return Array.isArray(a)?a.map(pr):typeof a=="object"&&a?Lt(a,pr):a}const _r={};function hr(a){_r[a]||(typeof console<"u"&&console.warn(a),_r[a]=!0)}function Tr(a,i,s){return(s.y-a.y)*(i.x-a.x)>(i.y-a.y)*(s.x-a.x)}function kn(a){let i=0;for(let s,c,d=0,g=a.length,v=g-1;d<g;v=d++)s=a[d],c=a[v],i+=(c.x-s.x)*(s.y+c.y);return i}function Gn(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function vn(a){const i={};if(a.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,c,d,g)=>{const v=d||g;return i[c]=!v||v.toLowerCase(),""}),i["max-age"]){const s=parseInt(i["max-age"],10);isNaN(s)?delete i["max-age"]:i["max-age"]=s}return i}let po=null;function pi(a){if(po==null){const i=a.navigator?a.navigator.userAgent:null;po=!!a.safari||!(!i||!(/\b(iPad|iPhone|iPod)\b/.test(i)||i.match("Safari")&&!i.match("Chrome")))}return po}function Pi(a){try{const i=_[a];return i.setItem("_mapbox_test_",1),i.removeItem("_mapbox_test_"),!0}catch{return!1}}function Bi(a,i){return[a[4*i],a[4*i+1],a[4*i+2],a[4*i+3]]}const ii="mapbox-tiles";let to=500,Ds=50,mi,oi;function Ai(){try{return _.caches}catch{}}function ra(){Ai()&&!mi&&(mi=_.caches.open(ii))}function Lo(a){const i=a.indexOf("?");if(i<0)return a;const s=function(d){const g=d.indexOf("?");return g>0?d.slice(g+1).split("&"):[]}(a),c=s.filter(d=>{const g=d.split("=");return g[0]==="language"||g[0]==="worldview"});return c.length?`${a.slice(0,i)}?${c.join("&")}`:a.slice(0,i)}let Ls=1/0;const gi={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(gi);class zo extends Error{constructor(i,s,c){s===401&&Ve(c)&&(i+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(i),this.status=s,this.url=c}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const na=Gn()?()=>self.worker&&self.worker.referrer:()=>(_.location.protocol==="blob:"?_.parent:_).location.href,ia=function(a,i){if(!(/^file:/.test(s=a.url)||/^file:/.test(na())&&!/^\w+:/.test(s))){if(_.fetch&&_.Request&&_.AbortController&&_.Request.prototype.hasOwnProperty("signal"))return function(c,d){const g=new _.AbortController,v=new _.Request(c.url,{method:c.method||"GET",body:c.body,credentials:c.credentials,headers:c.headers,referrer:na(),referrerPolicy:c.referrerPolicy,signal:g.signal});let w=!1,E=!1;const A=(O=v.url).indexOf("sku=")>0&&Ve(O);var O;c.type==="json"&&v.headers.set("Accept","application/json");const D=(V,W,K)=>{if(E)return;if(V&&V.message!=="SecurityError"&&hr(V.toString()),W&&K)return z(W);const re=Date.now();_.fetch(v).then(he=>{if(he.ok){const xe=A?he.clone():null;return z(he,xe,re)}return d(new zo(he.statusText,he.status,c.url))}).catch(he=>{he.name!=="AbortError"&&d(new Error(`${he.message} ${c.url}`))})},z=(V,W,K)=>{(c.type==="arrayBuffer"?V.arrayBuffer():c.type==="json"?V.json():V.text()).then(re=>{E||(W&&K&&function(he,xe,fe){if(ra(),!mi)return;const _e={status:xe.status,statusText:xe.statusText,headers:new _.Headers};xe.headers.forEach((Ze,We)=>_e.headers.set(We,Ze));const Te=vn(xe.headers.get("Cache-Control")||"");if(Te["no-store"])return;Te["max-age"]&&_e.headers.set("Expires",new Date(fe+1e3*Te["max-age"]).toUTCString());const be=_e.headers.get("Expires");be&&(new Date(be).getTime()-fe<42e4||function(Ze,We){if(oi===void 0)try{new Response(new ReadableStream),oi=!0}catch{oi=!1}oi?We(Ze.body):Ze.blob().then(We)}(xe,Ze=>{const We=new _.Response(Ze,_e);ra(),mi&&mi.then(nt=>nt.put(Lo(he.url),We)).catch(nt=>hr(nt.message))}))}(v,W,K),w=!0,d(null,re,V.headers.get("Cache-Control"),V.headers.get("Expires")))}).catch(re=>{E||d(new Error(re.message))})};return A?function(V,W){if(ra(),!mi)return W(null);const K=Lo(V.url);mi.then(re=>{re.match(K).then(he=>{const xe=function(fe){if(!fe)return!1;const _e=new Date(fe.headers.get("Expires")||0),Te=vn(fe.headers.get("Cache-Control")||"");return _e>Date.now()&&!Te["no-cache"]}(he);re.delete(K),xe&&re.put(K,he.clone()),W(null,he,xe)}).catch(W)}).catch(W)}(v,D):D(null,null),{cancel:()=>{E=!0,w||g.abort()}}}(a,i);if(Gn()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",a,i,void 0,!0)}var s;return function(c,d){const g=new _.XMLHttpRequest;g.open(c.method||"GET",c.url,!0),c.type==="arrayBuffer"&&(g.responseType="arraybuffer");for(const v in c.headers)g.setRequestHeader(v,c.headers[v]);return c.type==="json"&&(g.responseType="text",g.setRequestHeader("Accept","application/json")),g.withCredentials=c.credentials==="include",g.onerror=()=>{d(new Error(g.statusText))},g.onload=()=>{if((g.status>=200&&g.status<300||g.status===0)&&g.response!==null){let v=g.response;if(c.type==="json")try{v=JSON.parse(g.response)}catch(w){return d(w)}d(null,v,g.getResponseHeader("Cache-Control"),g.getResponseHeader("Expires"))}else d(new zo(g.statusText,g.status,c.url))},g.send(c.body),{cancel:()=>g.abort()}}(a,i)},ls=function(a,i){return ia(Tt(a,{type:"arrayBuffer"}),i)};function zs(a){const i=_.document.createElement("a");return i.href=a,i.protocol===_.document.location.protocol&&i.host===_.document.location.host}const ye="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Q,ee;Q=[],ee=0;const me=function(a,i){if(C.supported&&(a.headers||(a.headers={}),a.headers.accept="image/webp,*/*"),ee>=S.MAX_PARALLEL_IMAGE_REQUESTS){const g={requestParameters:a,callback:i,cancelled:!1,cancel(){this.cancelled=!0}};return Q.push(g),g}ee++;let s=!1;const c=()=>{if(!s)for(s=!0,ee--;Q.length&&ee<S.MAX_PARALLEL_IMAGE_REQUESTS;){const g=Q.shift(),{requestParameters:v,callback:w,cancelled:E}=g;E||(g.cancel=me(v,w).cancel)}},d=ls(a,(g,v,w,E)=>{c(),g?i(g):v&&(_.createImageBitmap?function(A,O){const D=new _.Blob([new Uint8Array(A)],{type:"image/png"});_.createImageBitmap(D).then(z=>{O(null,z)}).catch(z=>{O(new Error(`Could not load image because of ${z.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(v,(A,O)=>i(A,O,w,E)):function(A,O){const D=new _.Image,z=_.URL;D.onload=()=>{O(null,D),z.revokeObjectURL(D.src),D.onload=null,_.requestAnimationFrame(()=>{D.src=ye})},D.onerror=()=>O(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const V=new _.Blob([new Uint8Array(A)],{type:"image/png"});D.src=A.byteLength?z.createObjectURL(V):ye}(v,(A,O)=>i(A,O,w,E)))});return{cancel:()=>{d.cancel(),c()}}},Se="NO_ACCESS_TOKEN";function ke(a){return a.indexOf("mapbox:")===0}function Ve(a){return S.API_URL_REGEX.test(a)}function Ue(a){return S.API_CDN_URL_REGEX.test(a)}function Oe(a){return S.API_STYLE_REGEX.test(a)&&!Xe(a)}function Xe(a){return S.API_SPRITE_REGEX.test(a)}const bt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function St(a){const i=a.match(bt);if(!i)throw new Error("Unable to parse URL object");return{protocol:i[1],authority:i[2],path:i[3]||"/",params:i[4]?i[4].split("&"):[]}}function le(a){const i=a.params.length?`?${a.params.join("&")}`:"";return`${a.protocol}://${a.authority}${a.path}${i}`}const Ie="mapbox.eventData";function je(a){if(!a)return null;const i=a.split(".");if(!i||i.length!==3)return null;try{return JSON.parse(decodeURIComponent(_.atob(i[1]).split("").map(s=>"%"+("00"+s.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class et{constructor(i){this.type=i,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(i){const s=je(S.ACCESS_TOKEN);let c="";return c=s&&s.u?_.btoa(encodeURIComponent(s.u).replace(/%([0-9A-F]{2})/g,(d,g)=>String.fromCharCode(+("0x"+g)))):S.ACCESS_TOKEN||"",i?`${Ie}.${i}:${c}`:`${Ie}:${c}`}fetchEventData(){const i=Pi("localStorage"),s=this.getStorageKey(),c=this.getStorageKey("uuid");if(i)try{const d=_.localStorage.getItem(s);d&&(this.eventData=JSON.parse(d));const g=_.localStorage.getItem(c);g&&(this.anonId=g)}catch{hr("Unable to read from LocalStorage")}}saveEventData(){const i=Pi("localStorage"),s=this.getStorageKey(),c=this.getStorageKey("uuid");if(i)try{_.localStorage.setItem(c,this.anonId),Object.keys(this.eventData).length>=1&&_.localStorage.setItem(s,JSON.stringify(this.eventData))}catch{hr("Unable to write to LocalStorage")}}processRequests(i){}postEvent(i,s,c,d){if(!S.EVENTS_URL)return;const g=St(S.EVENTS_URL);g.params.push(`access_token=${d||S.ACCESS_TOKEN||""}`);const v={event:this.type,created:new Date(i).toISOString()},w=s?Tt(v,s):v,E={url:le(g),headers:{"Content-Type":"text/plain"},body:JSON.stringify([w])};this.pendingRequest=function(A,O){return ia(Tt(A,{method:"POST"}),O)}(E,A=>{this.pendingRequest=null,c(A),this.saveEventData(),this.processRequests(d)})}queueRequest(i,s){this.queue.push(i),this.processRequests(s)}}const ht=new class extends et{constructor(a){super("appUserTurnstile"),this._customAccessToken=a}postTurnstileEvent(a,i){S.EVENTS_URL&&S.ACCESS_TOKEN&&Array.isArray(a)&&a.some(s=>ke(s)||Ve(s))&&this.queueRequest(Date.now(),i)}processRequests(a){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const i=je(S.ACCESS_TOKEN),s=i?i.u:S.ACCESS_TOKEN;let c=s!==this.eventData.tokenU;nn(this.anonId)||(this.anonId=br(),c=!0);const d=this.queue.shift();if(this.eventData.lastSuccess){const g=new Date(this.eventData.lastSuccess),v=new Date(d),w=(d-this.eventData.lastSuccess)/864e5;c=c||w>=1||w<-1||g.getDate()!==v.getDate()}else c=!0;c?this.postEvent(d,{sdkIdentifier:"mapbox-gl-js",sdkVersion:b,skuId:N,"enabled.telemetry":!1,userId:this.anonId},g=>{g||(this.eventData.lastSuccess=d,this.eventData.tokenU=s)},a):this.processRequests()}},Et=ht.postTurnstileEvent.bind(ht),Nt=new class extends et{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(a,i,s,c){this.skuToken=i,this.errorCb=c,S.EVENTS_URL&&(s||S.ACCESS_TOKEN?this.queueRequest({id:a,timestamp:Date.now()},s):this.errorCb(new Error(Se)))}processRequests(a){if(this.pendingRequest||this.queue.length===0)return;const{id:i,timestamp:s}=this.queue.shift();i&&this.success[i]||(this.anonId||this.fetchEventData(),nn(this.anonId)||(this.anonId=br()),this.postEvent(s,{sdkIdentifier:"mapbox-gl-js",sdkVersion:b,skuId:N,skuToken:this.skuToken,userId:this.anonId},c=>{c?this.errorCb(c):i&&(this.success[i]=!0)},a))}},kt=Nt.postMapLoadEvent.bind(Nt),Ft=new class extends et{constructor(){super("gljs.performance")}postPerformanceEvent(a,i){S.EVENTS_URL&&(a||S.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:i},a)}processRequests(a){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:i,performanceData:s}=this.queue.shift(),c=function(d){const g=_.performance.getEntriesByType("resource"),v=_.performance.getEntriesByType("mark"),w=function(z){const V={};if(z){for(const W in z)if(W!=="other")for(const K of z[W]){const re=`${W}ResolveRangeMin`,he=`${W}ResolveRangeMax`,xe=`${W}RequestCount`,fe=`${W}RequestCachedCount`;V[re]=Math.min(V[re]||1/0,K.startTime),V[he]=Math.max(V[he]||-1/0,K.responseEnd);const _e=Te=>{V[Te]===void 0&&(V[Te]=0),++V[Te]};K.transferSize!==void 0&&K.transferSize===0&&_e(fe),_e(xe)}}return V}(function(z,V){const W={};if(z)for(const K of z){const re=V(K);W[re]===void 0&&(W[re]=[]),W[re].push(K)}return W}(g,Dr)),E=_.devicePixelRatio,A=_.navigator.connection||_.navigator.mozConnection||_.navigator.webkitConnection,O={counters:[],metadata:[],attributes:[]},D=(z,V,W)=>{W!=null&&z.push({name:V,value:W.toString()})};for(const z in w)D(O.counters,z,w[z]);if(d.interactionRange[0]!==1/0&&d.interactionRange[1]!==-1/0&&(D(O.counters,"interactionRangeMin",d.interactionRange[0]),D(O.counters,"interactionRangeMax",d.interactionRange[1])),v)for(const z of Object.keys(mn)){const V=mn[z],W=v.find(K=>K.name===V);W&&D(O.counters,V,W.startTime)}return D(O.counters,"visibilityHidden",d.visibilityHidden),D(O.attributes,"style",function(z){if(z)for(const V of z){const W=V.name.split("?")[0];if(Oe(W)){const K=W.split("/").slice(-2);if(K.length===2)return`mapbox://styles/${K[0]}/${K[1]}`}}}(g)),D(O.attributes,"terrainEnabled",d.terrainEnabled?"true":"false"),D(O.attributes,"fogEnabled",d.fogEnabled?"true":"false"),D(O.attributes,"projection",d.projection),D(O.attributes,"zoom",d.zoom),D(O.metadata,"devicePixelRatio",E),D(O.metadata,"connectionEffectiveType",A?A.effectiveType:void 0),D(O.metadata,"navigatorUserAgent",_.navigator.userAgent),D(O.metadata,"screenWidth",_.screen.width),D(O.metadata,"screenHeight",_.screen.height),D(O.metadata,"windowWidth",_.innerWidth),D(O.metadata,"windowHeight",_.innerHeight),D(O.metadata,"mapWidth",d.width/E),D(O.metadata,"mapHeight",d.height/E),D(O.metadata,"webglRenderer",d.renderer),D(O.metadata,"webglVendor",d.vendor),D(O.metadata,"sdkVersion",b),D(O.metadata,"sdkIdentifier","mapbox-gl-js"),O}(s);for(const d of c.metadata);for(const d of c.counters);for(const d of c.attributes);this.postEvent(i,c,()=>{},a)}},Ot=Ft.postPerformanceEvent.bind(Ft),Vt=new class extends et{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(a,i,s,c){if(!S.API_URL||!S.SESSION_PATH)return;const d=St(S.API_URL+S.SESSION_PATH);d.params.push(`sku=${i||""}`),d.params.push(`access_token=${c||S.ACCESS_TOKEN||""}`);const g={url:le(d),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(v,w){return ia(Tt(v,{method:"GET"}),w)}(g,v=>{this.pendingRequest=null,s(v),this.saveEventData(),this.processRequests(c)})}getSessionAPI(a,i,s,c){this.skuToken=i,this.errorCb=c,S.SESSION_PATH&&S.API_URL&&(s||S.ACCESS_TOKEN?this.queueRequest({id:a,timestamp:Date.now()},s):this.errorCb(new Error(Se)))}processRequests(a){if(this.pendingRequest||this.queue.length===0)return;const{id:i,timestamp:s}=this.queue.shift();i&&this.success[i]||this.getSession(s,this.skuToken,c=>{c?this.errorCb(c):i&&(this.success[i]=!0)},a)}},Jt=Vt.getSessionAPI.bind(Vt),nr=new Set,mn={create:"create",load:"load",fullLoad:"fullLoad"},Jr={mark(a){_.performance.mark(a)},measure(a,i,s){_.performance.measure(a,i,s)}};function Dr(a){const i=a.name.split("?")[0];return Ue(i)&&i.includes("mapbox-gl.js")?"javascript":Ue(i)&&i.includes("mapbox-gl.css")?"css":function(s){return S.API_FONTS_REGEX.test(s)}(i)?"fontRange":Xe(i)?"sprite":Oe(i)?"style":function(s){return S.API_TILEJSON_REGEX.test(s)}(i)?"tilejson":"other"}const er=_.performance;function oa(a){const i=a?a.url.toString():void 0;return er.getEntriesByName(i)}let Ro,ro,Mi,Fi;const Ci={now:()=>Mi!==void 0?Mi:_.performance.now(),setNow(a){Mi=a},restoreNow(){Mi=void 0},frame(a){const i=_.requestAnimationFrame(a);return{cancel:()=>_.cancelAnimationFrame(i)}},getImageData(a,i=0){const{width:s,height:c}=a;Fi||(Fi=_.document.createElement("canvas"));const d=Fi.getContext("2d",{willReadFrequently:!0});if(!d)throw new Error("failed to create canvas 2d context");return(s>Fi.width||c>Fi.height)&&(Fi.width=s,Fi.height=c),d.clearRect(-i,-i,s+2*i,c+2*i),d.drawImage(a,0,0,s,c),d.getImageData(-i,-i,s+2*i,c+2*i)},resolveURL:a=>(Ro||(Ro=_.document.createElement("a")),Ro.href=a,Ro.href),get devicePixelRatio(){return _.devicePixelRatio},get prefersReducedMotion(){return!!_.matchMedia&&(ro==null&&(ro=_.matchMedia("(prefers-reduced-motion: reduce)")),ro.matches)}};function Bo(a,i,s){s[a]&&s[a].indexOf(i)!==-1||(s[a]=s[a]||[],s[a].push(i))}function us(a,i,s){if(s&&s[a]){const c=s[a].indexOf(i);c!==-1&&s[a].splice(c,1)}}class mo{constructor(i,s={}){Tt(this,s),this.type=i}}class vr extends mo{constructor(i,s={}){super("error",Tt({error:i},s))}}class Qr{on(i,s){return this._listeners=this._listeners||{},Bo(i,s,this._listeners),this}off(i,s){return us(i,s,this._listeners),us(i,s,this._oneTimeListeners),this}once(i,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},Bo(i,s,this._oneTimeListeners),this):new Promise(c=>this.once(i,c))}fire(i,s){typeof i=="string"&&(i=new mo(i,s||{}));const c=i.type;if(this.listens(c)){i.target=this;const d=this._listeners&&this._listeners[c]?this._listeners[c].slice():[];for(const w of d)w.call(this,i);const g=this._oneTimeListeners&&this._oneTimeListeners[c]?this._oneTimeListeners[c].slice():[];for(const w of g)us(c,w,this._oneTimeListeners),w.call(this,i);const v=this._eventedParent;v&&(Tt(i,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),v.fire(i))}else i instanceof vr&&console.error(i.error);return this}listens(i){return!!(this._listeners&&this._listeners[i]&&this._listeners[i].length>0||this._oneTimeListeners&&this._oneTimeListeners[i]&&this._oneTimeListeners[i].length>0||this._eventedParent&&this._eventedParent.listens(i))}setEventedParent(i,s){return this._eventedParent=i,this._eventedParentData=s,this}}var Qe=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"requires":["fill-extrusion-edge-radius"],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function Ii(a,...i){for(const s of i)for(const c in s)a[c]=s[c];return a}function xr(a){return a instanceof Number||a instanceof String||a instanceof Boolean?a.valueOf():a}function fn(a){if(Array.isArray(a))return a.map(fn);if(a instanceof Object&&!(a instanceof Number||a instanceof String||a instanceof Boolean)){const i={};for(const s in a)i[s]=fn(a[s]);return i}return xr(a)}class Ru extends Error{constructor(i,s){super(s),this.message=s,this.key=i}}var go=Ru;class Gf{constructor(i,s=[]){this.parent=i,this.bindings={};for(const[c,d]of s)this.bindings[c]=d}concat(i){return new Gf(this,i)}get(i){if(this.bindings[i])return this.bindings[i];if(this.parent)return this.parent.get(i);throw new Error(`${i} not found in scope.`)}has(i){return!!this.bindings[i]||!!this.parent&&this.parent.has(i)}}var M2=Gf;const El={kind:"null"},It={kind:"number"},wr={kind:"string"},mr={kind:"boolean"},no={kind:"color"},Fo={kind:"object"},gr={kind:"value"},io={kind:"collator"},Bu={kind:"formatted"},Rs={kind:"resolvedImage"};function yo(a,i){return{kind:"array",itemType:a,N:i}}function un(a){if(a.kind==="array"){const i=un(a.itemType);return typeof a.N=="number"?`array<${i}, ${a.N}>`:a.itemType.kind==="value"?"array":`array<${i}>`}return a.kind}const C2=[El,It,wr,mr,no,Bu,Fo,yo(gr),Rs];function Ia(a,i){if(i.kind==="error")return null;if(a.kind==="array"){if(i.kind==="array"&&(i.N===0&&i.itemType.kind==="value"||!Ia(a.itemType,i.itemType))&&(typeof a.N!="number"||a.N===i.N))return null}else{if(a.kind===i.kind)return null;if(a.kind==="value"){for(const s of C2)if(!Ia(s,i))return null}}return`Expected ${un(a)} but found ${un(i)} instead.`}function Fu(a,i){return i.some(s=>s.kind===a.kind)}function ju(a,i){return i.some(s=>s==="null"?a===null:s==="array"?Array.isArray(a):s==="object"?a&&!Array.isArray(a)&&typeof a=="object":s===typeof a)}var Wf,I2={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function $u(a){return(a=Math.round(a))<0?0:a>255?255:a}function Nu(a){return $u(a[a.length-1]==="%"?parseFloat(a)/100*255:parseInt(a))}function u1(a){return(i=a[a.length-1]==="%"?parseFloat(a)/100:parseFloat(a))<0?0:i>1?1:i;var i}function Pl(a,i,s){return s<0?s+=1:s>1&&(s-=1),6*s<1?a+(i-a)*s*6:2*s<1?i:3*s<2?a+(i-a)*(2/3-s)*6:a}try{Wf={}.parseCSSColor=function(a){var i,s=a.replace(/ /g,"").toLowerCase();if(s in I2)return I2[s].slice();if(s[0]==="#")return s.length===4?(i=parseInt(s.substr(1),16))>=0&&i<=4095?[(3840&i)>>4|(3840&i)>>8,240&i|(240&i)>>4,15&i|(15&i)<<4,1]:null:s.length===7&&(i=parseInt(s.substr(1),16))>=0&&i<=16777215?[(16711680&i)>>16,(65280&i)>>8,255&i,1]:null;var c=s.indexOf("("),d=s.indexOf(")");if(c!==-1&&d+1===s.length){var g=s.substr(0,c),v=s.substr(c+1,d-(c+1)).split(","),w=1;switch(g){case"rgba":if(v.length!==4)return null;w=u1(v.pop());case"rgb":return v.length!==3?null:[Nu(v[0]),Nu(v[1]),Nu(v[2]),w];case"hsla":if(v.length!==4)return null;w=u1(v.pop());case"hsl":if(v.length!==3)return null;var E=(parseFloat(v[0])%360+360)%360/360,A=u1(v[1]),O=u1(v[2]),D=O<=.5?O*(A+1):O+A-O*A,z=2*O-D;return[$u(255*Pl(z,D,E+1/3)),$u(255*Pl(z,D,E)),$u(255*Pl(z,D,E-1/3)),w];default:return null}}return null}}catch{}class ji{constructor(i,s,c,d=1){this.r=i,this.g=s,this.b=c,this.a=d}static parse(i){if(!i)return;if(i instanceof ji)return i;if(typeof i!="string")return;const s=Wf(i);return s?new ji(s[0]/255*s[3],s[1]/255*s[3],s[2]/255*s[3],s[3]):void 0}toString(){const[i,s,c,d]=this.toArray();return`rgba(${Math.round(i)},${Math.round(s)},${Math.round(c)},${d})`}toArray(){const{r:i,g:s,b:c,a:d}=this;return d===0?[0,0,0,0]:[255*i/d,255*s/d,255*c/d,d]}toArray01(){const{r:i,g:s,b:c,a:d}=this;return d===0?[0,0,0,0]:[i/d,s/d,c/d,d]}toArray01PremultipliedAlpha(){const{r:i,g:s,b:c,a:d}=this;return[i,s,c,d]}}ji.black=new ji(0,0,0,1),ji.white=new ji(1,1,1,1),ji.transparent=new ji(0,0,0,0),ji.red=new ji(1,0,0,1),ji.blue=new ji(0,0,1,1);var Pn=ji;class qf{constructor(i,s,c){this.sensitivity=i?s?"variant":"case":s?"accent":"base",this.locale=c,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(i,s){return this.collator.compare(i,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Hf{constructor(i,s,c,d,g){this.text=i.normalize?i.normalize():i,this.image=s,this.scale=c,this.fontStack=d,this.textColor=g}}class $i{constructor(i){this.sections=i}static fromString(i){return new $i([new Hf(i,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(i=>i.text.length!==0||i.image&&i.image.name.length!==0)}static factory(i){return i instanceof $i?i:$i.fromString(i)}toString(){return this.sections.length===0?"":this.sections.map(i=>i.text).join("")}serialize(){const i=["format"];for(const s of this.sections){if(s.image){i.push(["image",s.image.name]);continue}i.push(s.text);const c={};s.fontStack&&(c["text-font"]=["literal",s.fontStack.split(",")]),s.scale&&(c["font-scale"]=s.scale),s.textColor&&(c["text-color"]=["rgba"].concat(s.textColor.toArray())),i.push(c)}return i}}class _o{constructor(i){this.name=i.name,this.available=i.available}toString(){return this.name}static fromString(i){return i?new _o({name:i,available:!1}):null}serialize(){return["image",this.name]}}function O2(a,i,s,c){return typeof a=="number"&&a>=0&&a<=255&&typeof i=="number"&&i>=0&&i<=255&&typeof s=="number"&&s>=0&&s<=255?c===void 0||typeof c=="number"&&c>=0&&c<=1?null:`Invalid rgba value [${[a,i,s,c].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof c=="number"?[a,i,s,c]:[a,i,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Uu(a){if(a===null||typeof a=="string"||typeof a=="boolean"||typeof a=="number"||a instanceof Pn||a instanceof qf||a instanceof $i||a instanceof _o)return!0;if(Array.isArray(a)){for(const i of a)if(!Uu(i))return!1;return!0}if(typeof a=="object"){for(const i in a)if(!Uu(a[i]))return!1;return!0}return!1}function xn(a){if(a===null)return El;if(typeof a=="string")return wr;if(typeof a=="boolean")return mr;if(typeof a=="number")return It;if(a instanceof Pn)return no;if(a instanceof qf)return io;if(a instanceof $i)return Bu;if(a instanceof _o)return Rs;if(Array.isArray(a)){const i=a.length;let s;for(const c of a){const d=xn(c);if(s){if(s===d)continue;s=gr;break}s=d}return yo(s||gr,i)}return Fo}function Vu(a){const i=typeof a;return a===null?"":i==="string"||i==="number"||i==="boolean"?String(a):a instanceof Pn||a instanceof $i||a instanceof _o?a.toString():JSON.stringify(a)}class Zf{constructor(i,s){this.type=i,this.value=s}static parse(i,s){if(i.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${i.length-1} instead.`);if(!Uu(i[1]))return s.error("invalid value");const c=i[1];let d=xn(c);const g=s.expectedType;return d.kind!=="array"||d.N!==0||!g||g.kind!=="array"||typeof g.N=="number"&&g.N!==0||(d=g),new Zf(d,c)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Pn?["rgba"].concat(this.value.toArray()):this.value instanceof $i?this.value.serialize():this.value}}var Bs=Zf,ai=class{constructor(a){this.name="ExpressionEvaluationError",this.message=a}toJSON(){return this.message}};const Xf={string:wr,number:It,boolean:mr,object:Fo};class Kf{constructor(i,s){this.type=i,this.args=s}static parse(i,s){if(i.length<2)return s.error("Expected at least one argument.");let c,d=1;const g=i[0];if(g==="array"){let w,E;if(i.length>2){const A=i[1];if(typeof A!="string"||!(A in Xf)||A==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);w=Xf[A],d++}else w=gr;if(i.length>3){if(i[2]!==null&&(typeof i[2]!="number"||i[2]<0||i[2]!==Math.floor(i[2])))return s.error('The length argument to "array" must be a positive integer literal',2);E=i[2],d++}c=yo(w,E)}else c=Xf[g];const v=[];for(;d<i.length;d++){const w=s.parse(i[d],d,gr);if(!w)return null;v.push(w)}return new Kf(c,v)}evaluate(i){for(let s=0;s<this.args.length;s++){const c=this.args[s].evaluate(i);if(!Ia(this.type,xn(c)))return c;if(s===this.args.length-1)throw new ai(`Expected value to be of type ${un(this.type)}, but found ${un(xn(c))} instead.`)}return null}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){const i=this.type,s=[i.kind];if(i.kind==="array"){const c=i.itemType;if(c.kind==="string"||c.kind==="number"||c.kind==="boolean"){s.push(c.kind);const d=i.N;(typeof d=="number"||this.args.length>1)&&s.push(d)}}return s.concat(this.args.map(c=>c.serialize()))}}var Oa=Kf;class cs{constructor(i){this.type=Bu,this.sections=i}static parse(i,s){if(i.length<2)return s.error("Expected at least one argument.");const c=i[1];if(!Array.isArray(c)&&typeof c=="object")return s.error("First argument must be an image or text section.");const d=[];let g=!1;for(let v=1;v<=i.length-1;++v){const w=i[v];if(g&&typeof w=="object"&&!Array.isArray(w)){g=!1;let E=null;if(w["font-scale"]&&(E=s.parse(w["font-scale"],1,It),!E))return null;let A=null;if(w["text-font"]&&(A=s.parse(w["text-font"],1,yo(wr)),!A))return null;let O=null;if(w["text-color"]&&(O=s.parse(w["text-color"],1,no),!O))return null;const D=d[d.length-1];D.scale=E,D.font=A,D.textColor=O}else{const E=s.parse(i[v],1,gr);if(!E)return null;const A=E.type.kind;if(A!=="string"&&A!=="value"&&A!=="null"&&A!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");g=!0,d.push({content:E,scale:null,font:null,textColor:null})}}return new cs(d)}evaluate(i){return new $i(this.sections.map(s=>{const c=s.content.evaluate(i);return xn(c)===Rs?new Hf("",c,null,null,null):new Hf(Vu(c),null,s.scale?s.scale.evaluate(i):null,s.font?s.font.evaluate(i).join(","):null,s.textColor?s.textColor.evaluate(i):null)}))}eachChild(i){for(const s of this.sections)i(s.content),s.scale&&i(s.scale),s.font&&i(s.font),s.textColor&&i(s.textColor)}outputDefined(){return!1}serialize(){const i=["format"];for(const s of this.sections){i.push(s.content.serialize());const c={};s.scale&&(c["font-scale"]=s.scale.serialize()),s.font&&(c["text-font"]=s.font.serialize()),s.textColor&&(c["text-color"]=s.textColor.serialize()),i.push(c)}return i}}class c1{constructor(i){this.type=Rs,this.input=i}static parse(i,s){if(i.length!==2)return s.error("Expected two arguments.");const c=s.parse(i[1],1,wr);return c?new c1(c):s.error("No image name provided.")}evaluate(i){const s=this.input.evaluate(i),c=_o.fromString(s);return c&&i.availableImages&&(c.available=i.availableImages.indexOf(s)>-1),c}eachChild(i){i(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const jm={"to-boolean":mr,"to-color":no,"to-number":It,"to-string":wr};class Yf{constructor(i,s){this.type=i,this.args=s}static parse(i,s){if(i.length<2)return s.error("Expected at least one argument.");const c=i[0];if((c==="to-boolean"||c==="to-string")&&i.length!==2)return s.error("Expected one argument.");const d=jm[c],g=[];for(let v=1;v<i.length;v++){const w=s.parse(i[v],v,gr);if(!w)return null;g.push(w)}return new Yf(d,g)}evaluate(i){if(this.type.kind==="boolean")return!!this.args[0].evaluate(i);if(this.type.kind==="color"){let s,c;for(const d of this.args){if(s=d.evaluate(i),c=null,s instanceof Pn)return s;if(typeof s=="string"){const g=i.parseColor(s);if(g)return g}else if(Array.isArray(s)&&(c=s.length<3||s.length>4?`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:O2(s[0],s[1],s[2],s[3]),!c))return new Pn(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new ai(c||`Could not parse color from value '${typeof s=="string"?s:String(JSON.stringify(s))}'`)}if(this.type.kind==="number"){let s=null;for(const c of this.args){if(s=c.evaluate(i),s===null)return 0;const d=Number(s);if(!isNaN(d))return d}throw new ai(`Could not convert ${JSON.stringify(s)} to number.`)}return this.type.kind==="formatted"?$i.fromString(Vu(this.args[0].evaluate(i))):this.type.kind==="resolvedImage"?_o.fromString(Vu(this.args[0].evaluate(i))):Vu(this.args[0].evaluate(i))}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){if(this.type.kind==="formatted")return new cs([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new c1(this.args[0]).serialize();const i=[`to-${this.type.kind}`];return this.eachChild(s=>{i.push(s.serialize())}),i}}var Al=Yf;const aa=["Unknown","Point","LineString","Polygon"];var Jf=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?aa[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const a=this.featureDistanceData.center,i=this.featureDistanceData.scale,{x:s,y:c}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(s*i-a[0])+this.featureDistanceData.bearing[1]*(c*i-a[1])}return 0}parseColor(a){let i=this._parseColorCache[a];return i||(i=this._parseColorCache[a]=Pn.parse(a)),i}};class Fs{constructor(i,s,c,d){this.name=i,this.type=s,this._evaluate=c,this.args=d}evaluate(i){return this._evaluate(i,this.args)}eachChild(i){this.args.forEach(i)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(i=>i.serialize()))}static parse(i,s){const c=i[0],d=Fs.definitions[c];if(!d)return s.error(`Unknown expression "${c}". If you wanted a literal array, use ["literal", [...]].`,0);const g=Array.isArray(d)?d[0]:d.type,v=Array.isArray(d)?[[d[1],d[2]]]:d.overloads,w=v.filter(([A])=>!Array.isArray(A)||A.length===i.length-1);let E=null;for(const[A,O]of w){E=new i0(s.registry,s.path,null,s.scope);const D=[];let z=!1;for(let V=1;V<i.length;V++){const W=i[V],K=Array.isArray(A)?A[V-1]:A.type,re=E.parse(W,1+D.length,K);if(!re){z=!0;break}D.push(re)}if(!z)if(Array.isArray(A)&&A.length!==D.length)E.error(`Expected ${A.length} arguments, but found ${D.length} instead.`);else{for(let V=0;V<D.length;V++){const W=Array.isArray(A)?A[V]:A.type,K=D[V];E.concat(V+1).checkSubtype(W,K.type)}if(E.errors.length===0)return new Fs(c,g,O,D)}}if(w.length===1)s.errors.push(...E.errors);else{const A=(w.length?w:v).map(([D])=>{return z=D,Array.isArray(z)?`(${z.map(un).join(", ")})`:`(${un(z.type)}...)`;var z}).join(" | "),O=[];for(let D=1;D<i.length;D++){const z=s.parse(i[D],1+O.length);if(!z)return null;O.push(un(z.type))}s.error(`Expected arguments of type ${A}, but found (${O.join(", ")}) instead.`)}return null}static register(i,s){Fs.definitions=s;for(const c in s)i[c]=Fs}}var ka=Fs;class Gu{constructor(i,s,c){this.type=io,this.locale=c,this.caseSensitive=i,this.diacriticSensitive=s}static parse(i,s){if(i.length!==2)return s.error("Expected one argument.");const c=i[1];if(typeof c!="object"||Array.isArray(c))return s.error("Collator options argument must be an object.");const d=s.parse(c["case-sensitive"]!==void 0&&c["case-sensitive"],1,mr);if(!d)return null;const g=s.parse(c["diacritic-sensitive"]!==void 0&&c["diacritic-sensitive"],1,mr);if(!g)return null;let v=null;return c.locale&&(v=s.parse(c.locale,1,wr),!v)?null:new Gu(d,g,v)}evaluate(i){return new qf(this.caseSensitive.evaluate(i),this.diacriticSensitive.evaluate(i),this.locale?this.locale.evaluate(i):null)}eachChild(i){i(this.caseSensitive),i(this.diacriticSensitive),this.locale&&i(this.locale)}outputDefined(){return!1}serialize(){const i={};return i["case-sensitive"]=this.caseSensitive.serialize(),i["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(i.locale=this.locale.serialize()),["collator",i]}}const Da=8192;function h1(a,i){a[0]=Math.min(a[0],i[0]),a[1]=Math.min(a[1],i[1]),a[2]=Math.max(a[2],i[0]),a[3]=Math.max(a[3],i[1])}function Ml(a,i){return!(a[0]<=i[0]||a[2]>=i[2]||a[1]<=i[1]||a[3]>=i[3])}function Wu(a,i){const s=(180+a[0])/360,c=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a[1]*Math.PI/360)))/360,d=Math.pow(2,i.z);return[Math.round(s*d*Da),Math.round(c*d*Da)]}function k2(a,i,s){const c=a[0]-i[0],d=a[1]-i[1],g=a[0]-s[0],v=a[1]-s[1];return c*v-g*d==0&&c*g<=0&&d*v<=0}function f1(a,i){let s=!1;for(let v=0,w=i.length;v<w;v++){const E=i[v];for(let A=0,O=E.length;A<O-1;A++){if(k2(a,E[A],E[A+1]))return!1;(d=E[A])[1]>(c=a)[1]!=(g=E[A+1])[1]>c[1]&&c[0]<(g[0]-d[0])*(c[1]-d[1])/(g[1]-d[1])+d[0]&&(s=!s)}}var c,d,g;return s}function Qf(a,i){for(let s=0;s<i.length;s++)if(f1(a,i[s]))return!0;return!1}function e0(a,i,s,c){const d=c[0]-s[0],g=c[1]-s[1],v=(a[0]-s[0])*g-d*(a[1]-s[1]),w=(i[0]-s[0])*g-d*(i[1]-s[1]);return v>0&&w<0||v<0&&w>0}function Cl(a,i,s){for(const A of s)for(let O=0;O<A.length-1;++O)if((w=[(v=A[O+1])[0]-(g=A[O])[0],v[1]-g[1]])[0]*(E=[(d=i)[0]-(c=a)[0],d[1]-c[1]])[1]-w[1]*E[0]!=0&&e0(c,d,g,v)&&e0(g,v,c,d))return!0;var c,d,g,v,w,E;return!1}function Lr(a,i){for(let s=0;s<a.length;++s)if(!f1(a[s],i))return!1;for(let s=0;s<a.length-1;++s)if(Cl(a[s],a[s+1],i))return!1;return!0}function $m(a,i){for(let s=0;s<i.length;s++)if(Lr(a,i[s]))return!0;return!1}function t0(a,i,s){const c=[];for(let d=0;d<a.length;d++){const g=[];for(let v=0;v<a[d].length;v++){const w=Wu(a[d][v],s);h1(i,w),g.push(w)}c.push(g)}return c}function D2(a,i,s){const c=[];for(let d=0;d<a.length;d++){const g=t0(a[d],i,s);c.push(g)}return c}function r0(a,i,s,c){if(a[0]<s[0]||a[0]>s[2]){const d=.5*c;let g=a[0]-s[0]>d?-c:s[0]-a[0]>d?c:0;g===0&&(g=a[0]-s[2]>d?-c:s[2]-a[0]>d?c:0),a[0]+=g}h1(i,a)}function L2(a,i,s,c){const d=Math.pow(2,c.z)*Da,g=[c.x*Da,c.y*Da],v=[];if(!a)return v;for(const w of a)for(const E of w){const A=[E.x+g[0],E.y+g[1]];r0(A,i,s,d),v.push(A)}return v}function n0(a,i,s,c){const d=Math.pow(2,c.z)*Da,g=[c.x*Da,c.y*Da],v=[];if(!a)return v;for(const E of a){const A=[];for(const O of E){const D=[O.x+g[0],O.y+g[1]];h1(i,D),A.push(D)}v.push(A)}if(i[2]-i[0]<=d/2){(w=i)[0]=w[1]=1/0,w[2]=w[3]=-1/0;for(const E of v)for(const A of E)r0(A,i,s,d)}var w;return v}class Il{constructor(i,s){this.type=mr,this.geojson=i,this.geometries=s}static parse(i,s){if(i.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${i.length-1} instead.`);if(Uu(i[1])){const c=i[1];if(c.type==="FeatureCollection")for(let d=0;d<c.features.length;++d){const g=c.features[d].geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new Il(c,c.features[d].geometry)}else if(c.type==="Feature"){const d=c.geometry.type;if(d==="Polygon"||d==="MultiPolygon")return new Il(c,c.geometry)}else if(c.type==="Polygon"||c.type==="MultiPolygon")return new Il(c,c)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return function(s,c){const d=[1/0,1/0,-1/0,-1/0],g=[1/0,1/0,-1/0,-1/0],v=s.canonicalID();if(!v)return!1;if(c.type==="Polygon"){const w=t0(c.coordinates,g,v),E=L2(s.geometry(),d,g,v);if(!Ml(d,g))return!1;for(const A of E)if(!f1(A,w))return!1}if(c.type==="MultiPolygon"){const w=D2(c.coordinates,g,v),E=L2(s.geometry(),d,g,v);if(!Ml(d,g))return!1;for(const A of E)if(!Qf(A,w))return!1}return!0}(i,this.geometries);if(i.geometryType()==="LineString")return function(s,c){const d=[1/0,1/0,-1/0,-1/0],g=[1/0,1/0,-1/0,-1/0],v=s.canonicalID();if(!v)return!1;if(c.type==="Polygon"){const w=t0(c.coordinates,g,v),E=n0(s.geometry(),d,g,v);if(!Ml(d,g))return!1;for(const A of E)if(!Lr(A,w))return!1}if(c.type==="MultiPolygon"){const w=D2(c.coordinates,g,v),E=n0(s.geometry(),d,g,v);if(!Ml(d,g))return!1;for(const A of E)if(!$m(A,w))return!1}return!0}(i,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var d1=Il;function Ol(a){if(a instanceof ka&&(a.name==="get"&&a.args.length===1||a.name==="feature-state"||a.name==="has"&&a.args.length===1||a.name==="properties"||a.name==="geometry-type"||a.name==="id"||/^filter-/.test(a.name))||a instanceof d1)return!1;let i=!0;return a.eachChild(s=>{i&&!Ol(s)&&(i=!1)}),i}function La(a){if(a instanceof ka&&a.name==="feature-state")return!1;let i=!0;return a.eachChild(s=>{i&&!La(s)&&(i=!1)}),i}function js(a,i){if(a instanceof ka&&i.indexOf(a.name)>=0)return!1;let s=!0;return a.eachChild(c=>{s&&!js(c,i)&&(s=!1)}),s}class p1{constructor(i,s){this.type=s.type,this.name=i,this.boundExpression=s}static parse(i,s){if(i.length!==2||typeof i[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const c=i[1];return s.scope.has(c)?new p1(c,s.scope.get(c)):s.error(`Unknown variable "${c}". Make sure "${c}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(i){return this.boundExpression.evaluate(i)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var z2=p1;class qu{constructor(i,s=[],c,d=new M2,g=[]){this.registry=i,this.path=s,this.key=s.map(v=>`[${v}]`).join(""),this.scope=d,this.errors=g,this.expectedType=c}parse(i,s,c,d,g={}){return s?this.concat(s,c,d)._parse(i,g):this._parse(i,g)}_parse(i,s){function c(d,g,v){return v==="assert"?new Oa(g,[d]):v==="coerce"?new Al(g,[d]):d}if(i!==null&&typeof i!="string"&&typeof i!="boolean"&&typeof i!="number"||(i=["literal",i]),Array.isArray(i)){if(i.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const d=i[0];if(typeof d!="string")return this.error(`Expression name must be a string, but found ${typeof d} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const g=this.registry[d];if(g){let v=g.parse(i,this);if(!v)return null;if(this.expectedType){const w=this.expectedType,E=v.type;if(w.kind!=="string"&&w.kind!=="number"&&w.kind!=="boolean"&&w.kind!=="object"&&w.kind!=="array"||E.kind!=="value")if(w.kind!=="color"&&w.kind!=="formatted"&&w.kind!=="resolvedImage"||E.kind!=="value"&&E.kind!=="string"){if(this.checkSubtype(w,E))return null}else v=c(v,w,s.typeAnnotation||"coerce");else v=c(v,w,s.typeAnnotation||"assert")}if(!(v instanceof Bs)&&v.type.kind!=="resolvedImage"&&o0(v)){const w=new Jf;try{v=new Bs(v.type,v.evaluate(w))}catch(E){return this.error(E.message),null}}return v}return this.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(i===void 0?"'undefined' value invalid. Use null instead.":typeof i=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof i} instead.`)}concat(i,s,c){const d=typeof i=="number"?this.path.concat(i):this.path,g=c?this.scope.concat(c):this.scope;return new qu(this.registry,d,s||null,g,this.errors)}error(i,...s){const c=`${this.key}${s.map(d=>`[${d}]`).join("")}`;this.errors.push(new go(c,i))}checkSubtype(i,s){const c=Ia(i,s);return c&&this.error(c),c}}var i0=qu;function o0(a){if(a instanceof z2)return o0(a.boundExpression);if(a instanceof ka&&a.name==="error"||a instanceof Gu||a instanceof d1)return!1;const i=a instanceof Al||a instanceof Oa;let s=!0;return a.eachChild(c=>{s=i?s&&o0(c):s&&c instanceof Bs}),!!s&&Ol(a)&&js(a,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function m1(a,i){const s=a.length-1;let c,d,g=0,v=s,w=0;for(;g<=v;)if(w=Math.floor((g+v)/2),c=a[w],d=a[w+1],c<=i){if(w===s||i<d)return w;g=w+1}else{if(!(c>i))throw new ai("Input is not a number.");v=w-1}return 0}class g1{constructor(i,s,c){this.type=i,this.input=s,this.labels=[],this.outputs=[];for(const[d,g]of c)this.labels.push(d),this.outputs.push(g)}static parse(i,s){if(i.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return s.error("Expected an even number of arguments.");const c=s.parse(i[1],1,It);if(!c)return null;const d=[];let g=null;s.expectedType&&s.expectedType.kind!=="value"&&(g=s.expectedType);for(let v=1;v<i.length;v+=2){const w=v===1?-1/0:i[v],E=i[v+1],A=v,O=v+1;if(typeof w!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',A);if(d.length&&d[d.length-1][0]>=w)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',A);const D=s.parse(E,O,g);if(!D)return null;g=g||D.type,d.push([w,D])}return new g1(g,c,d)}evaluate(i){const s=this.labels,c=this.outputs;if(s.length===1)return c[0].evaluate(i);const d=this.input.evaluate(i);if(d<=s[0])return c[0].evaluate(i);const g=s.length;return d>=s[g-1]?c[g-1].evaluate(i):c[m1(s,d)].evaluate(i)}eachChild(i){i(this.input);for(const s of this.outputs)i(s)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}serialize(){const i=["step",this.input.serialize()];for(let s=0;s<this.labels.length;s++)s>0&&i.push(this.labels[s]),i.push(this.outputs[s].serialize());return i}}var a0=g1;function Sr(a,i,s){return a*(1-s)+i*s}var Hu=Object.freeze({__proto__:null,array:function(a,i,s){return a.map((c,d)=>Sr(c,i[d],s))},color:function(a,i,s){return new Pn(Sr(a.r,i.r,s),Sr(a.g,i.g,s),Sr(a.b,i.b,s),Sr(a.a,i.a,s))},number:Sr});const R2=.95047,s0=1.08883,B2=4/29,$s=6/29,l0=3*$s*$s,Nm=$s*$s*$s,Um=Math.PI/180,Vm=180/Math.PI;function u0(a){return a>Nm?Math.pow(a,1/3):a/l0+B2}function c0(a){return a>$s?a*a*a:l0*(a-B2)}function h0(a){return 255*(a<=.0031308?12.92*a:1.055*Math.pow(a,1/2.4)-.055)}function y1(a){return(a/=255)<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function F2(a){const i=y1(a.r),s=y1(a.g),c=y1(a.b),d=u0((.4124564*i+.3575761*s+.1804375*c)/R2),g=u0((.2126729*i+.7151522*s+.072175*c)/1);return{l:116*g-16,a:500*(d-g),b:200*(g-u0((.0193339*i+.119192*s+.9503041*c)/s0)),alpha:a.a}}function j2(a){let i=(a.l+16)/116,s=isNaN(a.a)?i:i+a.a/500,c=isNaN(a.b)?i:i-a.b/200;return i=1*c0(i),s=R2*c0(s),c=s0*c0(c),new Pn(h0(3.2404542*s-1.5371385*i-.4985314*c),h0(-.969266*s+1.8760108*i+.041556*c),h0(.0556434*s-.2040259*i+1.0572252*c),a.alpha)}function Gm(a,i,s){const c=i-a;return a+s*(c>180||c<-180?c-360*Math.round(c/360):c)}const Zu={forward:F2,reverse:j2,interpolate:function(a,i,s){return{l:Sr(a.l,i.l,s),a:Sr(a.a,i.a,s),b:Sr(a.b,i.b,s),alpha:Sr(a.alpha,i.alpha,s)}}},kl={forward:function(a){const{l:i,a:s,b:c}=F2(a),d=Math.atan2(c,s)*Vm;return{h:d<0?d+360:d,c:Math.sqrt(s*s+c*c),l:i,alpha:a.a}},reverse:function(a){const i=a.h*Um,s=a.c;return j2({l:a.l,a:Math.cos(i)*s,b:Math.sin(i)*s,alpha:a.alpha})},interpolate:function(a,i,s){return{h:Gm(a.h,i.h,s),c:Sr(a.c,i.c,s),l:Sr(a.l,i.l,s),alpha:Sr(a.alpha,i.alpha,s)}}};var f0=Object.freeze({__proto__:null,hcl:kl,lab:Zu});class Xu{constructor(i,s,c,d,g){this.type=i,this.operator=s,this.interpolation=c,this.input=d,this.labels=[],this.outputs=[];for(const[v,w]of g)this.labels.push(v),this.outputs.push(w)}static interpolationFactor(i,s,c,d){let g=0;if(i.name==="exponential")g=d0(s,i.base,c,d);else if(i.name==="linear")g=d0(s,1,c,d);else if(i.name==="cubic-bezier"){const v=i.controlPoints;g=new Y(v[0],v[1],v[2],v[3]).solve(d0(s,1,c,d))}return g}static parse(i,s){let[c,d,g,...v]=i;if(!Array.isArray(d)||d.length===0)return s.error("Expected an interpolation type expression.",1);if(d[0]==="linear")d={name:"linear"};else if(d[0]==="exponential"){const A=d[1];if(typeof A!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);d={name:"exponential",base:A}}else{if(d[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(d[0])}`,1,0);{const A=d.slice(1);if(A.length!==4||A.some(O=>typeof O!="number"||O<0||O>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);d={name:"cubic-bezier",controlPoints:A}}}if(i.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(g=s.parse(g,2,It),!g)return null;const w=[];let E=null;c==="interpolate-hcl"||c==="interpolate-lab"?E=no:s.expectedType&&s.expectedType.kind!=="value"&&(E=s.expectedType);for(let A=0;A<v.length;A+=2){const O=v[A],D=v[A+1],z=A+3,V=A+4;if(typeof O!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',z);if(w.length&&w[w.length-1][0]>=O)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',z);const W=s.parse(D,V,E);if(!W)return null;E=E||W.type,w.push([O,W])}return E.kind==="number"||E.kind==="color"||E.kind==="array"&&E.itemType.kind==="number"&&typeof E.N=="number"?new Xu(E,c,d,g,w):s.error(`Type ${un(E)} is not interpolatable.`)}evaluate(i){const s=this.labels,c=this.outputs;if(s.length===1)return c[0].evaluate(i);const d=this.input.evaluate(i);if(d<=s[0])return c[0].evaluate(i);const g=s.length;if(d>=s[g-1])return c[g-1].evaluate(i);const v=m1(s,d),w=Xu.interpolationFactor(this.interpolation,d,s[v],s[v+1]),E=c[v].evaluate(i),A=c[v+1].evaluate(i);return this.operator==="interpolate"?Hu[this.type.kind.toLowerCase()](E,A,w):this.operator==="interpolate-hcl"?kl.reverse(kl.interpolate(kl.forward(E),kl.forward(A),w)):Zu.reverse(Zu.interpolate(Zu.forward(E),Zu.forward(A),w))}eachChild(i){i(this.input);for(const s of this.outputs)i(s)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}serialize(){let i;i=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const s=[this.operator,i,this.input.serialize()];for(let c=0;c<this.labels.length;c++)s.push(this.labels[c],this.outputs[c].serialize());return s}}function d0(a,i,s,c){const d=c-s,g=a-s;return d===0?0:i===1?g/d:(Math.pow(i,g)-1)/(Math.pow(i,d)-1)}var sa=Xu;class _1{constructor(i,s){this.type=i,this.args=s}static parse(i,s){if(i.length<2)return s.error("Expectected at least one argument.");let c=null;const d=s.expectedType;d&&d.kind!=="value"&&(c=d);const g=[];for(const w of i.slice(1)){const E=s.parse(w,1+g.length,c,void 0,{typeAnnotation:"omit"});if(!E)return null;c=c||E.type,g.push(E)}const v=d&&g.some(w=>Ia(d,w.type));return new _1(v?gr:c,g)}evaluate(i){let s,c=null,d=0;for(const g of this.args){if(d++,c=g.evaluate(i),c&&c instanceof _o&&!c.available&&(s||(s=c),c=null,d===this.args.length))return s;if(c!==null)break}return c}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){const i=["coalesce"];return this.eachChild(s=>{i.push(s.serialize())}),i}}var p0=_1;class v1{constructor(i,s){this.type=s.type,this.bindings=[].concat(i),this.result=s}evaluate(i){return this.result.evaluate(i)}eachChild(i){for(const s of this.bindings)i(s[1]);i(this.result)}static parse(i,s){if(i.length<4)return s.error(`Expected at least 3 arguments, but found ${i.length-1} instead.`);const c=[];for(let g=1;g<i.length-1;g+=2){const v=i[g];if(typeof v!="string")return s.error(`Expected string, but found ${typeof v} instead.`,g);if(/[^a-zA-Z0-9_]/.test(v))return s.error("Variable names must contain only alphanumeric characters or '_'.",g);const w=s.parse(i[g+1],g+1);if(!w)return null;c.push([v,w])}const d=s.parse(i[i.length-1],i.length-1,s.expectedType,c);return d?new v1(c,d):null}outputDefined(){return this.result.outputDefined()}serialize(){const i=["let"];for(const[s,c]of this.bindings)i.push(s,c.serialize());return i.push(this.result.serialize()),i}}var $2=v1;class m0{constructor(i,s,c){this.type=i,this.index=s,this.input=c}static parse(i,s){if(i.length!==3)return s.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const c=s.parse(i[1],1,It),d=s.parse(i[2],2,yo(s.expectedType||gr));return c&&d?new m0(d.type.itemType,c,d):null}evaluate(i){const s=this.index.evaluate(i),c=this.input.evaluate(i);if(s<0)throw new ai(`Array index out of bounds: ${s} < 0.`);if(s>=c.length)throw new ai(`Array index out of bounds: ${s} > ${c.length-1}.`);if(s!==Math.floor(s))throw new ai(`Array index must be an integer, but found ${s} instead.`);return c[s]}eachChild(i){i(this.index),i(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var Wm=m0;class g0{constructor(i,s){this.type=mr,this.needle=i,this.haystack=s}static parse(i,s){if(i.length!==3)return s.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const c=s.parse(i[1],1,gr),d=s.parse(i[2],2,gr);return c&&d?Fu(c.type,[mr,wr,It,El,gr])?new g0(c,d):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${un(c.type)} instead`):null}evaluate(i){const s=this.needle.evaluate(i),c=this.haystack.evaluate(i);if(c==null)return!1;if(!ju(s,["boolean","string","number","null"]))throw new ai(`Expected first argument to be of type boolean, string, number or null, but found ${un(xn(s))} instead.`);if(!ju(c,["string","array"]))throw new ai(`Expected second argument to be of type array or string, but found ${un(xn(c))} instead.`);return c.indexOf(s)>=0}eachChild(i){i(this.needle),i(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var x1=g0;class Ku{constructor(i,s,c){this.type=It,this.needle=i,this.haystack=s,this.fromIndex=c}static parse(i,s){if(i.length<=2||i.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const c=s.parse(i[1],1,gr),d=s.parse(i[2],2,gr);if(!c||!d)return null;if(!Fu(c.type,[mr,wr,It,El,gr]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${un(c.type)} instead`);if(i.length===4){const g=s.parse(i[3],3,It);return g?new Ku(c,d,g):null}return new Ku(c,d)}evaluate(i){const s=this.needle.evaluate(i),c=this.haystack.evaluate(i);if(!ju(s,["boolean","string","number","null"]))throw new ai(`Expected first argument to be of type boolean, string, number or null, but found ${un(xn(s))} instead.`);if(!ju(c,["string","array"]))throw new ai(`Expected second argument to be of type array or string, but found ${un(xn(c))} instead.`);if(this.fromIndex){const d=this.fromIndex.evaluate(i);return c.indexOf(s,d)}return c.indexOf(s)}eachChild(i){i(this.needle),i(this.haystack),this.fromIndex&&i(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const i=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),i]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var N2=Ku;class y0{constructor(i,s,c,d,g,v){this.inputType=i,this.type=s,this.input=c,this.cases=d,this.outputs=g,this.otherwise=v}static parse(i,s){if(i.length<5)return s.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if(i.length%2!=1)return s.error("Expected an even number of arguments.");let c,d;s.expectedType&&s.expectedType.kind!=="value"&&(d=s.expectedType);const g={},v=[];for(let A=2;A<i.length-1;A+=2){let O=i[A];const D=i[A+1];Array.isArray(O)||(O=[O]);const z=s.concat(A);if(O.length===0)return z.error("Expected at least one branch label.");for(const W of O){if(typeof W!="number"&&typeof W!="string")return z.error("Branch labels must be numbers or strings.");if(typeof W=="number"&&Math.abs(W)>Number.MAX_SAFE_INTEGER)return z.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof W=="number"&&Math.floor(W)!==W)return z.error("Numeric branch labels must be integer values.");if(c){if(z.checkSubtype(c,xn(W)))return null}else c=xn(W);if(g[String(W)]!==void 0)return z.error("Branch labels must be unique.");g[String(W)]=v.length}const V=s.parse(D,A,d);if(!V)return null;d=d||V.type,v.push(V)}const w=s.parse(i[1],1,gr);if(!w)return null;const E=s.parse(i[i.length-1],i.length-1,d);return E?w.type.kind!=="value"&&s.concat(1).checkSubtype(c,w.type)?null:new y0(c,d,w,g,v,E):null}evaluate(i){const s=this.input.evaluate(i);return(xn(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(i)}eachChild(i){i(this.input),this.outputs.forEach(i),i(this.otherwise)}outputDefined(){return this.outputs.every(i=>i.outputDefined())&&this.otherwise.outputDefined()}serialize(){const i=["match",this.input.serialize()],s=Object.keys(this.cases).sort(),c=[],d={};for(const v of s){const w=d[this.cases[v]];w===void 0?(d[this.cases[v]]=c.length,c.push([this.cases[v],[v]])):c[w][1].push(v)}const g=v=>this.inputType.kind==="number"?Number(v):v;for(const[v,w]of c)i.push(w.length===1?g(w[0]):w.map(g)),i.push(this.outputs[v].serialize());return i.push(this.otherwise.serialize()),i}}var qm=y0;class _0{constructor(i,s,c){this.type=i,this.branches=s,this.otherwise=c}static parse(i,s){if(i.length<4)return s.error(`Expected at least 3 arguments, but found only ${i.length-1}.`);if(i.length%2!=0)return s.error("Expected an odd number of arguments.");let c;s.expectedType&&s.expectedType.kind!=="value"&&(c=s.expectedType);const d=[];for(let v=1;v<i.length-1;v+=2){const w=s.parse(i[v],v,mr);if(!w)return null;const E=s.parse(i[v+1],v+1,c);if(!E)return null;d.push([w,E]),c=c||E.type}const g=s.parse(i[i.length-1],i.length-1,c);return g?new _0(c,d,g):null}evaluate(i){for(const[s,c]of this.branches)if(s.evaluate(i))return c.evaluate(i);return this.otherwise.evaluate(i)}eachChild(i){for(const[s,c]of this.branches)i(s),i(c);i(this.otherwise)}outputDefined(){return this.branches.every(([i,s])=>s.outputDefined())&&this.otherwise.outputDefined()}serialize(){const i=["case"];return this.eachChild(s=>{i.push(s.serialize())}),i}}var U2=_0;class Yu{constructor(i,s,c,d){this.type=i,this.input=s,this.beginIndex=c,this.endIndex=d}static parse(i,s){if(i.length<=2||i.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const c=s.parse(i[1],1,gr),d=s.parse(i[2],2,It);if(!c||!d)return null;if(!Fu(c.type,[yo(gr),wr,gr]))return s.error(`Expected first argument to be of type array or string, but found ${un(c.type)} instead`);if(i.length===4){const g=s.parse(i[3],3,It);return g?new Yu(c.type,c,d,g):null}return new Yu(c.type,c,d)}evaluate(i){const s=this.input.evaluate(i),c=this.beginIndex.evaluate(i);if(!ju(s,["string","array"]))throw new ai(`Expected first argument to be of type array or string, but found ${un(xn(s))} instead.`);if(this.endIndex){const d=this.endIndex.evaluate(i);return s.slice(c,d)}return s.slice(c)}eachChild(i){i(this.input),i(this.beginIndex),this.endIndex&&i(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const i=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),i]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var V2=Yu;function b1(a,i){return a==="=="||a==="!="?i.kind==="boolean"||i.kind==="string"||i.kind==="number"||i.kind==="null"||i.kind==="value":i.kind==="string"||i.kind==="number"||i.kind==="value"}function G2(a,i,s,c){return c.compare(i,s)===0}function Dl(a,i,s){const c=a!=="=="&&a!=="!=";return class hz{constructor(g,v,w){this.type=mr,this.lhs=g,this.rhs=v,this.collator=w,this.hasUntypedArgument=g.type.kind==="value"||v.type.kind==="value"}static parse(g,v){if(g.length!==3&&g.length!==4)return v.error("Expected two or three arguments.");const w=g[0];let E=v.parse(g[1],1,gr);if(!E)return null;if(!b1(w,E.type))return v.concat(1).error(`"${w}" comparisons are not supported for type '${un(E.type)}'.`);let A=v.parse(g[2],2,gr);if(!A)return null;if(!b1(w,A.type))return v.concat(2).error(`"${w}" comparisons are not supported for type '${un(A.type)}'.`);if(E.type.kind!==A.type.kind&&E.type.kind!=="value"&&A.type.kind!=="value")return v.error(`Cannot compare types '${un(E.type)}' and '${un(A.type)}'.`);c&&(E.type.kind==="value"&&A.type.kind!=="value"?E=new Oa(A.type,[E]):E.type.kind!=="value"&&A.type.kind==="value"&&(A=new Oa(E.type,[A])));let O=null;if(g.length===4){if(E.type.kind!=="string"&&A.type.kind!=="string"&&E.type.kind!=="value"&&A.type.kind!=="value")return v.error("Cannot use collator to compare non-string types.");if(O=v.parse(g[3],3,io),!O)return null}return new hz(E,A,O)}evaluate(g){const v=this.lhs.evaluate(g),w=this.rhs.evaluate(g);if(c&&this.hasUntypedArgument){const E=xn(v),A=xn(w);if(E.kind!==A.kind||E.kind!=="string"&&E.kind!=="number")throw new ai(`Expected arguments for "${a}" to be (string, string) or (number, number), but found (${E.kind}, ${A.kind}) instead.`)}if(this.collator&&!c&&this.hasUntypedArgument){const E=xn(v),A=xn(w);if(E.kind!=="string"||A.kind!=="string")return i(g,v,w)}return this.collator?s(g,v,w,this.collator.evaluate(g)):i(g,v,w)}eachChild(g){g(this.lhs),g(this.rhs),this.collator&&g(this.collator)}outputDefined(){return!0}serialize(){const g=[a];return this.eachChild(v=>{g.push(v.serialize())}),g}}}const Hm=Dl("==",function(a,i,s){return i===s},G2),Zm=Dl("!=",function(a,i,s){return i!==s},function(a,i,s,c){return!G2(0,i,s,c)}),Xm=Dl("<",function(a,i,s){return i<s},function(a,i,s,c){return c.compare(i,s)<0}),Km=Dl(">",function(a,i,s){return i>s},function(a,i,s,c){return c.compare(i,s)>0}),Ym=Dl("<=",function(a,i,s){return i<=s},function(a,i,s,c){return c.compare(i,s)<=0}),W2=Dl(">=",function(a,i,s){return i>=s},function(a,i,s,c){return c.compare(i,s)>=0});class w1{constructor(i,s,c,d,g,v){this.type=wr,this.number=i,this.locale=s,this.currency=c,this.unit=d,this.minFractionDigits=g,this.maxFractionDigits=v}static parse(i,s){if(i.length!==3)return s.error("Expected two arguments.");const c=s.parse(i[1],1,It);if(!c)return null;const d=i[2];if(typeof d!="object"||Array.isArray(d))return s.error("NumberFormat options argument must be an object.");let g=null;if(d.locale&&(g=s.parse(d.locale,1,wr),!g))return null;let v=null;if(d.currency&&(v=s.parse(d.currency,1,wr),!v))return null;let w=null;if(d.unit&&(w=s.parse(d.unit,1,wr),!w))return null;let E=null;if(d["min-fraction-digits"]&&(E=s.parse(d["min-fraction-digits"],1,It),!E))return null;let A=null;return d["max-fraction-digits"]&&(A=s.parse(d["max-fraction-digits"],1,It),!A)?null:new w1(c,g,v,w,E,A)}evaluate(i){return new Intl.NumberFormat(this.locale?this.locale.evaluate(i):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(i):void 0,unit:this.unit?this.unit.evaluate(i):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(i):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(i):void 0}).format(this.number.evaluate(i))}eachChild(i){i(this.number),this.locale&&i(this.locale),this.currency&&i(this.currency),this.unit&&i(this.unit),this.minFractionDigits&&i(this.minFractionDigits),this.maxFractionDigits&&i(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const i={};return this.locale&&(i.locale=this.locale.serialize()),this.currency&&(i.currency=this.currency.serialize()),this.unit&&(i.unit=this.unit.serialize()),this.minFractionDigits&&(i["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(i["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),i]}}class Ll{constructor(i){this.type=It,this.input=i}static parse(i,s){if(i.length!==2)return s.error(`Expected 1 argument, but found ${i.length-1} instead.`);const c=s.parse(i[1],1);return c?c.type.kind!=="array"&&c.type.kind!=="string"&&c.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${un(c.type)} instead.`):new Ll(c):null}evaluate(i){const s=this.input.evaluate(i);if(typeof s=="string"||Array.isArray(s))return s.length;throw new ai(`Expected value to be of type string or array, but found ${un(xn(s))} instead.`)}eachChild(i){i(this.input)}outputDefined(){return!1}serialize(){const i=["length"];return this.eachChild(s=>{i.push(s.serialize())}),i}}const q2={"==":Hm,"!=":Zm,">":Km,"<":Xm,">=":W2,"<=":Ym,array:Oa,at:Wm,boolean:Oa,case:U2,coalesce:p0,collator:Gu,format:cs,image:c1,in:x1,"index-of":N2,interpolate:sa,"interpolate-hcl":sa,"interpolate-lab":sa,length:Ll,let:$2,literal:Bs,match:qm,number:Oa,"number-format":w1,object:Oa,slice:V2,step:a0,string:Oa,"to-boolean":Al,"to-color":Al,"to-number":Al,"to-string":Al,var:z2,within:d1};function H2(a,[i,s,c,d]){i=i.evaluate(a),s=s.evaluate(a),c=c.evaluate(a);const g=d?d.evaluate(a):1,v=O2(i,s,c,g);if(v)throw new ai(v);return new Pn(i/255*g,s/255*g,c/255*g,g)}function za(a,i){return a in i}function T1(a,i){const s=i[a];return s===void 0?null:s}function vo(a){return{type:a}}ka.register(q2,{error:[{kind:"error"},[wr],(a,[i])=>{throw new ai(i.evaluate(a))}],typeof:[wr,[gr],(a,[i])=>un(xn(i.evaluate(a)))],"to-rgba":[yo(It,4),[no],(a,[i])=>i.evaluate(a).toArray()],rgb:[no,[It,It,It],H2],rgba:[no,[It,It,It,It],H2],has:{type:mr,overloads:[[[wr],(a,[i])=>za(i.evaluate(a),a.properties())],[[wr,Fo],(a,[i,s])=>za(i.evaluate(a),s.evaluate(a))]]},get:{type:gr,overloads:[[[wr],(a,[i])=>T1(i.evaluate(a),a.properties())],[[wr,Fo],(a,[i,s])=>T1(i.evaluate(a),s.evaluate(a))]]},"feature-state":[gr,[wr],(a,[i])=>T1(i.evaluate(a),a.featureState||{})],properties:[Fo,[],a=>a.properties()],"geometry-type":[wr,[],a=>a.geometryType()],id:[gr,[],a=>a.id()],zoom:[It,[],a=>a.globals.zoom],pitch:[It,[],a=>a.globals.pitch||0],"distance-from-center":[It,[],a=>a.distanceFromCenter()],"heatmap-density":[It,[],a=>a.globals.heatmapDensity||0],"line-progress":[It,[],a=>a.globals.lineProgress||0],"sky-radial-progress":[It,[],a=>a.globals.skyRadialProgress||0],accumulated:[gr,[],a=>a.globals.accumulated===void 0?null:a.globals.accumulated],"+":[It,vo(It),(a,i)=>{let s=0;for(const c of i)s+=c.evaluate(a);return s}],"*":[It,vo(It),(a,i)=>{let s=1;for(const c of i)s*=c.evaluate(a);return s}],"-":{type:It,overloads:[[[It,It],(a,[i,s])=>i.evaluate(a)-s.evaluate(a)],[[It],(a,[i])=>-i.evaluate(a)]]},"/":[It,[It,It],(a,[i,s])=>i.evaluate(a)/s.evaluate(a)],"%":[It,[It,It],(a,[i,s])=>i.evaluate(a)%s.evaluate(a)],ln2:[It,[],()=>Math.LN2],pi:[It,[],()=>Math.PI],e:[It,[],()=>Math.E],"^":[It,[It,It],(a,[i,s])=>Math.pow(i.evaluate(a),s.evaluate(a))],sqrt:[It,[It],(a,[i])=>Math.sqrt(i.evaluate(a))],log10:[It,[It],(a,[i])=>Math.log(i.evaluate(a))/Math.LN10],ln:[It,[It],(a,[i])=>Math.log(i.evaluate(a))],log2:[It,[It],(a,[i])=>Math.log(i.evaluate(a))/Math.LN2],sin:[It,[It],(a,[i])=>Math.sin(i.evaluate(a))],cos:[It,[It],(a,[i])=>Math.cos(i.evaluate(a))],tan:[It,[It],(a,[i])=>Math.tan(i.evaluate(a))],asin:[It,[It],(a,[i])=>Math.asin(i.evaluate(a))],acos:[It,[It],(a,[i])=>Math.acos(i.evaluate(a))],atan:[It,[It],(a,[i])=>Math.atan(i.evaluate(a))],min:[It,vo(It),(a,i)=>Math.min(...i.map(s=>s.evaluate(a)))],max:[It,vo(It),(a,i)=>Math.max(...i.map(s=>s.evaluate(a)))],abs:[It,[It],(a,[i])=>Math.abs(i.evaluate(a))],round:[It,[It],(a,[i])=>{const s=i.evaluate(a);return s<0?-Math.round(-s):Math.round(s)}],floor:[It,[It],(a,[i])=>Math.floor(i.evaluate(a))],ceil:[It,[It],(a,[i])=>Math.ceil(i.evaluate(a))],"filter-==":[mr,[wr,gr],(a,[i,s])=>a.properties()[i.value]===s.value],"filter-id-==":[mr,[gr],(a,[i])=>a.id()===i.value],"filter-type-==":[mr,[wr],(a,[i])=>a.geometryType()===i.value],"filter-<":[mr,[wr,gr],(a,[i,s])=>{const c=a.properties()[i.value],d=s.value;return typeof c==typeof d&&c<d}],"filter-id-<":[mr,[gr],(a,[i])=>{const s=a.id(),c=i.value;return typeof s==typeof c&&s<c}],"filter->":[mr,[wr,gr],(a,[i,s])=>{const c=a.properties()[i.value],d=s.value;return typeof c==typeof d&&c>d}],"filter-id->":[mr,[gr],(a,[i])=>{const s=a.id(),c=i.value;return typeof s==typeof c&&s>c}],"filter-<=":[mr,[wr,gr],(a,[i,s])=>{const c=a.properties()[i.value],d=s.value;return typeof c==typeof d&&c<=d}],"filter-id-<=":[mr,[gr],(a,[i])=>{const s=a.id(),c=i.value;return typeof s==typeof c&&s<=c}],"filter->=":[mr,[wr,gr],(a,[i,s])=>{const c=a.properties()[i.value],d=s.value;return typeof c==typeof d&&c>=d}],"filter-id->=":[mr,[gr],(a,[i])=>{const s=a.id(),c=i.value;return typeof s==typeof c&&s>=c}],"filter-has":[mr,[gr],(a,[i])=>i.value in a.properties()],"filter-has-id":[mr,[],a=>a.id()!==null&&a.id()!==void 0],"filter-type-in":[mr,[yo(wr)],(a,[i])=>i.value.indexOf(a.geometryType())>=0],"filter-id-in":[mr,[yo(gr)],(a,[i])=>i.value.indexOf(a.id())>=0],"filter-in-small":[mr,[wr,yo(gr)],(a,[i,s])=>s.value.indexOf(a.properties()[i.value])>=0],"filter-in-large":[mr,[wr,yo(gr)],(a,[i,s])=>function(c,d,g,v){for(;g<=v;){const w=g+v>>1;if(d[w]===c)return!0;d[w]>c?v=w-1:g=w+1}return!1}(a.properties()[i.value],s.value,0,s.value.length-1)],all:{type:mr,overloads:[[[mr,mr],(a,[i,s])=>i.evaluate(a)&&s.evaluate(a)],[vo(mr),(a,i)=>{for(const s of i)if(!s.evaluate(a))return!1;return!0}]]},any:{type:mr,overloads:[[[mr,mr],(a,[i,s])=>i.evaluate(a)||s.evaluate(a)],[vo(mr),(a,i)=>{for(const s of i)if(s.evaluate(a))return!0;return!1}]]},"!":[mr,[mr],(a,[i])=>!i.evaluate(a)],"is-supported-script":[mr,[wr],(a,[i])=>{const s=a.globals&&a.globals.isSupportedScript;return!s||s(i.evaluate(a))}],upcase:[wr,[wr],(a,[i])=>i.evaluate(a).toUpperCase()],downcase:[wr,[wr],(a,[i])=>i.evaluate(a).toLowerCase()],concat:[wr,vo(gr),(a,i)=>i.map(s=>Vu(s.evaluate(a))).join("")],"resolved-locale":[wr,[io],(a,[i])=>i.evaluate(a).resolvedLocale()]});var Ju=q2;function Z2(a){return{result:"success",value:a}}function Ns(a){return{result:"error",value:a}}function zl(a){return a["property-type"]==="data-driven"}function S1(a){return!!a.expression&&a.expression.parameters.indexOf("zoom")>-1}function E1(a){return!!a.expression&&a.expression.interpolated}function Er(a){return a instanceof Number?"number":a instanceof String?"string":a instanceof Boolean?"boolean":Array.isArray(a)?"array":a===null?"null":typeof a}function Qu(a){return typeof a=="object"&&a!==null&&!Array.isArray(a)}function X2(a){return a}function P1(a,i){const s=i.type==="color",c=a.stops&&typeof a.stops[0][0]=="object",d=c||!(c||a.property!==void 0),g=a.type||(E1(i)?"exponential":"interval");if(s&&((a=Ii({},a)).stops&&(a.stops=a.stops.map(A=>[A[0],Pn.parse(A[1])])),a.default=Pn.parse(a.default?a.default:i.default)),a.colorSpace&&a.colorSpace!=="rgb"&&!f0[a.colorSpace])throw new Error(`Unknown color space: ${a.colorSpace}`);let v,w,E;if(g==="exponential")v=Ra;else if(g==="interval")v=A1;else if(g==="categorical"){v=K2,w=Object.create(null);for(const A of a.stops)w[A[0]]=A[1];E=typeof a.stops[0][0]}else{if(g!=="identity")throw new Error(`Unknown function type "${g}"`);v=Y2}if(c){const A={},O=[];for(let V=0;V<a.stops.length;V++){const W=a.stops[V],K=W[0].zoom;A[K]===void 0&&(A[K]={zoom:K,type:a.type,property:a.property,default:a.default,stops:[]},O.push(K)),A[K].stops.push([W[0].value,W[1]])}const D=[];for(const V of O)D.push([A[V].zoom,P1(A[V],i)]);const z={name:"linear"};return{kind:"composite",interpolationType:z,interpolationFactor:sa.interpolationFactor.bind(void 0,z),zoomStops:D.map(V=>V[0]),evaluate:({zoom:V},W)=>Ra({stops:D,base:a.base},i,V).evaluate(V,W)}}if(d){const A=g==="exponential"?{name:"exponential",base:a.base!==void 0?a.base:1}:null;return{kind:"camera",interpolationType:A,interpolationFactor:sa.interpolationFactor.bind(void 0,A),zoomStops:a.stops.map(O=>O[0]),evaluate:({zoom:O})=>v(a,i,O,w,E)}}return{kind:"source",evaluate(A,O){const D=O&&O.properties?O.properties[a.property]:void 0;return D===void 0?Rl(a.default,i.default):v(a,i,D,w,E)}}}function Rl(a,i,s){return a!==void 0?a:i!==void 0?i:s!==void 0?s:void 0}function K2(a,i,s,c,d){return Rl(typeof s===d?c[s]:void 0,a.default,i.default)}function A1(a,i,s){if(Er(s)!=="number")return Rl(a.default,i.default);const c=a.stops.length;if(c===1||s<=a.stops[0][0])return a.stops[0][1];if(s>=a.stops[c-1][0])return a.stops[c-1][1];const d=m1(a.stops.map(g=>g[0]),s);return a.stops[d][1]}function Ra(a,i,s){const c=a.base!==void 0?a.base:1;if(Er(s)!=="number")return Rl(a.default,i.default);const d=a.stops.length;if(d===1||s<=a.stops[0][0])return a.stops[0][1];if(s>=a.stops[d-1][0])return a.stops[d-1][1];const g=m1(a.stops.map(O=>O[0]),s),v=function(O,D,z,V){const W=V-z,K=O-z;return W===0?0:D===1?K/W:(Math.pow(D,K)-1)/(Math.pow(D,W)-1)}(s,c,a.stops[g][0],a.stops[g+1][0]),w=a.stops[g][1],E=a.stops[g+1][1];let A=Hu[i.type]||X2;if(a.colorSpace&&a.colorSpace!=="rgb"){const O=f0[a.colorSpace];A=(D,z)=>O.reverse(O.interpolate(O.forward(D),O.forward(z),v))}return typeof w.evaluate=="function"?{evaluate(...O){const D=w.evaluate.apply(void 0,O),z=E.evaluate.apply(void 0,O);if(D!==void 0&&z!==void 0)return A(D,z,v)}}:A(w,E,v)}function Y2(a,i,s){return i.type==="color"?s=Pn.parse(s):i.type==="formatted"?s=$i.fromString(s.toString()):i.type==="resolvedImage"?s=_o.fromString(s.toString()):Er(s)===i.type||i.type==="enum"&&i.values[s]||(s=void 0),Rl(s,a.default,i.default)}class M1{constructor(i,s){this.expression=i,this._warningHistory={},this._evaluator=new Jf,this._defaultValue=s?function(c){return c.type==="color"&&(Qu(c.default)||Array.isArray(c.default))?new Pn(0,0,0,0):c.type==="color"?Pn.parse(c.default)||null:c.default===void 0?null:c.default}(s):null,this._enumValues=s&&s.type==="enum"?s.values:null}evaluateWithoutErrorHandling(i,s,c,d,g,v,w,E){return this._evaluator.globals=i,this._evaluator.feature=s,this._evaluator.featureState=c,this._evaluator.canonical=d||null,this._evaluator.availableImages=g||null,this._evaluator.formattedSection=v,this._evaluator.featureTileCoord=w||null,this._evaluator.featureDistanceData=E||null,this.expression.evaluate(this._evaluator)}evaluate(i,s,c,d,g,v,w,E){this._evaluator.globals=i,this._evaluator.feature=s||null,this._evaluator.featureState=c||null,this._evaluator.canonical=d||null,this._evaluator.availableImages=g||null,this._evaluator.formattedSection=v||null,this._evaluator.featureTileCoord=w||null,this._evaluator.featureDistanceData=E||null;try{const A=this.expression.evaluate(this._evaluator);if(A==null||typeof A=="number"&&A!=A)return this._defaultValue;if(this._enumValues&&!(A in this._enumValues))throw new ai(`Expected value to be one of ${Object.keys(this._enumValues).map(O=>JSON.stringify(O)).join(", ")}, but found ${JSON.stringify(A)} instead.`);return A}catch(A){return this._warningHistory[A.message]||(this._warningHistory[A.message]=!0,typeof console<"u"&&console.warn(A.message)),this._defaultValue}}}function Bl(a){return Array.isArray(a)&&a.length>0&&typeof a[0]=="string"&&a[0]in Ju}function Fl(a,i){const s=new i0(Ju,[],i?function(d){const g={color:no,string:wr,number:It,enum:wr,boolean:mr,formatted:Bu,resolvedImage:Rs};return d.type==="array"?yo(g[d.value]||gr,d.length):g[d.type]}(i):void 0),c=s.parse(a,void 0,void 0,void 0,i&&i.type==="string"?{typeAnnotation:"coerce"}:void 0);return c?Z2(new M1(c,i)):Ns(s.errors)}class v0{constructor(i,s){this.kind=i,this._styleExpression=s,this.isStateDependent=i!=="constant"&&!La(s.expression)}evaluateWithoutErrorHandling(i,s,c,d,g,v){return this._styleExpression.evaluateWithoutErrorHandling(i,s,c,d,g,v)}evaluate(i,s,c,d,g,v){return this._styleExpression.evaluate(i,s,c,d,g,v)}}class ec{constructor(i,s,c,d){this.kind=i,this.zoomStops=c,this._styleExpression=s,this.isStateDependent=i!=="camera"&&!La(s.expression),this.interpolationType=d}evaluateWithoutErrorHandling(i,s,c,d,g,v){return this._styleExpression.evaluateWithoutErrorHandling(i,s,c,d,g,v)}evaluate(i,s,c,d,g,v){return this._styleExpression.evaluate(i,s,c,d,g,v)}interpolationFactor(i,s,c){return this.interpolationType?sa.interpolationFactor(this.interpolationType,i,s,c):0}}function tc(a,i){if((a=Fl(a,i)).result==="error")return a;const s=a.value.expression,c=Ol(s);if(!c&&!zl(i))return Ns([new go("","data expressions not supported")]);const d=js(s,["zoom","pitch","distance-from-center"]);if(!d&&!S1(i))return Ns([new go("","zoom expressions not supported")]);const g=I1(s);return g||d?g instanceof go?Ns([g]):g instanceof sa&&!E1(i)?Ns([new go("",'"interpolate" expressions cannot be used with this property')]):Z2(g?new ec(c?"camera":"composite",a.value,g.labels,g instanceof sa?g.interpolation:void 0):new v0(c?"constant":"source",a.value)):Ns([new go("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class C1{constructor(i,s){this._parameters=i,this._specification=s,Ii(this,P1(this._parameters,this._specification))}static deserialize(i){return new C1(i._parameters,i._specification)}static serialize(i){return{_parameters:i._parameters,_specification:i._specification}}}function I1(a){let i=null;if(a instanceof $2)i=I1(a.result);else if(a instanceof p0){for(const s of a.args)if(i=I1(s),i)break}else(a instanceof a0||a instanceof sa)&&a.input instanceof ka&&a.input.name==="zoom"&&(i=a);return i instanceof go||a.eachChild(s=>{const c=I1(s);c instanceof go?i=c:!i&&c?i=new go("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&c&&i!==c&&(i=new go("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),i}class Dt{constructor(i,s,c,d){this.message=(i?`${i}: `:"")+c,d&&(this.identifier=d),s!=null&&s.__line__&&(this.line=s.__line__)}}function jo(a){const i=a.key,s=a.value,c=a.valueSpec||{},d=a.objectElementValidators||{},g=a.style,v=a.styleSpec;let w=[];const E=Er(s);if(E!=="object")return[new Dt(i,s,`object expected, ${E} found`)];for(const A in s){const O=A.split(".")[0];let D;d[O]?D=d[O]:c[O]?D=yi:d["*"]?D=d["*"]:c["*"]&&(D=yi),D?w=w.concat(D({key:(i&&`${i}.`)+A,value:s[A],valueSpec:c[O]||c["*"],style:g,styleSpec:v,object:s,objectKey:A},s)):w.push(new Dt(i,s[A],`unknown property "${A}"`))}for(const A in c)d[A]||c[A].required&&c[A].default===void 0&&s[A]===void 0&&w.push(new Dt(i,s,`missing required property "${A}"`));return w}function J2(a){const i=a.value,s=a.valueSpec,c=a.style,d=a.styleSpec,g=a.key,v=a.arrayElementValidator||yi;if(Er(i)!=="array")return[new Dt(g,i,`array expected, ${Er(i)} found`)];if(s.length&&i.length!==s.length)return[new Dt(g,i,`array length ${s.length} expected, length ${i.length} found`)];if(s["min-length"]&&i.length<s["min-length"])return[new Dt(g,i,`array length at least ${s["min-length"]} expected, length ${i.length} found`)];let w={type:s.value,values:s.values,minimum:s.minimum,maximum:s.maximum,function:void 0};d.$version<7&&(w.function=s.function),Er(s.value)==="object"&&(w=s.value);let E=[];for(let A=0;A<i.length;A++)E=E.concat(v({array:i,arrayIndex:A,value:i[A],valueSpec:w,style:c,styleSpec:d,key:`${g}[${A}]`}));return E}function rc(a){const i=a.key,s=a.value,c=a.valueSpec;let d=Er(s);if(d==="number"&&s!=s&&(d="NaN"),d!=="number")return[new Dt(i,s,`number expected, ${d} found`)];if("minimum"in c){let g=c.minimum;if(Er(c.minimum)==="array"&&(g=c.minimum[a.arrayIndex]),s<g)return[new Dt(i,s,`${s} is less than the minimum value ${g}`)]}if("maximum"in c){let g=c.maximum;if(Er(c.maximum)==="array"&&(g=c.maximum[a.arrayIndex]),s>g)return[new Dt(i,s,`${s} is greater than the maximum value ${g}`)]}return[]}function nc(a){const i=a.valueSpec,s=xr(a.value.type);let c,d,g,v={};const w=s!=="categorical"&&a.value.property===void 0,E=!w,A=Er(a.value.stops)==="array"&&Er(a.value.stops[0])==="array"&&Er(a.value.stops[0][0])==="object",O=jo({key:a.key,value:a.value,valueSpec:a.styleSpec.function,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{stops:function(V){if(s==="identity")return[new Dt(V.key,V.value,'identity function may not have a "stops" property')];let W=[];const K=V.value;return W=W.concat(J2({key:V.key,value:K,valueSpec:V.valueSpec,style:V.style,styleSpec:V.styleSpec,arrayElementValidator:D})),Er(K)==="array"&&K.length===0&&W.push(new Dt(V.key,K,"array must have at least one stop")),W},default:function(V){return yi({key:V.key,value:V.value,valueSpec:i,style:V.style,styleSpec:V.styleSpec})}}});return s==="identity"&&w&&O.push(new Dt(a.key,a.value,'missing required property "property"')),s==="identity"||a.value.stops||O.push(new Dt(a.key,a.value,'missing required property "stops"')),s==="exponential"&&a.valueSpec.expression&&!E1(a.valueSpec)&&O.push(new Dt(a.key,a.value,"exponential functions not supported")),a.styleSpec.$version>=8&&(E&&!zl(a.valueSpec)?O.push(new Dt(a.key,a.value,"property functions not supported")):w&&!S1(a.valueSpec)&&O.push(new Dt(a.key,a.value,"zoom functions not supported"))),s!=="categorical"&&!A||a.value.property!==void 0||O.push(new Dt(a.key,a.value,'"property" property is required')),O;function D(V){let W=[];const K=V.value,re=V.key;if(Er(K)!=="array")return[new Dt(re,K,`array expected, ${Er(K)} found`)];if(K.length!==2)return[new Dt(re,K,`array length 2 expected, length ${K.length} found`)];if(A){if(Er(K[0])!=="object")return[new Dt(re,K,`object expected, ${Er(K[0])} found`)];if(K[0].zoom===void 0)return[new Dt(re,K,"object stop key must have zoom")];if(K[0].value===void 0)return[new Dt(re,K,"object stop key must have value")];const he=xr(K[0].zoom);if(typeof he!="number")return[new Dt(re,K[0].zoom,"stop zoom values must be numbers")];if(g&&g>he)return[new Dt(re,K[0].zoom,"stop zoom values must appear in ascending order")];he!==g&&(g=he,d=void 0,v={}),W=W.concat(jo({key:`${re}[0]`,value:K[0],valueSpec:{zoom:{}},style:V.style,styleSpec:V.styleSpec,objectElementValidators:{zoom:rc,value:z}}))}else W=W.concat(z({key:`${re}[0]`,value:K[0],valueSpec:{},style:V.style,styleSpec:V.styleSpec},K));return Bl(fn(K[1]))?W.concat([new Dt(`${re}[1]`,K[1],"expressions are not allowed in function stops.")]):W.concat(yi({key:`${re}[1]`,value:K[1],valueSpec:i,style:V.style,styleSpec:V.styleSpec}))}function z(V,W){const K=Er(V.value),re=xr(V.value),he=V.value!==null?V.value:W;if(c){if(K!==c)return[new Dt(V.key,he,`${K} stop domain type must match previous stop domain type ${c}`)]}else c=K;if(K!=="number"&&K!=="string"&&K!=="boolean"&&typeof re!="number"&&typeof re!="string"&&typeof re!="boolean")return[new Dt(V.key,he,"stop domain value must be a number, string, or boolean")];if(K!=="number"&&s!=="categorical"){let xe=`number expected, ${K} found`;return zl(i)&&s===void 0&&(xe+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Dt(V.key,he,xe)]}return s!=="categorical"||K!=="number"||typeof re=="number"&&isFinite(re)&&Math.floor(re)===re?s!=="categorical"&&K==="number"&&typeof re=="number"&&typeof d=="number"&&d!==void 0&&re<d?[new Dt(V.key,he,"stop domain values must appear in ascending order")]:(d=re,s==="categorical"&&re in v?[new Dt(V.key,he,"stop domain values must be unique")]:(v[re]=!0,[])):[new Dt(V.key,he,`integer expected, found ${String(re)}`)]}}function Yn(a){const i=(a.expressionContext==="property"?tc:Fl)(fn(a.value),a.valueSpec);if(i.result==="error")return i.value.map(c=>new Dt(`${a.key}${c.key}`,a.value,c.message));const s=i.value.expression||i.value._styleExpression.expression;if(a.expressionContext==="property"&&a.propertyKey==="text-font"&&!s.outputDefined())return[new Dt(a.key,a.value,`Invalid data expression for "${a.propertyKey}". Output values must be contained as literals within the expression.`)];if(a.expressionContext==="property"&&a.propertyType==="layout"&&!La(s))return[new Dt(a.key,a.value,'"feature-state" data expressions are not supported with layout properties.')];if(a.expressionContext==="filter")return ic(s,a);if(a.expressionContext&&a.expressionContext.indexOf("cluster")===0){if(!js(s,["zoom","feature-state"]))return[new Dt(a.key,a.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(a.expressionContext==="cluster-initial"&&!Ol(s))return[new Dt(a.key,a.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ic(a,i){const s=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(i.valueSpec&&i.valueSpec.expression)for(const d of i.valueSpec.expression.parameters)s.delete(d);if(s.size===0)return[];const c=[];return a instanceof ka&&s.has(a.name)?[new Dt(i.key,i.value,`["${a.name}"] expression is not supported in a filter for a ${i.object.type} layer with id: ${i.object.id}`)]:(a.eachChild(d=>{c.push(...ic(d,i))}),c)}function O1(a){const i=a.key,s=a.value,c=a.valueSpec,d=[];return Array.isArray(c.values)?c.values.indexOf(xr(s))===-1&&d.push(new Dt(i,s,`expected one of [${c.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(c.values).indexOf(xr(s))===-1&&d.push(new Dt(i,s,`expected one of [${Object.keys(c.values).join(", ")}], ${JSON.stringify(s)} found`)),d}function x0(a){if(a===!0||a===!1)return!0;if(!Array.isArray(a)||a.length===0)return!1;switch(a[0]){case"has":return a.length>=2&&a[1]!=="$id"&&a[1]!=="$type";case"in":return a.length>=3&&(typeof a[1]!="string"||Array.isArray(a[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return a.length!==3||Array.isArray(a[1])||Array.isArray(a[2]);case"any":case"all":for(const i of a.slice(1))if(!x0(i)&&typeof i!="boolean")return!1;return!0;default:return!0}}function k1(a,i="fill"){if(a==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};x0(a)||(a=$l(a));const s=a;let c=!0;try{c=function(A){if(!jl(A))return A;let O=fn(A);return D1(O),O=Q2(O),O}(s)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(s,null,2)}
        `)}const d=Qe[`filter_${i}`],g=Fl(c,d);let v=null;if(g.result==="error")throw new Error(g.value.map(A=>`${A.key}: ${A.message}`).join(", "));v=(A,O,D)=>g.value.evaluate(A,O,{},D);let w=null,E=null;if(c!==s){const A=Fl(s,d);if(A.result==="error")throw new Error(A.value.map(O=>`${O.key}: ${O.message}`).join(", "));w=(O,D,z,V,W)=>A.value.evaluate(O,D,{},z,void 0,void 0,V,W),E=!Ol(A.value.expression)}return{filter:v,dynamicFilter:w||void 0,needGeometry:e3(c),needFeature:!!E}}function Q2(a){if(!Array.isArray(a))return a;const i=function(s){if(b0.has(s[0])){for(let c=1;c<s.length;c++)if(jl(s[c]))return!0}return s}(a);return i===!0?i:i.map(s=>Q2(s))}function D1(a){let i=!1;const s=[];if(a[0]==="case"){for(let c=1;c<a.length-1;c+=2)i=i||jl(a[c]),s.push(a[c+1]);s.push(a[a.length-1])}else if(a[0]==="match"){i=i||jl(a[1]);for(let c=2;c<a.length-1;c+=2)s.push(a[c+1]);s.push(a[a.length-1])}else if(a[0]==="step"){i=i||jl(a[1]);for(let c=1;c<a.length-1;c+=2)s.push(a[c+1])}i&&(a.length=0,a.push("any",...s));for(let c=1;c<a.length;c++)D1(a[c])}function jl(a){if(!Array.isArray(a))return!1;if((i=a[0])==="pitch"||i==="distance-from-center")return!0;var i;for(let s=1;s<a.length;s++)if(jl(a[s]))return!0;return!1}const b0=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Jm(a,i){return a<i?-1:a>i?1:0}function e3(a){if(!Array.isArray(a))return!1;if(a[0]==="within")return!0;for(let i=1;i<a.length;i++)if(e3(a[i]))return!0;return!1}function $l(a){if(!a)return!0;const i=a[0];return a.length<=1?i!=="any":i==="=="?w0(a[1],a[2],"=="):i==="!="?L1(w0(a[1],a[2],"==")):i==="<"||i===">"||i==="<="||i===">="?w0(a[1],a[2],i):i==="any"?(s=a.slice(1),["any"].concat(s.map($l))):i==="all"?["all"].concat(a.slice(1).map($l)):i==="none"?["all"].concat(a.slice(1).map($l).map(L1)):i==="in"?T0(a[1],a.slice(2)):i==="!in"?L1(T0(a[1],a.slice(2))):i==="has"?S0(a[1]):i==="!has"?L1(S0(a[1])):i!=="within"||a;var s}function w0(a,i,s){switch(a){case"$type":return[`filter-type-${s}`,i];case"$id":return[`filter-id-${s}`,i];default:return[`filter-${s}`,a,i]}}function T0(a,i){if(i.length===0)return!1;switch(a){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some(s=>typeof s!=typeof i[0])?["filter-in-large",a,["literal",i.sort(Jm)]]:["filter-in-small",a,["literal",i]]}}function S0(a){switch(a){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",a]}}function L1(a){return["!",a]}function oc(a){return x0(fn(a.value))?Yn(Ii({},a,{expressionContext:"filter",valueSpec:a.styleSpec[`filter_${a.layerType||"fill"}`]})):ac(a)}function ac(a){const i=a.value,s=a.key;if(Er(i)!=="array")return[new Dt(s,i,`array expected, ${Er(i)} found`)];const c=a.styleSpec;let d,g=[];if(i.length<1)return[new Dt(s,i,"filter array must have at least 1 element")];switch(g=g.concat(O1({key:`${s}[0]`,value:i[0],valueSpec:c.filter_operator,style:a.style,styleSpec:a.styleSpec})),xr(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&xr(i[1])==="$type"&&g.push(new Dt(s,i,`"$type" cannot be use with operator "${i[0]}"`));case"==":case"!=":i.length!==3&&g.push(new Dt(s,i,`filter array for operator "${i[0]}" must have 3 elements`));case"in":case"!in":i.length>=2&&(d=Er(i[1]),d!=="string"&&g.push(new Dt(`${s}[1]`,i[1],`string expected, ${d} found`)));for(let v=2;v<i.length;v++)d=Er(i[v]),xr(i[1])==="$type"?g=g.concat(O1({key:`${s}[${v}]`,value:i[v],valueSpec:c.geometry_type,style:a.style,styleSpec:a.styleSpec})):d!=="string"&&d!=="number"&&d!=="boolean"&&g.push(new Dt(`${s}[${v}]`,i[v],`string, number, or boolean expected, ${d} found`));break;case"any":case"all":case"none":for(let v=1;v<i.length;v++)g=g.concat(ac({key:`${s}[${v}]`,value:i[v],style:a.style,styleSpec:a.styleSpec}));break;case"has":case"!has":d=Er(i[1]),i.length!==2?g.push(new Dt(s,i,`filter array for "${i[0]}" operator must have 2 elements`)):d!=="string"&&g.push(new Dt(`${s}[1]`,i[1],`string expected, ${d} found`));break;case"within":d=Er(i[1]),i.length!==2?g.push(new Dt(s,i,`filter array for "${i[0]}" operator must have 2 elements`)):d!=="object"&&g.push(new Dt(`${s}[1]`,i[1],`object expected, ${d} found`))}return g}function E0(a,i){const s=a.key,c=a.style,d=a.styleSpec,g=a.value,v=a.objectKey,w=d[`${i}_${a.layerType}`];if(!w)return[];const E=v.match(/^(.*)-transition$/);if(i==="paint"&&E&&w[E[1]]&&w[E[1]].transition)return yi({key:s,value:g,valueSpec:d.transition,style:c,styleSpec:d});const A=a.valueSpec||w[v];if(!A)return[new Dt(s,g,`unknown property "${v}"`)];let O;if(Er(g)==="string"&&zl(A)&&!A.tokens&&(O=/^{([^}]+)}$/.exec(g))){const z=`\`{ "type": "identity", "property": ${O?JSON.stringify(O[1]):'"_"'} }\``;return[new Dt(s,g,`"${v}" does not support interpolation syntax
Use an identity property function instead: ${z}.`)]}const D=[];return a.layerType==="symbol"&&(v==="text-field"&&c&&!c.glyphs&&D.push(new Dt(s,g,'use of "text-field" requires a style "glyphs" property')),v==="text-font"&&Qu(fn(g))&&xr(g.type)==="identity"&&D.push(new Dt(s,g,'"text-font" does not support identity functions'))),D.concat(yi({key:a.key,value:g,valueSpec:A,style:c,styleSpec:d,expressionContext:"property",propertyType:i,propertyKey:v}))}function t3(a){return E0(a,"paint")}function P0(a){return E0(a,"layout")}function r3(a){let i=[];const s=a.value,c=a.key,d=a.style,g=a.styleSpec;s.type||s.ref||i.push(new Dt(c,s,'either "type" or "ref" is required'));let v=xr(s.type);const w=xr(s.ref);if(s.id){const E=xr(s.id);for(let A=0;A<a.arrayIndex;A++){const O=d.layers[A];xr(O.id)===E&&i.push(new Dt(c,s.id,`duplicate layer id "${s.id}", previously used at line ${O.id.__line__}`))}}if("ref"in s){let E;["type","source","source-layer","filter","layout"].forEach(A=>{A in s&&i.push(new Dt(c,s[A],`"${A}" is prohibited for ref layers`))}),d.layers.forEach(A=>{xr(A.id)===w&&(E=A)}),E?E.ref?i.push(new Dt(c,s.ref,"ref cannot reference another ref layer")):v=xr(E.type):typeof w=="string"&&i.push(new Dt(c,s.ref,`ref layer "${w}" not found`))}else if(v!=="background"&&v!=="sky")if(s.source){const E=d.sources&&d.sources[s.source],A=E&&xr(E.type);E?A==="vector"&&v==="raster"?i.push(new Dt(c,s.source,`layer "${s.id}" requires a raster source`)):A==="raster"&&v!=="raster"?i.push(new Dt(c,s.source,`layer "${s.id}" requires a vector source`)):A!=="vector"||s["source-layer"]?A==="raster-dem"&&v!=="hillshade"?i.push(new Dt(c,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):v!=="line"||!s.paint||!s.paint["line-gradient"]&&!s.paint["line-trim-offset"]||A==="geojson"&&E.lineMetrics||i.push(new Dt(c,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):i.push(new Dt(c,s,`layer "${s.id}" must specify a "source-layer"`)):i.push(new Dt(c,s.source,`source "${s.source}" not found`))}else i.push(new Dt(c,s,'missing required property "source"'));return i=i.concat(jo({key:c,value:s,valueSpec:g.layer,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{"*":()=>[],type:()=>yi({key:`${c}.type`,value:s.type,valueSpec:g.layer.type,style:a.style,styleSpec:a.styleSpec,object:s,objectKey:"type"}),filter:E=>oc(Ii({layerType:v},E)),layout:E=>jo({layer:s,key:E.key,value:E.value,valueSpec:{},style:E.style,styleSpec:E.styleSpec,objectElementValidators:{"*":A=>P0(Ii({layerType:v},A))}}),paint:E=>jo({layer:s,key:E.key,value:E.value,valueSpec:{},style:E.style,styleSpec:E.styleSpec,objectElementValidators:{"*":A=>t3(Ii({layerType:v},A))}})}})),i}function hs(a){const i=a.value,s=a.key,c=Er(i);return c!=="string"?[new Dt(s,i,`string expected, ${c} found`)]:[]}const n3={promoteId:function({key:a,value:i}){if(Er(i)==="string")return hs({key:a,value:i});{const s=[];for(const c in i)s.push(...hs({key:`${a}.${c}`,value:i[c]}));return s}}};function i3(a){const i=a.value,s=a.key,c=a.styleSpec,d=a.style;if(!i.type)return[new Dt(s,i,'"type" is required')];const g=xr(i.type);let v;switch(g){case"vector":case"raster":case"raster-dem":return v=jo({key:s,value:i,valueSpec:c[`source_${g.replace("-","_")}`],style:a.style,styleSpec:c,objectElementValidators:n3}),v;case"geojson":if(v=jo({key:s,value:i,valueSpec:c.source_geojson,style:d,styleSpec:c,objectElementValidators:n3}),i.cluster)for(const w in i.clusterProperties){const[E,A]=i.clusterProperties[w],O=typeof E=="string"?[E,["accumulated"],["get",w]]:E;v.push(...Yn({key:`${s}.${w}.map`,value:A,expressionContext:"cluster-map"})),v.push(...Yn({key:`${s}.${w}.reduce`,value:O,expressionContext:"cluster-reduce"}))}return v;case"video":return jo({key:s,value:i,valueSpec:c.source_video,style:d,styleSpec:c});case"image":return jo({key:s,value:i,valueSpec:c.source_image,style:d,styleSpec:c});case"canvas":return[new Dt(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return O1({key:`${s}.type`,value:i.type,valueSpec:{values:Qm(c)},style:d,styleSpec:c})}}function Qm(a){return a.source.reduce((i,s)=>{const c=a[s];return c.type.type==="enum"&&(i=i.concat(Object.keys(c.type.values))),i},[])}function o3(a){const i=a.value,s=a.styleSpec,c=s.light,d=a.style;let g=[];const v=Er(i);if(i===void 0)return g;if(v!=="object")return g=g.concat([new Dt("light",i,`object expected, ${v} found`)]),g;for(const w in i){const E=w.match(/^(.*)-transition$/);g=g.concat(E&&c[E[1]]&&c[E[1]].transition?yi({key:w,value:i[w],valueSpec:s.transition,style:d,styleSpec:s}):c[w]?yi({key:w,value:i[w],valueSpec:c[w],style:d,styleSpec:s}):[new Dt(w,i[w],`unknown property "${w}"`)])}return g}function A0(a){const i=a.value,s=a.key,c=a.style,d=a.styleSpec,g=d.terrain;let v=[];const w=Er(i);if(i===void 0)return v;if(w!=="object")return v=v.concat([new Dt("terrain",i,`object expected, ${w} found`)]),v;for(const E in i){const A=E.match(/^(.*)-transition$/);v=v.concat(A&&g[A[1]]&&g[A[1]].transition?yi({key:E,value:i[E],valueSpec:d.transition,style:c,styleSpec:d}):g[E]?yi({key:E,value:i[E],valueSpec:g[E],style:c,styleSpec:d}):[new Dt(E,i[E],`unknown property "${E}"`)])}if(i.source){const E=c.sources&&c.sources[i.source],A=E&&xr(E.type);E?A!=="raster-dem"&&v.push(new Dt(s,i.source,`terrain cannot be used with a source of type ${String(A)}, it only be used with a "raster-dem" source type`)):v.push(new Dt(s,i.source,`source "${i.source}" not found`))}else v.push(new Dt(s,i,'terrain is missing required property "source"'));return v}function a3(a){const i=a.value,s=a.style,c=a.styleSpec,d=c.fog;let g=[];const v=Er(i);if(i===void 0)return g;if(v!=="object")return g=g.concat([new Dt("fog",i,`object expected, ${v} found`)]),g;for(const w in i){const E=w.match(/^(.*)-transition$/);g=g.concat(E&&d[E[1]]&&d[E[1]].transition?yi({key:w,value:i[w],valueSpec:c.transition,style:s,styleSpec:c}):d[w]?yi({key:w,value:i[w],valueSpec:d[w],style:s,styleSpec:c}):[new Dt(w,i[w],`unknown property "${w}"`)])}return g}const s3={"*":()=>[],array:J2,boolean:function(a){const i=a.value,s=a.key,c=Er(i);return c!=="boolean"?[new Dt(s,i,`boolean expected, ${c} found`)]:[]},number:rc,color:function(a){const i=a.key,s=a.value,c=Er(s);return c!=="string"?[new Dt(i,s,`color expected, ${c} found`)]:Wf(s)===null?[new Dt(i,s,`color expected, "${s}" found`)]:[]},enum:O1,filter:oc,function:nc,layer:r3,object:jo,source:i3,light:o3,terrain:A0,fog:a3,string:hs,formatted:function(a){return hs(a).length===0?[]:Yn(a)},resolvedImage:function(a){return hs(a).length===0?[]:Yn(a)},projection:function(a){const i=a.value,s=a.styleSpec,c=s.projection,d=a.style;let g=[];const v=Er(i);if(v==="object")for(const w in i)g=g.concat(yi({key:w,value:i[w],valueSpec:c[w],style:d,styleSpec:s}));else v!=="string"&&(g=g.concat([new Dt("projection",i,`object or string expected, ${v} found`)]));return g}};function yi(a){const i=a.value,s=a.valueSpec,c=a.styleSpec;return s.expression&&Qu(xr(i))?nc(a):s.expression&&Bl(fn(i))?Yn(a):s.type&&s3[s.type]?s3[s.type](a):jo(Ii({},a,{valueSpec:s.type?c[s.type]:s}))}function e7(a){const i=a.value,s=a.key,c=hs(a);return c.length||(i.indexOf("{fontstack}")===-1&&c.push(new Dt(s,i,'"glyphs" url must include a "{fontstack}" token')),i.indexOf("{range}")===-1&&c.push(new Dt(s,i,'"glyphs" url must include a "{range}" token'))),c}function l3(a,i=Qe){return xo(yi({key:"",value:a,valueSpec:i.$root,styleSpec:i,style:a,objectElementValidators:{glyphs:e7,"*":()=>[]}}))}const t7=a=>xo(t3(a)),r7=a=>xo(P0(a));function xo(a){return a.slice().sort((i,s)=>i.line&&s.line?i.line-s.line:0)}function u3(a,i){let s=!1;if(i&&i.length)for(const c of i)a.fire(new vr(new Error(c.message))),s=!0;return s}var n7=la,$o=3;function la(a,i,s){var c=this.cells=[];if(a instanceof ArrayBuffer){this.arrayBuffer=a;var d=new Int32Array(this.arrayBuffer);a=d[0],this.d=(i=d[1])+2*(s=d[2]);for(var g=0;g<this.d*this.d;g++){var v=d[$o+g],w=d[$o+g+1];c.push(v===w?null:d.subarray(v,w))}var E=d[$o+c.length+1];this.keys=d.subarray(d[$o+c.length],E),this.bboxes=d.subarray(E),this.insert=this._insertReadonly}else{this.d=i+2*s;for(var A=0;A<this.d*this.d;A++)c.push([]);this.keys=[],this.bboxes=[]}this.n=i,this.extent=a,this.padding=s,this.scale=i/a,this.uid=0;var O=s/i*a;this.min=-O,this.max=a+O}la.prototype.insert=function(a,i,s,c,d){this._forEachCell(i,s,c,d,this._insertCell,this.uid++),this.keys.push(a),this.bboxes.push(i),this.bboxes.push(s),this.bboxes.push(c),this.bboxes.push(d)},la.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},la.prototype._insertCell=function(a,i,s,c,d,g){this.cells[d].push(g)},la.prototype.query=function(a,i,s,c,d){var g=this.min,v=this.max;if(a<=g&&i<=g&&v<=s&&v<=c&&!d)return Array.prototype.slice.call(this.keys);var w=[];return this._forEachCell(a,i,s,c,this._queryCell,w,{},d),w},la.prototype._queryCell=function(a,i,s,c,d,g,v,w){var E=this.cells[d];if(E!==null)for(var A=this.keys,O=this.bboxes,D=0;D<E.length;D++){var z=E[D];if(v[z]===void 0){var V=4*z;(w?w(O[V+0],O[V+1],O[V+2],O[V+3]):a<=O[V+2]&&i<=O[V+3]&&s>=O[V+0]&&c>=O[V+1])?(v[z]=!0,g.push(A[z])):v[z]=!1}}},la.prototype._forEachCell=function(a,i,s,c,d,g,v,w){for(var E=this._convertToCellCoord(a),A=this._convertToCellCoord(i),O=this._convertToCellCoord(s),D=this._convertToCellCoord(c),z=E;z<=O;z++)for(var V=A;V<=D;V++){var W=this.d*V+z;if((!w||w(this._convertFromCellCoord(z),this._convertFromCellCoord(V),this._convertFromCellCoord(z+1),this._convertFromCellCoord(V+1)))&&d.call(this,a,i,s,c,W,g,v,w))return}},la.prototype._convertFromCellCoord=function(a){return(a-this.padding)/this.scale},la.prototype._convertToCellCoord=function(a){return Math.max(0,Math.min(this.d-1,Math.floor(a*this.scale)+this.padding))},la.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var a=this.cells,i=$o+this.cells.length+1+1,s=0,c=0;c<this.cells.length;c++)s+=this.cells[c].length;var d=new Int32Array(i+s+this.keys.length+this.bboxes.length);d[0]=this.extent,d[1]=this.n,d[2]=this.padding;for(var g=i,v=0;v<a.length;v++){var w=a[v];d[$o+v]=g,d.set(w,g),g+=w.length}return d[$o+a.length]=g,d.set(this.keys,g),d[$o+a.length+1]=g+=this.keys.length,d.set(this.bboxes,g),g+=this.bboxes.length,d.buffer};var Us=U(n7);const z1={};function Rt(a,i,s={}){Object.defineProperty(a,"_classRegistryKey",{value:i,writeable:!1}),z1[i]={klass:a,omit:s.omit||[]}}Rt(Object,"Object"),Us.serialize=function(a,i){const s=a.toArrayBuffer();return i&&i.push(s),{buffer:s}},Us.deserialize=function(a){return new Us(a.buffer)},Object.defineProperty(Us,"name",{value:"Grid"}),Rt(Us,"Grid"),Rt(Pn,"Color"),Rt(Error,"Error"),Rt(zo,"AJAXError"),Rt(_o,"ResolvedImage"),Rt(C1,"StylePropertyFunction"),Rt(M1,"StyleExpression",{omit:["_evaluator"]}),Rt(ec,"ZoomDependentExpression"),Rt(v0,"ZoomConstantExpression"),Rt(ka,"CompoundExpression",{omit:["_evaluate"]});for(const a in Ju)z1[Ju[a]._classRegistryKey]||Rt(Ju[a],`Expression${a}`);function M0(a){return a&&typeof ArrayBuffer<"u"&&(a instanceof ArrayBuffer||a.constructor&&a.constructor.name==="ArrayBuffer")}function C0(a){return _.ImageBitmap&&a instanceof _.ImageBitmap}function Nl(a,i){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp)return a;if(M0(a)||C0(a))return i&&i.push(a),a;if(ArrayBuffer.isView(a)){const s=a;return i&&i.push(s.buffer),s}if(a instanceof _.ImageData)return i&&i.push(a.data.buffer),a;if(Array.isArray(a)){const s=[];for(const c of a)s.push(Nl(c,i));return s}if(typeof a=="object"){const s=a.constructor,c=s._classRegistryKey;if(!c)throw new Error(`can't serialize object of unregistered class ${c}`);const d=s.serialize?s.serialize(a,i):{};if(!s.serialize){for(const g in a)a.hasOwnProperty(g)&&(z1[c].omit.indexOf(g)>=0||(d[g]=Nl(a[g],i)));a instanceof Error&&(d.message=a.message)}if(d.$name)throw new Error("$name property is reserved for worker serialization logic.");return c!=="Object"&&(d.$name=c),d}throw new Error("can't serialize object of type "+typeof a)}function Vs(a){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||M0(a)||C0(a)||ArrayBuffer.isView(a)||a instanceof _.ImageData)return a;if(Array.isArray(a))return a.map(Vs);if(typeof a=="object"){const i=a.$name||"Object",{klass:s}=z1[i];if(!s)throw new Error(`can't deserialize unregistered class ${i}`);if(s.deserialize)return s.deserialize(a);const c=Object.create(s.prototype);for(const d of Object.keys(a))d!=="$name"&&(c[d]=Vs(a[d]));return c}throw new Error("can't deserialize object of type "+typeof a)}const Ct={"Latin-1 Supplement":a=>a>=128&&a<=255,Arabic:a=>a>=1536&&a<=1791,"Arabic Supplement":a=>a>=1872&&a<=1919,"Arabic Extended-A":a=>a>=2208&&a<=2303,"Hangul Jamo":a=>a>=4352&&a<=4607,"Unified Canadian Aboriginal Syllabics":a=>a>=5120&&a<=5759,Khmer:a=>a>=6016&&a<=6143,"Unified Canadian Aboriginal Syllabics Extended":a=>a>=6320&&a<=6399,"General Punctuation":a=>a>=8192&&a<=8303,"Letterlike Symbols":a=>a>=8448&&a<=8527,"Number Forms":a=>a>=8528&&a<=8591,"Miscellaneous Technical":a=>a>=8960&&a<=9215,"Control Pictures":a=>a>=9216&&a<=9279,"Optical Character Recognition":a=>a>=9280&&a<=9311,"Enclosed Alphanumerics":a=>a>=9312&&a<=9471,"Geometric Shapes":a=>a>=9632&&a<=9727,"Miscellaneous Symbols":a=>a>=9728&&a<=9983,"Miscellaneous Symbols and Arrows":a=>a>=11008&&a<=11263,"CJK Radicals Supplement":a=>a>=11904&&a<=12031,"Kangxi Radicals":a=>a>=12032&&a<=12255,"Ideographic Description Characters":a=>a>=12272&&a<=12287,"CJK Symbols and Punctuation":a=>a>=12288&&a<=12351,Hiragana:a=>a>=12352&&a<=12447,Katakana:a=>a>=12448&&a<=12543,Bopomofo:a=>a>=12544&&a<=12591,"Hangul Compatibility Jamo":a=>a>=12592&&a<=12687,Kanbun:a=>a>=12688&&a<=12703,"Bopomofo Extended":a=>a>=12704&&a<=12735,"CJK Strokes":a=>a>=12736&&a<=12783,"Katakana Phonetic Extensions":a=>a>=12784&&a<=12799,"Enclosed CJK Letters and Months":a=>a>=12800&&a<=13055,"CJK Compatibility":a=>a>=13056&&a<=13311,"CJK Unified Ideographs Extension A":a=>a>=13312&&a<=19903,"Yijing Hexagram Symbols":a=>a>=19904&&a<=19967,"CJK Unified Ideographs":a=>a>=19968&&a<=40959,"Yi Syllables":a=>a>=40960&&a<=42127,"Yi Radicals":a=>a>=42128&&a<=42191,"Hangul Jamo Extended-A":a=>a>=43360&&a<=43391,"Hangul Syllables":a=>a>=44032&&a<=55215,"Hangul Jamo Extended-B":a=>a>=55216&&a<=55295,"Private Use Area":a=>a>=57344&&a<=63743,"CJK Compatibility Ideographs":a=>a>=63744&&a<=64255,"Arabic Presentation Forms-A":a=>a>=64336&&a<=65023,"Vertical Forms":a=>a>=65040&&a<=65055,"CJK Compatibility Forms":a=>a>=65072&&a<=65103,"Small Form Variants":a=>a>=65104&&a<=65135,"Arabic Presentation Forms-B":a=>a>=65136&&a<=65279,"Halfwidth and Fullwidth Forms":a=>a>=65280&&a<=65519};function I0(a){for(const i of a)if(O0(i.charCodeAt(0)))return!0;return!1}function i7(a){for(const i of a)if(!c3(i.charCodeAt(0)))return!1;return!0}function c3(a){return!(Ct.Arabic(a)||Ct["Arabic Supplement"](a)||Ct["Arabic Extended-A"](a)||Ct["Arabic Presentation Forms-A"](a)||Ct["Arabic Presentation Forms-B"](a))}function O0(a){return!(a!==746&&a!==747&&(a<4352||!(Ct["Bopomofo Extended"](a)||Ct.Bopomofo(a)||Ct["CJK Compatibility Forms"](a)&&!(a>=65097&&a<=65103)||Ct["CJK Compatibility Ideographs"](a)||Ct["CJK Compatibility"](a)||Ct["CJK Radicals Supplement"](a)||Ct["CJK Strokes"](a)||!(!Ct["CJK Symbols and Punctuation"](a)||a>=12296&&a<=12305||a>=12308&&a<=12319||a===12336)||Ct["CJK Unified Ideographs Extension A"](a)||Ct["CJK Unified Ideographs"](a)||Ct["Enclosed CJK Letters and Months"](a)||Ct["Hangul Compatibility Jamo"](a)||Ct["Hangul Jamo Extended-A"](a)||Ct["Hangul Jamo Extended-B"](a)||Ct["Hangul Jamo"](a)||Ct["Hangul Syllables"](a)||Ct.Hiragana(a)||Ct["Ideographic Description Characters"](a)||Ct.Kanbun(a)||Ct["Kangxi Radicals"](a)||Ct["Katakana Phonetic Extensions"](a)||Ct.Katakana(a)&&a!==12540||!(!Ct["Halfwidth and Fullwidth Forms"](a)||a===65288||a===65289||a===65293||a>=65306&&a<=65310||a===65339||a===65341||a===65343||a>=65371&&a<=65503||a===65507||a>=65512&&a<=65519)||!(!Ct["Small Form Variants"](a)||a>=65112&&a<=65118||a>=65123&&a<=65126)||Ct["Unified Canadian Aboriginal Syllabics"](a)||Ct["Unified Canadian Aboriginal Syllabics Extended"](a)||Ct["Vertical Forms"](a)||Ct["Yijing Hexagram Symbols"](a)||Ct["Yi Syllables"](a)||Ct["Yi Radicals"](a))))}function h3(a){return!(O0(a)||function(i){return!!(Ct["Latin-1 Supplement"](i)&&(i===167||i===169||i===174||i===177||i===188||i===189||i===190||i===215||i===247)||Ct["General Punctuation"](i)&&(i===8214||i===8224||i===8225||i===8240||i===8241||i===8251||i===8252||i===8258||i===8263||i===8264||i===8265||i===8273)||Ct["Letterlike Symbols"](i)||Ct["Number Forms"](i)||Ct["Miscellaneous Technical"](i)&&(i>=8960&&i<=8967||i>=8972&&i<=8991||i>=8996&&i<=9e3||i===9003||i>=9085&&i<=9114||i>=9150&&i<=9165||i===9167||i>=9169&&i<=9179||i>=9186&&i<=9215)||Ct["Control Pictures"](i)&&i!==9251||Ct["Optical Character Recognition"](i)||Ct["Enclosed Alphanumerics"](i)||Ct["Geometric Shapes"](i)||Ct["Miscellaneous Symbols"](i)&&!(i>=9754&&i<=9759)||Ct["Miscellaneous Symbols and Arrows"](i)&&(i>=11026&&i<=11055||i>=11088&&i<=11097||i>=11192&&i<=11243)||Ct["CJK Symbols and Punctuation"](i)||Ct.Katakana(i)||Ct["Private Use Area"](i)||Ct["CJK Compatibility Forms"](i)||Ct["Small Form Variants"](i)||Ct["Halfwidth and Fullwidth Forms"](i)||i===8734||i===8756||i===8757||i>=9984&&i<=10087||i>=10102&&i<=10131||i===65532||i===65533)}(a))}function f3(a){return a>=1424&&a<=2303||Ct["Arabic Presentation Forms-A"](a)||Ct["Arabic Presentation Forms-B"](a)}function o7(a,i){return!(!i&&f3(a)||a>=2304&&a<=3583||a>=3840&&a<=4255||Ct.Khmer(a))}function a7(a){for(const i of a)if(f3(i.charCodeAt(0)))return!0;return!1}const k0="deferred",D0="loading",L0="loaded";let Ul=null,m="unavailable",l=null;const f=function(a){a&&typeof a=="string"&&a.indexOf("NetworkError")>-1&&(m="error"),Ul&&Ul(a)};function y(){x.fire(new mo("pluginStateChange",{pluginStatus:m,pluginURL:l}))}const x=new Qr,T=function(){return m},M=function(){if(m!==k0||!l)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");m=D0,y(),l&&ls({url:l},a=>{a?f(a):(m=L0,y())})},I={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>m===L0||I.applyArabicShaping!=null,isLoading:()=>m===D0,setState(a){m=a.pluginStatus,l=a.pluginURL},isParsed:()=>I.applyArabicShaping!=null&&I.processBidirectionalText!=null&&I.processStyledBidirectionalText!=null,getPluginURL:()=>l};class k{constructor(i,s){this.zoom=i,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.transition=s.transition,this.pitch=s.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(i){return function(s,c){for(const d of s)if(!o7(d.charCodeAt(0),c))return!1;return!0}(i,I.isLoaded())}}class B{constructor(i,s){this.property=i,this.value=s,this.expression=function(c,d){if(Qu(c))return new C1(c,d);if(Bl(c)){const g=tc(c,d);if(g.result==="error")throw new Error(g.value.map(v=>`${v.key}: ${v.message}`).join(", "));return g.value}{let g=c;return typeof c=="string"&&d.type==="color"&&(g=Pn.parse(c)),{kind:"constant",evaluate:()=>g}}}(s===void 0?i.specification.default:s,i.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(i,s,c){return this.property.possiblyEvaluate(this,i,s,c)}}class R{constructor(i){this.property=i,this.value=new B(i,void 0)}transitioned(i,s){return new te(this.property,this.value,s,Tt({},i.transition,this.transition),i.now)}untransitioned(){return new te(this.property,this.value,null,{},0)}}class H{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitionablePropertyValues)}getValue(i){return pr(this._values[i].value.value)}setValue(i,s){this._values.hasOwnProperty(i)||(this._values[i]=new R(this._values[i].property)),this._values[i].value=new B(this._values[i].property,s===null?void 0:pr(s))}getTransition(i){return pr(this._values[i].transition)}setTransition(i,s){this._values.hasOwnProperty(i)||(this._values[i]=new R(this._values[i].property)),this._values[i].transition=pr(s)||void 0}serialize(){const i={};for(const s of Object.keys(this._values)){const c=this.getValue(s);c!==void 0&&(i[s]=c);const d=this.getTransition(s);d!==void 0&&(i[`${s}-transition`]=d)}return i}transitioned(i,s){const c=new ie(this._properties);for(const d of Object.keys(this._values))c._values[d]=this._values[d].transitioned(i,s._values[d]);return c}untransitioned(){const i=new ie(this._properties);for(const s of Object.keys(this._values))i._values[s]=this._values[s].untransitioned();return i}}class te{constructor(i,s,c,d,g){const v=d.delay||0,w=d.duration||0;g=g||0,this.property=i,this.value=s,this.begin=g+v,this.end=this.begin+w,i.specification.transition&&(d.delay||d.duration)&&(this.prior=c)}possiblyEvaluate(i,s,c){const d=i.now||0,g=this.value.possiblyEvaluate(i,s,c),v=this.prior;if(v){if(d>this.end)return this.prior=null,g;if(this.value.isDataDriven())return this.prior=null,g;if(d<this.begin)return v.possiblyEvaluate(i,s,c);{const w=(d-this.begin)/(this.end-this.begin);return this.property.interpolate(v.possiblyEvaluate(i,s,c),g,ve(w))}}return g}}class ie{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitioningPropertyValues)}possiblyEvaluate(i,s,c){const d=new ce(this._properties);for(const g of Object.keys(this._values))d._values[g]=this._values[g].possiblyEvaluate(i,s,c);return d}hasTransition(){for(const i of Object.keys(this._values))if(this._values[i].prior)return!0;return!1}}class se{constructor(i){this._properties=i,this._values=Object.create(i.defaultPropertyValues)}getValue(i){return pr(this._values[i].value)}setValue(i,s){this._values[i]=new B(this._values[i].property,s===null?void 0:pr(s))}serialize(){const i={};for(const s of Object.keys(this._values)){const c=this.getValue(s);c!==void 0&&(i[s]=c)}return i}possiblyEvaluate(i,s,c){const d=new ce(this._properties);for(const g of Object.keys(this._values))d._values[g]=this._values[g].possiblyEvaluate(i,s,c);return d}}class ae{constructor(i,s,c){this.property=i,this.value=s,this.parameters=c}isConstant(){return this.value.kind==="constant"}constantOr(i){return this.value.kind==="constant"?this.value.value:i}evaluate(i,s,c,d){return this.property.evaluate(this.value,this.parameters,i,s,c,d)}}class ce{constructor(i){this._properties=i,this._values=Object.create(i.defaultPossiblyEvaluatedValues)}get(i){return this._values[i]}}class Z{constructor(i){this.specification=i}possiblyEvaluate(i,s){return i.expression.evaluate(s)}interpolate(i,s,c){const d=Hu[this.specification.type];return d?d(i,s,c):i}}class ne{constructor(i,s){this.specification=i,this.overrides=s}possiblyEvaluate(i,s,c,d){return new ae(this,i.expression.kind==="constant"||i.expression.kind==="camera"?{kind:"constant",value:i.expression.evaluate(s,null,{},c,d)}:i.expression,s)}interpolate(i,s,c){if(i.value.kind!=="constant"||s.value.kind!=="constant")return i;if(i.value.value===void 0||s.value.value===void 0)return new ae(this,{kind:"constant",value:void 0},i.parameters);const d=Hu[this.specification.type];return d?new ae(this,{kind:"constant",value:d(i.value.value,s.value.value,c)},i.parameters):i}evaluate(i,s,c,d,g,v){return i.kind==="constant"?i.value:i.evaluate(s,c,d,g,v)}}class de{constructor(i){this.specification=i}possiblyEvaluate(i,s,c,d){return!!i.expression.evaluate(s,null,{},c,d)}interpolate(){return!1}}class pe{constructor(i){this.properties=i,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const s=new k(0,{});for(const c in i){const d=i[c];d.specification.overridable&&this.overridableProperties.push(c);const g=this.defaultPropertyValues[c]=new B(d,void 0),v=this.defaultTransitionablePropertyValues[c]=new R(d);this.defaultTransitioningPropertyValues[c]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[c]=g.possiblyEvaluate(s)}}}function Ee(a,i){return 256*(a=ge(Math.floor(a),0,255))+ge(Math.floor(i),0,255)}Rt(ne,"DataDrivenProperty"),Rt(Z,"DataConstantProperty"),Rt(de,"ColorRampProperty");const Me={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ae{constructor(i,s){this._structArray=i,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Fe{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(i,s){return i._trim(),s&&(i.isTransferred=!0,s.push(i.arrayBuffer)),{length:i.length,arrayBuffer:i.arrayBuffer}}static deserialize(i){const s=Object.create(this.prototype);return s.arrayBuffer=i.arrayBuffer,s.length=i.length,s.capacity=i.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(i){this.reserve(i),this.length=i}reserve(i){if(i>this.capacity){this.capacity=Math.max(i,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Be(a,i=1){let s=0,c=0;return{members:a.map(d=>{const g=Me[d.type].BYTES_PER_ELEMENT,v=s=He(s,Math.max(i,g)),w=d.components||1;return c=Math.max(c,g),s+=g*w,{name:d.name,type:d.type,components:w,offset:v}}),size:He(s,Math.max(c,i)),alignment:i}}function He(a,i){return Math.ceil(a/i)*i}class gt extends Fe{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,s){const c=this.length;return this.resize(c+1),this.emplace(c,i,s)}emplace(i,s,c){const d=2*i;return this.int16[d+0]=s,this.int16[d+1]=c,i}}gt.prototype.bytesPerElement=4,Rt(gt,"StructArrayLayout2i4");class Ge extends Fe{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,s,c){const d=this.length;return this.resize(d+1),this.emplace(d,i,s,c)}emplace(i,s,c,d){const g=3*i;return this.int16[g+0]=s,this.int16[g+1]=c,this.int16[g+2]=d,i}}Ge.prototype.bytesPerElement=6,Rt(Ge,"StructArrayLayout3i6");class ot extends Fe{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,s,c,d){const g=this.length;return this.resize(g+1),this.emplace(g,i,s,c,d)}emplace(i,s,c,d,g){const v=4*i;return this.int16[v+0]=s,this.int16[v+1]=c,this.int16[v+2]=d,this.int16[v+3]=g,i}}ot.prototype.bytesPerElement=8,Rt(ot,"StructArrayLayout4i8");class Ke extends Fe{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,s,c,d,g,v,w){const E=this.length;return this.resize(E+1),this.emplace(E,i,s,c,d,g,v,w)}emplace(i,s,c,d,g,v,w,E){const A=6*i,O=12*i,D=3*i;return this.int16[A+0]=s,this.int16[A+1]=c,this.uint8[O+4]=d,this.uint8[O+5]=g,this.uint8[O+6]=v,this.uint8[O+7]=w,this.float32[D+2]=E,i}}Ke.prototype.bytesPerElement=12,Rt(Ke,"StructArrayLayout2i4ub1f12");class mt extends Fe{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,s,c,d){const g=this.length;return this.resize(g+1),this.emplace(g,i,s,c,d)}emplace(i,s,c,d,g){const v=4*i;return this.float32[v+0]=s,this.float32[v+1]=c,this.float32[v+2]=d,this.float32[v+3]=g,i}}mt.prototype.bytesPerElement=16,Rt(mt,"StructArrayLayout4f16");class qe extends Fe{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,s,c,d,g){const v=this.length;return this.resize(v+1),this.emplace(v,i,s,c,d,g)}emplace(i,s,c,d,g,v){const w=6*i,E=3*i;return this.uint16[w+0]=s,this.uint16[w+1]=c,this.uint16[w+2]=d,this.uint16[w+3]=g,this.float32[E+2]=v,i}}qe.prototype.bytesPerElement=12,Rt(qe,"StructArrayLayout4ui1f12");class it extends Fe{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,s,c,d){const g=this.length;return this.resize(g+1),this.emplace(g,i,s,c,d)}emplace(i,s,c,d,g){const v=4*i;return this.uint16[v+0]=s,this.uint16[v+1]=c,this.uint16[v+2]=d,this.uint16[v+3]=g,i}}it.prototype.bytesPerElement=8,Rt(it,"StructArrayLayout4ui8");class _t extends Fe{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,s,c,d,g,v){const w=this.length;return this.resize(w+1),this.emplace(w,i,s,c,d,g,v)}emplace(i,s,c,d,g,v,w){const E=6*i;return this.int16[E+0]=s,this.int16[E+1]=c,this.int16[E+2]=d,this.int16[E+3]=g,this.int16[E+4]=v,this.int16[E+5]=w,i}}_t.prototype.bytesPerElement=12,Rt(_t,"StructArrayLayout6i12");class ut extends Fe{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,s,c,d,g,v,w,E,A,O,D,z){const V=this.length;return this.resize(V+1),this.emplace(V,i,s,c,d,g,v,w,E,A,O,D,z)}emplace(i,s,c,d,g,v,w,E,A,O,D,z,V){const W=12*i;return this.int16[W+0]=s,this.int16[W+1]=c,this.int16[W+2]=d,this.int16[W+3]=g,this.uint16[W+4]=v,this.uint16[W+5]=w,this.uint16[W+6]=E,this.uint16[W+7]=A,this.int16[W+8]=O,this.int16[W+9]=D,this.int16[W+10]=z,this.int16[W+11]=V,i}}ut.prototype.bytesPerElement=24,Rt(ut,"StructArrayLayout4i4ui4i24");class vt extends Fe{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,s,c,d,g,v){const w=this.length;return this.resize(w+1),this.emplace(w,i,s,c,d,g,v)}emplace(i,s,c,d,g,v,w){const E=10*i,A=5*i;return this.int16[E+0]=s,this.int16[E+1]=c,this.int16[E+2]=d,this.float32[A+2]=g,this.float32[A+3]=v,this.float32[A+4]=w,i}}vt.prototype.bytesPerElement=20,Rt(vt,"StructArrayLayout3i3f20");class Gt extends Fe{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i){const s=this.length;return this.resize(s+1),this.emplace(s,i)}emplace(i,s){return this.uint32[1*i+0]=s,i}}Gt.prototype.bytesPerElement=4,Rt(Gt,"StructArrayLayout1ul4");class tr extends Fe{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,s,c,d,g,v,w,E,A,O,D,z,V){const W=this.length;return this.resize(W+1),this.emplace(W,i,s,c,d,g,v,w,E,A,O,D,z,V)}emplace(i,s,c,d,g,v,w,E,A,O,D,z,V,W){const K=20*i,re=10*i;return this.int16[K+0]=s,this.int16[K+1]=c,this.int16[K+2]=d,this.int16[K+3]=g,this.int16[K+4]=v,this.float32[re+3]=w,this.float32[re+4]=E,this.float32[re+5]=A,this.float32[re+6]=O,this.int16[K+14]=D,this.uint32[re+8]=z,this.uint16[K+18]=V,this.uint16[K+19]=W,i}}tr.prototype.bytesPerElement=40,Rt(tr,"StructArrayLayout5i4f1i1ul2ui40");class jt extends Fe{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,s,c,d,g,v,w){const E=this.length;return this.resize(E+1),this.emplace(E,i,s,c,d,g,v,w)}emplace(i,s,c,d,g,v,w,E){const A=8*i;return this.int16[A+0]=s,this.int16[A+1]=c,this.int16[A+2]=d,this.int16[A+4]=g,this.int16[A+5]=v,this.int16[A+6]=w,this.int16[A+7]=E,i}}jt.prototype.bytesPerElement=16,Rt(jt,"StructArrayLayout3i2i2i16");class Yt extends Fe{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,s,c,d,g){const v=this.length;return this.resize(v+1),this.emplace(v,i,s,c,d,g)}emplace(i,s,c,d,g,v){const w=4*i,E=8*i;return this.float32[w+0]=s,this.float32[w+1]=c,this.float32[w+2]=d,this.int16[E+6]=g,this.int16[E+7]=v,i}}Yt.prototype.bytesPerElement=16,Rt(Yt,"StructArrayLayout2f1f2i16");class yr extends Fe{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,s,c,d){const g=this.length;return this.resize(g+1),this.emplace(g,i,s,c,d)}emplace(i,s,c,d,g){const v=12*i,w=3*i;return this.uint8[v+0]=s,this.uint8[v+1]=c,this.float32[w+1]=d,this.float32[w+2]=g,i}}yr.prototype.bytesPerElement=12,Rt(yr,"StructArrayLayout2ub2f12");class dr extends Fe{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,s,c){const d=this.length;return this.resize(d+1),this.emplace(d,i,s,c)}emplace(i,s,c,d){const g=3*i;return this.float32[g+0]=s,this.float32[g+1]=c,this.float32[g+2]=d,i}}dr.prototype.bytesPerElement=12,Rt(dr,"StructArrayLayout3f12");class Ut extends Fe{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,s,c){const d=this.length;return this.resize(d+1),this.emplace(d,i,s,c)}emplace(i,s,c,d){const g=3*i;return this.uint16[g+0]=s,this.uint16[g+1]=c,this.uint16[g+2]=d,i}}Ut.prototype.bytesPerElement=6,Rt(Ut,"StructArrayLayout3ui6");class zr extends Fe{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i,s,c,d,g,v,w,E,A,O,D,z,V,W,K,re,he,xe,fe,_e,Te){const be=this.length;return this.resize(be+1),this.emplace(be,i,s,c,d,g,v,w,E,A,O,D,z,V,W,K,re,he,xe,fe,_e,Te)}emplace(i,s,c,d,g,v,w,E,A,O,D,z,V,W,K,re,he,xe,fe,_e,Te,be){const Ze=30*i,We=15*i,nt=60*i;return this.int16[Ze+0]=s,this.int16[Ze+1]=c,this.int16[Ze+2]=d,this.float32[We+2]=g,this.float32[We+3]=v,this.uint16[Ze+8]=w,this.uint16[Ze+9]=E,this.uint32[We+5]=A,this.uint32[We+6]=O,this.uint32[We+7]=D,this.uint16[Ze+16]=z,this.uint16[Ze+17]=V,this.uint16[Ze+18]=W,this.float32[We+10]=K,this.float32[We+11]=re,this.uint8[nt+48]=he,this.uint8[nt+49]=xe,this.uint8[nt+50]=fe,this.uint32[We+13]=_e,this.int16[Ze+28]=Te,this.uint8[nt+58]=be,i}}zr.prototype.bytesPerElement=60,Rt(zr,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class Fr extends Fe{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i,s,c,d,g,v,w,E,A,O,D,z,V,W,K,re,he,xe,fe,_e,Te,be,Ze,We,nt,yt,Ye,at,st,pt){const xt=this.length;return this.resize(xt+1),this.emplace(xt,i,s,c,d,g,v,w,E,A,O,D,z,V,W,K,re,he,xe,fe,_e,Te,be,Ze,We,nt,yt,Ye,at,st,pt)}emplace(i,s,c,d,g,v,w,E,A,O,D,z,V,W,K,re,he,xe,fe,_e,Te,be,Ze,We,nt,yt,Ye,at,st,pt,xt){const tt=38*i,At=19*i;return this.int16[tt+0]=s,this.int16[tt+1]=c,this.int16[tt+2]=d,this.float32[At+2]=g,this.float32[At+3]=v,this.int16[tt+8]=w,this.int16[tt+9]=E,this.int16[tt+10]=A,this.int16[tt+11]=O,this.int16[tt+12]=D,this.int16[tt+13]=z,this.uint16[tt+14]=V,this.uint16[tt+15]=W,this.uint16[tt+16]=K,this.uint16[tt+17]=re,this.uint16[tt+18]=he,this.uint16[tt+19]=xe,this.uint16[tt+20]=fe,this.uint16[tt+21]=_e,this.uint16[tt+22]=Te,this.uint16[tt+23]=be,this.uint16[tt+24]=Ze,this.uint16[tt+25]=We,this.uint16[tt+26]=nt,this.uint16[tt+27]=yt,this.uint16[tt+28]=Ye,this.uint32[At+15]=at,this.float32[At+16]=st,this.float32[At+17]=pt,this.float32[At+18]=xt,i}}Fr.prototype.bytesPerElement=76,Rt(Fr,"StructArrayLayout3i2f6i15ui1ul3f76");class jr extends Fe{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i){const s=this.length;return this.resize(s+1),this.emplace(s,i)}emplace(i,s){return this.float32[1*i+0]=s,i}}jr.prototype.bytesPerElement=4,Rt(jr,"StructArrayLayout1f4");class $r extends Fe{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,s,c,d,g){const v=this.length;return this.resize(v+1),this.emplace(v,i,s,c,d,g)}emplace(i,s,c,d,g,v){const w=5*i;return this.float32[w+0]=s,this.float32[w+1]=c,this.float32[w+2]=d,this.float32[w+3]=g,this.float32[w+4]=v,i}}$r.prototype.bytesPerElement=20,Rt($r,"StructArrayLayout5f20");class _i extends Fe{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,s,c,d){const g=this.length;return this.resize(g+1),this.emplace(g,i,s,c,d)}emplace(i,s,c,d,g){const v=6*i;return this.uint32[3*i+0]=s,this.uint16[v+2]=c,this.uint16[v+3]=d,this.uint16[v+4]=g,i}}_i.prototype.bytesPerElement=12,Rt(_i,"StructArrayLayout1ul3ui12");class Jn extends Fe{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,s){const c=this.length;return this.resize(c+1),this.emplace(c,i,s)}emplace(i,s,c){const d=2*i;return this.uint16[d+0]=s,this.uint16[d+1]=c,i}}Jn.prototype.bytesPerElement=4,Rt(Jn,"StructArrayLayout2ui4");class bo extends Fe{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i){const s=this.length;return this.resize(s+1),this.emplace(s,i)}emplace(i,s){return this.uint16[1*i+0]=s,i}}bo.prototype.bytesPerElement=2,Rt(bo,"StructArrayLayout1ui2");class ua extends Fe{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,s){const c=this.length;return this.resize(c+1),this.emplace(c,i,s)}emplace(i,s,c){const d=2*i;return this.float32[d+0]=s,this.float32[d+1]=c,i}}ua.prototype.bytesPerElement=8,Rt(ua,"StructArrayLayout2f8");class cn extends Ae{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}cn.prototype.size=40;class Nr extends tr{get(i){return new cn(this,i)}}Rt(Nr,"CollisionBoxArray");class Cr extends Ae{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(i){this._structArray.uint8[this._pos1+49]=i}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(i){this._structArray.uint8[this._pos1+50]=i}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(i){this._structArray.uint32[this._pos4+13]=i}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(i){this._structArray.uint8[this._pos1+58]=i}}Cr.prototype.size=60;class Dn extends zr{get(i){return new Cr(this,i)}}Rt(Dn,"PlacedSymbolArray");class Oi extends Ae{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(i){this._structArray.uint32[this._pos4+15]=i}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}Oi.prototype.size=76;class on extends Fr{get(i){return new Oi(this,i)}}Rt(on,"SymbolInstanceArray");class Ni extends jr{getoffsetX(i){return this.float32[1*i+0]}}Rt(Ni,"GlyphOffsetArray");class R1 extends gt{getx(i){return this.int16[2*i+0]}gety(i){return this.int16[2*i+1]}}Rt(R1,"SymbolLineVertexArray");class Gs extends Ae{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}Gs.prototype.size=12;class sc extends _i{get(i){return new Gs(this,i)}}Rt(sc,"FeatureIndexArray");class Ba extends Jn{geta_centroid_pos0(i){return this.uint16[2*i+0]}geta_centroid_pos1(i){return this.uint16[2*i+1]}}Rt(Ba,"FillExtrusionCentroidArray");const fs=Be([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),Ws=Be([{name:"a_dash",components:4,type:"Uint16"}]);var B1={exports:{}},lc={exports:{}};lc.exports=function(a,i){var s,c,d,g,v,w,E,A;for(c=a.length-(s=3&a.length),d=i,v=3432918353,w=461845907,A=0;A<c;)E=255&a.charCodeAt(A)|(255&a.charCodeAt(++A))<<8|(255&a.charCodeAt(++A))<<16|(255&a.charCodeAt(++A))<<24,++A,d=27492+(65535&(g=5*(65535&(d=(d^=E=(65535&(E=(E=(65535&E)*v+(((E>>>16)*v&65535)<<16)&4294967295)<<15|E>>>17))*w+(((E>>>16)*w&65535)<<16)&4294967295)<<13|d>>>19))+((5*(d>>>16)&65535)<<16)&4294967295))+((58964+(g>>>16)&65535)<<16);switch(E=0,s){case 3:E^=(255&a.charCodeAt(A+2))<<16;case 2:E^=(255&a.charCodeAt(A+1))<<8;case 1:d^=E=(65535&(E=(E=(65535&(E^=255&a.charCodeAt(A)))*v+(((E>>>16)*v&65535)<<16)&4294967295)<<15|E>>>17))*w+(((E>>>16)*w&65535)<<16)&4294967295}return d^=a.length,d=2246822507*(65535&(d^=d>>>16))+((2246822507*(d>>>16)&65535)<<16)&4294967295,d=3266489909*(65535&(d^=d>>>13))+((3266489909*(d>>>16)&65535)<<16)&4294967295,(d^=d>>>16)>>>0};var z0=lc.exports,cx={exports:{}};cx.exports=function(a,i){for(var s,c=a.length,d=i^c,g=0;c>=4;)s=1540483477*(65535&(s=255&a.charCodeAt(g)|(255&a.charCodeAt(++g))<<8|(255&a.charCodeAt(++g))<<16|(255&a.charCodeAt(++g))<<24))+((1540483477*(s>>>16)&65535)<<16),d=1540483477*(65535&d)+((1540483477*(d>>>16)&65535)<<16)^(s=1540483477*(65535&(s^=s>>>24))+((1540483477*(s>>>16)&65535)<<16)),c-=4,++g;switch(c){case 3:d^=(255&a.charCodeAt(g+2))<<16;case 2:d^=(255&a.charCodeAt(g+1))<<8;case 1:d=1540483477*(65535&(d^=255&a.charCodeAt(g)))+((1540483477*(d>>>16)&65535)<<16)}return d=1540483477*(65535&(d^=d>>>13))+((1540483477*(d>>>16)&65535)<<16),(d^=d>>>15)>>>0};var hx=z0,dz=cx.exports;B1.exports=hx,B1.exports.murmur3=hx,B1.exports.murmur2=dz;var s7=U(B1.exports);class d3{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(i,s,c,d){this.ids.push(fx(i)),this.positions.push(s,c,d)}getPositions(i){const s=fx(i);let c=0,d=this.ids.length-1;for(;c<d;){const v=c+d>>1;this.ids[v]>=s?d=v:c=v+1}const g=[];for(;this.ids[c]===s;)g.push({index:this.positions[3*c],start:this.positions[3*c+1],end:this.positions[3*c+2]}),c++;return g}static serialize(i,s){const c=new Float64Array(i.ids),d=new Uint32Array(i.positions);return l7(c,d,0,c.length-1),s&&s.push(c.buffer,d.buffer),{ids:c,positions:d}}static deserialize(i){const s=new d3;return s.ids=i.ids,s.positions=i.positions,s.indexed=!0,s}}function fx(a){const i=+a;return!isNaN(i)&&Number.MIN_SAFE_INTEGER<=i&&i<=Number.MAX_SAFE_INTEGER?i:s7(String(a))}function l7(a,i,s,c){for(;s<c;){const d=a[s+c>>1];let g=s-1,v=c+1;for(;;){do g++;while(a[g]<d);do v--;while(a[v]>d);if(g>=v)break;p3(a,g,v),p3(i,3*g,3*v),p3(i,3*g+1,3*v+1),p3(i,3*g+2,3*v+2)}v-s<c-v?(l7(a,i,s,v),s=v+1):(l7(a,i,v+1,c),c=v)}}function p3(a,i,s){const c=a[i];a[i]=a[s],a[s]=c}Rt(d3,"FeaturePositionMap");class qs{constructor(i){this.gl=i.gl,this.initialized=!1}fetchUniformLocation(i,s){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(i,s),this.initialized=!0),!!this.location}}class m3 extends qs{constructor(i){super(i),this.current=0}set(i,s,c){this.fetchUniformLocation(i,s)&&this.current!==c&&(this.current=c,this.gl.uniform1f(this.location,c))}}class dx extends qs{constructor(i){super(i),this.current=[0,0,0,0]}set(i,s,c){this.fetchUniformLocation(i,s)&&(c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]&&c[3]===this.current[3]||(this.current=c,this.gl.uniform4f(this.location,c[0],c[1],c[2],c[3])))}}class px extends qs{constructor(i){super(i),this.current=Pn.transparent}set(i,s,c){this.fetchUniformLocation(i,s)&&(c.r===this.current.r&&c.g===this.current.g&&c.b===this.current.b&&c.a===this.current.a||(this.current=c,this.gl.uniform4f(this.location,c.r,c.g,c.b,c.a)))}}const pz=new Float32Array(16),mz=new Float32Array(9),gz=new Float32Array(4);function u7(a){return[Ee(255*a.r,255*a.g),Ee(255*a.b,255*a.a)]}class R0{constructor(i,s,c){this.value=i,this.uniformNames=s.map(d=>`u_${d}`),this.type=c}setUniform(i,s,c,d,g){s.set(i,g,d.constantOr(this.value))}getBinding(i,s){return this.type==="color"?new px(i):new m3(i)}}class F1{constructor(i,s){this.uniformNames=s.map(c=>`u_${c}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(i){this.pixelRatio=i.pixelRatio||1,this.pattern=i.tl.concat(i.br)}setUniform(i,s,c,d,g){const v=g==="u_pattern"||g==="u_dash"?this.pattern:g==="u_pixel_ratio"?this.pixelRatio:null;v&&s.set(i,g,v)}getBinding(i,s){return s==="u_pattern"||s==="u_dash"?new dx(i):new m3(i)}}class Hs{constructor(i,s,c,d){this.expression=i,this.type=c,this.maxValue=0,this.paintVertexAttributes=s.map(g=>({name:`a_${g}`,type:"Float32",components:c==="color"?2:1,offset:0})),this.paintVertexArray=new d}populatePaintArray(i,s,c,d,g,v){const w=this.paintVertexArray.length,E=this.expression.evaluate(new k(0),s,{},g,d,v);this.paintVertexArray.resize(i),this._setPaintValue(w,i,E)}updatePaintArray(i,s,c,d,g){const v=this.expression.evaluate({zoom:0},c,d,void 0,g);this._setPaintValue(i,s,v)}_setPaintValue(i,s,c){if(this.type==="color"){const d=u7(c);for(let g=i;g<s;g++)this.paintVertexArray.emplace(g,d[0],d[1])}else{for(let d=i;d<s;d++)this.paintVertexArray.emplace(d,c);this.maxValue=Math.max(this.maxValue,Math.abs(c))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Fa{constructor(i,s,c,d,g,v){this.expression=i,this.uniformNames=s.map(w=>`u_${w}_t`),this.type=c,this.useIntegerZoom=d,this.zoom=g,this.maxValue=0,this.paintVertexAttributes=s.map(w=>({name:`a_${w}`,type:"Float32",components:c==="color"?4:2,offset:0})),this.paintVertexArray=new v}populatePaintArray(i,s,c,d,g,v){const w=this.expression.evaluate(new k(this.zoom),s,{},g,d,v),E=this.expression.evaluate(new k(this.zoom+1),s,{},g,d,v),A=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValue(A,i,w,E)}updatePaintArray(i,s,c,d,g){const v=this.expression.evaluate({zoom:this.zoom},c,d,void 0,g),w=this.expression.evaluate({zoom:this.zoom+1},c,d,void 0,g);this._setPaintValue(i,s,v,w)}_setPaintValue(i,s,c,d){if(this.type==="color"){const g=u7(c),v=u7(d);for(let w=i;w<s;w++)this.paintVertexArray.emplace(w,g[0],g[1],v[0],v[1])}else{for(let g=i;g<s;g++)this.paintVertexArray.emplace(g,c,d);this.maxValue=Math.max(this.maxValue,Math.abs(c),Math.abs(d))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(i,s,c,d,g){const v=this.useIntegerZoom?Math.floor(c.zoom):c.zoom,w=ge(this.expression.interpolationFactor(v,this.zoom,this.zoom+1),0,1);s.set(i,g,w)}getBinding(i,s){return new m3(i)}}class Vl{constructor(i,s,c,d,g){this.expression=i,this.layerId=g,this.paintVertexAttributes=(c==="array"?Ws:fs).members;for(let v=0;v<s.length;++v);this.paintVertexArray=new d}populatePaintArray(i,s,c){const d=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValues(d,i,s.patterns&&s.patterns[this.layerId],c)}updatePaintArray(i,s,c,d,g,v){this._setPaintValues(i,s,c.patterns&&c.patterns[this.layerId],v)}_setPaintValues(i,s,c,d){if(!d||!c)return;const g=d[c];if(!g)return;const{tl:v,br:w,pixelRatio:E}=g;for(let A=i;A<s;A++)this.paintVertexArray.emplace(A,v[0],v[1],w[0],w[1],E)}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Gl{constructor(i,s,c=()=>!0){this.binders={},this._buffers=[];const d=[];for(const g in i.paint._values){if(!c(g))continue;const v=i.paint.get(g);if(!(v instanceof ae&&zl(v.property.specification)))continue;const w=_z(g,i.type),E=v.value,A=v.property.specification.type,O=!!v.property.useIntegerZoom,D=g==="line-dasharray"||g.endsWith("pattern"),z=g==="line-dasharray"&&i.layout.get("line-cap").value.kind!=="constant";if(E.kind!=="constant"||z)if(E.kind==="source"||z||D){const V=mx(g,A,"source");this.binders[g]=D?new Vl(E,w,A,V,i.id):new Hs(E,w,A,V),d.push(`/a_${g}`)}else{const V=mx(g,A,"composite");this.binders[g]=new Fa(E,w,A,O,s,V),d.push(`/z_${g}`)}else this.binders[g]=D?new F1(E.value,w):new R0(E.value,w,A),d.push(`/u_${g}`)}this.cacheKey=d.sort().join("")}getMaxValue(i){const s=this.binders[i];return s instanceof Hs||s instanceof Fa?s.maxValue:0}populatePaintArrays(i,s,c,d,g,v){for(const w in this.binders){const E=this.binders[w];(E instanceof Hs||E instanceof Fa||E instanceof Vl)&&E.populatePaintArray(i,s,c,d,g,v)}}setConstantPatternPositions(i){for(const s in this.binders){const c=this.binders[s];c instanceof F1&&c.setConstantPatternPositions(i)}}updatePaintArrays(i,s,c,d,g,v){let w=!1;for(const E in i){const A=s.getPositions(E);for(const O of A){const D=c.feature(O.index);for(const z in this.binders){const V=this.binders[z];if((V instanceof Hs||V instanceof Fa||V instanceof Vl)&&V.expression.isStateDependent===!0){const W=d.paint.get(z);V.expression=W.value,V.updatePaintArray(O.start,O.end,D,i[E],g,v),w=!0}}}}return w}defines(){const i=[];for(const s in this.binders){const c=this.binders[s];(c instanceof R0||c instanceof F1)&&i.push(...c.uniformNames.map(d=>`#define HAS_UNIFORM_${d}`))}return i}getBinderAttributes(){const i=[];for(const s in this.binders){const c=this.binders[s];if(c instanceof Hs||c instanceof Fa||c instanceof Vl)for(let d=0;d<c.paintVertexAttributes.length;d++)i.push(c.paintVertexAttributes[d].name)}return i}getBinderUniforms(){const i=[];for(const s in this.binders){const c=this.binders[s];if(c instanceof R0||c instanceof F1||c instanceof Fa)for(const d of c.uniformNames)i.push(d)}return i}getPaintVertexBuffers(){return this._buffers}getUniforms(i){const s=[];for(const c in this.binders){const d=this.binders[c];if(d instanceof R0||d instanceof F1||d instanceof Fa)for(const g of d.uniformNames)s.push({name:g,property:c,binding:d.getBinding(i,g)})}return s}setUniforms(i,s,c,d,g){for(const{name:v,property:w,binding:E}of c)this.binders[w].setUniform(i,E,g,d.get(w),v)}updatePaintBuffers(){this._buffers=[];for(const i in this.binders){const s=this.binders[i];(s instanceof Hs||s instanceof Fa||s instanceof Vl)&&s.paintVertexBuffer&&this._buffers.push(s.paintVertexBuffer)}}upload(i){for(const s in this.binders){const c=this.binders[s];(c instanceof Hs||c instanceof Fa||c instanceof Vl)&&c.upload(i)}this.updatePaintBuffers()}destroy(){for(const i in this.binders){const s=this.binders[i];(s instanceof Hs||s instanceof Fa||s instanceof Vl)&&s.destroy()}}}class uc{constructor(i,s,c=()=>!0){this.programConfigurations={};for(const d of i)this.programConfigurations[d.id]=new Gl(d,s,c);this.needsUpload=!1,this._featureMap=new d3,this._bufferOffset=0}populatePaintArrays(i,s,c,d,g,v,w){for(const E in this.programConfigurations)this.programConfigurations[E].populatePaintArrays(i,s,d,g,v,w);s.id!==void 0&&this._featureMap.add(s.id,c,this._bufferOffset,i),this._bufferOffset=i,this.needsUpload=!0}updatePaintArrays(i,s,c,d,g){for(const v of c)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(i,this._featureMap,s,v,d,g)||this.needsUpload}get(i){return this.programConfigurations[i]}upload(i){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(i);this.needsUpload=!1}}destroy(){for(const i in this.programConfigurations)this.programConfigurations[i].destroy()}}const yz={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function _z(a,i){return yz[a]||[a.replace(`${i}-`,"").replace(/-/g,"_")]}const vz={"line-pattern":{source:qe,composite:qe},"fill-pattern":{source:qe,composite:qe},"fill-extrusion-pattern":{source:qe,composite:qe},"line-dasharray":{source:it,composite:it}},xz={color:{source:ua,composite:mt},number:{source:jr,composite:ua}};function mx(a,i,s){const c=vz[a];return c&&c[s]||xz[i][s]}Rt(R0,"ConstantBinder"),Rt(F1,"PatternConstantBinder"),Rt(Hs,"SourceExpressionBinder"),Rt(Vl,"PatternCompositeBinder"),Rt(Fa,"CompositeExpressionBinder"),Rt(Gl,"ProgramConfiguration",{omit:["_buffers"]}),Rt(uc,"ProgramConfigurationSet");const gx="-transition";class ja extends Qr{constructor(i,s){if(super(),this.id=i.id,this.type=i.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,i.type!=="custom"&&(this.metadata=i.metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type!=="background"&&i.type!=="sky"&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter),s.layout&&(this._unevaluatedLayout=new se(s.layout)),s.paint)){this._transitionablePaint=new H(s.paint);for(const c in i.paint)this.setPaintProperty(c,i.paint[c],{validate:!1});for(const c in i.layout)this.setLayoutProperty(c,i.layout[c],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ce(s.paint)}}getLayoutProperty(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)}setLayoutProperty(i,s,c={}){s!=null&&this._validate(r7,`layers.${this.id}.layout.${i}`,i,s,c)||(i!=="visibility"?this._unevaluatedLayout.setValue(i,s):this.visibility=s)}getPaintProperty(i){return rr(i,gx)?this._transitionablePaint.getTransition(i.slice(0,-11)):this._transitionablePaint.getValue(i)}setPaintProperty(i,s,c={}){if(s!=null&&this._validate(t7,`layers.${this.id}.paint.${i}`,i,s,c))return!1;if(rr(i,gx))return this._transitionablePaint.setTransition(i.slice(0,-11),s||void 0),!1;{const d=this._transitionablePaint._values[i],g=d.value.isDataDriven(),v=d.value;this._transitionablePaint.setValue(i,s),this._handleSpecialPaintPropertyUpdate(i);const w=this._transitionablePaint._values[i].value,E=w.isDataDriven(),A=rr(i,"pattern")||i==="line-dasharray";return E||g||A||this._handleOverridablePaintPropertyUpdate(i,v,w)}}_handleSpecialPaintPropertyUpdate(i){}getProgramIds(){return null}getProgramConfiguration(i){return null}_handleOverridablePaintPropertyUpdate(i,s,c){return!1}isHidden(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"}updateTransitions(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(i,s){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,s)}serialize(){const i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),dt(i,(s,c)=>!(s===void 0||c==="layout"&&!Object.keys(s).length||c==="paint"&&!Object.keys(s).length))}_validate(i,s,c,d,g={}){return(!g||g.validate!==!1)&&u3(this,i.call(l3,{key:s,layerType:this.type,objectKey:c,value:d,styleSpec:Qe,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const i in this.paint._values){const s=this.paint.get(i);if(s instanceof ae&&zl(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=k1(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const bz=Be([{name:"a_pos",components:2,type:"Int16"}],4),wz=Be([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class Ln{constructor(i=[]){this.segments=i}prepareSegment(i,s,c,d){let g=this.segments[this.segments.length-1];return i>Ln.MAX_VERTEX_ARRAY_LENGTH&&hr(`Max vertices per segment is ${Ln.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${i}`),(!g||g.vertexLength+i>Ln.MAX_VERTEX_ARRAY_LENGTH||g.sortKey!==d)&&(g={vertexOffset:s.length,primitiveOffset:c.length,vertexLength:0,primitiveLength:0},d!==void 0&&(g.sortKey=d),this.segments.push(g)),g}get(){return this.segments}destroy(){for(const i of this.segments)for(const s in i.vaos)i.vaos[s].destroy()}static simpleSegment(i,s,c,d){return new Ln([{vertexOffset:i,primitiveOffset:s,vertexLength:c,primitiveLength:d,vaos:{},sortKey:0}])}}Ln.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Rt(Ln,"SegmentVector");var Xt=8192;class Wl{constructor(i,s){i&&(s?this.setSouthWest(i).setNorthEast(s):i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1]))}setNorthEast(i){return this._ne=i instanceof Ur?new Ur(i.lng,i.lat):Ur.convert(i),this}setSouthWest(i){return this._sw=i instanceof Ur?new Ur(i.lng,i.lat):Ur.convert(i),this}extend(i){const s=this._sw,c=this._ne;let d,g;if(i instanceof Ur)d=i,g=i;else{if(!(i instanceof Wl))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(Wl.convert(i)):this.extend(Ur.convert(i)):typeof i=="object"&&i!==null&&i.hasOwnProperty("lat")&&(i.hasOwnProperty("lon")||i.hasOwnProperty("lng"))?this.extend(Ur.convert(i)):this;if(d=i._sw,g=i._ne,!d||!g)return this}return s||c?(s.lng=Math.min(d.lng,s.lng),s.lat=Math.min(d.lat,s.lat),c.lng=Math.max(g.lng,c.lng),c.lat=Math.max(g.lat,c.lat)):(this._sw=new Ur(d.lng,d.lat),this._ne=new Ur(g.lng,g.lat)),this}getCenter(){return new Ur((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Ur(this.getWest(),this.getNorth())}getSouthEast(){return new Ur(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:s,lat:c}=Ur.convert(i);let d=this._sw.lng<=s&&s<=this._ne.lng;return this._sw.lng>this._ne.lng&&(d=this._sw.lng>=s&&s>=this._ne.lng),this._sw.lat<=c&&c<=this._ne.lat&&d}static convert(i){return!i||i instanceof Wl?i:new Wl(i)}}var g3=1e-6,wo=typeof Float32Array<"u"?Float32Array:Array;function yx(){var a=new wo(9);return wo!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[5]=0,a[6]=0,a[7]=0),a[0]=1,a[4]=1,a[8]=1,a}function _x(a,i,s){var c=i[0],d=i[1],g=i[2],v=i[3],w=i[4],E=i[5],A=i[6],O=i[7],D=i[8],z=s[0],V=s[1],W=s[2],K=s[3],re=s[4],he=s[5],xe=s[6],fe=s[7],_e=s[8];return a[0]=z*c+V*v+W*A,a[1]=z*d+V*w+W*O,a[2]=z*g+V*E+W*D,a[3]=K*c+re*v+he*A,a[4]=K*d+re*w+he*O,a[5]=K*g+re*E+he*D,a[6]=xe*c+fe*v+_e*A,a[7]=xe*d+fe*w+_e*O,a[8]=xe*g+fe*E+_e*D,a}function $a(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function c7(a,i){var s=i[0],c=i[1],d=i[2],g=i[3],v=i[4],w=i[5],E=i[6],A=i[7],O=i[8],D=i[9],z=i[10],V=i[11],W=i[12],K=i[13],re=i[14],he=i[15],xe=s*w-c*v,fe=s*E-d*v,_e=s*A-g*v,Te=c*E-d*w,be=c*A-g*w,Ze=d*A-g*E,We=O*K-D*W,nt=O*re-z*W,yt=O*he-V*W,Ye=D*re-z*K,at=D*he-V*K,st=z*he-V*re,pt=xe*st-fe*at+_e*Ye+Te*yt-be*nt+Ze*We;return pt?(a[0]=(w*st-E*at+A*Ye)*(pt=1/pt),a[1]=(d*at-c*st-g*Ye)*pt,a[2]=(K*Ze-re*be+he*Te)*pt,a[3]=(z*be-D*Ze-V*Te)*pt,a[4]=(E*yt-v*st-A*nt)*pt,a[5]=(s*st-d*yt+g*nt)*pt,a[6]=(re*_e-W*Ze-he*fe)*pt,a[7]=(O*Ze-z*_e+V*fe)*pt,a[8]=(v*at-w*yt+A*We)*pt,a[9]=(c*yt-s*at-g*We)*pt,a[10]=(W*be-K*_e+he*xe)*pt,a[11]=(D*_e-O*be-V*xe)*pt,a[12]=(w*nt-v*Ye-E*We)*pt,a[13]=(s*Ye-c*nt+d*We)*pt,a[14]=(K*fe-W*Te-re*xe)*pt,a[15]=(O*Te-D*fe+z*xe)*pt,a):null}function cc(a,i,s){var c=i[0],d=i[1],g=i[2],v=i[3],w=i[4],E=i[5],A=i[6],O=i[7],D=i[8],z=i[9],V=i[10],W=i[11],K=i[12],re=i[13],he=i[14],xe=i[15],fe=s[0],_e=s[1],Te=s[2],be=s[3];return a[0]=fe*c+_e*w+Te*D+be*K,a[1]=fe*d+_e*E+Te*z+be*re,a[2]=fe*g+_e*A+Te*V+be*he,a[3]=fe*v+_e*O+Te*W+be*xe,a[4]=(fe=s[4])*c+(_e=s[5])*w+(Te=s[6])*D+(be=s[7])*K,a[5]=fe*d+_e*E+Te*z+be*re,a[6]=fe*g+_e*A+Te*V+be*he,a[7]=fe*v+_e*O+Te*W+be*xe,a[8]=(fe=s[8])*c+(_e=s[9])*w+(Te=s[10])*D+(be=s[11])*K,a[9]=fe*d+_e*E+Te*z+be*re,a[10]=fe*g+_e*A+Te*V+be*he,a[11]=fe*v+_e*O+Te*W+be*xe,a[12]=(fe=s[12])*c+(_e=s[13])*w+(Te=s[14])*D+(be=s[15])*K,a[13]=fe*d+_e*E+Te*z+be*re,a[14]=fe*g+_e*A+Te*V+be*he,a[15]=fe*v+_e*O+Te*W+be*xe,a}function B0(a,i,s){var c,d,g,v,w,E,A,O,D,z,V,W,K=s[0],re=s[1],he=s[2];return i===a?(a[12]=i[0]*K+i[4]*re+i[8]*he+i[12],a[13]=i[1]*K+i[5]*re+i[9]*he+i[13],a[14]=i[2]*K+i[6]*re+i[10]*he+i[14],a[15]=i[3]*K+i[7]*re+i[11]*he+i[15]):(d=i[1],g=i[2],v=i[3],w=i[4],E=i[5],A=i[6],O=i[7],D=i[8],z=i[9],V=i[10],W=i[11],a[0]=c=i[0],a[1]=d,a[2]=g,a[3]=v,a[4]=w,a[5]=E,a[6]=A,a[7]=O,a[8]=D,a[9]=z,a[10]=V,a[11]=W,a[12]=c*K+w*re+D*he+i[12],a[13]=d*K+E*re+z*he+i[13],a[14]=g*K+A*re+V*he+i[14],a[15]=v*K+O*re+W*he+i[15]),a}function hc(a,i,s){var c=s[0],d=s[1],g=s[2];return a[0]=i[0]*c,a[1]=i[1]*c,a[2]=i[2]*c,a[3]=i[3]*c,a[4]=i[4]*d,a[5]=i[5]*d,a[6]=i[6]*d,a[7]=i[7]*d,a[8]=i[8]*g,a[9]=i[9]*g,a[10]=i[10]*g,a[11]=i[11]*g,a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15],a}function h7(a,i,s){var c=Math.sin(s),d=Math.cos(s),g=i[4],v=i[5],w=i[6],E=i[7],A=i[8],O=i[9],D=i[10],z=i[11];return i!==a&&(a[0]=i[0],a[1]=i[1],a[2]=i[2],a[3]=i[3],a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15]),a[4]=g*d+A*c,a[5]=v*d+O*c,a[6]=w*d+D*c,a[7]=E*d+z*c,a[8]=A*d-g*c,a[9]=O*d-v*c,a[10]=D*d-w*c,a[11]=z*d-E*c,a}function y3(a,i,s){var c=Math.sin(s),d=Math.cos(s),g=i[0],v=i[1],w=i[2],E=i[3],A=i[8],O=i[9],D=i[10],z=i[11];return i!==a&&(a[4]=i[4],a[5]=i[5],a[6]=i[6],a[7]=i[7],a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15]),a[0]=g*d-A*c,a[1]=v*d-O*c,a[2]=w*d-D*c,a[3]=E*d-z*c,a[8]=g*c+A*d,a[9]=v*c+O*d,a[10]=w*c+D*d,a[11]=E*c+z*d,a}function vx(a,i){return a[0]=i[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=i[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=i[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function xx(a,i,s){var c,d,g,v=s[0],w=s[1],E=s[2],A=Math.hypot(v,w,E);return A<g3?null:(v*=A=1/A,w*=A,E*=A,c=Math.sin(i),d=Math.cos(i),a[0]=v*v*(g=1-d)+d,a[1]=w*v*g+E*c,a[2]=E*v*g-w*c,a[3]=0,a[4]=v*w*g-E*c,a[5]=w*w*g+d,a[6]=E*w*g+v*c,a[7]=0,a[8]=v*E*g+w*c,a[9]=w*E*g-v*c,a[10]=E*E*g+d,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a)}Math.hypot||(Math.hypot=function(){for(var a=0,i=arguments.length;i--;)a+=arguments[i]*arguments[i];return Math.sqrt(a)});var Tz=cc;function f7(){var a=new wo(3);return wo!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0),a}function bx(a){var i=new wo(3);return i[0]=a[0],i[1]=a[1],i[2]=a[2],i}function F0(a){return Math.hypot(a[0],a[1],a[2])}function j1(a,i,s){var c=new wo(3);return c[0]=a,c[1]=i,c[2]=s,c}function Zs(a,i,s){return a[0]=i[0]+s[0],a[1]=i[1]+s[1],a[2]=i[2]+s[2],a}function d7(a,i,s){return a[0]=i[0]-s[0],a[1]=i[1]-s[1],a[2]=i[2]-s[2],a}function wx(a,i,s){return a[0]=i[0]*s[0],a[1]=i[1]*s[1],a[2]=i[2]*s[2],a}function j0(a,i,s){return a[0]=Math.min(i[0],s[0]),a[1]=Math.min(i[1],s[1]),a[2]=Math.min(i[2],s[2]),a}function $0(a,i,s){return a[0]=Math.max(i[0],s[0]),a[1]=Math.max(i[1],s[1]),a[2]=Math.max(i[2],s[2]),a}function No(a,i,s){return a[0]=i[0]*s,a[1]=i[1]*s,a[2]=i[2]*s,a}function N0(a,i,s,c){return a[0]=i[0]+s[0]*c,a[1]=i[1]+s[1]*c,a[2]=i[2]+s[2]*c,a}function Ui(a,i){var s=i[0],c=i[1],d=i[2],g=s*s+c*c+d*d;return g>0&&(g=1/Math.sqrt(g)),a[0]=i[0]*g,a[1]=i[1]*g,a[2]=i[2]*g,a}function ca(a,i){return a[0]*i[0]+a[1]*i[1]+a[2]*i[2]}function p7(a,i,s){var c=i[0],d=i[1],g=i[2],v=s[0],w=s[1],E=s[2];return a[0]=d*E-g*w,a[1]=g*v-c*E,a[2]=c*w-d*v,a}function An(a,i,s){var c=i[0],d=i[1],g=i[2],v=s[3]*c+s[7]*d+s[11]*g+s[15];return a[0]=(s[0]*c+s[4]*d+s[8]*g+s[12])/(v=v||1),a[1]=(s[1]*c+s[5]*d+s[9]*g+s[13])/v,a[2]=(s[2]*c+s[6]*d+s[10]*g+s[14])/v,a}function Tx(a,i,s){var c=s[0],d=s[1],g=s[2],v=i[0],w=i[1],E=i[2],A=d*E-g*w,O=g*v-c*E,D=c*w-d*v,z=d*D-g*O,V=g*A-c*D,W=c*O-d*A,K=2*s[3];return O*=K,D*=K,V*=2,W*=2,a[0]=v+(A*=K)+(z*=2),a[1]=w+O+V,a[2]=E+D+W,a}var U0,Na=d7,Sz=wx,Ez=F0;function Sx(a,i,s){return a[0]=i[0]*s,a[1]=i[1]*s,a[2]=i[2]*s,a[3]=i[3]*s,a}function Ex(a,i){var s=i[0],c=i[1],d=i[2],g=i[3],v=s*s+c*c+d*d+g*g;return v>0&&(v=1/Math.sqrt(v)),a[0]=s*v,a[1]=c*v,a[2]=d*v,a[3]=g*v,a}function fc(a,i,s){var c=i[0],d=i[1],g=i[2],v=i[3];return a[0]=s[0]*c+s[4]*d+s[8]*g+s[12]*v,a[1]=s[1]*c+s[5]*d+s[9]*g+s[13]*v,a[2]=s[2]*c+s[6]*d+s[10]*g+s[14]*v,a[3]=s[3]*c+s[7]*d+s[11]*g+s[15]*v,a}function Px(){var a=new wo(4);return wo!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0),a[3]=1,a}function Ax(a){return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a}function Mx(a,i,s){s*=.5;var c=i[0],d=i[1],g=i[2],v=i[3],w=Math.sin(s),E=Math.cos(s);return a[0]=c*E+v*w,a[1]=d*E+g*w,a[2]=g*E-d*w,a[3]=v*E-c*w,a}function Cx(a,i,s){s*=.5;var c=i[0],d=i[1],g=i[2],v=i[3],w=Math.sin(s),E=Math.cos(s);return a[0]=c*E-g*w,a[1]=d*E+v*w,a[2]=g*E+c*w,a[3]=v*E-d*w,a}f7(),U0=new wo(4),wo!=Float32Array&&(U0[0]=0,U0[1]=0,U0[2]=0,U0[3]=0);var Pz=Ex;f7(),j1(1,0,0),j1(0,1,0),Px(),Px(),yx();const Az=Be([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:Ix}=Az,Ox=Be([{name:"a_pos_3",components:3,type:"Int16"}]);var V0=Be([{name:"a_pos",type:"Int16",components:2}]);class m7{constructor(i,s){this.pos=i,this.dir=s}intersectsPlane(i,s,c){const d=ca(s,this.dir);if(Math.abs(d)<1e-6)return!1;const g=((i[0]-this.pos[0])*s[0]+(i[1]-this.pos[1])*s[1]+(i[2]-this.pos[2])*s[2])/d;return c[0]=this.pos[0]+this.dir[0]*g,c[1]=this.pos[1]+this.dir[1]*g,c[2]=this.pos[2]+this.dir[2]*g,!0}closestPointOnSphere(i,s,c){if(function(V,W){var K=V[0],re=V[1],he=V[2],xe=W[0],fe=W[1],_e=W[2];return Math.abs(K-xe)<=g3*Math.max(1,Math.abs(K),Math.abs(xe))&&Math.abs(re-fe)<=g3*Math.max(1,Math.abs(re),Math.abs(fe))&&Math.abs(he-_e)<=g3*Math.max(1,Math.abs(he),Math.abs(_e))}(this.pos,i)||s===0)return c[0]=c[1]=c[2]=0,!1;const[d,g,v]=this.dir,w=this.pos[0]-i[0],E=this.pos[1]-i[1],A=this.pos[2]-i[2],O=d*d+g*g+v*v,D=2*(w*d+E*g+A*v),z=D*D-4*O*(w*w+E*E+A*A-s*s);if(z<0){const V=Math.max(-D/2,0),W=w+d*V,K=E+g*V,re=A+v*V,he=Math.hypot(W,K,re);return c[0]=W*s/he,c[1]=K*s/he,c[2]=re*s/he,!1}{const V=(-D-Math.sqrt(z))/(2*O);if(V<0){const W=Math.hypot(w,E,A);return c[0]=w*s/W,c[1]=E*s/W,c[2]=A*s/W,!1}return c[0]=w+d*V,c[1]=E+g*V,c[2]=A+v*V,!0}}}class g7{constructor(i,s,c,d,g){this.TL=i,this.TR=s,this.BR=c,this.BL=d,this.horizon=g}static fromInvProjectionMatrix(i,s,c){const d=[-1,1,1],g=[1,1,1],v=[1,-1,1],w=[-1,-1,1],E=An(d,d,i),A=An(g,g,i),O=An(v,v,i),D=An(w,w,i);return new g7(E,A,O,D,s/c)}}class y7{constructor(i,s){this.points=i,this.planes=s}static fromInvProjectionMatrix(i,s,c,d){const g=Math.pow(2,c),v=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(E=>{const A=fc([],E,i),O=1/A[3]/s*g;return function(D,z,V){return D[0]=z[0]*V[0],D[1]=z[1]*V[1],D[2]=z[2]*V[2],D[3]=z[3]*V[3],D}(A,A,[O,O,d?1/A[3]:O,O])}),w=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(E=>{const A=Ui([],p7([],Na([],v[E[0]],v[E[1]]),Na([],v[E[2]],v[E[1]]))),O=-ca(A,v[E[1]]);return A.concat(O)});return new y7(v,w)}}class Vi{static fromPoints(i){const s=[1/0,1/0,1/0],c=[-1/0,-1/0,-1/0];for(const d of i)j0(s,s,d),$0(c,c,d);return new Vi(s,c)}static applyTransform(i,s){const c=i.getCorners();for(let d=0;d<c.length;++d)An(c[d],c[d],s);return Vi.fromPoints(c)}constructor(i,s){this.min=i,this.max=s,this.center=No([],Zs([],this.min,this.max),.5)}quadrant(i){const s=[i%2==0,i<2],c=bx(this.min),d=bx(this.max);for(let g=0;g<s.length;g++)c[g]=s[g]?this.min[g]:this.center[g],d[g]=s[g]?this.center[g]:this.max[g];return d[2]=this.max[2],new Vi(c,d)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}distanceZ(i){return Math.max(Math.min(this.max[2],i[2]),this.min[2])-i[2]}getCorners(){const i=this.min,s=this.max;return[[i[0],i[1],i[2]],[s[0],i[1],i[2]],[s[0],s[1],i[2]],[i[0],s[1],i[2]],[i[0],i[1],s[2]],[s[0],i[1],s[2]],[s[0],s[1],s[2]],[i[0],s[1],s[2]]]}intersects(i){const s=this.getCorners();let c=!0;for(let d=0;d<i.planes.length;d++){const g=i.planes[d];let v=0;for(let w=0;w<s.length;w++)v+=ca(g,s[w])+g[3]>=0;if(v===0)return 0;v!==s.length&&(c=!1)}if(c)return 2;for(let d=0;d<3;d++){let g=Number.MAX_VALUE,v=-Number.MAX_VALUE;for(let w=0;w<i.points.length;w++){const E=i.points[w][d]-this.min[d];g=Math.min(g,E),v=Math.max(v,E)}if(v<0||g>this.max[d]-this.min[d])return 0}return 1}}const _7=5,kx=6,ds=Xt/Math.PI/2,Mz=16383,dc=64,G0=[dc,32,16],ha=-ds,fa=ds,Cz=[new Vi([ha,ha,ha],[fa,fa,fa]),new Vi([ha,ha,ha],[0,0,fa]),new Vi([0,ha,ha],[fa,0,fa]),new Vi([ha,0,ha],[0,fa,fa]),new Vi([0,0,ha],[fa,fa,fa])];function _3(a){return a*ds/H0}function Dx(a,i,s,c=!0){const d=No([],a._camera.position,a.worldSize),g=[i,s,1,1];fc(g,g,a.pixelMatrixInverse),Sx(g,g,1/g[3]);const v=Ui([],Na([],g,d)),w=a.globeMatrix,E=[w[12],w[13],w[14]],A=Na([],E,d),O=F0(A),D=Ui([],A),z=a.worldSize/(2*Math.PI),V=ca(D,v),W=Math.asin(z/O);if(W<Math.acos(V)){if(!c)return null;const yt=[],Ye=[];No(yt,v,O/V),Ui(Ye,Na(Ye,yt,A)),Ui(v,Zs(v,A,No(v,Ye,Math.tan(W)*O)))}const K=[];new m7(d,v).closestPointOnSphere(E,z,K);const re=Ui([],Bi(w,0)),he=Ui([],Bi(w,1)),xe=Ui([],Bi(w,2)),fe=ca(re,K),_e=ca(he,K),Te=ca(xe,K),be=Je(Math.asin(-_e/z));let Ze=Je(Math.atan2(fe,Te));Ze=a.center.lng+function(yt,Ye){const at=(Ye-yt+180)%360-180;return at<-180?at+360:at}(a.center.lng,Ze);const We=ms(Ze),nt=ge(gs(be),0,1);return new V1(We,nt)}class Iz{constructor(i,s,c){this.a=Na([],i,c),this.b=Na([],s,c),this.center=c;const d=Ui([],this.a),g=Ui([],this.b);this.angle=Math.acos(ca(d,g))}}function v7(a,i){if(a.angle===0)return null;let s;return s=a.a[i]===0?1/a.angle*.5*Math.PI:1/a.angle*Math.atan(a.b[i]/a.a[i]/Math.sin(a.angle)-1/Math.tan(a.angle)),s<0||s>1?null:function(c,d,g,v){const w=Math.sin(g);return c*(Math.sin((1-v)*g)/w)+d*(Math.sin(v*g)/w)}(a.a[i],a.b[i],a.angle,ge(s,0,1))+a.center[i]}function ps(a){if(a.z<=1)return Cz[a.z+2*a.y+a.x];const i=x7(v3(a));return Vi.fromPoints(i)}function pc(a,i,s){return No(a,a,1-s),N0(a,a,i,s)}function Lx(a,i){const s=U1(i.zoom);if(s===0)return ps(a);const c=v3(a),d=x7(c),g=ms(c.getWest())*i.worldSize,v=ms(c.getEast())*i.worldSize,w=gs(c.getNorth())*i.worldSize,E=gs(c.getSouth())*i.worldSize,A=[g,w,0],O=[v,w,0],D=[g,E,0],z=[v,E,0],V=c7([],i.globeMatrix);return An(A,A,V),An(O,O,V),An(D,D,V),An(z,z,V),d[0]=pc(d[0],D,s),d[1]=pc(d[1],z,s),d[2]=pc(d[2],O,s),d[3]=pc(d[3],A,s),Vi.fromPoints(d)}function zx(a,i,s){for(const c of a)An(c,c,i),No(c,c,s)}function Oz(a,i,s){const c=i/a.worldSize,d=a.globeMatrix;if(s.z<=1){const We=ps(s).getCorners();return zx(We,d,c),Vi.fromPoints(We)}const g=v3(s),v=x7(g);zx(v,d,c);const w=Number.MAX_VALUE,E=[-w,-w,-w],A=[w,w,w];if(g.contains(a.center)){for(const yt of v)j0(A,A,yt),$0(E,E,yt);E[2]=0;const We=a.point,nt=[We.x*c,We.y*c,0];return j0(A,A,nt),$0(E,E,nt),new Vi(A,E)}const O=[d[12]*c,d[13]*c,d[14]*c],D=g.getCenter(),z=ge(a.center.lat,-xi,xi),V=ge(D.lat,-xi,xi),W=ms(a.center.lng),K=gs(z);let re=W-ms(D.lng);const he=K-gs(V);re>.5?re-=1:re<-.5&&(re+=1);let xe=0;Math.abs(re)>Math.abs(he)?xe=re>=0?1:3:(xe=he>=0?0:2,N0(O,O,[d[4]*c,d[5]*c,d[6]*c],-Math.sin(De(he>=0?g.getSouth():g.getNorth()))*ds));const fe=v[xe],_e=v[(xe+1)%4],Te=new Iz(fe,_e,O),be=[v7(Te,0)||fe[0],v7(Te,1)||fe[1],v7(Te,2)||fe[2]],Ze=U1(a.zoom);if(Ze>0){const We=function({x:yt,y:Ye,z:at},st,pt,xt,tt){const At=1/(1<<at);let $t=yt*At,Mt=$t+At,ir=Ye*At,wt=ir+At,Wt=0;const or=($t+Mt)/2-xt;return or>.5?Wt=-1:or<-.5&&(Wt=1),$t=(($t+Wt)*st-(xt*=st))*pt+xt,Mt=((Mt+Wt)*st-xt)*pt+xt,ir=(ir*st-(tt*=st))*pt+tt,wt=(wt*st-tt)*pt+tt,[[$t,wt,0],[Mt,wt,0],[Mt,ir,0],[$t,ir,0]]}(s,i,a._pixelsPerMercatorPixel,W,K);for(let yt=0;yt<v.length;yt++)pc(v[yt],We[yt],Ze);const nt=Zs([],We[xe],We[(xe+1)%4]);No(nt,nt,.5),pc(be,nt,Ze)}for(const We of v)j0(A,A,We),$0(E,E,We);return A[2]=Math.min(fe[2],_e[2]),j0(A,A,be),$0(E,E,be),new Vi(A,E)}function v3({x:a,y:i,z:s}){const c=1/(1<<s),d=new Ur(Uo(a*c),vi((i+1)*c)),g=new Ur(Uo((a+1)*c),vi(i*c));return new Wl(d,g)}function x7(a){const i=De(a.getNorth()),s=De(a.getSouth()),c=Math.cos(i),d=Math.cos(s),g=Math.sin(i),v=Math.sin(s),w=a.getWest(),E=a.getEast();return[$1(d,v,w),$1(d,v,E),$1(c,g,E),$1(c,g,w)]}function $1(a,i,s,c=ds){return s=De(s),[a*Math.sin(s)*c,-i*c,a*Math.cos(s)*c]}function N1(a,i,s){return $1(Math.cos(De(a)),Math.sin(De(a)),i,s)}function W0(a,i,s,c){const d=1<<s.z,g=(a/Xt+s.x)/d;return N1(vi((i/Xt+s.y)/d),Uo(g),c)}function x3({min:a,max:i}){return Mz/Math.max(i[0]-a[0],i[1]-a[1],i[2]-a[2])}const Rx=new Float64Array(16);function q0(a){const i=x3(a),s=vx(Rx,[i,i,i]);return B0(s,s,((c=[])[0]=-(d=a.min)[0],c[1]=-d[1],c[2]=-d[2],c));var c,d}function b7(a){const i=(c=a.min,(s=Rx)[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=c[0],s[13]=c[1],s[14]=c[2],s[15]=1,s);var s,c;const d=1/x3(a);return hc(i,i,[d,d,d])}function Bx(a,i,s,c,d){const g=function(E){const A=Xt/(2*Math.PI);return E/(2*Math.PI)/A}(s),v=[a,i,-s/(2*Math.PI)],w=$a(new Float64Array(16));return B0(w,w,v),hc(w,w,[g,g,g]),h7(w,w,De(-d)),y3(w,w,De(-c)),w}function U1(a){return $e(_7,kx,a)}function Fx(a,i){const s=N1(i.lat,i.lng),c=function(W){const K=N1(W._center.lat,W._center.lng);let re=p7([],j1(0,1,0),K);const he=xx([],-W.angle,K);re=An(re,re,he),xx(he,-W._pitch,re);const xe=Ui([],K);return No(xe,xe,_3(W.cameraToCenterDistance/W.pixelsPerMeter)),An(xe,xe,he),Zs([],K,xe)}(a);return v=(d=d7([],c,s))[0],w=d[1],E=d[2],A=(g=s)[0],O=g[1],D=g[2],V=(z=Math.sqrt(v*v+w*w+E*E)*Math.sqrt(A*A+O*O+D*D))&&ca(d,g)/z,Math.acos(Math.min(Math.max(V,-1),1));var d,g,v,w,E,A,O,D,z,V}function w7(a,i){return Fx(a,i)>Math.PI/2*1.01}const jx=De(85),kz=Math.cos(jx),Dz=Math.sin(jx),H0=63710088e-1,$x=2*Math.PI*H0;class ql{constructor(i,s){if(isNaN(i)||isNaN(s))throw new Error(`Invalid LngLat object: (${i}, ${s})`);if(this.lng=+i,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new ql(rt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(i){const s=Math.PI/180,c=this.lat*s,d=i.lat*s,g=Math.sin(c)*Math.sin(d)+Math.cos(c)*Math.cos(d)*Math.cos((i.lng-this.lng)*s);return H0*Math.acos(Math.min(g,1))}toBounds(i=0){const s=360*i/40075017,c=s/Math.cos(Math.PI/180*this.lat);return new Wl(new ql(this.lng-c,this.lat-s),new ql(this.lng+c,this.lat+s))}toEcef(i){const s=_3(i);return N1(this.lat,this.lng,ds+s)}static convert(i){if(i instanceof ql)return i;if(Array.isArray(i)&&(i.length===2||i.length===3))return new ql(Number(i[0]),Number(i[1]));if(!Array.isArray(i)&&typeof i=="object"&&i!==null)return new ql(Number("lng"in i?i.lng:i.lon),Number(i.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var Ur=ql;function T7(a){return $x*Math.cos(a*Math.PI/180)}function ms(a){return(180+a)/360}function gs(a){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a*Math.PI/360)))/360}function Ua(a,i){return a/T7(i)}function Uo(a){return 360*a-180}function vi(a){return 360/Math.PI*Math.atan(Math.exp((180-360*a)*Math.PI/180))-90}function Nx(a,i){return a*T7(vi(i))}const xi=85.051129;function Ux(a){return 1/Math.cos(a*Math.PI/180)}class V1{constructor(i,s,c=0){this.x=+i,this.y=+s,this.z=+c}static fromLngLat(i,s=0){const c=Ur.convert(i);return new V1(ms(c.lng),gs(c.lat),Ua(s,c.lat))}toLngLat(){return new Ur(Uo(this.x),vi(this.y))}toAltitude(){return Nx(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/$x*Ux(vi(this.y))}}function S7(a,i,s,c,d,g,v,w,E){const A=(i+c)/2,O=(s+d)/2,D=new oe(A,O);w(D),function(z,V,W,K,re,he){const xe=W-re,fe=K-he;return Math.abs((K-V)*xe-(W-z)*fe)/Math.hypot(xe,fe)}(D.x,D.y,g.x,g.y,v.x,v.y)>=E?(S7(a,i,s,A,O,g,D,w,E),S7(a,A,O,c,d,D,v,w,E)):a.push(v)}function Vx(a,i,s){let c=a[0],d=c.x,g=c.y;i(c);const v=[c];for(let w=1;w<a.length;w++){const E=a[w],{x:A,y:O}=E;i(E),S7(v,d,g,A,O,c,E,i,s),d=A,g=O,c=E}return v}function E7(a,i,s,c){if(c(i,s)){const d=i.add(s)._mult(.5);E7(a,i,d,c),E7(a,d,s,c)}else a.push(s)}function Lz(a,i){let s=a[0];const c=[s];for(let d=1;d<a.length;d++){const g=a[d];E7(c,s,g,i),s=g}return c}const P7=Math.pow(2,14)-1,Gx=-P7-1;function zz(a,i){const s=Math.round(a.x*i),c=Math.round(a.y*i);return a.x=ge(s,Gx,P7),a.y=ge(c,Gx,P7),(s<a.x||s>a.x+1||c<a.y||c>a.y+1)&&hr("Geometry exceeds allowed extent, reduce your vector tile buffer size"),a}function Xs(a,i,s){const c=a.loadGeometry(),d=a.extent,g=Xt/d;if(i&&s&&s.projection.isReprojectedInTileSpace){const v=1<<i.z,{scale:w,x:E,y:A,projection:O}=s,D=z=>{const V=Uo((i.x+z.x/d)/v),W=vi((i.y+z.y/d)/v),K=O.project(V,W);z.x=(K.x*w-E)*d,z.y=(K.y*w-A)*d};for(let z=0;z<c.length;z++)if(a.type!==1)c[z]=Vx(c[z],D,1);else{const V=[];for(const W of c[z])W.x<0||W.x>=d||W.y<0||W.y>=d||(D(W),V.push(W));c[z]=V}}for(const v of c)for(const w of v)zz(w,g);return c}function mc(a,i){return{type:a.type,id:a.id,properties:a.properties,geometry:i?Xs(a):[]}}function b3(a,i,s,c,d){a.emplaceBack(2*i+(c+1)/2,2*s+(d+1)/2)}function w3(a,i,s){a.emplaceBack(i.x,i.y,i.z,s[0]*16384,s[1]*16384,s[2]*16384)}class A7{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(s=>s.id),this.index=i.index,this.hasPattern=!1,this.projection=i.projection,this.layoutVertexArray=new gt,this.indexArray=new Ut,this.segments=new Ln,this.programConfigurations=new uc(i.layers,i.zoom),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(i,s,c,d){const g=this.layers[0],v=[];let w=null;g.type==="circle"&&(w=g.layout.get("circle-sort-key"));for(const{feature:A,id:O,index:D,sourceLayerIndex:z}of i){const V=this.layers[0]._featureFilter.needGeometry,W=mc(A,V);if(!this.layers[0]._featureFilter.filter(new k(this.zoom),W,c))continue;const K=w?w.evaluate(W,{},c):void 0,re={id:O,properties:A.properties,type:A.type,sourceLayerIndex:z,index:D,geometry:V?W.geometry:Xs(A,c,d),patterns:{},sortKey:K};v.push(re)}w&&v.sort((A,O)=>A.sortKey-O.sortKey);let E=null;d.projection.name==="globe"&&(this.globeExtVertexArray=new _t,E=d.projection);for(const A of v){const{geometry:O,index:D,sourceLayerIndex:z}=A,V=i[D].feature;this.addFeature(A,O,D,s.availableImages,c,E),s.featureIndex.insert(V,O,D,z,this.index)}}update(i,s,c,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,s,this.stateDependentLayers,c,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,bz.members),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=i.createVertexBuffer(this.globeExtVertexArray,wz.members))),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(i,s,c,d,g,v){for(const w of s)for(const E of w){const A=E.x,O=E.y;if(A<0||A>=Xt||O<0||O>=Xt)continue;if(v){const V=v.projectTilePoint(A,O,g),W=v.upVector(g,A,O),K=this.globeExtVertexArray;w3(K,V,W),w3(K,V,W),w3(K,V,W),w3(K,V,W)}const D=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,i.sortKey),z=D.vertexLength;b3(this.layoutVertexArray,A,O,-1,-1),b3(this.layoutVertexArray,A,O,1,-1),b3(this.layoutVertexArray,A,O,1,1),b3(this.layoutVertexArray,A,O,-1,1),this.indexArray.emplaceBack(z,z+1,z+2),this.indexArray.emplaceBack(z,z+2,z+3),D.vertexLength+=4,D.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,c,{},d,g)}}function Wx(a,i){for(let s=0;s<a.length;s++)if(gc(i,a[s]))return!0;for(let s=0;s<i.length;s++)if(gc(a,i[s]))return!0;return!!M7(a,i)}function Rz(a,i,s){return!!gc(a,i)||!!C7(i,a,s)}function qx(a,i){if(a.length===1)return Zx(i,a[0]);for(let s=0;s<i.length;s++){const c=i[s];for(let d=0;d<c.length;d++)if(gc(a,c[d]))return!0}for(let s=0;s<a.length;s++)if(Zx(i,a[s]))return!0;for(let s=0;s<i.length;s++)if(M7(a,i[s]))return!0;return!1}function Bz(a,i,s){if(a.length>1){if(M7(a,i))return!0;for(let c=0;c<i.length;c++)if(C7(i[c],a,s))return!0}for(let c=0;c<a.length;c++)if(C7(a[c],i,s))return!0;return!1}function M7(a,i){if(a.length===0||i.length===0)return!1;for(let s=0;s<a.length-1;s++){const c=a[s],d=a[s+1];for(let g=0;g<i.length-1;g++)if(Fz(c,d,i[g],i[g+1]))return!0}return!1}function Fz(a,i,s,c){return Tr(a,s,c)!==Tr(i,s,c)&&Tr(a,i,s)!==Tr(a,i,c)}function C7(a,i,s){const c=s*s;if(i.length===1)return a.distSqr(i[0])<c;for(let d=1;d<i.length;d++)if(Hx(a,i[d-1],i[d])<c)return!0;return!1}function Hx(a,i,s){const c=i.distSqr(s);if(c===0)return a.distSqr(i);const d=((a.x-i.x)*(s.x-i.x)+(a.y-i.y)*(s.y-i.y))/c;return a.distSqr(d<0?i:d>1?s:s.sub(i)._mult(d)._add(i))}function Zx(a,i){let s,c,d,g=!1;for(let v=0;v<a.length;v++){s=a[v];for(let w=0,E=s.length-1;w<s.length;E=w++)c=s[w],d=s[E],c.y>i.y!=d.y>i.y&&i.x<(d.x-c.x)*(i.y-c.y)/(d.y-c.y)+c.x&&(g=!g)}return g}function gc(a,i){let s=!1;for(let c=0,d=a.length-1;c<a.length;d=c++){const g=a[c],v=a[d];g.y>i.y!=v.y>i.y&&i.x<(v.x-g.x)*(i.y-g.y)/(v.y-g.y)+g.x&&(s=!s)}return s}function Xx(a,i,s,c,d){for(const v of a)if(i<=v.x&&s<=v.y&&c>=v.x&&d>=v.y)return!0;const g=[new oe(i,s),new oe(i,d),new oe(c,d),new oe(c,s)];if(a.length>2){for(const v of g)if(gc(a,v))return!0}for(let v=0;v<a.length-1;v++)if(jz(a[v],a[v+1],g))return!0;return!1}function jz(a,i,s){const c=s[0],d=s[2];if(a.x<c.x&&i.x<c.x||a.x>d.x&&i.x>d.x||a.y<c.y&&i.y<c.y||a.y>d.y&&i.y>d.y)return!1;const g=Tr(a,i,s[0]);return g!==Tr(a,i,s[1])||g!==Tr(a,i,s[2])||g!==Tr(a,i,s[3])}function G1(a,i,s){const c=i.paint.get(a).value;return c.kind==="constant"?c.value:s.programConfigurations.get(i.id).getMaxValue(a)}function T3(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function Kx(a,i,s,c,d){if(!i[0]&&!i[1])return a;const g=oe.convert(i)._mult(d);s==="viewport"&&g._rotate(-c);const v=[];for(let w=0;w<a.length;w++)v.push(a[w].sub(g));return v}function Yx(a,i,s,c){const d=oe.convert(a)._mult(c);return i==="viewport"&&d._rotate(-s),d}Rt(A7,"CircleBucket",{omit:["layers"]});const $z=new pe({"circle-sort-key":new ne(Qe.layout_circle["circle-sort-key"])});var Nz={paint:new pe({"circle-radius":new ne(Qe.paint_circle["circle-radius"]),"circle-color":new ne(Qe.paint_circle["circle-color"]),"circle-blur":new ne(Qe.paint_circle["circle-blur"]),"circle-opacity":new ne(Qe.paint_circle["circle-opacity"]),"circle-translate":new Z(Qe.paint_circle["circle-translate"]),"circle-translate-anchor":new Z(Qe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Z(Qe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Z(Qe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ne(Qe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ne(Qe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ne(Qe.paint_circle["circle-stroke-opacity"])}),layout:$z};function Jx(a,i,s,c,d,g,v,w,E){if(g&&a.queryGeometry.isAboveHorizon)return!1;g&&(E*=a.pixelToTileUnitsFactor);const A=a.tileID.canonical,O=s.projection.upVectorScale(A,s.center.lat,s.worldSize).metersToTile;for(const D of i)for(const z of D){const V=z.add(w),W=d&&s.elevation?s.elevation.exaggeration()*d.getElevationAt(V.x,V.y,!0):0,K=s.projection.projectTilePoint(V.x,V.y,A);if(W>0){const fe=s.projection.upVector(A,V.x,V.y);K.x+=fe[0]*O*W,K.y+=fe[1]*O*W,K.z+=fe[2]*O*W}const re=g?V:Uz(K.x,K.y,K.z,c),he=g?a.tilespaceRays.map(fe=>Gz(fe,W)):a.queryGeometry.screenGeometry,xe=fc([],[K.x,K.y,K.z,1],c);if(!v&&g?E*=xe[3]/s.cameraToCenterDistance:v&&!g&&(E*=s.cameraToCenterDistance/xe[3]),g){const fe=vi((z.y/Xt+A.y)/(1<<A.z));E/=s.projection.pixelsPerMeter(fe,1)/Ua(1,fe)}if(Rz(he,re,E))return!0}return!1}function Uz(a,i,s,c){const d=fc([],[a,i,s,1],c);return new oe(d[0]/d[3],d[1]/d[3])}const Qx=j1(0,0,0),Vz=j1(0,0,1);function Gz(a,i){const s=f7();return Qx[2]=i,a.intersectsPlane(Qx,Vz,s),new oe(s[0],s[1])}class eb extends A7{}function tb(a,{width:i,height:s},c,d){if(d){if(d instanceof Uint8ClampedArray)d=new Uint8Array(d.buffer);else if(d.length!==i*s*c)throw new RangeError("mismatched image size")}else d=new Uint8Array(i*s*c);return a.width=i,a.height=s,a.data=d,a}function rb(a,i,s){const{width:c,height:d}=i;c===a.width&&d===a.height||(I7(a,i,{x:0,y:0},{x:0,y:0},{width:Math.min(a.width,c),height:Math.min(a.height,d)},s),a.width=c,a.height=d,a.data=i.data)}function I7(a,i,s,c,d,g){if(d.width===0||d.height===0)return i;if(d.width>a.width||d.height>a.height||s.x>a.width-d.width||s.y>a.height-d.height)throw new RangeError("out of range source coordinates for image copy");if(d.width>i.width||d.height>i.height||c.x>i.width-d.width||c.y>i.height-d.height)throw new RangeError("out of range destination coordinates for image copy");const v=a.data,w=i.data;for(let E=0;E<d.height;E++){const A=((s.y+E)*a.width+s.x)*g,O=((c.y+E)*i.width+c.x)*g;for(let D=0;D<d.width*g;D++)w[O+D]=v[A+D]}return i}Rt(eb,"HeatmapBucket",{omit:["layers"]});class Ks{constructor(i,s){tb(this,i,1,s)}resize(i){rb(this,new Ks(i),1)}clone(){return new Ks({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,s,c,d,g){I7(i,s,c,d,g,1)}}class To{constructor(i,s){tb(this,i,4,s)}resize(i){rb(this,new To(i),4)}replace(i,s){s?this.data.set(i):this.data=i instanceof Uint8ClampedArray?new Uint8Array(i.buffer):i}clone(){return new To({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,s,c,d,g){I7(i,s,c,d,g,4)}}Rt(Ks,"AlphaImage"),Rt(To,"RGBAImage");var Wz={paint:new pe({"heatmap-radius":new ne(Qe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ne(Qe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Z(Qe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new de(Qe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Z(Qe.paint_heatmap["heatmap-opacity"])})};function O7(a){const i={},s=a.resolution||256,c=a.clips?a.clips.length:1,d=a.image||new To({width:s,height:c}),g=(v,w,E)=>{i[a.evaluationKey]=E;const A=a.expression.evaluate(i);d.data[v+w+0]=Math.floor(255*A.r/A.a),d.data[v+w+1]=Math.floor(255*A.g/A.a),d.data[v+w+2]=Math.floor(255*A.b/A.a),d.data[v+w+3]=Math.floor(255*A.a)};if(a.clips)for(let v=0,w=0;v<c;++v,w+=4*s)for(let E=0,A=0;E<s;E++,A+=4){const O=E/(s-1),{start:D,end:z}=a.clips[v];g(w,A,D*(1-O)+z*O)}else for(let v=0,w=0;v<s;v++,w+=4)g(0,w,v/(s-1));return d}var qz={paint:new pe({"hillshade-illumination-direction":new Z(Qe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Z(Qe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Z(Qe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Z(Qe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Z(Qe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Z(Qe.paint_hillshade["hillshade-accent-color"])})};const Hz=Be([{name:"a_pos",components:2,type:"Int16"}],4),{members:Zz}=Hz;var k7={exports:{}};function S3(a,i,s){s=s||2;var c,d,g,v,w,E,A,O=i&&i.length,D=O?i[0]*s:a.length,z=nb(a,0,D,s,!0),V=[];if(!z||z.next===z.prev)return V;if(O&&(z=function(K,re,he,xe){var fe,_e,Te,be=[];for(fe=0,_e=re.length;fe<_e;fe++)(Te=nb(K,re[fe]*xe,fe<_e-1?re[fe+1]*xe:K.length,xe,!1))===Te.next&&(Te.steiner=!0),be.push(rR(Te));for(be.sort(Qz),fe=0;fe<be.length;fe++)he=eR(be[fe],he);return he}(a,i,z,s)),a.length>80*s){c=g=a[0],d=v=a[1];for(var W=s;W<D;W+=s)(w=a[W])<c&&(c=w),(E=a[W+1])<d&&(d=E),w>g&&(g=w),E>v&&(v=E);A=(A=Math.max(g-c,v-d))!==0?32767/A:0}return Z0(z,V,s,c,d,A,0),V}function nb(a,i,s,c,d){var g,v;if(d===z7(a,i,s,c)>0)for(g=i;g<s;g+=c)v=ab(g,a[g],a[g+1],v);else for(g=s-c;g>=i;g-=c)v=ab(g,a[g],a[g+1],v);return v&&E3(v,v.next)&&(K0(v),v=v.next),v}function yc(a,i){if(!a)return a;i||(i=a);var s,c=a;do if(s=!1,c.steiner||!E3(c,c.next)&&zn(c.prev,c,c.next)!==0)c=c.next;else{if(K0(c),(c=i=c.prev)===c.next)break;s=!0}while(s||c!==i);return i}function Z0(a,i,s,c,d,g,v){if(a){!v&&g&&function(O,D,z,V){var W=O;do W.z===0&&(W.z=D7(W.x,W.y,D,z,V)),W.prevZ=W.prev,W.nextZ=W.next,W=W.next;while(W!==O);W.prevZ.nextZ=null,W.prevZ=null,function(K){var re,he,xe,fe,_e,Te,be,Ze,We=1;do{for(he=K,K=null,_e=null,Te=0;he;){for(Te++,xe=he,be=0,re=0;re<We&&(be++,xe=xe.nextZ);re++);for(Ze=We;be>0||Ze>0&&xe;)be!==0&&(Ze===0||!xe||he.z<=xe.z)?(fe=he,he=he.nextZ,be--):(fe=xe,xe=xe.nextZ,Ze--),_e?_e.nextZ=fe:K=fe,fe.prevZ=_e,_e=fe;he=xe}_e.nextZ=null,We*=2}while(Te>1)}(W)}(a,c,d,g);for(var w,E,A=a;a.prev!==a.next;)if(w=a.prev,E=a.next,g?Kz(a,c,d,g):Xz(a))i.push(w.i/s|0),i.push(a.i/s|0),i.push(E.i/s|0),K0(a),a=E.next,A=E.next;else if((a=E)===A){v?v===1?Z0(a=Yz(yc(a),i,s),i,s,c,d,g,2):v===2&&Jz(a,i,s,c,d,g):Z0(yc(a),i,s,c,d,g,1);break}}}function Xz(a){var i=a.prev,s=a,c=a.next;if(zn(i,s,c)>=0)return!1;for(var d=i.x,g=s.x,v=c.x,w=i.y,E=s.y,A=c.y,O=d<g?d<v?d:v:g<v?g:v,D=w<E?w<A?w:A:E<A?E:A,z=d>g?d>v?d:v:g>v?g:v,V=w>E?w>A?w:A:E>A?E:A,W=c.next;W!==i;){if(W.x>=O&&W.x<=z&&W.y>=D&&W.y<=V&&W1(d,w,g,E,v,A,W.x,W.y)&&zn(W.prev,W,W.next)>=0)return!1;W=W.next}return!0}function Kz(a,i,s,c){var d=a.prev,g=a,v=a.next;if(zn(d,g,v)>=0)return!1;for(var w=d.x,E=g.x,A=v.x,O=d.y,D=g.y,z=v.y,V=w<E?w<A?w:A:E<A?E:A,W=O<D?O<z?O:z:D<z?D:z,K=w>E?w>A?w:A:E>A?E:A,re=O>D?O>z?O:z:D>z?D:z,he=D7(V,W,i,s,c),xe=D7(K,re,i,s,c),fe=a.prevZ,_e=a.nextZ;fe&&fe.z>=he&&_e&&_e.z<=xe;){if(fe.x>=V&&fe.x<=K&&fe.y>=W&&fe.y<=re&&fe!==d&&fe!==v&&W1(w,O,E,D,A,z,fe.x,fe.y)&&zn(fe.prev,fe,fe.next)>=0||(fe=fe.prevZ,_e.x>=V&&_e.x<=K&&_e.y>=W&&_e.y<=re&&_e!==d&&_e!==v&&W1(w,O,E,D,A,z,_e.x,_e.y)&&zn(_e.prev,_e,_e.next)>=0))return!1;_e=_e.nextZ}for(;fe&&fe.z>=he;){if(fe.x>=V&&fe.x<=K&&fe.y>=W&&fe.y<=re&&fe!==d&&fe!==v&&W1(w,O,E,D,A,z,fe.x,fe.y)&&zn(fe.prev,fe,fe.next)>=0)return!1;fe=fe.prevZ}for(;_e&&_e.z<=xe;){if(_e.x>=V&&_e.x<=K&&_e.y>=W&&_e.y<=re&&_e!==d&&_e!==v&&W1(w,O,E,D,A,z,_e.x,_e.y)&&zn(_e.prev,_e,_e.next)>=0)return!1;_e=_e.nextZ}return!0}function Yz(a,i,s){var c=a;do{var d=c.prev,g=c.next.next;!E3(d,g)&&ib(d,c,c.next,g)&&X0(d,g)&&X0(g,d)&&(i.push(d.i/s|0),i.push(c.i/s|0),i.push(g.i/s|0),K0(c),K0(c.next),c=a=g),c=c.next}while(c!==a);return yc(c)}function Jz(a,i,s,c,d,g){var v=a;do{for(var w=v.next.next;w!==v.prev;){if(v.i!==w.i&&nR(v,w)){var E=ob(v,w);return v=yc(v,v.next),E=yc(E,E.next),Z0(v,i,s,c,d,g,0),void Z0(E,i,s,c,d,g,0)}w=w.next}v=v.next}while(v!==a)}function Qz(a,i){return a.x-i.x}function eR(a,i){var s=function(d,g){var v,w=g,E=d.x,A=d.y,O=-1/0;do{if(A<=w.y&&A>=w.next.y&&w.next.y!==w.y){var D=w.x+(A-w.y)*(w.next.x-w.x)/(w.next.y-w.y);if(D<=E&&D>O&&(O=D,v=w.x<w.next.x?w:w.next,D===E))return v}w=w.next}while(w!==g);if(!v)return null;var z,V=v,W=v.x,K=v.y,re=1/0;w=v;do E>=w.x&&w.x>=W&&E!==w.x&&W1(A<K?E:O,A,W,K,A<K?O:E,A,w.x,w.y)&&(z=Math.abs(A-w.y)/(E-w.x),X0(w,d)&&(z<re||z===re&&(w.x>v.x||w.x===v.x&&tR(v,w)))&&(v=w,re=z)),w=w.next;while(w!==V);return v}(a,i);if(!s)return i;var c=ob(s,a);return yc(c,c.next),yc(s,s.next)}function tR(a,i){return zn(a.prev,a,i.prev)<0&&zn(i.next,a,a.next)<0}function D7(a,i,s,c,d){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-s)*d|0)|a<<8))|a<<4))|a<<2))|a<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-c)*d|0)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function rR(a){var i=a,s=a;do(i.x<s.x||i.x===s.x&&i.y<s.y)&&(s=i),i=i.next;while(i!==a);return s}function W1(a,i,s,c,d,g,v,w){return(d-v)*(i-w)>=(a-v)*(g-w)&&(a-v)*(c-w)>=(s-v)*(i-w)&&(s-v)*(g-w)>=(d-v)*(c-w)}function nR(a,i){return a.next.i!==i.i&&a.prev.i!==i.i&&!function(s,c){var d=s;do{if(d.i!==s.i&&d.next.i!==s.i&&d.i!==c.i&&d.next.i!==c.i&&ib(d,d.next,s,c))return!0;d=d.next}while(d!==s);return!1}(a,i)&&(X0(a,i)&&X0(i,a)&&function(s,c){var d=s,g=!1,v=(s.x+c.x)/2,w=(s.y+c.y)/2;do d.y>w!=d.next.y>w&&d.next.y!==d.y&&v<(d.next.x-d.x)*(w-d.y)/(d.next.y-d.y)+d.x&&(g=!g),d=d.next;while(d!==s);return g}(a,i)&&(zn(a.prev,a,i.prev)||zn(a,i.prev,i))||E3(a,i)&&zn(a.prev,a,a.next)>0&&zn(i.prev,i,i.next)>0)}function zn(a,i,s){return(i.y-a.y)*(s.x-i.x)-(i.x-a.x)*(s.y-i.y)}function E3(a,i){return a.x===i.x&&a.y===i.y}function ib(a,i,s,c){var d=A3(zn(a,i,s)),g=A3(zn(a,i,c)),v=A3(zn(s,c,a)),w=A3(zn(s,c,i));return d!==g&&v!==w||!(d!==0||!P3(a,s,i))||!(g!==0||!P3(a,c,i))||!(v!==0||!P3(s,a,c))||!(w!==0||!P3(s,i,c))}function P3(a,i,s){return i.x<=Math.max(a.x,s.x)&&i.x>=Math.min(a.x,s.x)&&i.y<=Math.max(a.y,s.y)&&i.y>=Math.min(a.y,s.y)}function A3(a){return a>0?1:a<0?-1:0}function X0(a,i){return zn(a.prev,a,a.next)<0?zn(a,i,a.next)>=0&&zn(a,a.prev,i)>=0:zn(a,i,a.prev)<0||zn(a,a.next,i)<0}function ob(a,i){var s=new L7(a.i,a.x,a.y),c=new L7(i.i,i.x,i.y),d=a.next,g=i.prev;return a.next=i,i.prev=a,s.next=d,d.prev=s,c.next=s,s.prev=c,g.next=c,c.prev=g,c}function ab(a,i,s,c){var d=new L7(a,i,s);return c?(d.next=c.next,d.prev=c,c.next.prev=d,c.next=d):(d.prev=d,d.next=d),d}function K0(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function L7(a,i,s){this.i=a,this.x=i,this.y=s,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function z7(a,i,s,c){for(var d=0,g=i,v=s-c;g<s;g+=c)d+=(a[v]-a[g])*(a[g+1]+a[v+1]),v=g;return d}k7.exports=S3,k7.exports.default=S3,S3.deviation=function(a,i,s,c){var d=i&&i.length,g=Math.abs(z7(a,0,d?i[0]*s:a.length,s));if(d)for(var v=0,w=i.length;v<w;v++)g-=Math.abs(z7(a,i[v]*s,v<w-1?i[v+1]*s:a.length,s));var E=0;for(v=0;v<c.length;v+=3){var A=c[v]*s,O=c[v+1]*s,D=c[v+2]*s;E+=Math.abs((a[A]-a[D])*(a[O+1]-a[A+1])-(a[A]-a[O])*(a[D+1]-a[A+1]))}return g===0&&E===0?0:Math.abs((E-g)/g)},S3.flatten=function(a){for(var i=a[0][0].length,s={vertices:[],holes:[],dimensions:i},c=0,d=0;d<a.length;d++){for(var g=0;g<a[d].length;g++)for(var v=0;v<i;v++)s.vertices.push(a[d][g][v]);d>0&&s.holes.push(c+=a[d-1].length)}return s};var R7=U(k7.exports);function iR(a,i,s,c,d){sb(a,i,s||0,c||a.length-1,d||oR)}function sb(a,i,s,c,d){for(;c>s;){if(c-s>600){var g=c-s+1,v=i-s+1,w=Math.log(g),E=.5*Math.exp(2*w/3),A=.5*Math.sqrt(w*E*(g-E)/g)*(v-g/2<0?-1:1);sb(a,i,Math.max(s,Math.floor(i-v*E/g+A)),Math.min(c,Math.floor(i+(g-v)*E/g+A)),d)}var O=a[i],D=s,z=c;for(Y0(a,s,i),d(a[c],O)>0&&Y0(a,s,c);D<z;){for(Y0(a,D,z),D++,z--;d(a[D],O)<0;)D++;for(;d(a[z],O)>0;)z--}d(a[s],O)===0?Y0(a,s,z):Y0(a,++z,c),z<=i&&(s=z+1),i<=z&&(c=z-1)}}function Y0(a,i,s){var c=a[i];a[i]=a[s],a[s]=c}function oR(a,i){return a<i?-1:a>i?1:0}function B7(a,i){const s=a.length;if(s<=1)return[a];const c=[];let d,g;for(let v=0;v<s;v++){const w=kn(a[v]);w!==0&&(a[v].area=Math.abs(w),g===void 0&&(g=w<0),g===w<0?(d&&c.push(d),d=[a[v]]):d.push(a[v]))}if(d&&c.push(d),i>1)for(let v=0;v<c.length;v++)c[v].length<=i||(iR(c[v],i,1,c[v].length-1,aR),c[v]=c[v].slice(0,i));return c}function aR(a,i){return i.area-a.area}function F7(a,i,s){const c=s.patternDependencies;let d=!1;for(const g of i){const v=g.paint.get(`${a}-pattern`);v.isConstant()||(d=!0);const w=v.constantOr(null);w&&(d=!0,c[w]=!0)}return d}function j7(a,i,s,c,d){const g=d.patternDependencies;for(const v of i){const w=v.paint.get(`${a}-pattern`).value;if(w.kind!=="constant"){let E=w.evaluate({zoom:c},s,{},d.availableImages);E=E&&E.name?E.name:E,g[E]=!0,s.patterns[v.id]=E}}return s}class M3{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(s=>s.id),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new gt,this.indexArray=new Ut,this.indexArray2=new Jn,this.programConfigurations=new uc(i.layers,i.zoom),this.segments=new Ln,this.segments2=new Ln,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id),this.projection=i.projection}populate(i,s,c,d){this.hasPattern=F7("fill",this.layers,s);const g=this.layers[0].layout.get("fill-sort-key"),v=[];for(const{feature:w,id:E,index:A,sourceLayerIndex:O}of i){const D=this.layers[0]._featureFilter.needGeometry,z=mc(w,D);if(!this.layers[0]._featureFilter.filter(new k(this.zoom),z,c))continue;const V=g?g.evaluate(z,{},c,s.availableImages):void 0,W={id:E,properties:w.properties,type:w.type,sourceLayerIndex:O,index:A,geometry:D?z.geometry:Xs(w,c,d),patterns:{},sortKey:V};v.push(W)}g&&v.sort((w,E)=>w.sortKey-E.sortKey);for(const w of v){const{geometry:E,index:A,sourceLayerIndex:O}=w;if(this.hasPattern){const D=j7("fill",this.layers,w,this.zoom,s);this.patternFeatures.push(D)}else this.addFeature(w,E,A,c,{},s.availableImages);s.featureIndex.insert(i[A].feature,E,A,O,this.index)}}update(i,s,c,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,s,this.stateDependentLayers,c,d)}addFeatures(i,s,c,d,g){for(const v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,s,c,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,Zz),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.indexBuffer2=i.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(i,s,c,d,g,v=[]){for(const w of B7(s,500)){let E=0;for(const W of w)E+=W.length;const A=this.segments.prepareSegment(E,this.layoutVertexArray,this.indexArray),O=A.vertexLength,D=[],z=[];for(const W of w){if(W.length===0)continue;W!==w[0]&&z.push(D.length/2);const K=this.segments2.prepareSegment(W.length,this.layoutVertexArray,this.indexArray2),re=K.vertexLength;this.layoutVertexArray.emplaceBack(W[0].x,W[0].y),this.indexArray2.emplaceBack(re+W.length-1,re),D.push(W[0].x),D.push(W[0].y);for(let he=1;he<W.length;he++)this.layoutVertexArray.emplaceBack(W[he].x,W[he].y),this.indexArray2.emplaceBack(re+he-1,re+he),D.push(W[he].x),D.push(W[he].y);K.vertexLength+=W.length,K.primitiveLength+=W.length}const V=R7(D,z);for(let W=0;W<V.length;W+=3)this.indexArray.emplaceBack(O+V[W],O+V[W+1],O+V[W+2]);A.vertexLength+=E,A.primitiveLength+=V.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,c,g,v,d)}}Rt(M3,"FillBucket",{omit:["layers","patternFeatures"]});const sR=new pe({"fill-sort-key":new ne(Qe.layout_fill["fill-sort-key"])});var lR={paint:new pe({"fill-antialias":new Z(Qe.paint_fill["fill-antialias"]),"fill-opacity":new ne(Qe.paint_fill["fill-opacity"]),"fill-color":new ne(Qe.paint_fill["fill-color"]),"fill-outline-color":new ne(Qe.paint_fill["fill-outline-color"]),"fill-translate":new Z(Qe.paint_fill["fill-translate"]),"fill-translate-anchor":new Z(Qe.paint_fill["fill-translate-anchor"]),"fill-pattern":new ne(Qe.paint_fill["fill-pattern"])}),layout:sR};const uR=Be([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),cR=Be([{name:"a_centroid_pos",components:2,type:"Uint16"}]),hR=Be([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:fR}=uR;var C3={},dR=X,lb=q1;function q1(a,i,s,c,d){this.properties={},this.extent=s,this.type=0,this._pbf=a,this._geometry=-1,this._keys=c,this._values=d,a.readFields(pR,this,i)}function pR(a,i,s){a==1?i.id=s.readVarint():a==2?function(c,d){for(var g=c.readVarint()+c.pos;c.pos<g;){var v=d._keys[c.readVarint()],w=d._values[c.readVarint()];d.properties[v]=w}}(s,i):a==3?i.type=s.readVarint():a==4&&(i._geometry=s.pos)}function mR(a){for(var i,s,c=0,d=0,g=a.length,v=g-1;d<g;v=d++)c+=((s=a[v]).x-(i=a[d]).x)*(i.y+s.y);return c}q1.types=["Unknown","Point","LineString","Polygon"],q1.prototype.loadGeometry=function(){var a=this._pbf;a.pos=this._geometry;for(var i,s=a.readVarint()+a.pos,c=1,d=0,g=0,v=0,w=[];a.pos<s;){if(d<=0){var E=a.readVarint();c=7&E,d=E>>3}if(d--,c===1||c===2)g+=a.readSVarint(),v+=a.readSVarint(),c===1&&(i&&w.push(i),i=[]),i.push(new dR(g,v));else{if(c!==7)throw new Error("unknown command "+c);i&&i.push(i[0].clone())}}return i&&w.push(i),w},q1.prototype.bbox=function(){var a=this._pbf;a.pos=this._geometry;for(var i=a.readVarint()+a.pos,s=1,c=0,d=0,g=0,v=1/0,w=-1/0,E=1/0,A=-1/0;a.pos<i;){if(c<=0){var O=a.readVarint();s=7&O,c=O>>3}if(c--,s===1||s===2)(d+=a.readSVarint())<v&&(v=d),d>w&&(w=d),(g+=a.readSVarint())<E&&(E=g),g>A&&(A=g);else if(s!==7)throw new Error("unknown command "+s)}return[v,E,w,A]},q1.prototype.toGeoJSON=function(a,i,s){var c,d,g=this.extent*Math.pow(2,s),v=this.extent*a,w=this.extent*i,E=this.loadGeometry(),A=q1.types[this.type];function O(V){for(var W=0;W<V.length;W++){var K=V[W];V[W]=[360*(K.x+v)/g-180,360/Math.PI*Math.atan(Math.exp((180-360*(K.y+w)/g)*Math.PI/180))-90]}}switch(this.type){case 1:var D=[];for(c=0;c<E.length;c++)D[c]=E[c][0];O(E=D);break;case 2:for(c=0;c<E.length;c++)O(E[c]);break;case 3:for(E=function(V){var W=V.length;if(W<=1)return[V];for(var K,re,he=[],xe=0;xe<W;xe++){var fe=mR(V[xe]);fe!==0&&(re===void 0&&(re=fe<0),re===fe<0?(K&&he.push(K),K=[V[xe]]):K.push(V[xe]))}return K&&he.push(K),he}(E),c=0;c<E.length;c++)for(d=0;d<E[c].length;d++)O(E[c][d])}E.length===1?E=E[0]:A="Multi"+A;var z={type:"Feature",geometry:{type:A,coordinates:E},properties:this.properties};return"id"in this&&(z.id=this.id),z};var gR=lb,ub=cb;function cb(a,i){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=a,this._keys=[],this._values=[],this._features=[],a.readFields(yR,this,i),this.length=this._features.length}function yR(a,i,s){a===15?i.version=s.readVarint():a===1?i.name=s.readString():a===5?i.extent=s.readVarint():a===2?i._features.push(s.pos):a===3?i._keys.push(s.readString()):a===4&&i._values.push(function(c){for(var d=null,g=c.readVarint()+c.pos;c.pos<g;){var v=c.readVarint()>>3;d=v===1?c.readString():v===2?c.readFloat():v===3?c.readDouble():v===4?c.readVarint64():v===5?c.readVarint():v===6?c.readSVarint():v===7?c.readBoolean():null}return d}(s))}cb.prototype.feature=function(a){if(a<0||a>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[a];var i=this._pbf.readVarint()+this._pbf.pos;return new gR(this._pbf,i,this.extent,this._keys,this._values)};var _R=ub;function vR(a,i,s){if(a===3){var c=new _R(s,s.readVarint()+s.pos);c.length&&(i[c.name]=c)}}var $7=C3.VectorTile=function(a,i){this.layers=a.readFields(vR,{},i)},I3=C3.VectorTileFeature=lb;function O3(a,i,s,c){const d=[],g=c===0?(v,w,E,A,O,D)=>{v.push(new oe(D,E+(D-w)/(A-w)*(O-E)))}:(v,w,E,A,O,D)=>{v.push(new oe(w+(D-E)/(O-E)*(A-w),D))};for(const v of a){const w=[];for(const E of v){if(E.length<=2)continue;const A=[];for(let z=0;z<E.length-1;z++){const V=E[z].x,W=E[z].y,K=E[z+1].x,re=E[z+1].y,he=c===0?V:W,xe=c===0?K:re;he<i?xe>i&&g(A,V,W,K,re,i):he>s?xe<s&&g(A,V,W,K,re,s):A.push(E[z]),xe<i&&he>=i&&g(A,V,W,K,re,i),xe>s&&he<=s&&g(A,V,W,K,re,s)}let O=E[E.length-1];const D=c===0?O.x:O.y;D>=i&&D<=s&&A.push(O),A.length&&(O=A[A.length-1],A[0].x===O.x&&A[0].y===O.y||A.push(A[0]),w.push(A))}w.length&&d.push(w)}return d}C3.VectorTileLayer=ub;const xR=I3.types,bR=Math.pow(2,13);function J0(a,i,s,c,d,g,v,w){a.emplaceBack((i<<1)+v,(s<<1)+g,(Math.floor(c*bR)<<1)+d,Math.round(w))}function Q0(a,i,s){a.emplaceBack(i.x,i.y,i.z,s[0]*16384,s[1]*16384,s[2]*16384)}class hb{constructor(){this.acc=new oe(0,0),this.polyCount=[]}startRing(i){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new oe(i.x,i.y),this.max=new oe(i.x,i.y))}append(i,s){this.currentPolyCount.edges++,this.acc._add(i);const c=this.min,d=this.max;i.x<c.x?c.x=i.x:i.x>d.x&&(d.x=i.x),i.y<c.y?c.y=i.y:i.y>d.y&&(d.y=i.y),((i.x===0||i.x===Xt)&&i.x===s.x)!=((i.y===0||i.y===Xt)&&i.y===s.y)&&this.processBorderOverlap(i,s),s.x<0!=i.x<0&&this.addBorderIntersection(0,Sr(s.y,i.y,(0-s.x)/(i.x-s.x))),s.x>Xt!=i.x>Xt&&this.addBorderIntersection(1,Sr(s.y,i.y,(Xt-s.x)/(i.x-s.x))),s.y<0!=i.y<0&&this.addBorderIntersection(2,Sr(s.x,i.x,(0-s.y)/(i.y-s.y))),s.y>Xt!=i.y>Xt&&this.addBorderIntersection(3,Sr(s.x,i.x,(Xt-s.y)/(i.y-s.y)))}addBorderIntersection(i,s){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const c=this.borders[i];s<c[0]&&(c[0]=s),s>c[1]&&(c[1]=s)}processBorderOverlap(i,s){if(i.x===s.x){if(i.y===s.y)return;const c=i.x===0?0:1;this.addBorderIntersection(c,s.y),this.addBorderIntersection(c,i.y)}else{const c=i.y===0?2:3;this.addBorderIntersection(c,s.x),this.addBorderIntersection(c,i.x)}}centroid(){const i=this.polyCount.reduce((s,c)=>s+c.edges,0);return i!==0?this.acc.div(i)._round():new oe(0,0)}span(){return new oe(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((i,s)=>i+ +(s[0]!==Number.MAX_VALUE),0)}}class ed{constructor(i){this.zoom=i.zoom,this.canonical=i.canonical,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(s=>s.id),this.index=i.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=i.projection,this.layoutVertexArray=new ot,this.centroidVertexArray=new Ba,this.indexArray=new Ut,this.programConfigurations=new uc(i.layers,i.zoom),this.segments=new Ln,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id),this.enableTerrain=i.enableTerrain}populate(i,s,c,d){this.features=[],this.hasPattern=F7("fill-extrusion",this.layers,s),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(g){const v=Math.exp(Math.PI*(1-g.y/(1<<g.z)*2));return 80150034*v/(v*v+1)/Xt/(1<<g.z)}(c),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:g,id:v,index:w,sourceLayerIndex:E}of i){const A=this.layers[0]._featureFilter.needGeometry,O=mc(g,A);if(!this.layers[0]._featureFilter.filter(new k(this.zoom),O,c))continue;const D={id:v,sourceLayerIndex:E,index:w,geometry:A?O.geometry:Xs(g,c,d),properties:g.properties,type:g.type,patterns:{}},z=this.layoutVertexArray.length;this.hasPattern?this.features.push(j7("fill-extrusion",this.layers,D,this.zoom,s)):this.addFeature(D,D.geometry,w,c,{},s.availableImages,d),s.featureIndex.insert(g,D.geometry,w,E,this.index,z)}this.sortBorders()}addFeatures(i,s,c,d,g){for(const v of this.features){const{geometry:w}=v;this.addFeature(v,w,v.index,s,c,d,g)}this.sortBorders()}update(i,s,c,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,s,this.stateDependentLayers,c,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,fR),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=i.createVertexBuffer(this.layoutVertexExtArray,hR.members,!0))),this.programConfigurations.upload(i),this.uploaded=!0}uploadCentroid(i){this.centroidVertexArray.length!==0&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=i.createVertexBuffer(this.centroidVertexArray,cR.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(i,s,c,d,g,v,w){const E=[new oe(0,0),new oe(Xt,Xt)],A=w.projection,O=A.name==="globe",D=this.enableTerrain&&!O?new hb:null,z=xR[i.type]==="Polygon";O&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new _t);const V=B7(s,500);for(let he=V.length-1;he>=0;he--){const xe=V[he];(xe.length===0||(W=xe[0]).every(fe=>fe.x<=0)||W.every(fe=>fe.x>=Xt)||W.every(fe=>fe.y<=0)||W.every(fe=>fe.y>=Xt))&&V.splice(he,1)}var W;let K;if(O)K=_b(V,E,d);else{K=[];for(const he of V)K.push({polygon:he,bounds:E})}const re=z?this.edgeRadius:0;for(const{polygon:he,bounds:xe}of K){let fe=0,_e=0;for(const be of he)z&&!be[0].equals(be[be.length-1])&&be.push(be[0]),_e+=z?be.length-1:be.length;const Te=this.segments.prepareSegment((z?5:4)*_e,this.layoutVertexArray,this.indexArray);if(z){const be=[],Ze=[];fe=Te.vertexLength;for(const nt of he){let yt,Ye;nt.length&&nt!==he[0]&&Ze.push(be.length/2),yt=nt[1].sub(nt[0])._perp()._unit();for(let at=1;at<nt.length;at++){const st=nt[at],pt=nt[at===nt.length-1?1:at+1];let{x:xt,y:tt}=st;if(re){Ye=pt.sub(st)._perp()._unit();const At=yt.add(Ye)._unit(),$t=re*Math.min(4,1/(yt.x*At.x+yt.y*At.y));xt+=$t*At.x,tt+=$t*At.y,yt=Ye}J0(this.layoutVertexArray,xt,tt,0,0,1,1,0),Te.vertexLength++,be.push(st.x,st.y),O&&Q0(this.layoutVertexExtArray,A.projectTilePoint(xt,tt,d),A.upVector(d,xt,tt))}}const We=R7(be,Ze);for(let nt=0;nt<We.length;nt+=3)this.indexArray.emplaceBack(fe+We[nt],fe+We[nt+2],fe+We[nt+1]),Te.primitiveLength++}for(const be of he){D&&be.length&&D.startRing(be[0]);let Ze,We,nt,yt=be.length>4&&mb(be[be.length-2],be[0],be[1]),Ye=re?wR(be[be.length-2],be[0],be[1],re):0;We=be[1].sub(be[0])._perp()._unit();let at=!0;for(let st=1,pt=0;st<be.length;st++){let xt=be[st-1],tt=be[st];const At=be[st===be.length-1?1:st+1];if(D&&z&&D.currentPolyCount.top++,pb(tt,xt,xe)){re&&(We=At.sub(tt)._perp()._unit(),at=!at);continue}D&&D.append(tt,xt);const $t=tt.sub(xt)._perp(),Mt=$t.x/(Math.abs($t.x)+Math.abs($t.y)),ir=$t.y>0?1:0,wt=xt.dist(tt);if(pt+wt>32768&&(pt=0),re){nt=At.sub(tt)._perp()._unit();let ar=db(xt,tt,At,fb(We,nt),re);isNaN(ar)&&(ar=0);const Qt=tt.sub(xt)._unit();xt=xt.add(Qt.mult(Ye))._round(),tt=tt.add(Qt.mult(-ar))._round(),Ye=ar,We=nt}const Wt=Te.vertexLength,or=be.length>4&&mb(xt,tt,At);let Pr=gb(pt,yt,at);if(J0(this.layoutVertexArray,xt.x,xt.y,Mt,ir,0,0,Pr),J0(this.layoutVertexArray,xt.x,xt.y,Mt,ir,0,1,Pr),pt+=wt,Pr=gb(pt,or,!at),yt=or,J0(this.layoutVertexArray,tt.x,tt.y,Mt,ir,0,0,Pr),J0(this.layoutVertexArray,tt.x,tt.y,Mt,ir,0,1,Pr),Te.vertexLength+=4,this.indexArray.emplaceBack(Wt+0,Wt+1,Wt+2),this.indexArray.emplaceBack(Wt+1,Wt+3,Wt+2),Te.primitiveLength+=2,re){const ar=fe+(st===1?be.length-2:st-2),Qt=st===1?fe:ar+1;if(this.indexArray.emplaceBack(Wt+1,ar,Wt+3),this.indexArray.emplaceBack(ar,Qt,Wt+3),Te.primitiveLength+=2,Ze===void 0&&(Ze=Wt),!pb(At,be[st],xe)){const en=st===be.length-1?Ze:Te.vertexLength;this.indexArray.emplaceBack(Wt+2,Wt+3,en),this.indexArray.emplaceBack(Wt+3,en+1,en),this.indexArray.emplaceBack(Wt+3,Qt,en+1),Te.primitiveLength+=3}at=!at}if(O){const ar=this.layoutVertexExtArray,Qt=A.projectTilePoint(xt.x,xt.y,d),en=A.projectTilePoint(tt.x,tt.y,d),sr=A.upVector(d,xt.x,xt.y),lr=A.upVector(d,tt.x,tt.y);Q0(ar,Qt,sr),Q0(ar,Qt,sr),Q0(ar,en,lr),Q0(ar,en,lr)}}z&&(fe+=be.length-1)}}if(D&&D.polyCount.length>0){if(D.borders){D.vertexArrayOffset=this.centroidVertexArray.length;const he=D.borders,xe=this.featuresOnBorder.push(D)-1;for(let fe=0;fe<4;fe++)he[fe][0]!==Number.MAX_VALUE&&this.borders[fe].push(xe)}this.encodeCentroid(D.borders?void 0:D.centroid(),D)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,c,g,v,d)}sortBorders(){for(let i=0;i<4;i++)this.borders[i].sort((s,c)=>this.featuresOnBorder[s].borders[i][0]-this.featuresOnBorder[c].borders[i][0])}encodeCentroid(i,s,c=!0){let d,g;if(i)if(i.y!==0){const w=s.span()._mult(this.tileToMeter);d=(Math.max(i.x,1)<<3)+Math.min(7,Math.round(w.x/10)),g=(Math.max(i.y,1)<<3)+Math.min(7,Math.round(w.y/10))}else d=Math.ceil(7*(i.x+450)),g=0;else d=0,g=+c;let v=c?this.centroidVertexArray.length:s.vertexArrayOffset;for(const w of s.polyCount){c&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*w.edges+w.top);for(let E=0;E<w.top;E++)this.centroidVertexArray.emplace(v++,d,g);for(let E=0;E<2*w.edges;E++)this.centroidVertexArray.emplace(v++,0,g),this.centroidVertexArray.emplace(v++,d,g)}}}function fb(a,i){const s=a.add(i)._unit();return a.x*s.x+a.y*s.y}function wR(a,i,s,c){const d=i.sub(a)._perp()._unit(),g=s.sub(i)._perp()._unit();return db(a,i,s,fb(d,g),c)}function db(a,i,s,c,d){const g=Math.sqrt(1-c*c);return Math.min(a.dist(i)/3,i.dist(s)/3,d*g/c)}function pb(a,i,s){return a.x<s[0].x&&i.x<s[0].x||a.x>s[1].x&&i.x>s[1].x||a.y<s[0].y&&i.y<s[0].y||a.y>s[1].y&&i.y>s[1].y}function mb(a,i,s){if(a.x<0||a.x>=Xt||i.x<0||i.x>=Xt||s.x<0||s.x>=Xt)return!1;const c=s.sub(i),d=c.perp(),g=a.sub(i);return(c.x*g.x+c.y*g.y)/Math.sqrt((c.x*c.x+c.y*c.y)*(g.x*g.x+g.y*g.y))>-.866&&d.x*g.x+d.y*g.y<0}function gb(a,i,s){const c=i?2|a:-3&a;return s?1|c:-2&c}function yb(){const a=Math.PI/32,i=Math.tan(a),s=H0;return s*Math.sqrt(1+2*i*i)-s}function _b(a,i,s){const c=1<<s.z,d=Uo(s.x/c),g=Uo((s.x+1)/c),v=vi(s.y/c),w=vi((s.y+1)/c);return function(E,A,O,D,z=0,V){const W=[];if(!E.length||!O||!D)return W;const K=(be,Ze)=>{for(const We of be)W.push({polygon:We,bounds:Ze})},re=Math.ceil(Math.log2(O)),he=Math.ceil(Math.log2(D)),xe=re-he,fe=[];for(let be=0;be<Math.abs(xe);be++)fe.push(xe>0?0:1);for(let be=0;be<Math.min(re,he);be++)fe.push(0),fe.push(1);let _e=E;if(_e=O3(_e,A[0].y-z,A[1].y+z,1),_e=O3(_e,A[0].x-z,A[1].x+z,0),!_e.length)return W;const Te=[];for(fe.length?Te.push({polygons:_e,bounds:A,depth:0}):K(_e,A);Te.length;){const be=Te.pop(),Ze=be.depth,We=fe[Ze],nt=be.bounds[0],yt=be.bounds[1],Ye=We===0?nt.x:nt.y,at=We===0?yt.x:yt.y,st=V?V(We,Ye,at):.5*(Ye+at),pt=O3(be.polygons,Ye-z,st+z,We),xt=O3(be.polygons,st-z,at+z,We);if(pt.length){const tt=[nt,new oe(We===0?st:yt.x,We===1?st:yt.y)];fe.length>Ze+1?Te.push({polygons:pt,bounds:tt,depth:Ze+1}):K(pt,tt)}if(xt.length){const tt=[new oe(We===0?st:nt.x,We===1?st:nt.y),yt];fe.length>Ze+1?Te.push({polygons:xt,bounds:tt,depth:Ze+1}):K(xt,tt)}}return W}(a,i,Math.ceil((g-d)/11.25),Math.ceil((v-w)/11.25),1,(E,A,O)=>{if(E===0)return .5*(A+O);{const D=vi((s.y+A/Xt)/c);return(gs(.5*(vi((s.y+O/Xt)/c)+D))*c-s.y)*Xt}})}Rt(ed,"FillExtrusionBucket",{omit:["layers","features"]}),Rt(hb,"PartMetadata");const TR=new pe({"fill-extrusion-edge-radius":new Z(Qe["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var SR={paint:new pe({"fill-extrusion-opacity":new Z(Qe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ne(Qe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Z(Qe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Z(Qe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ne(Qe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ne(Qe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ne(Qe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Z(Qe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Z(Qe["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Z(Qe["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-rounded-roof":new Z(Qe["paint_fill-extrusion"]["fill-extrusion-rounded-roof"])}),layout:TR};function vb(a,i,s){var c=2*Math.PI*6378137/256/Math.pow(2,s);return[a*c-2*Math.PI*6378137/2,i*c-2*Math.PI*6378137/2]}class k3{constructor(i,s,c){this.z=i,this.x=s,this.y=c,this.key=td(0,i,i,s,c)}equals(i){return this.z===i.z&&this.x===i.x&&this.y===i.y}url(i,s){const c=function(g,v,w){var E=vb(256*g,256*(v=Math.pow(2,w)-v-1),w),A=vb(256*(g+1),256*(v+1),w);return E[0]+","+E[1]+","+A[0]+","+A[1]}(this.x,this.y,this.z),d=function(g,v,w){let E,A="";for(let O=g;O>0;O--)E=1<<O-1,A+=(v&E?1:0)+(w&E?2:0);return A}(this.z,this.x,this.y);return i[(this.x+this.y)%i.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(s==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",d).replace("{bbox-epsg-3857}",c)}toString(){return`${this.z}/${this.x}/${this.y}`}}class xb{constructor(i,s){this.wrap=i,this.canonical=s,this.key=td(i,s.z,s.z,s.x,s.y)}}class Gi{constructor(i,s,c,d,g){this.overscaledZ=i,this.wrap=s,this.canonical=new k3(c,+d,+g),this.key=s===0&&i===c?this.canonical.key:td(s,i,c,d,g)}equals(i){return this.overscaledZ===i.overscaledZ&&this.wrap===i.wrap&&this.canonical.equals(i.canonical)}scaledTo(i){const s=this.canonical.z-i;return i>this.canonical.z?new Gi(i,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Gi(i,this.wrap,i,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(i,s=!0){if(this.overscaledZ===i&&s)return this.key;if(i>this.canonical.z)return td(this.wrap*+s,i,this.canonical.z,this.canonical.x,this.canonical.y);{const c=this.canonical.z-i;return td(this.wrap*+s,i,i,this.canonical.x>>c,this.canonical.y>>c)}}isChildOf(i){if(i.wrap!==this.wrap)return!1;const s=this.canonical.z-i.canonical.z;return i.overscaledZ===0||i.overscaledZ<this.overscaledZ&&i.canonical.x===this.canonical.x>>s&&i.canonical.y===this.canonical.y>>s}children(i){if(this.overscaledZ>=i)return[new Gi(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,c=2*this.canonical.x,d=2*this.canonical.y;return[new Gi(s,this.wrap,s,c,d),new Gi(s,this.wrap,s,c+1,d),new Gi(s,this.wrap,s,c,d+1),new Gi(s,this.wrap,s,c+1,d+1)]}isLessThan(i){return this.wrap<i.wrap||!(this.wrap>i.wrap)&&(this.overscaledZ<i.overscaledZ||!(this.overscaledZ>i.overscaledZ)&&(this.canonical.x<i.canonical.x||!(this.canonical.x>i.canonical.x)&&this.canonical.y<i.canonical.y))}wrapped(){return new Gi(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(i){return new Gi(this.overscaledZ,i,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new xb(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function td(a,i,s,c,d){const g=1<<Math.min(s,22);let v=g*(d%g)+c%g;return a&&s<22&&(v+=g*g*((a<0?-2*a-1:2*a)%(1<<2*(22-s)))),16*(32*v+s)+(i-s)}Rt(k3,"CanonicalTileID"),Rt(Gi,"OverscaledTileID",{omit:["projMatrix"]});class H1 extends oe{constructor(i,s,c){super(i,s),this.z=c}}function rd(a,i){return a.x*i.x+a.y*i.y}function bb(a,i){if(a.length===1){let s=0;const c=i[s++];let d;for(;!d||c.equals(d);)if(d=i[s++],!d)return 1/0;for(;s<i.length;s++){const g=i[s],v=a[0],w=d.sub(c),E=g.sub(c),A=v.sub(c),O=rd(w,w),D=rd(w,E),z=rd(E,E),V=rd(A,w),W=rd(A,E),K=O*z-D*D,re=(z*V-D*W)/K,he=(O*W-D*V)/K,xe=c.z*(1-re-he)+d.z*re+g.z*he;if(isFinite(xe))return xe}return 1/0}{let s=1/0;for(const c of i)s=Math.min(s,c.z);return s}}function wb(a,i,s,c,d,g,v,w){const E=v*d.getElevationAt(a,i,!0,!0),A=g[0]!==0,O=A?g[1]===0?v*(g[0]/7-450):v*function(D,z,V){const W=Math.floor(z[0]/8),K=Math.floor(z[1]/8),re=10*(z[0]-8*W),he=10*(z[1]-8*K),xe=D.getElevationAt(W,K,!0,!0),fe=D.getMeterToDEM(V),_e=Math.floor(.5*(re*fe-1)),Te=Math.floor(.5*(he*fe-1)),be=D.tileCoordToPixel(W,K),Ze=2*_e+1,We=2*Te+1,nt=function(xt,tt,At,$t,Mt){return[xt.getElevationAtPixel(tt,At,!0),xt.getElevationAtPixel(tt+Mt,At,!0),xt.getElevationAtPixel(tt,At+Mt,!0),xt.getElevationAtPixel(tt+$t,At+Mt,!0)]}(D,be.x-_e,be.y-Te,Ze,We),yt=Math.abs(nt[0]-nt[1]),Ye=Math.abs(nt[2]-nt[3]),at=Math.abs(nt[0]-nt[2])+Math.abs(nt[1]-nt[3]),st=Math.min(.25,.5*fe*(yt+Ye)/Ze),pt=Math.min(.25,.5*fe*at/We);return xe+Math.max(st*re,pt*he)}(d,g,w):E;return{base:E+(s===0)?-1:s,top:A?Math.max(O+c,E+s+2):E+c}}const ER=Be([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:PR}=ER,AR=Be([{name:"a_packed",components:4,type:"Float32"}]),{members:MR}=AR,CR=I3.types,IR=Math.cos(Math.PI/180*37.5);class D3{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(s=>s.id),this.index=i.index,this.projection=i.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new Ke,this.layoutVertexArray2=new mt,this.indexArray=new Ut,this.programConfigurations=new uc(i.layers,i.zoom),this.segments=new Ln,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(i,s,c,d){this.hasPattern=F7("line",this.layers,s);const g=this.layers[0].layout.get("line-sort-key"),v=[];for(const{feature:O,id:D,index:z,sourceLayerIndex:V}of i){const W=this.layers[0]._featureFilter.needGeometry,K=mc(O,W);if(!this.layers[0]._featureFilter.filter(new k(this.zoom),K,c))continue;const re=g?g.evaluate(K,{},c):void 0,he={id:D,properties:O.properties,type:O.type,sourceLayerIndex:V,index:z,geometry:W?K.geometry:Xs(O,c,d),patterns:{},sortKey:re};v.push(he)}g&&v.sort((O,D)=>O.sortKey-D.sortKey);const{lineAtlas:w,featureIndex:E}=s,A=this.addConstantDashes(w);for(const O of v){const{geometry:D,index:z,sourceLayerIndex:V}=O;if(A&&this.addFeatureDashes(O,w),this.hasPattern){const W=j7("line",this.layers,O,this.zoom,s);this.patternFeatures.push(W)}else this.addFeature(O,D,z,c,w.positions,s.availableImages);E.insert(i[z].feature,D,z,V,this.index)}}addConstantDashes(i){let s=!1;for(const c of this.layers){const d=c.paint.get("line-dasharray").value,g=c.layout.get("line-cap").value;if(d.kind!=="constant"||g.kind!=="constant")s=!0;else{const v=g.value,w=d.value;if(!w)continue;i.addDash(w,v)}}return s}addFeatureDashes(i,s){const c=this.zoom;for(const d of this.layers){const g=d.paint.get("line-dasharray").value,v=d.layout.get("line-cap").value;if(g.kind==="constant"&&v.kind==="constant")continue;let w,E;if(g.kind==="constant"){if(w=g.value,!w)continue}else w=g.evaluate({zoom:c},i);E=v.kind==="constant"?v.value:v.evaluate({zoom:c},i),s.addDash(w,E),i.patterns[d.id]=s.getKey(w,E)}}update(i,s,c,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,s,this.stateDependentLayers,c,d)}addFeatures(i,s,c,d,g){for(const v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,s,c,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=i.createVertexBuffer(this.layoutVertexArray2,MR)),this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,PR),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(i){if(i.properties&&i.properties.hasOwnProperty("mapbox_clip_start")&&i.properties.hasOwnProperty("mapbox_clip_end"))return{start:+i.properties.mapbox_clip_start,end:+i.properties.mapbox_clip_end}}addFeature(i,s,c,d,g,v){const w=this.layers[0].layout,E=w.get("line-join").evaluate(i,{}),A=w.get("line-cap").evaluate(i,{}),O=w.get("line-miter-limit"),D=w.get("line-round-limit");this.lineClips=this.lineFeatureClips(i);for(const z of s)this.addLine(z,i,E,A,O,D);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,c,g,v,d)}addLine(i,s,c,d,g,v){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let he=0;he<i.length-1;he++)this.totalDistance+=i[he].dist(i[he+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const w=CR[s.type]==="Polygon";let E=i.length;for(;E>=2&&i[E-1].equals(i[E-2]);)E--;let A=0;for(;A<E-1&&i[A].equals(i[A+1]);)A++;if(E<(w?3:2))return;c==="bevel"&&(g=1.05);const O=this.overscaling<=16?15*Xt/(512*this.overscaling):0,D=this.segments.prepareSegment(10*E,this.layoutVertexArray,this.indexArray);let z,V,W,K,re;this.e1=this.e2=-1,w&&(z=i[E-2],re=i[A].sub(z)._unit()._perp());for(let he=A;he<E;he++){if(W=he===E-1?w?i[A+1]:void 0:i[he+1],W&&i[he].equals(W))continue;re&&(K=re),z&&(V=z),z=i[he],re=W?W.sub(z)._unit()._perp():K,K=K||re;let xe=K.add(re);xe.x===0&&xe.y===0||xe._unit();const fe=K.x*re.x+K.y*re.y,_e=xe.x*re.x+xe.y*re.y,Te=_e!==0?1/_e:1/0,be=2*Math.sqrt(2-2*_e),Ze=_e<IR&&V&&W,We=K.x*re.y-K.y*re.x>0;if(Ze&&he>A){const Ye=z.dist(V);if(Ye>2*O){const at=z.sub(z.sub(V)._mult(O/Ye)._round());this.updateDistance(V,at),this.addCurrentVertex(at,K,0,0,D),V=at}}const nt=V&&W;let yt=nt?c:w?"butt":d;if(nt&&yt==="round"&&(Te<v?yt="miter":Te<=2&&(yt="fakeround")),yt==="miter"&&Te>g&&(yt="bevel"),yt==="bevel"&&(Te>2&&(yt="flipbevel"),Te<g&&(yt="miter")),V&&this.updateDistance(V,z),yt==="miter")xe._mult(Te),this.addCurrentVertex(z,xe,0,0,D);else if(yt==="flipbevel"){if(Te>100)xe=re.mult(-1);else{const Ye=Te*K.add(re).mag()/K.sub(re).mag();xe._perp()._mult(Ye*(We?-1:1))}this.addCurrentVertex(z,xe,0,0,D),this.addCurrentVertex(z,xe.mult(-1),0,0,D)}else if(yt==="bevel"||yt==="fakeround"){const Ye=-Math.sqrt(Te*Te-1),at=We?Ye:0,st=We?0:Ye;if(V&&this.addCurrentVertex(z,K,at,st,D),yt==="fakeround"){const pt=Math.round(180*be/Math.PI/20);for(let xt=1;xt<pt;xt++){let tt=xt/pt;if(tt!==.5){const $t=tt-.5;tt+=tt*$t*(tt-1)*((1.0904+fe*(fe*(3.55645-1.43519*fe)-3.2452))*$t*$t+(.848013+fe*(.215638*fe-1.06021)))}const At=re.sub(K)._mult(tt)._add(K)._unit()._mult(We?-1:1);this.addHalfVertex(z,At.x,At.y,!1,We,0,D)}}W&&this.addCurrentVertex(z,re,-at,-st,D)}else if(yt==="butt")this.addCurrentVertex(z,xe,0,0,D);else if(yt==="square"){const Ye=V?1:-1;V||this.addCurrentVertex(z,xe,Ye,Ye,D),this.addCurrentVertex(z,xe,0,0,D),V&&this.addCurrentVertex(z,xe,Ye,Ye,D)}else yt==="round"&&(V&&(this.addCurrentVertex(z,K,0,0,D),this.addCurrentVertex(z,K,1,1,D,!0)),W&&(this.addCurrentVertex(z,re,-1,-1,D,!0),this.addCurrentVertex(z,re,0,0,D)));if(Ze&&he<E-1){const Ye=z.dist(W);if(Ye>2*O){const at=z.add(W.sub(z)._mult(O/Ye)._round());this.updateDistance(z,at),this.addCurrentVertex(at,re,0,0,D),z=at}}}}addCurrentVertex(i,s,c,d,g,v=!1){const w=s.y*d-s.x,E=-s.y-s.x*d;this.addHalfVertex(i,s.x+s.y*c,s.y-s.x*c,v,!1,c,g),this.addHalfVertex(i,w,E,v,!0,-d,g)}addHalfVertex({x:i,y:s},c,d,g,v,w,E){this.layoutVertexArray.emplaceBack((i<<1)+(g?1:0),(s<<1)+(v?1:0),Math.round(63*c)+128,Math.round(63*d)+128,1+(w===0?0:w<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const A=E.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,A),E.primitiveLength++),v?this.e2=A:this.e1=A}updateScaledDistance(){if(this.lineClips){const i=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=i*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(i,s){this.distance+=i.dist(s),this.updateScaledDistance()}}Rt(D3,"LineBucket",{omit:["layers","patternFeatures"]});const OR=new pe({"line-cap":new ne(Qe.layout_line["line-cap"]),"line-join":new ne(Qe.layout_line["line-join"]),"line-miter-limit":new Z(Qe.layout_line["line-miter-limit"]),"line-round-limit":new Z(Qe.layout_line["line-round-limit"]),"line-sort-key":new ne(Qe.layout_line["line-sort-key"])});var Tb={paint:new pe({"line-opacity":new ne(Qe.paint_line["line-opacity"]),"line-color":new ne(Qe.paint_line["line-color"]),"line-translate":new Z(Qe.paint_line["line-translate"]),"line-translate-anchor":new Z(Qe.paint_line["line-translate-anchor"]),"line-width":new ne(Qe.paint_line["line-width"]),"line-gap-width":new ne(Qe.paint_line["line-gap-width"]),"line-offset":new ne(Qe.paint_line["line-offset"]),"line-blur":new ne(Qe.paint_line["line-blur"]),"line-dasharray":new ne(Qe.paint_line["line-dasharray"]),"line-pattern":new ne(Qe.paint_line["line-pattern"]),"line-gradient":new de(Qe.paint_line["line-gradient"]),"line-trim-offset":new Z(Qe.paint_line["line-trim-offset"])}),layout:OR};const Sb=new class extends ne{possiblyEvaluate(a,i){return i=new k(Math.floor(i.zoom),{now:i.now,fadeDuration:i.fadeDuration,transition:i.transition}),super.possiblyEvaluate(a,i)}evaluate(a,i,s,c){return i=Tt({},i,{zoom:Math.floor(i.zoom)}),super.evaluate(a,i,s,c)}}(Tb.paint.properties["line-width"].specification);function Eb(a,i){return i>0?i+2*a:a}Sb.useIntegerZoom=!0;const kR=Be([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),DR=Be([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),LR=Be([{name:"a_projected_pos",components:4,type:"Float32"}],4);Be([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const zR=Be([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),RR=Be([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Be([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Pb=Be([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),BR=Be([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Be([{name:"triangle",components:3,type:"Uint16"}]),Be([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Be([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Be([{type:"Float32",name:"offsetX"}]),Be([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var si=24;const Va=128;function N7(a,i){const{expression:s}=i;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new k(a+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:c,interpolationType:d}=s;let g=0;for(;g<c.length&&c[g]<=a;)g++;g=Math.max(0,g-1);let v=g;for(;v<c.length&&c[v]<a+1;)v++;v=Math.min(c.length-1,v);const w=c[g],E=c[v];return s.kind==="composite"?{kind:"composite",minZoom:w,maxZoom:E,interpolationType:d}:{kind:"camera",minZoom:w,maxZoom:E,minSize:s.evaluate(new k(w)),maxSize:s.evaluate(new k(E)),interpolationType:d}}}function L3(a,{uSize:i,uSizeT:s},{lowerSize:c,upperSize:d}){return a.kind==="source"?c/Va:a.kind==="composite"?Sr(c/Va,d/Va,s):i}function Z1(a,i){let s=0,c=0;if(a.kind==="constant")c=a.layoutSize;else if(a.kind!=="source"){const{interpolationType:d,minZoom:g,maxZoom:v}=a,w=d?ge(sa.interpolationFactor(d,i,g,v),0,1):0;a.kind==="camera"?c=Sr(a.minSize,a.maxSize,w):s=w}return{uSizeT:s,uSize:c}}var FR=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:Va,evaluateSizeForFeature:L3,evaluateSizeForZoom:Z1,getSizeData:N7});function jR(a,i,s){return a.sections.forEach(c=>{c.text=function(d,g,v){const w=g.layout.get("text-transform").evaluate(v,{});return w==="uppercase"?d=d.toLocaleUpperCase():w==="lowercase"&&(d=d.toLocaleLowerCase()),I.applyArabicShaping&&(d=I.applyArabicShaping(d)),d}(c.text,i,s)}),a}const nd={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂","←":"↑","→":"↓"};function $R(a){return a==="︶"||a==="﹈"||a==="︸"||a==="﹄"||a==="﹂"||a==="︾"||a==="︼"||a==="︺"||a==="︘"||a==="﹀"||a==="︐"||a==="︓"||a==="︔"||a==="｀"||a==="￣"||a==="︑"||a==="︒"}function NR(a){return a==="︵"||a==="﹇"||a==="︷"||a==="﹃"||a==="﹁"||a==="︽"||a==="︻"||a==="︹"||a==="︗"||a==="︿"}var Ab=Hr,Mb=function(a,i,s,c,d){var g,v,w=8*d-c-1,E=(1<<w)-1,A=E>>1,O=-7,D=s?d-1:0,z=s?-1:1,V=a[i+D];for(D+=z,g=V&(1<<-O)-1,V>>=-O,O+=w;O>0;g=256*g+a[i+D],D+=z,O-=8);for(v=g&(1<<-O)-1,g>>=-O,O+=c;O>0;v=256*v+a[i+D],D+=z,O-=8);if(g===0)g=1-A;else{if(g===E)return v?NaN:1/0*(V?-1:1);v+=Math.pow(2,c),g-=A}return(V?-1:1)*v*Math.pow(2,g-c)},Cb=function(a,i,s,c,d,g){var v,w,E,A=8*g-d-1,O=(1<<A)-1,D=O>>1,z=d===23?Math.pow(2,-24)-Math.pow(2,-77):0,V=c?0:g-1,W=c?1:-1,K=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(w=isNaN(i)?1:0,v=O):(v=Math.floor(Math.log(i)/Math.LN2),i*(E=Math.pow(2,-v))<1&&(v--,E*=2),(i+=v+D>=1?z/E:z*Math.pow(2,1-D))*E>=2&&(v++,E/=2),v+D>=O?(w=0,v=O):v+D>=1?(w=(i*E-1)*Math.pow(2,d),v+=D):(w=i*Math.pow(2,D-1)*Math.pow(2,d),v=0));d>=8;a[s+V]=255&w,V+=W,w/=256,d-=8);for(v=v<<d|w,A+=d;A>0;a[s+V]=255&v,V+=W,v/=256,A-=8);a[s+V-W]|=128*K};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function Hr(a){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(a)?a:new Uint8Array(a||0),this.pos=0,this.type=0,this.length=this.buf.length}Hr.Varint=0,Hr.Fixed64=1,Hr.Bytes=2,Hr.Fixed32=5;var U7=4294967296,Ib=1/U7,Ob=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Ys(a){return a.type===Hr.Bytes?a.readVarint()+a.pos:a.pos+1}function X1(a,i,s){return s?4294967296*i+(a>>>0):4294967296*(i>>>0)+(a>>>0)}function kb(a,i,s){var c=i<=16383?1:i<=2097151?2:i<=268435455?3:Math.floor(Math.log(i)/(7*Math.LN2));s.realloc(c);for(var d=s.pos-1;d>=a;d--)s.buf[d+c]=s.buf[d]}function UR(a,i){for(var s=0;s<a.length;s++)i.writeVarint(a[s])}function VR(a,i){for(var s=0;s<a.length;s++)i.writeSVarint(a[s])}function GR(a,i){for(var s=0;s<a.length;s++)i.writeFloat(a[s])}function WR(a,i){for(var s=0;s<a.length;s++)i.writeDouble(a[s])}function qR(a,i){for(var s=0;s<a.length;s++)i.writeBoolean(a[s])}function HR(a,i){for(var s=0;s<a.length;s++)i.writeFixed32(a[s])}function ZR(a,i){for(var s=0;s<a.length;s++)i.writeSFixed32(a[s])}function XR(a,i){for(var s=0;s<a.length;s++)i.writeFixed64(a[s])}function KR(a,i){for(var s=0;s<a.length;s++)i.writeSFixed64(a[s])}function z3(a,i){return(a[i]|a[i+1]<<8|a[i+2]<<16)+16777216*a[i+3]}function K1(a,i,s){a[s]=i,a[s+1]=i>>>8,a[s+2]=i>>>16,a[s+3]=i>>>24}function Db(a,i){return(a[i]|a[i+1]<<8|a[i+2]<<16)+(a[i+3]<<24)}Hr.prototype={destroy:function(){this.buf=null},readFields:function(a,i,s){for(s=s||this.length;this.pos<s;){var c=this.readVarint(),d=c>>3,g=this.pos;this.type=7&c,a(d,i,this),this.pos===g&&this.skip(c)}return i},readMessage:function(a,i){return this.readFields(a,i,this.readVarint()+this.pos)},readFixed32:function(){var a=z3(this.buf,this.pos);return this.pos+=4,a},readSFixed32:function(){var a=Db(this.buf,this.pos);return this.pos+=4,a},readFixed64:function(){var a=z3(this.buf,this.pos)+z3(this.buf,this.pos+4)*U7;return this.pos+=8,a},readSFixed64:function(){var a=z3(this.buf,this.pos)+Db(this.buf,this.pos+4)*U7;return this.pos+=8,a},readFloat:function(){var a=Mb(this.buf,this.pos,!0,23,4);return this.pos+=4,a},readDouble:function(){var a=Mb(this.buf,this.pos,!0,52,8);return this.pos+=8,a},readVarint:function(a){var i,s,c=this.buf;return i=127&(s=c[this.pos++]),s<128?i:(i|=(127&(s=c[this.pos++]))<<7,s<128?i:(i|=(127&(s=c[this.pos++]))<<14,s<128?i:(i|=(127&(s=c[this.pos++]))<<21,s<128?i:function(d,g,v){var w,E,A=v.buf;if(w=(112&(E=A[v.pos++]))>>4,E<128||(w|=(127&(E=A[v.pos++]))<<3,E<128)||(w|=(127&(E=A[v.pos++]))<<10,E<128)||(w|=(127&(E=A[v.pos++]))<<17,E<128)||(w|=(127&(E=A[v.pos++]))<<24,E<128)||(w|=(1&(E=A[v.pos++]))<<31,E<128))return X1(d,w,g);throw new Error("Expected varint not more than 10 bytes")}(i|=(15&(s=c[this.pos]))<<28,a,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var a=this.readVarint();return a%2==1?(a+1)/-2:a/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var a=this.readVarint()+this.pos,i=this.pos;return this.pos=a,a-i>=12&&Ob?function(s,c,d){return Ob.decode(s.subarray(c,d))}(this.buf,i,a):function(s,c,d){for(var g="",v=c;v<d;){var w,E,A,O=s[v],D=null,z=O>239?4:O>223?3:O>191?2:1;if(v+z>d)break;z===1?O<128&&(D=O):z===2?(192&(w=s[v+1]))==128&&(D=(31&O)<<6|63&w)<=127&&(D=null):z===3?(E=s[v+2],(192&(w=s[v+1]))==128&&(192&E)==128&&((D=(15&O)<<12|(63&w)<<6|63&E)<=2047||D>=55296&&D<=57343)&&(D=null)):z===4&&(E=s[v+2],A=s[v+3],(192&(w=s[v+1]))==128&&(192&E)==128&&(192&A)==128&&((D=(15&O)<<18|(63&w)<<12|(63&E)<<6|63&A)<=65535||D>=1114112)&&(D=null)),D===null?(D=65533,z=1):D>65535&&(D-=65536,g+=String.fromCharCode(D>>>10&1023|55296),D=56320|1023&D),g+=String.fromCharCode(D),v+=z}return g}(this.buf,i,a)},readBytes:function(){var a=this.readVarint()+this.pos,i=this.buf.subarray(this.pos,a);return this.pos=a,i},readPackedVarint:function(a,i){if(this.type!==Hr.Bytes)return a.push(this.readVarint(i));var s=Ys(this);for(a=a||[];this.pos<s;)a.push(this.readVarint(i));return a},readPackedSVarint:function(a){if(this.type!==Hr.Bytes)return a.push(this.readSVarint());var i=Ys(this);for(a=a||[];this.pos<i;)a.push(this.readSVarint());return a},readPackedBoolean:function(a){if(this.type!==Hr.Bytes)return a.push(this.readBoolean());var i=Ys(this);for(a=a||[];this.pos<i;)a.push(this.readBoolean());return a},readPackedFloat:function(a){if(this.type!==Hr.Bytes)return a.push(this.readFloat());var i=Ys(this);for(a=a||[];this.pos<i;)a.push(this.readFloat());return a},readPackedDouble:function(a){if(this.type!==Hr.Bytes)return a.push(this.readDouble());var i=Ys(this);for(a=a||[];this.pos<i;)a.push(this.readDouble());return a},readPackedFixed32:function(a){if(this.type!==Hr.Bytes)return a.push(this.readFixed32());var i=Ys(this);for(a=a||[];this.pos<i;)a.push(this.readFixed32());return a},readPackedSFixed32:function(a){if(this.type!==Hr.Bytes)return a.push(this.readSFixed32());var i=Ys(this);for(a=a||[];this.pos<i;)a.push(this.readSFixed32());return a},readPackedFixed64:function(a){if(this.type!==Hr.Bytes)return a.push(this.readFixed64());var i=Ys(this);for(a=a||[];this.pos<i;)a.push(this.readFixed64());return a},readPackedSFixed64:function(a){if(this.type!==Hr.Bytes)return a.push(this.readSFixed64());var i=Ys(this);for(a=a||[];this.pos<i;)a.push(this.readSFixed64());return a},skip:function(a){var i=7&a;if(i===Hr.Varint)for(;this.buf[this.pos++]>127;);else if(i===Hr.Bytes)this.pos=this.readVarint()+this.pos;else if(i===Hr.Fixed32)this.pos+=4;else{if(i!==Hr.Fixed64)throw new Error("Unimplemented type: "+i);this.pos+=8}},writeTag:function(a,i){this.writeVarint(a<<3|i)},realloc:function(a){for(var i=this.length||16;i<this.pos+a;)i*=2;if(i!==this.length){var s=new Uint8Array(i);s.set(this.buf),this.buf=s,this.length=i}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(a){this.realloc(4),K1(this.buf,a,this.pos),this.pos+=4},writeSFixed32:function(a){this.realloc(4),K1(this.buf,a,this.pos),this.pos+=4},writeFixed64:function(a){this.realloc(8),K1(this.buf,-1&a,this.pos),K1(this.buf,Math.floor(a*Ib),this.pos+4),this.pos+=8},writeSFixed64:function(a){this.realloc(8),K1(this.buf,-1&a,this.pos),K1(this.buf,Math.floor(a*Ib),this.pos+4),this.pos+=8},writeVarint:function(a){(a=+a||0)>268435455||a<0?function(i,s){var c,d;if(i>=0?(c=i%4294967296|0,d=i/4294967296|0):(d=~(-i/4294967296),4294967295^(c=~(-i%4294967296))?c=c+1|0:(c=0,d=d+1|0)),i>=18446744073709552e3||i<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),function(g,v,w){w.buf[w.pos++]=127&g|128,g>>>=7,w.buf[w.pos++]=127&g|128,g>>>=7,w.buf[w.pos++]=127&g|128,g>>>=7,w.buf[w.pos++]=127&g|128,w.buf[w.pos]=127&(g>>>=7)}(c,0,s),function(g,v){var w=(7&g)<<4;v.buf[v.pos++]|=w|((g>>>=3)?128:0),g&&(v.buf[v.pos++]=127&g|((g>>>=7)?128:0),g&&(v.buf[v.pos++]=127&g|((g>>>=7)?128:0),g&&(v.buf[v.pos++]=127&g|((g>>>=7)?128:0),g&&(v.buf[v.pos++]=127&g|((g>>>=7)?128:0),g&&(v.buf[v.pos++]=127&g)))))}(d,s)}(a,this):(this.realloc(4),this.buf[this.pos++]=127&a|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=a>>>7&127))))},writeSVarint:function(a){this.writeVarint(a<0?2*-a-1:2*a)},writeBoolean:function(a){this.writeVarint(!!a)},writeString:function(a){a=String(a),this.realloc(4*a.length),this.pos++;var i=this.pos;this.pos=function(c,d,g){for(var v,w,E=0;E<d.length;E++){if((v=d.charCodeAt(E))>55295&&v<57344){if(!w){v>56319||E+1===d.length?(c[g++]=239,c[g++]=191,c[g++]=189):w=v;continue}if(v<56320){c[g++]=239,c[g++]=191,c[g++]=189,w=v;continue}v=w-55296<<10|v-56320|65536,w=null}else w&&(c[g++]=239,c[g++]=191,c[g++]=189,w=null);v<128?c[g++]=v:(v<2048?c[g++]=v>>6|192:(v<65536?c[g++]=v>>12|224:(c[g++]=v>>18|240,c[g++]=v>>12&63|128),c[g++]=v>>6&63|128),c[g++]=63&v|128)}return g}(this.buf,a,this.pos);var s=this.pos-i;s>=128&&kb(i,s,this),this.pos=i-1,this.writeVarint(s),this.pos+=s},writeFloat:function(a){this.realloc(4),Cb(this.buf,a,this.pos,!0,23,4),this.pos+=4},writeDouble:function(a){this.realloc(8),Cb(this.buf,a,this.pos,!0,52,8),this.pos+=8},writeBytes:function(a){var i=a.length;this.writeVarint(i),this.realloc(i);for(var s=0;s<i;s++)this.buf[this.pos++]=a[s]},writeRawMessage:function(a,i){this.pos++;var s=this.pos;a(i,this);var c=this.pos-s;c>=128&&kb(s,c,this),this.pos=s-1,this.writeVarint(c),this.pos+=c},writeMessage:function(a,i,s){this.writeTag(a,Hr.Bytes),this.writeRawMessage(i,s)},writePackedVarint:function(a,i){i.length&&this.writeMessage(a,UR,i)},writePackedSVarint:function(a,i){i.length&&this.writeMessage(a,VR,i)},writePackedBoolean:function(a,i){i.length&&this.writeMessage(a,qR,i)},writePackedFloat:function(a,i){i.length&&this.writeMessage(a,GR,i)},writePackedDouble:function(a,i){i.length&&this.writeMessage(a,WR,i)},writePackedFixed32:function(a,i){i.length&&this.writeMessage(a,HR,i)},writePackedSFixed32:function(a,i){i.length&&this.writeMessage(a,ZR,i)},writePackedFixed64:function(a,i){i.length&&this.writeMessage(a,XR,i)},writePackedSFixed64:function(a,i){i.length&&this.writeMessage(a,KR,i)},writeBytesField:function(a,i){this.writeTag(a,Hr.Bytes),this.writeBytes(i)},writeFixed32Field:function(a,i){this.writeTag(a,Hr.Fixed32),this.writeFixed32(i)},writeSFixed32Field:function(a,i){this.writeTag(a,Hr.Fixed32),this.writeSFixed32(i)},writeFixed64Field:function(a,i){this.writeTag(a,Hr.Fixed64),this.writeFixed64(i)},writeSFixed64Field:function(a,i){this.writeTag(a,Hr.Fixed64),this.writeSFixed64(i)},writeVarintField:function(a,i){this.writeTag(a,Hr.Varint),this.writeVarint(i)},writeSVarintField:function(a,i){this.writeTag(a,Hr.Varint),this.writeSVarint(i)},writeStringField:function(a,i){this.writeTag(a,Hr.Bytes),this.writeString(i)},writeFloatField:function(a,i){this.writeTag(a,Hr.Fixed32),this.writeFloat(i)},writeDoubleField:function(a,i){this.writeTag(a,Hr.Fixed64),this.writeDouble(i)},writeBooleanField:function(a,i){this.writeVarintField(a,!!i)}};var R3=U(Ab);const V7=3;function YR(a,i,s){i.glyphs=[],a===1&&s.readMessage(JR,i)}function JR(a,i,s){if(a===3){const{id:c,bitmap:d,width:g,height:v,left:w,top:E,advance:A}=s.readMessage(QR,{});i.glyphs.push({id:c,bitmap:new Ks({width:g+2*V7,height:v+2*V7},d),metrics:{width:g,height:v,left:w,top:E,advance:A}})}else a===4?i.ascender=s.readSVarint():a===5&&(i.descender=s.readSVarint())}function QR(a,i,s){a===1?i.id=s.readVarint():a===2?i.bitmap=s.readBytes():a===3?i.width=s.readVarint():a===4?i.height=s.readVarint():a===5?i.left=s.readSVarint():a===6?i.top=s.readSVarint():a===7&&(i.advance=s.readVarint())}const Lb=V7;function G7(a){let i=0,s=0;for(const v of a)i+=v.w*v.h,s=Math.max(s,v.w);a.sort((v,w)=>w.h-v.h);const c=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),s),h:1/0}];let d=0,g=0;for(const v of a)for(let w=c.length-1;w>=0;w--){const E=c[w];if(!(v.w>E.w||v.h>E.h)){if(v.x=E.x,v.y=E.y,g=Math.max(g,v.y+v.h),d=Math.max(d,v.x+v.w),v.w===E.w&&v.h===E.h){const A=c.pop();w<c.length&&(c[w]=A)}else v.h===E.h?(E.x+=v.w,E.w-=v.w):v.w===E.w?(E.y+=v.h,E.h-=v.h):(c.push({x:E.x+v.w,y:E.y,w:E.w-v.w,h:v.h}),E.y+=v.h,E.h-=v.h);break}}return{w:d,h:g,fill:i/(d*g)||0}}const oo=1;class W7{constructor(i,{pixelRatio:s,version:c,stretchX:d,stretchY:g,content:v}){this.paddedRect=i,this.pixelRatio=s,this.stretchX=d,this.stretchY=g,this.content=v,this.version=c}get tl(){return[this.paddedRect.x+oo,this.paddedRect.y+oo]}get br(){return[this.paddedRect.x+this.paddedRect.w-oo,this.paddedRect.y+this.paddedRect.h-oo]}get displaySize(){return[(this.paddedRect.w-2*oo)/this.pixelRatio,(this.paddedRect.h-2*oo)/this.pixelRatio]}}class zb{constructor(i,s){const c={},d={};this.haveRenderCallbacks=[];const g=[];this.addImages(i,c,g),this.addImages(s,d,g);const{w:v,h:w}=G7(g),E=new To({width:v||1,height:w||1});for(const A in i){const O=i[A],D=c[A].paddedRect;To.copy(O.data,E,{x:0,y:0},{x:D.x+oo,y:D.y+oo},O.data)}for(const A in s){const O=s[A],D=d[A].paddedRect,z=D.x+oo,V=D.y+oo,W=O.data.width,K=O.data.height;To.copy(O.data,E,{x:0,y:0},{x:z,y:V},O.data),To.copy(O.data,E,{x:0,y:K-1},{x:z,y:V-1},{width:W,height:1}),To.copy(O.data,E,{x:0,y:0},{x:z,y:V+K},{width:W,height:1}),To.copy(O.data,E,{x:W-1,y:0},{x:z-1,y:V},{width:1,height:K}),To.copy(O.data,E,{x:0,y:0},{x:z+W,y:V},{width:1,height:K})}this.image=E,this.iconPositions=c,this.patternPositions=d}addImages(i,s,c){for(const d in i){const g=i[d],v={x:0,y:0,w:g.data.width+2*oo,h:g.data.height+2*oo};c.push(v),s[d]=new W7(v,g),g.hasRenderCallback&&this.haveRenderCallbacks.push(d)}}patchUpdatedImages(i,s){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(c=>i.hasImage(c)),i.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const c in i.updatedImages)this.patchUpdatedImage(this.iconPositions[c],i.getImage(c),s),this.patchUpdatedImage(this.patternPositions[c],i.getImage(c),s)}patchUpdatedImage(i,s,c){if(!i||!s||i.version===s.version)return;i.version=s.version;const[d,g]=i.tl;c.update(s.data,void 0,{x:d,y:g})}}Rt(W7,"ImagePosition"),Rt(zb,"ImageAtlas");const Vo={horizontal:1,vertical:2,horizontalOnly:3},Rb=-17;class id{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(i,s){const c=new id;return c.scale=i||1,c.fontStack=s,c}static forImage(i){const s=new id;return s.imageName=i,s}}class Y1{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(i,s){const c=new Y1;for(let d=0;d<i.sections.length;d++){const g=i.sections[d];g.image?c.addImageSection(g):c.addTextSection(g,s)}return c}length(){return this.text.length}getSection(i){return this.sections[this.sectionIndex[i]]}getSections(){return this.sections}getSectionIndex(i){return this.sectionIndex[i]}getCharCode(i){return this.text.charCodeAt(i)}verticalizePunctuation(i){this.text=function(s,c){let d="";for(let g=0;g<s.length;g++){const v=s.charCodeAt(g+1)||null,w=s.charCodeAt(g-1)||null;d+=!c&&(v&&h3(v)&&!nd[s[g+1]]||w&&h3(w)&&!nd[s[g-1]])||!nd[s[g]]?s[g]:nd[s[g]]}return d}(this.text,i)}trim(){let i=0;for(let c=0;c<this.text.length&&B3[this.text.charCodeAt(c)];c++)i++;let s=this.text.length;for(let c=this.text.length-1;c>=0&&c>=i&&B3[this.text.charCodeAt(c)];c--)s--;this.text=this.text.substring(i,s),this.sectionIndex=this.sectionIndex.slice(i,s)}substring(i,s){const c=new Y1;return c.text=this.text.substring(i,s),c.sectionIndex=this.sectionIndex.slice(i,s),c.sections=this.sections,c}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((i,s)=>Math.max(i,this.sections[s].scale),0)}addTextSection(i,s){this.text+=i.text,this.sections.push(id.forText(i.scale,i.fontStack||s));const c=this.sections.length-1;for(let d=0;d<i.text.length;++d)this.sectionIndex.push(c)}addImageSection(i){const s=i.image?i.image.name:"";if(s.length===0)return void hr("Can't add FormattedSection with an empty image.");const c=this.getNextImageSectionCharCode();c?(this.text+=String.fromCharCode(c),this.sections.push(id.forImage(s)),this.sectionIndex.push(this.sections.length-1)):hr("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function q7(a,i,s,c,d,g,v,w,E,A,O,D,z,V,W){const K=Y1.fromFeature(a,d);D===Vo.vertical&&K.verticalizePunctuation(z);let re=[];const he=function(be,Ze,We,nt,yt,Ye){if(!be)return[];const at=[],st=function(At,$t,Mt,ir,wt,Wt){let or=0;for(let Pr=0;Pr<At.length();Pr++){const ar=At.getSection(Pr);or+=Bb(At.getCharCode(Pr),ar,ir,wt,$t,Wt)}return or/Math.max(1,Math.ceil(or/Mt))}(be,Ze,We,nt,yt,Ye),pt=be.text.indexOf("​")>=0;let xt=0;for(let At=0;At<be.length();At++){const $t=be.getSection(At),Mt=be.getCharCode(At);if(B3[Mt]||(xt+=Bb(Mt,$t,nt,yt,Ze,Ye)),At<be.length()-1){const ir=!((tt=Mt)<11904||!(Ct["Bopomofo Extended"](tt)||Ct.Bopomofo(tt)||Ct["CJK Compatibility Forms"](tt)||Ct["CJK Compatibility Ideographs"](tt)||Ct["CJK Compatibility"](tt)||Ct["CJK Radicals Supplement"](tt)||Ct["CJK Strokes"](tt)||Ct["CJK Symbols and Punctuation"](tt)||Ct["CJK Unified Ideographs Extension A"](tt)||Ct["CJK Unified Ideographs"](tt)||Ct["Enclosed CJK Letters and Months"](tt)||Ct["Halfwidth and Fullwidth Forms"](tt)||Ct.Hiragana(tt)||Ct["Ideographic Description Characters"](tt)||Ct["Kangxi Radicals"](tt)||Ct["Katakana Phonetic Extensions"](tt)||Ct.Katakana(tt)||Ct["Vertical Forms"](tt)||Ct["Yi Radicals"](tt)||Ct["Yi Syllables"](tt)));(eB[Mt]||ir||$t.imageName)&&at.push(jb(At+1,xt,st,at,tB(Mt,be.getCharCode(At+1),ir&&pt),!1))}}var tt;return $b(jb(be.length(),xt,st,at,0,!0))}(K,A,g,i,c,V),{processBidirectionalText:xe,processStyledBidirectionalText:fe}=I;if(xe&&K.sections.length===1){const be=xe(K.toString(),he);for(const Ze of be){const We=new Y1;We.text=Ze,We.sections=K.sections;for(let nt=0;nt<Ze.length;nt++)We.sectionIndex.push(0);re.push(We)}}else if(fe){const be=fe(K.text,K.sectionIndex,he);for(const Ze of be){const We=new Y1;We.text=Ze[0],We.sectionIndex=Ze[1],We.sections=K.sections,re.push(We)}}else re=function(be,Ze){const We=[],nt=be.text;let yt=0;for(const Ye of Ze)We.push(be.substring(yt,Ye)),yt=Ye;return yt<nt.length&&We.push(be.substring(yt,nt.length)),We}(K,he);const _e=[],Te={positionedLines:_e,text:K.toString(),top:O[1],bottom:O[1],left:O[0],right:O[0],writingMode:D,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(be,Ze,We,nt,yt,Ye,at,st,pt,xt,tt,At){let $t=0,Mt=0,ir=0;const wt=st==="right"?1:st==="left"?0:.5;let Wt=!1;for(const sr of yt){const lr=sr.getSections();for(const Vr of lr){if(Vr.imageName)continue;const Zr=Ze[Vr.fontStack];if(Zr&&(Wt=Zr.ascender!==void 0&&Zr.descender!==void 0,!Wt))break}if(!Wt)break}let or=0;for(const sr of yt){sr.trim();const lr=sr.getMaxScale(),Vr=(lr-1)*si,Zr={positionedGlyphs:[],lineOffset:0};be.positionedLines[or]=Zr;const Xr=Zr.positionedGlyphs;let Gr=0;if(!sr.length()){Mt+=Ye,++or;continue}let dn=0,bn=0;for(let Wr=0;Wr<sr.length();Wr++){const Wn=sr.getSection(Wr),Bn=sr.getSectionIndex(Wr),gn=sr.getCharCode(Wr);let Ir=Wn.scale,Fn=null,Kr=null,Wi=null,jn=si,li=0;const Qn=!(pt===Vo.horizontal||!tt&&!O0(gn)||tt&&(B3[gn]||(Pr=gn,Ct.Arabic(Pr)||Ct["Arabic Supplement"](Pr)||Ct["Arabic Extended-A"](Pr)||Ct["Arabic Presentation Forms-A"](Pr)||Ct["Arabic Presentation Forms-B"](Pr))));if(Wn.imageName){const qi=nt[Wn.imageName];if(!qi)continue;Wi=Wn.imageName,be.iconsInText=be.iconsInText||!0,Kr=qi.paddedRect;const ei=qi.displaySize;Ir=Ir*si/At,Fn={width:ei[0],height:ei[1],left:oo,top:-Lb,advance:Qn?ei[1]:ei[0],localGlyph:!1},li=Wt?-Fn.height*Ir:Rb+lr*si-ei[1]*Ir,jn=Fn.advance;const qa=(Qn?ei[0]:ei[1])*Ir-si*lr;qa>0&&qa>Gr&&(Gr=qa)}else{const qi=We[Wn.fontStack];if(!qi)continue;qi[gn]&&(Kr=qi[gn]);const ei=Ze[Wn.fontStack];if(!ei)continue;const qa=ei.glyphs[gn];if(!qa)continue;if(Fn=qa.metrics,jn=gn!==8203?si:0,Wt){const ih=ei.ascender!==void 0?Math.abs(ei.ascender):0,pd=ei.descender!==void 0?Math.abs(ei.descender):0,md=(ih+pd)*Ir;dn<md&&(dn=md,bn=(ih-pd)/2*Ir),li=-ih*Ir}else li=Rb+(lr-Ir)*si}Qn?(be.verticalizable=!0,Xr.push({glyph:gn,imageName:Wi,x:$t,y:Mt+li,vertical:Qn,scale:Ir,localGlyph:Fn.localGlyph,fontStack:Wn.fontStack,sectionIndex:Bn,metrics:Fn,rect:Kr}),$t+=jn*Ir+xt):(Xr.push({glyph:gn,imageName:Wi,x:$t,y:Mt+li,vertical:Qn,scale:Ir,localGlyph:Fn.localGlyph,fontStack:Wn.fontStack,sectionIndex:Bn,metrics:Fn,rect:Kr}),$t+=Fn.advance*Ir+xt)}Xr.length!==0&&(ir=Math.max($t-xt,ir),Wt?Nb(Xr,wt,Gr,bn,Ye*lr/2):Nb(Xr,wt,Gr,0,Ye/2)),$t=0;const Rn=Ye*lr+Gr;Zr.lineOffset=Math.max(Gr,Vr),Mt+=Rn,++or}var Pr;const ar=Mt,{horizontalAlign:Qt,verticalAlign:en}=H7(at);(function(sr,lr,Vr,Zr,Xr,Gr){const dn=(lr-Vr)*Xr,bn=-Gr*Zr;for(const Rn of sr)for(const Wr of Rn.positionedGlyphs)Wr.x+=dn,Wr.y+=bn})(be.positionedLines,wt,Qt,en,ir,ar),be.top+=-en*ar,be.bottom=be.top+ar,be.left+=-Qt*ir,be.right=be.left+ir,be.hasBaseline=Wt}(Te,i,s,c,re,v,w,E,D,A,z,W),!function(be){for(const Ze of be)if(Ze.positionedGlyphs.length!==0)return!1;return!0}(_e)&&Te}const B3={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},eB={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Bb(a,i,s,c,d,g){if(i.imageName){const v=c[i.imageName];return v?v.displaySize[0]*i.scale*si/g+d:0}{const v=s[i.fontStack],w=v&&v.glyphs[a];return w?w.metrics.advance*i.scale+d:0}}function Fb(a,i,s,c){const d=Math.pow(a-i,2);return c?a<i?d/2:2*d:d+Math.abs(s)*s}function tB(a,i,s){let c=0;return a===10&&(c-=1e4),s&&(c+=150),a!==40&&a!==65288||(c+=50),i!==41&&i!==65289||(c+=50),c}function jb(a,i,s,c,d,g){let v=null,w=Fb(i,s,d,g);for(const E of c){const A=Fb(i-E.x,s,d,g)+E.badness;A<=w&&(v=E,w=A)}return{index:a,x:i,priorBreak:v,badness:w}}function $b(a){return a?$b(a.priorBreak).concat(a.index):[]}function H7(a){let i=.5,s=.5;switch(a){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(a){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:i,verticalAlign:s}}function Nb(a,i,s,c,d){if(!(i||s||c||d))return;const g=a.length-1,v=a[g],w=(v.x+v.metrics.advance*v.scale)*i;for(let E=0;E<=g;E++)a[E].x-=w,a[E].y+=s+c+d}function rB(a,i,s){const{horizontalAlign:c,verticalAlign:d}=H7(s),g=i[0]-a.displaySize[0]*c,v=i[1]-a.displaySize[1]*d;return{image:a,top:v,bottom:v+a.displaySize[1],left:g,right:g+a.displaySize[0]}}function Ub(a,i,s,c,d,g){const v=a.image;let w;if(v.content){const re=v.content,he=v.pixelRatio||1;w=[re[0]/he,re[1]/he,v.displaySize[0]-re[2]/he,v.displaySize[1]-re[3]/he]}const E=i.left*g,A=i.right*g;let O,D,z,V;s==="width"||s==="both"?(V=d[0]+E-c[3],D=d[0]+A+c[1]):(V=d[0]+(E+A-v.displaySize[0])/2,D=V+v.displaySize[0]);const W=i.top*g,K=i.bottom*g;return s==="height"||s==="both"?(O=d[1]+W-c[0],z=d[1]+K+c[2]):(O=d[1]+(W+K-v.displaySize[1])/2,z=O+v.displaySize[1]),{image:v,top:O,right:D,bottom:z,left:V,collisionPadding:w}}class Js extends oe{constructor(i,s,c,d,g){super(i,s),this.angle=d,this.z=c,g!==void 0&&(this.segment=g)}clone(){return new Js(this.x,this.y,this.z,this.angle,this.segment)}}function Vb(a,i,s,c,d){if(i.segment===void 0)return!0;let g=i,v=i.segment+1,w=0;for(;w>-s/2;){if(v--,v<0)return!1;w-=a[v].dist(g),g=a[v]}w+=a[v].dist(a[v+1]),v++;const E=[];let A=0;for(;w<s/2;){const O=a[v],D=a[v+1];if(!D)return!1;let z=a[v-1].angleTo(O)-O.angleTo(D);for(z=Math.abs((z+3*Math.PI)%(2*Math.PI)-Math.PI),E.push({distance:w,angleDelta:z}),A+=z;w-E[0].distance>c;)A-=E.shift().angleDelta;if(A>d)return!1;v++,w+=O.dist(D)}return!0}function Gb(a){let i=0;for(let s=0;s<a.length-1;s++)i+=a[s].dist(a[s+1]);return i}function Wb(a,i,s){return a?.6*i*s:0}function qb(a,i){return Math.max(a?a.right-a.left:0,i?i.right-i.left:0)}function nB(a,i,s,c,d,g){const v=Wb(s,d,g),w=qb(s,c)*g;let E=0;const A=Gb(a)/2;for(let O=0;O<a.length-1;O++){const D=a[O],z=a[O+1],V=D.dist(z);if(E+V>A){const W=(A-E)/V,K=Sr(D.x,z.x,W),re=Sr(D.y,z.y,W),he=new Js(K,re,0,z.angleTo(D),O);return!v||Vb(a,he,w,v,i)?he:void 0}E+=V}}function iB(a,i,s,c,d,g,v,w,E){const A=Wb(c,g,v),O=qb(c,d),D=O*v,z=a[0].x===0||a[0].x===E||a[0].y===0||a[0].y===E;return i-D<i/4&&(i=D+i/4),Hb(a,z?i/2*w%i:(O/2+2*g)*v*w%i,i,A,s,D,z,!1,E)}function Hb(a,i,s,c,d,g,v,w,E){const A=g/2,O=Gb(a);let D=0,z=i-s,V=[];for(let W=0;W<a.length-1;W++){const K=a[W],re=a[W+1],he=K.dist(re),xe=re.angleTo(K);for(;z+s<D+he;){z+=s;const fe=(z-D)/he,_e=Sr(K.x,re.x,fe),Te=Sr(K.y,re.y,fe);if(_e>=0&&_e<E&&Te>=0&&Te<E&&z-A>=0&&z+A<=O){const be=new Js(_e,Te,0,xe,W);be._round(),c&&!Vb(a,be,g,c,d)||V.push(be)}}D+=he}return w||V.length||v||(V=Hb(a,D/2,s,c,d,g,v,!0,E)),V}function Zb(a,i,s,c,d){const g=[];for(let v=0;v<a.length;v++){const w=a[v];let E;for(let A=0;A<w.length-1;A++){let O=w[A],D=w[A+1];O.x<i&&D.x<i||(O.x<i?O=new oe(i,O.y+(i-O.x)/(D.x-O.x)*(D.y-O.y))._round():D.x<i&&(D=new oe(i,O.y+(i-O.x)/(D.x-O.x)*(D.y-O.y))._round()),O.y<s&&D.y<s||(O.y<s?O=new oe(O.x+(s-O.y)/(D.y-O.y)*(D.x-O.x),s)._round():D.y<s&&(D=new oe(O.x+(s-O.y)/(D.y-O.y)*(D.x-O.x),s)._round()),O.x>=c&&D.x>=c||(O.x>=c?O=new oe(c,O.y+(c-O.x)/(D.x-O.x)*(D.y-O.y))._round():D.x>=c&&(D=new oe(c,O.y+(c-O.x)/(D.x-O.x)*(D.y-O.y))._round()),O.y>=d&&D.y>=d||(O.y>=d?O=new oe(O.x+(d-O.y)/(D.y-O.y)*(D.x-O.x),d)._round():D.y>=d&&(D=new oe(O.x+(d-O.y)/(D.y-O.y)*(D.x-O.x),d)._round()),E&&O.equals(E[E.length-1])||(E=[O],g.push(E)),E.push(D)))))}}return g}Rt(Js,"Anchor");const od=1e20;function Xb(a,i,s,c,d,g,v,w,E){for(let A=i;A<i+c;A++)Kb(a,s*g+A,g,d,v,w,E);for(let A=s;A<s+d;A++)Kb(a,A*g+i,1,c,v,w,E)}function Kb(a,i,s,c,d,g,v){g[0]=0,v[0]=-od,v[1]=od,d[0]=a[i];for(let w=1,E=0,A=0;w<c;w++){d[w]=a[i+w*s];const O=w*w;do{const D=g[E];A=(d[w]-d[D]+O-D*D)/(w-D)/2}while(A<=v[E]&&--E>-1);E++,g[E]=w,v[E]=A,v[E+1]=od}for(let w=0,E=0;w<c;w++){for(;v[E+1]<w;)E++;const A=g[E],O=w-A;a[i+w*s]=d[A]+O*O}}const Ga=2,Z7={none:0,ideographs:1,all:2};class J1{constructor(i,s,c){this.requestManager=i,this.localGlyphMode=s,this.localFontFamily=c,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(i){this.url=i}getGlyphs(i,s){const c=[];for(const d in i)for(const g of i[d])c.push({stack:d,id:g});ft(c,({stack:d,id:g},v)=>{let w=this.entries[d];w||(w=this.entries[d]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let E=w.glyphs[g];if(E!==void 0)return void v(null,{stack:d,id:g,glyph:E});if(E=this._tinySDF(w,d,g),E)return w.glyphs[g]=E,void v(null,{stack:d,id:g,glyph:E});const A=Math.floor(g/256);if(256*A>65535)return void v(new Error("glyphs > 65535 not supported"));if(w.ranges[A])return void v(null,{stack:d,id:g,glyph:E});let O=w.requests[A];O||(O=w.requests[A]=[],J1.loadGlyphRange(d,A,this.url,this.requestManager,(D,z)=>{if(z){w.ascender=z.ascender,w.descender=z.descender;for(const V in z.glyphs)this._doesCharSupportLocalGlyph(+V)||(w.glyphs[+V]=z.glyphs[+V]);w.ranges[A]=!0}for(const V of O)V(D,z);delete w.requests[A]})),O.push((D,z)=>{D?v(D):z&&v(null,{stack:d,id:g,glyph:z.glyphs[g]||null})})},(d,g)=>{if(d)s(d);else if(g){const v={};for(const{stack:w,id:E,glyph:A}of g)v[w]===void 0&&(v[w]={}),v[w].glyphs===void 0&&(v[w].glyphs={}),v[w].glyphs[E]=A&&{id:A.id,bitmap:A.bitmap.clone(),metrics:A.metrics},v[w].ascender=this.entries[w].ascender,v[w].descender=this.entries[w].descender;s(null,v)}})}_doesCharSupportLocalGlyph(i){return this.localGlyphMode!==Z7.none&&(this.localGlyphMode===Z7.all?!!this.localFontFamily:!!this.localFontFamily&&(Ct["CJK Unified Ideographs"](i)||Ct["Hangul Syllables"](i)||Ct.Hiragana(i)||Ct.Katakana(i)||Ct["CJK Symbols and Punctuation"](i)))}_tinySDF(i,s,c){const d=this.localFontFamily;if(!d||!this._doesCharSupportLocalGlyph(c))return;let g=i.tinySDF;if(!g){let K="400";/bold/i.test(s)?K="900":/medium/i.test(s)?K="500":/light/i.test(s)&&(K="200"),g=i.tinySDF=new J1.TinySDF({fontFamily:d,fontWeight:K,fontSize:24*Ga,buffer:3*Ga,radius:8*Ga}),g.fontWeight=K}if(this.localGlyphs[g.fontWeight][c])return this.localGlyphs[g.fontWeight][c];const v=String.fromCharCode(c),{data:w,width:E,height:A,glyphWidth:O,glyphHeight:D,glyphLeft:z,glyphTop:V,glyphAdvance:W}=g.draw(v);return this.localGlyphs[g.fontWeight][c]={id:c,bitmap:new Ks({width:E,height:A},w),metrics:{width:O/Ga,height:D/Ga,left:z/Ga,top:V/Ga-27,advance:W/Ga,localGlyph:!0}}}}J1.loadGlyphRange=function(a,i,s,c,d){const g=256*i,v=g+255,w=c.transformRequest(c.normalizeGlyphsURL(s).replace("{fontstack}",a).replace("{range}",`${g}-${v}`),gi.Glyphs);ls(w,(E,A)=>{if(E)d(E);else if(A){const O={},D=function(z){return new R3(z).readFields(YR,{})}(A);for(const z of D.glyphs)O[z.id]=z;d(null,{glyphs:O,ascender:D.ascender,descender:D.descender})}})},J1.TinySDF=class{constructor({fontSize:a=24,buffer:i=3,radius:s=8,cutoff:c=.25,fontFamily:d="sans-serif",fontWeight:g="normal",fontStyle:v="normal"}={}){this.buffer=i,this.cutoff=c,this.radius=s;const w=this.size=a+4*i,E=this._createCanvas(w),A=this.ctx=E.getContext("2d",{willReadFrequently:!0});A.font=`${v} ${g} ${a}px ${d}`,A.textBaseline="alphabetic",A.textAlign="left",A.fillStyle="black",this.gridOuter=new Float64Array(w*w),this.gridInner=new Float64Array(w*w),this.f=new Float64Array(w),this.z=new Float64Array(w+1),this.v=new Uint16Array(w)}_createCanvas(a){const i=document.createElement("canvas");return i.width=i.height=a,i}draw(a){const{width:i,actualBoundingBoxAscent:s,actualBoundingBoxDescent:c,actualBoundingBoxLeft:d,actualBoundingBoxRight:g}=this.ctx.measureText(a),v=Math.ceil(s),w=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(g-d))),E=Math.min(this.size-this.buffer,v+Math.ceil(c)),A=w+2*this.buffer,O=E+2*this.buffer,D=Math.max(A*O,0),z=new Uint8ClampedArray(D),V={data:z,width:A,height:O,glyphWidth:w,glyphHeight:E,glyphTop:v,glyphLeft:0,glyphAdvance:i};if(w===0||E===0)return V;const{ctx:W,buffer:K,gridInner:re,gridOuter:he}=this;W.clearRect(K,K,w,E),W.fillText(a,K,K+v);const xe=W.getImageData(K,K,w,E);he.fill(od,0,D),re.fill(0,0,D);for(let fe=0;fe<E;fe++)for(let _e=0;_e<w;_e++){const Te=xe.data[4*(fe*w+_e)+3]/255;if(Te===0)continue;const be=(fe+K)*A+_e+K;if(Te===1)he[be]=0,re[be]=od;else{const Ze=.5-Te;he[be]=Ze>0?Ze*Ze:0,re[be]=Ze<0?Ze*Ze:0}}Xb(he,0,0,A,O,A,this.f,this.v,this.z),Xb(re,K,K,w,E,A,this.f,this.v,this.z);for(let fe=0;fe<D;fe++){const _e=Math.sqrt(he[fe])-Math.sqrt(re[fe]);z[fe]=Math.round(255-255*(_e/this.radius+this.cutoff))}return V}};const Q1=oo;function Yb(a,i,s,c){const d=[],g=a.image,v=g.pixelRatio,w=g.paddedRect.w-2*Q1,E=g.paddedRect.h-2*Q1,A=a.right-a.left,O=a.bottom-a.top,D=g.stretchX||[[0,w]],z=g.stretchY||[[0,E]],V=(Ye,at)=>Ye+at[1]-at[0],W=D.reduce(V,0),K=z.reduce(V,0),re=w-W,he=E-K;let xe=0,fe=W,_e=0,Te=K,be=0,Ze=re,We=0,nt=he;if(g.content&&c){const Ye=g.content;xe=F3(D,0,Ye[0]),_e=F3(z,0,Ye[1]),fe=F3(D,Ye[0],Ye[2]),Te=F3(z,Ye[1],Ye[3]),be=Ye[0]-xe,We=Ye[1]-_e,Ze=Ye[2]-Ye[0]-fe,nt=Ye[3]-Ye[1]-Te}const yt=(Ye,at,st,pt)=>{const xt=j3(Ye.stretch-xe,fe,A,a.left),tt=$3(Ye.fixed-be,Ze,Ye.stretch,W),At=j3(at.stretch-_e,Te,O,a.top),$t=$3(at.fixed-We,nt,at.stretch,K),Mt=j3(st.stretch-xe,fe,A,a.left),ir=$3(st.fixed-be,Ze,st.stretch,W),wt=j3(pt.stretch-_e,Te,O,a.top),Wt=$3(pt.fixed-We,nt,pt.stretch,K),or=new oe(xt,At),Pr=new oe(Mt,At),ar=new oe(Mt,wt),Qt=new oe(xt,wt),en=new oe(tt/v,$t/v),sr=new oe(ir/v,Wt/v),lr=i*Math.PI/180;if(lr){const Xr=Math.sin(lr),Gr=Math.cos(lr),dn=[Gr,-Xr,Xr,Gr];or._matMult(dn),Pr._matMult(dn),Qt._matMult(dn),ar._matMult(dn)}const Vr=Ye.stretch+Ye.fixed,Zr=at.stretch+at.fixed;return{tl:or,tr:Pr,bl:Qt,br:ar,tex:{x:g.paddedRect.x+Q1+Vr,y:g.paddedRect.y+Q1+Zr,w:st.stretch+st.fixed-Vr,h:pt.stretch+pt.fixed-Zr},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:en,pixelOffsetBR:sr,minFontScaleX:Ze/v/A,minFontScaleY:nt/v/O,isSDF:s}};if(c&&(g.stretchX||g.stretchY)){const Ye=Jb(D,re,W),at=Jb(z,he,K);for(let st=0;st<Ye.length-1;st++){const pt=Ye[st],xt=Ye[st+1];for(let tt=0;tt<at.length-1;tt++)d.push(yt(pt,at[tt],xt,at[tt+1]))}}else d.push(yt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:w+1},{fixed:0,stretch:E+1}));return d}function F3(a,i,s){let c=0;for(const d of a)c+=Math.max(i,Math.min(s,d[1]))-Math.max(i,Math.min(s,d[0]));return c}function Jb(a,i,s){const c=[{fixed:-Q1,stretch:0}];for(const[d,g]of a){const v=c[c.length-1];c.push({fixed:d-v.stretch,stretch:v.stretch}),c.push({fixed:d-v.stretch,stretch:v.stretch+(g-d)})}return c.push({fixed:i+Q1,stretch:s}),c}function j3(a,i,s,c){return a/i*s+c}function $3(a,i,s,c){return a-i*s/c}function oB(a,i,s,c){const d=i+a.positionedLines[c].lineOffset;return c===0?s+d/2:s+(d+(i+a.positionedLines[c-1].lineOffset))/2}class aB{constructor(i=[],s=sB){if(this.data=i,this.length=this.data.length,this.compare=s,this.length>0)for(let c=(this.length>>1)-1;c>=0;c--)this._down(c)}push(i){this.data.push(i),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const i=this.data[0],s=this.data.pop();return this.length--,this.length>0&&(this.data[0]=s,this._down(0)),i}peek(){return this.data[0]}_up(i){const{data:s,compare:c}=this,d=s[i];for(;i>0;){const g=i-1>>1,v=s[g];if(c(d,v)>=0)break;s[i]=v,i=g}s[i]=d}_down(i){const{data:s,compare:c}=this,d=this.length>>1,g=s[i];for(;i<d;){let v=1+(i<<1),w=s[v];const E=v+1;if(E<this.length&&c(s[E],w)<0&&(v=E,w=s[E]),c(w,g)>=0)break;s[i]=w,i=v}s[i]=g}}function sB(a,i){return a<i?-1:a>i?1:0}function lB(a,i=1,s=!1){let c=1/0,d=1/0,g=-1/0,v=-1/0;const w=a[0];for(let V=0;V<w.length;V++){const W=w[V];(!V||W.x<c)&&(c=W.x),(!V||W.y<d)&&(d=W.y),(!V||W.x>g)&&(g=W.x),(!V||W.y>v)&&(v=W.y)}const E=Math.min(g-c,v-d);let A=E/2;const O=new aB([],uB);if(E===0)return new oe(c,d);for(let V=c;V<g;V+=E)for(let W=d;W<v;W+=E)O.push(new eh(V+A,W+A,A,a));let D=function(V){let W=0,K=0,re=0;const he=V[0];for(let xe=0,fe=he.length,_e=fe-1;xe<fe;_e=xe++){const Te=he[xe],be=he[_e],Ze=Te.x*be.y-be.x*Te.y;K+=(Te.x+be.x)*Ze,re+=(Te.y+be.y)*Ze,W+=3*Ze}return new eh(K/W,re/W,0,V)}(a),z=O.length;for(;O.length;){const V=O.pop();(V.d>D.d||!D.d)&&(D=V,s&&console.log("found best %d after %d probes",Math.round(1e4*V.d)/1e4,z)),V.max-D.d<=i||(A=V.h/2,O.push(new eh(V.p.x-A,V.p.y-A,A,a)),O.push(new eh(V.p.x+A,V.p.y-A,A,a)),O.push(new eh(V.p.x-A,V.p.y+A,A,a)),O.push(new eh(V.p.x+A,V.p.y+A,A,a)),z+=4)}return s&&(console.log(`num probes: ${z}`),console.log(`best distance: ${D.d}`)),D.p}function uB(a,i){return i.max-a.max}class eh{constructor(i,s,c,d){this.p=new oe(i,s),this.h=c,this.d=function(g,v){let w=!1,E=1/0;for(let A=0;A<v.length;A++){const O=v[A];for(let D=0,z=O.length,V=z-1;D<z;V=D++){const W=O[D],K=O[V];W.y>g.y!=K.y>g.y&&g.x<(K.x-W.x)*(g.y-W.y)/(K.y-W.y)+W.x&&(w=!w),E=Math.min(E,Hx(g,W,K))}}return(w?1:-1)*Math.sqrt(E)}(this.p,d),this.max=this.d+this.h*Math.SQRT2}}const th=7,X7=Number.POSITIVE_INFINITY,cB=Math.sqrt(2);function Qb(a,[i,s]){let c=0,d=0;if(s===X7){i<0&&(i=0);const g=i/cB;switch(a){case"top-right":case"top-left":d=g-th;break;case"bottom-right":case"bottom-left":d=-g+th;break;case"bottom":d=-i+th;break;case"top":d=i-th}switch(a){case"top-right":case"bottom-right":c=-g;break;case"top-left":case"bottom-left":c=g;break;case"left":c=i;break;case"right":c=-i}}else{switch(i=Math.abs(i),s=Math.abs(s),a){case"top-right":case"top-left":case"top":d=s-th;break;case"bottom-right":case"bottom-left":case"bottom":d=-s+th}switch(a){case"top-right":case"bottom-right":case"right":c=-i;break;case"top-left":case"bottom-left":case"left":c=i}}return[c,d]}function hB(a,i,s,c,d,g,v,w,E,A){a.createArrays(),a.tilePixelRatio=Xt/(512*a.overscaling),a.compareText={},a.iconsNeedLinear=!1;const O=a.layers[0].layout,D=a.layers[0]._unevaluatedLayout._values,z={};if(a.textSizeData.kind==="composite"){const{minZoom:K,maxZoom:re}=a.textSizeData;z.compositeTextSizes=[D["text-size"].possiblyEvaluate(new k(K),w),D["text-size"].possiblyEvaluate(new k(re),w)]}if(a.iconSizeData.kind==="composite"){const{minZoom:K,maxZoom:re}=a.iconSizeData;z.compositeIconSizes=[D["icon-size"].possiblyEvaluate(new k(K),w),D["icon-size"].possiblyEvaluate(new k(re),w)]}z.layoutTextSize=D["text-size"].possiblyEvaluate(new k(E+1),w),z.layoutIconSize=D["icon-size"].possiblyEvaluate(new k(E+1),w),z.textMaxSize=D["text-size"].possiblyEvaluate(new k(18),w);const V=O.get("text-rotation-alignment")==="map"&&O.get("symbol-placement")!=="point",W=O.get("text-size");for(const K of a.features){const re=O.get("text-font").evaluate(K,{},w).join(","),he=W.evaluate(K,{},w),xe=z.layoutTextSize.evaluate(K,{},w),fe=(z.layoutIconSize.evaluate(K,{},w),{horizontal:{},vertical:void 0}),_e=K.text;let Te,be=[0,0];if(_e){const nt=_e.toString(),yt=O.get("text-letter-spacing").evaluate(K,{},w)*si,Ye=O.get("text-line-height").evaluate(K,{},w)*si,at=i7(nt)?yt:0,st=O.get("text-anchor").evaluate(K,{},w),pt=O.get("text-variable-anchor");if(!pt){const Mt=O.get("text-radial-offset").evaluate(K,{},w);be=Mt?Qb(st,[Mt*si,X7]):O.get("text-offset").evaluate(K,{},w).map(ir=>ir*si)}let xt=V?"center":O.get("text-justify").evaluate(K,{},w);const tt=O.get("symbol-placement")==="point",At=tt?O.get("text-max-width").evaluate(K,{},w)*si:1/0,$t=Mt=>{a.allowVerticalPlacement&&I0(nt)&&(fe.vertical=q7(_e,i,s,d,re,At,Ye,st,Mt,at,be,Vo.vertical,!0,xe,he))};if(!V&&pt){const Mt=xt==="auto"?pt.map(wt=>K7(wt)):[xt];let ir=!1;for(let wt=0;wt<Mt.length;wt++){const Wt=Mt[wt];if(!fe.horizontal[Wt])if(ir)fe.horizontal[Wt]=fe.horizontal[0];else{const or=q7(_e,i,s,d,re,At,Ye,"center",Wt,at,be,Vo.horizontal,!1,xe,he);or&&(fe.horizontal[Wt]=or,ir=or.positionedLines.length===1)}}$t("left")}else{if(xt==="auto"&&(xt=K7(st)),tt||O.get("text-writing-mode").indexOf("horizontal")>=0||!I0(nt)){const Mt=q7(_e,i,s,d,re,At,Ye,st,xt,at,be,Vo.horizontal,!1,xe,he);Mt&&(fe.horizontal[xt]=Mt)}$t(tt?"left":xt)}}let Ze=!1;if(K.icon&&K.icon.name){const nt=c[K.icon.name];nt&&(Te=rB(d[K.icon.name],O.get("icon-offset").evaluate(K,{},w),O.get("icon-anchor").evaluate(K,{},w)),Ze=nt.sdf,a.sdfIcons===void 0?a.sdfIcons=nt.sdf:a.sdfIcons!==nt.sdf&&hr("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(nt.pixelRatio!==a.pixelRatio||O.get("icon-rotate").constantOr(1)!==0)&&(a.iconsNeedLinear=!0))}const We=tw(fe.horizontal)||fe.vertical;a.iconsInText||(a.iconsInText=!!We&&We.iconsInText),(We||Te)&&fB(a,K,fe,Te,c,z,xe,0,be,Ze,v,w,A)}g&&a.generateCollisionDebugBuffers(E,a.collisionBoxArray)}function K7(a){switch(a){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function fB(a,i,s,c,d,g,v,w,E,A,O,D,z){let V=g.textMaxSize.evaluate(i,{},D);V===void 0&&(V=v);const W=a.layers[0].layout,K=W.get("icon-offset").evaluate(i,{},D),re=tw(s.horizontal)||s.vertical,he=z.name==="globe",xe=si,fe=v/xe,_e=a.tilePixelRatio*V/xe,Te=(st=a.overscaling,a.zoom>18&&st>2&&(st>>=1),Math.max(Xt/(512*st),1)*W.get("symbol-spacing")),be=W.get("text-padding")*a.tilePixelRatio,Ze=W.get("icon-padding")*a.tilePixelRatio,We=De(W.get("text-max-angle")),nt=W.get("text-rotation-alignment")==="map"&&W.get("symbol-placement")!=="point",yt=W.get("icon-rotation-alignment")==="map"&&W.get("symbol-placement")!=="point",Ye=W.get("symbol-placement"),at=Te/2;var st;const pt=W.get("icon-text-fit");let xt;c&&pt!=="none"&&(a.allowVerticalPlacement&&s.vertical&&(xt=Ub(c,s.vertical,pt,W.get("icon-text-fit-padding"),K,fe)),re&&(c=Ub(c,re,pt,W.get("icon-text-fit-padding"),K,fe)));const tt=(At,$t,Mt)=>{if($t.x<0||$t.x>=Xt||$t.y<0||$t.y>=Xt)return;let ir=null;if(he){const{x:wt,y:Wt,z:or}=z.projectTilePoint($t.x,$t.y,Mt);ir={anchor:new Js(wt,Wt,or,0,void 0),up:z.upVector(Mt,$t.x,$t.y)}}(function(wt,Wt,or,Pr,ar,Qt,en,sr,lr,Vr,Zr,Xr,Gr,dn,bn,Rn,Wr,Wn,Bn,gn,Ir,Fn,Kr,Wi,jn){const li=wt.addToLineVertexArray(Wt,Pr);let Qn,qi,ei,qa,ih,pd,md,Lw=0,zw=0,Rw=0,Bw=0,h8=-1,f8=-1;const xs={};let Fw=s7("");const xc=or?or.anchor:Wt;let d8=0,p8=0;if(lr._unevaluatedLayout.getValue("text-radial-offset")===void 0?[d8,p8]=lr.layout.get("text-offset").evaluate(Ir,{},jn).map(So=>So*si):(d8=lr.layout.get("text-radial-offset").evaluate(Ir,{},jn)*si,p8=X7),wt.allowVerticalPlacement&&ar.vertical){const So=ar.vertical;if(bn)pd=Y7(So),sr&&(md=Y7(sr));else{const Eo=lr.layout.get("text-rotate").evaluate(Ir,{},jn)+90;ei=N3(Vr,xc,Wt,Zr,Xr,Gr,So,dn,Eo,Rn),sr&&(qa=N3(Vr,xc,Wt,Zr,Xr,Gr,sr,Wn,Eo))}}if(Qt){const So=lr.layout.get("icon-rotate").evaluate(Ir,{},jn),Eo=lr.layout.get("icon-text-fit")!=="none",gd=Yb(Qt,So,Kr,Eo),g8=sr?Yb(sr,So,Kr,Eo):void 0;qi=N3(Vr,xc,Wt,Zr,Xr,Gr,Qt,Wn,So),Lw=4*gd.length;const jw=wt.iconSizeData;let bc=null;jw.kind==="source"?(bc=[Va*lr.layout.get("icon-size").evaluate(Ir,{},jn)],bc[0]>Hl&&hr(`${wt.layerIds[0]}: Value for "icon-size" is >= ${ad}. Reduce your "icon-size".`)):jw.kind==="composite"&&(bc=[Va*Fn.compositeIconSizes[0].evaluate(Ir,{},jn),Va*Fn.compositeIconSizes[1].evaluate(Ir,{},jn)],(bc[0]>Hl||bc[1]>Hl)&&hr(`${wt.layerIds[0]}: Value for "icon-size" is >= ${ad}. Reduce your "icon-size".`)),wt.addSymbols(wt.icon,gd,bc,gn,Bn,Ir,!1,or,Wt,li.lineStartIndex,li.lineLength,-1,Wi,jn),h8=wt.icon.placedSymbolArray.length-1,g8&&(zw=4*g8.length,wt.addSymbols(wt.icon,g8,bc,gn,Bn,Ir,Vo.vertical,or,Wt,li.lineStartIndex,li.lineLength,-1,Wi,jn),f8=wt.icon.placedSymbolArray.length-1)}for(const So in ar.horizontal){const Eo=ar.horizontal[So];Qn||(Fw=s7(Eo.text),bn?ih=Y7(Eo):Qn=N3(Vr,xc,Wt,Zr,Xr,Gr,Eo,dn,lr.layout.get("text-rotate").evaluate(Ir,{},jn),Rn));const gd=Eo.positionedLines.length===1;if(Rw+=ew(wt,or,Wt,Eo,en,lr,bn,Ir,Rn,li,ar.vertical?Vo.horizontal:Vo.horizontalOnly,gd?Object.keys(ar.horizontal):[So],xs,h8,Fn,Wi,jn),gd)break}ar.vertical&&(Bw+=ew(wt,or,Wt,ar.vertical,en,lr,bn,Ir,Rn,li,Vo.vertical,["vertical"],xs,f8,Fn,Wi,jn));let Ql=-1;const m8=(So,Eo)=>So?Math.max(So,Eo):Eo;Ql=m8(ih,Ql),Ql=m8(pd,Ql),Ql=m8(md,Ql);const $B=Ql>-1?1:0;wt.glyphOffsetArray.length>=Xl.MAX_GLYPHS&&hr("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Ir.sortKey!==void 0&&wt.addToSortKeyRanges(wt.symbolInstances.length,Ir.sortKey),wt.symbolInstances.emplaceBack(xc.x,xc.y,xc.z,Wt.x,Wt.y,xs.right>=0?xs.right:-1,xs.center>=0?xs.center:-1,xs.left>=0?xs.left:-1,xs.vertical>=0?xs.vertical:-1,h8,f8,Fw,Qn!==void 0?Qn:wt.collisionBoxArray.length,Qn!==void 0?Qn+1:wt.collisionBoxArray.length,ei!==void 0?ei:wt.collisionBoxArray.length,ei!==void 0?ei+1:wt.collisionBoxArray.length,qi!==void 0?qi:wt.collisionBoxArray.length,qi!==void 0?qi+1:wt.collisionBoxArray.length,qa||wt.collisionBoxArray.length,qa?qa+1:wt.collisionBoxArray.length,Zr,Rw,Bw,Lw,zw,$B,0,d8,p8,Ql)})(a,$t,ir,At,s,c,d,xt,a.layers[0],a.collisionBoxArray,i.index,i.sourceLayerIndex,a.index,be,nt,E,0,Ze,yt,K,i,g,A,O,D)};if(Ye==="line")for(const At of Zb(i.geometry,0,0,Xt,Xt)){const $t=iB(At,Te,We,s.vertical||re,c,xe,_e,a.overscaling,Xt);for(const Mt of $t)re&&dB(a,re.text,at,Mt)||tt(At,Mt,D)}else if(Ye==="line-center"){for(const At of i.geometry)if(At.length>1){const $t=nB(At,We,s.vertical||re,c,xe,_e);$t&&tt(At,$t,D)}}else if(i.type==="Polygon")for(const At of B7(i.geometry,0)){const $t=lB(At,16);tt(At[0],new Js($t.x,$t.y,0,0,void 0),D)}else if(i.type==="LineString")for(const At of i.geometry)tt(At,new Js(At[0].x,At[0].y,0,0,void 0),D);else if(i.type==="Point")for(const At of i.geometry)for(const $t of At)tt([$t],new Js($t.x,$t.y,0,0,void 0),D)}const ad=255,Hl=ad*Va;function ew(a,i,s,c,d,g,v,w,E,A,O,D,z,V,W,K,re){const he=function(_e,Te,be,Ze,We,nt,yt,Ye){const at=[];if(Te.positionedLines.length===0)return at;const st=Ze.layout.get("text-rotate").evaluate(nt,{})*Math.PI/180,pt=function(Mt){const ir=Mt[0],wt=Mt[1],Wt=ir*wt;return Wt>0?[ir,-wt]:Wt<0?[-ir,wt]:ir===0?[wt,ir]:[wt,-ir]}(be);let xt=Math.abs(Te.top-Te.bottom);for(const Mt of Te.positionedLines)xt-=Mt.lineOffset;const tt=Te.positionedLines.length,At=xt/tt;let $t=Te.top-be[1];for(let Mt=0;Mt<tt;++Mt){const ir=Te.positionedLines[Mt];$t=oB(Te,At,$t,Mt);for(const wt of ir.positionedGlyphs){if(!wt.rect)continue;const Wt=wt.rect||{};let or=Lb+1,Pr=!0,ar=1,Qt=0;if(wt.imageName){const Kr=yt[wt.imageName];if(!Kr)continue;if(Kr.sdf){hr("SDF images are not supported in formatted text and will be ignored.");continue}Pr=!1,ar=Kr.pixelRatio,or=oo/ar}const en=(We||Ye)&&wt.vertical,sr=wt.metrics.advance*wt.scale/2,lr=wt.metrics,Vr=wt.rect;if(Vr===null)continue;Ye&&Te.verticalizable&&(Qt=wt.imageName?sr-wt.metrics.width*wt.scale/2:0);const Zr=We?[wt.x+sr,wt.y]:[0,0];let Xr=[0,0],Gr=[0,0],dn=!1;We||(en?(Gr=[wt.x+sr+pt[0],wt.y+pt[1]-Qt],dn=!0):Xr=[wt.x+sr+be[0],wt.y+be[1]-Qt]);const bn=Vr.w*wt.scale/(ar*(wt.localGlyph?Ga:1)),Rn=Vr.h*wt.scale/(ar*(wt.localGlyph?Ga:1));let Wr,Wn,Bn,gn;if(en){const Kr=wt.y-$t,Wi=new oe(-sr,sr-Kr),jn=-Math.PI/2,li=new oe(...Gr);Wr=new oe(-sr+Xr[0],Xr[1]),Wr._rotateAround(jn,Wi)._add(li),Wr.x+=-Kr+sr,Wr.y-=(lr.left-or)*wt.scale;const Qn=wt.imageName?lr.advance*wt.scale:si*wt.scale,qi=String.fromCharCode(wt.glyph);$R(qi)?Wr.x+=(1-or)*wt.scale:NR(qi)?Wr.x+=Qn-lr.height*wt.scale+(-or-1)*wt.scale:Wr.x+=wt.imageName||lr.width+2*or===Vr.w&&lr.height+2*or===Vr.h?(Qn-Rn)/2:(Qn-(lr.height+2*or)*wt.scale)/2,Wn=new oe(Wr.x,Wr.y-bn),Bn=new oe(Wr.x+Rn,Wr.y),gn=new oe(Wr.x+Rn,Wr.y-bn)}else{const Kr=(lr.left-or)*wt.scale-sr+Xr[0],Wi=(-lr.top-or)*wt.scale+Xr[1],jn=Kr+bn,li=Wi+Rn;Wr=new oe(Kr,Wi),Wn=new oe(jn,Wi),Bn=new oe(Kr,li),gn=new oe(jn,li)}if(st){let Kr;Kr=We?new oe(0,0):dn?new oe(pt[0],pt[1]):new oe(be[0],be[1]),Wr._rotateAround(st,Kr),Wn._rotateAround(st,Kr),Bn._rotateAround(st,Kr),gn._rotateAround(st,Kr)}const Ir=new oe(0,0),Fn=new oe(0,0);at.push({tl:Wr,tr:Wn,bl:Bn,br:gn,tex:Wt,writingMode:Te.writingMode,glyphOffset:Zr,sectionIndex:wt.sectionIndex,isSDF:Pr,pixelOffsetTL:Ir,pixelOffsetBR:Fn,minFontScaleX:0,minFontScaleY:0})}}return at}(0,c,E,g,v,w,d,a.allowVerticalPlacement),xe=a.textSizeData;let fe=null;xe.kind==="source"?(fe=[Va*g.layout.get("text-size").evaluate(w,{},re)],fe[0]>Hl&&hr(`${a.layerIds[0]}: Value for "text-size" is >= ${ad}. Reduce your "text-size".`)):xe.kind==="composite"&&(fe=[Va*W.compositeTextSizes[0].evaluate(w,{},re),Va*W.compositeTextSizes[1].evaluate(w,{},re)],(fe[0]>Hl||fe[1]>Hl)&&hr(`${a.layerIds[0]}: Value for "text-size" is >= ${ad}. Reduce your "text-size".`)),a.addSymbols(a.text,he,fe,E,v,w,O,i,s,A.lineStartIndex,A.lineLength,V,K,re);for(const _e of D)z[_e]=a.text.placedSymbolArray.length-1;return 4*he.length}function tw(a){for(const i in a)return a[i];return null}function N3(a,i,s,c,d,g,v,w,E,A){let O=v.top,D=v.bottom,z=v.left,V=v.right;const W=v.collisionPadding;if(W&&(z-=W[0],O-=W[1],V+=W[2],D+=W[3]),E){const K=new oe(z,O),re=new oe(V,O),he=new oe(z,D),xe=new oe(V,D),fe=De(E);let _e=new oe(0,0);A&&(_e=new oe(A[0],A[1])),K._rotateAround(fe,_e),re._rotateAround(fe,_e),he._rotateAround(fe,_e),xe._rotateAround(fe,_e),z=Math.min(K.x,re.x,he.x,xe.x),V=Math.max(K.x,re.x,he.x,xe.x),O=Math.min(K.y,re.y,he.y,xe.y),D=Math.max(K.y,re.y,he.y,xe.y)}return a.emplaceBack(i.x,i.y,i.z,s.x,s.y,z,O,V,D,w,c,d,g),a.length-1}function Y7(a){a.collisionPadding&&(a.top-=a.collisionPadding[1],a.bottom+=a.collisionPadding[3]);const i=a.bottom-a.top;return i>0?Math.max(10,i):null}function dB(a,i,s,c){const d=a.compareText;if(i in d){const g=d[i];for(let v=g.length-1;v>=0;v--)if(c.dist(g[v])<s)return!0}else d[i]=[];return d[i].push(c),!1}function rw(a,i){const s=a.fovAboveCenter,c=a.elevation?a.elevation.getMinElevationBelowMSL()*i:0,d=(a._camera.position[2]*a.worldSize-c)/Math.cos(a._pitch),g=Math.sin(s)*d/Math.sin(Math.max(Math.PI/2-a._pitch-s,.01)),v=Math.sin(a._pitch)*g+d;return Math.min(1.01*v,d*(1/a._horizonShift))}function _c(a,i){if(!i.isReprojectedInTileSpace)return{scale:1<<a.z,x:a.x,y:a.y,x2:a.x+1,y2:a.y+1,projection:i};const s=Math.pow(2,-a.z),c=a.x*s,d=(a.x+1)*s,g=a.y*s,v=(a.y+1)*s,w=Uo(c),E=Uo(d),A=vi(g),O=vi(v),D=i.project(w,A),z=i.project(E,A),V=i.project(E,O),W=i.project(w,O);let K=Math.min(D.x,z.x,V.x,W.x),re=Math.min(D.y,z.y,V.y,W.y),he=Math.max(D.x,z.x,V.x,W.x),xe=Math.max(D.y,z.y,V.y,W.y);const fe=s/16;function _e(be,Ze,We,nt,yt,Ye){const at=(We+yt)/2,st=(nt+Ye)/2,pt=i.project(Uo(at),vi(st)),xt=Math.max(0,K-pt.x,re-pt.y,pt.x-he,pt.y-xe);K=Math.min(K,pt.x),he=Math.max(he,pt.x),re=Math.min(re,pt.y),xe=Math.max(xe,pt.y),xt>fe&&(_e(be,pt,We,nt,at,st),_e(pt,Ze,at,st,yt,Ye))}_e(D,z,c,g,d,g),_e(z,V,d,g,d,v),_e(V,W,d,v,c,v),_e(W,D,c,v,c,g),K-=fe,re-=fe,he+=fe,xe+=fe;const Te=1/Math.max(he-K,xe-re);return{scale:Te,x:K*Te,y:re*Te,x2:he*Te,y2:xe*Te,projection:i}}const pB=$a(new Float32Array(16));class Zl{constructor(i){this.spec=i,this.name=i.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(i,s){return{x:0,y:0,z:0}}unproject(i,s){return new Ur(0,0)}projectTilePoint(i,s,c){return{x:i,y:s,z:0}}locationPoint(i,s,c=!0){return i._coordinatePoint(i.locationCoordinate(s),c)}pixelsPerMeter(i,s){return Ua(1,i)*s}pixelSpaceConversion(i,s,c){return 1}farthestPixelDistance(i){return rw(i,i.pixelsPerMeter)}pointCoordinate(i,s,c,d){const g=i.horizonLineFromTop(!1),v=new oe(s,Math.max(g,c));return i.rayIntersectionCoordinate(i.pointRayIntersection(v,d))}pointCoordinate3D(i,s,c){const d=new oe(s,c);if(i.elevation)return i.elevation.pointCoordinate(d);{const g=this.pointCoordinate(i,d.x,d.y,0);return[g.x,g.y,g.z]}}isPointAboveHorizon(i,s){if(i.elevation)return!this.pointCoordinate3D(i,s.x,s.y);const c=i.horizonLineFromTop();return s.y<c}createInversionMatrix(i,s){return pB}createTileMatrix(i,s,c){let d,g,v;const w=c.canonical,E=$a(new Float64Array(16));if(this.isReprojectedInTileSpace){const A=_c(w,this);d=1,g=A.x+c.wrap*A.scale,v=A.y,hc(E,E,[d/A.scale,d/A.scale,i.pixelsPerMeter/s])}else d=s/i.zoomScale(w.z),g=(w.x+Math.pow(2,w.z)*c.wrap)*d,v=w.y*d;return B0(E,E,[g,v,0]),hc(E,E,[d/Xt,d/Xt,1]),E}upVector(i,s,c){return[0,0,1]}upVectorScale(i,s,c){return{metersToTile:1}}}class mB extends Zl{constructor(i){super(i),this.range=[4,7],this.center=i.center||[-96,37.5];const[s,c]=this.parallels=i.parallels||[29.5,45.5],d=Math.sin(De(s));this.n=(d+Math.sin(De(c)))/2,this.c=1+d*(2*this.n-d),this.r0=Math.sqrt(this.c)/this.n}project(i,s){const{n:c,c:d,r0:g}=this,v=De(i-this.center[0]),w=De(s),E=Math.sqrt(d-2*c*Math.sin(w))/c;return{x:E*Math.sin(v*c),y:E*Math.cos(v*c)-g,z:0}}unproject(i,s){const{n:c,c:d,r0:g}=this,v=g+s;let w=Math.atan2(i,Math.abs(v))*Math.sign(v);v*c<0&&(w-=Math.PI*Math.sign(i)*Math.sign(v));const E=De(this.center[0])*c;w=rt(w,-Math.PI-E,Math.PI-E);const A=ge(Je(w/c)+this.center[0],-180,180),O=Math.asin(ge((d-(i*i+v*v)*c*c)/(2*c),-1,1)),D=ge(Je(O),-xi,xi);return new Ur(A,D)}}const sd=1.340264,ld=-.081106,ud=893e-6,cd=.003796,U3=Math.sqrt(3)/2;class gB extends Zl{project(i,s){s=s/180*Math.PI,i=i/180*Math.PI;const c=Math.asin(U3*Math.sin(s)),d=c*c,g=d*d*d;return{x:.5*(i*Math.cos(c)/(U3*(sd+3*ld*d+g*(7*ud+9*cd*d)))/Math.PI+.5),y:1-.5*(c*(sd+ld*d+g*(ud+cd*d))/Math.PI+1),z:0}}unproject(i,s){i=(2*i-.5)*Math.PI;let c=s=(2*(1-s)-1)*Math.PI,d=c*c,g=d*d*d;for(let O,D,z,V=0;V<12&&(D=c*(sd+ld*d+g*(ud+cd*d))-s,z=sd+3*ld*d+g*(7*ud+9*cd*d),O=D/z,c=ge(c-O,-Math.PI/3,Math.PI/3),d=c*c,g=d*d*d,!(Math.abs(O)<1e-12));++V);const v=U3*i*(sd+3*ld*d+g*(7*ud+9*cd*d))/Math.cos(c),w=Math.asin(Math.sin(c)/U3),E=ge(180*v/Math.PI,-180,180),A=ge(180*w/Math.PI,-xi,xi);return new Ur(E,A)}}class yB extends Zl{constructor(i){super(i),this.wrap=!0,this.supportsWorldCopies=!0}project(i,s){return{x:.5+i/360,y:.5-s/360,z:0}}unproject(i,s){const c=360*(i-.5),d=ge(360*(.5-s),-xi,xi);return new Ur(c,d)}}const rh=Math.PI/2;function V3(a){return Math.tan((rh+a)/2)}class _B extends Zl{constructor(i){super(i),this.center=i.center||[0,30];const[s,c]=this.parallels=i.parallels||[30,30];let d=De(s),g=De(c);this.southernCenter=d+g<0,this.southernCenter&&(d=-d,g=-g);const v=Math.cos(d),w=V3(d);this.n=d===g?Math.sin(d):Math.log(v/Math.cos(g))/Math.log(V3(g)/w),this.f=v*Math.pow(V3(d),this.n)/this.n}project(i,s){s=De(s),this.southernCenter&&(s=-s),i=De(i-this.center[0]);const c=1e-6,{n:d,f:g}=this;g>0?s<-rh+c&&(s=-rh+c):s>rh-c&&(s=rh-c);const v=g/Math.pow(V3(s),d);let w=v*Math.sin(d*i),E=g-v*Math.cos(d*i);return w=.5*(w/Math.PI+.5),E=.5*(E/Math.PI+.5),{x:w,y:this.southernCenter?E:1-E,z:0}}unproject(i,s){i=(2*i-.5)*Math.PI,this.southernCenter&&(s=1-s),s=(2*(1-s)-.5)*Math.PI;const{n:c,f:d}=this,g=d-s,v=Math.sign(g),w=Math.sign(c)*Math.sqrt(i*i+g*g);let E=Math.atan2(i,Math.abs(g))*v;g*c<0&&(E-=Math.PI*Math.sign(i)*v);const A=ge(Je(E/c)+this.center[0],-180,180),O=ge(Je(2*Math.atan(Math.pow(d/w,1/c))-rh),-xi,xi);return new Ur(A,this.southernCenter?-O:O)}}class nw extends Zl{constructor(i){super(i),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(i,s){return{x:ms(i),y:gs(s),z:0}}unproject(i,s){const c=Uo(i),d=vi(s);return new Ur(c,d)}}const iw=De(xi);class vB extends Zl{project(i,s){const c=(s=De(s))*s,d=c*c;return{x:.5*((i=De(i))*(.8707-.131979*c+d*(d*(.003971*c-.001529*d)-.013791))/Math.PI+.5),y:1-.5*(s*(1.007226+c*(.015085+d*(.028874*c-.044475-.005916*d)))/Math.PI+1),z:0}}unproject(i,s){i=(2*i-.5)*Math.PI;let c=s=(2*(1-s)-1)*Math.PI,d=25,g=0,v=c*c;do{v=c*c;const A=v*v;g=(c*(1.007226+v*(.015085+A*(.028874*v-.044475-.005916*A)))-s)/(1.007226+v*(.045255+A*(.259866*v-.311325-.005916*11*A))),c=ge(c-g,-iw,iw)}while(Math.abs(g)>1e-6&&--d>0);v=c*c;const w=ge(Je(i/(.8707+v*(v*(v*v*v*(.003971-.001529*v)-.013791)-.131979))),-180,180),E=Je(c);return new Ur(w,E)}}const ow=De(xi);class xB extends Zl{project(i,s){s=De(s),i=De(i);const c=Math.cos(s),d=2/Math.PI,g=Math.acos(c*Math.cos(i/2)),v=Math.sin(g)/g,w=.5*(i*d+2*c*Math.sin(i/2)/v)||0,E=.5*(s+Math.sin(s)/v)||0;return{x:.5*(w/Math.PI+.5),y:1-.5*(E/Math.PI+1),z:0}}unproject(i,s){let c=i=(2*i-.5)*Math.PI,d=s=(2*(1-s)-1)*Math.PI,g=25;const v=1e-6;let w=0,E=0;do{const A=Math.cos(d),O=Math.sin(d),D=2*O*A,z=O*O,V=A*A,W=Math.cos(c/2),K=Math.sin(c/2),re=2*W*K,he=K*K,xe=1-V*W*W,fe=xe?1/xe:0,_e=xe?Math.acos(A*W)*Math.sqrt(1/xe):0,Te=.5*(2*_e*A*K+2*c/Math.PI)-i,be=.5*(_e*O+d)-s,Ze=.5*fe*(V*he+_e*A*W*z)+1/Math.PI,We=fe*(re*D/4-_e*O*K),nt=.125*fe*(D*K-_e*O*V*re),yt=.5*fe*(z*W+_e*he*A)+.5,Ye=We*nt-yt*Ze;w=(be*We-Te*yt)/Ye,E=(Te*nt-be*Ze)/Ye,c=ge(c-w,-Math.PI,Math.PI),d=ge(d-E,-ow,ow)}while((Math.abs(w)>v||Math.abs(E)>v)&&--g>0);return new Ur(Je(c),Je(d))}}class aw extends Zl{constructor(i){super(i),this.center=i.center||[0,0],this.parallels=i.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(De(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(i,s){const{scale:c,cosPhi:d}=this;return{x:De(i)*d*c+.5,y:-Math.sin(De(s))/d*c+.5,z:0}}unproject(i,s){const{scale:c,cosPhi:d}=this,g=-(s-.5)/c,v=ge(Je((i-.5)/c)/d,-180,180),w=Math.asin(ge(g*d,-1,1)),E=ge(Je(w),-xi,xi);return new Ur(v,E)}}class bB extends nw{constructor(i){super(i),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(i,s,c){const d=W0(i,s,c);return An(d,d,q0(ps(c))),{x:d[0],y:d[1],z:d[2]}}locationPoint(i,s){const c=N1(s.lat,s.lng),d=Ui([],c),g=i.elevation?i.elevation.getAtPointOrZero(i.locationCoordinate(s),i._centerAltitude):i._centerAltitude;N0(c,c,d,Ua(1,0)*Xt*g);const v=$a(new Float64Array(16));return cc(v,i.pixelMatrix,i.globeMatrix),An(c,c,v),new oe(c[0],c[1])}pixelsPerMeter(i,s){return Ua(1,0)*s}pixelSpaceConversion(i,s,c){const d=Ua(1,i)*s,g=Sr(Ua(1,45)*s,d,c);return this.pixelsPerMeter(i,s)/g}createTileMatrix(i,s,c){const d=b7(ps(c.canonical));return cc(new Float64Array(16),i.globeMatrix,d)}createInversionMatrix(i,s){const{center:c}=i,d=q0(ps(s));return y3(d,d,De(c.lng)),h7(d,d,De(c.lat)),hc(d,d,[i._pixelsPerMercatorPixel,i._pixelsPerMercatorPixel,1]),Float32Array.from(d)}pointCoordinate(i,s,c,d){return Dx(i,s,c,!0)||new V1(0,0)}pointCoordinate3D(i,s,c){const d=this.pointCoordinate(i,s,c,0);return[d.x,d.y,d.z]}isPointAboveHorizon(i,s){return!Dx(i,s.x,s.y,!1)}farthestPixelDistance(i){const s=function(d,g){const v=d.cameraToCenterDistance,w=d._centerAltitude*g,E=d._camera,A=d._camera.forward(),O=Zs([],No([],A,-v),[0,0,w]),D=d.worldSize/(2*Math.PI),z=[0,0,-D],V=d.width/d.height,W=Math.tan(d.fovAboveCenter),K=No([],E.up(),W),re=No([],E.right(),W*V),he=Ui([],Zs([],Zs([],A,K),re)),xe=[];let fe;if(new m7(O,he).closestPointOnSphere(z,D,xe)){const _e=Zs([],xe,z),Te=Na([],_e,O);fe=Math.cos(d.fovAboveCenter)*F0(Te)}else{const _e=Na([],O,z),Te=Na([],z,O);Ui(Te,Te);const be=F0(_e)-D;fe=Math.sqrt(be*(be+2*D));const Ze=Math.acos(fe/(D+be))-Math.acos(ca(A,Te));fe*=Math.cos(Ze)}return 1.01*fe}(i,this.pixelsPerMeter(i.center.lat,i.worldSize)),c=U1(i.zoom);if(c>0){const d=rw(i,Ua(1,i.center.lat)*i.worldSize),g=i.worldSize/(2*Math.PI),v=Math.max(i.width,i.height)/i.worldSize*Math.PI;return Sr(s,d+g*(1-Math.cos(v)),Math.pow(c,10))}return s}upVector(i,s,c){return W0(s,c,i,1)}upVectorScale(i){return{metersToTile:_3(x3(ps(i)))}}}function sw(a){const i=a.parallels,s=!!i&&Math.abs(i[0]+i[1])<.01;switch(a.name){case"mercator":return new nw(a);case"equirectangular":return new yB(a);case"naturalEarth":return new vB(a);case"equalEarth":return new gB(a);case"winkelTripel":return new xB(a);case"albers":return s?new aw(a):new mB(a);case"lambertConformalConic":return s?new aw(a):new _B(a);case"globe":return new bB(a)}throw new Error(`Invalid projection name: ${a.name}`)}const wB=I3.types,TB=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function G3(a,i,s,c,d,g,v,w,E,A,O,D,z){const V=w?Math.min(Hl,Math.round(w[0])):0,W=w?Math.min(Hl,Math.round(w[1])):0;a.emplaceBack(i,s,Math.round(32*c),Math.round(32*d),g,v,(V<<1)+(E?1:0),W,16*A,16*O,256*D,256*z)}function W3(a,i,s,c,d,g,v){a.emplaceBack(i,s,c,d,g,v)}function q3(a,i,s,c,d){a.emplaceBack(i,s,c,d),a.emplaceBack(i,s,c,d),a.emplaceBack(i,s,c,d),a.emplaceBack(i,s,c,d)}function SB(a){for(const i of a.sections)if(a7(i.text))return!0;return!1}class J7{constructor(i){this.layoutVertexArray=new ut,this.indexArray=new Ut,this.programConfigurations=i,this.segments=new Ln,this.dynamicLayoutVertexArray=new mt,this.opacityVertexArray=new Gt,this.placedSymbolArray=new Dn,this.globeExtVertexArray=new vt}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(i,s,c,d){this.isEmpty()||(c&&(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,kR.members),this.indexBuffer=i.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=i.createVertexBuffer(this.dynamicLayoutVertexArray,LR.members,!0),this.opacityVertexBuffer=i.createVertexBuffer(this.opacityVertexArray,TB,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=i.createVertexBuffer(this.globeExtVertexArray,DR.members,!0)),this.opacityVertexBuffer.itemSize=1),(c||d)&&this.programConfigurations.upload(i))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}Rt(J7,"SymbolBuffers");class Q7{constructor(i,s,c){this.layoutVertexArray=new i,this.layoutAttributes=s,this.indexArray=new c,this.segments=new Ln,this.collisionVertexArray=new yr,this.collisionVertexArrayExt=new dr}upload(i){this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=i.createVertexBuffer(this.collisionVertexArray,zR.members,!0),this.collisionVertexBufferExt=i.createVertexBuffer(this.collisionVertexArrayExt,RR.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Rt(Q7,"CollisionBuffers");class Xl{constructor(i){this.collisionBoxArray=i.collisionBoxArray,this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(v=>v.id),this.index=i.index,this.pixelRatio=i.pixelRatio,this.sourceLayerIndex=i.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=$a([]),this.placementViewportMatrix=$a([]);const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=N7(this.zoom,s["text-size"]),this.iconSizeData=N7(this.zoom,s["icon-size"]);const c=this.layers[0].layout,d=c.get("symbol-sort-key"),g=c.get("symbol-z-order");this.canOverlap=c.get("text-allow-overlap")||c.get("icon-allow-overlap")||c.get("text-ignore-placement")||c.get("icon-ignore-placement"),this.sortFeaturesByKey=g!=="viewport-y"&&d.constantOr(1)!==void 0,this.sortFeaturesByY=(g==="viewport-y"||g==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=c.get("text-writing-mode").map(v=>Vo[v]),this.stateDependentLayerIds=this.layers.filter(v=>v.isStateDependent()).map(v=>v.id),this.sourceID=i.sourceID,this.projection=i.projection}createArrays(){this.text=new J7(new uc(this.layers,this.zoom,i=>/^text/.test(i))),this.icon=new J7(new uc(this.layers,this.zoom,i=>/^icon/.test(i))),this.glyphOffsetArray=new Ni,this.lineVertexArray=new R1,this.symbolInstances=new on}calculateGlyphDependencies(i,s,c,d,g){for(let v=0;v<i.length;v++)if(s[i.charCodeAt(v)]=!0,d&&g){const w=nd[i.charAt(v)];w&&(s[w.charCodeAt(0)]=!0)}}populate(i,s,c,d){const g=this.layers[0],v=g.layout,w=this.projection.name==="globe",E=v.get("text-font"),A=v.get("text-field"),O=v.get("icon-image"),D=(A.value.kind!=="constant"||A.value.value instanceof $i&&!A.value.value.isEmpty()||A.value.value.toString().length>0)&&(E.value.kind!=="constant"||E.value.value.length>0),z=O.value.kind!=="constant"||!!O.value.value||Object.keys(O.parameters).length>0,V=v.get("symbol-sort-key");if(this.features=[],!D&&!z)return;const W=s.iconDependencies,K=s.glyphDependencies,re=s.availableImages,he=new k(this.zoom);for(const{feature:xe,id:fe,index:_e,sourceLayerIndex:Te}of i){const be=g._featureFilter.needGeometry,Ze=mc(xe,be);if(!g._featureFilter.filter(he,Ze,c))continue;if(be||(Ze.geometry=Xs(xe,c,d)),w&&xe.type!==1&&c.z<=5){const Ye=Ze.geometry,at=.98078528056,st=(pt,xt)=>ca(W0(pt.x,pt.y,c,1),W0(xt.x,xt.y,c,1))<at;for(let pt=0;pt<Ye.length;pt++)Ye[pt]=Lz(Ye[pt],st)}let We,nt;if(D){const Ye=g.getValueAndResolveTokens("text-field",Ze,c,re),at=$i.factory(Ye);SB(at)&&(this.hasRTLText=!0),(!this.hasRTLText||T()==="unavailable"||this.hasRTLText&&I.isParsed())&&(We=jR(at,g,Ze))}if(z){const Ye=g.getValueAndResolveTokens("icon-image",Ze,c,re);nt=Ye instanceof _o?Ye:_o.fromString(Ye)}if(!We&&!nt)continue;const yt=this.sortFeaturesByKey?V.evaluate(Ze,{},c):void 0;if(this.features.push({id:fe,text:We,icon:nt,index:_e,sourceLayerIndex:Te,geometry:Ze.geometry,properties:xe.properties,type:wB[xe.type],sortKey:yt}),nt&&(W[nt.name]=!0),We){const Ye=E.evaluate(Ze,{},c).join(","),at=v.get("text-rotation-alignment")==="map"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Vo.vertical)>=0;for(const st of We.sections)if(st.image)W[st.image.name]=!0;else{const pt=I0(We.toString()),xt=st.fontStack||Ye,tt=K[xt]=K[xt]||{};this.calculateGlyphDependencies(st.text,tt,at,this.allowVerticalPlacement,pt)}}}v.get("symbol-placement")==="line"&&(this.features=function(xe){const fe={},_e={},Te=[];let be=0;function Ze(Ye){Te.push(xe[Ye]),be++}function We(Ye,at,st){const pt=_e[Ye];return delete _e[Ye],_e[at]=pt,Te[pt].geometry[0].pop(),Te[pt].geometry[0]=Te[pt].geometry[0].concat(st[0]),pt}function nt(Ye,at,st){const pt=fe[at];return delete fe[at],fe[Ye]=pt,Te[pt].geometry[0].shift(),Te[pt].geometry[0]=st[0].concat(Te[pt].geometry[0]),pt}function yt(Ye,at,st){const pt=st?at[0][at[0].length-1]:at[0][0];return`${Ye}:${pt.x}:${pt.y}`}for(let Ye=0;Ye<xe.length;Ye++){const at=xe[Ye],st=at.geometry,pt=at.text?at.text.toString():null;if(!pt){Ze(Ye);continue}const xt=yt(pt,st),tt=yt(pt,st,!0);if(xt in _e&&tt in fe&&_e[xt]!==fe[tt]){const At=nt(xt,tt,st),$t=We(xt,tt,Te[At].geometry);delete fe[xt],delete _e[tt],_e[yt(pt,Te[$t].geometry,!0)]=$t,Te[At].geometry=null}else xt in _e?We(xt,tt,st):tt in fe?nt(xt,tt,st):(Ze(Ye),fe[xt]=be-1,_e[tt]=be-1)}return Te.filter(Ye=>Ye.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((xe,fe)=>xe.sortKey-fe.sortKey)}update(i,s,c,d){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(i,s,this.layers,c,d),this.icon.programConfigurations.updatePaintArrays(i,s,this.layers,c,d))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(i){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(i),this.iconCollisionBox.upload(i)),this.text.upload(i,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(i,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=sw(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(i,s){const c=this.lineVertexArray.length;if(i.segment!==void 0)for(const{x:d,y:g}of s)this.lineVertexArray.emplaceBack(d,g);return{lineStartIndex:c,lineLength:this.lineVertexArray.length-c}}addSymbols(i,s,c,d,g,v,w,E,A,O,D,z,V,W){const K=i.indexArray,re=i.layoutVertexArray,he=i.globeExtVertexArray,xe=i.segments.prepareSegment(4*s.length,re,K,this.canOverlap?v.sortKey:void 0),fe=this.glyphOffsetArray.length,_e=xe.vertexLength,Te=this.allowVerticalPlacement&&w===Vo.vertical?Math.PI/2:0,be=v.text&&v.text.sections;for(let We=0;We<s.length;We++){const{tl:nt,tr:yt,bl:Ye,br:at,tex:st,pixelOffsetTL:pt,pixelOffsetBR:xt,minFontScaleX:tt,minFontScaleY:At,glyphOffset:$t,isSDF:Mt,sectionIndex:ir}=s[We],wt=xe.vertexLength,Wt=$t[1];if(G3(re,A.x,A.y,nt.x,Wt+nt.y,st.x,st.y,c,Mt,pt.x,pt.y,tt,At),G3(re,A.x,A.y,yt.x,Wt+yt.y,st.x+st.w,st.y,c,Mt,xt.x,pt.y,tt,At),G3(re,A.x,A.y,Ye.x,Wt+Ye.y,st.x,st.y+st.h,c,Mt,pt.x,xt.y,tt,At),G3(re,A.x,A.y,at.x,Wt+at.y,st.x+st.w,st.y+st.h,c,Mt,xt.x,xt.y,tt,At),E){const{x:or,y:Pr,z:ar}=E.anchor,[Qt,en,sr]=E.up;W3(he,or,Pr,ar,Qt,en,sr),W3(he,or,Pr,ar,Qt,en,sr),W3(he,or,Pr,ar,Qt,en,sr),W3(he,or,Pr,ar,Qt,en,sr),q3(i.dynamicLayoutVertexArray,or,Pr,ar,Te)}else q3(i.dynamicLayoutVertexArray,A.x,A.y,A.z,Te);K.emplaceBack(wt,wt+1,wt+2),K.emplaceBack(wt+1,wt+2,wt+3),xe.vertexLength+=4,xe.primitiveLength+=2,this.glyphOffsetArray.emplaceBack($t[0]),We!==s.length-1&&ir===s[We+1].sectionIndex||i.programConfigurations.populatePaintArrays(re.length,v,v.index,{},V,W,be&&be[ir])}const Ze=E?E.anchor:A;i.placedSymbolArray.emplaceBack(Ze.x,Ze.y,Ze.z,A.x,A.y,fe,this.glyphOffsetArray.length-fe,_e,O,D,A.segment,c?c[0]:0,c?c[1]:0,d[0],d[1],w,0,!1,0,z,0)}_commitLayoutVertex(i,s,c,d,g,v,w){i.emplaceBack(s,c,d,g,v,Math.round(w.x),Math.round(w.y))}_addCollisionDebugVertices(i,s,c,d,g,v,w){const E=c.segments.prepareSegment(4,c.layoutVertexArray,c.indexArray),A=E.vertexLength,O=w.tileAnchorX,D=w.tileAnchorY;for(let V=0;V<4;V++)c.collisionVertexArray.emplaceBack(0,0,0,0);c.collisionVertexArrayExt.emplaceBack(s,-i.padding,-i.padding),c.collisionVertexArrayExt.emplaceBack(s,i.padding,-i.padding),c.collisionVertexArrayExt.emplaceBack(s,i.padding,i.padding),c.collisionVertexArrayExt.emplaceBack(s,-i.padding,i.padding),this._commitLayoutVertex(c.layoutVertexArray,d,g,v,O,D,new oe(i.x1,i.y1)),this._commitLayoutVertex(c.layoutVertexArray,d,g,v,O,D,new oe(i.x2,i.y1)),this._commitLayoutVertex(c.layoutVertexArray,d,g,v,O,D,new oe(i.x2,i.y2)),this._commitLayoutVertex(c.layoutVertexArray,d,g,v,O,D,new oe(i.x1,i.y2)),E.vertexLength+=4;const z=c.indexArray;z.emplaceBack(A,A+1),z.emplaceBack(A+1,A+2),z.emplaceBack(A+2,A+3),z.emplaceBack(A+3,A),E.primitiveLength+=4}_addTextDebugCollisionBoxes(i,s,c,d,g,v){for(let w=d;w<g;w++){const E=c.get(w),A=this.getSymbolInstanceTextSize(i,v,s,w);this._addCollisionDebugVertices(E,A,this.textCollisionBox,E.projectedAnchorX,E.projectedAnchorY,E.projectedAnchorZ,v)}}_addIconDebugCollisionBoxes(i,s,c,d,g,v){for(let w=d;w<g;w++){const E=c.get(w),A=this.getSymbolInstanceIconSize(i,s,v.placedIconSymbolIndex);this._addCollisionDebugVertices(E,A,this.iconCollisionBox,E.projectedAnchorX,E.projectedAnchorY,E.projectedAnchorZ,v)}}generateCollisionDebugBuffers(i,s){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Q7(jt,Pb.members,Jn),this.iconCollisionBox=new Q7(jt,Pb.members,Jn);const c=Z1(this.iconSizeData,i),d=Z1(this.textSizeData,i);for(let g=0;g<this.symbolInstances.length;g++){const v=this.symbolInstances.get(g);this._addTextDebugCollisionBoxes(d,i,s,v.textBoxStartIndex,v.textBoxEndIndex,v),this._addTextDebugCollisionBoxes(d,i,s,v.verticalTextBoxStartIndex,v.verticalTextBoxEndIndex,v),this._addIconDebugCollisionBoxes(c,i,s,v.iconBoxStartIndex,v.iconBoxEndIndex,v),this._addIconDebugCollisionBoxes(c,i,s,v.verticalIconBoxStartIndex,v.verticalIconBoxEndIndex,v)}}getSymbolInstanceTextSize(i,s,c,d){const g=this.text.placedSymbolArray.get(s.rightJustifiedTextSymbolIndex>=0?s.rightJustifiedTextSymbolIndex:s.centerJustifiedTextSymbolIndex>=0?s.centerJustifiedTextSymbolIndex:s.leftJustifiedTextSymbolIndex>=0?s.leftJustifiedTextSymbolIndex:s.verticalPlacedTextSymbolIndex>=0?s.verticalPlacedTextSymbolIndex:d),v=L3(this.textSizeData,i,g)/si;return this.tilePixelRatio*v}getSymbolInstanceIconSize(i,s,c){const d=this.icon.placedSymbolArray.get(c),g=L3(this.iconSizeData,i,d);return this.tilePixelRatio*g}_commitDebugCollisionVertexUpdate(i,s,c){i.emplaceBack(s,-c,-c),i.emplaceBack(s,c,-c),i.emplaceBack(s,c,c),i.emplaceBack(s,-c,c)}_updateTextDebugCollisionBoxes(i,s,c,d,g,v){for(let w=d;w<g;w++){const E=c.get(w),A=this.getSymbolInstanceTextSize(i,v,s,w);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,A,E.padding)}}_updateIconDebugCollisionBoxes(i,s,c,d,g,v){for(let w=d;w<g;w++){const E=c.get(w),A=this.getSymbolInstanceIconSize(i,s,v);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,A,E.padding)}}updateCollisionDebugBuffers(i,s){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const c=Z1(this.iconSizeData,i),d=Z1(this.textSizeData,i);for(let g=0;g<this.symbolInstances.length;g++){const v=this.symbolInstances.get(g);this._updateTextDebugCollisionBoxes(d,i,s,v.textBoxStartIndex,v.textBoxEndIndex,v),this._updateTextDebugCollisionBoxes(d,i,s,v.verticalTextBoxStartIndex,v.verticalTextBoxEndIndex,v),this._updateIconDebugCollisionBoxes(c,i,s,v.iconBoxStartIndex,v.iconBoxEndIndex,v.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(c,i,s,v.verticalIconBoxStartIndex,v.verticalIconBoxEndIndex,v.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(i,s,c,d,g,v,w,E,A){const O={};if(s<c){const{x1:D,y1:z,x2:V,y2:W,padding:K,projectedAnchorX:re,projectedAnchorY:he,projectedAnchorZ:xe,tileAnchorX:fe,tileAnchorY:_e,featureIndex:Te}=i.get(s);O.textBox={x1:D,y1:z,x2:V,y2:W,padding:K,projectedAnchorX:re,projectedAnchorY:he,projectedAnchorZ:xe,tileAnchorX:fe,tileAnchorY:_e},O.textFeatureIndex=Te}if(d<g){const{x1:D,y1:z,x2:V,y2:W,padding:K,projectedAnchorX:re,projectedAnchorY:he,projectedAnchorZ:xe,tileAnchorX:fe,tileAnchorY:_e,featureIndex:Te}=i.get(d);O.verticalTextBox={x1:D,y1:z,x2:V,y2:W,padding:K,projectedAnchorX:re,projectedAnchorY:he,projectedAnchorZ:xe,tileAnchorX:fe,tileAnchorY:_e},O.verticalTextFeatureIndex=Te}if(v<w){const{x1:D,y1:z,x2:V,y2:W,padding:K,projectedAnchorX:re,projectedAnchorY:he,projectedAnchorZ:xe,tileAnchorX:fe,tileAnchorY:_e,featureIndex:Te}=i.get(v);O.iconBox={x1:D,y1:z,x2:V,y2:W,padding:K,projectedAnchorX:re,projectedAnchorY:he,projectedAnchorZ:xe,tileAnchorX:fe,tileAnchorY:_e},O.iconFeatureIndex=Te}if(E<A){const{x1:D,y1:z,x2:V,y2:W,padding:K,projectedAnchorX:re,projectedAnchorY:he,projectedAnchorZ:xe,tileAnchorX:fe,tileAnchorY:_e,featureIndex:Te}=i.get(E);O.verticalIconBox={x1:D,y1:z,x2:V,y2:W,padding:K,projectedAnchorX:re,projectedAnchorY:he,projectedAnchorZ:xe,tileAnchorX:fe,tileAnchorY:_e},O.verticalIconFeatureIndex=Te}return O}deserializeCollisionBoxes(i){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const c=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(i,c.textBoxStartIndex,c.textBoxEndIndex,c.verticalTextBoxStartIndex,c.verticalTextBoxEndIndex,c.iconBoxStartIndex,c.iconBoxEndIndex,c.verticalIconBoxStartIndex,c.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(i,s){const c=i.placedSymbolArray.get(s),d=c.vertexStartIndex+4*c.numGlyphs;for(let g=c.vertexStartIndex;g<d;g+=4)i.indexArray.emplaceBack(g,g+1,g+2),i.indexArray.emplaceBack(g+1,g+2,g+3)}getSortedSymbolIndexes(i){if(this.sortedAngle===i&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(i),c=Math.cos(i),d=[],g=[],v=[];for(let w=0;w<this.symbolInstances.length;++w){v.push(w);const E=this.symbolInstances.get(w);d.push(0|Math.round(s*E.tileAnchorX+c*E.tileAnchorY)),g.push(E.featureIndex)}return v.sort((w,E)=>d[w]-d[E]||g[E]-g[w]),v}addToSortKeyRanges(i,s){const c=this.sortKeyRanges[this.sortKeyRanges.length-1];c&&c.sortKey===s?c.symbolInstanceEnd=i+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:i,symbolInstanceEnd:i+1})}sortFeatures(i){if(this.sortFeaturesByY&&this.sortedAngle!==i&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(i),this.sortedAngle=i,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const c=this.symbolInstances.get(s);this.featureSortOrder.push(c.featureIndex);const{rightJustifiedTextSymbolIndex:d,centerJustifiedTextSymbolIndex:g,leftJustifiedTextSymbolIndex:v,verticalPlacedTextSymbolIndex:w,placedIconSymbolIndex:E,verticalPlacedIconSymbolIndex:A}=c;d>=0&&this.addIndicesForPlacedSymbol(this.text,d),g>=0&&g!==d&&this.addIndicesForPlacedSymbol(this.text,g),v>=0&&v!==g&&v!==d&&this.addIndicesForPlacedSymbol(this.text,v),w>=0&&this.addIndicesForPlacedSymbol(this.text,w),E>=0&&this.addIndicesForPlacedSymbol(this.icon,E),A>=0&&this.addIndicesForPlacedSymbol(this.icon,A)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Rt(Xl,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),Xl.MAX_GLYPHS=65535,Xl.addDynamicAttributes=q3;const EB=new pe({"symbol-placement":new Z(Qe.layout_symbol["symbol-placement"]),"symbol-spacing":new Z(Qe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Z(Qe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ne(Qe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Z(Qe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Z(Qe.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Z(Qe.layout_symbol["icon-ignore-placement"]),"icon-optional":new Z(Qe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Z(Qe.layout_symbol["icon-rotation-alignment"]),"icon-size":new ne(Qe.layout_symbol["icon-size"]),"icon-text-fit":new Z(Qe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Z(Qe.layout_symbol["icon-text-fit-padding"]),"icon-image":new ne(Qe.layout_symbol["icon-image"]),"icon-rotate":new ne(Qe.layout_symbol["icon-rotate"]),"icon-padding":new Z(Qe.layout_symbol["icon-padding"]),"icon-keep-upright":new Z(Qe.layout_symbol["icon-keep-upright"]),"icon-offset":new ne(Qe.layout_symbol["icon-offset"]),"icon-anchor":new ne(Qe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Z(Qe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Z(Qe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Z(Qe.layout_symbol["text-rotation-alignment"]),"text-field":new ne(Qe.layout_symbol["text-field"]),"text-font":new ne(Qe.layout_symbol["text-font"]),"text-size":new ne(Qe.layout_symbol["text-size"]),"text-max-width":new ne(Qe.layout_symbol["text-max-width"]),"text-line-height":new ne(Qe.layout_symbol["text-line-height"]),"text-letter-spacing":new ne(Qe.layout_symbol["text-letter-spacing"]),"text-justify":new ne(Qe.layout_symbol["text-justify"]),"text-radial-offset":new ne(Qe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Z(Qe.layout_symbol["text-variable-anchor"]),"text-anchor":new ne(Qe.layout_symbol["text-anchor"]),"text-max-angle":new Z(Qe.layout_symbol["text-max-angle"]),"text-writing-mode":new Z(Qe.layout_symbol["text-writing-mode"]),"text-rotate":new ne(Qe.layout_symbol["text-rotate"]),"text-padding":new Z(Qe.layout_symbol["text-padding"]),"text-keep-upright":new Z(Qe.layout_symbol["text-keep-upright"]),"text-transform":new ne(Qe.layout_symbol["text-transform"]),"text-offset":new ne(Qe.layout_symbol["text-offset"]),"text-allow-overlap":new Z(Qe.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Z(Qe.layout_symbol["text-ignore-placement"]),"text-optional":new Z(Qe.layout_symbol["text-optional"])});var e8={paint:new pe({"icon-opacity":new ne(Qe.paint_symbol["icon-opacity"]),"icon-color":new ne(Qe.paint_symbol["icon-color"]),"icon-halo-color":new ne(Qe.paint_symbol["icon-halo-color"]),"icon-halo-width":new ne(Qe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ne(Qe.paint_symbol["icon-halo-blur"]),"icon-translate":new Z(Qe.paint_symbol["icon-translate"]),"icon-translate-anchor":new Z(Qe.paint_symbol["icon-translate-anchor"]),"text-opacity":new ne(Qe.paint_symbol["text-opacity"]),"text-color":new ne(Qe.paint_symbol["text-color"],{runtimeType:no,getOverride:a=>a.textColor,hasOverride:a=>!!a.textColor}),"text-halo-color":new ne(Qe.paint_symbol["text-halo-color"]),"text-halo-width":new ne(Qe.paint_symbol["text-halo-width"]),"text-halo-blur":new ne(Qe.paint_symbol["text-halo-blur"]),"text-translate":new Z(Qe.paint_symbol["text-translate"]),"text-translate-anchor":new Z(Qe.paint_symbol["text-translate-anchor"])}),layout:EB};class lw{constructor(i){this.type=i.property.overrides?i.property.overrides.runtimeType:El,this.defaultValue=i}evaluate(i){if(i.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(i.formattedSection))return s.getOverride(i.formattedSection)}return i.feature&&i.featureState?this.defaultValue.evaluate(i.feature,i.featureState):this.defaultValue.property.specification.default}eachChild(i){this.defaultValue.isConstant()||i(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Rt(lw,"FormatSectionOverride",{omit:["defaultValue"]});class H3 extends ja{constructor(i){super(i,e8)}recalculate(i,s){super.recalculate(i,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const c=this.layout.get("text-writing-mode");if(c){const d=[];for(const g of c)d.indexOf(g)<0&&d.push(g);this.layout._values["text-writing-mode"]=d}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(i,s,c,d){const g=this.layout.get(i).evaluate(s,{},c,d),v=this._unevaluatedLayout._values[i];return v.isDataDriven()||Bl(v.value)||!g?g:function(w,E){return E.replace(/{([^{}]+)}/g,(A,O)=>O in w?String(w[O]):"")}(s.properties,g)}createBucket(i){return new Xl(i)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const i of e8.paint.overridableProperties){if(!H3.hasPaintOverride(this.layout,i))continue;const s=this.paint.get(i),c=new lw(s),d=new M1(c,s.property.specification);let g=null;g=s.value.kind==="constant"||s.value.kind==="source"?new v0("source",d):new ec("composite",d,s.value.zoomStops,s.value._interpolationType),this.paint._values[i]=new ae(s.property,g,s.parameters)}}_handleOverridablePaintPropertyUpdate(i,s,c){return!(!this.layout||s.isDataDriven()||c.isDataDriven())&&H3.hasPaintOverride(this.layout,i)}static hasPaintOverride(i,s){const c=i.get("text-field"),d=e8.paint.properties[s];let g=!1;const v=w=>{for(const E of w)if(d.overrides&&d.overrides.hasOverride(E))return void(g=!0)};if(c.value.kind==="constant"&&c.value.value instanceof $i)v(c.value.value.sections);else if(c.value.kind==="source"){const w=A=>{g||(A instanceof Bs&&xn(A.value)===Bu?v(A.value.sections):A instanceof cs?v(A.sections):A.eachChild(w))},E=c.value;E._styleExpression&&w(E._styleExpression.expression)}return g}getProgramConfiguration(i){return new Gl(this,i)}}var PB={paint:new pe({"background-color":new Z(Qe.paint_background["background-color"]),"background-pattern":new Z(Qe.paint_background["background-pattern"]),"background-opacity":new Z(Qe.paint_background["background-opacity"])})},AB={paint:new pe({"raster-opacity":new Z(Qe.paint_raster["raster-opacity"]),"raster-hue-rotate":new Z(Qe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Z(Qe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Z(Qe.paint_raster["raster-brightness-max"]),"raster-saturation":new Z(Qe.paint_raster["raster-saturation"]),"raster-contrast":new Z(Qe.paint_raster["raster-contrast"]),"raster-resampling":new Z(Qe.paint_raster["raster-resampling"]),"raster-fade-duration":new Z(Qe.paint_raster["raster-fade-duration"])})};class MB extends ja{constructor(i){super(i,{}),this.implementation=i}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isLayerDraped(){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(i){this.implementation.onAdd&&this.implementation.onAdd(i,i.painter.context.gl)}onRemove(i){this.implementation.onRemove&&this.implementation.onRemove(i,i.painter.context.gl)}}var CB={paint:new pe({"sky-type":new Z(Qe.paint_sky["sky-type"]),"sky-atmosphere-sun":new Z(Qe.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Z(Qe.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Z(Qe.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Z(Qe.paint_sky["sky-gradient-radius"]),"sky-gradient":new de(Qe.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Z(Qe.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Z(Qe.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Z(Qe.paint_sky["sky-opacity"])})};function t8(a,i,s){const c=[0,0,1],d=Ax([]);return Cx(d,d,s?-De(a)+Math.PI:De(a)),Mx(d,d,-De(i)),Tx(c,c,d),Ui(c,c)}const IB={circle:class extends ja{constructor(a){super(a,Nz)}createBucket(a){return new A7(a)}queryRadius(a){const i=a;return G1("circle-radius",this,i)+G1("circle-stroke-width",this,i)+T3(this.paint.get("circle-translate"))}queryIntersectsFeature(a,i,s,c,d,g,v,w){const E=Yx(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),g.angle,a.pixelToTileUnitsFactor),A=this.paint.get("circle-radius").evaluate(i,s)+this.paint.get("circle-stroke-width").evaluate(i,s);return Jx(a,c,g,v,w,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",E,A)}getProgramIds(){return["circle"]}getProgramConfiguration(a){return new Gl(this,a)}},heatmap:class extends ja{createBucket(a){return new eb(a)}constructor(a){super(a,Wz),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(a){a==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=O7({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(a){return G1("heatmap-radius",this,a)}queryIntersectsFeature(a,i,s,c,d,g,v,w){const E=this.paint.get("heatmap-radius").evaluate(i,s);return Jx(a,c,g,v,w,!0,!0,new oe(0,0),E)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(a){return new Gl(this,a)}},hillshade:class extends ja{constructor(a){super(a,qz)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends ja{constructor(a){super(a,lR)}getProgramIds(){const a=this.paint.get("fill-pattern"),i=a&&a.constantOr(1),s=[i?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&s.push(i&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),s}getProgramConfiguration(a){return new Gl(this,a)}recalculate(a,i){super.recalculate(a,i);const s=this.paint._values["fill-outline-color"];s.value.kind==="constant"&&s.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(a){return new M3(a)}queryRadius(){return T3(this.paint.get("fill-translate"))}queryIntersectsFeature(a,i,s,c,d,g){return!a.queryGeometry.isAboveHorizon&&qx(Kx(a.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),g.angle,a.pixelToTileUnitsFactor),c)}isTileClipped(){return!0}},"fill-extrusion":class extends ja{constructor(a){super(a,SR)}createBucket(a){return new ed(a)}queryRadius(){return T3(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(a){return new Gl(this,a)}queryIntersectsFeature(a,i,s,c,d,g,v,w,E){const A=Yx(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),g.angle,a.pixelToTileUnitsFactor),O=this.paint.get("fill-extrusion-height").evaluate(i,s),D=this.paint.get("fill-extrusion-base").evaluate(i,s),z=[0,0],V=w&&g.elevation,W=g.elevation?g.elevation.exaggeration():1,K=a.tile.getBucket(this);if(V&&K instanceof ed){const _e=K.centroidVertexArray,Te=E+1;Te<_e.length&&(z[0]=_e.geta_centroid_pos0(Te),z[1]=_e.geta_centroid_pos1(Te))}if(z[0]===0&&z[1]===1)return!1;g.projection.name==="globe"&&(c=_b([c],[new oe(0,0),new oe(Xt,Xt)],a.tileID.canonical).map(_e=>_e.polygon).flat());const re=V?w:null,[he,xe]=function(_e,Te,be,Ze,We,nt,yt,Ye,at,st,pt){return _e.projection.name==="globe"?function(xt,tt,At,$t,Mt,ir,wt,Wt,or,Pr,ar){const Qt=[],en=[],sr=xt.projection.upVectorScale(ar,xt.center.lat,xt.worldSize).metersToTile,lr=[0,0,0,1],Vr=[0,0,0,1],Zr=(Gr,dn,bn,Rn)=>{Gr[0]=dn,Gr[1]=bn,Gr[2]=Rn,Gr[3]=1},Xr=yb();At>0&&(At+=Xr),$t+=Xr;for(const Gr of tt){const dn=[],bn=[];for(const Rn of Gr){const Wr=Rn.x+Mt.x,Wn=Rn.y+Mt.y,Bn=xt.projection.projectTilePoint(Wr,Wn,ar),gn=xt.projection.upVector(ar,Rn.x,Rn.y);let Ir=At,Fn=$t;if(wt){const Kr=wb(Wr,Wn,At,$t,wt,Wt,or,Pr);Ir+=Kr.base,Fn+=Kr.top}At!==0?Zr(lr,Bn.x+gn[0]*sr*Ir,Bn.y+gn[1]*sr*Ir,Bn.z+gn[2]*sr*Ir):Zr(lr,Bn.x,Bn.y,Bn.z),Zr(Vr,Bn.x+gn[0]*sr*Fn,Bn.y+gn[1]*sr*Fn,Bn.z+gn[2]*sr*Fn),An(lr,lr,ir),An(Vr,Vr,ir),dn.push(new H1(lr[0],lr[1],lr[2])),bn.push(new H1(Vr[0],Vr[1],Vr[2]))}Qt.push(dn),en.push(bn)}return[Qt,en]}(_e,Te,be,Ze,We,nt,yt,Ye,at,st,pt):yt?function(xt,tt,At,$t,Mt,ir,wt,Wt,or){const Pr=[],ar=[],Qt=[0,0,0,1];for(const en of xt){const sr=[],lr=[];for(const Vr of en){const Zr=Vr.x+$t.x,Xr=Vr.y+$t.y,Gr=wb(Zr,Xr,tt,At,ir,wt,Wt,or);Qt[0]=Zr,Qt[1]=Xr,Qt[2]=Gr.base,Qt[3]=1,fc(Qt,Qt,Mt),Qt[3]=Math.max(Qt[3],1e-5);const dn=new H1(Qt[0]/Qt[3],Qt[1]/Qt[3],Qt[2]/Qt[3]);Qt[0]=Zr,Qt[1]=Xr,Qt[2]=Gr.top,Qt[3]=1,fc(Qt,Qt,Mt),Qt[3]=Math.max(Qt[3],1e-5);const bn=new H1(Qt[0]/Qt[3],Qt[1]/Qt[3],Qt[2]/Qt[3]);sr.push(dn),lr.push(bn)}Pr.push(sr),ar.push(lr)}return[Pr,ar]}(Te,be,Ze,We,nt,yt,Ye,at,st):function(xt,tt,At,$t,Mt){const ir=[],wt=[],Wt=Mt[8]*tt,or=Mt[9]*tt,Pr=Mt[10]*tt,ar=Mt[11]*tt,Qt=Mt[8]*At,en=Mt[9]*At,sr=Mt[10]*At,lr=Mt[11]*At;for(const Vr of xt){const Zr=[],Xr=[];for(const Gr of Vr){const dn=Gr.x+$t.x,bn=Gr.y+$t.y,Rn=Mt[0]*dn+Mt[4]*bn+Mt[12],Wr=Mt[1]*dn+Mt[5]*bn+Mt[13],Wn=Mt[2]*dn+Mt[6]*bn+Mt[14],Bn=Mt[3]*dn+Mt[7]*bn+Mt[15],gn=Rn+Wt,Ir=Wr+or,Fn=Wn+Pr,Kr=Math.max(Bn+ar,1e-5),Wi=Rn+Qt,jn=Wr+en,li=Wn+sr,Qn=Math.max(Bn+lr,1e-5);Zr.push(new H1(gn/Kr,Ir/Kr,Fn/Kr)),Xr.push(new H1(Wi/Qn,jn/Qn,li/Qn))}ir.push(Zr),wt.push(Xr)}return[ir,wt]}(Te,be,Ze,We,nt)}(g,c,D,O,A,v,re,z,W,g.center.lat,a.tileID.canonical),fe=a.queryGeometry;return function(_e,Te,be){let Ze=1/0;qx(be,Te)&&(Ze=bb(be,Te[0]));for(let We=0;We<Te.length;We++){const nt=Te[We],yt=_e[We];for(let Ye=0;Ye<nt.length-1;Ye++){const at=nt[Ye],st=[at,nt[Ye+1],yt[Ye+1],yt[Ye],at];Wx(be,st)&&(Ze=Math.min(Ze,bb(be,st)))}}return Ze!==1/0&&Ze}(he,xe,fe.isPointQuery()?fe.screenBounds:fe.screenGeometry)}},line:class extends ja{constructor(a){super(a,Tb),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(a){if(a==="line-gradient"){const i=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=i._styleExpression&&i._styleExpression.expression instanceof a0,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(a,i){super.recalculate(a,i),this.paint._values["line-floorwidth"]=Sb.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,a)}createBucket(a){return new D3(a)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(a){return new Gl(this,a)}queryRadius(a){const i=a,s=Eb(G1("line-width",this,i),G1("line-gap-width",this,i)),c=G1("line-offset",this,i);return s/2+Math.abs(c)+T3(this.paint.get("line-translate"))}queryIntersectsFeature(a,i,s,c,d,g){if(a.queryGeometry.isAboveHorizon)return!1;const v=Kx(a.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),g.angle,a.pixelToTileUnitsFactor),w=a.pixelToTileUnitsFactor/2*Eb(this.paint.get("line-width").evaluate(i,s),this.paint.get("line-gap-width").evaluate(i,s)),E=this.paint.get("line-offset").evaluate(i,s);return E&&(c=function(A,O){const D=[],z=new oe(0,0);for(let V=0;V<A.length;V++){const W=A[V],K=[];for(let re=0;re<W.length;re++){const he=W[re],xe=W[re+1],fe=re===0?z:he.sub(W[re-1])._unit()._perp(),_e=re===W.length-1?z:xe.sub(he)._unit()._perp(),Te=fe._add(_e)._unit();Te._mult(1/(Te.x*_e.x+Te.y*_e.y)),K.push(Te._mult(O)._add(he))}D.push(K)}return D}(c,E*a.pixelToTileUnitsFactor)),function(A,O,D){for(let z=0;z<O.length;z++){const V=O[z];if(A.length>=3){for(let W=0;W<V.length;W++)if(gc(A,V[W]))return!0}if(Bz(A,V,D))return!0}return!1}(v,c,w)}isTileClipped(){return!0}},symbol:H3,background:class extends ja{constructor(a){super(a,PB)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends ja{constructor(a){super(a,AB)}getProgramIds(){return["raster"]}},sky:class extends ja{constructor(a){super(a,CB),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(a){a==="sky-gradient"?this._updateColorRamp():a!=="sky-atmosphere-sun"&&a!=="sky-atmosphere-halo-color"&&a!=="sky-atmosphere-color"&&a!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=O7({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(a){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const i=a.style.light.properties.get("position");return this._lightPosition.azimuthal!==i.azimuthal||this._lightPosition.polar!==i.polar}return!1}getCenter(a,i){if(this.paint.get("sky-type")==="atmosphere"){const c=this.paint.get("sky-atmosphere-sun"),d=!c,g=a.style.light,v=g.properties.get("position");return d&&g.properties.get("anchor")==="viewport"&&hr("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),d?t8(v.azimuthal,90-v.polar,i):t8(c[0],90-c[1],i)}const s=this.paint.get("sky-gradient-center");return t8(s[0],90-s[1],i)}is3D(){return!1}isSky(){return!0}markSkyboxValid(a){this._skyboxInvalidated=!1,this._lightPosition=a.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const a=this.paint.get("sky-type");return a==="atmosphere"?["skyboxCapture","skybox"]:a==="gradient"?["skyboxGradient"]:null}}};class hd{constructor(i,s,c,d){this.context=i,this.format=c,this.texture=i.gl.createTexture(),this.update(s,d)}update(i,s,c){const{width:d,height:g}=i,{context:v}=this,{gl:w}=v,{HTMLImageElement:E,HTMLCanvasElement:A,HTMLVideoElement:O,ImageData:D,ImageBitmap:z}=_;if(w.bindTexture(w.TEXTURE_2D,this.texture),v.pixelStoreUnpackFlipY.set(!1),v.pixelStoreUnpack.set(1),v.pixelStoreUnpackPremultiplyAlpha.set(this.format===w.RGBA&&(!s||s.premultiply!==!1)),c||this.size&&this.size[0]===d&&this.size[1]===g){const{x:V,y:W}=c||{x:0,y:0};i instanceof E||i instanceof A||i instanceof O||i instanceof D||z&&i instanceof z?w.texSubImage2D(w.TEXTURE_2D,0,V,W,w.RGBA,w.UNSIGNED_BYTE,i):w.texSubImage2D(w.TEXTURE_2D,0,V,W,d,g,w.RGBA,w.UNSIGNED_BYTE,i.data)}else this.size=[d,g],i instanceof E||i instanceof A||i instanceof O||i instanceof D||z&&i instanceof z?w.texImage2D(w.TEXTURE_2D,0,this.format,this.format,w.UNSIGNED_BYTE,i):w.texImage2D(w.TEXTURE_2D,0,this.format,d,g,0,this.format,w.UNSIGNED_BYTE,i.data);this.useMipmap=!!(s&&s.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&w.generateMipmap(w.TEXTURE_2D)}bind(i,s){const{context:c}=this,{gl:d}=c;d.bindTexture(d.TEXTURE_2D,this.texture),i!==this.filter&&(d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,i),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,this.useMipmap?i===d.NEAREST?d.NEAREST_MIPMAP_NEAREST:d.LINEAR_MIPMAP_NEAREST:i),this.filter=i),s!==this.wrap&&(d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,s),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,s),this.wrap=s)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}class OB{constructor(i){this._callback=i,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class kB{constructor(){this.tasks={},this.taskQueue=[],zt(["process"],this),this.invoker=new OB(this.process),this.nextId=0}add(i,s){const c=this.nextId++,d=function({type:g,isSymbolTile:v,zoom:w}){return w=w||0,g==="message"?0:g!=="maybePrepare"||v?g!=="parseTile"||v?g==="parseTile"&&v?300-w:g==="maybePrepare"&&v?400-w:500:200-w:100-w}(s);if(d===0){Gn();try{i()}finally{}return{cancel:()=>{}}}return this.tasks[c]={fn:i,metadata:s,priority:d,id:c},this.taskQueue.push(c),this.invoker.trigger(),{cancel:()=>{delete this.tasks[c]}}}process(){Gn();try{if(this.taskQueue=this.taskQueue.filter(c=>!!this.tasks[c]),!this.taskQueue.length)return;const i=this.pick();if(i===null)return;const s=this.tasks[i];if(delete this.tasks[i],this.taskQueue.length&&this.invoker.trigger(),!s)return;s.fn()}finally{}}pick(){let i=null,s=1/0;for(let d=0;d<this.taskQueue.length;d++){const g=this.tasks[this.taskQueue[d]];g.priority<s&&(s=g.priority,i=d)}if(i===null)return null;const c=this.taskQueue[i];return this.taskQueue.splice(i,1),c}remove(){this.invoker.remove()}}class uw{constructor(i){this._stringToNumber={},this._numberToString=[];for(let s=0;s<i.length;s++){const c=i[s];this._stringToNumber[c]=s,this._numberToString[s]=c}}encode(i){return this._stringToNumber[i]}decode(i){return this._numberToString[i]}}const DB=["tile","layer","source","sourceLayer","state"];class cw{constructor(i,s,c,d,g){this.type="Feature",this._vectorTileFeature=i,this._z=s,this._x=c,this._y=d,this.properties=i.properties,this.id=g}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(i){this._geometry=i}toJSON(){const i={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};this.id!==void 0&&(i.id=this.id);for(const s of DB)this[s]!==void 0&&(i[s]=this[s]);return i}}const da=32,ys=33,Kl=new Uint16Array(8184);for(let a=0;a<2046;a++){let i=a+2,s=0,c=0,d=0,g=0,v=0,w=0;for(1&i?d=g=v=da:s=c=w=da;(i>>=1)>1;){const A=s+d>>1,O=c+g>>1;1&i?(d=s,g=c,s=v,c=w):(s=d,c=g,d=v,g=w),v=A,w=O}const E=4*a;Kl[E+0]=s,Kl[E+1]=c,Kl[E+2]=d,Kl[E+3]=g}const _s=new Uint16Array(2178),Yl=new Uint8Array(1089),Z3=new Uint16Array(1089);function hw(a){return a===0?-.03125:a===32?.03125:0}var fw=Be([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const dw={type:2,extent:Xt,loadGeometry:()=>[[new oe(0,0),new oe(Xt+1,0),new oe(Xt+1,Xt+1),new oe(0,Xt+1),new oe(0,0)]]};class r8{constructor(i,s,c,d,g){this.tileID=i,this.uid=fr(),this.uses=0,this.tileSize=s,this.tileZoom=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=g,this.expiredRequestCount=0,this.state="loading",d&&d.transform&&(this.projection=d.transform.projection)}registerFadeDuration(i){const s=i+this.timeAdded;s<Ci.now()||this.fadeEndTime&&s<this.fadeEndTime||(this.fadeEndTime=s)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=_c(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(i,s,c){if(this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(d,g){const v={};if(!g)return v;for(const w of d){const E=w.layerIds.map(A=>g.getLayer(A)).filter(Boolean);if(E.length!==0){w.layers=E,w.stateDependentLayerIds&&(w.stateDependentLayers=w.stateDependentLayerIds.map(A=>E.filter(O=>O.id===A)[0]));for(const A of E)v[A.id]=w}}return v}(i.buckets,s.style),this.hasSymbolBuckets=!1;for(const d in this.buckets){const g=this.buckets[d];if(g instanceof Xl){if(this.hasSymbolBuckets=!0,!c)break;g.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const d in this.buckets){const g=this.buckets[d];if(g instanceof Xl&&g.hasRTLText){this.hasRTLText=!0,I.isLoading()||I.isLoaded()||T()!=="deferred"||M();break}}this.queryPadding=0;for(const d in this.buckets){const g=this.buckets[d];this.queryPadding=Math.max(this.queryPadding,s.style.getLayer(d).queryRadius(g))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage),i.lineAtlas&&(this.lineAtlas=i.lineAtlas)}else this.collisionBoxArray=new Nr}unloadVectorData(){if(this.hasData()){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(i){return this.buckets[i.id]}upload(i){for(const c in this.buckets){const d=this.buckets[c];d.uploadPending()&&d.upload(i)}const s=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new hd(i,this.imageAtlas.image,s.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new hd(i,this.glyphAtlasImage,s.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new hd(i,this.lineAtlas.image,s.ALPHA),this.lineAtlas.uploaded=!0)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,s,c,d,g,v,w,E){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:d,pixelPosMatrix:w,transform:v,params:g,tileTransform:this.tileTransform},i,s,c):{}}querySourceFeatures(i,s){const c=this.latestFeatureIndex;if(!c||!c.rawTileData)return;const d=c.loadVTLayers(),g=s?s.sourceLayer:"",v=d._geojsonTileLayer||d[g];if(!v)return;const w=k1(s&&s.filter),{z:E,x:A,y:O}=this.tileID.canonical,D={z:E,x:A,y:O};for(let z=0;z<v.length;z++){const V=v.feature(z);if(w.needGeometry){const re=mc(V,!0);if(!w.filter(new k(this.tileID.overscaledZ),re,this.tileID.canonical))continue}else if(!w.filter(new k(this.tileID.overscaledZ),V))continue;const W=c.getId(V,g),K=new cw(V,E,A,O,W);K.tile=D,i.push(K)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const s=this.expirationTime;if(i.cacheControl){const c=vn(i.cacheControl);c["max-age"]&&(this.expirationTime=Date.now()+1e3*c["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const c=Date.now();let d=!1;if(this.expirationTime>c)d=!1;else if(s)if(this.expirationTime<s)d=!0;else{const g=this.expirationTime-s;g?this.expirationTime=c+Math.max(g,3e4):d=!0}else d=!0;d?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,s){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0||!s)return;const c=this.latestFeatureIndex.loadVTLayers(),d=s.style.listImages();for(const g in this.buckets){if(!s.style.hasLayer(g))continue;const v=this.buckets[g],w=v.layers[0].sourceLayer||"_geojsonTileLayer",E=c[w],A=i[w];if(!E||!A||Object.keys(A).length===0)continue;if(v.update(A,E,d,this.imageAtlas&&this.imageAtlas.patternPositions||{}),v instanceof D3||v instanceof M3){const D=s.style._getSourceCache(v.layers[0].source);s._terrain&&s._terrain.enabled&&D&&v.programConfigurations.needsUpload&&s._terrain._clearRenderCacheForTile(D.id,this.tileID)}const O=s&&s.style&&s.style.getLayer(g);O&&(this.queryPadding=Math.max(this.queryPadding,O.queryRadius(v)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Ci.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=Ci.now()+i}setTexture(i,s){const c=s.context,d=c.gl;this.texture=this.texture||s.getTileTexture(i.width),this.texture?this.texture.update(i,{useMipmap:!0}):(this.texture=new hd(c,i,d.RGBA,{useMipmap:!0}),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE))}setDependencies(i,s){const c={};for(const d of s)c[d]=!0;this.dependencies[i]=c}hasDependency(i,s){for(const c of i){const d=this.dependencies[c];if(d){for(const g of s)if(d[g])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(i,s){if(!s||s.name==="mercator"||this._tileDebugBuffer)return;const c=Xs(dw,this.tileID.canonical,this.tileTransform)[0],d=new gt,g=new bo;for(let v=0;v<c.length;v++){const{x:w,y:E}=c[v];d.emplaceBack(w,E),g.emplaceBack(v)}g.emplaceBack(0),this._tileDebugIndexBuffer=i.createIndexBuffer(g),this._tileDebugBuffer=i.createVertexBuffer(d,V0.members),this._tileDebugSegments=Ln.simpleSegment(0,0,d.length,g.length)}_makeTileBoundsBuffers(i,s){if(this._tileBoundsBuffer||!s||s.name==="mercator")return;const c=Xs(dw,this.tileID.canonical,this.tileTransform)[0];let d,g;if(this.isRaster){const v=function(w,E){const A=_c(w,E),O=Math.pow(2,w.z);for(let re=0;re<ys;re++)for(let he=0;he<ys;he++){const xe=Uo((w.x+(he+hw(he))/da)/O),fe=vi((w.y+(re+hw(re))/da)/O),_e=E.project(xe,fe),Te=re*ys+he;_s[2*Te+0]=Math.round((_e.x*A.scale-A.x)*Xt),_s[2*Te+1]=Math.round((_e.y*A.scale-A.y)*Xt)}Yl.fill(0),Z3.fill(0);for(let re=2045;re>=0;re--){const he=4*re,xe=Kl[he+0],fe=Kl[he+1],_e=Kl[he+2],Te=Kl[he+3],be=xe+_e>>1,Ze=fe+Te>>1,We=be+Ze-fe,nt=Ze+xe-be,yt=fe*ys+xe,Ye=Te*ys+_e,at=Ze*ys+be,st=Math.hypot((_s[2*yt+0]+_s[2*Ye+0])/2-_s[2*at+0],(_s[2*yt+1]+_s[2*Ye+1])/2-_s[2*at+1])>=16;Yl[at]=Yl[at]||(st?1:0),re<1022&&(Yl[at]=Yl[at]||Yl[(fe+nt>>1)*ys+(xe+We>>1)]||Yl[(Te+nt>>1)*ys+(_e+We>>1)])}const D=new ot,z=new Ut;let V=0;function W(re,he){const xe=he*ys+re;return Z3[xe]===0&&(D.emplaceBack(_s[2*xe+0],_s[2*xe+1],re*Xt/da,he*Xt/da),Z3[xe]=++V),Z3[xe]-1}function K(re,he,xe,fe,_e,Te){const be=re+xe>>1,Ze=he+fe>>1;if(Math.abs(re-_e)+Math.abs(he-Te)>1&&Yl[Ze*ys+be])K(_e,Te,re,he,be,Ze),K(xe,fe,_e,Te,be,Ze);else{const We=W(re,he),nt=W(xe,fe),yt=W(_e,Te);z.emplaceBack(We,nt,yt)}}return K(0,0,da,da,da,0),K(da,da,0,0,0,da),{vertices:D,indices:z}}(this.tileID.canonical,s);d=v.vertices,g=v.indices}else{d=new ot,g=new Ut;for(const{x:w,y:E}of c)d.emplaceBack(w,E,0,0);const v=R7(d.int16,void 0,4);for(let w=0;w<v.length;w+=3)g.emplaceBack(v[w],v[w+1],v[w+2])}this._tileBoundsBuffer=i.createVertexBuffer(d,fw.members),this._tileBoundsIndexBuffer=i.createIndexBuffer(g),this._tileBoundsSegments=Ln.simpleSegment(0,0,d.length,g.length)}_makeGlobeTileDebugBuffers(i,s){const c=s.projection;if(!c||c.name!=="globe"||s.freezeTileCoverage)return;const d=this.tileID.canonical,g=q0(Lx(d,s)),v=U1(s.zoom);let w;v>0&&(w=c7(new Float64Array(16),s.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(i,d,s,g,w,v),this._makeGlobeTileDebugTextBuffer(i,d,s,g,w,v)}_globePoint(i,s,c,d,g,v,w){let E=W0(i,s,c);if(v){const A=1<<c.z,O=ms(d.center.lng),D=gs(d.center.lat),z=(c.x+.5)/A-O;let V=0;z>.5?V=-1:z<-.5&&(V=1);let W=(i/Xt+c.x)/A+V,K=(s/Xt+c.y)/A;W=(W-O)*d._pixelsPerMercatorPixel+O,K=(K-D)*d._pixelsPerMercatorPixel+D;const re=[W*d.worldSize,K*d.worldSize,0];An(re,re,v),E=pc(E,re,w)}return An(E,E,g)}_makeGlobeTileDebugBorderBuffer(i,s,c,d,g,v){const w=new gt,E=new bo,A=new Ge,O=(z,V,W,K,re)=>{const he=(W-z)/(re-1),xe=(K-V)/(re-1),fe=w.length;for(let _e=0;_e<re;_e++){const Te=z+_e*he,be=V+_e*xe;w.emplaceBack(Te,be);const Ze=this._globePoint(Te,be,s,c,d,g,v);A.emplaceBack(Ze[0],Ze[1],Ze[2]),E.emplaceBack(fe+_e)}},D=Xt;O(0,0,D,0,16),O(D,0,D,D,16),O(D,D,0,D,16),O(0,D,0,0,16),this._tileDebugIndexBuffer=i.createIndexBuffer(E),this._tileDebugBuffer=i.createVertexBuffer(w,V0.members),this._globeTileDebugBorderBuffer=i.createVertexBuffer(A,Ox.members),this._tileDebugSegments=Ln.simpleSegment(0,0,w.length,E.length)}_makeGlobeTileDebugTextBuffer(i,s,c,d,g,v){const w=Xt/4,E=new gt,A=new Ut,O=new Ge,D=25;A.reserve(32),E.reserve(D),O.reserve(D);const z=(V,W)=>D*V+W;for(let V=0;V<D;V++){const W=V*w;for(let K=0;K<D;K++){const re=K*w;E.emplaceBack(re,W);const he=this._globePoint(re,W,s,c,d,g,v);O.emplaceBack(he[0],he[1],he[2])}}for(let V=0;V<4;V++)for(let W=0;W<4;W++){const K=z(V,W),re=z(V,W+1),he=z(V+1,W),xe=z(V+1,W+1);A.emplaceBack(K,re,he),A.emplaceBack(he,re,xe)}this._tileDebugTextIndexBuffer=i.createIndexBuffer(A),this._tileDebugTextBuffer=i.createVertexBuffer(E,V0.members),this._globeTileDebugTextBuffer=i.createVertexBuffer(O,Ox.members),this._tileDebugTextSegments=Ln.simpleSegment(0,0,D,32)}}class LB{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,s,c){const d=String(s);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][d]=this.stateChanges[i][d]||{},Tt(this.stateChanges[i][d],c),this.deletedStates[i]===null){this.deletedStates[i]={};for(const g in this.state[i])g!==d&&(this.deletedStates[i][g]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][d]===null){this.deletedStates[i][d]={};for(const g in this.state[i][d])c[g]||(this.deletedStates[i][d][g]=null)}else for(const g in c)this.deletedStates[i]&&this.deletedStates[i][d]&&this.deletedStates[i][d][g]===null&&delete this.deletedStates[i][d][g]}removeFeatureState(i,s,c){if(this.deletedStates[i]===null)return;const d=String(s);if(this.deletedStates[i]=this.deletedStates[i]||{},c&&s!==void 0)this.deletedStates[i][d]!==null&&(this.deletedStates[i][d]=this.deletedStates[i][d]||{},this.deletedStates[i][d][c]=null);else if(s!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][d])for(c in this.deletedStates[i][d]={},this.stateChanges[i][d])this.deletedStates[i][d][c]=null;else this.deletedStates[i][d]=null;else this.deletedStates[i]=null}getState(i,s){const c=String(s),d=Tt({},(this.state[i]||{})[c],(this.stateChanges[i]||{})[c]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const g=this.deletedStates[i][s];if(g===null)return{};for(const v in g)delete d[v]}return d}initializeTileState(i,s){i.setFeatureState(this.state,s)}coalesceChanges(i,s){const c={};for(const d in this.stateChanges){this.state[d]=this.state[d]||{};const g={};for(const v in this.stateChanges[d])this.state[d][v]||(this.state[d][v]={}),Tt(this.state[d][v],this.stateChanges[d][v]),g[v]=this.state[d][v];c[d]=g}for(const d in this.deletedStates){this.state[d]=this.state[d]||{};const g={};if(this.deletedStates[d]===null)for(const v in this.state[d])g[v]={},this.state[d][v]={};else for(const v in this.deletedStates[d]){if(this.deletedStates[d][v]===null)this.state[d][v]={};else if(this.state[d][v])for(const w of Object.keys(this.deletedStates[d][v]))delete this.state[d][v][w];g[v]=this.state[d][v]}c[d]=c[d]||{},Tt(c[d],g)}if(this.stateChanges={},this.deletedStates={},Object.keys(c).length!==0)for(const d in i)i[d].setFeatureState(c,s)}}class pw{constructor(i){this.size=i,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(i,s){const c=this.toIdx(i,s);return{min:this.minimums[c],max:this.maximums[c]}}isLeaf(i,s){return this.leaves[this.toIdx(i,s)]}toIdx(i,s){return s*this.size+i}}function mw(a,i,s,c){let d=0,g=Number.MAX_VALUE;for(let v=0;v<3;v++)if(Math.abs(c[v])<1e-15){if(s[v]<a[v]||s[v]>i[v])return null}else{const w=1/c[v];let E=(a[v]-s[v])*w,A=(i[v]-s[v])*w;if(E>A){const O=E;E=A,A=O}if(E>d&&(d=E),A<g&&(g=A),d>g)return null}return d}function gw(a,i,s,c,d,g,v,w,E,A,O){const D=c-a,z=d-i,V=g-s,W=v-a,K=w-i,re=E-s,he=O[1]*re-O[2]*K,xe=O[2]*W-O[0]*re,fe=O[0]*K-O[1]*W,_e=D*he+z*xe+V*fe;if(Math.abs(_e)<1e-15)return null;const Te=1/_e,be=A[0]-a,Ze=A[1]-i,We=A[2]-s,nt=(be*he+Ze*xe+We*fe)*Te;if(nt<0||nt>1)return null;const yt=Ze*V-We*z,Ye=We*D-be*V,at=be*z-Ze*D,st=(O[0]*yt+O[1]*Ye+O[2]*at)*Te;return st<0||nt+st>1?null:(W*yt+K*Ye+re*at)*Te}function yw(a,i,s){return(a-i)/(s-i)}function _w(a,i,s,c,d,g,v,w,E){const A=1<<s,O=g-c,D=v-d,z=(a+1)/A*O+c,V=(i+0)/A*D+d,W=(i+1)/A*D+d;w[0]=(a+0)/A*O+c,w[1]=V,E[0]=z,E[1]=W}class vw{constructor(i){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=i,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const s=function(g){const v=Math.ceil(Math.log2(g.dim/8)),w=[];let E=Math.ceil(Math.pow(2,v));const A=1/E,O=(V,W,K,re,he)=>{const xe=re?1:0,fe=(V+1)*K-xe,_e=W*K,Te=(W+1)*K-xe;he[0]=V*K,he[1]=_e,he[2]=fe,he[3]=Te};let D=new pw(E);const z=[];for(let V=0;V<E*E;V++){O(V%E,Math.floor(V/E),A,!1,z);const W=Jl(z[0],z[1],g),K=Jl(z[2],z[1],g),re=Jl(z[2],z[3],g),he=Jl(z[0],z[3],g);D.minimums.push(Math.min(W,K,re,he)),D.maximums.push(Math.max(W,K,re,he)),D.leaves.push(1)}for(w.push(D),E/=2;E>=1;E/=2){const V=w[w.length-1];D=new pw(E);for(let W=0;W<E*E;W++){O(W%E,Math.floor(W/E),2,!0,z);const K=V.getElevation(z[0],z[1]),re=V.getElevation(z[2],z[1]),he=V.getElevation(z[2],z[3]),xe=V.getElevation(z[0],z[3]),fe=V.isLeaf(z[0],z[1]),_e=V.isLeaf(z[2],z[1]),Te=V.isLeaf(z[2],z[3]),be=V.isLeaf(z[0],z[3]),Ze=Math.min(K.min,re.min,he.min,xe.min),We=Math.max(K.max,re.max,he.max,xe.max),nt=fe&&_e&&Te&&be;D.maximums.push(We),D.minimums.push(Ze),D.leaves.push(We-Ze<=5&&nt?1:0)}w.push(D)}return w}(this.dem),c=s.length-1,d=s[c];this._addNode(d.minimums[0],d.maximums[0],d.leaves[0]),this._construct(s,0,0,c,0)}raycastRoot(i,s,c,d,g,v,w=1){return mw([i,s,-100],[c,d,this.maximums[0]*w],g,v)}raycast(i,s,c,d,g,v,w=1){if(!this.nodeCount)return null;const E=this.raycastRoot(i,s,c,d,g,v,w);if(E==null)return null;const A=[],O=[],D=[],z=[],V=[{idx:0,t:E,nodex:0,nodey:0,depth:0}];for(;V.length>0;){const{idx:W,t:K,nodex:re,nodey:he,depth:xe}=V.pop();if(this.leaves[W]){_w(re,he,xe,i,s,c,d,D,z);const _e=1<<xe,Te=(re+0)/_e,be=(re+1)/_e,Ze=(he+0)/_e,We=(he+1)/_e,nt=Jl(Te,Ze,this.dem)*w,yt=Jl(be,Ze,this.dem)*w,Ye=Jl(be,We,this.dem)*w,at=Jl(Te,We,this.dem)*w,st=gw(D[0],D[1],nt,z[0],D[1],yt,z[0],z[1],Ye,g,v),pt=gw(z[0],z[1],Ye,D[0],z[1],at,D[0],D[1],nt,g,v),xt=Math.min(st!==null?st:Number.MAX_VALUE,pt!==null?pt:Number.MAX_VALUE);if(xt!==Number.MAX_VALUE)return xt;{const tt=N0([],g,v,K);if(xw(nt,yt,at,Ye,yw(tt[0],D[0],z[0]),yw(tt[1],D[1],z[1]))>=tt[2])return K}continue}let fe=0;for(let _e=0;_e<this._siblingOffset.length;_e++){_w((re<<1)+this._siblingOffset[_e][0],(he<<1)+this._siblingOffset[_e][1],xe+1,i,s,c,d,D,z),D[2]=-100,z[2]=this.maximums[this.childOffsets[W]+_e]*w;const Te=mw(D,z,g,v);if(Te!=null){const be=Te;A[_e]=be;let Ze=!1;for(let We=0;We<fe&&!Ze;We++)be>=A[O[We]]&&(O.splice(We,0,_e),Ze=!0);Ze||(O[fe]=_e),fe++}}for(let _e=0;_e<fe;_e++){const Te=O[_e];V.push({idx:this.childOffsets[W]+Te,t:A[Te],nodex:(re<<1)+this._siblingOffset[Te][0],nodey:(he<<1)+this._siblingOffset[Te][1],depth:xe+1})}}return null}_addNode(i,s,c){return this.minimums.push(i),this.maximums.push(s),this.leaves.push(c),this.childOffsets.push(0),this.nodeCount++}_construct(i,s,c,d,g){if(i[d].isLeaf(s,c)===1)return;this.childOffsets[g]||(this.childOffsets[g]=this.nodeCount);const v=d-1,w=i[v];let E=0,A=0;for(let O=0;O<this._siblingOffset.length;O++){const D=2*s+this._siblingOffset[O][0],z=2*c+this._siblingOffset[O][1],V=w.getElevation(D,z),W=w.isLeaf(D,z),K=this._addNode(V.min,V.max,W);W&&(E|=1<<O),A||(A=K)}for(let O=0;O<this._siblingOffset.length;O++)E&1<<O||this._construct(i,2*s+this._siblingOffset[O][0],2*c+this._siblingOffset[O][1],v,A+O)}}function xw(a,i,s,c,d,g){return Sr(Sr(a,s,g),Sr(i,c,g),d)}function Jl(a,i,s){const c=s.dim,d=ge(a*c-.5,0,c-1),g=ge(i*c-.5,0,c-1),v=Math.floor(d),w=Math.floor(g),E=Math.min(v+1,c-1),A=Math.min(w+1,c-1);return xw(s.get(v,w),s.get(E,w),s.get(v,A),s.get(E,A),d-v,g-w)}const bw={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function zB(a,i,s){return(256*a*256+256*i+s)/10-1e4}function RB(a,i,s){return 256*a+i+s/256-32768}class X3{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(i,s,c,d=!1,g=!1){if(this.uid=i,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(c&&c!=="mapbox"&&c!=="terrarium")return hr(`"${c}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=s.height;const v=this.dim=s.height-2,w=new Uint32Array(s.data.buffer);if(this.pixels=new Uint8Array(s.data.buffer),this.encoding=c||"mapbox",this.borderReady=d,!d){for(let E=0;E<v;E++)w[this._idx(-1,E)]=w[this._idx(0,E)],w[this._idx(v,E)]=w[this._idx(v-1,E)],w[this._idx(E,-1)]=w[this._idx(E,0)],w[this._idx(E,v)]=w[this._idx(E,v-1)];w[this._idx(-1,-1)]=w[this._idx(0,0)],w[this._idx(v,-1)]=w[this._idx(v-1,0)],w[this._idx(-1,v)]=w[this._idx(0,v-1)],w[this._idx(v,v)]=w[this._idx(v-1,v-1)],g&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new vw(this)}get(i,s,c=!1){c&&(i=ge(i,-1,this.dim),s=ge(s,-1,this.dim));const d=4*this._idx(i,s);return(this.encoding==="terrarium"?RB:zB)(this.pixels[d],this.pixels[d+1],this.pixels[d+2])}static getUnpackVector(i){return bw[i]}get unpackVector(){return bw[this.encoding]}_idx(i,s){if(i<-1||i>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(i+1)}static pack(i,s){const c=[0,0,0,0],d=X3.getUnpackVector(s);let g=Math.floor((i+d[3])/d[2]);return c[2]=g%256,g=Math.floor(g/256),c[1]=g%256,g=Math.floor(g/256),c[0]=g,c}getPixels(){return new To({width:this.stride,height:this.stride},this.pixels)}backfillBorder(i,s,c){if(this.dim!==i.dim)throw new Error("dem dimension mismatch");let d=s*this.dim,g=s*this.dim+this.dim,v=c*this.dim,w=c*this.dim+this.dim;switch(s){case-1:d=g-1;break;case 1:g=d+1}switch(c){case-1:v=w-1;break;case 1:w=v+1}const E=-s*this.dim,A=-c*this.dim;for(let O=v;O<w;O++)for(let D=d;D<g;D++){const z=4*this._idx(D,O),V=4*this._idx(D+E,O+A);this.pixels[z+0]=i.pixels[V+0],this.pixels[z+1]=i.pixels[V+1],this.pixels[z+2]=i.pixels[V+2],this.pixels[z+3]=i.pixels[V+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}Rt(X3,"DEMData"),Rt(vw,"DemMinMaxQuadTree",{omit:["dem"]});class BB{constructor(i,s){this.max=i,this.onRemove=s,this.reset()}reset(){for(const i in this.data)for(const s of this.data[i])s.timeout&&clearTimeout(s.timeout),this.onRemove(s.value);return this.data={},this.order=[],this}add(i,s,c){const d=i.wrapped().key;this.data[d]===void 0&&(this.data[d]=[]);const g={value:s,timeout:void 0};if(c!==void 0&&(g.timeout=setTimeout(()=>{this.remove(i,g)},c)),this.data[d].push(g),this.order.push(d),this.order.length>this.max){const v=this._getAndRemoveByKey(this.order[0]);v&&this.onRemove(v)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const s=this.data[i].shift();return s.timeout&&clearTimeout(s.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),s.value}getByKey(i){const s=this.data[i];return s?s[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,s){if(!this.has(i))return this;const c=i.wrapped().key,d=s===void 0?0:this.data[c].indexOf(s),g=this.data[c][d];return this.data[c].splice(d,1),g.timeout&&clearTimeout(g.timeout),this.data[c].length===0&&delete this.data[c],this.onRemove(g.value),this.order.splice(this.order.indexOf(c),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const s=this._getAndRemoveByKey(this.order[0]);s&&this.onRemove(s)}return this}filter(i){const s=[];for(const c in this.data)for(const d of this.data[c])i(d.value)||s.push(d);for(const c of s)this.remove(c.value.tileID,c)}}class nh{constructor(i,s,c){this.func=i,this.mask=s,this.range=c}}nh.ReadOnly=!1,nh.ReadWrite=!0,nh.disabled=new nh(519,nh.ReadOnly,[0,1]);const n8=7680;class i8{constructor(i,s,c,d,g,v){this.test=i,this.ref=s,this.mask=c,this.fail=d,this.depthFail=g,this.pass=v}}i8.disabled=new i8({func:519,mask:0},0,0,n8,n8,n8);class vs{constructor(i,s,c){this.blendFunction=i,this.blendColor=s,this.mask=c}}vs.Replace=[1,0],vs.disabled=new vs(vs.Replace,Pn.transparent,[!1,!1,!1,!1]),vs.unblended=new vs(vs.Replace,Pn.transparent,[!0,!0,!0,!0]),vs.alphaBlended=new vs([1,771],Pn.transparent,[!0,!0,!0,!0]);const o8=1029,a8=2305;class Wa{constructor(i,s,c){this.enable=i,this.mode=s,this.frontFace=c}}Wa.disabled=new Wa(!1,o8,a8),Wa.backCCW=new Wa(!0,o8,a8),Wa.backCW=new Wa(!0,o8,2304),Wa.frontCW=new Wa(!0,1028,2304),Wa.frontCCW=new Wa(!0,1028,a8);class vc extends Qr{constructor(i,s,c){super(),this.id=i,this._onlySymbols=c,s.on("data",d=>{d.dataType==="source"&&d.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&d.dataType==="source"&&d.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),s.on("error",()=>{this._sourceErrored=!0}),this._source=s,this._tiles={},this._cache=new BB(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=s.minTileCacheSize,this._maxTileCacheSize=s.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new LB,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(i){this.map=i,this._minTileCacheSize=this._minTileCacheSize===void 0&&i?i._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&i?i._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const i in this._tiles){const s=this._tiles[i];if(s.state!=="loaded"&&s.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(i,s){return i.isSymbolTile=this._onlySymbols,this._source.loadTile(i,s)}_unloadTile(i){if(this._source.unloadTile)return this._source.unloadTile(i,()=>{})}_abortTile(i){if(this._source.abortTile)return this._source.abortTile(i,()=>{})}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const s in this._tiles){const c=this._tiles[s];c.upload(i),c.prepare(this.map.style.imageManager)}}getIds(){return lt(this._tiles).map(i=>i.tileID).sort(ww).map(i=>i.key)}getRenderableIds(i){const s=[];for(const c in this._tiles)this._isIdRenderable(+c,i)&&s.push(this._tiles[c]);return i?s.sort((c,d)=>{const g=c.tileID,v=d.tileID,w=new oe(g.canonical.x,g.canonical.y)._rotate(this.transform.angle),E=new oe(v.canonical.x,v.canonical.y)._rotate(this.transform.angle);return g.overscaledZ-v.overscaledZ||E.y-w.y||E.x-w.x}).map(c=>c.tileID.key):s.map(c=>c.tileID).sort(ww).map(c=>c.key)}hasRenderableParent(i){const s=this.findLoadedParent(i,0);return!!s&&this._isIdRenderable(s.tileID.key)}_isIdRenderable(i,s){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(s||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(+i,"reloading")}}_reloadTile(i,s){const c=this._tiles[i];c&&(c.state!=="loading"&&(c.state=s),this._loadTile(c,this._tileLoaded.bind(this,c,i,s)))}_tileLoaded(i,s,c,d){if(d)if(i.state="errored",d.status!==404)this._source.fire(new vr(d,{tile:i}));else if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const g=this.map.painter.terrain;this.update(this.transform,g.getScaledDemTileSize(),!0),g.resetTileLookupCache(this.id)}else this.update(this.transform);else i.timeAdded=Ci.now(),c==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(s,i),this._source.type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),this._source.fire(new mo("data",{dataType:"source",tile:i,coord:i.tileID,sourceCacheId:this.id}))}_backfillDEM(i){const s=this.getRenderableIds();for(let d=0;d<s.length;d++){const g=s[d];if(i.neighboringTiles&&i.neighboringTiles[g]){const v=this.getTileByID(g);c(i,v),c(v,i)}}function c(d,g){if(!d.dem||d.dem.borderReady)return;d.needsHillshadePrepare=!0,d.needsDEMTextureUpload=!0;let v=g.tileID.canonical.x-d.tileID.canonical.x;const w=g.tileID.canonical.y-d.tileID.canonical.y,E=Math.pow(2,d.tileID.canonical.z),A=g.tileID.key;v===0&&w===0||Math.abs(w)>1||(Math.abs(v)>1&&(Math.abs(v+E)===1?v+=E:Math.abs(v-E)===1&&(v-=E)),g.dem&&d.dem&&(d.dem.backfillBorder(g.dem,v,w),d.neighboringTiles&&d.neighboringTiles[A]&&(d.neighboringTiles[A].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,s,c,d){for(const g in this._tiles){let v=this._tiles[g];if(d[g]||!v.hasData()||v.tileID.overscaledZ<=s||v.tileID.overscaledZ>c)continue;let w=v.tileID;for(;v&&v.tileID.overscaledZ>s+1;){const A=v.tileID.scaledTo(v.tileID.overscaledZ-1);v=this._tiles[A.key],v&&v.hasData()&&(w=A)}let E=w;for(;E.overscaledZ>s;)if(E=E.scaledTo(E.overscaledZ-1),i[E.key]){d[w.key]=w;break}}}findLoadedParent(i,s){if(i.key in this._loadedParentTiles){const c=this._loadedParentTiles[i.key];return c&&c.tileID.overscaledZ>=s?c:null}for(let c=i.overscaledZ-1;c>=s;c--){const d=i.scaledTo(c),g=this._getLoadedTile(d);if(g)return g}}_getLoadedTile(i){const s=this._tiles[i.key];return s&&s.hasData()?s:this._cache.getByKey(this._source.reparseOverscaled?i.wrapped().key:i.canonical.key)}updateCacheSize(i,s){s=s||this._source.tileSize;const c=Math.ceil(i.width/s)+1,d=Math.ceil(i.height/s)+1,g=Math.floor(c*d*5),v=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,g):g,w=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,v):v;this._cache.setMaxSize(w)}handleWrapJump(i){const s=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,s){const c={};for(const d in this._tiles){const g=this._tiles[d];g.tileID=g.tileID.unwrapTo(g.tileID.wrap+s),c[g.tileID.key]=g}this._tiles=c;for(const d in this._timers)clearTimeout(this._timers[d]),delete this._timers[d];for(const d in this._tiles)this._setTileReloadTimer(+d,this._tiles[d])}}update(i,s,c){if(this.transform=i,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!c)return;let d;this.updateCacheSize(i,s),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?d=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(w=>new Gi(w.canonical.z,w.wrap,w.canonical.z,w.canonical.x,w.canonical.y)):(d=i.coveringTiles({tileSize:s||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!c,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(d=d.filter(w=>this._source.hasTile(w)))):d=[];const g=this._updateRetainedTiles(d);if(Tw(this._source.type)&&d.length!==0){const w={},E={},A=Object.keys(g);for(const D of A){const z=g[D],V=this._tiles[D];if(!V||V.fadeEndTime&&V.fadeEndTime<=Ci.now())continue;const W=this.findLoadedParent(z,Math.max(z.overscaledZ-vc.maxOverzooming,this._source.minzoom));W&&(this._addTile(W.tileID),w[W.tileID.key]=W.tileID),E[D]=z}const O=d[d.length-1].overscaledZ;for(const D in this._tiles){const z=this._tiles[D];if(g[D]||!z.hasData())continue;let V=z.tileID;for(;V.overscaledZ>O;){V=V.scaledTo(V.overscaledZ-1);const W=this._tiles[V.key];if(W&&W.hasData()&&E[V.key]){g[D]=z.tileID;break}}}for(const D in w)g[D]||(this._coveredTiles[D]=!0,g[D]=w[D])}for(const w in g)this._tiles[w].clearFadeHold();const v=function(w,E){const A=[];for(const O in w)O in E||A.push(O);return A}(this._tiles,g);for(const w of v){const E=this._tiles[w];E.hasSymbolBuckets&&!E.holdingForFade()?E.setHoldDuration(this.map._fadeDuration):E.hasSymbolBuckets&&!E.symbolFadeFinished()||this._removeTile(+w)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(+i)}_updateRetainedTiles(i){const s={};if(i.length===0)return s;const c={},d=i.reduce((A,O)=>Math.min(A,O.overscaledZ),1/0),g=i[0].overscaledZ,v=Math.max(g-vc.maxOverzooming,this._source.minzoom),w=Math.max(g+vc.maxUnderzooming,this._source.minzoom),E={};for(const A of i){const O=this._addTile(A);s[A.key]=A,O.hasData()||d<this._source.maxzoom&&(E[A.key]=A)}this._retainLoadedChildren(E,d,w,s);for(const A of i){let O=this._tiles[A.key];if(O.hasData())continue;if(A.canonical.z>=this._source.maxzoom){const z=A.children(this._source.maxzoom)[0],V=this.getTile(z);if(V&&V.hasData()){s[z.key]=z;continue}}else{const z=A.children(this._source.maxzoom);if(s[z[0].key]&&s[z[1].key]&&s[z[2].key]&&s[z[3].key])continue}let D=O.wasRequested();for(let z=A.overscaledZ-1;z>=v;--z){const V=A.scaledTo(z);if(c[V.key]||(c[V.key]=!0,O=this.getTile(V),!O&&D&&(O=this._addTile(V)),O&&(s[V.key]=V,D=O.wasRequested(),O.hasData())))break}}return s}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const s=[];let c,d=this._tiles[i].tileID;for(;d.overscaledZ>0;){if(d.key in this._loadedParentTiles){c=this._loadedParentTiles[d.key];break}s.push(d.key);const g=d.scaledTo(d.overscaledZ-1);if(c=this._getLoadedTile(g),c)break;d=g}for(const g of s)this._loadedParentTiles[g]=c}}_addTile(i){let s=this._tiles[i.key];if(s)return s;s=this._cache.getAndRemove(i),s&&(this._setTileReloadTimer(i.key,s),s.tileID=i,this._state.initializeTileState(s,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,s)));const c=!!s;if(!c){const d=this.map?this.map.painter:null;s=new r8(i,this._source.tileSize*i.overscaleFactor(),this.transform.tileZoom,d,this._isRaster),this._loadTile(s,this._tileLoaded.bind(this,s,i.key,s.state))}return s?(s.uses++,this._tiles[i.key]=s,c||this._source.fire(new mo("dataloading",{tile:s,coord:s.tileID,dataType:"source"})),s):null}_setTileReloadTimer(i,s){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const c=s.getExpiryTimeout();c&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},c))}_removeTile(i){const s=this._tiles[i];s&&(s.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),s.uses>0||(s.hasData()&&s.state!=="reloading"?this._cache.add(s.tileID,s,s.getExpiryTimeout()):(s.aborted=!0,this._abortTile(s),this._unloadTile(s))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(+i);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(i,s,c){const d=[],g=this.transform;if(!g)return d;const v=g.projection.name==="globe",w=ms(g.center.lng);for(const E in this._tiles){const A=this._tiles[E];if(c&&A.clearQueryDebugViz(),A.holdingForFade())continue;let O;if(v){const D=A.tileID.canonical;if(D.z===0){const z=[Math.abs(ge(w,...fd(D,-1))-w),Math.abs(ge(w,...fd(D,1))-w)];O=[0,2*z.indexOf(Math.min(...z))-1]}else{const z=[Math.abs(ge(w,...fd(D,-1))-w),Math.abs(ge(w,...fd(D,0))-w),Math.abs(ge(w,...fd(D,1))-w)];O=[z.indexOf(Math.min(...z))-1]}}else O=[0];for(const D of O){const z=i.containsTile(A,g,s,D);z&&d.push(z)}}return d}getVisibleCoordinates(i){const s=this.getRenderableIds(i).map(c=>this._tiles[c].tileID);for(const c of s)c.projMatrix=this.transform.calculateProjMatrix(c.toUnwrapped());return s}hasTransition(){if(this._source.hasTransition())return!0;if(Tw(this._source.type))for(const i in this._tiles){const s=this._tiles[i];if(s.fadeEndTime!==void 0&&s.fadeEndTime>=Ci.now())return!0}return!1}setFeatureState(i,s,c){this._state.updateState(i=i||"_geojsonTileLayer",s,c)}removeFeatureState(i,s,c){this._state.removeFeatureState(i=i||"_geojsonTileLayer",s,c)}getFeatureState(i,s){return this._state.getState(i=i||"_geojsonTileLayer",s)}setDependencies(i,s,c){const d=this._tiles[i];d&&d.setDependencies(s,c)}reloadTilesForDependencies(i,s){for(const c in this._tiles)this._tiles[c].hasDependency(i,s)&&this._reloadTile(+c,"reloading");this._cache.filter(c=>!c.hasDependency(i,s))}_preloadTiles(i,s){if(!this._sourceLoaded){const w=()=>{this._sourceLoaded&&(this._source.off("data",w),this._preloadTiles(i,s))};return void this._source.on("data",w)}const c=new Map,d=Array.isArray(i)?i:[i],g=this.map.painter.terrain,v=this.usedForTerrain&&g?g.getScaledDemTileSize():this._source.tileSize;for(const w of d){const E=w.coveringTiles({tileSize:v,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const A of E)c.set(A.key,A);this.usedForTerrain&&w.updateElevation(!1)}ft(Array.from(c.values()),(w,E)=>{const A=new r8(w,this._source.tileSize*w.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(A,O=>{this._source.type==="raster-dem"&&A.dem&&this._backfillDEM(A),E(O,A)})},s)}}function ww(a,i){const s=Math.abs(2*a.wrap)-+(a.wrap<0),c=Math.abs(2*i.wrap)-+(i.wrap<0);return a.overscaledZ-i.overscaledZ||c-s||i.canonical.y-a.canonical.y||i.canonical.x-a.canonical.x}function Tw(a){return a==="raster"||a==="image"||a==="video"||a==="custom"}function fd(a,i){const s=1<<a.z;return[a.x/s+i,(a.x+1)/s+i]}vc.maxOverzooming=10,vc.maxUnderzooming=3;class K3{constructor(i,s,c){this._demTile=i,this._dem=this._demTile.dem,this._scale=s,this._offset=c}static create(i,s,c){const d=c||i.findDEMTileFor(s);if(!d||!d.dem)return;const g=d.dem,v=d.tileID,w=1<<s.canonical.z-v.canonical.z;return new K3(d,d.tileSize/Xt/w,[(s.canonical.x/w-v.canonical.x)*g.dim,(s.canonical.y/w-v.canonical.y)*g.dim])}tileCoordToPixel(i,s){const c=s*this._scale+this._offset[1],d=Math.floor(i*this._scale+this._offset[0]),g=Math.floor(c);return new oe(d,g)}getElevationAt(i,s,c,d){const g=i*this._scale+this._offset[0],v=s*this._scale+this._offset[1],w=Math.floor(g),E=Math.floor(v),A=this._dem;return d=!!d,c?Sr(Sr(A.get(w,E,d),A.get(w,E+1,d),v-E),Sr(A.get(w+1,E,d),A.get(w+1,E+1,d),v-E),g-w):A.get(w,E,d)}getElevationAtPixel(i,s,c){return this._dem.get(i,s,!!c)}getMeterToDEM(i){return(1<<this._demTile.tileID.canonical.z)*Ua(1,i)*this._dem.stride}}class Sw{constructor(i,s){this.tileID=i,this.x=i.canonical.x,this.y=i.canonical.y,this.z=i.canonical.z,this.grid=new Us(Xt,16,0),this.featureIndexArray=new sc,this.promoteId=s}insert(i,s,c,d,g,v=0){const w=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(c,d,g,v);const E=this.grid;for(let A=0;A<s.length;A++){const O=s[A],D=[1/0,1/0,-1/0,-1/0];for(let z=0;z<O.length;z++){const V=O[z];D[0]=Math.min(D[0],V.x),D[1]=Math.min(D[1],V.y),D[2]=Math.max(D[2],V.x),D[3]=Math.max(D[3],V.y)}D[0]<Xt&&D[1]<Xt&&D[2]>=0&&D[3]>=0&&E.insert(w,D[0],D[1],D[2],D[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new $7(new R3(this.rawTileData)).layers,this.sourceLayerCoder=new uw(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const i in this.vtLayers)this.vtFeatures[i]=[]}return this.vtLayers}query(i,s,c,d){this.loadVTLayers();const g=i.params||{},v=k1(g.filter),w=i.tileResult,E=i.transform,A=w.bufferedTilespaceBounds,O=this.grid.query(A.min.x,A.min.y,A.max.x,A.max.y,(W,K,re,he)=>Xx(w.bufferedTilespaceGeometry,W,K,re,he));O.sort(FB);let D=null;E.elevation&&O.length>0&&(D=K3.create(E.elevation,this.tileID));const z={};let V;for(let W=0;W<O.length;W++){const K=O[W];if(K===V)continue;V=K;const re=this.featureIndexArray.get(K);let he=null;this.loadMatchingFeature(z,re,v,g.layers,g.availableImages,s,c,d,(xe,fe,_e,Te=0)=>(he||(he=Xs(xe,this.tileID.canonical,i.tileTransform)),fe.queryIntersectsFeature(w,xe,_e,he,this.z,i.transform,i.pixelPosMatrix,D,Te)))}return z}loadMatchingFeature(i,s,c,d,g,v,w,E,A){const{featureIndex:O,bucketIndex:D,sourceLayerIndex:z,layoutVertexArrayOffset:V}=s,W=this.bucketLayerIDs[D];if(d&&!function(xe,fe){for(let _e=0;_e<xe.length;_e++)if(fe.indexOf(xe[_e])>=0)return!0;return!1}(d,W))return;const K=this.sourceLayerCoder.decode(z),re=this.vtLayers[K].feature(O);if(c.needGeometry){const xe=mc(re,!0);if(!c.filter(new k(this.tileID.overscaledZ),xe,this.tileID.canonical))return}else if(!c.filter(new k(this.tileID.overscaledZ),re))return;const he=this.getId(re,K);for(let xe=0;xe<W.length;xe++){const fe=W[xe];if(d&&d.indexOf(fe)<0)continue;const _e=v[fe];if(!_e)continue;let Te={};he!==void 0&&E&&(Te=E.getState(_e.sourceLayer||"_geojsonTileLayer",he));const be=Tt({},w[fe]);be.paint=Ew(be.paint,_e.paint,re,Te,g),be.layout=Ew(be.layout,_e.layout,re,Te,g);const Ze=!A||A(re,_e,Te,V);if(!Ze)continue;const We=new cw(re,this.z,this.x,this.y,he);We.layer=be;let nt=i[fe];nt===void 0&&(nt=i[fe]=[]),nt.push({featureIndex:O,feature:We,intersectionZ:Ze})}}lookupSymbolFeatures(i,s,c,d,g,v,w,E){const A={};this.loadVTLayers();const O=k1(g);for(const D of i)this.loadMatchingFeature(A,{bucketIndex:c,sourceLayerIndex:d,featureIndex:D,layoutVertexArrayOffset:0},O,v,w,E,s);return A}loadFeature(i){const{featureIndex:s,sourceLayerIndex:c}=i;this.loadVTLayers();const d=this.sourceLayerCoder.decode(c),g=this.vtFeatures[d];if(g[s])return g[s];const v=this.vtLayers[d].feature(s);return g[s]=v,v}hasLayer(i){for(const s of this.bucketLayerIDs)for(const c of s)if(i===c)return!0;return!1}getId(i,s){let c=i.id;if(this.promoteId){const d=typeof this.promoteId=="string"?this.promoteId:this.promoteId[s];d!=null&&(c=i.properties[d]),typeof c=="boolean"&&(c=Number(c))}return c}}function Ew(a,i,s,c,d){return Lt(a,(g,v)=>{const w=i instanceof ce?i.get(v):null;return w&&w.evaluate?w.evaluate(s,c,d):w})}function FB(a,i){return i-a}Rt(Sw,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class Pw{constructor(i,s){this.width=i,this.height=s,this.nextRow=0,this.image=new Ks({width:i,height:s}),this.positions={},this.uploaded=!1}getDash(i,s){const c=this.getKey(i,s);return this.positions[c]}trim(){const i=this.width,s=this.height=Mr(this.nextRow);this.image.resize({width:i,height:s})}getKey(i,s){return i.join(",")+s}getDashRanges(i,s,c){const d=[];let g=i.length%2==1?-i[i.length-1]*c:0,v=i[0]*c,w=!0;d.push({left:g,right:v,isDash:w,zeroLength:i[0]===0});let E=i[0];for(let A=1;A<i.length;A++){w=!w;const O=i[A];g=E*c,E+=O,v=E*c,d.push({left:g,right:v,isDash:w,zeroLength:O===0})}return d}addRoundDash(i,s,c){const d=s/2;for(let g=-c;g<=c;g++){const v=this.width*(this.nextRow+c+g);let w=0,E=i[w];for(let A=0;A<this.width;A++){A/E.right>1&&(E=i[++w]);const O=Math.abs(A-E.left),D=Math.abs(A-E.right),z=Math.min(O,D);let V;const W=g/c*(d+1);if(E.isDash){const K=d-Math.abs(W);V=Math.sqrt(z*z+K*K)}else V=d-Math.sqrt(z*z+W*W);this.image.data[v+A]=Math.max(0,Math.min(255,V+128))}}}addRegularDash(i,s){for(let E=i.length-1;E>=0;--E){const A=i[E],O=i[E+1];A.zeroLength?i.splice(E,1):O&&O.isDash===A.isDash&&(O.left=A.left,i.splice(E,1))}const c=i[0],d=i[i.length-1];c.isDash===d.isDash&&(c.left=d.left-this.width,d.right=c.right+this.width);const g=this.width*this.nextRow;let v=0,w=i[v];for(let E=0;E<this.width;E++){E/w.right>1&&(w=i[++v]);const A=Math.abs(E-w.left),O=Math.abs(E-w.right),D=Math.min(A,O);this.image.data[g+E]=Math.max(0,Math.min(255,(w.isDash?D:-D)+s+128))}}addDash(i,s){const c=this.getKey(i,s);if(this.positions[c])return this.positions[c];const d=s==="round",g=d?7:0,v=2*g+1;if(this.nextRow+v>this.height)return hr("LineAtlas out of space"),null;i.length===0&&i.push(1);let w=0;for(let O=0;O<i.length;O++)i[O]<0&&(hr("Negative value is found in line dasharray, replacing values with 0"),i[O]=0),w+=i[O];if(w!==0){const O=this.width/w,D=this.getDashRanges(i,this.width,O);d?this.addRoundDash(D,O,g):this.addRegularDash(D,s==="square"?.5*O:0)}const E=this.nextRow+g;this.nextRow+=v;const A={tl:[E,g],br:[w,0]};return this.positions[c]=A,A}}Rt(Pw,"LineAtlas");const Aw=1*Ga;class Mw{constructor(i){const s={},c=[];for(const w in i){const E=i[w],A=s[w]={};for(const O in E.glyphs){const D=E.glyphs[+O];if(!D||D.bitmap.width===0||D.bitmap.height===0)continue;const z=D.metrics.localGlyph?Aw:1,V={x:0,y:0,w:D.bitmap.width+2*z,h:D.bitmap.height+2*z};c.push(V),A[O]=V}}const{w:d,h:g}=G7(c),v=new Ks({width:d||1,height:g||1});for(const w in i){const E=i[w];for(const A in E.glyphs){const O=E.glyphs[+A];if(!O||O.bitmap.width===0||O.bitmap.height===0)continue;const D=s[w][A],z=O.metrics.localGlyph?Aw:1;Ks.copy(O.bitmap,v,{x:0,y:0},{x:D.x+z,y:D.y+z},O.bitmap)}}this.image=v,this.positions=s}}Rt(Mw,"GlyphAtlas");class jB{constructor(i){this.tileID=new Gi(i.tileID.overscaledZ,i.tileID.wrap,i.tileID.canonical.z,i.tileID.canonical.x,i.tileID.canonical.y),this.tileZoom=i.tileZoom,this.uid=i.uid,this.zoom=i.zoom,this.canonical=i.tileID.canonical,this.pixelRatio=i.pixelRatio,this.tileSize=i.tileSize,this.source=i.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=i.showCollisionBoxes,this.collectResourceTiming=!!i.collectResourceTiming,this.returnDependencies=!!i.returnDependencies,this.promoteId=i.promoteId,this.enableTerrain=!!i.enableTerrain,this.isSymbolTile=i.isSymbolTile,this.tileTransform=_c(i.tileID.canonical,i.projection),this.projection=i.projection}parse(i,s,c,d,g){this.status="parsing",this.data=i,this.collisionBoxArray=new Nr;const v=new uw(Object.keys(i.layers).sort()),w=new Sw(this.tileID,this.promoteId);w.bucketLayerIDs=[];const E={},A=new Pw(256,256),O={featureIndex:w,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:A,availableImages:c},D=s.familiesBySource[this.source];for(const Te in D){const be=i.layers[Te];if(!be)continue;let Ze=!1,We=!1;for(const Ye of D[Te])Ye[0].type==="symbol"?Ze=!0:We=!0;if(this.isSymbolTile===!0&&!Ze||this.isSymbolTile===!1&&!We)continue;be.version===1&&hr(`Vector tile source "${this.source}" layer "${Te}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const nt=v.encode(Te),yt=[];for(let Ye=0;Ye<be.length;Ye++){const at=be.feature(Ye),st=w.getId(at,Te);yt.push({feature:at,id:st,index:Ye,sourceLayerIndex:nt})}for(const Ye of D[Te]){const at=Ye[0];this.isSymbolTile!==void 0&&at.type==="symbol"!==this.isSymbolTile||at.minzoom&&this.zoom<Math.floor(at.minzoom)||at.maxzoom&&this.zoom>=at.maxzoom||at.visibility!=="none"&&(s8(Ye,this.zoom,c),(E[at.id]=at.createBucket({index:w.bucketLayerIDs.length,layers:Ye,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:nt,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:c})).populate(yt,O,this.tileID.canonical,this.tileTransform),w.bucketLayerIDs.push(Ye.map(st=>st.id)))}}let z,V,W,K;A.trim();const re={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},he=()=>{if(z)return g(z);if(V&&W&&K){const Te=new Mw(V),be=new zb(W,K);for(const Ze in E){const We=E[Ze];We instanceof Xl?(s8(We.layers,this.zoom,c),hB(We,V,Te.positions,W,be.iconPositions,this.showCollisionBoxes,c,this.tileID.canonical,this.tileZoom,this.projection)):We.hasPattern&&(We instanceof D3||We instanceof M3||We instanceof ed)&&(s8(We.layers,this.zoom,c),We.addFeatures(O,this.tileID.canonical,be.patternPositions,c,this.tileTransform))}this.status="done",g(null,{buckets:lt(E).filter(Ze=>!Ze.isEmpty()),featureIndex:w,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Te.image,lineAtlas:A,imageAtlas:be,glyphMap:this.returnDependencies?V:null,iconMap:this.returnDependencies?W:null,glyphPositions:this.returnDependencies?Te.positions:null})}},xe=Lt(O.glyphDependencies,Te=>Object.keys(Te).map(Number));Object.keys(xe).length?d.send("getGlyphs",{uid:this.uid,stacks:xe},(Te,be)=>{z||(z=Te,V=be,he())},void 0,!1,re):V={};const fe=Object.keys(O.iconDependencies);fe.length?d.send("getImages",{icons:fe,source:this.source,tileID:this.tileID,type:"icons"},(Te,be)=>{z||(z=Te,W=be,he())},void 0,!1,re):W={};const _e=Object.keys(O.patternDependencies);_e.length?d.send("getImages",{icons:_e,source:this.source,tileID:this.tileID,type:"patterns"},(Te,be)=>{z||(z=Te,K=be,he())},void 0,!1,re):K={},he()}}function s8(a,i,s){const c=new k(i);for(const d of a)d.recalculate(c,s)}class Cw{constructor(i){this.entries={},this.scheduler=i}request(i,s,c,d){const g=this.entries[i]=this.entries[i]||{callbacks:[]};if(g.result){const[v,w]=g.result;return this.scheduler?this.scheduler.add(()=>{d(v,w)},s):d(v,w),()=>{}}return g.callbacks.push(d),g.cancel||(g.cancel=c((v,w)=>{g.result=[v,w];for(const E of g.callbacks)this.scheduler?this.scheduler.add(()=>{E(v,w)},s):E(v,w);setTimeout(()=>delete this.entries[i],3e3)})),()=>{g.result||(g.callbacks=g.callbacks.filter(v=>v!==d),g.callbacks.length||(g.cancel(),delete this.entries[i]))}}}function Iw(a,i,s){const c=JSON.stringify(a.request);return a.data&&(this.deduped.entries[c]={result:[null,a.data]}),this.deduped.request(c,{type:"parseTile",isSymbolTile:a.isSymbolTile,zoom:a.tileZoom},d=>{const g=ls(a.request,(v,w,E,A)=>{v?d(v):w&&d(null,{vectorTile:s?void 0:new $7(new R3(w)),rawData:w,cacheControl:E,expires:A})});return()=>{g.cancel(),d()}},i)}const Ow=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class l8{static from(i){if(!(i instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[s,c]=new Uint8Array(i,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");const d=c>>4;if(d!==1)throw new Error(`Got v${d} data when expected v1.`);const g=Ow[15&c];if(!g)throw new Error("Unrecognized array type.");const[v]=new Uint16Array(i,2,1),[w]=new Uint32Array(i,4,1);return new l8(w,v,g,i)}constructor(i,s=64,c=Float64Array,d){if(isNaN(i)||i<0)throw new Error(`Unpexpected numItems value: ${i}.`);this.numItems=+i,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=c,this.IndexArrayType=i<65536?Uint16Array:Uint32Array;const g=Ow.indexOf(this.ArrayType),v=2*i*this.ArrayType.BYTES_PER_ELEMENT,w=i*this.IndexArrayType.BYTES_PER_ELEMENT,E=(8-w%8)%8;if(g<0)throw new Error(`Unexpected typed array class: ${c}.`);d&&d instanceof ArrayBuffer?(this.data=d,this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+w+E,2*i),this._pos=2*i,this._finished=!0):(this.data=new ArrayBuffer(8+v+w+E),this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+w+E,2*i),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+g]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=i)}add(i,s){const c=this._pos>>1;return this.ids[c]=c,this.coords[this._pos++]=i,this.coords[this._pos++]=s,c}finish(){const i=this._pos>>1;if(i!==this.numItems)throw new Error(`Added ${i} items when expected ${this.numItems}.`);return u8(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(i,s,c,d){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:v,nodeSize:w}=this,E=[0,g.length-1,0],A=[];for(;E.length;){const O=E.pop()||0,D=E.pop()||0,z=E.pop()||0;if(D-z<=w){for(let re=z;re<=D;re++){const he=v[2*re],xe=v[2*re+1];he>=i&&he<=c&&xe>=s&&xe<=d&&A.push(g[re])}continue}const V=z+D>>1,W=v[2*V],K=v[2*V+1];W>=i&&W<=c&&K>=s&&K<=d&&A.push(g[V]),(O===0?i<=W:s<=K)&&(E.push(z),E.push(V-1),E.push(1-O)),(O===0?c>=W:d>=K)&&(E.push(V+1),E.push(D),E.push(1-O))}return A}within(i,s,c){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:d,coords:g,nodeSize:v}=this,w=[0,d.length-1,0],E=[],A=c*c;for(;w.length;){const O=w.pop()||0,D=w.pop()||0,z=w.pop()||0;if(D-z<=v){for(let re=z;re<=D;re++)Dw(g[2*re],g[2*re+1],i,s)<=A&&E.push(d[re]);continue}const V=z+D>>1,W=g[2*V],K=g[2*V+1];Dw(W,K,i,s)<=A&&E.push(d[V]),(O===0?i-c<=W:s-c<=K)&&(w.push(z),w.push(V-1),w.push(1-O)),(O===0?i+c>=W:s+c>=K)&&(w.push(V+1),w.push(D),w.push(1-O))}return E}}function u8(a,i,s,c,d,g){if(d-c<=s)return;const v=c+d>>1;kw(a,i,v,c,d,g),u8(a,i,s,c,v-1,1-g),u8(a,i,s,v+1,d,1-g)}function kw(a,i,s,c,d,g){for(;d>c;){if(d-c>600){const A=d-c+1,O=s-c+1,D=Math.log(A),z=.5*Math.exp(2*D/3),V=.5*Math.sqrt(D*z*(A-z)/A)*(O-A/2<0?-1:1);kw(a,i,s,Math.max(c,Math.floor(s-O*z/A+V)),Math.min(d,Math.floor(s+(A-O)*z/A+V)),g)}const v=i[2*s+g];let w=c,E=d;for(dd(a,i,c,s),i[2*d+g]>v&&dd(a,i,c,d);w<E;){for(dd(a,i,w,E),w++,E--;i[2*w+g]<v;)w++;for(;i[2*E+g]>v;)E--}i[2*c+g]===v?dd(a,i,c,E):(E++,dd(a,i,E,d)),E<=s&&(c=E+1),s<=E&&(d=E-1)}}function dd(a,i,s,c){c8(a,s,c),c8(i,2*s,2*c),c8(i,2*s+1,2*c+1)}function c8(a,i,s){const c=a[i];a[i]=a[s],a[s]=c}function Dw(a,i,s,c){const d=a-s,g=i-c;return d*d+g*g}o.ARRAY_TYPE=wo,o.AUTH_ERR_MSG=Se,o.Aabb=Vi,o.Actor=class{constructor(a,i,s){this.target=a,this.parent=i,this.mapId=s,this.callbacks={},this.cancelCallbacks={},zt(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=Gn()?a:_,this.scheduler=new kB}send(a,i,s,c,d=!1,g){const v=Math.round(1e18*Math.random()).toString(36).substring(0,10);s&&(s.metadata=g,this.callbacks[v]=s);const w=pi(this.globalScope)?void 0:[];return this.target.postMessage({id:v,type:a,hasCallback:!!s,targetMapId:c,mustQueue:d,sourceMapId:this.mapId,data:Nl(i,w)},w),{cancel:()=>{s&&delete this.callbacks[v],this.target.postMessage({id:v,type:"<cancel>",targetMapId:c,sourceMapId:this.mapId})}}}receive(a){const i=a.data,s=i.id;if(s&&(!i.targetMapId||this.mapId===i.targetMapId))if(i.type==="<cancel>"){const c=this.cancelCallbacks[s];delete this.cancelCallbacks[s],c&&c.cancel()}else if(i.mustQueue||Gn()){const c=this.callbacks[s];this.cancelCallbacks[s]=this.scheduler.add(()=>this.processTask(s,i),c&&c.metadata||{type:"message"})}else this.processTask(s,i)}processTask(a,i){if(i.type==="<response>"){const s=this.callbacks[a];delete this.callbacks[a],s&&(i.error?s(Vs(i.error)):s(null,Vs(i.data)))}else{const s=pi(this.globalScope)?void 0:[],c=i.hasCallback?(g,v)=>{delete this.cancelCallbacks[a],this.target.postMessage({id:a,type:"<response>",sourceMapId:this.mapId,error:g?Nl(g):null,data:Nl(v,s)},s)}:g=>{},d=Vs(i.data);if(this.parent[i.type])this.parent[i.type](i.sourceMapId,d,c);else if(this.parent.getWorkerSource){const g=i.type.split(".");this.parent.getWorkerSource(i.sourceMapId,g[0],d.source)[g[1]](d,c)}else c(new Error(`Could not find function ${i.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},o.CanonicalTileID=k3,o.Color=Pn,o.ColorMode=vs,o.CullFaceMode=Wa,o.DEMData=X3,o.DataConstantProperty=Z,o.DedupedRequest=Cw,o.DepthMode=nh,o.EXTENT=Xt,o.Elevation=class{isDataAvailableAtPoint(a){const i=this._source();if(this.isUsingMockSource()||!i||a.y<0||a.y>1)return!1;const s=i.getSource().maxzoom,c=1<<s,d=Math.floor(a.x),g=Math.floor((a.x-d)*c),v=Math.floor(a.y*c),w=this.findDEMTileFor(new Gi(s,d,s,g,v));return!(!w||!w.dem)}getAtPointOrZero(a,i=0){return this.getAtPoint(a,i)||0}getAtPoint(a,i,s=!0){if(this.isUsingMockSource())return null;i==null&&(i=null);const c=this._source();if(!c||a.y<0||a.y>1)return i;const d=c.getSource().maxzoom,g=1<<d,v=Math.floor(a.x),w=a.x-v,E=new Gi(d,v,d,Math.floor(w*g),Math.floor(a.y*g)),A=this.findDEMTileFor(E);if(!A||!A.dem)return i;const O=A.dem,D=1<<A.tileID.canonical.z,z=(w*D-A.tileID.canonical.x)*O.dim,V=(a.y*D-A.tileID.canonical.y)*O.dim,W=Math.floor(z),K=Math.floor(V);return(s?this.exaggeration():1)*Sr(Sr(O.get(W,K),O.get(W,K+1),V-K),Sr(O.get(W+1,K),O.get(W+1,K+1),V-K),z-W)}getAtTileOffset(a,i,s){const c=1<<a.canonical.z;return this.getAtPointOrZero(new V1(a.wrap+(a.canonical.x+i/Xt)/c,(a.canonical.y+s/Xt)/c))}getAtTileOffsetFunc(a,i,s,c){return d=>{const g=this.getAtTileOffset(a,d.x,d.y),v=c.upVector(a.canonical,d.x,d.y);return No(v,v,g*c.upVectorScale(a.canonical,i,s).metersToTile),v}}getForTilePoints(a,i,s,c){if(this.isUsingMockSource())return!1;const d=K3.create(this,a,c);return!!d&&(i.forEach(g=>{g[2]=this.exaggeration()*d.getElevationAt(g[0],g[1],s)}),!0)}getMinMaxForTile(a){if(this.isUsingMockSource())return null;const i=this.findDEMTileFor(a);if(!i||!i.dem)return null;const s=i.dem.tree,c=i.tileID,d=1<<a.canonical.z-c.canonical.z;let g=a.canonical.x/d-c.canonical.x,v=a.canonical.y/d-c.canonical.y,w=0;for(let E=0;E<a.canonical.z-c.canonical.z&&!s.leaves[w];E++){g*=2,v*=2;const A=2*Math.floor(v)+Math.floor(g);w=s.childOffsets[w]+A,g%=1,v%=1}return{min:this.exaggeration()*s.minimums[w],max:this.exaggeration()*s.maximums[w]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(a,i,s){throw new Error("Pure virtual method called.")}pointCoordinate(a){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(a){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},o.ErrorEvent=vr,o.EvaluationParameters=k,o.Event=mo,o.Evented=Qr,o.FillExtrusionBucket=ed,o.Frustum=y7,o.FrustumCorners=g7,o.GLOBE_RADIUS=ds,o.GLOBE_SCALE_MATCH_LATITUDE=45,o.GLOBE_ZOOM_THRESHOLD_MAX=kx,o.GLOBE_ZOOM_THRESHOLD_MIN=_7,o.GlobeSharedBuffers=class{constructor(a){this._createGrid(a),this._createPoles(a)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const a of this._poleSegments)a.destroy();for(const a of this._gridSegments)a.withSkirts.destroy(),a.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const a of this._wireframeSegments)a.destroy()}}_fillGridMeshWithLods(a,i){const s=new gt,c=new Ut,d=[],g=a+1+2,v=i[0]+1,w=i[0]+1+(1+i.length),E=(A,O,D)=>{let z=A===g-1?A-2:A===0?A:A-1;return z+=D?24575:0,[z,O]};for(let A=0;A<g;++A)s.emplaceBack(...E(A,0,!0));for(let A=0;A<v;++A)for(let O=0;O<g;++O)s.emplaceBack(...E(O,A,(O===0||O===g-1)&&!0));for(let A=0;A<i.length;++A){const O=i[A];for(let D=0;D<g;++D)s.emplaceBack(...E(D,O,!0))}for(let A=0;A<i.length;++A){const O=c.length,D=i[A]+1+2,z=new Ut;for(let K=0;K<D-1;K++){const re=K===D-2,he=re?g*(w-i.length+A-K):g;for(let xe=0;xe<g-1;xe++){const fe=K*g+xe;K===0||re||xe===0||xe===g-2?(z.emplaceBack(fe+1,fe,fe+he),z.emplaceBack(fe+he,fe+he+1,fe+1)):(c.emplaceBack(fe+1,fe,fe+he),c.emplaceBack(fe+he,fe+he+1,fe+1))}}const V=Ln.simpleSegment(0,O,s.length,c.length-O);for(let K=0;K<z.uint16.length;K+=3)c.emplaceBack(z.uint16[K],z.uint16[K+1],z.uint16[K+2]);const W=Ln.simpleSegment(0,O,s.length,c.length-O);d.push({withoutSkirts:V,withSkirts:W})}return{vertices:s,indices:c,segments:d}}_createGrid(a){const i=this._fillGridMeshWithLods(dc,G0);this._gridSegments=i.segments,this._gridBuffer=a.createVertexBuffer(i.vertices,V0.members),this._gridIndexBuffer=a.createIndexBuffer(i.indices,!0)}_createPoles(a){const i=new Ut;for(let d=0;d<=dc;d++)i.emplaceBack(0,d+1,d+2);this._poleIndexBuffer=a.createIndexBuffer(i,!0);const s=new $r,c=new $r;this._poleSegments=[];for(let d=0,g=0;d<_7;d++){const v=360/(1<<d);s.emplaceBack(0,-ds,0,.5,0),c.emplaceBack(0,-ds,0,.5,1);for(let w=0;w<=dc;w++){const E=w/dc,A=Sr(0,v,E),[O,D,z]=$1(kz,Dz,A,ds);s.emplaceBack(O,D,z,E,0),c.emplaceBack(O,D,z,E,1)}this._poleSegments.push(Ln.simpleSegment(g,0,66,64)),g+=66}this._poleNorthVertexBuffer=a.createVertexBuffer(s,Ix,!1),this._poleSouthVertexBuffer=a.createVertexBuffer(c,Ix,!1)}getGridBuffers(a,i){return[this._gridBuffer,this._gridIndexBuffer,i?this._gridSegments[a].withSkirts:this._gridSegments[a].withoutSkirts]}getPoleBuffers(a){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[a]]}getWirefameBuffers(a,i){if(!this._wireframeSegments){const s=new Jn,c=dc,d=c+1+2,g=1;this._wireframeSegments=[];for(let v=0,w=0;v<G0.length;v++){const E=G0[v];for(let O=g;O<E+g;O++)for(let D=g;D<c+g;D++){const z=O*d+D;s.emplaceBack(z,z+1),s.emplaceBack(z,z+d),s.emplaceBack(z,z+d+1)}const A=E*c*3;this._wireframeSegments.push(Ln.simpleSegment(0,w,(E+1)*d,A)),w+=A}this._wireframeIndexBuffer=a.createIndexBuffer(s)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[i]]}},o.GlyphManager=J1,o.ImagePosition=W7,o.KDBush=l8,o.LivePerformanceUtils=Jr,o.LngLat=Ur,o.LngLatBounds=Wl,o.LocalGlyphMode=Z7,o.MAX_MERCATOR_LATITUDE=xi,o.MercatorCoordinate=V1,o.ONE_EM=si,o.OverscaledTileID=Gi,o.PerformanceMarkers=mn,o.Point=oe,o.Properties=pe,o.RGBAImage=To,o.Ray=m7,o.RequestManager=class{constructor(a,i,s){this._transformRequestFn=a,this._customAccessToken=i,this._silenceAuthErrors=!!s,this._createSkuToken()}_createSkuToken(){const a=function(){let i="";for(let s=0;s<10;s++)i+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",N,i].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=a.token,this._skuTokenExpiresAt=a.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(a,i){return this._transformRequestFn&&this._transformRequestFn(a,i)||{url:a}}normalizeStyleURL(a,i){if(!ke(a))return a;const s=St(a);return s.path=`/styles/v1${s.path}`,this._makeAPIURL(s,this._customAccessToken||i)}normalizeGlyphsURL(a,i){if(!ke(a))return a;const s=St(a);return s.path=`/fonts/v1${s.path}`,this._makeAPIURL(s,this._customAccessToken||i)}normalizeSourceURL(a,i,s,c){if(!ke(a))return a;const d=St(a);return d.path=`/v4/${d.authority}.json`,d.params.push("secure"),s&&d.params.push(`language=${s}`),c&&d.params.push(`worldview=${c}`),this._makeAPIURL(d,this._customAccessToken||i)}normalizeSpriteURL(a,i,s,c){const d=St(a);return ke(a)?(d.path=`/styles/v1${d.path}/sprite${i}${s}`,this._makeAPIURL(d,this._customAccessToken||c)):(d.path+=`${i}${s}`,le(d))}normalizeTileURL(a,i,s){if(this._isSkuTokenExpired()&&this._createSkuToken(),a&&!ke(a))return a;const c=St(a);c.path=c.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${i||s&&c.authority!=="raster"&&s===512?"@2x":""}${C.supported?".webp":"$1"}`),c.authority==="raster"?c.path=`/${S.RASTER_URL_PREFIX}${c.path}`:(c.path=c.path.replace(/^.+\/v4\//,"/"),c.path=`/${S.TILE_URL_VERSION}${c.path}`);const d=this._customAccessToken||function(g){for(const v of g){const w=v.match(/^access_token=(.*)$/);if(w)return w[1]}return null}(c.params)||S.ACCESS_TOKEN;return S.REQUIRE_ACCESS_TOKEN&&d&&this._skuToken&&c.params.push(`sku=${this._skuToken}`),this._makeAPIURL(c,d)}canonicalizeTileURL(a,i){const s=St(a);if(!s.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!s.path.match(/\.[\w]+$/))return a;let c="mapbox://";s.path.match(/^\/raster\/v1\//)?c+=`raster/${s.path.replace(`/${S.RASTER_URL_PREFIX}/`,"")}`:c+=`tiles/${s.path.replace(`/${S.TILE_URL_VERSION}/`,"")}`;let d=s.params;return i&&(d=d.filter(g=>!g.match(/^access_token=/))),d.length&&(c+=`?${d.join("&")}`),c}canonicalizeTileset(a,i){const s=!!i&&ke(i),c=[];for(const d of a.tiles||[])Ve(d)?c.push(this.canonicalizeTileURL(d,s)):c.push(d);return c}_makeAPIURL(a,i){const s="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",c=St(S.API_URL);if(a.protocol=c.protocol,a.authority=c.authority,a.protocol==="http"){const d=a.params.indexOf("secure");d>=0&&a.params.splice(d,1)}if(c.path!=="/"&&(a.path=`${c.path}${a.path}`),!S.REQUIRE_ACCESS_TOKEN)return le(a);if(i=i||S.ACCESS_TOKEN,!this._silenceAuthErrors){if(!i)throw new Error(`An API access token is required to use Mapbox GL. ${s}`);if(i[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${s}`)}return a.params=a.params.filter(d=>d.indexOf("access_token")===-1),a.params.push(`access_token=${i||""}`),le(a)}},o.ResourceType=gi,o.SegmentVector=Ln,o.SourceCache=vc,o.StencilMode=i8,o.StructArrayLayout1ui2=bo,o.StructArrayLayout2f1f2i16=Yt,o.StructArrayLayout2i4=gt,o.StructArrayLayout2ui4=Jn,o.StructArrayLayout3f12=dr,o.StructArrayLayout3ui6=Ut,o.StructArrayLayout4i8=ot,o.StructArrayLayout5f20=$r,o.Texture=hd,o.Tile=r8,o.Transitionable=H,o.Uniform1f=m3,o.Uniform1i=class extends qs{constructor(a){super(a),this.current=0}set(a,i,s){this.fetchUniformLocation(a,i)&&this.current!==s&&(this.current=s,this.gl.uniform1i(this.location,s))}},o.Uniform2f=class extends qs{constructor(a){super(a),this.current=[0,0]}set(a,i,s){this.fetchUniformLocation(a,i)&&(s[0]===this.current[0]&&s[1]===this.current[1]||(this.current=s,this.gl.uniform2f(this.location,s[0],s[1])))}},o.Uniform3f=class extends qs{constructor(a){super(a),this.current=[0,0,0]}set(a,i,s){this.fetchUniformLocation(a,i)&&(s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]||(this.current=s,this.gl.uniform3f(this.location,s[0],s[1],s[2])))}},o.Uniform4f=dx,o.UniformColor=px,o.UniformMatrix2f=class extends qs{constructor(a){super(a),this.current=gz}set(a,i,s){if(this.fetchUniformLocation(a,i)){for(let c=0;c<4;c++)if(s[c]!==this.current[c]){this.current=s,this.gl.uniformMatrix2fv(this.location,!1,s);break}}}},o.UniformMatrix3f=class extends qs{constructor(a){super(a),this.current=mz}set(a,i,s){if(this.fetchUniformLocation(a,i)){for(let c=0;c<9;c++)if(s[c]!==this.current[c]){this.current=s,this.gl.uniformMatrix3fv(this.location,!1,s);break}}}},o.UniformMatrix4f=class extends qs{constructor(a){super(a),this.current=pz}set(a,i,s){if(this.fetchUniformLocation(a,i)){if(s[12]!==this.current[12]||s[0]!==this.current[0])return this.current=s,void this.gl.uniformMatrix4fv(this.location,!1,s);for(let c=1;c<16;c++)if(s[c]!==this.current[c]){this.current=s,this.gl.uniformMatrix4fv(this.location,!1,s);break}}}},o.UnwrappedTileID=xb,o.ValidationError=Dt,o.VectorTileFeature=I3,o.VectorTileWorkerSource=class extends Qr{constructor(a,i,s,c,d){super(),this.actor=a,this.layerIndex=i,this.availableImages=s,this.loadVectorData=d||Iw,this.loading={},this.loaded={},this.deduped=new Cw(a.scheduler),this.isSpriteLoaded=c,this.scheduler=a.scheduler}loadTile(a,i){const s=a.uid,c=a&&a.request,d=c&&c.collectResourceTiming,g=this.loading[s]=new jB(a);g.abort=this.loadVectorData(a,(v,w)=>{const E=!this.loading[s];if(delete this.loading[s],E||v||!w)return g.status="done",E||(this.loaded[s]=g),i(v);const A=w.rawData,O={};w.expires&&(O.expires=w.expires),w.cacheControl&&(O.cacheControl=w.cacheControl),g.vectorTile=w.vectorTile||new $7(new R3(A));const D=()=>{g.parse(g.vectorTile,this.layerIndex,this.availableImages,this.actor,(z,V)=>{if(z||!V)return i(z);const W={};if(d){const K=oa(c);K.length>0&&(W.resourceTiming=JSON.parse(JSON.stringify(K)))}i(null,Tt({rawTileData:A.slice(0)},V,O,W))})};this.isSpriteLoaded?D():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(D,{type:"parseTile",isSymbolTile:a.isSymbolTile,zoom:a.tileZoom}):D()}),this.loaded=this.loaded||{},this.loaded[s]=g})}reloadTile(a,i){const s=this.loaded,c=a.uid,d=this;if(s&&s[c]){const g=s[c];g.showCollisionBoxes=a.showCollisionBoxes,g.enableTerrain=!!a.enableTerrain,g.projection=a.projection,g.tileTransform=_c(a.tileID.canonical,a.projection);const v=(w,E)=>{const A=g.reloadCallback;A&&(delete g.reloadCallback,g.parse(g.vectorTile,d.layerIndex,this.availableImages,d.actor,A)),i(w,E)};g.status==="parsing"?g.reloadCallback=v:g.status==="done"&&(g.vectorTile?g.parse(g.vectorTile,this.layerIndex,this.availableImages,this.actor,v):v())}}abortTile(a,i){const s=a.uid,c=this.loading[s];c&&(c.abort&&c.abort(),delete this.loading[s]),i()}removeTile(a,i){const s=this.loaded,c=a.uid;s&&s[c]&&delete s[c],i()}},o.WritingMode=Vo,o.ZoomDependentExpression=ec,o.add=Zs,o.addDynamicAttributes=q3,o.adjoint=function(a,i){var s=i[0],c=i[1],d=i[2],g=i[3],v=i[4],w=i[5],E=i[6],A=i[7],O=i[8];return a[0]=v*O-w*A,a[1]=d*A-c*O,a[2]=c*w-d*v,a[3]=w*E-g*O,a[4]=s*O-d*E,a[5]=d*g-s*w,a[6]=g*A-v*E,a[7]=c*E-s*A,a[8]=s*v-c*g,a},o.asyncAll=ft,o.bezier=Ce,o.bindAll=zt,o.boundsAttributes=fw,o.bufferConvexPolygon=function(a,i){const s=[];for(let c=0;c<a.length;c++){const d=rt(c-1,-1,a.length-1),g=rt(c+1,-1,a.length-1),v=a[c],w=a[g],E=a[d].sub(v).unit(),A=w.sub(v).unit(),O=A.angleWithSep(E.x,E.y),D=E.add(A).unit().mult(-1*i/Math.sin(O/2));s.push(v.add(D))}return s},o.cacheEntryPossiblyAdded=function(a){Ls++,Ls>Ds&&(a.getActor().send("enforceCacheSizeLimit",to),Ls=0)},o.calculateGlobeLabelMatrix=function(a,i){const{x:s,y:c}=a.point,d=Bx(s,c,a.worldSize/a._pixelsPerMercatorPixel,0,0);return cc(d,d,b7(ps(i)))},o.calculateGlobeMatrix=function(a){const{x:i,y:s}=a.point,{lng:c,lat:d}=a._center;return Bx(i,s,a.worldSize,c,d)},o.calculateGlobeMercatorMatrix=function(a){const i=a.pixelsPerMeter,s=i/Ua(1,a.center.lat),c=$a(new Float64Array(16));return B0(c,c,[a.point.x,a.point.y,0]),hc(c,c,[s,s,i]),Float32Array.from(c)},o.circumferenceAtLatitude=T7,o.clamp=ge,o.clearTileCache=function(a){if(!Ai())return;const i=_.caches.delete(ii);a&&i.catch(a).then(()=>a())},o.clipLine=Zb,o.clone=function(a){var i=new wo(16);return i[0]=a[0],i[1]=a[1],i[2]=a[2],i[3]=a[3],i[4]=a[4],i[5]=a[5],i[6]=a[6],i[7]=a[7],i[8]=a[8],i[9]=a[9],i[10]=a[10],i[11]=a[11],i[12]=a[12],i[13]=a[13],i[14]=a[14],i[15]=a[15],i},o.clone$1=pr,o.collisionCircleLayout=BR,o.config=S,o.conjugate=function(a,i){return a[0]=-i[0],a[1]=-i[1],a[2]=-i[2],a[3]=i[3],a},o.create=function(){var a=new wo(16);return wo!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a},o.create$1=yx,o.createExpression=Fl,o.createLayout=Be,o.createStyleLayer=function(a){return a.type==="custom"?new MB(a):new IB[a.type](a)},o.cross=p7,o.degToRad=De,o.distance=function(a,i){return Math.hypot(i[0]-a[0],i[1]-a[1],i[2]-a[2])},o.div=function(a,i,s){return a[0]=i[0]/s[0],a[1]=i[1]/s[1],a[2]=i[2]/s[2],a},o.dot=ca,o.earthRadius=H0,o.ease=Le,o.easeCubicInOut=ve,o.ecefToLatLng=function([a,i,s]){const c=Math.hypot(a,i,s),d=Math.atan2(a,s),g=.5*Math.PI-Math.acos(-i/c);return new Ur(Je(d),Je(g))},o.emitValidationErrors=u3,o.endsWith=rr,o.enforceCacheSizeLimit=function(a){ra(),mi&&mi.then(i=>{i.keys().then(s=>{for(let c=0;c<s.length-a;c++)i.delete(s[c])})})},o.evaluateSizeForFeature=L3,o.evaluateSizeForZoom=Z1,o.evaluateVariableOffset=Qb,o.evented=x,o.exactEquals=function(a,i){return a[0]===i[0]&&a[1]===i[1]&&a[2]===i[2]&&a[3]===i[3]},o.exactEquals$1=function(a,i){return a[0]===i[0]&&a[1]===i[1]&&a[2]===i[2]},o.exported=Ci,o.exported$1=C,o.extend=Tt,o.extend$1=Ii,o.fillExtrusionHeightLift=yb,o.filterObject=dt,o.fromMat4=function(a,i){return a[0]=i[0],a[1]=i[1],a[2]=i[2],a[3]=i[4],a[4]=i[5],a[5]=i[6],a[6]=i[8],a[7]=i[9],a[8]=i[10],a},o.fromQuat=function(a,i){var s=i[0],c=i[1],d=i[2],g=i[3],v=s+s,w=c+c,E=d+d,A=s*v,O=c*v,D=c*w,z=d*v,V=d*w,W=d*E,K=g*v,re=g*w,he=g*E;return a[0]=1-D-W,a[1]=O+he,a[2]=z-re,a[3]=0,a[4]=O-he,a[5]=1-A-W,a[6]=V+K,a[7]=0,a[8]=z+re,a[9]=V-K,a[10]=1-A-D,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},o.fromRotation=function(a,i){var s=Math.sin(i),c=Math.cos(i);return a[0]=c,a[1]=s,a[2]=0,a[3]=-s,a[4]=c,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},o.fromScaling=vx,o.furthestTileCorner=function(a){const i=Math.round((a+45+360)%360/90)%4;return we[i]},o.getAABBPointSquareDist=function(a,i,s){let c=0;for(let d=0;d<2;++d){const g=s?s[d]:0;a[d]>g&&(c+=(a[d]-g)*(a[d]-g)),i[d]<g&&(c+=(g-i[d])*(g-i[d]))}return c},o.getAnchorAlignment=H7,o.getAnchorJustification=K7,o.getBounds=function(a){let i=1/0,s=1/0,c=-1/0,d=-1/0;for(const g of a)i=Math.min(i,g.x),s=Math.min(s,g.y),c=Math.max(c,g.x),d=Math.max(d,g.y);return{min:new oe(i,s),max:new oe(c,d)}},o.getColumn=Bi,o.getDefaultExportFromCjs=U,o.getGridMatrix=function(a,i,s,c){const d=i.getNorth(),g=i.getSouth(),v=i.getWest(),w=i.getEast(),E=1<<a.z,A=w-v,O=d-g,D=A/dc,z=-O/G0[s],V=[0,D,0,z,0,0,d,v,0];if(a.z>0){const W=180/c;_x(V,V,[W/A+1,0,0,0,W/O+1,0,-.5*W/D,.5*W/z,1])}return V[2]=E,V[5]=a.x,V[8]=a.y,V},o.getImage=me,o.getJSON=function(a,i){return ia(Tt(a,{type:"json"}),i)},o.getLatitudinalLod=function(a){const i=xi-5;a=ge(a,-i,i)/i*90;const s=Math.pow(Math.abs(Math.sin(De(a))),3);return Math.round(s*(G0.length-1))},o.getMapSessionAPI=Jt,o.getPerformanceMeasurement=oa,o.getProjection=sw,o.getRTLTextPluginStatus=T,o.getReferrer=na,o.getTilePoint=function(a,{x:i,y:s},c=0){return new oe(((i-c)*a.scale-a.x)*Xt,(s*a.scale-a.y)*Xt)},o.getTileVec3=function(a,i,s=0){return j1(((i.x-s)*a.scale-a.x)*Xt,(i.y*a.scale-a.y)*Xt,Nx(i.z,i.y))},o.getVideo=function(a,i){const s=_.document.createElement("video");s.muted=!0,s.onloadstart=function(){i(null,s)};for(let c=0;c<a.length;c++){const d=_.document.createElement("source");zs(a[c])||(s.crossOrigin="Anonymous"),d.src=a[c],s.appendChild(d)}return{cancel:()=>{}}},o.globeCenterToScreenPoint=function(a){const i=[0,0,0],s=$a(new Float64Array(16));return cc(s,a.pixelMatrix,a.globeMatrix),An(i,i,s),new oe(i[0],i[1])},o.globeDenormalizeECEF=b7,o.globeECEFOrigin=function(a,i){const s=[0,0,0];return An(s,s,q0(ps(i.canonical))),An(s,s,a),s},o.globeMetersToEcef=_3,o.globeNormalizeECEF=q0,o.globePixelsToTileUnits=function(a,i){return Xt/(512*Math.pow(2,a))*x3(ps(i))},o.globePoleMatrixForTile=function(a,i,s){const c=$a(new Float64Array(16)),d=(i/(1<<a)-.5)*Math.PI*2;return y3(c,s.globeMatrix,d),Float32Array.from(c)},o.globeTileBounds=ps,o.globeTiltAtLngLat=Fx,o.globeToMercatorTransition=U1,o.globeUseCustomAntiAliasing=function(a,i,s){const c=U1(s.zoom),d=a.style.map._antialias,g=!!i.extStandardDerivatives,v=i.extStandardDerivativesForceOff||a.terrain&&a.terrain.exaggeration()>0;return c===0&&!d&&!v&&g},o.identity=$a,o.identity$1=Ax,o.invert=c7,o.isFullscreen=function(){return!!_.document.fullscreenElement||!!_.document.webkitFullscreenElement},o.isLngLatBehindGlobe=w7,o.isMapAuthenticated=function(a){return nr.has(a)},o.isMapboxURL=ke,o.isSafariWithAntialiasingBug=function(a){const i=a.navigator?a.navigator.userAgent:null;return!!pi(a)&&i&&(i.match("Version/15.4")||i.match("Version/15.5")||i.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},o.latFromMercatorY=vi,o.latLngToECEF=N1,o.len=Ez,o.length=F0,o.length$1=function(a){return Math.hypot(a[0],a[1],a[2],a[3])},o.lngFromMercatorX=Uo,o.loadVectorTile=Iw,o.makeRequest=ia,o.mapValue=function(a,i,s,c,d){return ge((a-i)/(s-i)*(d-c)+c,c,d)},o.mercatorScale=Ux,o.mercatorXfromLng=ms,o.mercatorYfromLat=gs,o.mercatorZfromAltitude=Ua,o.mul=Tz,o.mul$1=Sz,o.multiply=cc,o.multiply$1=_x,o.multiply$2=wx,o.nextPowerOfTwo=Mr,o.normalize=Ui,o.normalize$1=Pz,o.normalize$2=Ex,o.number=Sr,o.ortho=function(a,i,s,c,d,g,v){var w=1/(i-s),E=1/(c-d),A=1/(g-v);return a[0]=-2*w,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*E,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*A,a[11]=0,a[12]=(i+s)*w,a[13]=(d+c)*E,a[14]=(v+g)*A,a[15]=1,a},o.pbf=Ab,o.perspective=function(a,i,s,c,d){var g,v=1/Math.tan(i/2);return a[0]=v/s,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=v,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=-1,a[12]=0,a[13]=0,a[15]=0,d!=null&&d!==1/0?(a[10]=(d+c)*(g=1/(c-d)),a[14]=2*d*c*g):(a[10]=-1,a[14]=-2*c),a},o.pick=function(a,i){const s={};for(let c=0;c<i.length;c++){const d=i[c];d in a&&(s[d]=a[d])}return s},o.plugin=I,o.pointGeometry=X,o.polesInViewport=function(a){const i=$a(new Float64Array(16));cc(i,a.pixelMatrix,a.globeMatrix);const s=[0,ha,0],c=[0,fa,0];return An(s,s,i),An(c,c,i),[s[0]>0&&s[0]<=a.width&&s[1]>0&&s[1]<=a.height&&!w7(a,new Ur(a.center.lat,90)),c[0]>0&&c[0]<=a.width&&c[1]>0&&c[1]<=a.height&&!w7(a,new Ur(a.center.lat,-90))]},o.polygonContainsPoint=gc,o.polygonIntersectsBox=Xx,o.polygonIntersectsPolygon=Wx,o.polygonizeBounds=function(a,i,s=0,c=!0){const d=new oe(s,s),g=a.sub(d),v=i.add(d),w=[g,new oe(v.x,g.y),v,new oe(g.x,v.y)];return c&&w.push(g.clone()),w},o.posAttributes=V0,o.postMapLoadEvent=kt,o.postPerformanceEvent=Ot,o.postTurnstileEvent=Et,o.potpack=G7,o.prevPowerOfTwo=function(a){return a<=1?1:Math.pow(2,Math.floor(Math.log(a)/Math.LN2))},o.radToDeg=Je,o.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],o.registerForPluginStateChange=function(a){return a({pluginStatus:m,pluginURL:l}),x.on("pluginStateChange",a),a},o.removeAuthState=function(a){nr.delete(a)},o.renderColorRamp=O7,o.resample=Vx,o.rotateX=h7,o.rotateX$1=Mx,o.rotateY=y3,o.rotateY$1=Cx,o.rotateZ=function(a,i,s){var c=Math.sin(s),d=Math.cos(s),g=i[0],v=i[1],w=i[2],E=i[3],A=i[4],O=i[5],D=i[6],z=i[7];return i!==a&&(a[8]=i[8],a[9]=i[9],a[10]=i[10],a[11]=i[11],a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15]),a[0]=g*d+A*c,a[1]=v*d+O*c,a[2]=w*d+D*c,a[3]=E*d+z*c,a[4]=A*d-g*c,a[5]=O*d-v*c,a[6]=D*d-w*c,a[7]=z*d-E*c,a},o.rotateZ$1=function(a,i,s){s*=.5;var c=i[0],d=i[1],g=i[2],v=i[3],w=Math.sin(s),E=Math.cos(s);return a[0]=c*E+d*w,a[1]=d*E-c*w,a[2]=g*E+v*w,a[3]=v*E-g*w,a},o.scale=hc,o.scale$1=Sx,o.scale$2=No,o.scaleAndAdd=N0,o.set=function(a,i,s,c){return a[0]=i,a[1]=s,a[2]=c,a},o.setCacheLimits=function(a,i){to=a,Ds=i},o.setColumn=function(a,i,s){a[4*i+0]=s[0],a[4*i+1]=s[1],a[4*i+2]=s[2],a[4*i+3]=s[3]},o.setRTLTextPlugin=function(a,i,s=!1){if(m===k0||m===D0||m===L0)throw new Error("setRTLTextPlugin cannot be called multiple times.");l=Ci.resolveURL(a),m=k0,Ul=i,y(),s||M()},o.smoothstep=$e,o.spec=Qe,o.squaredLength=function(a){var i=a[0],s=a[1],c=a[2];return i*i+s*s+c*c},o.storeAuthState=function(a,i){i?nr.add(a):nr.delete(a)},o.sub=Na,o.subtract=d7,o.symbolSize=FR,o.tileAABB=function(a,i,s,c,d,g,v,w,E){if(E.name==="globe")return Oz(a,i,new k3(s,c,d));const A=_c({z:s,x:c,y:d},E);return new Vi([(g+A.x/A.scale)*i,i*(A.y/A.scale),v],[(g+A.x2/A.scale)*i,i*(A.y2/A.scale),w])},o.tileCornersToBounds=v3,o.tileTransform=_c,o.transformMat3=function(a,i,s){var c=i[0],d=i[1],g=i[2];return a[0]=c*s[0]+d*s[3]+g*s[6],a[1]=c*s[1]+d*s[4]+g*s[7],a[2]=c*s[2]+d*s[5]+g*s[8],a},o.transformMat4=An,o.transformMat4$1=fc,o.transformQuat=Tx,o.transitionTileAABBinECEF=Lx,o.translate=B0,o.transpose=function(a,i){if(a===i){var s=i[1],c=i[2],d=i[5];a[1]=i[3],a[2]=i[6],a[3]=s,a[5]=i[7],a[6]=c,a[7]=d}else a[0]=i[0],a[1]=i[3],a[2]=i[6],a[3]=i[1],a[4]=i[4],a[5]=i[7],a[6]=i[2],a[7]=i[5],a[8]=i[8];return a},o.triggerPluginCompletionEvent=f,o.uniqueId=fr,o.updateGlobeVertexNormal=function(a,i,s,c,d){const g=5*i+2;a.float32[g+0]=s,a.float32[g+1]=c,a.float32[g+2]=d},o.validateCustomStyleLayer=function(a){const i=[],s=a.id;return s===void 0&&i.push({message:`layers.${s}: missing required property "id"`}),a.render===void 0&&i.push({message:`layers.${s}: missing required method "render"`}),a.renderingMode&&a.renderingMode!=="2d"&&a.renderingMode!=="3d"&&i.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),i},o.validateFilter=a=>xo(oc(a)),o.validateFog=a=>xo(a3(a)),o.validateLayer=a=>xo(r3(a)),o.validateLight=a=>xo(o3(a)),o.validateSource=a=>xo(i3(a)),o.validateStyle=l3,o.validateTerrain=a=>xo(A0(a)),o.values=lt,o.vectorTile=C3,o.version=b,o.warnOnce=hr,o.window=_,o.wrap=rt}),h(["./shared"],function(o){function _(ye){if(typeof ye=="number"||typeof ye=="boolean"||typeof ye=="string"||ye==null)return JSON.stringify(ye);if(Array.isArray(ye)){let ee="[";for(const me of ye)ee+=`${_(me)},`;return`${ee}]`}let Q="{";for(const ee of Object.keys(ye).sort())Q+=`${ee}:${_(ye[ee])},`;return`${Q}}`}function b(ye){let Q="";for(const ee of o.refProperties)Q+=`/${_(ye[ee])}`;return Q}class P{constructor(Q){this.keyCache={},Q&&this.replace(Q)}replace(Q){this._layerConfigs={},this._layers={},this.update(Q,[])}update(Q,ee){for(const Se of Q)this._layerConfigs[Se.id]=Se,(this._layers[Se.id]=o.createStyleLayer(Se)).compileFilter(),this.keyCache[Se.id]&&delete this.keyCache[Se.id];for(const Se of ee)delete this.keyCache[Se],delete this._layerConfigs[Se],delete this._layers[Se];this.familiesBySource={};const me=function(Se,ke){const Ve={};for(let Oe=0;Oe<Se.length;Oe++){const Xe=ke&&ke[Se[Oe].id]||b(Se[Oe]);ke&&(ke[Se[Oe].id]=Xe);let bt=Ve[Xe];bt||(bt=Ve[Xe]=[]),bt.push(Se[Oe])}const Ue=[];for(const Oe in Ve)Ue.push(Ve[Oe]);return Ue}(o.values(this._layerConfigs),this.keyCache);for(const Se of me){const ke=Se.map(St=>this._layers[St.id]),Ve=ke[0];if(Ve.visibility==="none")continue;const Ue=Ve.source||"";let Oe=this.familiesBySource[Ue];Oe||(Oe=this.familiesBySource[Ue]={});const Xe=Ve.sourceLayer||"_geojsonTileLayer";let bt=Oe[Xe];bt||(bt=Oe[Xe]=[]),bt.push(ke)}}}class S{loadTile(Q,ee){const{uid:me,encoding:Se,rawImageData:ke,padding:Ve,buildQuadTree:Ue}=Q,Oe=o.window.ImageBitmap&&ke instanceof o.window.ImageBitmap?this.getImageData(ke,Ve):ke;ee(null,new o.DEMData(me,Oe,Se,Ve<1,Ue))}getImageData(Q,ee){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Q.width,Q.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=Q.width,this.offscreenCanvas.height=Q.height,this.offscreenCanvasContext.drawImage(Q,0,0,Q.width,Q.height);const me=this.offscreenCanvasContext.getImageData(-ee,-ee,Q.width+2*ee,Q.height+2*ee);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),me}}function C(ye,Q){if(ye.length!==0){L(ye[0],Q);for(var ee=1;ee<ye.length;ee++)L(ye[ee],!Q)}}function L(ye,Q){for(var ee=0,me=0,Se=0,ke=ye.length,Ve=ke-1;Se<ke;Ve=Se++){var Ue=(ye[Se][0]-ye[Ve][0])*(ye[Ve][1]+ye[Se][1]),Oe=ee+Ue;me+=Math.abs(ee)>=Math.abs(Ue)?ee-Oe+Ue:Ue-Oe+ee,ee=Oe}ee+me>=0!=!!Q&&ye.reverse()}var F=o.getDefaultExportFromCjs(function ye(Q,ee){var me,Se=Q&&Q.type;if(Se==="FeatureCollection")for(me=0;me<Q.features.length;me++)ye(Q.features[me],ee);else if(Se==="GeometryCollection")for(me=0;me<Q.geometries.length;me++)ye(Q.geometries[me],ee);else if(Se==="Feature")ye(Q.geometry,ee);else if(Se==="Polygon")C(Q.coordinates,ee);else if(Se==="MultiPolygon")for(me=0;me<Q.coordinates.length;me++)C(Q.coordinates[me],ee);return Q});const j=o.VectorTileFeature.prototype.toGeoJSON;var G={exports:{}},$=o.pointGeometry,N=o.vectorTile.VectorTileFeature,U=J;function J(ye,Q){this.options=Q||{},this.features=ye,this.length=ye.length}function q(ye,Q){this.id=typeof ye.id=="number"?ye.id:void 0,this.type=ye.type,this.rawGeometry=ye.type===1?[ye.geometry]:ye.geometry,this.properties=ye.tags,this.extent=Q||4096}J.prototype.feature=function(ye){return new q(this.features[ye],this.options.extent)},q.prototype.loadGeometry=function(){var ye=this.rawGeometry;this.geometry=[];for(var Q=0;Q<ye.length;Q++){for(var ee=ye[Q],me=[],Se=0;Se<ee.length;Se++)me.push(new $(ee[Se][0],ee[Se][1]));this.geometry.push(me)}return this.geometry},q.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ye=this.geometry,Q=1/0,ee=-1/0,me=1/0,Se=-1/0,ke=0;ke<ye.length;ke++)for(var Ve=ye[ke],Ue=0;Ue<Ve.length;Ue++){var Oe=Ve[Ue];Q=Math.min(Q,Oe.x),ee=Math.max(ee,Oe.x),me=Math.min(me,Oe.y),Se=Math.max(Se,Oe.y)}return[Q,me,ee,Se]},q.prototype.toGeoJSON=N.prototype.toGeoJSON;var Y=o.pbf,X=U;function ue(ye){var Q=new Y;return function(ee,me){for(var Se in ee.layers)me.writeMessage(3,oe,ee.layers[Se])}(ye,Q),Q.finish()}function oe(ye,Q){var ee;Q.writeVarintField(15,ye.version||1),Q.writeStringField(1,ye.name||""),Q.writeVarintField(5,ye.extent||4096);var me={keys:[],values:[],keycache:{},valuecache:{}};for(ee=0;ee<ye.length;ee++)me.feature=ye.feature(ee),Q.writeMessage(2,Re,me);var Se=me.keys;for(ee=0;ee<Se.length;ee++)Q.writeStringField(3,Se[ee]);var ke=me.values;for(ee=0;ee<ke.length;ee++)Q.writeMessage(4,ve,ke[ee])}function Re(ye,Q){var ee=ye.feature;ee.id!==void 0&&Q.writeVarintField(1,ee.id),Q.writeMessage(2,ze,ye),Q.writeVarintField(3,ee.type),Q.writeMessage(4,we,ee)}function ze(ye,Q){var ee=ye.feature,me=ye.keys,Se=ye.values,ke=ye.keycache,Ve=ye.valuecache;for(var Ue in ee.properties){var Oe=ee.properties[Ue],Xe=ke[Ue];if(Oe!==null){Xe===void 0&&(me.push(Ue),ke[Ue]=Xe=me.length-1),Q.writeVarint(Xe);var bt=typeof Oe;bt!=="string"&&bt!=="boolean"&&bt!=="number"&&(Oe=JSON.stringify(Oe));var St=bt+":"+Oe,le=Ve[St];le===void 0&&(Se.push(Oe),Ve[St]=le=Se.length-1),Q.writeVarint(le)}}}function De(ye,Q){return(Q<<3)+(7&ye)}function Je(ye){return ye<<1^ye>>31}function we(ye,Q){for(var ee=ye.loadGeometry(),me=ye.type,Se=0,ke=0,Ve=ee.length,Ue=0;Ue<Ve;Ue++){var Oe=ee[Ue],Xe=1;me===1&&(Xe=Oe.length),Q.writeVarint(De(1,Xe));for(var bt=me===3?Oe.length-1:Oe.length,St=0;St<bt;St++){St===1&&me!==1&&Q.writeVarint(De(2,bt-1));var le=Oe[St].x-Se,Ie=Oe[St].y-ke;Q.writeVarint(Je(le)),Q.writeVarint(Je(Ie)),Se+=le,ke+=Ie}me===3&&Q.writeVarint(De(7,1))}}function ve(ye,Q){var ee=typeof ye;ee==="string"?Q.writeStringField(1,ye):ee==="boolean"?Q.writeBooleanField(7,ye):ee==="number"&&(ye%1!=0?Q.writeDoubleField(3,ye):ye<0?Q.writeSVarintField(6,ye):Q.writeVarintField(5,ye))}G.exports=ue,G.exports.fromVectorTileJs=ue,G.exports.fromGeojsonVt=function(ye,Q){Q=Q||{};var ee={};for(var me in ye)ee[me]=new X(ye[me].features,Q),ee[me].name=me,ee[me].version=Q.version,ee[me].extent=Q.extent;return ue({layers:ee})},G.exports.GeoJSONWrapper=X;var Ce=o.getDefaultExportFromCjs(G.exports);const Le={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ye=>ye},ge=Math.fround||($e=new Float32Array(1),ye=>($e[0]=+ye,$e[0]));var $e;const rt=3,ft=5,lt=6;class Tt{constructor(Q){this.options=Object.assign(Object.create(Le),Q),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(Q){const{log:ee,minZoom:me,maxZoom:Se}=this.options;ee&&console.time("total time");const ke=`prepare ${Q.length} points`;ee&&console.time(ke),this.points=Q;const Ve=[];for(let Oe=0;Oe<Q.length;Oe++){const Xe=Q[Oe];if(!Xe.geometry)continue;const[bt,St]=Xe.geometry.coordinates,le=ge(br(bt)),Ie=ge(Mr(St));Ve.push(le,Ie,1/0,Oe,-1,1),this.options.reduce&&Ve.push(0)}let Ue=this.trees[Se+1]=this._createTree(Ve);ee&&console.timeEnd(ke);for(let Oe=Se;Oe>=me;Oe--){const Xe=+Date.now();Ue=this.trees[Oe]=this._createTree(this._cluster(Ue,Oe)),ee&&console.log("z%d: %d clusters in %dms",Oe,Ue.numItems,+Date.now()-Xe)}return ee&&console.timeEnd("total time"),this}getClusters(Q,ee){let me=((Q[0]+180)%360+360)%360-180;const Se=Math.max(-90,Math.min(90,Q[1]));let ke=Q[2]===180?180:((Q[2]+180)%360+360)%360-180;const Ve=Math.max(-90,Math.min(90,Q[3]));if(Q[2]-Q[0]>=360)me=-180,ke=180;else if(me>ke){const St=this.getClusters([me,Se,180,Ve],ee),le=this.getClusters([-180,Se,ke,Ve],ee);return St.concat(le)}const Ue=this.trees[this._limitZoom(ee)],Oe=Ue.range(br(me),Mr(Ve),br(ke),Mr(Se)),Xe=Ue.data,bt=[];for(const St of Oe){const le=this.stride*St;bt.push(Xe[le+ft]>1?qt(Xe,le,this.clusterProps):this.points[Xe[le+rt]])}return bt}getChildren(Q){const ee=this._getOriginId(Q),me=this._getOriginZoom(Q),Se="No cluster with the specified id.",ke=this.trees[me];if(!ke)throw new Error(Se);const Ve=ke.data;if(ee*this.stride>=Ve.length)throw new Error(Se);const Ue=this.options.radius/(this.options.extent*Math.pow(2,me-1)),Oe=ke.within(Ve[ee*this.stride],Ve[ee*this.stride+1],Ue),Xe=[];for(const bt of Oe){const St=bt*this.stride;Ve[St+4]===Q&&Xe.push(Ve[St+ft]>1?qt(Ve,St,this.clusterProps):this.points[Ve[St+rt]])}if(Xe.length===0)throw new Error(Se);return Xe}getLeaves(Q,ee,me){const Se=[];return this._appendLeaves(Se,Q,ee=ee||10,me=me||0,0),Se}getTile(Q,ee,me){const Se=this.trees[this._limitZoom(Q)],ke=Math.pow(2,Q),{extent:Ve,radius:Ue}=this.options,Oe=Ue/Ve,Xe=(me-Oe)/ke,bt=(me+1+Oe)/ke,St={features:[]};return this._addTileFeatures(Se.range((ee-Oe)/ke,Xe,(ee+1+Oe)/ke,bt),Se.data,ee,me,ke,St),ee===0&&this._addTileFeatures(Se.range(1-Oe/ke,Xe,1,bt),Se.data,ke,me,ke,St),ee===ke-1&&this._addTileFeatures(Se.range(0,Xe,Oe/ke,bt),Se.data,-1,me,ke,St),St.features.length?St:null}getClusterExpansionZoom(Q){let ee=this._getOriginZoom(Q)-1;for(;ee<=this.options.maxZoom;){const me=this.getChildren(Q);if(ee++,me.length!==1)break;Q=me[0].properties.cluster_id}return ee}_appendLeaves(Q,ee,me,Se,ke){const Ve=this.getChildren(ee);for(const Ue of Ve){const Oe=Ue.properties;if(Oe&&Oe.cluster?ke+Oe.point_count<=Se?ke+=Oe.point_count:ke=this._appendLeaves(Q,Oe.cluster_id,me,Se,ke):ke<Se?ke++:Q.push(Ue),Q.length===me)break}return ke}_createTree(Q){const ee=new o.KDBush(Q.length/this.stride|0,this.options.nodeSize,Float32Array);for(let me=0;me<Q.length;me+=this.stride)ee.add(Q[me],Q[me+1]);return ee.finish(),ee.data=Q,ee}_addTileFeatures(Q,ee,me,Se,ke,Ve){for(const Ue of Q){const Oe=Ue*this.stride,Xe=ee[Oe+ft]>1;let bt,St,le;if(Xe)bt=fr(ee,Oe,this.clusterProps),St=ee[Oe],le=ee[Oe+1];else{const et=this.points[ee[Oe+rt]];bt=et.properties;const[ht,Et]=et.geometry.coordinates;St=br(ht),le=Mr(Et)}const Ie={type:1,geometry:[[Math.round(this.options.extent*(St*ke-me)),Math.round(this.options.extent*(le*ke-Se))]],tags:bt};let je;je=Xe||this.options.generateId?ee[Oe+rt]:this.points[ee[Oe+rt]].id,je!==void 0&&(Ie.id=je),Ve.features.push(Ie)}}_limitZoom(Q){return Math.max(this.options.minZoom,Math.min(Math.floor(+Q),this.options.maxZoom+1))}_cluster(Q,ee){const{radius:me,extent:Se,reduce:ke,minPoints:Ve}=this.options,Ue=me/(Se*Math.pow(2,ee)),Oe=Q.data,Xe=[],bt=this.stride;for(let St=0;St<Oe.length;St+=bt){if(Oe[St+2]<=ee)continue;Oe[St+2]=ee;const le=Oe[St],Ie=Oe[St+1],je=Q.within(Oe[St],Oe[St+1],Ue),et=Oe[St+ft];let ht=et;for(const Et of je){const Nt=Et*bt;Oe[Nt+2]>ee&&(ht+=Oe[Nt+ft])}if(ht>et&&ht>=Ve){let Et,Nt=le*et,kt=Ie*et,Ft=-1;const Ot=((St/bt|0)<<5)+(ee+1)+this.points.length;for(const Vt of je){const Jt=Vt*bt;if(Oe[Jt+2]<=ee)continue;Oe[Jt+2]=ee;const nr=Oe[Jt+ft];Nt+=Oe[Jt]*nr,kt+=Oe[Jt+1]*nr,Oe[Jt+4]=Ot,ke&&(Et||(Et=this._map(Oe,St,!0),Ft=this.clusterProps.length,this.clusterProps.push(Et)),ke(Et,this._map(Oe,Jt)))}Oe[St+4]=Ot,Xe.push(Nt/ht,kt/ht,1/0,Ot,-1,ht),ke&&Xe.push(Ft)}else{for(let Et=0;Et<bt;Et++)Xe.push(Oe[St+Et]);if(ht>1)for(const Et of je){const Nt=Et*bt;if(!(Oe[Nt+2]<=ee)){Oe[Nt+2]=ee;for(let kt=0;kt<bt;kt++)Xe.push(Oe[Nt+kt])}}}}return Xe}_getOriginId(Q){return Q-this.points.length>>5}_getOriginZoom(Q){return(Q-this.points.length)%32}_map(Q,ee,me){if(Q[ee+ft]>1){const Ve=this.clusterProps[Q[ee+lt]];return me?Object.assign({},Ve):Ve}const Se=this.points[Q[ee+rt]].properties,ke=this.options.map(Se);return me&&ke===Se?Object.assign({},ke):ke}}function qt(ye,Q,ee){return{type:"Feature",id:ye[Q+rt],properties:fr(ye,Q,ee),geometry:{type:"Point",coordinates:[(me=ye[Q],360*(me-.5)),nn(ye[Q+1])]}};var me}function fr(ye,Q,ee){const me=ye[Q+ft],Se=me>=1e4?`${Math.round(me/1e3)}k`:me>=1e3?Math.round(me/100)/10+"k":me,ke=ye[Q+lt],Ve=ke===-1?{}:Object.assign({},ee[ke]);return Object.assign(Ve,{cluster:!0,cluster_id:ye[Q+rt],point_count:me,point_count_abbreviated:Se})}function br(ye){return ye/360+.5}function Mr(ye){const Q=Math.sin(ye*Math.PI/180),ee=.5-.25*Math.log((1+Q)/(1-Q))/Math.PI;return ee<0?0:ee>1?1:ee}function nn(ye){const Q=(180-360*ye)*Math.PI/180;return 360*Math.atan(Math.exp(Q))/Math.PI-90}function zt(ye,Q,ee,me){for(var Se,ke=me,Ve=ee-Q>>1,Ue=ee-Q,Oe=ye[Q],Xe=ye[Q+1],bt=ye[ee],St=ye[ee+1],le=Q+3;le<ee;le+=3){var Ie=rr(ye[le],ye[le+1],Oe,Xe,bt,St);if(Ie>ke)Se=le,ke=Ie;else if(Ie===ke){var je=Math.abs(le-Ve);je<Ue&&(Se=le,Ue=je)}}ke>me&&(Se-Q>3&&zt(ye,Q,Se,me),ye[Se+2]=ke,ee-Se>3&&zt(ye,Se,ee,me))}function rr(ye,Q,ee,me,Se,ke){var Ve=Se-ee,Ue=ke-me;if(Ve!==0||Ue!==0){var Oe=((ye-ee)*Ve+(Q-me)*Ue)/(Ve*Ve+Ue*Ue);Oe>1?(ee=Se,me=ke):Oe>0&&(ee+=Ve*Oe,me+=Ue*Oe)}return(Ve=ye-ee)*Ve+(Ue=Q-me)*Ue}function Lt(ye,Q,ee,me){var Se={id:ye===void 0?null:ye,type:Q,geometry:ee,tags:me,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ke){var Ve=ke.geometry,Ue=ke.type;if(Ue==="Point"||Ue==="MultiPoint"||Ue==="LineString")dt(ke,Ve);else if(Ue==="Polygon"||Ue==="MultiLineString")for(var Oe=0;Oe<Ve.length;Oe++)dt(ke,Ve[Oe]);else if(Ue==="MultiPolygon")for(Oe=0;Oe<Ve.length;Oe++)for(var Xe=0;Xe<Ve[Oe].length;Xe++)dt(ke,Ve[Oe][Xe])}(Se),Se}function dt(ye,Q){for(var ee=0;ee<Q.length;ee+=3)ye.minX=Math.min(ye.minX,Q[ee]),ye.minY=Math.min(ye.minY,Q[ee+1]),ye.maxX=Math.max(ye.maxX,Q[ee]),ye.maxY=Math.max(ye.maxY,Q[ee+1])}function pr(ye,Q,ee,me){if(Q.geometry){var Se=Q.geometry.coordinates,ke=Q.geometry.type,Ve=Math.pow(ee.tolerance/((1<<ee.maxZoom)*ee.extent),2),Ue=[],Oe=Q.id;if(ee.promoteId?Oe=Q.properties[ee.promoteId]:ee.generateId&&(Oe=me||0),ke==="Point")_r(Se,Ue);else if(ke==="MultiPoint")for(var Xe=0;Xe<Se.length;Xe++)_r(Se[Xe],Ue);else if(ke==="LineString")hr(Se,Ue,Ve,!1);else if(ke==="MultiLineString"){if(ee.lineMetrics){for(Xe=0;Xe<Se.length;Xe++)hr(Se[Xe],Ue=[],Ve,!1),ye.push(Lt(Oe,"LineString",Ue,Q.properties));return}Tr(Se,Ue,Ve,!1)}else if(ke==="Polygon")Tr(Se,Ue,Ve,!0);else{if(ke!=="MultiPolygon"){if(ke==="GeometryCollection"){for(Xe=0;Xe<Q.geometry.geometries.length;Xe++)pr(ye,{id:Oe,geometry:Q.geometry.geometries[Xe],properties:Q.properties},ee,me);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Xe=0;Xe<Se.length;Xe++){var bt=[];Tr(Se[Xe],bt,Ve,!0),Ue.push(bt)}}ye.push(Lt(Oe,ke,Ue,Q.properties))}}function _r(ye,Q){Q.push(kn(ye[0])),Q.push(Gn(ye[1])),Q.push(0)}function hr(ye,Q,ee,me){for(var Se,ke,Ve=0,Ue=0;Ue<ye.length;Ue++){var Oe=kn(ye[Ue][0]),Xe=Gn(ye[Ue][1]);Q.push(Oe),Q.push(Xe),Q.push(0),Ue>0&&(Ve+=me?(Se*Xe-Oe*ke)/2:Math.sqrt(Math.pow(Oe-Se,2)+Math.pow(Xe-ke,2))),Se=Oe,ke=Xe}var bt=Q.length-3;Q[2]=1,zt(Q,0,bt,ee),Q[bt+2]=1,Q.size=Math.abs(Ve),Q.start=0,Q.end=Q.size}function Tr(ye,Q,ee,me){for(var Se=0;Se<ye.length;Se++){var ke=[];hr(ye[Se],ke,ee,me),Q.push(ke)}}function kn(ye){return ye/360+.5}function Gn(ye){var Q=Math.sin(ye*Math.PI/180),ee=.5-.25*Math.log((1+Q)/(1-Q))/Math.PI;return ee<0?0:ee>1?1:ee}function vn(ye,Q,ee,me,Se,ke,Ve,Ue){if(me/=Q,ke>=(ee/=Q)&&Ve<me)return ye;if(Ve<ee||ke>=me)return null;for(var Oe=[],Xe=0;Xe<ye.length;Xe++){var bt=ye[Xe],St=bt.geometry,le=bt.type,Ie=Se===0?bt.minX:bt.minY,je=Se===0?bt.maxX:bt.maxY;if(Ie>=ee&&je<me)Oe.push(bt);else if(!(je<ee||Ie>=me)){var et=[];if(le==="Point"||le==="MultiPoint")po(St,et,ee,me,Se);else if(le==="LineString")pi(St,et,ee,me,Se,!1,Ue.lineMetrics);else if(le==="MultiLineString")Bi(St,et,ee,me,Se,!1);else if(le==="Polygon")Bi(St,et,ee,me,Se,!0);else if(le==="MultiPolygon")for(var ht=0;ht<St.length;ht++){var Et=[];Bi(St[ht],Et,ee,me,Se,!0),Et.length&&et.push(Et)}if(et.length){if(Ue.lineMetrics&&le==="LineString"){for(ht=0;ht<et.length;ht++)Oe.push(Lt(bt.id,le,et[ht],bt.tags));continue}le!=="LineString"&&le!=="MultiLineString"||(et.length===1?(le="LineString",et=et[0]):le="MultiLineString"),le!=="Point"&&le!=="MultiPoint"||(le=et.length===3?"Point":"MultiPoint"),Oe.push(Lt(bt.id,le,et,bt.tags))}}}return Oe.length?Oe:null}function po(ye,Q,ee,me,Se){for(var ke=0;ke<ye.length;ke+=3){var Ve=ye[ke+Se];Ve>=ee&&Ve<=me&&(Q.push(ye[ke]),Q.push(ye[ke+1]),Q.push(ye[ke+2]))}}function pi(ye,Q,ee,me,Se,ke,Ve){for(var Ue,Oe,Xe=Pi(ye),bt=Se===0?to:Ds,St=ye.start,le=0;le<ye.length-3;le+=3){var Ie=ye[le],je=ye[le+1],et=ye[le+2],ht=ye[le+3],Et=ye[le+4],Nt=Se===0?Ie:je,kt=Se===0?ht:Et,Ft=!1;Ve&&(Ue=Math.sqrt(Math.pow(Ie-ht,2)+Math.pow(je-Et,2))),Nt<ee?kt>ee&&(Oe=bt(Xe,Ie,je,ht,Et,ee),Ve&&(Xe.start=St+Ue*Oe)):Nt>me?kt<me&&(Oe=bt(Xe,Ie,je,ht,Et,me),Ve&&(Xe.start=St+Ue*Oe)):ii(Xe,Ie,je,et),kt<ee&&Nt>=ee&&(Oe=bt(Xe,Ie,je,ht,Et,ee),Ft=!0),kt>me&&Nt<=me&&(Oe=bt(Xe,Ie,je,ht,Et,me),Ft=!0),!ke&&Ft&&(Ve&&(Xe.end=St+Ue*Oe),Q.push(Xe),Xe=Pi(ye)),Ve&&(St+=Ue)}var Ot=ye.length-3;Ie=ye[Ot],je=ye[Ot+1],et=ye[Ot+2],(Nt=Se===0?Ie:je)>=ee&&Nt<=me&&ii(Xe,Ie,je,et),Ot=Xe.length-3,ke&&Ot>=3&&(Xe[Ot]!==Xe[0]||Xe[Ot+1]!==Xe[1])&&ii(Xe,Xe[0],Xe[1],Xe[2]),Xe.length&&Q.push(Xe)}function Pi(ye){var Q=[];return Q.size=ye.size,Q.start=ye.start,Q.end=ye.end,Q}function Bi(ye,Q,ee,me,Se,ke){for(var Ve=0;Ve<ye.length;Ve++)pi(ye[Ve],Q,ee,me,Se,ke,!1)}function ii(ye,Q,ee,me){ye.push(Q),ye.push(ee),ye.push(me)}function to(ye,Q,ee,me,Se,ke){var Ve=(ke-Q)/(me-Q);return ye.push(ke),ye.push(ee+(Se-ee)*Ve),ye.push(1),Ve}function Ds(ye,Q,ee,me,Se,ke){var Ve=(ke-ee)/(Se-ee);return ye.push(Q+(me-Q)*Ve),ye.push(ke),ye.push(1),Ve}function mi(ye,Q){for(var ee=[],me=0;me<ye.length;me++){var Se,ke=ye[me],Ve=ke.type;if(Ve==="Point"||Ve==="MultiPoint"||Ve==="LineString")Se=oi(ke.geometry,Q);else if(Ve==="MultiLineString"||Ve==="Polygon"){Se=[];for(var Ue=0;Ue<ke.geometry.length;Ue++)Se.push(oi(ke.geometry[Ue],Q))}else if(Ve==="MultiPolygon")for(Se=[],Ue=0;Ue<ke.geometry.length;Ue++){for(var Oe=[],Xe=0;Xe<ke.geometry[Ue].length;Xe++)Oe.push(oi(ke.geometry[Ue][Xe],Q));Se.push(Oe)}ee.push(Lt(ke.id,Ve,Se,ke.tags))}return ee}function oi(ye,Q){var ee=[];ee.size=ye.size,ye.start!==void 0&&(ee.start=ye.start,ee.end=ye.end);for(var me=0;me<ye.length;me+=3)ee.push(ye[me]+Q,ye[me+1],ye[me+2]);return ee}function Ai(ye,Q){if(ye.transformed)return ye;var ee,me,Se,ke=1<<ye.z,Ve=ye.x,Ue=ye.y;for(ee=0;ee<ye.features.length;ee++){var Oe=ye.features[ee],Xe=Oe.geometry,bt=Oe.type;if(Oe.geometry=[],bt===1)for(me=0;me<Xe.length;me+=2)Oe.geometry.push(ra(Xe[me],Xe[me+1],Q,ke,Ve,Ue));else for(me=0;me<Xe.length;me++){var St=[];for(Se=0;Se<Xe[me].length;Se+=2)St.push(ra(Xe[me][Se],Xe[me][Se+1],Q,ke,Ve,Ue));Oe.geometry.push(St)}}return ye.transformed=!0,ye}function ra(ye,Q,ee,me,Se,ke){return[Math.round(ee*(ye*me-Se)),Math.round(ee*(Q*me-ke))]}function Lo(ye,Q,ee,me,Se){for(var ke=Q===Se.maxZoom?0:Se.tolerance/((1<<Q)*Se.extent),Ve={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ee,y:me,z:Q,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ue=0;Ue<ye.length;Ue++){Ve.numFeatures++,Ls(Ve,ye[Ue],ke,Se);var Oe=ye[Ue].minX,Xe=ye[Ue].minY,bt=ye[Ue].maxX,St=ye[Ue].maxY;Oe<Ve.minX&&(Ve.minX=Oe),Xe<Ve.minY&&(Ve.minY=Xe),bt>Ve.maxX&&(Ve.maxX=bt),St>Ve.maxY&&(Ve.maxY=St)}return Ve}function Ls(ye,Q,ee,me){var Se=Q.geometry,ke=Q.type,Ve=[];if(ke==="Point"||ke==="MultiPoint")for(var Ue=0;Ue<Se.length;Ue+=3)Ve.push(Se[Ue]),Ve.push(Se[Ue+1]),ye.numPoints++,ye.numSimplified++;else if(ke==="LineString")gi(Ve,Se,ye,ee,!1,!1);else if(ke==="MultiLineString"||ke==="Polygon")for(Ue=0;Ue<Se.length;Ue++)gi(Ve,Se[Ue],ye,ee,ke==="Polygon",Ue===0);else if(ke==="MultiPolygon")for(var Oe=0;Oe<Se.length;Oe++){var Xe=Se[Oe];for(Ue=0;Ue<Xe.length;Ue++)gi(Ve,Xe[Ue],ye,ee,!0,Ue===0)}if(Ve.length){var bt=Q.tags||null;if(ke==="LineString"&&me.lineMetrics){for(var St in bt={},Q.tags)bt[St]=Q.tags[St];bt.mapbox_clip_start=Se.start/Se.size,bt.mapbox_clip_end=Se.end/Se.size}var le={geometry:Ve,type:ke==="Polygon"||ke==="MultiPolygon"?3:ke==="LineString"||ke==="MultiLineString"?2:1,tags:bt};Q.id!==null&&(le.id=Q.id),ye.features.push(le)}}function gi(ye,Q,ee,me,Se,ke){var Ve=me*me;if(me>0&&Q.size<(Se?Ve:me))ee.numPoints+=Q.length/3;else{for(var Ue=[],Oe=0;Oe<Q.length;Oe+=3)(me===0||Q[Oe+2]>Ve)&&(ee.numSimplified++,Ue.push(Q[Oe]),Ue.push(Q[Oe+1])),ee.numPoints++;Se&&function(Xe,bt){for(var St=0,le=0,Ie=Xe.length,je=Ie-2;le<Ie;je=le,le+=2)St+=(Xe[le]-Xe[je])*(Xe[le+1]+Xe[je+1]);if(St>0===bt)for(le=0,Ie=Xe.length;le<Ie/2;le+=2){var et=Xe[le],ht=Xe[le+1];Xe[le]=Xe[Ie-2-le],Xe[le+1]=Xe[Ie-1-le],Xe[Ie-2-le]=et,Xe[Ie-1-le]=ht}}(Ue,ke),ye.push(Ue)}}function zo(ye,Q){var ee=(Q=this.options=function(Se,ke){for(var Ve in ke)Se[Ve]=ke[Ve];return Se}(Object.create(this.options),Q)).debug;if(ee&&console.time("preprocess data"),Q.maxZoom<0||Q.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Q.promoteId&&Q.generateId)throw new Error("promoteId and generateId cannot be used together.");var me=function(Se,ke){var Ve=[];if(Se.type==="FeatureCollection")for(var Ue=0;Ue<Se.features.length;Ue++)pr(Ve,Se.features[Ue],ke,Ue);else pr(Ve,Se.type==="Feature"?Se:{geometry:Se},ke);return Ve}(ye,Q);this.tiles={},this.tileCoords=[],ee&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Q.indexMaxZoom,Q.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),me=function(Se,ke){var Ve=ke.buffer/ke.extent,Ue=Se,Oe=vn(Se,1,-1-Ve,Ve,0,-1,2,ke),Xe=vn(Se,1,1-Ve,2+Ve,0,-1,2,ke);return(Oe||Xe)&&(Ue=vn(Se,1,-Ve,1+Ve,0,-1,2,ke)||[],Oe&&(Ue=mi(Oe,1).concat(Ue)),Xe&&(Ue=Ue.concat(mi(Xe,-1)))),Ue}(me,Q),me.length&&this.splitTile(me,0,0,0),ee&&(me.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function na(ye,Q,ee){return 32*((1<<ye)*ee+Q)+ye}function ia(ye,Q){const ee=ye.tileID.canonical;if(!this._geoJSONIndex)return Q(null,null);const me=this._geoJSONIndex.getTile(ee.z,ee.x,ee.y);if(!me)return Q(null,null);const Se=new class{constructor(Ve){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.EXTENT,this.length=Ve.length,this._features=Ve}feature(Ve){return new class{constructor(Ue){this._feature=Ue,this.extent=o.EXTENT,this.type=Ue.type,this.properties=Ue.tags,"id"in Ue&&!isNaN(Ue.id)&&(this.id=parseInt(Ue.id,10))}loadGeometry(){if(this._feature.type===1){const Ue=[];for(const Oe of this._feature.geometry)Ue.push([new o.Point(Oe[0],Oe[1])]);return Ue}{const Ue=[];for(const Oe of this._feature.geometry){const Xe=[];for(const bt of Oe)Xe.push(new o.Point(bt[0],bt[1]));Ue.push(Xe)}return Ue}}toGeoJSON(Ue,Oe,Xe){return j.call(this,Ue,Oe,Xe)}}(this._features[Ve])}}(me.features);let ke=Ce(Se);ke.byteOffset===0&&ke.byteLength===ke.buffer.byteLength||(ke=new Uint8Array(ke)),Q(null,{vectorTile:Se,rawData:ke.buffer})}zo.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},zo.prototype.splitTile=function(ye,Q,ee,me,Se,ke,Ve){for(var Ue=[ye,Q,ee,me],Oe=this.options,Xe=Oe.debug;Ue.length;){me=Ue.pop(),ee=Ue.pop(),Q=Ue.pop(),ye=Ue.pop();var bt=1<<Q,St=na(Q,ee,me),le=this.tiles[St];if(!le&&(Xe>1&&console.time("creation"),le=this.tiles[St]=Lo(ye,Q,ee,me,Oe),this.tileCoords.push({z:Q,x:ee,y:me}),Xe)){Xe>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Q,ee,me,le.numFeatures,le.numPoints,le.numSimplified),console.timeEnd("creation"));var Ie="z"+Q;this.stats[Ie]=(this.stats[Ie]||0)+1,this.total++}if(le.source=ye,Se){if(Q===Oe.maxZoom||Q===Se)continue;var je=1<<Se-Q;if(ee!==Math.floor(ke/je)||me!==Math.floor(Ve/je))continue}else if(Q===Oe.indexMaxZoom||le.numPoints<=Oe.indexMaxPoints)continue;if(le.source=null,ye.length!==0){Xe>1&&console.time("clipping");var et,ht,Et,Nt,kt,Ft,Ot=.5*Oe.buffer/Oe.extent,Vt=.5-Ot,Jt=.5+Ot,nr=1+Ot;et=ht=Et=Nt=null,kt=vn(ye,bt,ee-Ot,ee+Jt,0,le.minX,le.maxX,Oe),Ft=vn(ye,bt,ee+Vt,ee+nr,0,le.minX,le.maxX,Oe),ye=null,kt&&(et=vn(kt,bt,me-Ot,me+Jt,1,le.minY,le.maxY,Oe),ht=vn(kt,bt,me+Vt,me+nr,1,le.minY,le.maxY,Oe),kt=null),Ft&&(Et=vn(Ft,bt,me-Ot,me+Jt,1,le.minY,le.maxY,Oe),Nt=vn(Ft,bt,me+Vt,me+nr,1,le.minY,le.maxY,Oe),Ft=null),Xe>1&&console.timeEnd("clipping"),Ue.push(et||[],Q+1,2*ee,2*me),Ue.push(ht||[],Q+1,2*ee,2*me+1),Ue.push(Et||[],Q+1,2*ee+1,2*me),Ue.push(Nt||[],Q+1,2*ee+1,2*me+1)}}},zo.prototype.getTile=function(ye,Q,ee){var me=this.options,Se=me.extent,ke=me.debug;if(ye<0||ye>24)return null;var Ve=1<<ye,Ue=na(ye,Q=(Q%Ve+Ve)%Ve,ee);if(this.tiles[Ue])return Ai(this.tiles[Ue],Se);ke>1&&console.log("drilling down to z%d-%d-%d",ye,Q,ee);for(var Oe,Xe=ye,bt=Q,St=ee;!Oe&&Xe>0;)Xe--,bt=Math.floor(bt/2),St=Math.floor(St/2),Oe=this.tiles[na(Xe,bt,St)];return Oe&&Oe.source?(ke>1&&console.log("found parent tile z%d-%d-%d",Xe,bt,St),ke>1&&console.time("drilling down"),this.splitTile(Oe.source,Xe,bt,St,ye,Q,ee),ke>1&&console.timeEnd("drilling down"),this.tiles[Ue]?Ai(this.tiles[Ue],Se):null):null};class ls extends o.VectorTileWorkerSource{constructor(Q,ee,me,Se,ke){super(Q,ee,me,Se,ia),ke&&(this.loadGeoJSON=ke)}loadData(Q,ee){const me=Q&&Q.request,Se=me&&me.collectResourceTiming;this.loadGeoJSON(Q,(ke,Ve)=>{if(ke||!Ve)return ee(ke);if(typeof Ve!="object")return ee(new Error(`Input data given to '${Q.source}' is not a valid GeoJSON object.`));{F(Ve,!0);try{if(Q.filter){const Oe=o.createExpression(Q.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Oe.result==="error")throw new Error(Oe.value.map(bt=>`${bt.key}: ${bt.message}`).join(", "));Ve={type:"FeatureCollection",features:Ve.features.filter(bt=>Oe.value.evaluate({zoom:0},bt))}}this._geoJSONIndex=Q.cluster?new Tt(function({superclusterOptions:Oe,clusterProperties:Xe}){if(!Xe||!Oe)return Oe;const bt={},St={},le={accumulated:null,zoom:0},Ie={properties:null},je=Object.keys(Xe);for(const et of je){const[ht,Et]=Xe[et],Nt=o.createExpression(Et),kt=o.createExpression(typeof ht=="string"?[ht,["accumulated"],["get",et]]:ht);bt[et]=Nt.value,St[et]=kt.value}return Oe.map=et=>{Ie.properties=et;const ht={};for(const Et of je)ht[Et]=bt[Et].evaluate(le,Ie);return ht},Oe.reduce=(et,ht)=>{Ie.properties=ht;for(const Et of je)le.accumulated=et[Et],et[Et]=St[Et].evaluate(le,Ie)},Oe}(Q)).load(Ve.features):function(Oe,Xe){return new zo(Oe,Xe)}(Ve,Q.geojsonVtOptions)}catch(Oe){return ee(Oe)}this.loaded={};const Ue={};if(Se){const Oe=o.getPerformanceMeasurement(me);Oe&&(Ue.resourceTiming={},Ue.resourceTiming[Q.source]=JSON.parse(JSON.stringify(Oe)))}ee(null,Ue)}})}reloadTile(Q,ee){const me=this.loaded;return me&&me[Q.uid]?super.reloadTile(Q,ee):this.loadTile(Q,ee)}loadGeoJSON(Q,ee){if(Q.request)o.getJSON(Q.request,ee);else{if(typeof Q.data!="string")return ee(new Error(`Input data given to '${Q.source}' is not a valid GeoJSON object.`));try{return ee(null,JSON.parse(Q.data))}catch{return ee(new Error(`Input data given to '${Q.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(Q,ee){try{ee(null,this._geoJSONIndex.getClusterExpansionZoom(Q.clusterId))}catch(me){ee(me)}}getClusterChildren(Q,ee){try{ee(null,this._geoJSONIndex.getChildren(Q.clusterId))}catch(me){ee(me)}}getClusterLeaves(Q,ee){try{ee(null,this._geoJSONIndex.getLeaves(Q.clusterId,Q.limit,Q.offset))}catch(me){ee(me)}}}class zs{constructor(Q){this.self=Q,this.actor=new o.Actor(Q,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=o.getProjection({name:"mercator"}),this.workerSourceTypes={vector:o.VectorTileWorkerSource,geojson:ls},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(ee,me)=>{if(this.workerSourceTypes[ee])throw new Error(`Worker source with name "${ee}" already registered.`);this.workerSourceTypes[ee]=me},this.self.registerRTLTextPlugin=ee=>{if(o.plugin.isParsed())throw new Error("RTL text plugin already registered.");o.plugin.applyArabicShaping=ee.applyArabicShaping,o.plugin.processBidirectionalText=ee.processBidirectionalText,o.plugin.processStyledBidirectionalText=ee.processStyledBidirectionalText}}clearCaches(Q,ee,me){delete this.layerIndexes[Q],delete this.availableImages[Q],delete this.workerSources[Q],delete this.demWorkerSources[Q],me()}checkIfReady(Q,ee,me){me()}setReferrer(Q,ee){this.referrer=ee}spriteLoaded(Q,ee){this.isSpriteLoaded[Q]=ee;for(const me in this.workerSources[Q]){const Se=this.workerSources[Q][me];for(const ke in Se)Se[ke]instanceof o.VectorTileWorkerSource&&(Se[ke].isSpriteLoaded=ee,Se[ke].fire(new o.Event("isSpriteLoaded")))}}setImages(Q,ee,me){this.availableImages[Q]=ee;for(const Se in this.workerSources[Q]){const ke=this.workerSources[Q][Se];for(const Ve in ke)ke[Ve].availableImages=ee}me()}enableTerrain(Q,ee,me){this.terrain=ee,me()}setProjection(Q,ee){this.projections[Q]=o.getProjection(ee)}setLayers(Q,ee,me){this.getLayerIndex(Q).replace(ee),me()}updateLayers(Q,ee,me){this.getLayerIndex(Q).update(ee.layers,ee.removedIds),me()}loadTile(Q,ee,me){const Se=this.enableTerrain?o.extend({enableTerrain:this.terrain},ee):ee;Se.projection=this.projections[Q]||this.defaultProjection,this.getWorkerSource(Q,ee.type,ee.source).loadTile(Se,me)}loadDEMTile(Q,ee,me){const Se=this.enableTerrain?o.extend({buildQuadTree:this.terrain},ee):ee;this.getDEMWorkerSource(Q,ee.source).loadTile(Se,me)}reloadTile(Q,ee,me){const Se=this.enableTerrain?o.extend({enableTerrain:this.terrain},ee):ee;Se.projection=this.projections[Q]||this.defaultProjection,this.getWorkerSource(Q,ee.type,ee.source).reloadTile(Se,me)}abortTile(Q,ee,me){this.getWorkerSource(Q,ee.type,ee.source).abortTile(ee,me)}removeTile(Q,ee,me){this.getWorkerSource(Q,ee.type,ee.source).removeTile(ee,me)}removeSource(Q,ee,me){if(!this.workerSources[Q]||!this.workerSources[Q][ee.type]||!this.workerSources[Q][ee.type][ee.source])return;const Se=this.workerSources[Q][ee.type][ee.source];delete this.workerSources[Q][ee.type][ee.source],Se.removeSource!==void 0?Se.removeSource(ee,me):me()}loadWorkerSource(Q,ee,me){try{this.self.importScripts(ee.url),me()}catch(Se){me(Se.toString())}}syncRTLPluginState(Q,ee,me){try{o.plugin.setState(ee);const Se=o.plugin.getPluginURL();if(o.plugin.isLoaded()&&!o.plugin.isParsed()&&Se!=null){this.self.importScripts(Se);const ke=o.plugin.isParsed();me(ke?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Se}`),ke)}}catch(Se){me(Se.toString())}}getAvailableImages(Q){let ee=this.availableImages[Q];return ee||(ee=[]),ee}getLayerIndex(Q){let ee=this.layerIndexes[Q];return ee||(ee=this.layerIndexes[Q]=new P),ee}getWorkerSource(Q,ee,me){if(this.workerSources[Q]||(this.workerSources[Q]={}),this.workerSources[Q][ee]||(this.workerSources[Q][ee]={}),!this.workerSources[Q][ee][me]){const Se={send:(ke,Ve,Ue,Oe,Xe,bt)=>{this.actor.send(ke,Ve,Ue,Q,Xe,bt)},scheduler:this.actor.scheduler};this.workerSources[Q][ee][me]=new this.workerSourceTypes[ee](Se,this.getLayerIndex(Q),this.getAvailableImages(Q),this.isSpriteLoaded[Q])}return this.workerSources[Q][ee][me]}getDEMWorkerSource(Q,ee){return this.demWorkerSources[Q]||(this.demWorkerSources[Q]={}),this.demWorkerSources[Q][ee]||(this.demWorkerSources[Q][ee]=new S),this.demWorkerSources[Q][ee]}enforceCacheSizeLimit(Q,ee){o.enforceCacheSizeLimit(ee)}getWorkerPerformanceMetrics(Q,ee,me){me(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new zs(self)),zs}),h(["./shared"],function(o){function _(m,l){if(Array.isArray(m)){if(!Array.isArray(l)||m.length!==l.length)return!1;for(let f=0;f<m.length;f++)if(!_(m[f],l[f]))return!1;return!0}if(typeof m=="object"&&m!==null&&l!==null){if(typeof l!="object"||Object.keys(m).length!==Object.keys(l).length)return!1;for(const f in m)if(!_(m[f],l[f]))return!1;return!0}return m===l}var b=P;function P(m){return!function(l){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var y,x,T=new Blob([""],{type:"text/javascript"}),M=URL.createObjectURL(T);try{x=new Worker(M),y=!0}catch{y=!1}return x&&x.terminate(),URL.revokeObjectURL(M),y}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var y=document.createElement("canvas");y.width=y.height=1;var x=y.getContext("2d");if(!x)return!1;var T=x.getImageData(0,0,1,1);return T&&T.width===y.width}()?(S[f=l&&l.failIfMajorPerformanceCaveat]===void 0&&(S[f]=function(y){var x,T=function(M){var I=document.createElement("canvas"),k=Object.create(P.webGLContextAttributes);return k.failIfMajorPerformanceCaveat=M,I.getContext("webgl",k)||I.getContext("experimental-webgl",k)}(y);if(!T)return!1;try{x=T.createShader(T.VERTEX_SHADER)}catch{return!1}return!(!x||T.isContextLost())&&(T.shaderSource(x,"void main() {}"),T.compileShader(x),T.getShaderParameter(x,T.COMPILE_STATUS)===!0)}(f)),S[f]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var f}(m)}var S={};function C(m,l,f){const y=o.window.document.createElement(m);return l!==void 0&&(y.className=l),f&&f.appendChild(y),y}function L(m,l,f){const y=o.window.document.createElementNS("http://www.w3.org/2000/svg",m);for(const x of Object.keys(l))y.setAttributeNS(null,x,l[x]);return f&&f.appendChild(y),y}P.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const F=o.window.document&&o.window.document.documentElement.style,j=F&&F.userSelect!==void 0?"userSelect":"WebkitUserSelect";let G;function $(){F&&j&&(G=F[j],F[j]="none")}function N(){F&&j&&(F[j]=G)}function U(m){m.preventDefault(),m.stopPropagation(),o.window.removeEventListener("click",U,!0)}function J(){o.window.addEventListener("click",U,!0),o.window.setTimeout(()=>{o.window.removeEventListener("click",U,!0)},0)}function q(m,l){const f=m.getBoundingClientRect();return ue(m,f,l)}function Y(m,l){const f=m.getBoundingClientRect(),y=[];for(let x=0;x<l.length;x++)y.push(ue(m,f,l[x]));return y}function X(m){return o.window.InstallTrigger!==void 0&&m.button===2&&m.ctrlKey&&o.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:m.button}function ue(m,l,f){const y=m.offsetWidth===l.width?1:m.offsetWidth/l.width;return new o.Point((f.clientX-l.left)*y,(f.clientY-l.top)*y)}function oe(m,l){var f=l[0],y=l[1],x=l[2],T=l[3],M=f*T-x*y;return M?(m[0]=T*(M=1/M),m[1]=-y*M,m[2]=-x*M,m[3]=f*M,m):null}function Re(m){const{userImage:l}=m;return!!(l&&l.render&&l.render())&&(m.data.replace(new Uint8Array(l.data.buffer)),!0)}class ze extends o.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(l){if(this.loaded!==l&&(this.loaded=l,l)){for(const{ids:f,callback:y}of this.requestors)this._notify(f,y);this.requestors=[]}}hasImage(l){return!!this.getImage(l)}getImage(l){return this.images[l]}addImage(l,f){this._validate(l,f)&&(this.images[l]=f)}_validate(l,f){let y=!0;return this._validateStretch(f.stretchX,f.data&&f.data.width)||(this.fire(new o.ErrorEvent(new Error(`Image "${l}" has invalid "stretchX" value`))),y=!1),this._validateStretch(f.stretchY,f.data&&f.data.height)||(this.fire(new o.ErrorEvent(new Error(`Image "${l}" has invalid "stretchY" value`))),y=!1),this._validateContent(f.content,f)||(this.fire(new o.ErrorEvent(new Error(`Image "${l}" has invalid "content" value`))),y=!1),y}_validateStretch(l,f){if(!l)return!0;let y=0;for(const x of l){if(x[0]<y||x[1]<x[0]||f<x[1])return!1;y=x[1]}return!0}_validateContent(l,f){return!(l&&(l.length!==4||l[0]<0||f.data.width<l[0]||l[1]<0||f.data.height<l[1]||l[2]<0||f.data.width<l[2]||l[3]<0||f.data.height<l[3]||l[2]<l[0]||l[3]<l[1]))}updateImage(l,f){f.version=this.images[l].version+1,this.images[l]=f,this.updatedImages[l]=!0}removeImage(l){const f=this.images[l];delete this.images[l],delete this.patterns[l],f.userImage&&f.userImage.onRemove&&f.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(l,f){let y=!0;if(!this.isLoaded())for(const x of l)this.images[x]||(y=!1);this.isLoaded()||y?this._notify(l,f):this.requestors.push({ids:l,callback:f})}_notify(l,f){const y={};for(const x of l){this.images[x]||this.fire(new o.Event("styleimagemissing",{id:x}));const T=this.images[x];T?y[x]={data:T.data.clone(),pixelRatio:T.pixelRatio,sdf:T.sdf,version:T.version,stretchX:T.stretchX,stretchY:T.stretchY,content:T.content,hasRenderCallback:!!(T.userImage&&T.userImage.render)}:o.warnOnce(`Image "${x}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}f(null,y)}getPixelSize(){const{width:l,height:f}=this.atlasImage;return{width:l,height:f}}getPattern(l){const f=this.patterns[l],y=this.getImage(l);if(!y)return null;if(f&&f.position.version===y.version)return f.position;if(f)f.position.version=y.version;else{const x={w:y.data.width+2,h:y.data.height+2,x:0,y:0},T=new o.ImagePosition(x,y);this.patterns[l]={bin:x,position:T}}return this._updatePatternAtlas(),this.patterns[l].position}bind(l){const f=l.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new o.Texture(l,this.atlasImage,f.RGBA),this.atlasTexture&&this.atlasTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE)}_updatePatternAtlas(){const l=[];for(const T in this.patterns)l.push(this.patterns[T].bin);const{w:f,h:y}=o.potpack(l),x=this.atlasImage;x.resize({width:f||1,height:y||1});for(const T in this.patterns){const{bin:M}=this.patterns[T],I=M.x+1,k=M.y+1,B=this.images[T].data,R=B.width,H=B.height;o.RGBAImage.copy(B,x,{x:0,y:0},{x:I,y:k},{width:R,height:H}),o.RGBAImage.copy(B,x,{x:0,y:H-1},{x:I,y:k-1},{width:R,height:1}),o.RGBAImage.copy(B,x,{x:0,y:0},{x:I,y:k+H},{width:R,height:1}),o.RGBAImage.copy(B,x,{x:R-1,y:0},{x:I-1,y:k},{width:1,height:H}),o.RGBAImage.copy(B,x,{x:0,y:0},{x:I+R,y:k},{width:1,height:H})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(l){for(const f of l){if(this.callbackDispatchedThisFrame[f])continue;this.callbackDispatchedThisFrame[f]=!0;const y=this.images[f];Re(y)&&this.updateImage(f,y)}}}const De=new o.Properties({anchor:new o.DataConstantProperty(o.spec.light.anchor),position:new class{constructor(){this.specification=o.spec.light.position}possiblyEvaluate(m,l){return function([f,y,x]){const T=o.degToRad(y+90),M=o.degToRad(x);return{x:f*Math.cos(T)*Math.sin(M),y:f*Math.sin(T)*Math.sin(M),z:f*Math.cos(M),azimuthal:y,polar:x}}(m.expression.evaluate(l))}interpolate(m,l,f){return{x:o.number(m.x,l.x,f),y:o.number(m.y,l.y,f),z:o.number(m.z,l.z,f),azimuthal:o.number(m.azimuthal,l.azimuthal,f),polar:o.number(m.polar,l.polar,f)}}},color:new o.DataConstantProperty(o.spec.light.color),intensity:new o.DataConstantProperty(o.spec.light.intensity)});class Je extends o.Evented{constructor(l){super(),this._transitionable=new o.Transitionable(De),this.setLight(l),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(l,f={}){if(!this._validate(o.validateLight,l,f))for(const y in l){const x=l[y];o.endsWith(y,"-transition")?this._transitionable.setTransition(y.slice(0,-11),x):this._transitionable.setValue(y,x)}}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,f,y){return(!y||y.validate!==!1)&&o.emitValidationErrors(this,l.call(o.validateStyle,o.extend({value:f,style:{glyphs:!0,sprite:!0},styleSpec:o.spec})))}}const we=new o.Properties({source:new o.DataConstantProperty(o.spec.terrain.source),exaggeration:new o.DataConstantProperty(o.spec.terrain.exaggeration)});let ve=class extends o.Evented{constructor(m,l){super(),this._transitionable=new o.Transitionable(we),this.set(m),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=l}get(){return this._transitionable.serialize()}set(m){for(const l in m){const f=m[l];o.endsWith(l,"-transition")?this._transitionable.setTransition(l.slice(0,-11),f):this._transitionable.setValue(l,f)}}updateTransitions(m){this._transitioning=this._transitionable.transitioned(m,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(m){this.properties=this._transitioning.possiblyEvaluate(m)}};function Ce(m,l,f,y){const x=o.smoothstep(45,65,f),[T,M]=Le(m,y),I=o.length(l);let k=1-Math.min(1,Math.exp((I-T)/(M-T)*-6));return k*=k*k,k=Math.min(1,1.00747*k),k*x*m.alpha}function Le(m,l){const f=.5/Math.tan(.5*l);return[m.range[0]+f,m.range[1]+f]}const ge=new o.Properties({range:new o.DataConstantProperty(o.spec.fog.range),color:new o.DataConstantProperty(o.spec.fog.color),"high-color":new o.DataConstantProperty(o.spec.fog["high-color"]),"space-color":new o.DataConstantProperty(o.spec.fog["space-color"]),"horizon-blend":new o.DataConstantProperty(o.spec.fog["horizon-blend"]),"star-intensity":new o.DataConstantProperty(o.spec.fog["star-intensity"])});class $e extends o.Evented{constructor(l,f){super(),this._transitionable=new o.Transitionable(ge),this.set(l),this._transitioning=this._transitionable.untransitioned(),this._transform=f}get state(){const l=this._transform,f=l.projection.name==="globe",y=o.globeToMercatorTransition(l.zoom),x=this.properties.get("range"),T=[.5,3];return{range:f?[o.number(T[0],x[0],y),o.number(T[1],x[1],y)]:x,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(l,f={}){if(!this._validate(o.validateFog,l,f)){for(const y of Object.keys(o.spec.fog))l&&l[y]===void 0&&(l[y]=o.spec.fog[y].default);for(const y in l){const x=l[y];o.endsWith(y,"-transition")?this._transitionable.setTransition(y.slice(0,-11),x):this._transitionable.setValue(y,x)}}}getOpacity(l){if(!this._transform.projection.supportsFog)return 0;const f=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:o.smoothstep(45,65,l))*f.a}getOpacityAtLatLng(l,f){return this._transform.projection.supportsFog?function(y,x,T){const M=o.MercatorCoordinate.fromLngLat(x),I=T.elevation?T.elevation.getAtPointOrZero(M):0,k=[M.x,M.y,I];return o.transformMat4(k,k,T.mercatorFogMatrix),Ce(y,k,T.pitch,T._fov)}(this.state,l,f):0}getFovAdjustedRange(l){return this._transform.projection.supportsFog?Le(this.state,l):[0,1]}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,f,y){return(!y||y.validate!==!1)&&o.emitValidationErrors(this,l.call(o.validateStyle,o.extend({value:f,style:{glyphs:!0,sprite:!0},styleSpec:o.spec})))}}class rt{constructor(l,f){this.workerPool=l,this.actors=[],this.currentActor=0,this.id=o.uniqueId();const y=this.workerPool.acquire(this.id);for(let x=0;x<y.length;x++){const T=new rt.Actor(y[x],f,this.id);T.name=`Worker ${x}`,this.actors.push(T)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(l,f,y){o.asyncAll(this.actors,(x,T)=>{x.send(l,f,T)},y=y||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(l=>{l.remove()}),this.actors=[],this.workerPool.release(this.id)}}function ft(m,l,f){return l*(o.EXTENT/(m.tileSize*Math.pow(2,f-m.tileID.overscaledZ)))}rt.Actor=o.Actor;class lt{constructor(l,f,y,x){this.screenBounds=l,this.cameraPoint=f,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=y,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,x)}static createFromScreenPoints(l,f){let y,x;if(l instanceof o.Point||typeof l[0]=="number"){const T=o.Point.convert(l);y=[T],x=f.isPointAboveHorizon(T)}else{const T=o.Point.convert(l[0]),M=o.Point.convert(l[1]);y=[T,M],x=o.polygonizeBounds(T,M).every(I=>f.isPointAboveHorizon(I))}return new lt(y,f.getCameraPoint(),x,f)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(l){return o.polygonizeBounds(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],l)}bufferedCameraGeometry(l){const f=this.screenBounds[0],y=this.screenBounds.length===1?this.screenBounds[0].add(new o.Point(1,1)):this.screenBounds[1],x=o.polygonizeBounds(f,y,0,!1);return this.cameraPoint.y>y.y&&(this.cameraPoint.x>f.x&&this.cameraPoint.x<y.x?x.splice(3,0,this.cameraPoint):this.cameraPoint.x>=y.x?x[2]=this.cameraPoint:this.cameraPoint.x<=f.x&&(x[3]=this.cameraPoint)),o.bufferConvexPolygon(x,l)}bufferedCameraGeometryGlobe(l){const f=this.screenBounds[0],y=this.screenBounds.length===1?this.screenBounds[0].add(new o.Point(1,1)):this.screenBounds[1],x=o.polygonizeBounds(f,y,l),T=this.cameraPoint.clone();switch(3*((T.y>f.y)+(T.y>y.y))+((T.x>f.x)+(T.x>y.x))){case 0:x[0]=T,x[4]=T.clone();break;case 1:x.splice(1,0,T);break;case 2:x[1]=T;break;case 3:x.splice(4,0,T);break;case 5:x.splice(2,0,T);break;case 6:x[3]=T;break;case 7:x.splice(3,0,T);break;case 8:x[2]=T}return x}containsTile(l,f,y,x=0){const T=l.queryPadding/f._pixelsPerMercatorPixel+1,M=y?this._bufferedCameraMercator(T,f):this._bufferedScreenMercator(T,f);let I=l.tileID.wrap+(M.unwrapped?x:0);const k=M.polygon.map(ce=>o.getTilePoint(l.tileTransform,ce,I));if(!o.polygonIntersectsBox(k,0,0,o.EXTENT,o.EXTENT))return;I=l.tileID.wrap+(this.screenGeometryMercator.unwrapped?x:0);const B=this.screenGeometryMercator.polygon.map(ce=>o.getTileVec3(l.tileTransform,ce,I)),R=B.map(ce=>new o.Point(ce[0],ce[1])),H=f.getFreeCameraOptions().position||new o.MercatorCoordinate(0,0,0),te=o.getTileVec3(l.tileTransform,H,I),ie=B.map(ce=>{const Z=o.sub(ce,ce,te);return o.normalize(Z,Z),new o.Ray(te,Z)}),se=ft(l,1,f.zoom)*f._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:R,tilespaceRays:ie,bufferedTilespaceGeometry:k,bufferedTilespaceBounds:(ae=o.getBounds(k),ae.min.x=o.clamp(ae.min.x,0,o.EXTENT),ae.min.y=o.clamp(ae.min.y,0,o.EXTENT),ae.max.x=o.clamp(ae.max.x,0,o.EXTENT),ae.max.y=o.clamp(ae.max.y,0,o.EXTENT),ae),tile:l,tileID:l.tileID,pixelToTileUnitsFactor:se};var ae}_bufferedScreenMercator(l,f){const y=fr(l);if(this._screenRaycastCache[y])return this._screenRaycastCache[y];{let x;return x=f.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(l),f):{polygon:this.bufferedScreenGeometry(l).map(T=>f.pointCoordinate3D(T)),unwrapped:!0},this._screenRaycastCache[y]=x,x}}_bufferedCameraMercator(l,f){const y=fr(l);if(this._cameraRaycastCache[y])return this._cameraRaycastCache[y];{let x;return x=f.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(l),f):{polygon:this.bufferedCameraGeometry(l).map(T=>f.pointCoordinate3D(T)),unwrapped:!0},this._cameraRaycastCache[y]=x,x}}_projectAndResample(l,f){const y=function(T,M){const I=o.multiply([],M.pixelMatrix,M.globeMatrix),k=[0,-o.GLOBE_RADIUS,0,1],B=[0,o.GLOBE_RADIUS,0,1],R=[0,0,0,1];o.transformMat4$1(k,k,I),o.transformMat4$1(B,B,I),o.transformMat4$1(R,R,I);const H=new o.Point(k[0]/k[3],k[1]/k[3]),te=new o.Point(B[0]/B[3],B[1]/B[3]),ie=o.polygonContainsPoint(T,H)&&k[3]<R[3],se=o.polygonContainsPoint(T,te)&&B[3]<R[3];if(!ie&&!se)return null;const ae=function(Ae,Fe,Be){for(let He=1;He<Ae.length;He++){const gt=qt(Fe.pointCoordinate3D(Ae[He-1]).x),Ge=qt(Fe.pointCoordinate3D(Ae[He]).x);if(Be<0){if(gt<Ge)return{idx:He,t:-gt/(Ge-1-gt)}}else if(Ge<gt)return{idx:He,t:(1-gt)/(Ge+1-gt)}}return null}(T,M,ie?-1:1);if(!ae)return null;const{idx:ce,t:Z}=ae;let ne=ce>1?Tt(T.slice(0,ce),M):[],de=ce<T.length?Tt(T.slice(ce),M):[];ne=ne.map(Ae=>new o.Point(qt(Ae.x),Ae.y)),de=de.map(Ae=>new o.Point(qt(Ae.x),Ae.y));const pe=[...ne];pe.length===0&&pe.push(de[de.length-1]);const Ee=o.number(pe[pe.length-1].y,(de.length===0?ne[0]:de[0]).y,Z);let Me;return Me=ie?[new o.Point(0,Ee),new o.Point(0,0),new o.Point(1,0),new o.Point(1,Ee)]:[new o.Point(1,Ee),new o.Point(1,1),new o.Point(0,1),new o.Point(0,Ee)],pe.push(...Me),de.length===0?pe.push(ne[0]):pe.push(...de),{polygon:pe.map(Ae=>new o.MercatorCoordinate(Ae.x,Ae.y)),unwrapped:!1}}(l,f);if(y)return y;const x=function(T,M){let I=!1,k=-1/0,B=0;for(let H=0;H<T.length-1;H++)T[H].x>k&&(k=T[H].x,B=H);for(let H=0;H<T.length-1;H++){const te=(B+H)%(T.length-1),ie=T[te],se=T[te+1];Math.abs(ie.x-se.x)>.5&&(ie.x<se.x?(ie.x+=1,te===0&&(T[T.length-1].x+=1)):(se.x+=1,te+1===T.length-1&&(T[0].x+=1)),I=!0)}const R=o.mercatorXfromLng(M.center.lng);return I&&R<Math.abs(R-1)&&T.forEach(H=>{H.x-=1}),{polygon:T,unwrapped:I}}(Tt(l,f).map(T=>new o.Point(qt(T.x),T.y)),f);return{polygon:x.polygon.map(T=>new o.MercatorCoordinate(T.x,T.y)),unwrapped:x.unwrapped}}}function Tt(m,l){return o.resample(m,f=>{const y=l.pointCoordinate3D(f);f.x=y.x,f.y=y.y},1/256)}function qt(m){return m<0?1+m%1:m%1}function fr(m){return 100*m|0}function br(m,l,f,y,x){const T=function(M,I){if(M)return x(M);if(I){m.url&&I.tiles&&m.tiles&&delete m.tiles;const k=o.pick(o.extend(I,m),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);I.vector_layers&&(k.vectorLayers=I.vector_layers,k.vectorLayerIds=k.vectorLayers.map(B=>B.id)),k.tiles=l.canonicalizeTileset(k,m.url),x(null,k)}};return m.url?o.getJSON(l.transformRequest(l.normalizeSourceURL(m.url,null,f,y),o.ResourceType.Source),T):o.exported.frame(()=>T(null,m))}class Mr{constructor(l,f,y){this.bounds=o.LngLatBounds.convert(this.validateBounds(l)),this.minzoom=f||0,this.maxzoom=y||24}validateBounds(l){return Array.isArray(l)&&l.length===4?[Math.max(-180,l[0]),Math.max(-90,l[1]),Math.min(180,l[2]),Math.min(90,l[3])]:[-180,-90,180,90]}contains(l){const f=Math.pow(2,l.z),y=Math.floor(o.mercatorXfromLng(this.bounds.getWest())*f),x=Math.floor(o.mercatorYfromLat(this.bounds.getNorth())*f),T=Math.ceil(o.mercatorXfromLng(this.bounds.getEast())*f),M=Math.ceil(o.mercatorYfromLat(this.bounds.getSouth())*f);return l.x>=y&&l.x<T&&l.y>=x&&l.y<M}}class nn{constructor(l,f,y){this.context=l;const x=l.gl;this.buffer=x.createBuffer(),this.dynamicDraw=!!y,this.context.unbindVAO(),l.bindElementBuffer.set(this.buffer),x.bufferData(x.ELEMENT_ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?x.DYNAMIC_DRAW:x.STATIC_DRAW),this.dynamicDraw||f.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(l){const f=this.context.gl;this.context.unbindVAO(),this.bind(),f.bufferSubData(f.ELEMENT_ARRAY_BUFFER,0,l.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const zt={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class rr{constructor(l,f,y,x){this.length=f.length,this.attributes=y,this.itemSize=f.bytesPerElement,this.dynamicDraw=x,this.context=l;const T=l.gl;this.buffer=T.createBuffer(),l.bindVertexBuffer.set(this.buffer),T.bufferData(T.ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?T.DYNAMIC_DRAW:T.STATIC_DRAW),this.dynamicDraw||f.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(l){const f=this.context.gl;this.bind(),f.bufferSubData(f.ARRAY_BUFFER,0,l.arrayBuffer)}enableAttributes(l,f){for(let y=0;y<this.attributes.length;y++){const x=f.attributes[this.attributes[y].name];x!==void 0&&l.enableVertexAttribArray(x)}}setVertexAttribPointers(l,f,y){for(let x=0;x<this.attributes.length;x++){const T=this.attributes[x],M=f.attributes[T.name];M!==void 0&&l.vertexAttribPointer(M,T.components,l[zt[T.type]],!1,this.itemSize,T.offset+this.itemSize*(y||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Lt{constructor(l){this.gl=l.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(l){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class dt extends Lt{getDefault(){return o.Color.transparent}set(l){const f=this.current;(l.r!==f.r||l.g!==f.g||l.b!==f.b||l.a!==f.a||this.dirty)&&(this.gl.clearColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class pr extends Lt{getDefault(){return 1}set(l){(l!==this.current||this.dirty)&&(this.gl.clearDepth(l),this.current=l,this.dirty=!1)}}class _r extends Lt{getDefault(){return 0}set(l){(l!==this.current||this.dirty)&&(this.gl.clearStencil(l),this.current=l,this.dirty=!1)}}class hr extends Lt{getDefault(){return[!0,!0,!0,!0]}set(l){const f=this.current;(l[0]!==f[0]||l[1]!==f[1]||l[2]!==f[2]||l[3]!==f[3]||this.dirty)&&(this.gl.colorMask(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class Tr extends Lt{getDefault(){return!0}set(l){(l!==this.current||this.dirty)&&(this.gl.depthMask(l),this.current=l,this.dirty=!1)}}class kn extends Lt{getDefault(){return 255}set(l){(l!==this.current||this.dirty)&&(this.gl.stencilMask(l),this.current=l,this.dirty=!1)}}class Gn extends Lt{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(l){const f=this.current;(l.func!==f.func||l.ref!==f.ref||l.mask!==f.mask||this.dirty)&&(this.gl.stencilFunc(l.func,l.ref,l.mask),this.current=l,this.dirty=!1)}}class vn extends Lt{getDefault(){const l=this.gl;return[l.KEEP,l.KEEP,l.KEEP]}set(l){const f=this.current;(l[0]!==f[0]||l[1]!==f[1]||l[2]!==f[2]||this.dirty)&&(this.gl.stencilOp(l[0],l[1],l[2]),this.current=l,this.dirty=!1)}}class po extends Lt{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;l?f.enable(f.STENCIL_TEST):f.disable(f.STENCIL_TEST),this.current=l,this.dirty=!1}}class pi extends Lt{getDefault(){return[0,1]}set(l){const f=this.current;(l[0]!==f[0]||l[1]!==f[1]||this.dirty)&&(this.gl.depthRange(l[0],l[1]),this.current=l,this.dirty=!1)}}class Pi extends Lt{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;l?f.enable(f.DEPTH_TEST):f.disable(f.DEPTH_TEST),this.current=l,this.dirty=!1}}class Bi extends Lt{getDefault(){return this.gl.LESS}set(l){(l!==this.current||this.dirty)&&(this.gl.depthFunc(l),this.current=l,this.dirty=!1)}}class ii extends Lt{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;l?f.enable(f.BLEND):f.disable(f.BLEND),this.current=l,this.dirty=!1}}class to extends Lt{getDefault(){const l=this.gl;return[l.ONE,l.ZERO]}set(l){const f=this.current;(l[0]!==f[0]||l[1]!==f[1]||this.dirty)&&(this.gl.blendFunc(l[0],l[1]),this.current=l,this.dirty=!1)}}class Ds extends Lt{getDefault(){return o.Color.transparent}set(l){const f=this.current;(l.r!==f.r||l.g!==f.g||l.b!==f.b||l.a!==f.a||this.dirty)&&(this.gl.blendColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class mi extends Lt{getDefault(){return this.gl.FUNC_ADD}set(l){(l!==this.current||this.dirty)&&(this.gl.blendEquation(l),this.current=l,this.dirty=!1)}}class oi extends Lt{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;l?f.enable(f.CULL_FACE):f.disable(f.CULL_FACE),this.current=l,this.dirty=!1}}class Ai extends Lt{getDefault(){return this.gl.BACK}set(l){(l!==this.current||this.dirty)&&(this.gl.cullFace(l),this.current=l,this.dirty=!1)}}class ra extends Lt{getDefault(){return this.gl.CCW}set(l){(l!==this.current||this.dirty)&&(this.gl.frontFace(l),this.current=l,this.dirty=!1)}}let Lo,Ls=class extends Lt{getDefault(){return null}set(m){(m!==this.current||this.dirty)&&(this.gl.useProgram(m),this.current=m,this.dirty=!1)}};class gi extends Lt{getDefault(){return this.gl.TEXTURE0}set(l){(l!==this.current||this.dirty)&&(this.gl.activeTexture(l),this.current=l,this.dirty=!1)}}class zo extends Lt{getDefault(){const l=this.gl;return[0,0,l.drawingBufferWidth,l.drawingBufferHeight]}set(l){const f=this.current;(l[0]!==f[0]||l[1]!==f[1]||l[2]!==f[2]||l[3]!==f[3]||this.dirty)&&(this.gl.viewport(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class na extends Lt{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;f.bindFramebuffer(f.FRAMEBUFFER,l),this.current=l,this.dirty=!1}}class ia extends Lt{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;f.bindRenderbuffer(f.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class ls extends Lt{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;f.bindTexture(f.TEXTURE_2D,l),this.current=l,this.dirty=!1}}class zs extends Lt{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;f.bindBuffer(f.ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class ye extends Lt{getDefault(){return null}set(l){const f=this.gl;f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class Q extends Lt{constructor(l){super(l),this.vao=l.extVertexArrayObject}getDefault(){return null}set(l){this.vao&&(l!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(l),this.current=l,this.dirty=!1)}}class ee extends Lt{getDefault(){return 4}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_ALIGNMENT,l),this.current=l,this.dirty=!1}}class me extends Lt{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l),this.current=l,this.dirty=!1}}class Se extends Lt{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,l),this.current=l,this.dirty=!1}}class ke extends Lt{constructor(l,f){super(l),this.context=l,this.parent=f}getDefault(){return null}}class Ve extends ke{setDirty(){this.dirty=!0}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,l,0),this.current=l,this.dirty=!1}}class Ue extends ke{attachment(){return this.gl.DEPTH_ATTACHMENT}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferRenderbuffer(f.FRAMEBUFFER,this.attachment(),f.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class Oe extends Ue{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class Xe{constructor(l,f,y,x){this.context=l,this.width=f,this.height=y;const T=this.framebuffer=l.gl.createFramebuffer();this.colorAttachment=new Ve(l,T),x&&(this.depthAttachment=new Ue(l,T))}destroy(){const l=this.context.gl,f=this.colorAttachment.get();if(f&&l.deleteTexture(f),this.depthAttachment){const y=this.depthAttachment.get();y&&l.deleteRenderbuffer(y)}l.deleteFramebuffer(this.framebuffer)}}class bt{constructor(l,f=!1){if(this.gl=l,this.isWebGL2=f,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),f){const y=l;this.extVertexArrayObject={createVertexArrayOES:y.createVertexArray.bind(l),deleteVertexArrayOES:y.deleteVertexArray.bind(l),bindVertexArrayOES:y.bindVertexArray.bind(l)}}this.clearColor=new dt(this),this.clearDepth=new pr(this),this.clearStencil=new _r(this),this.colorMask=new hr(this),this.depthMask=new Tr(this),this.stencilMask=new kn(this),this.stencilFunc=new Gn(this),this.stencilOp=new vn(this),this.stencilTest=new po(this),this.depthRange=new pi(this),this.depthTest=new Pi(this),this.depthFunc=new Bi(this),this.blend=new ii(this),this.blendFunc=new to(this),this.blendColor=new Ds(this),this.blendEquation=new mi(this),this.cullFace=new oi(this),this.cullFaceSide=new Ai(this),this.frontFace=new ra(this),this.program=new Ls(this),this.activeTexture=new gi(this),this.viewport=new zo(this),this.bindFramebuffer=new na(this),this.bindRenderbuffer=new ia(this),this.bindTexture=new ls(this),this.bindVertexBuffer=new zs(this),this.bindElementBuffer=new ye(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Q(this),this.pixelStoreUnpack=new ee(this),this.pixelStoreUnpackPremultiplyAlpha=new me(this),this.pixelStoreUnpackFlipY=new Se(this),this.extTextureFilterAnisotropic=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=l.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=l.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=l.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=l.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),f||(this.extTextureHalfFloat=l.getExtension("OES_texture_half_float")),(f||this.extTextureHalfFloat&&l.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=l.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=f||l.getExtension("OES_standard_derivatives"),this.extTimerQuery=l.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(l,f){return new nn(this,l,f)}createVertexBuffer(l,f,y){return new rr(this,l,f,y)}createRenderbuffer(l,f,y){const x=this.gl,T=x.createRenderbuffer();return this.bindRenderbuffer.set(T),x.renderbufferStorage(x.RENDERBUFFER,l,f,y),this.bindRenderbuffer.set(null),T}createFramebuffer(l,f,y){return new Xe(this,l,f,y)}clear({color:l,depth:f,stencil:y}){const x=this.gl;let T=0;l&&(T|=x.COLOR_BUFFER_BIT,this.clearColor.set(l),this.colorMask.set([!0,!0,!0,!0])),f!==void 0&&(T|=x.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(f),this.depthMask.set(!0)),y!==void 0&&(T|=x.STENCIL_BUFFER_BIT,this.clearStencil.set(y),this.stencilMask.set(255)),x.clear(T)}setCullFace(l){l.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(l.mode),this.frontFace.set(l.frontFace))}setDepthMode(l){l.func!==this.gl.ALWAYS||l.mask?(this.depthTest.set(!0),this.depthFunc.set(l.func),this.depthMask.set(l.mask),this.depthRange.set(l.range)):this.depthTest.set(!1)}setStencilMode(l){l.test.func!==this.gl.ALWAYS||l.mask?(this.stencilTest.set(!0),this.stencilMask.set(l.mask),this.stencilOp.set([l.fail,l.depthFail,l.pass]),this.stencilFunc.set({func:l.test.func,ref:l.ref,mask:l.test.mask})):this.stencilTest.set(!1)}setColorMode(l){_(l.blendFunction,o.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(l.blendFunction),this.blendColor.set(l.blendColor)),this.colorMask.set(l.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class St extends o.Evented{constructor(l,f,y,x){if(super(),this.id=l,this.dispatcher=y,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.extend(this,o.pick(f,["url","scheme","tileSize","promoteId"])),this._options=o.extend({type:"vector"},f),this._collectResourceTiming=f.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(x),this._tileWorkers={},this._deduped=new o.DedupedRequest}load(l){this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"}));const f=Array.isArray(this.map._language)?this.map._language.join():this.map._language,y=this.map._worldview;this._tileJSONRequest=br(this._options,this.map._requestManager,f,y,(x,T)=>{this._tileJSONRequest=null,this._loaded=!0,x?(f&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${f}`),y&&y.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${y}`),this.fire(new o.ErrorEvent(x))):T&&(o.extend(this,T),T.bounds&&(this.tileBounds=new Mr(T.bounds,this.minzoom,this.maxzoom)),o.postTurnstileEvent(T.tiles,this.map._requestManager._customAccessToken),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))),l&&l(x)})}loaded(){return this._loaded}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}onAdd(l){this.map=l,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(l){return this._options.tiles=l,this.reload(),this}setUrl(l){return this.url=l,this._options.url=l,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return o.extend({},this._options)}loadTile(l,f){const y=this.map._requestManager.normalizeTileURL(l.tileID.canonical.url(this.tiles,this.scheme)),x={request:this.map._requestManager.transformRequest(y,o.ResourceType.Tile),data:void 0,uid:l.uid,tileID:l.tileID,tileZoom:l.tileZoom,zoom:l.tileID.overscaledZ,tileSize:this.tileSize*l.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:o.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:l.isSymbolTile};if(x.request.collectResourceTiming=this._collectResourceTiming,l.actor&&l.state!=="expired")l.state==="loading"?l.reloadCallback=f:l.request=l.actor.send("reloadTile",x,T.bind(this));else if(l.actor=this._tileWorkers[y]=this._tileWorkers[y]||this.dispatcher.getActor(),this.dispatcher.ready)l.request=l.actor.send("loadTile",x,T.bind(this),void 0,!0);else{const M=o.loadVectorTile.call({deduped:this._deduped},x,(I,k)=>{I||!k?T.call(this,I):(x.data={cacheControl:k.cacheControl,expires:k.expires,rawData:k.rawData.slice(0)},l.actor&&l.actor.send("loadTile",x,T.bind(this),void 0,!0))},!0);l.request={cancel:M}}function T(M,I){return delete l.request,l.aborted?f(null):M&&M.status!==404?f(M):(I&&I.resourceTiming&&(l.resourceTiming=I.resourceTiming),this.map._refreshExpiredTiles&&I&&l.setExpiryData(I),l.loadVectorData(I,this.map.painter),o.cacheEntryPossiblyAdded(this.dispatcher),f(null),void(l.reloadCallback&&(this.loadTile(l,l.reloadCallback),l.reloadCallback=null)))}}abortTile(l){l.request&&(l.request.cancel(),delete l.request),l.actor&&l.actor.send("abortTile",{uid:l.uid,type:this.type,source:this.id})}unloadTile(l){l.unloadVectorData(),l.actor&&l.actor.send("removeTile",{uid:l.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class le extends o.Evented{constructor(l,f,y,x){super(),this.id=l,this.dispatcher=y,this.setEventedParent(x),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.extend({type:"raster"},f),o.extend(this,o.pick(f,["url","scheme","tileSize"]))}load(l){this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=br(this._options,this.map._requestManager,null,null,(f,y)=>{this._tileJSONRequest=null,this._loaded=!0,f?this.fire(new o.ErrorEvent(f)):y&&(o.extend(this,y),y.bounds&&(this.tileBounds=new Mr(y.bounds,this.minzoom,this.maxzoom)),o.postTurnstileEvent(y.tiles),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))),l&&l(f)})}loaded(){return this._loaded}onAdd(l){this.map=l,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(l){return this._options.tiles=l,this.reload(),this}setUrl(l){return this.url=l,this._options.url=l,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return o.extend({},this._options)}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}loadTile(l,f){const y=o.exported.devicePixelRatio>=2,x=this.map._requestManager.normalizeTileURL(l.tileID.canonical.url(this.tiles,this.scheme),y,this.tileSize);l.request=o.getImage(this.map._requestManager.transformRequest(x,o.ResourceType.Tile),(T,M,I,k)=>(delete l.request,l.aborted?(l.state="unloaded",f(null)):T?(l.state="errored",f(T)):M?(this.map._refreshExpiredTiles&&l.setExpiryData({cacheControl:I,expires:k}),l.setTexture(M,this.map.painter),l.state="loaded",o.cacheEntryPossiblyAdded(this.dispatcher),void f(null)):f(null)))}static loadTileData(l,f,y){l.setTexture(f,y)}static unloadTileData(l,f){l.texture&&f.saveTileTexture(l.texture)}abortTile(l,f){l.request&&(l.request.cancel(),delete l.request),f()}unloadTile(l,f){l.texture&&this.map.painter.saveTileTexture(l.texture),f()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}function Ie(m,l,f,y,x,T,M,I){const k=[m,f,x,l,y,T,1,1,1],B=[M,I,1],R=o.adjoint([],k),[H,te,ie]=o.transformMat3(B,B,o.transpose(R,R));return o.multiply$1(k,[H,0,0,0,te,0,0,0,ie],k)}class je extends o.Evented{constructor(l,f,y,x){super(),this.id=l,this.dispatcher=y,this.coordinates=f.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(x),this.options=f,this._dirty=!1}load(l,f){this._loaded=f||!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=o.getImage(this.map._requestManager.transformRequest(this.url,o.ResourceType.Image),(y,x)=>{if(this._imageRequest=null,this._loaded=!0,y)this.fire(new o.ErrorEvent(y));else if(x){const{HTMLImageElement:T}=o.window;this.image=x instanceof T?o.exported.getImageData(x):x,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,l&&(this.coordinates=l),this._finishLoading()}})}loaded(){return this._loaded}updateImage(l){return this.image&&l.url?(this._imageRequest&&l.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=l.url,this.load(l.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(l){this.map=l,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(l){this.coordinates=l,this._boundsArray=void 0;const f=l.map(o.MercatorCoordinate.fromLngLat);return this.tileID=function(y){let x=1/0,T=1/0,M=-1/0,I=-1/0;for(const H of y)x=Math.min(x,H.x),T=Math.min(T,H.y),M=Math.max(M,H.x),I=Math.max(I,H.y);const k=Math.max(M-x,I-T),B=Math.max(0,Math.floor(-Math.log(k)/Math.LN2)),R=Math.pow(2,B);return new o.CanonicalTileID(B,Math.floor((x+M)/2*R),Math.floor((T+I)/2*R))}(f),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(l){for(const k in this.tiles){const B=this.tiles[k];B.state!=="loaded"&&(B.state="loaded",B.texture=this.texture)}if(this._boundsArray)return;const f=o.tileTransform(this.tileID,this.map.transform.projection),[y,x,T,M]=this.coordinates.map(k=>{const B=f.projection.project(k[0],k[1]);return o.getTilePoint(f,B)._round()});this.perspectiveTransform=function(k,B,R,H,te,ie,se,ae,ce,Z){const ne=Ie(0,0,k,0,0,B,k,B),de=Ie(R,H,te,ie,se,ae,ce,Z);return o.multiply$1(de,o.adjoint(ne,ne),de),[de[6]/de[8]*k/o.EXTENT,de[7]/de[8]*B/o.EXTENT]}(this.width,this.height,y.x,y.y,x.x,x.y,M.x,M.y,T.x,T.y);const I=this._boundsArray=new o.StructArrayLayout4i8;I.emplaceBack(y.x,y.y,0,0),I.emplaceBack(x.x,x.y,o.EXTENT,0),I.emplaceBack(M.x,M.y,0,o.EXTENT),I.emplaceBack(T.x,T.y,o.EXTENT,o.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=l.createVertexBuffer(I,o.boundsAttributes.members),this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const l=this.map.painter.context,f=l.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new o.Texture(l,this.image,f.RGBA),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(l)}loadTile(l,f){this.tileID&&this.tileID.equals(l.tileID.canonical)?(this.tiles[String(l.tileID.wrap)]=l,l.buckets={},f(null)):(l.state="errored",f(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const et={vector:St,raster:le,"raster-dem":class extends le{constructor(m,l,f,y){super(m,l,f,y),this.type="raster-dem",this.maxzoom=22,this._options=o.extend({type:"raster-dem"},l),this.encoding=l.encoding||"mapbox"}loadTile(m,l){const f=this.map._requestManager.normalizeTileURL(m.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function y(x,T){x&&(m.state="errored",l(x)),T&&(m.dem=T,m.dem.onDeserialize(),m.needsHillshadePrepare=!0,m.needsDEMTextureUpload=!0,m.state="loaded",l(null))}m.request=o.getImage(this.map._requestManager.transformRequest(f,o.ResourceType.Tile),(function(x,T,M,I){if(delete m.request,m.aborted)m.state="unloaded",l(null);else if(x)m.state="errored",l(x);else if(T){this.map._refreshExpiredTiles&&m.setExpiryData({cacheControl:M,expires:I});const k=o.window.ImageBitmap&&T instanceof o.window.ImageBitmap&&(Lo==null&&(Lo=o.window.OffscreenCanvas&&new o.window.OffscreenCanvas(1,1).getContext("2d")&&typeof o.window.createImageBitmap=="function"),Lo),B=1-(T.width-o.prevPowerOfTwo(T.width))/2;B<1||m.neighboringTiles||(m.neighboringTiles=this._getNeighboringTiles(m.tileID));const R=k?T:o.exported.getImageData(T,B),H={uid:m.uid,coord:m.tileID,source:this.id,rawImageData:R,encoding:this.encoding,padding:B};m.actor&&m.state!=="expired"||(m.actor=this.dispatcher.getActor(),m.actor.send("loadDEMTile",H,y.bind(this),void 0,!0))}}).bind(this))}_getNeighboringTiles(m){const l=m.canonical,f=Math.pow(2,l.z),y=(l.x-1+f)%f,x=l.x===0?m.wrap-1:m.wrap,T=(l.x+1+f)%f,M=l.x+1===f?m.wrap+1:m.wrap,I={};return I[new o.OverscaledTileID(m.overscaledZ,x,l.z,y,l.y).key]={backfilled:!1},I[new o.OverscaledTileID(m.overscaledZ,M,l.z,T,l.y).key]={backfilled:!1},l.y>0&&(I[new o.OverscaledTileID(m.overscaledZ,x,l.z,y,l.y-1).key]={backfilled:!1},I[new o.OverscaledTileID(m.overscaledZ,m.wrap,l.z,l.x,l.y-1).key]={backfilled:!1},I[new o.OverscaledTileID(m.overscaledZ,M,l.z,T,l.y-1).key]={backfilled:!1}),l.y+1<f&&(I[new o.OverscaledTileID(m.overscaledZ,x,l.z,y,l.y+1).key]={backfilled:!1},I[new o.OverscaledTileID(m.overscaledZ,m.wrap,l.z,l.x,l.y+1).key]={backfilled:!1},I[new o.OverscaledTileID(m.overscaledZ,M,l.z,T,l.y+1).key]={backfilled:!1}),I}unloadTile(m){m.demTexture&&this.map.painter.saveTileTexture(m.demTexture),m.fbo&&(m.fbo.destroy(),delete m.fbo),m.dem&&delete m.dem,delete m.neighboringTiles,m.state="unloaded"}},geojson:class extends o.Evented{constructor(m,l,f,y){super(),this.id=m,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=f.getActor(),this.setEventedParent(y),this._data=l.data,this._options=o.extend({},l),this._collectResourceTiming=l.collectResourceTiming,l.maxzoom!==void 0&&(this.maxzoom=l.maxzoom),l.type&&(this.type=l.type),l.attribution&&(this.attribution=l.attribution),this.promoteId=l.promoteId;const x=o.EXTENT/this.tileSize;this.workerOptions=o.extend({source:this.id,cluster:l.cluster||!1,geojsonVtOptions:{buffer:(l.buffer!==void 0?l.buffer:128)*x,tolerance:(l.tolerance!==void 0?l.tolerance:.375)*x,extent:o.EXTENT,maxZoom:this.maxzoom,lineMetrics:l.lineMetrics||!1,generateId:l.generateId||!1},superclusterOptions:{maxZoom:l.clusterMaxZoom!==void 0?l.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,l.clusterMinPoints||2),extent:o.EXTENT,radius:(l.clusterRadius!==void 0?l.clusterRadius:50)*x,log:!1,generateId:l.generateId||!1},clusterProperties:l.clusterProperties,filter:l.filter},l.workerOptions)}onAdd(m){this.map=m,this.setData(this._data)}setData(m){return this._data=m,this._updateWorkerData(),this}getClusterExpansionZoom(m,l){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:m,source:this.id},l),this}getClusterChildren(m,l){return this.actor.send("geojson.getClusterChildren",{clusterId:m,source:this.id},l),this}getClusterLeaves(m,l,f,y){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:m,limit:l,offset:f},y),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new o.Event("dataloading",{dataType:"source"})),this._loaded=!1;const m=o.extend({},this.workerOptions),l=this._data;typeof l=="string"?(m.request=this.map._requestManager.transformRequest(o.exported.resolveURL(l),o.ResourceType.Source),m.request.collectResourceTiming=this._collectResourceTiming):m.data=JSON.stringify(l),this._pendingLoad=this.actor.send(`${this.type}.loadData`,m,(f,y)=>{if(this._loaded=!0,this._pendingLoad=null,f)this.fire(new o.ErrorEvent(f));else{const x={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&y&&y.resourceTiming&&y.resourceTiming[this.id]&&(x.resourceTiming=y.resourceTiming[this.id]),this.fire(new o.Event("data",x)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(m,l){const f=m.actor?"reloadTile":"loadTile";m.actor=this.actor,m.request=this.actor.send(f,{type:this.type,uid:m.uid,tileID:m.tileID,tileZoom:m.tileZoom,zoom:m.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:o.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(y,x)=>(delete m.request,m.unloadVectorData(),m.aborted?l(null):y?l(y):(m.loadVectorData(x,this.map.painter,f==="reloadTile"),l(null))),void 0,f==="loadTile")}abortTile(m){m.request&&(m.request.cancel(),delete m.request),m.aborted=!0}unloadTile(m){m.unloadVectorData(),this.actor.send("removeTile",{uid:m.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return o.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends je{constructor(m,l,f,y){super(m,l,f,y),this.roundZoom=!0,this.type="video",this.options=l}load(){this._loaded=!1;const m=this.options;this.urls=[];for(const l of m.urls)this.urls.push(this.map._requestManager.transformRequest(l,o.ResourceType.Source).url);o.getVideo(this.urls,(l,f)=>{this._loaded=!0,l?this.fire(new o.ErrorEvent(l)):f&&(this.video=f,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(m){if(this.video){const l=this.video.seekable;m<l.start(0)||m>l.end(0)?this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${l.start(0)} and ${l.end(0)}-second mark.`))):this.video.currentTime=m}}getVideo(){return this.video}onAdd(m){this.map||(this.map=m,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const m=this.map.painter.context,l=m.gl;this.texture?this.video.paused||(this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),l.texSubImage2D(l.TEXTURE_2D,0,0,0,l.RGBA,l.UNSIGNED_BYTE,this.video)):(this.texture=new o.Texture(m,this.video,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(m)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:je,canvas:class extends je{constructor(m,l,f,y){super(m,l,f,y),l.coordinates?Array.isArray(l.coordinates)&&l.coordinates.length===4&&!l.coordinates.some(x=>!Array.isArray(x)||x.length!==2||x.some(T=>typeof T!="number"))||this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${m}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${m}`,null,'missing required property "coordinates"'))),l.animate&&typeof l.animate!="boolean"&&this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${m}`,null,'optional "animate" property must be a boolean value'))),l.canvas?typeof l.canvas=="string"||l.canvas instanceof o.window.HTMLCanvasElement||this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${m}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${m}`,null,'missing required property "canvas"'))),this.options=l,this.animate=l.animate===void 0||l.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof o.window.HTMLCanvasElement?this.options.canvas:o.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(m){this.map=m,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let m=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,m=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,m=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const l=this.map.painter.context;this.texture?(m||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new o.Texture(l,this.canvas,l.gl.RGBA,{premultiply:!0}),this._prepareData(l)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const m of[this.canvas.width,this.canvas.height])if(isNaN(m)||m<=0)return!0;return!1}},custom:class extends o.Evented{constructor(m,l,f,y){super(),this.id=m,this.type="custom",this._dataType="raster",this._dispatcher=f,this._implementation=l,this.setEventedParent(y),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new o.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new o.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new Mr(this._implementation.bounds,this.minzoom,this.maxzoom)),l.update=this._update.bind(this),l.clearTiles=this._clearTiles.bind(this),l.coveringTiles=this._coveringTiles.bind(this),o.extend(this,o.pick(l,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return o.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(m){this._map=m,this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(m),this.load()}onRemove(m){this._implementation.onRemove&&this._implementation.onRemove(m)}hasTile(m){if(this._implementation.hasTile){const{x:l,y:f,z:y}=m.canonical;return this._implementation.hasTile({x:l,y:f,z:y})}return!this.tileBounds||this.tileBounds.contains(m.canonical)}loadTile(m,l){const{x:f,y,z:x}=m.tileID.canonical,T=new o.window.AbortController;m.request=Promise.resolve(this._implementation.loadTile({x:f,y,z:x},{signal:T.signal})).then((function(M){return delete m.request,m.aborted?(m.state="unloaded",l(null)):M===void 0?(m.state="errored",l(null)):M===null?(this.loadTileData(m,{width:this.tileSize,height:this.tileSize,data:null}),m.state="loaded",l(null)):function(I){return I instanceof o.window.ImageData||I instanceof o.window.HTMLCanvasElement||I instanceof o.window.ImageBitmap||I instanceof o.window.HTMLImageElement}(M)?(this.loadTileData(m,M),m.state="loaded",void l(null)):(m.state="errored",l(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}).bind(this)).catch(M=>{M.code!==20&&(m.state="errored",l(M))}),m.request.cancel=()=>T.abort()}loadTileData(m,l){le.loadTileData(m,l,this._map.painter)}unloadTileData(m){le.unloadTileData(m,this._map.painter)}unloadTile(m,l){if(this.unloadTileData(m),this._implementation.unloadTile){const{x:f,y,z:x}=m.tileID.canonical;this._implementation.unloadTile({x:f,y,z:x})}l()}abortTile(m,l){m.request&&m.request.cancel&&(m.request.cancel(),delete m.request),l()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(m=>({x:m.canonical.x,y:m.canonical.y,z:m.canonical.z}))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))}}},ht=function(m,l,f,y){const x=new et[l.type](m,l,f,y);if(x.id!==m)throw new Error(`Expected Source id to be ${m} instead of ${x.id}`);return o.bindAll(["load","abort","unload","serialize","prepare"],x),x};function Et(m,l){const f=o.identity([]);return o.scale(f,f,[.5*m.width,.5*-m.height,1]),o.translate(f,f,[1,-1,0]),o.multiply(f,f,m.calculateProjMatrix(l.toUnwrapped())),Float32Array.from(f)}function Nt(m,l,f,y,x,T,M,I=!1){const k=m.tilesIn(y,M,I);k.sort(Ft);const B=[];for(const H of k)B.push({wrappedTileID:H.tile.tileID.wrapped().key,queryResults:H.tile.queryRenderedFeatures(l,f,m._state,H,x,T,Et(m.transform,H.tile.tileID),I)});const R=function(H){const te={},ie={};for(const se of H){const ae=se.queryResults,ce=se.wrappedTileID,Z=ie[ce]=ie[ce]||{};for(const ne in ae){const de=ae[ne],pe=Z[ne]=Z[ne]||{},Ee=te[ne]=te[ne]||[];for(const Me of de)pe[Me.featureIndex]||(pe[Me.featureIndex]=!0,Ee.push(Me))}}return te}(B);for(const H in R)R[H].forEach(te=>{const ie=te.feature,se=ie.layer;se&&se.type!=="background"&&se.type!=="sky"&&(ie.source=se.source,se["source-layer"]&&(ie.sourceLayer=se["source-layer"]),ie.state=ie.id!==void 0?m.getFeatureState(se["source-layer"],ie.id):{})});return R}function kt(m,l){const f=m.getRenderableIds().map(T=>m.getTileByID(T)),y=[],x={};for(let T=0;T<f.length;T++){const M=f[T],I=M.tileID.canonical.key;x[I]||(x[I]=!0,M.querySourceFeatures(y,l))}return y}function Ft(m,l){const f=m.tileID,y=l.tileID;return f.overscaledZ-y.overscaledZ||f.canonical.y-y.canonical.y||f.wrap-y.wrap||f.canonical.x-y.canonical.x}function Ot(){return Ul.workerClass!=null?new Ul.workerClass:new o.window.Worker(Ul.workerUrl)}const Vt="mapboxgl_preloaded_worker_pool";class Jt{constructor(){this.active={}}acquire(l){if(!this.workers)for(this.workers=[];this.workers.length<Jt.workerCount;)this.workers.push(new Ot);return this.active[l]=!0,this.workers.slice()}release(l){delete this.active[l],this.numActive()===0&&(this.workers.forEach(f=>{f.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Vt]}numActive(){return Object.keys(this.active).length}}let nr;function mn(){return nr||(nr=new Jt),nr}function Jr(m,l){const f={};for(const y in m)y!=="ref"&&(f[y]=m[y]);return o.refProperties.forEach(y=>{y in l&&(f[y]=l[y])}),f}function Dr(m){m=m.slice();const l=Object.create(null);for(let f=0;f<m.length;f++)l[m[f].id]=m[f];for(let f=0;f<m.length;f++)"ref"in m[f]&&(m[f]=Jr(m[f],l[m[f].ref]));return m}Jt.workerCount=2;const er={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function oa(m,l,f){f.push({command:er.addSource,args:[m,l[m]]})}function Ro(m,l,f){l.push({command:er.removeSource,args:[m]}),f[m]=!0}function ro(m,l,f,y){Ro(m,f,y),oa(m,l,f)}function Mi(m,l,f){let y;for(y in m[f])if(m[f].hasOwnProperty(y)&&y!=="data"&&!_(m[f][y],l[f][y]))return!1;for(y in l[f])if(l[f].hasOwnProperty(y)&&y!=="data"&&!_(m[f][y],l[f][y]))return!1;return!0}function Fi(m,l,f,y,x,T){let M;for(M in l=l||{},m=m||{})m.hasOwnProperty(M)&&(_(m[M],l[M])||f.push({command:T,args:[y,M,l[M],x]}));for(M in l)l.hasOwnProperty(M)&&!m.hasOwnProperty(M)&&(_(m[M],l[M])||f.push({command:T,args:[y,M,l[M],x]}))}function Ci(m){return m.id}function Bo(m,l){return m[l.id]=l,m}class us{constructor(l,f){this.reset(l,f)}reset(l,f){this.points=l||[],this._distances=[0];for(let y=1;y<this.points.length;y++)this._distances[y]=this._distances[y-1]+this.points[y].dist(this.points[y-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(f||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(l){if(this.points.length===1)return this.points[0];l=o.clamp(l,0,1);let f=1,y=this._distances[f];const x=l*this.paddedLength+this.padding;for(;y<x&&f<this._distances.length;)y=this._distances[++f];const T=f-1,M=this._distances[T],I=y-M,k=I>0?(x-M)/I:0;return this.points[T].mult(1-k).add(this.points[f].mult(k))}}class mo{constructor(l,f,y){const x=this.boxCells=[],T=this.circleCells=[];this.xCellCount=Math.ceil(l/y),this.yCellCount=Math.ceil(f/y);for(let M=0;M<this.xCellCount*this.yCellCount;M++)x.push([]),T.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=l,this.height=f,this.xScale=this.xCellCount/l,this.yScale=this.yCellCount/f,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(l,f,y,x,T){this._forEachCell(f,y,x,T,this._insertBoxCell,this.boxUid++),this.boxKeys.push(l),this.bboxes.push(f),this.bboxes.push(y),this.bboxes.push(x),this.bboxes.push(T)}insertCircle(l,f,y,x){this._forEachCell(f-x,y-x,f+x,y+x,this._insertCircleCell,this.circleUid++),this.circleKeys.push(l),this.circles.push(f),this.circles.push(y),this.circles.push(x)}_insertBoxCell(l,f,y,x,T,M){this.boxCells[T].push(M)}_insertCircleCell(l,f,y,x,T,M){this.circleCells[T].push(M)}_query(l,f,y,x,T,M){if(y<0||l>this.width||x<0||f>this.height)return!T&&[];const I=[];if(l<=0&&f<=0&&this.width<=y&&this.height<=x){if(T)return!0;for(let k=0;k<this.boxKeys.length;k++)I.push({key:this.boxKeys[k],x1:this.bboxes[4*k],y1:this.bboxes[4*k+1],x2:this.bboxes[4*k+2],y2:this.bboxes[4*k+3]});for(let k=0;k<this.circleKeys.length;k++){const B=this.circles[3*k],R=this.circles[3*k+1],H=this.circles[3*k+2];I.push({key:this.circleKeys[k],x1:B-H,y1:R-H,x2:B+H,y2:R+H})}return M?I.filter(M):I}return this._forEachCell(l,f,y,x,this._queryCell,I,{hitTest:T,seenUids:{box:{},circle:{}}},M),T?I.length>0:I}_queryCircle(l,f,y,x,T){const M=l-y,I=l+y,k=f-y,B=f+y;if(I<0||M>this.width||B<0||k>this.height)return!x&&[];const R=[];return this._forEachCell(M,k,I,B,this._queryCellCircle,R,{hitTest:x,circle:{x:l,y:f,radius:y},seenUids:{box:{},circle:{}}},T),x?R.length>0:R}query(l,f,y,x,T){return this._query(l,f,y,x,!1,T)}hitTest(l,f,y,x,T){return this._query(l,f,y,x,!0,T)}hitTestCircle(l,f,y,x){return this._queryCircle(l,f,y,!0,x)}_queryCell(l,f,y,x,T,M,I,k){const B=I.seenUids,R=this.boxCells[T];if(R!==null){const te=this.bboxes;for(const ie of R)if(!B.box[ie]){B.box[ie]=!0;const se=4*ie;if(l<=te[se+2]&&f<=te[se+3]&&y>=te[se+0]&&x>=te[se+1]&&(!k||k(this.boxKeys[ie]))){if(I.hitTest)return M.push(!0),!0;M.push({key:this.boxKeys[ie],x1:te[se],y1:te[se+1],x2:te[se+2],y2:te[se+3]})}}}const H=this.circleCells[T];if(H!==null){const te=this.circles;for(const ie of H)if(!B.circle[ie]){B.circle[ie]=!0;const se=3*ie;if(this._circleAndRectCollide(te[se],te[se+1],te[se+2],l,f,y,x)&&(!k||k(this.circleKeys[ie]))){if(I.hitTest)return M.push(!0),!0;{const ae=te[se],ce=te[se+1],Z=te[se+2];M.push({key:this.circleKeys[ie],x1:ae-Z,y1:ce-Z,x2:ae+Z,y2:ce+Z})}}}}}_queryCellCircle(l,f,y,x,T,M,I,k){const B=I.circle,R=I.seenUids,H=this.boxCells[T];if(H!==null){const ie=this.bboxes;for(const se of H)if(!R.box[se]){R.box[se]=!0;const ae=4*se;if(this._circleAndRectCollide(B.x,B.y,B.radius,ie[ae+0],ie[ae+1],ie[ae+2],ie[ae+3])&&(!k||k(this.boxKeys[se])))return M.push(!0),!0}}const te=this.circleCells[T];if(te!==null){const ie=this.circles;for(const se of te)if(!R.circle[se]){R.circle[se]=!0;const ae=3*se;if(this._circlesCollide(ie[ae],ie[ae+1],ie[ae+2],B.x,B.y,B.radius)&&(!k||k(this.circleKeys[se])))return M.push(!0),!0}}}_forEachCell(l,f,y,x,T,M,I,k){const B=this._convertToXCellCoord(l),R=this._convertToYCellCoord(f),H=this._convertToXCellCoord(y),te=this._convertToYCellCoord(x);for(let ie=B;ie<=H;ie++)for(let se=R;se<=te;se++)if(T.call(this,l,f,y,x,this.xCellCount*se+ie,M,I,k))return}_convertToXCellCoord(l){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(l*this.xScale)))}_convertToYCellCoord(l){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(l*this.yScale)))}_circlesCollide(l,f,y,x,T,M){const I=x-l,k=T-f,B=y+M;return B*B>I*I+k*k}_circleAndRectCollide(l,f,y,x,T,M,I){const k=(M-x)/2,B=Math.abs(l-(x+k));if(B>k+y)return!1;const R=(I-T)/2,H=Math.abs(f-(T+R));if(H>R+y)return!1;if(B<=k||H<=R)return!0;const te=B-k,ie=H-R;return te*te+ie*ie<=y*y}}const vr={unknown:0,flipRequired:1,flipNotRequired:2},Qr=Math.tan(85*Math.PI/180);function Qe(m,l,f,y,x,T,M){const I=o.create();if(f)if(T.name==="globe"){const k=o.calculateGlobeLabelMatrix(x,l);o.multiply(I,I,k)}else{const k=oe([],M);I[0]=k[0],I[1]=k[1],I[4]=k[2],I[5]=k[3],y||o.rotateZ(I,I,x.angle)}else o.multiply(I,x.labelPlaneMatrix,m);return I}function Ii(m,l,f,y,x,T,M){const I=Qe(m,l,f,y,x,T,M);return T.name==="globe"&&f||(I[2]=I[6]=I[10]=I[14]=0),I}function xr(m,l,f,y,x,T,M){if(f){if(T.name==="globe"){const I=Qe(m,l,f,y,x,T,M);return o.invert(I,I),o.multiply(I,m,I),I}{const I=o.clone(m),k=o.identity([]);return k[0]=M[0],k[1]=M[1],k[4]=M[2],k[5]=M[3],o.multiply(I,I,k),y||o.rotateZ(I,I,-x.angle),I}}return x.glCoordMatrix}function fn(m,l,f,y){const x=[m,l,f,1];f?o.transformMat4$1(x,x,y):gr(x,x,y);const T=x[3];return x[0]/=T,x[1]/=T,x[2]/=T,x}function Ru(m,l){return Math.min(.5+m/l*.5,1.5)}function go(m,l){const f=m[0]/m[3],y=m[1]/m[3];return f>=-l[0]&&f<=l[0]&&y>=-l[1]&&y<=l[1]}function Gf(m,l,f,y,x,T,M,I,k,B){const R=f.transform,H=y?m.textSizeData:m.iconSizeData,te=o.evaluateSizeForZoom(H,f.transform.zoom),ie=R.projection.name==="globe",se=[256/f.width*2+1,256/f.height*2+1],ae=y?m.text.dynamicLayoutVertexArray:m.icon.dynamicLayoutVertexArray;ae.clear();let ce=null;ie&&(ce=y?m.text.globeExtVertexArray:m.icon.globeExtVertexArray);const Z=m.lineVertexArray,ne=y?m.text.placedSymbolArray:m.icon.placedSymbolArray,de=f.transform.width/f.transform.height;let pe,Ee=!1;for(let Me=0;Me<ne.length;Me++){const Ae=ne.get(Me),{numGlyphs:Fe,writingMode:Be}=Ae;if(Be!==o.WritingMode.vertical||Ee||pe===o.WritingMode.horizontal||(Ee=!0),pe=Be,(Ae.hidden||Be===o.WritingMode.vertical)&&!Ee){Fo(Fe,ae);continue}Ee=!1;const He=new o.Point(Ae.tileAnchorX,Ae.tileAnchorY);let{x:gt,y:Ge,z:ot}=R.projection.projectTilePoint(He.x,He.y,B.canonical);if(k){const[tr,jt,Yt]=k(He);gt+=tr,Ge+=jt,ot+=Yt}const Ke=[gt,Ge,ot,1];if(o.transformMat4$1(Ke,Ke,l),!go(Ke,se)){Fo(Fe,ae);continue}const mt=Ru(f.transform.cameraToCenterDistance,Ke[3]),qe=o.evaluateSizeForFeature(H,te,Ae),it=M?qe/mt:qe*mt,_t=fn(gt,Ge,ot,x);if(_t[3]<=0){Fo(Fe,ae);continue}let ut={};const vt=M?null:k,Gt=It(Ae,it,!1,I,l,x,T,m.glyphOffsetArray,Z,ae,ce,_t,He,ut,de,vt,R.projection,B,M);Ee=Gt.useVertical,vt&&Gt.needsFlipping&&(ut={}),(Gt.notEnoughRoom||Ee||Gt.needsFlipping&&It(Ae,it,!0,I,l,x,T,m.glyphOffsetArray,Z,ae,ce,_t,He,ut,de,vt,R.projection,B,M).notEnoughRoom)&&Fo(Fe,ae)}y?(m.text.dynamicLayoutVertexBuffer.updateData(ae),ce&&m.text.globeExtVertexBuffer.updateData(ce)):(m.icon.dynamicLayoutVertexBuffer.updateData(ae),ce&&m.icon.globeExtVertexBuffer.updateData(ce))}function M2(m,l,f,y,x,T,M,I,k,B,R,H,te,ie,se,ae){const{lineStartIndex:ce,glyphStartIndex:Z,segment:ne}=I,de=Z+I.numGlyphs,pe=ce+I.lineLength,Ee=l.getoffsetX(Z),Me=l.getoffsetX(de-1),Ae=no(m*Ee,f,y,x,T,M,ne,ce,pe,k,B,R,H,te,!0,ie,se,ae);if(!Ae)return null;const Fe=no(m*Me,f,y,x,T,M,ne,ce,pe,k,B,R,H,te,!0,ie,se,ae);return Fe?{first:Ae,last:Fe}:null}function El(m,l,f,y){return m===o.WritingMode.horizontal&&Math.abs(y)>Math.abs(f)?{useVertical:!0}:m===o.WritingMode.vertical?y>0?{needsFlipping:!0}:null:l!==vr.unknown&&function(x,T){return x===0||Math.abs(T/x)>Qr}(f,y)?l===vr.flipRequired?{needsFlipping:!0}:null:f<0?{needsFlipping:!0}:null}function It(m,l,f,y,x,T,M,I,k,B,R,H,te,ie,se,ae,ce,Z,ne){const de=l/24,pe=m.lineOffsetX*de,Ee=m.lineOffsetY*de,{lineStartIndex:Me,glyphStartIndex:Ae,numGlyphs:Fe,segment:Be,writingMode:He,flipState:gt}=m,Ge=Me+m.lineLength,ot=Ke=>{if(R){const[_t,ut,vt]=Ke.up,Gt=B.length;o.updateGlobeVertexNormal(R,Gt+0,_t,ut,vt),o.updateGlobeVertexNormal(R,Gt+1,_t,ut,vt),o.updateGlobeVertexNormal(R,Gt+2,_t,ut,vt),o.updateGlobeVertexNormal(R,Gt+3,_t,ut,vt)}const[mt,qe,it]=Ke.point;o.addDynamicAttributes(B,mt,qe,it,Ke.angle)};if(Fe>1){const Ke=M2(de,I,pe,Ee,f,H,te,m,k,T,ie,ae,!1,ce,Z,ne);if(!Ke)return{notEnoughRoom:!0};if(y&&!f){let[mt,qe,it]=Ke.first.point,[_t,ut,vt]=Ke.last.point;[mt,qe]=fn(mt,qe,it,M),[_t,ut]=fn(_t,ut,vt,M);const Gt=El(He,gt,(_t-mt)*se,ut-qe);if(m.flipState=Gt&&Gt.needsFlipping?vr.flipRequired:vr.flipNotRequired,Gt)return Gt}ot(Ke.first);for(let mt=Ae+1;mt<Ae+Fe-1;mt++){const qe=no(de*I.getoffsetX(mt),pe,Ee,f,H,te,Be,Me,Ge,k,T,ie,ae,!1,!1,ce,Z,ne);if(!qe)return B.length-=4*(mt-Ae),{notEnoughRoom:!0};ot(qe)}ot(Ke.last)}else{if(y&&!f){const mt=fn(te.x,te.y,0,x),qe=Me+Be+1,it=new o.Point(k.getx(qe),k.gety(qe)),_t=fn(it.x,it.y,0,x),ut=_t[3]>0?_t:mr(te,it,mt,1,x,void 0,ce,Z.canonical),vt=El(He,gt,(ut[0]-mt[0])*se,ut[1]-mt[1]);if(m.flipState=vt&&vt.needsFlipping?vr.flipRequired:vr.flipNotRequired,vt)return vt}const Ke=no(de*I.getoffsetX(Ae),pe,Ee,f,H,te,Be,Me,Ge,k,T,ie,ae,!1,!1,ce,Z,ne);if(!Ke)return{notEnoughRoom:!0};ot(Ke)}return{}}function wr(m,l,f,y,x){const{x:T,y:M,z:I}=y.projectTilePoint(m.x,m.y,l);if(!x)return fn(T,M,I,f);const[k,B,R]=x(m);return fn(T+k,M+B,I+R,f)}function mr(m,l,f,y,x,T,M,I){const k=wr(m.sub(l)._unit()._add(m),I,x,M,T);return o.sub(k,f,k),o.normalize(k,k),o.scaleAndAdd(k,f,k,y)}function no(m,l,f,y,x,T,M,I,k,B,R,H,te,ie,se,ae,ce,Z){const ne=y?m-l:m+l;let de=ne>0?1:-1,pe=0;y&&(de*=-1,pe=Math.PI),de<0&&(pe+=Math.PI);let Ee=I+M+(de>0?0:1)|0,Me=x,Ae=x,Fe=0,Be=0;const He=Math.abs(ne),gt=[],Ge=[];let ot=T,Ke=ot;const mt=()=>mr(Ke,ot,Ae,He-Fe+1,R,te,ae,ce.canonical);for(;Fe+Be<=He;){if(Ee+=de,Ee<I||Ee>=k)return null;if(Ae=Me,Ke=ot,gt.push(Ae),ie&&Ge.push(Ke),ot=new o.Point(B.getx(Ee),B.gety(Ee)),Me=H[Ee],!Me){const Yt=wr(ot,ce.canonical,R,ae,te);Me=Yt[3]>0?H[Ee]=Yt:mt()}Fe+=Be,Be=o.distance(Ae,Me)}se&&te&&(H[Ee]&&(Me=mt(),Be=o.distance(Ae,Me)),H[Ee]=Me);const qe=(He-Fe)/Be,it=ot.sub(Ke)._mult(qe)._add(Ke),_t=o.sub([],Me,Ae),ut=o.scaleAndAdd([],Ae,_t,qe);let vt=[0,0,1],Gt=_t[0],tr=_t[1];if(Z&&(vt=ae.upVector(ce.canonical,it.x,it.y),vt[0]!==0||vt[1]!==0||vt[2]!==1)){const Yt=[vt[2],0,-vt[0]],yr=o.cross([],vt,Yt);o.normalize(Yt,Yt),o.normalize(yr,yr),Gt=o.dot(_t,Yt),tr=o.dot(_t,yr)}if(f){const Yt=o.cross([],vt,_t);o.normalize(Yt,Yt),o.scaleAndAdd(ut,ut,Yt,f*de)}const jt=pe+Math.atan2(tr,Gt);return gt.push(ut),ie&&Ge.push(it),{point:ut,angle:jt,path:gt,tilePath:Ge,up:vt}}function Fo(m,l){const f=l.length,y=f+4*m;l.resize(y),l.float32.fill(-1/0,4*f,4*y)}function gr(m,l,f){const y=l[0],x=l[1];return m[0]=f[0]*y+f[4]*x+f[12],m[1]=f[1]*y+f[5]*x+f[13],m[3]=f[3]*y+f[7]*x+f[15],m}const io=100;class Bu{constructor(l,f,y=new mo(l.width+200,l.height+200,25),x=new mo(l.width+200,l.height+200,25)){this.transform=l,this.grid=y,this.ignoredGrid=x,this.pitchfactor=Math.cos(l._pitch)*l.cameraToCenterDistance,this.screenRightBoundary=l.width+io,this.screenBottomBoundary=l.height+io,this.gridRightBoundary=l.width+200,this.gridBottomBoundary=l.height+200,this.fogState=f}placeCollisionBox(l,f,y,x,T,M,I,k){let B=y.projectedAnchorX,R=y.projectedAnchorY,H=y.projectedAnchorZ;const te=y.elevation,ie=y.tileID,se=l.getProjection();if(te&&ie){const[Me,Ae,Fe]=se.upVector(ie.canonical,y.tileAnchorX,y.tileAnchorY),Be=se.upVectorScale(ie.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;B+=Me*te*Be,R+=Ae*te*Be,H+=Fe*te*Be}const ae=this.projectAndGetPerspectiveRatio(I,B,R,H,y.tileID,se.name==="globe"||!!te||this.transform.pitch>0,se),ce=M*ae.perspectiveRatio,Z=(y.x1*f+x.x-y.padding)*ce+ae.point.x,ne=(y.y1*f+x.y-y.padding)*ce+ae.point.y,de=(y.x2*f+x.x+y.padding)*ce+ae.point.x,pe=(y.y2*f+x.y+y.padding)*ce+ae.point.y,Ee=ae.perspectiveRatio<=.55||ae.occluded;return!this.isInsideGrid(Z,ne,de,pe)||!T&&this.grid.hitTest(Z,ne,de,pe,k)||Ee?{box:[],offscreen:!1,occluded:ae.occluded}:{box:[Z,ne,de,pe],offscreen:this.isOffscreen(Z,ne,de,pe),occluded:!1}}placeCollisionCircles(l,f,y,x,T,M,I,k,B,R,H,te,ie,se,ae){const ce=[],Z=this.transform.elevation,ne=l.getProjection(),de=Z?Z.getAtTileOffsetFunc(ae,this.transform.center.lat,this.transform.worldSize,ne):null,pe=new o.Point(y.tileAnchorX,y.tileAnchorY);let{x:Ee,y:Me,z:Ae}=ne.projectTilePoint(pe.x,pe.y,ae.canonical);if(de){const[it,_t,ut]=de(pe);Ee+=it,Me+=_t,Ae+=ut}const Fe=ne.name==="globe",Be=this.projectAndGetPerspectiveRatio(I,Ee,Me,Ae,ae,Fe||!!Z||this.transform.pitch>0,ne),{perspectiveRatio:He}=Be,gt=(H?M/He:M*He)/o.ONE_EM,Ge=fn(Ee,Me,Ae,k),ot=Be.signedDistanceFromCamera>0?M2(gt,T,y.lineOffsetX*gt,y.lineOffsetY*gt,!1,Ge,pe,y,x,k,{},Z&&!H?de:null,H&&!!Z,ne,ae,H):null;let Ke=!1,mt=!1,qe=!0;if(ot&&!Be.occluded){const it=.5*ie*He+se,_t=new o.Point(-100,-100),ut=new o.Point(this.screenRightBoundary,this.screenBottomBoundary),vt=new us,{first:Gt,last:tr}=ot,jt=Gt.path.length;let Yt=[];for(let Ut=jt-1;Ut>=1;Ut--)Yt.push(Gt.path[Ut]);for(let Ut=1;Ut<tr.path.length;Ut++)Yt.push(tr.path[Ut]);const yr=2.5*it;B&&(Yt=Yt.map(([Ut,zr,Fr],jr)=>(de&&!Fe&&(Fr=de(jr<jt-1?Gt.tilePath[jt-1-jr]:tr.tilePath[jr-jt+2])[2]),fn(Ut,zr,Fr,B))),Yt.some(Ut=>Ut[3]<=0)&&(Yt=[]));let dr=[];if(Yt.length>0){let Ut=1/0,zr=-1/0,Fr=1/0,jr=-1/0;for(const $r of Yt)Ut=Math.min(Ut,$r[0]),Fr=Math.min(Fr,$r[1]),zr=Math.max(zr,$r[0]),jr=Math.max(jr,$r[1]);zr>=_t.x&&Ut<=ut.x&&jr>=_t.y&&Fr<=ut.y&&(dr=[Yt.map($r=>new o.Point($r[0],$r[1]))],(Ut<_t.x||zr>ut.x||Fr<_t.y||jr>ut.y)&&(dr=o.clipLine(dr,_t.x,_t.y,ut.x,ut.y)))}for(const Ut of dr){vt.reset(Ut,.25*it);let zr=0;zr=vt.length<=.5*it?1:Math.ceil(vt.paddedLength/yr)+1;for(let Fr=0;Fr<zr;Fr++){const jr=Fr/Math.max(zr-1,1),$r=vt.lerp(jr),_i=$r.x+io,Jn=$r.y+io;ce.push(_i,Jn,it,0);const bo=_i-it,ua=Jn-it,cn=_i+it,Nr=Jn+it;if(qe=qe&&this.isOffscreen(bo,ua,cn,Nr),mt=mt||this.isInsideGrid(bo,ua,cn,Nr),!f&&this.grid.hitTestCircle(_i,Jn,it,te)&&(Ke=!0,!R))return{circles:[],offscreen:!1,collisionDetected:Ke,occluded:!1}}}}return{circles:!R&&Ke||!mt?[]:ce,offscreen:qe,collisionDetected:Ke,occluded:Be.occluded}}queryRenderedSymbols(l){if(l.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const f=[];let y=1/0,x=1/0,T=-1/0,M=-1/0;for(const R of l){const H=new o.Point(R.x+io,R.y+io);y=Math.min(y,H.x),x=Math.min(x,H.y),T=Math.max(T,H.x),M=Math.max(M,H.y),f.push(H)}const I=this.grid.query(y,x,T,M).concat(this.ignoredGrid.query(y,x,T,M)),k={},B={};for(const R of I){const H=R.key;if(k[H.bucketInstanceId]===void 0&&(k[H.bucketInstanceId]={}),k[H.bucketInstanceId][H.featureIndex])continue;const te=[new o.Point(R.x1,R.y1),new o.Point(R.x2,R.y1),new o.Point(R.x2,R.y2),new o.Point(R.x1,R.y2)];o.polygonIntersectsPolygon(f,te)&&(k[H.bucketInstanceId][H.featureIndex]=!0,B[H.bucketInstanceId]===void 0&&(B[H.bucketInstanceId]=[]),B[H.bucketInstanceId].push(H.featureIndex))}return B}insertCollisionBox(l,f,y,x,T){(f?this.ignoredGrid:this.grid).insert({bucketInstanceId:y,featureIndex:x,collisionGroupID:T},l[0],l[1],l[2],l[3])}insertCollisionCircles(l,f,y,x,T){const M=f?this.ignoredGrid:this.grid,I={bucketInstanceId:y,featureIndex:x,collisionGroupID:T};for(let k=0;k<l.length;k+=4)M.insertCircle(I,l[k],l[k+1],l[k+2])}projectAndGetPerspectiveRatio(l,f,y,x,T,M,I){const k=[f,y,x,1];let B=!1;x||this.transform.pitch>0?(o.transformMat4$1(k,k,l),this.fogState&&T&&I.name!=="globe"&&(B=function(te,ie,se,ae,ce,Z){const ne=Z.calculateFogTileMatrix(ce),de=[ie,se,ae];return o.transformMat4(de,de,ne),Ce(te,de,Z.pitch,Z._fov)}(this.fogState,f,y,x,T.toUnwrapped(),this.transform)>.9)):gr(k,k,l);const R=k[3];return{point:new o.Point((k[0]/R+1)/2*this.transform.width+io,(-k[1]/R+1)/2*this.transform.height+io),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(I)/R*.5,1.5),signedDistanceFromCamera:R,occluded:M&&k[2]>R||B}}isOffscreen(l,f,y,x){return y<io||l>=this.screenRightBoundary||x<io||f>this.screenBottomBoundary}isInsideGrid(l,f,y,x){return y>=0&&l<this.gridRightBoundary&&x>=0&&f<this.gridBottomBoundary}getViewportMatrix(){const l=o.identity([]);return o.translate(l,l,[-100,-100,0]),l}}function Rs(m,l,f){const y=l.createTileMatrix(m,m.worldSize,f.toUnwrapped());return o.multiply(new Float32Array(16),m.projMatrix,y)}function yo(m,l,f){if(l.projection.name===f.projection.name)return m.projMatrix;const y=f.clone();return y.setProjection(l.projection),Rs(y,l.getProjection(),m)}function un(m,l,f){return l.name===f.projection.name?m.projMatrix:Rs(f,l,m)}class C2{constructor(l,f,y,x){this.opacity=l?Math.max(0,Math.min(1,l.opacity+(l.placed?f:-f))):x&&y?1:0,this.placed=y}isHidden(){return this.opacity===0&&!this.placed}}class Ia{constructor(l,f,y,x,T,M=!1){this.text=new C2(l?l.text:null,f,y,T),this.icon=new C2(l?l.icon:null,f,x,T),this.clipped=M}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Fu{constructor(l,f,y,x=!1){this.text=l,this.icon=f,this.skipFade=y,this.clipped=x}}class ju{constructor(){this.invProjMatrix=o.create(),this.viewportMatrix=o.create(),this.circles=[]}}class Wf{constructor(l,f,y,x,T){this.bucketInstanceId=l,this.featureIndex=f,this.sourceLayerIndex=y,this.bucketIndex=x,this.tileID=T}}class I2{constructor(l){this.crossSourceCollisions=l,this.maxGroupID=0,this.collisionGroups={}}get(l){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[l]){const f=++this.maxGroupID;this.collisionGroups[l]={ID:f,predicate:y=>y.collisionGroupID===f}}return this.collisionGroups[l]}}function $u(m,l,f,y,x){const{horizontalAlign:T,verticalAlign:M}=o.getAnchorAlignment(m),I=-(T-.5)*l,k=-(M-.5)*f,B=o.evaluateVariableOffset(m,y);return new o.Point(I+B[0]*x,k+B[1]*x)}function Nu(m,l,f,y,x){const T=new o.Point(m,l);return f&&T._rotate(y?x:-x),T}class u1{constructor(l,f,y,x,T){this.transform=l.clone(),this.projection=l.projection.name,this.collisionIndex=new Bu(this.transform,T),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=f,this.retainedQueryData={},this.collisionGroups=new I2(y),this.collisionCircleArrays={},this.prevPlacement=x,x&&(x.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(l,f,y,x){const T=y.getBucket(f),M=y.latestFeatureIndex;if(!T||!M||f.id!==T.layerIds[0])return;const I=T.layers[0].layout,k=y.collisionBoxArray,B=Math.pow(2,this.transform.zoom-y.tileID.overscaledZ),R=y.tileSize/o.EXTENT,H=y.tileID.toUnwrapped();this.transform.setProjection(T.projection);const te=(ie=y.tileID,se=T.getProjection(),ae=this.transform,se.name===this.projection?ae.calculateProjMatrix(ie.toUnwrapped()):Rs(ae,se,ie));var ie,se,ae;const ce=I.get("text-pitch-alignment")==="map",Z=I.get("text-rotation-alignment")==="map";f.compileFilter();const ne=f.dynamicFilter(),de=f.dynamicFilterNeedsFeature(),pe=this.transform.calculatePixelsToTileUnitsMatrix(y),Ee=Ii(te,y.tileID.canonical,ce,Z,this.transform,T.getProjection(),pe);let Me=null;if(ce){const Be=xr(te,y.tileID.canonical,ce,Z,this.transform,T.getProjection(),pe);Me=o.multiply([],this.transform.labelPlaneMatrix,Be)}let Ae=null;ne&&y.latestFeatureIndex&&(Ae={unwrappedTileID:H,dynamicFilter:ne,dynamicFilterNeedsFeature:de,featureIndex:y.latestFeatureIndex}),this.retainedQueryData[T.bucketInstanceId]=new Wf(T.bucketInstanceId,M,T.sourceLayerIndex,T.index,y.tileID);const Fe={bucket:T,layout:I,posMatrix:te,textLabelPlaneMatrix:Ee,labelToScreenMatrix:Me,clippingData:Ae,scale:B,textPixelRatio:R,holdingForFade:y.holdingForFade(),collisionBoxArray:k,partiallyEvaluatedTextSize:o.evaluateSizeForZoom(T.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:o.evaluateSizeForZoom(T.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(T.sourceID)};if(x)for(const Be of T.sortKeyRanges){const{sortKey:He,symbolInstanceStart:gt,symbolInstanceEnd:Ge}=Be;l.push({sortKey:He,symbolInstanceStart:gt,symbolInstanceEnd:Ge,parameters:Fe})}else l.push({symbolInstanceStart:0,symbolInstanceEnd:T.symbolInstances.length,parameters:Fe})}attemptAnchorPlacement(l,f,y,x,T,M,I,k,B,R,H,te,ie,se,ae,ce,Z,ne){const{textOffset0:de,textOffset1:pe,crossTileID:Ee}=te,Me=[de,pe],Ae=$u(l,y,x,Me,T),Fe=this.collisionIndex.placeCollisionBox(se,T,f,Nu(Ae.x,Ae.y,M,I,this.transform.angle),H,k,B,R.predicate);if(ce){const Be=se.getSymbolInstanceIconSize(ne,this.transform.zoom,te.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(se,Be,ce,Nu(Ae.x,Ae.y,M,I,this.transform.angle),H,k,B,R.predicate).box.length===0)return}if(Fe.box.length>0){let Be;return this.prevPlacement&&this.prevPlacement.variableOffsets[Ee]&&this.prevPlacement.placements[Ee]&&this.prevPlacement.placements[Ee].text&&(Be=this.prevPlacement.variableOffsets[Ee].anchor),this.variableOffsets[Ee]={textOffset:Me,width:y,height:x,anchor:l,textScale:T,prevAnchor:Be},this.markUsedJustification(se,l,te,ae),se.allowVerticalPlacement&&(this.markUsedOrientation(se,ae,te),this.placedOrientations[Ee]=ae),{shift:Ae,placedGlyphBoxes:Fe}}}placeLayerBucketPart(l,f,y,x){const{bucket:T,layout:M,posMatrix:I,textLabelPlaneMatrix:k,labelToScreenMatrix:B,clippingData:R,textPixelRatio:H,holdingForFade:te,collisionBoxArray:ie,partiallyEvaluatedTextSize:se,partiallyEvaluatedIconSize:ae,collisionGroup:ce}=l.parameters,Z=M.get("text-optional"),ne=M.get("icon-optional"),de=M.get("text-allow-overlap"),pe=M.get("icon-allow-overlap"),Ee=M.get("text-rotation-alignment")==="map",Me=M.get("text-pitch-alignment")==="map",Ae=M.get("icon-text-fit")!=="none",Fe=M.get("symbol-z-order")==="viewport-y";this.transform.setProjection(T.projection);let Be=de&&(pe||!T.hasIconData()||ne),He=pe&&(de||!T.hasTextData()||Z);!T.collisionArrays&&ie&&T.deserializeCollisionBoxes(ie),y&&x&&T.updateCollisionDebugBuffers(this.transform.zoom,ie);const gt=(Ge,ot,Ke)=>{const{crossTileID:mt,numVerticalGlyphVertices:qe}=Ge;if(R){const cn={zoom:this.transform.zoom,pitch:this.transform.pitch};let Nr=null;if(R.dynamicFilterNeedsFeature){const Cr=this.retainedQueryData[T.bucketInstanceId];Nr=R.featureIndex.loadFeature({featureIndex:Ge.featureIndex,bucketIndex:Cr.bucketIndex,sourceLayerIndex:Cr.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,R.dynamicFilter)(cn,Nr,this.retainedQueryData[T.bucketInstanceId].tileID.canonical,new o.Point(Ge.tileAnchorX,Ge.tileAnchorY),this.transform.calculateDistanceTileData(R.unwrappedTileID)))return this.placements[mt]=new Fu(!1,!1,!1,!0),void f.add(mt)}if(f.has(mt))return;if(te)return void(this.placements[mt]=new Fu(!1,!1,!1));let it=!1,_t=!1,ut=!0,vt=!1,Gt=!1,tr=null,jt={box:null,offscreen:null,occluded:null},Yt={box:null,offscreen:null,occluded:null},yr=null,dr=null,Ut=null,zr=0,Fr=0,jr=0;Ke.textFeatureIndex?zr=Ke.textFeatureIndex:Ge.useRuntimeCollisionCircles&&(zr=Ge.featureIndex),Ke.verticalTextFeatureIndex&&(Fr=Ke.verticalTextFeatureIndex);const $r=cn=>{cn.tileID=this.retainedQueryData[T.bucketInstanceId].tileID;const Nr=this.transform.elevation;(Nr||cn.elevation)&&(cn.elevation=Nr?Nr.getAtTileOffset(cn.tileID,cn.tileAnchorX,cn.tileAnchorY):0)},_i=Ke.textBox;if(_i){$r(_i);const cn=Cr=>{let Dn=o.WritingMode.horizontal;if(T.allowVerticalPlacement&&!Cr&&this.prevPlacement){const Oi=this.prevPlacement.placedOrientations[mt];Oi&&(this.placedOrientations[mt]=Oi,Dn=Oi,this.markUsedOrientation(T,Dn,Ge))}return Dn},Nr=(Cr,Dn)=>{if(T.allowVerticalPlacement&&qe>0&&Ke.verticalTextBox){for(const Oi of T.writingModes)if(Oi===o.WritingMode.vertical?(jt=Dn(),Yt=jt):jt=Cr(),jt&&jt.box&&jt.box.length)break}else jt=Cr()};if(M.get("text-variable-anchor")){let Cr=M.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[mt]){const on=this.prevPlacement.variableOffsets[mt];Cr.indexOf(on.anchor)>0&&(Cr=Cr.filter(Ni=>Ni!==on.anchor),Cr.unshift(on.anchor))}const Dn=(on,Ni,R1)=>{const Gs=T.getSymbolInstanceTextSize(se,Ge,this.transform.zoom,ot),sc=(on.x2-on.x1)*Gs+2*on.padding,Ba=(on.y2-on.y1)*Gs+2*on.padding,fs=Ae&&!pe?Ni:null;fs&&$r(fs);let Ws={box:[],offscreen:!1,occluded:!1};const B1=de?2*Cr.length:Cr.length;for(let lc=0;lc<B1;++lc){const z0=this.attemptAnchorPlacement(Cr[lc%Cr.length],on,sc,Ba,Gs,Ee,Me,H,I,ce,lc>=Cr.length,Ge,ot,T,R1,fs,se,ae);if(z0&&(Ws=z0.placedGlyphBoxes,Ws&&Ws.box&&Ws.box.length)){it=!0,tr=z0.shift;break}}return Ws};Nr(()=>Dn(_i,Ke.iconBox,o.WritingMode.horizontal),()=>{const on=Ke.verticalTextBox;return on&&$r(on),T.allowVerticalPlacement&&!(jt&&jt.box&&jt.box.length)&&qe>0&&on?Dn(on,Ke.verticalIconBox,o.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),jt&&(it=jt.box,ut=jt.offscreen,vt=jt.occluded);const Oi=cn(!(!jt||!jt.box));if(!it&&this.prevPlacement){const on=this.prevPlacement.variableOffsets[mt];on&&(this.variableOffsets[mt]=on,this.markUsedJustification(T,on.anchor,Ge,Oi))}}else{const Cr=(Dn,Oi)=>{const on=T.getSymbolInstanceTextSize(se,Ge,this.transform.zoom,ot),Ni=this.collisionIndex.placeCollisionBox(T,on,Dn,new o.Point(0,0),de,H,I,ce.predicate);return Ni&&Ni.box&&Ni.box.length&&(this.markUsedOrientation(T,Oi,Ge),this.placedOrientations[mt]=Oi),Ni};Nr(()=>Cr(_i,o.WritingMode.horizontal),()=>{const Dn=Ke.verticalTextBox;return T.allowVerticalPlacement&&qe>0&&Dn?($r(Dn),Cr(Dn,o.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),cn(!!(jt&&jt.box&&jt.box.length))}}if(yr=jt,it=yr&&yr.box&&yr.box.length>0,ut=yr&&yr.offscreen,vt=yr&&yr.occluded,Ge.useRuntimeCollisionCircles){const cn=T.text.placedSymbolArray.get(Ge.centerJustifiedTextSymbolIndex>=0?Ge.centerJustifiedTextSymbolIndex:Ge.verticalPlacedTextSymbolIndex),Nr=o.evaluateSizeForFeature(T.textSizeData,se,cn),Cr=M.get("text-padding");dr=this.collisionIndex.placeCollisionCircles(T,de,cn,T.lineVertexArray,T.glyphOffsetArray,Nr,I,k,B,y,Me,ce.predicate,Ge.collisionCircleDiameter*Nr/o.ONE_EM,Cr,this.retainedQueryData[T.bucketInstanceId].tileID),it=de||dr.circles.length>0&&!dr.collisionDetected,ut=ut&&dr.offscreen,vt=dr.occluded}if(Ke.iconFeatureIndex&&(jr=Ke.iconFeatureIndex),Ke.iconBox){const cn=Nr=>{$r(Nr);const Cr=Ae&&tr?Nu(tr.x,tr.y,Ee,Me,this.transform.angle):new o.Point(0,0),Dn=T.getSymbolInstanceIconSize(ae,this.transform.zoom,Ge.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(T,Dn,Nr,Cr,pe,H,I,ce.predicate)};Yt&&Yt.box&&Yt.box.length&&Ke.verticalIconBox?(Ut=cn(Ke.verticalIconBox),_t=Ut.box.length>0):(Ut=cn(Ke.iconBox),_t=Ut.box.length>0),ut=ut&&Ut.offscreen,Gt=Ut.occluded}const Jn=Z||Ge.numHorizontalGlyphVertices===0&&qe===0,bo=ne||Ge.numIconVertices===0;if(Jn||bo?bo?Jn||(_t=_t&&it):it=_t&&it:_t=it=_t&&it,it&&yr&&yr.box&&this.collisionIndex.insertCollisionBox(yr.box,M.get("text-ignore-placement"),T.bucketInstanceId,Yt&&Yt.box&&Fr?Fr:zr,ce.ID),_t&&Ut&&this.collisionIndex.insertCollisionBox(Ut.box,M.get("icon-ignore-placement"),T.bucketInstanceId,jr,ce.ID),dr&&(it&&this.collisionIndex.insertCollisionCircles(dr.circles,M.get("text-ignore-placement"),T.bucketInstanceId,zr,ce.ID),y)){const cn=T.bucketInstanceId;let Nr=this.collisionCircleArrays[cn];Nr===void 0&&(Nr=this.collisionCircleArrays[cn]=new ju);for(let Cr=0;Cr<dr.circles.length;Cr+=4)Nr.circles.push(dr.circles[Cr+0]),Nr.circles.push(dr.circles[Cr+1]),Nr.circles.push(dr.circles[Cr+2]),Nr.circles.push(dr.collisionDetected?1:0)}const ua=T.projection.name!=="globe";Be=Be&&(ua||!vt),He=He&&(ua||!Gt),this.placements[mt]=new Fu(it||Be,_t||He,ut||T.justReloaded),f.add(mt)};if(Fe){const Ge=T.getSortedSymbolIndexes(this.transform.angle);for(let ot=Ge.length-1;ot>=0;--ot){const Ke=Ge[ot];gt(T.symbolInstances.get(Ke),Ke,T.collisionArrays[Ke])}}else for(let Ge=l.symbolInstanceStart;Ge<l.symbolInstanceEnd;Ge++)gt(T.symbolInstances.get(Ge),Ge,T.collisionArrays[Ge]);if(y&&T.bucketInstanceId in this.collisionCircleArrays){const Ge=this.collisionCircleArrays[T.bucketInstanceId];o.invert(Ge.invProjMatrix,I),Ge.viewportMatrix=this.collisionIndex.getViewportMatrix()}T.justReloaded=!1}markUsedJustification(l,f,y,x){const{leftJustifiedTextSymbolIndex:T,centerJustifiedTextSymbolIndex:M,rightJustifiedTextSymbolIndex:I,verticalPlacedTextSymbolIndex:k,crossTileID:B}=y,R=o.getAnchorJustification(f),H=x===o.WritingMode.vertical?k:R==="left"?T:R==="center"?M:R==="right"?I:-1;T>=0&&(l.text.placedSymbolArray.get(T).crossTileID=H>=0&&T!==H?0:B),M>=0&&(l.text.placedSymbolArray.get(M).crossTileID=H>=0&&M!==H?0:B),I>=0&&(l.text.placedSymbolArray.get(I).crossTileID=H>=0&&I!==H?0:B),k>=0&&(l.text.placedSymbolArray.get(k).crossTileID=H>=0&&k!==H?0:B)}markUsedOrientation(l,f,y){const x=f===o.WritingMode.horizontal||f===o.WritingMode.horizontalOnly?f:0,T=f===o.WritingMode.vertical?f:0,{leftJustifiedTextSymbolIndex:M,centerJustifiedTextSymbolIndex:I,rightJustifiedTextSymbolIndex:k,verticalPlacedTextSymbolIndex:B}=y,R=l.text.placedSymbolArray;M>=0&&(R.get(M).placedOrientation=x),I>=0&&(R.get(I).placedOrientation=x),k>=0&&(R.get(k).placedOrientation=x),B>=0&&(R.get(B).placedOrientation=T)}commit(l){this.commitTime=l,this.zoomAtLastRecencyCheck=this.transform.zoom;const f=this.prevPlacement;let y=!1;this.prevZoomAdjustment=f?f.zoomAdjustment(this.transform.zoom):0;const x=f?f.symbolFadeChange(l):1,T=f?f.opacities:{},M=f?f.variableOffsets:{},I=f?f.placedOrientations:{};for(const k in this.placements){const B=this.placements[k],R=T[k];R?(this.opacities[k]=new Ia(R,x,B.text,B.icon,null,B.clipped),y=y||B.text!==R.text.placed||B.icon!==R.icon.placed):(this.opacities[k]=new Ia(null,x,B.text,B.icon,B.skipFade,B.clipped),y=y||B.text||B.icon)}for(const k in T){const B=T[k];if(!this.opacities[k]){const R=new Ia(B,x,!1,!1);R.isHidden()||(this.opacities[k]=R,y=y||B.text.placed||B.icon.placed)}}for(const k in M)this.variableOffsets[k]||!this.opacities[k]||this.opacities[k].isHidden()||(this.variableOffsets[k]=M[k]);for(const k in I)this.placedOrientations[k]||!this.opacities[k]||this.opacities[k].isHidden()||(this.placedOrientations[k]=I[k]);y?this.lastPlacementChangeTime=l:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=f?f.lastPlacementChangeTime:l)}updateLayerOpacities(l,f){const y=new Set;for(const x of f){const T=x.getBucket(l);T&&x.latestFeatureIndex&&l.id===T.layerIds[0]&&this.updateBucketOpacities(T,y,x.collisionBoxArray)}}updateBucketOpacities(l,f,y){l.hasTextData()&&l.text.opacityVertexArray.clear(),l.hasIconData()&&l.icon.opacityVertexArray.clear(),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexArray.clear(),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexArray.clear();const x=l.layers[0].layout,T=!!l.layers[0].dynamicFilter(),M=new Ia(null,0,!1,!1,!0),I=x.get("text-allow-overlap"),k=x.get("icon-allow-overlap"),B=x.get("text-variable-anchor"),R=x.get("text-rotation-alignment")==="map",H=x.get("text-pitch-alignment")==="map",te=x.get("icon-text-fit")!=="none",ie=new Ia(null,0,I&&(k||!l.hasIconData()||x.get("icon-optional")),k&&(I||!l.hasTextData()||x.get("text-optional")),!0);!l.collisionArrays&&y&&(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData())&&l.deserializeCollisionBoxes(y);const se=(ce,Z,ne)=>{for(let de=0;de<Z/4;de++)ce.opacityVertexArray.emplaceBack(ne)};let ae=0;for(let ce=0;ce<l.symbolInstances.length;ce++){const Z=l.symbolInstances.get(ce),{numHorizontalGlyphVertices:ne,numVerticalGlyphVertices:de,crossTileID:pe,numIconVertices:Ee}=Z,Me=f.has(pe);let Ae=this.opacities[pe];Me?Ae=M:Ae||(Ae=ie,this.opacities[pe]=Ae),f.add(pe);const Fe=ne>0||de>0,Be=Ee>0,He=this.placedOrientations[pe],gt=He===o.WritingMode.vertical,Ge=He===o.WritingMode.horizontal||He===o.WritingMode.horizontalOnly;if(!Fe&&!Be||Ae.isHidden()||ae++,Fe){const ot=Uu(Ae.text);se(l.text,ne,gt?xn:ot),se(l.text,de,Ge?xn:ot);const Ke=Ae.text.isHidden(),{leftJustifiedTextSymbolIndex:mt,centerJustifiedTextSymbolIndex:qe,rightJustifiedTextSymbolIndex:it,verticalPlacedTextSymbolIndex:_t}=Z,ut=l.text.placedSymbolArray,vt=Ke||gt?1:0;mt>=0&&(ut.get(mt).hidden=vt),qe>=0&&(ut.get(qe).hidden=vt),it>=0&&(ut.get(it).hidden=vt),_t>=0&&(ut.get(_t).hidden=Ke||Ge?1:0);const Gt=this.variableOffsets[pe];Gt&&this.markUsedJustification(l,Gt.anchor,Z,He);const tr=this.placedOrientations[pe];tr&&(this.markUsedJustification(l,"left",Z,tr),this.markUsedOrientation(l,tr,Z))}if(Be){const ot=Uu(Ae.icon),{placedIconSymbolIndex:Ke,verticalPlacedIconSymbolIndex:mt}=Z,qe=l.icon.placedSymbolArray,it=Ae.icon.isHidden()?1:0;Ke>=0&&(se(l.icon,Ee,gt?xn:ot),qe.get(Ke).hidden=it),mt>=0&&(se(l.icon,Z.numVerticalIconVertices,Ge?xn:ot),qe.get(mt).hidden=it)}if(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData()){const ot=l.collisionArrays[ce];if(ot){let Ke=new o.Point(0,0),mt=!0;if(ot.textBox||ot.verticalTextBox){if(B){const it=this.variableOffsets[pe];it?(Ke=$u(it.anchor,it.width,it.height,it.textOffset,it.textScale),R&&Ke._rotate(H?this.transform.angle:-this.transform.angle)):mt=!1}T&&(mt=!Ae.clipped),ot.textBox&&Pl(l.textCollisionBox.collisionVertexArray,Ae.text.placed,!mt||gt,Ke.x,Ke.y),ot.verticalTextBox&&Pl(l.textCollisionBox.collisionVertexArray,Ae.text.placed,!mt||Ge,Ke.x,Ke.y)}const qe=mt&&!!(!Ge&&ot.verticalIconBox);ot.iconBox&&Pl(l.iconCollisionBox.collisionVertexArray,Ae.icon.placed,qe,te?Ke.x:0,te?Ke.y:0),ot.verticalIconBox&&Pl(l.iconCollisionBox.collisionVertexArray,Ae.icon.placed,!qe,te?Ke.x:0,te?Ke.y:0)}}}if(l.fullyClipped=ae===0,l.sortFeatures(this.transform.angle),this.retainedQueryData[l.bucketInstanceId]&&(this.retainedQueryData[l.bucketInstanceId].featureSortOrder=l.featureSortOrder),l.hasTextData()&&l.text.opacityVertexBuffer&&l.text.opacityVertexBuffer.updateData(l.text.opacityVertexArray),l.hasIconData()&&l.icon.opacityVertexBuffer&&l.icon.opacityVertexBuffer.updateData(l.icon.opacityVertexArray),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexBuffer&&l.iconCollisionBox.collisionVertexBuffer.updateData(l.iconCollisionBox.collisionVertexArray),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexBuffer&&l.textCollisionBox.collisionVertexBuffer.updateData(l.textCollisionBox.collisionVertexArray),l.bucketInstanceId in this.collisionCircleArrays){const ce=this.collisionCircleArrays[l.bucketInstanceId];l.placementInvProjMatrix=ce.invProjMatrix,l.placementViewportMatrix=ce.viewportMatrix,l.collisionCircleArray=ce.circles,delete this.collisionCircleArrays[l.bucketInstanceId]}}symbolFadeChange(l){return this.fadeDuration===0?1:(l-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(l){return Math.max(0,(this.transform.zoom-l)/1.5)}hasTransitions(l){return this.stale||l-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(l,f){const y=this.zoomAtLastRecencyCheck===f?1-this.zoomAdjustment(f):1;return this.zoomAtLastRecencyCheck=f,this.commitTime+this.fadeDuration*y>l}setStale(){this.stale=!0}}function Pl(m,l,f,y,x){m.emplaceBack(l?1:0,f?1:0,y||0,x||0),m.emplaceBack(l?1:0,f?1:0,y||0,x||0),m.emplaceBack(l?1:0,f?1:0,y||0,x||0),m.emplaceBack(l?1:0,f?1:0,y||0,x||0)}const ji=Math.pow(2,25),Pn=Math.pow(2,24),qf=Math.pow(2,17),Hf=Math.pow(2,16),$i=Math.pow(2,9),_o=Math.pow(2,8),O2=Math.pow(2,1);function Uu(m){if(m.opacity===0&&!m.placed)return 0;if(m.opacity===1&&m.placed)return 4294967295;const l=m.placed?1:0,f=Math.floor(127*m.opacity);return f*ji+l*Pn+f*qf+l*Hf+f*$i+l*_o+f*O2+l}const xn=0;class Vu{constructor(l){this._sortAcrossTiles=l.layout.get("symbol-z-order")!=="viewport-y"&&l.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(l,f,y,x,T){const M=this._bucketParts;for(;this._currentTileIndex<l.length;)if(f.getBucketParts(M,x,l[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,T())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,M.sort((I,k)=>I.sortKey-k.sortKey));this._currentPartIndex<M.length;){const I=M[this._currentPartIndex];if(f.placeLayerBucketPart(I,this._seenCrossTileIDs,y,I.symbolInstanceStart===0),this._currentPartIndex++,T())return!0}return!1}}class Zf{constructor(l,f,y,x,T,M,I,k){this.placement=new u1(l,T,M,I,k),this._currentPlacementIndex=f.length-1,this._forceFullPlacement=y,this._showCollisionBoxes=x,this._done=!1}isDone(){return this._done}continuePlacement(l,f,y){const x=o.exported.now(),T=()=>{const M=o.exported.now()-x;return!this._forceFullPlacement&&M>2};for(;this._currentPlacementIndex>=0;){const M=f[l[this._currentPlacementIndex]],I=this.placement.collisionIndex.transform.zoom;if(M.type==="symbol"&&(!M.minzoom||M.minzoom<=I)&&(!M.maxzoom||M.maxzoom>I)){if(this._inProgressLayer||(this._inProgressLayer=new Vu(M)),this._inProgressLayer.continuePlacement(y[M.source],this.placement,this._showCollisionBoxes,M,T))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(l){return this.placement.commit(l),this.placement}}const Bs=512/o.EXTENT/2;class ai{constructor(l,f,y){this.tileID=l,this.bucketInstanceId=y,this.index=new o.KDBush(f.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const x=l.canonical.x*o.EXTENT,T=l.canonical.y*o.EXTENT;for(let M=0;M<f.length;M++){const{key:I,crossTileID:k,tileAnchorX:B,tileAnchorY:R}=f.get(M),H=Math.floor((x+B)*Bs),te=Math.floor((T+R)*Bs);this.index.add(H,te),this.keys.push(I),this.crossTileIDs.push(k)}this.index.finish()}findMatches(l,f,y){const x=this.tileID.canonical.z<f.canonical.z?1:Math.pow(2,this.tileID.canonical.z-f.canonical.z),T=Bs/Math.pow(2,f.canonical.z-this.tileID.canonical.z),M=f.canonical.x*o.EXTENT,I=f.canonical.y*o.EXTENT;for(let k=0;k<l.length;k++){const B=l.get(k);if(B.crossTileID)continue;const{key:R,tileAnchorX:H,tileAnchorY:te}=B,ie=Math.floor((M+H)*T),se=Math.floor((I+te)*T),ae=this.index.range(ie-x,se-x,ie+x,se+x);for(const ce of ae){const Z=this.crossTileIDs[ce];if(this.keys[ce]===R&&!y.has(Z)){y.add(Z),B.crossTileID=Z;break}}}}}class Xf{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Kf{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(l){const f=Math.round((l-this.lng)/360);if(f!==0)for(const y in this.indexes){const x=this.indexes[y],T={};for(const M in x){const I=x[M];I.tileID=I.tileID.unwrapTo(I.tileID.wrap+f),T[I.tileID.key]=I}this.indexes[y]=T}this.lng=l}addBucket(l,f,y){if(this.indexes[l.overscaledZ]&&this.indexes[l.overscaledZ][l.key]){if(this.indexes[l.overscaledZ][l.key].bucketInstanceId===f.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(l.overscaledZ,this.indexes[l.overscaledZ][l.key])}for(let T=0;T<f.symbolInstances.length;T++)f.symbolInstances.get(T).crossTileID=0;this.usedCrossTileIDs[l.overscaledZ]||(this.usedCrossTileIDs[l.overscaledZ]=new Set);const x=this.usedCrossTileIDs[l.overscaledZ];for(const T in this.indexes){const M=this.indexes[T];if(Number(T)>l.overscaledZ)for(const I in M){const k=M[I];k.tileID.isChildOf(l)&&k.findMatches(f.symbolInstances,l,x)}else{const I=M[l.scaledTo(Number(T)).key];I&&I.findMatches(f.symbolInstances,l,x)}}for(let T=0;T<f.symbolInstances.length;T++){const M=f.symbolInstances.get(T);M.crossTileID||(M.crossTileID=y.generate(),x.add(M.crossTileID))}return this.indexes[l.overscaledZ]===void 0&&(this.indexes[l.overscaledZ]={}),this.indexes[l.overscaledZ][l.key]=new ai(l,f.symbolInstances,f.bucketInstanceId),!0}removeBucketCrossTileIDs(l,f){for(const y of f.crossTileIDs)this.usedCrossTileIDs[l].delete(y)}removeStaleBuckets(l){let f=!1;for(const y in this.indexes){const x=this.indexes[y];for(const T in x)l[x[T].bucketInstanceId]||(this.removeBucketCrossTileIDs(y,x[T]),delete x[T],f=!0)}return f}}class Oa{constructor(){this.layerIndexes={},this.crossTileIDs=new Xf,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(l,f,y,x){let T=this.layerIndexes[l.id];T===void 0&&(T=this.layerIndexes[l.id]=new Kf);let M=!1;const I={};x.name!=="globe"&&T.handleWrapJump(y);for(const k of f){const B=k.getBucket(l);B&&l.id===B.layerIds[0]&&(B.bucketInstanceId||(B.bucketInstanceId=++this.maxBucketInstanceId),T.addBucket(k.tileID,B,this.crossTileIDs)&&(M=!0),I[B.bucketInstanceId]=!0)}return T.removeStaleBuckets(I)&&(M=!0),M}pruneUnusedLayers(l){const f={};l.forEach(y=>{f[y]=!0});for(const y in this.layerIndexes)f[y]||delete this.layerIndexes[y]}}const cs=(m,l)=>o.emitValidationErrors(m,l&&l.filter(f=>f.identifier!=="source.canvas")),c1=o.pick(er,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),jm=o.pick(er,["setCenter","setZoom","setBearing","setPitch"]),Yf={version:8,layers:[],sources:{}},Al={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class aa extends o.Evented{constructor(l,f={}){super(),this.map=l,this.dispatcher=new rt(mn(),this),this.imageManager=new ze,this.imageManager.setEventedParent(this),this.glyphManager=new o.GlyphManager(l._requestManager,f.localFontFamily?o.LocalGlyphMode.all:f.localIdeographFontFamily?o.LocalGlyphMode.ideographs:o.LocalGlyphMode.none,f.localFontFamily||f.localIdeographFontFamily),this.crossTileSymbolIndex=new Oa,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",o.getReferrer());const y=this;this._rtlTextPluginCallback=aa.registerForPluginStateChange(x=>{y.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:x.pluginStatus,pluginURL:x.pluginURL},(T,M)=>{if(o.triggerPluginCompletionEvent(T),M&&M.every(I=>I))for(const I in y._sourceCaches){const k=y._sourceCaches[I],B=k.getSource().type;B!=="vector"&&B!=="geojson"||k.reload()}})}),this.on("data",x=>{if(x.dataType!=="source"||x.sourceDataType!=="metadata")return;const T=this.getSource(x.sourceId);if(T&&T.vectorLayerIds)for(const M in this._layers){const I=this._layers[M];I.source===T.id&&this._validateLayer(I)}})}loadURL(l,f={}){this.fire(new o.Event("dataloading",{dataType:"style"}));const y=typeof f.validate=="boolean"?f.validate:!o.isMapboxURL(l);l=this.map._requestManager.normalizeStyleURL(l,f.accessToken);const x=this.map._requestManager.transformRequest(l,o.ResourceType.Style);this._request=o.getJSON(x,(T,M)=>{this._request=null,T?this.fire(new o.ErrorEvent(T)):M&&this._load(M,y)})}loadJSON(l,f={}){this.fire(new o.Event("dataloading",{dataType:"style"})),this._request=o.exported.frame(()=>{this._request=null,this._load(l,f.validate!==!1)})}loadEmpty(){this.fire(new o.Event("dataloading",{dataType:"style"})),this._load(Yf,!1)}_updateLayerCount(l,f){const y=f?1:-1;l.is3D()&&(this._num3DLayers+=y),l.type==="circle"&&(this._numCircleLayers+=y),l.type==="symbol"&&(this._numSymbolLayers+=y)}_load(l,f){if(f&&cs(this,o.validateStyle(l)))return;this._loaded=!0,this.stylesheet=o.clone$1(l),this._updateMapProjection();for(const x in l.sources)this.addSource(x,l.sources[x],{validate:!1});this._changed=!1,l.sprite?this._loadSprite(l.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(l.glyphs);const y=Dr(this.stylesheet.layers);this._order=y.map(x=>x.id),this._layers={},this._serializedLayers={};for(const x of y){const T=o.createStyleLayer(x);T.setEventedParent(this,{layer:{id:T.id}}),this._layers[T.id]=T,this._serializedLayers[T.id]=T.serialize(),this._updateLayerCount(T,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Je(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new o.Event("data",{dataType:"style"})),this.fire(new o.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}setProjection(l){l?this.stylesheet.projection=l:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(l){this._spriteRequest=function(f,y,x){let T,M,I;const k=o.exported.devicePixelRatio>1?"@2x":"";let B=o.getJSON(y.transformRequest(y.normalizeSpriteURL(f,k,".json"),o.ResourceType.SpriteJSON),(te,ie)=>{B=null,I||(I=te,T=ie,H())}),R=o.getImage(y.transformRequest(y.normalizeSpriteURL(f,k,".png"),o.ResourceType.SpriteImage),(te,ie)=>{R=null,I||(I=te,M=ie,H())});function H(){if(I)x(I);else if(T&&M){const te=o.exported.getImageData(M),ie={};for(const se in T){const{width:ae,height:ce,x:Z,y:ne,sdf:de,pixelRatio:pe,stretchX:Ee,stretchY:Me,content:Ae}=T[se],Fe=new o.RGBAImage({width:ae,height:ce});o.RGBAImage.copy(te,Fe,{x:Z,y:ne},{x:0,y:0},{width:ae,height:ce}),ie[se]={data:Fe,pixelRatio:pe,sdf:de,stretchX:Ee,stretchY:Me,content:Ae}}x(null,ie)}}return{cancel(){B&&(B.cancel(),B=null),R&&(R.cancel(),R=null)}}}(l,this.map._requestManager,(f,y)=>{if(this._spriteRequest=null,f)this.fire(new o.ErrorEvent(f));else if(y)for(const x in y)this.imageManager.addImage(x,y[x]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new o.Event("data",{dataType:"style"}))})}_validateLayer(l){const f=this.getSource(l.source);if(!f)return;const y=l.sourceLayer;y&&(f.type==="geojson"||f.vectorLayerIds&&f.vectorLayerIds.indexOf(y)===-1)&&this.fire(new o.ErrorEvent(new Error(`Source layer "${y}" does not exist on source "${f.id}" as specified by style layer "${l.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const l in this._sourceCaches)if(!this._sourceCaches[l].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(l){const f=[];for(const y of l){const x=this._layers[y];x.type!=="custom"&&f.push(x.serialize())}return f}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const l in this._sourceCaches)if(this._sourceCaches[l].hasTransition())return!0;for(const l in this._layers)if(this._layers[l].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(l){return!!this.terrain&&(typeof l.isLayerDraped=="function"?l.isLayerDraped():Al[l.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(l){if(!this._loaded)return;const f=this._changed;if(this._changed){const x=Object.keys(this._updatedLayers),T=Object.keys(this._removedLayers);(x.length||T.length)&&this._updateWorkerLayers(x,T);for(const M in this._updatedSources){const I=this._updatedSources[M];I==="reload"?this._reloadSource(M):I==="clear"&&this._clearSource(M)}this._updateTilesForChangedImages();for(const M in this._updatedPaintProps)this._layers[M].updateTransitions(l);this.light.updateTransitions(l),this.fog&&this.fog.updateTransitions(l),this._resetUpdates()}const y={};for(const x in this._sourceCaches){const T=this._sourceCaches[x];y[x]=T.used,T.used=!1}for(const x of this._order){const T=this._layers[x];if(T.recalculate(l,this._availableImages),!T.isHidden(l.zoom)){const I=this._getLayerSourceCache(T);I&&(I.used=!0)}const M=this.map.painter;if(M){const I=T.getProgramIds();if(!I)continue;const k=T.getProgramConfiguration(l.zoom);for(const B of I)M.useProgram(B,k)}}for(const x in y){const T=this._sourceCaches[x];y[x]!==T.used&&T.getSource().fire(new o.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:T.getSource().id}))}this.light.recalculate(l),this.terrain&&this.terrain.recalculate(l),this.fog&&this.fog.recalculate(l),this.z=l.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),f&&this.fire(new o.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const l=Object.keys(this._changedImages);if(l.length){for(const f in this._sourceCaches)this._sourceCaches[f].reloadTilesForDependencies(["icons","patterns"],l);this._changedImages={}}}_updateWorkerLayers(l,f){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(l),removedIds:f})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(l){if(this._checkLoaded(),cs(this,o.validateStyle(l)))return!1;(l=o.clone$1(l)).layers=Dr(l.layers);const f=function(x,T){if(!x)return[{command:er.setStyle,args:[T]}];let M=[];try{if(!_(x.version,T.version))return[{command:er.setStyle,args:[T]}];_(x.center,T.center)||M.push({command:er.setCenter,args:[T.center]}),_(x.zoom,T.zoom)||M.push({command:er.setZoom,args:[T.zoom]}),_(x.bearing,T.bearing)||M.push({command:er.setBearing,args:[T.bearing]}),_(x.pitch,T.pitch)||M.push({command:er.setPitch,args:[T.pitch]}),_(x.sprite,T.sprite)||M.push({command:er.setSprite,args:[T.sprite]}),_(x.glyphs,T.glyphs)||M.push({command:er.setGlyphs,args:[T.glyphs]}),_(x.transition,T.transition)||M.push({command:er.setTransition,args:[T.transition]}),_(x.light,T.light)||M.push({command:er.setLight,args:[T.light]}),_(x.fog,T.fog)||M.push({command:er.setFog,args:[T.fog]}),_(x.projection,T.projection)||M.push({command:er.setProjection,args:[T.projection]});const I={},k=[];(function(H,te,ie,se){let ae;for(ae in te=te||{},H=H||{})H.hasOwnProperty(ae)&&(te.hasOwnProperty(ae)||Ro(ae,ie,se));for(ae in te){if(!te.hasOwnProperty(ae))continue;const ce=te[ae];H.hasOwnProperty(ae)?_(H[ae],ce)||(H[ae].type==="geojson"&&ce.type==="geojson"&&Mi(H,te,ae)?ie.push({command:er.setGeoJSONSourceData,args:[ae,ce.data]}):ro(ae,te,ie,se)):oa(ae,te,ie)}})(x.sources,T.sources,k,I);const B=[];x.layers&&x.layers.forEach(H=>{H.source&&I[H.source]?M.push({command:er.removeLayer,args:[H.id]}):B.push(H)});let R=x.terrain;R&&I[R.source]&&(M.push({command:er.setTerrain,args:[void 0]}),R=void 0),M=M.concat(k),_(R,T.terrain)||M.push({command:er.setTerrain,args:[T.terrain]}),function(H,te,ie){te=te||[];const se=(H=H||[]).map(Ci),ae=te.map(Ci),ce=H.reduce(Bo,{}),Z=te.reduce(Bo,{}),ne=se.slice(),de=Object.create(null);let pe,Ee,Me,Ae,Fe,Be,He;for(pe=0,Ee=0;pe<se.length;pe++)Me=se[pe],Z.hasOwnProperty(Me)?Ee++:(ie.push({command:er.removeLayer,args:[Me]}),ne.splice(ne.indexOf(Me,Ee),1));for(pe=0,Ee=0;pe<ae.length;pe++)Me=ae[ae.length-1-pe],ne[ne.length-1-pe]!==Me&&(ce.hasOwnProperty(Me)?(ie.push({command:er.removeLayer,args:[Me]}),ne.splice(ne.lastIndexOf(Me,ne.length-Ee),1)):Ee++,Be=ne[ne.length-pe],ie.push({command:er.addLayer,args:[Z[Me],Be]}),ne.splice(ne.length-pe,0,Me),de[Me]=!0);for(pe=0;pe<ae.length;pe++)if(Me=ae[pe],Ae=ce[Me],Fe=Z[Me],!de[Me]&&!_(Ae,Fe))if(_(Ae.source,Fe.source)&&_(Ae["source-layer"],Fe["source-layer"])&&_(Ae.type,Fe.type)){for(He in Fi(Ae.layout,Fe.layout,ie,Me,null,er.setLayoutProperty),Fi(Ae.paint,Fe.paint,ie,Me,null,er.setPaintProperty),_(Ae.filter,Fe.filter)||ie.push({command:er.setFilter,args:[Me,Fe.filter]}),_(Ae.minzoom,Fe.minzoom)&&_(Ae.maxzoom,Fe.maxzoom)||ie.push({command:er.setLayerZoomRange,args:[Me,Fe.minzoom,Fe.maxzoom]}),Ae)Ae.hasOwnProperty(He)&&He!=="layout"&&He!=="paint"&&He!=="filter"&&He!=="metadata"&&He!=="minzoom"&&He!=="maxzoom"&&(He.indexOf("paint.")===0?Fi(Ae[He],Fe[He],ie,Me,He.slice(6),er.setPaintProperty):_(Ae[He],Fe[He])||ie.push({command:er.setLayerProperty,args:[Me,He,Fe[He]]}));for(He in Fe)Fe.hasOwnProperty(He)&&!Ae.hasOwnProperty(He)&&He!=="layout"&&He!=="paint"&&He!=="filter"&&He!=="metadata"&&He!=="minzoom"&&He!=="maxzoom"&&(He.indexOf("paint.")===0?Fi(Ae[He],Fe[He],ie,Me,He.slice(6),er.setPaintProperty):_(Ae[He],Fe[He])||ie.push({command:er.setLayerProperty,args:[Me,He,Fe[He]]}))}else ie.push({command:er.removeLayer,args:[Me]}),Be=ne[ne.lastIndexOf(Me)+1],ie.push({command:er.addLayer,args:[Fe,Be]})}(B,T.layers,M)}catch(I){console.warn("Unable to compute style diff:",I),M=[{command:er.setStyle,args:[T]}]}return M}(this.serialize(),l).filter(x=>!(x.command in jm));if(f.length===0)return!1;const y=f.filter(x=>!(x.command in c1));if(y.length>0)throw new Error(`Unimplemented: ${y.map(x=>x.command).join(", ")}.`);return f.forEach(x=>{x.command!=="setTransition"&&x.command!=="setProjection"&&this[x.command].apply(this,x.args)}),this.stylesheet=l,this._updateMapProjection(),!0}addImage(l,f){return this.getImage(l)?this.fire(new o.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(l,f),this._afterImageUpdated(l),this)}updateImage(l,f){this.imageManager.updateImage(l,f)}getImage(l){return this.imageManager.getImage(l)}removeImage(l){return this.getImage(l)?(this.imageManager.removeImage(l),this._afterImageUpdated(l),this):this.fire(new o.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(l){this._availableImages=this.imageManager.listImages(),this._changedImages[l]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(l,f,y={}){if(this._checkLoaded(),this.getSource(l)!==void 0)throw new Error("There is already a source with this ID");if(!f.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(f).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(f.type)>=0&&this._validate(o.validateSource,`sources.${l}`,f,null,y))return;this.map&&this.map._collectResourceTiming&&(f.collectResourceTiming=!0);const x=ht(l,f,this.dispatcher,this);x.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(l),source:x.serialize(),sourceId:l}));const T=M=>{const I=(M?"symbol:":"other:")+l,k=this._sourceCaches[I]=new o.SourceCache(I,x,M);(M?this._symbolSourceCaches:this._otherSourceCaches)[l]=k,k.style=this,k.onAdd(this.map)};T(!1),f.type!=="vector"&&f.type!=="geojson"||T(!0),x.onAdd&&x.onAdd(this.map),this._changed=!0}removeSource(l){this._checkLoaded();const f=this.getSource(l);if(!f)throw new Error("There is no source with this ID");for(const x in this._layers)if(this._layers[x].source===l)return this.fire(new o.ErrorEvent(new Error(`Source "${l}" cannot be removed while layer "${x}" is using it.`)));if(this.terrain&&this.terrain.get().source===l)return this.fire(new o.ErrorEvent(new Error(`Source "${l}" cannot be removed while terrain is using it.`)));const y=this._getSourceCaches(l);for(const x of y)delete this._sourceCaches[x.id],delete this._updatedSources[x.id],x.fire(new o.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:x.getSource().id})),x.setEventedParent(null),x.clearTiles();return delete this._otherSourceCaches[l],delete this._symbolSourceCaches[l],f.setEventedParent(null),f.onRemove&&f.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(l,f){this._checkLoaded(),this.getSource(l).setData(f),this._changed=!0}getSource(l){const f=this._getSourceCache(l);return f&&f.getSource()}_getSources(){const l=[];for(const f in this._otherSourceCaches){const y=this._getSourceCache(f);y&&l.push(y.getSource())}return l}addLayer(l,f,y={}){this._checkLoaded();const x=l.id;if(this.getLayer(x))return void this.fire(new o.ErrorEvent(new Error(`Layer with id "${x}" already exists on this map`)));let T;if(l.type==="custom"){if(cs(this,o.validateCustomStyleLayer(l)))return;T=o.createStyleLayer(l)}else{if(typeof l.source=="object"&&(this.addSource(x,l.source),l=o.clone$1(l),l=o.extend(l,{source:x})),this._validate(o.validateLayer,`layers.${x}`,l,{arrayIndex:-1},y))return;T=o.createStyleLayer(l),this._validateLayer(T),T.setEventedParent(this,{layer:{id:x}}),this._serializedLayers[T.id]=T.serialize(),this._updateLayerCount(T,!0)}const M=f?this._order.indexOf(f):this._order.length;if(f&&M===-1)return void this.fire(new o.ErrorEvent(new Error(`Layer with id "${f}" does not exist on this map.`)));this._order.splice(M,0,x),this._layerOrderChanged=!0,this._layers[x]=T;const I=this._getLayerSourceCache(T);if(this._removedLayers[x]&&T.source&&I&&T.type!=="custom"){const k=this._removedLayers[x];delete this._removedLayers[x],k.type!==T.type?this._updatedSources[T.source]="clear":(this._updatedSources[T.source]="reload",I.pause())}this._updateLayer(T),T.onAdd&&T.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(l,f){if(this._checkLoaded(),this._changed=!0,!this._layers[l])return void this.fire(new o.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be moved.`)));if(l===f)return;const y=this._order.indexOf(l);this._order.splice(y,1);const x=f?this._order.indexOf(f):this._order.length;f&&x===-1?this.fire(new o.ErrorEvent(new Error(`Layer with id "${f}" does not exist on this map.`))):(this._order.splice(x,0,l),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(l){this._checkLoaded();const f=this._layers[l];if(!f)return void this.fire(new o.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be removed.`)));f.setEventedParent(null),this._updateLayerCount(f,!1);const y=this._order.indexOf(l);this._order.splice(y,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[l]=f,delete this._layers[l],delete this._serializedLayers[l],delete this._updatedLayers[l],delete this._updatedPaintProps[l],f.onRemove&&f.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(l){return this._layers[l]}hasLayer(l){return l in this._layers}hasLayerType(l){for(const f in this._layers)if(this._layers[f].type===l)return!0;return!1}setLayerZoomRange(l,f,y){this._checkLoaded();const x=this.getLayer(l);x?x.minzoom===f&&x.maxzoom===y||(f!=null&&(x.minzoom=f),y!=null&&(x.maxzoom=y),this._updateLayer(x)):this.fire(new o.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(l,f,y={}){this._checkLoaded();const x=this.getLayer(l);if(x){if(!_(x.filter,f))return f==null?(x.filter=void 0,void this._updateLayer(x)):void(this._validate(o.validateFilter,`layers.${x.id}.filter`,f,{layerType:x.type},y)||(x.filter=o.clone$1(f),this._updateLayer(x)))}else this.fire(new o.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be filtered.`)))}getFilter(l){const f=this.getLayer(l);return f&&o.clone$1(f.filter)}setLayoutProperty(l,f,y,x={}){this._checkLoaded();const T=this.getLayer(l);T?_(T.getLayoutProperty(f),y)||(T.setLayoutProperty(f,y,x),this._updateLayer(T)):this.fire(new o.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(l,f){const y=this.getLayer(l);if(y)return y.getLayoutProperty(f);this.fire(new o.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style.`)))}setPaintProperty(l,f,y,x={}){this._checkLoaded();const T=this.getLayer(l);T?_(T.getPaintProperty(f),y)||(T.setPaintProperty(f,y,x)&&this._updateLayer(T),this._changed=!0,this._updatedPaintProps[l]=!0):this.fire(new o.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(l,f){const y=this.getLayer(l);return y&&y.getPaintProperty(f)}setFeatureState(l,f){this._checkLoaded();const y=l.source,x=l.sourceLayer,T=this.getSource(y);if(!T)return void this.fire(new o.ErrorEvent(new Error(`The source '${y}' does not exist in the map's style.`)));const M=T.type;if(M==="geojson"&&x)return void this.fire(new o.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(M==="vector"&&!x)return void this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));l.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided.")));const I=this._getSourceCaches(y);for(const k of I)k.setFeatureState(x,l.id,f)}removeFeatureState(l,f){this._checkLoaded();const y=l.source,x=this.getSource(y);if(!x)return void this.fire(new o.ErrorEvent(new Error(`The source '${y}' does not exist in the map's style.`)));const T=x.type,M=T==="vector"?l.sourceLayer:void 0;if(T==="vector"&&!M)return void this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(f&&typeof l.id!="string"&&typeof l.id!="number")return void this.fire(new o.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const I=this._getSourceCaches(y);for(const k of I)k.removeFeatureState(M,l.id,f)}getFeatureState(l){this._checkLoaded();const f=l.source,y=l.sourceLayer,x=this.getSource(f);if(x){if(x.type!=="vector"||y)return l.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(f)[0].getFeatureState(y,l.id);this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error(`The source '${f}' does not exist in the map's style.`)))}getTransition(){return o.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const l={};for(const f in this._sourceCaches){const y=this._sourceCaches[f].getSource();l[y.id]||(l[y.id]=y.serialize())}return o.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:l,layers:this._serializeLayers(this._order)},f=>f!==void 0)}_updateLayer(l){this._updatedLayers[l.id]=!0;const f=this._getLayerSourceCache(l);l.source&&!this._updatedSources[l.source]&&f&&f.getSource().type!=="raster"&&(this._updatedSources[l.source]="reload",f.pause()),this._changed=!0,l.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(l){const f=M=>this._layers[M].type==="fill-extrusion",y={},x=[];for(let M=this._order.length-1;M>=0;M--){const I=this._order[M];if(f(I)){y[I]=M;for(const k of l){const B=k[I];if(B)for(const R of B)x.push(R)}}}x.sort((M,I)=>I.intersectionZ-M.intersectionZ);const T=[];for(let M=this._order.length-1;M>=0;M--){const I=this._order[M];if(f(I))for(let k=x.length-1;k>=0;k--){const B=x[k].feature;if(y[B.layer.id]<M)break;T.push(B),x.pop()}else for(const k of l){const B=k[I];if(B)for(const R of B)T.push(R.feature)}}return T}queryRenderedFeatures(l,f,y){f&&f.filter&&this._validate(o.validateFilter,"queryRenderedFeatures.filter",f.filter,null,f);const x={};if(f&&f.layers){if(!Array.isArray(f.layers))return this.fire(new o.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const k of f.layers){const B=this._layers[k];if(!B)return this.fire(new o.ErrorEvent(new Error(`The layer '${k}' does not exist in the map's style and cannot be queried for features.`))),[];x[B.source]=!0}}const T=[];f.availableImages=this._availableImages;const M=f&&f.layers?f.layers.some(k=>{const B=this.getLayer(k);return B&&B.is3D()}):this.has3DLayers(),I=lt.createFromScreenPoints(l,y);for(const k in this._sourceCaches){const B=this._sourceCaches[k].getSource().id;f.layers&&!x[B]||T.push(Nt(this._sourceCaches[k],this._layers,this._serializedLayers,I,f,y,M,!!this.map._showQueryGeometry))}return this.placement&&T.push(function(k,B,R,H,te,ie,se){const ae={},ce=ie.queryRenderedSymbols(H),Z=[];for(const ne of Object.keys(ce).map(Number))Z.push(se[ne]);Z.sort(Ft);for(const ne of Z){const de=ne.featureIndex.lookupSymbolFeatures(ce[ne.bucketInstanceId],B,ne.bucketIndex,ne.sourceLayerIndex,te.filter,te.layers,te.availableImages,k);for(const pe in de){const Ee=ae[pe]=ae[pe]||[],Me=de[pe];Me.sort((Ae,Fe)=>{const Be=ne.featureSortOrder;if(Be){const He=Be.indexOf(Ae.featureIndex);return Be.indexOf(Fe.featureIndex)-He}return Fe.featureIndex-Ae.featureIndex});for(const Ae of Me)Ee.push(Ae)}}for(const ne in ae)ae[ne].forEach(de=>{const pe=de.feature,Ee=R(k[ne]);if(!Ee)return;const Me=Ee.getFeatureState(pe.layer["source-layer"],pe.id);pe.source=pe.layer.source,pe.layer["source-layer"]&&(pe.sourceLayer=pe.layer["source-layer"]),pe.state=Me});return ae}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),I.screenGeometry,f,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(T)}querySourceFeatures(l,f){f&&f.filter&&this._validate(o.validateFilter,"querySourceFeatures.filter",f.filter,null,f);const y=this._getSourceCaches(l);let x=[];for(const T of y)x=x.concat(kt(T,f));return x}addSourceType(l,f,y){return aa.getSourceType(l)?y(new Error(`A source type called "${l}" already exists.`)):(aa.setSourceType(l,f),f.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:l,url:f.workerSourceURL},y):y(null,null))}getLight(){return this.light.getLight()}setLight(l,f={}){this._checkLoaded();const y=this.light.getLight();let x=!1;for(const M in l)if(!_(l[M],y[M])){x=!0;break}if(!x)return;const T=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(l,f),this.light.updateTransitions(T)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(l,f=1){if(this._checkLoaded(),!l)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let y=l;if(f===1){if(typeof y.source=="object"){const x="terrain-dem-src";this.addSource(x,y.source),y=o.clone$1(y),y=o.extend(y,{source:x})}if(this._validate(o.validateTerrain,"terrain",y))return}if(!this.terrain||this.terrain&&f!==this.terrain.drapeRenderMode){if(!y)return;this._createTerrain(y,f)}else{const x=this.terrain,T=x.get();for(const M of Object.keys(o.spec.terrain))!y.hasOwnProperty(M)&&o.spec.terrain[M].default&&(y[M]=o.spec.terrain[M].default);for(const M in y)if(!_(y[M],T[M])){x.set(y),this.stylesheet.terrain=y;const I=this._setTransitionParameters({duration:0});x.updateTransitions(I);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(l){const f=this.fog=new $e(l,this.map.transform);this.stylesheet.fog=l;const y=this._setTransitionParameters({duration:0});f.updateTransitions(y)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const l of this.map._markers)l._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(l){if(this._checkLoaded(),!l)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const f=this.fog,y=f.get();Object.keys(l).length===0&&f.set(l);for(const x in l)if(!_(l[x],y[x])){f.set(l),this.stylesheet.fog=l;const T=this._setTransitionParameters({duration:0});f.updateTransitions(T);break}}else this._createFog(l);this._markersNeedUpdate=!0}_setTransitionParameters(l){return{now:o.exported.now(),transition:o.extend(l,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const l=this._order.filter(y=>this.isLayerDraped(this._layers[y])),f=this._order.filter(y=>!this.isLayerDraped(this._layers[y]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...l),this._drapedFirstOrder.push(...f)}_createTerrain(l,f){const y=this.terrain=new ve(l,f);this.stylesheet.terrain=l,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const x=this._setTransitionParameters({duration:0});y.updateTransitions(x)}_force3DLayerUpdate(){for(const l in this._layers){const f=this._layers[l];f.type==="fill-extrusion"&&this._updateLayer(f)}}_forceSymbolLayerUpdate(){for(const l in this._layers){const f=this._layers[l];f.type==="symbol"&&this._updateLayer(f)}}_validate(l,f,y,x,T={}){return(!T||T.validate!==!1)&&cs(this,l.call(o.validateStyle,o.extend({key:f,style:this.serialize(),value:y,styleSpec:o.spec},x)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),o.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const l in this._layers)this._layers[l].setEventedParent(null);for(const l in this._sourceCaches)this._sourceCaches[l].clearTiles(),this._sourceCaches[l].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(l){const f=this._getSourceCaches(l);for(const y of f)y.clearTiles()}_reloadSource(l){const f=this._getSourceCaches(l);for(const y of f)y.resume(),y.reload()}_reloadSources(){for(const l of this._getSources())l.reload&&l.reload()}_updateSources(l){for(const f in this._sourceCaches)this._sourceCaches[f].update(l)}_generateCollisionBoxes(){for(const l in this._sourceCaches){const f=this._sourceCaches[l];f.resume(),f.reload()}}_updatePlacement(l,f,y,x,T=!1){let M=!1,I=!1;const k={};for(const B of this._order){const R=this._layers[B];if(R.type!=="symbol")continue;if(!k[R.source]){const te=this._getLayerSourceCache(R);if(!te)continue;k[R.source]=te.getRenderableIds(!0).map(ie=>te.getTileByID(ie)).sort((ie,se)=>se.tileID.overscaledZ-ie.tileID.overscaledZ||(ie.tileID.isLessThan(se.tileID)?-1:1))}const H=this.crossTileSymbolIndex.addLayer(R,k[R.source],l.center.lng,l.projection);M=M||H}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),T=T||this._layerOrderChanged||y===0,this._layerOrderChanged&&this.fire(new o.Event("neworder")),(T||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(o.exported.now(),l.zoom))&&(this.pauseablePlacement=new Zf(l,this._order,T,f,y,x,this.placement,this.fog&&l.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,k),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(o.exported.now()),I=!0),M&&this.pauseablePlacement.placement.setStale()),I||M)for(const B of this._order){const R=this._layers[B];R.type==="symbol"&&this.placement.updateLayerOpacities(R,k[R.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(o.exported.now())}_releaseSymbolFadeTiles(){for(const l in this._sourceCaches)this._sourceCaches[l].releaseSymbolFadeTiles()}getImages(l,f,y){this.imageManager.getImages(f.icons,y),this._updateTilesForChangedImages();const x=T=>{T&&T.setDependencies(f.tileID.key,f.type,f.icons)};x(this._otherSourceCaches[f.source]),x(this._symbolSourceCaches[f.source])}getGlyphs(l,f,y){this.glyphManager.getGlyphs(f.stacks,y)}getResource(l,f,y){return o.makeRequest(f,y)}_getSourceCache(l){return this._otherSourceCaches[l]}_getLayerSourceCache(l){return l.type==="symbol"?this._symbolSourceCaches[l.source]:this._otherSourceCaches[l.source]}_getSourceCaches(l){const f=[];return this._otherSourceCaches[l]&&f.push(this._otherSourceCaches[l]),this._symbolSourceCaches[l]&&f.push(this._symbolSourceCaches[l]),f}_isSourceCacheLoaded(l){const f=this._getSourceCaches(l);return f.length===0?(this.fire(new o.ErrorEvent(new Error(`There is no source with ID '${l}'`))),!1):f.every(y=>y.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}aa.getSourceType=function(m){return et[m]},aa.setSourceType=function(m,l){et[m]=l},aa.registerForPluginStateChange=o.registerForPluginStateChange;var Jf=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#define EXTENT 8192.0
#define HALF_PI PI/2.0
#define QUARTER_PI PI/4.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0`,Fs="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",ka=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}
#ifdef TERRAIN
#ifdef TERRAIN_DEM_FLOAT_FORMAT
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;
#else
uniform sampler2D u_dem;uniform sampler2D u_dem_prev;
#endif
uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));
#ifdef TERRAIN_DEM_NEAREST_FILTER
return u_exaggeration*tl;
#endif
float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
float tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;
#else
vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);
#endif
return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,Gu=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,Da=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`;let h1={},Ml={};const Wu=[];Cl(Jf,Wu),Cl(ka,Wu),Cl(Gu,Wu),Cl(Da,Wu),h1=Lr("",ka),Ml=Lr(Da,Gu);const k2=Lr(`
#if __VERSION__ >=300
#define varying in
#define gl_FragColor glFragColor
#define texture2D texture
#define textureCube texture
out vec4 glFragColor;
#endif
highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}`,`
#if __VERSION__ >=300
#define attribute in
#define varying out
#define texture2D texture
#endif
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.`),f1=Jf,Qf=`
#ifdef GL_ES
precision mediump float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`;var e0={background:Lr(`uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
varying vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform vec4 u_color;varying vec4 v_color;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(u_color);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:Lr(`uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:Lr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
gl_FragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:Lr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Lr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:Lr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Lr("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:Lr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",`attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:Lr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",`attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;
#endif
varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:Lr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:Lr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:Lr(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:Lr(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:Lr(`varying vec4 v_color;
#ifdef RENDER_SHADOWS
varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
void main() {
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
vec3 normal=v_normal;
#endif
float z;vec4 color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);
#else
color=v_color;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;
#endif
#ifdef RENDER_SHADOWS
#ifdef ZERO_ROOF_RADIUS
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#endif
color.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec4 v_color;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
v_normal=normal;
#endif
base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
v_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(color,NdotL);
#else
v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_color*=u_opacity;
#ifdef ZERO_ROOF_RADIUS
v_roof_color=vec4(0.0,0.0,0.0,1.0);
#ifdef LIGHTING_3D_MODE
v_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));
#else
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionPattern:Lr(`uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
varying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,v_NdotL)*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec2 v_pos;varying vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_NdotL=NdotL;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),hillshadePrepare:Lr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
return texture2D(u_image,coord).a/4.0;
#else
vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;
#endif
}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Lr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
gl_FragColor=apply_lighting(gl_FragColor);
#endif
#ifdef FOG
gl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:Lr(`uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
uniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture2D(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trimmed=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef RENDER_LINE_ALPHA_DISCARD
if (alpha < u_alpha_discard_threshold) {discard;}
#endif
#ifdef RENDER_LINE_BORDER
float edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);
#ifdef RENDER_LINE_BORDER_AUTO
float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}
#else
out_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);
#endif
}
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define EXTRUDE_SCALE 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
attribute highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
attribute float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:Lr(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
color=apply_lighting(color);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:Lr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply(out_color,v_fog_pos));
#endif
gl_FragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),symbolIcon:Lr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}`),symbolSDF:Lr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}`),symbolTextAndIcon:Lr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}`),terrainRaster:Lr(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
void main() {vec4 color=texture2D(u_image0,v_pos0);
#ifdef RENDER_SHADOWS
color.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
const float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;
#ifdef TERRAIN_WIREFRAME
elevation+=wireframeOffset;
#endif
v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;
#endif
}`),terrainDepth:Lr(`#ifdef GL_ES
precision highp float;
#endif
varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}`,"uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:Lr(`
varying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Fs),skyboxGradient:Lr(`varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Fs),skyboxCapture:Lr(`
varying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;
#ifdef GL_ES
precision highp float;
#endif
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}`,"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:Lr(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);
#else
color=texture2D(u_image0,v_pos0);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
attribute vec3 a_globe_pos;attribute vec2 a_uv;
#else
attribute vec2 a_pos;
#endif
varying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);
#ifdef TERRAIN_WIREFRAME
height+=wireframeOffset;
#endif
globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:Lr(`uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:
(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:
uv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}`,`attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`)};function Cl(m,l){const f=m.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let y of f)if(y=y.trim(),y[0]==="#"&&y.includes("if")&&!y.includes("endif")){y=y.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const x=y.split(" ");for(const T of x)l.includes(T)||l.push(T)}}function Lr(m,l){const f=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,y=l.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),x={},T=[...Wu];return Cl(m,T),Cl(l,T),{fragmentSource:m=m.replace(f,(M,I,k,B,R)=>(x[R]=!0,I==="define"?`
#ifndef HAS_UNIFORM_u_${R}
varying ${k} ${B} ${R};
#else
uniform ${k} ${B} u_${R};
#endif
`:`
#ifdef HAS_UNIFORM_u_${R}
    ${k} ${B} ${R} = u_${R};
#endif
`)),vertexSource:l=l.replace(f,(M,I,k,B,R)=>{const H=B==="float"?"vec2":"vec4",te=R.match(/color/)?"color":H;return x[R]?I==="define"?`
#ifndef HAS_UNIFORM_u_${R}
uniform lowp float u_${R}_t;
attribute ${k} ${H} a_${R};
varying ${k} ${B} ${R};
#else
uniform ${k} ${B} u_${R};
#endif
`:te==="vec4"?`
#ifndef HAS_UNIFORM_u_${R}
    ${R} = a_${R};
#else
    ${k} ${B} ${R} = u_${R};
#endif
`:`
#ifndef HAS_UNIFORM_u_${R}
    ${R} = unpack_mix_${te}(a_${R}, u_${R}_t);
#else
    ${k} ${B} ${R} = u_${R};
#endif
`:I==="define"?`
#ifndef HAS_UNIFORM_u_${R}
uniform lowp float u_${R}_t;
attribute ${k} ${H} a_${R};
#else
uniform ${k} ${B} u_${R};
#endif
`:te==="vec4"?`
#ifndef HAS_UNIFORM_u_${R}
    ${k} ${B} ${R} = a_${R};
#else
    ${k} ${B} ${R} = u_${R};
#endif
`:`
#ifndef HAS_UNIFORM_u_${R}
    ${k} ${B} ${R} = unpack_mix_${te}(a_${R}, u_${R}_t);
#else
    ${k} ${B} ${R} = u_${R};
#endif
`}),staticAttributes:y,usedDefines:T}}class $m{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(l,f,y,x,T,M,I){this.context=l;let k=this.boundPaintVertexBuffers.length!==x.length;for(let R=0;!k&&R<x.length;R++)this.boundPaintVertexBuffers[R]!==x[R]&&(k=!0);let B=this.boundDynamicVertexBuffers.length!==I.length;for(let R=0;!B&&R<I.length;R++)this.boundDynamicVertexBuffers[R]!==I[R]&&(B=!0);if(!l.extVertexArrayObject||!this.vao||this.boundProgram!==f||this.boundLayoutVertexBuffer!==y||k||B||this.boundIndexBuffer!==T||this.boundVertexOffset!==M)this.freshBind(f,y,x,T,M,I);else{l.bindVertexArrayOES.set(this.vao);for(const R of I)R&&R.bind();T&&T.dynamicDraw&&T.bind()}}freshBind(l,f,y,x,T,M){let I;const k=l.numAttributes,B=this.context,R=B.gl;if(B.extVertexArrayObject)this.vao&&this.destroy(),this.vao=B.extVertexArrayObject.createVertexArrayOES(),B.bindVertexArrayOES.set(this.vao),I=0,this.boundProgram=l,this.boundLayoutVertexBuffer=f,this.boundPaintVertexBuffers=y,this.boundIndexBuffer=x,this.boundVertexOffset=T,this.boundDynamicVertexBuffers=M;else{I=B.currentNumAttributes||0;for(let H=k;H<I;H++)R.disableVertexAttribArray(H)}f.enableAttributes(R,l),f.bind(),f.setVertexAttribPointers(R,l,T);for(const H of y)H.enableAttributes(R,l),H.bind(),H.setVertexAttribPointers(R,l,T);for(const H of M)H&&(H.enableAttributes(R,l),H.bind(),H.setVertexAttribPointers(R,l,T));x&&x.bind(),B.currentNumAttributes=k}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function t0(m,l){const f=Math.pow(2,l.canonical.z),y=l.canonical.y;return[new o.MercatorCoordinate(0,y/f).toLngLat().lat,new o.MercatorCoordinate(0,(y+1)/f).toLngLat().lat]}function D2(m,l,f,y,x,T,M){const I=m.context,k=I.gl,B=f.fbo;if(!B)return;m.prepareDrawTile();const R=m.useProgram("hillshade");I.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,B.colorAttachment.get());const H=((ae,ce,Z,ne)=>{const de=Z.paint.get("hillshade-shadow-color"),pe=Z.paint.get("hillshade-highlight-color"),Ee=Z.paint.get("hillshade-accent-color");let Me=Z.paint.get("hillshade-illumination-direction")*(Math.PI/180);Z.paint.get("hillshade-illumination-anchor")==="viewport"&&(Me-=ae.transform.angle);const Ae=!ae.options.moving;return{u_matrix:ne||ae.transform.calculateProjMatrix(ce.tileID.toUnwrapped(),Ae),u_image:0,u_latrange:t0(0,ce.tileID),u_light:[Z.paint.get("hillshade-exaggeration"),Me],u_shadow:de,u_highlight:pe,u_accent:Ee}})(m,f,y,m.terrain?l.projMatrix:null);m.prepareDrawProgram(I,R,l.toUnwrapped());const{tileBoundsBuffer:te,tileBoundsIndexBuffer:ie,tileBoundsSegments:se}=m.getTileBoundsBuffers(f);R.draw(I,k.TRIANGLES,x,T,M,o.CullFaceMode.disabled,H,y.id,te,ie,se)}function r0(m,l,f){if(!l.needsDEMTextureUpload)return;const y=m.context,x=y.gl;y.pixelStoreUnpackPremultiplyAlpha.set(!1),l.demTexture=l.demTexture||m.getTileTexture(f.stride);const T=f.getPixels();l.demTexture?l.demTexture.update(T,{premultiply:!1}):l.demTexture=new o.Texture(y,T,x.RGBA,{premultiply:!1}),l.needsDEMTextureUpload=!1}function L2(m,l,f,y,x,T){const M=m.context,I=M.gl;if(!l.dem)return;const k=l.dem;if(M.activeTexture.set(I.TEXTURE1),r0(m,l,k),!l.demTexture)return;l.demTexture.bind(I.NEAREST,I.CLAMP_TO_EDGE);const B=k.dim;M.activeTexture.set(I.TEXTURE0);let R=l.fbo;if(!R){const se=new o.Texture(M,{width:B,height:B,data:null},I.RGBA);se.bind(I.LINEAR,I.CLAMP_TO_EDGE),R=l.fbo=M.createFramebuffer(B,B,!0),R.colorAttachment.set(se.texture)}M.bindFramebuffer.set(R.framebuffer),M.viewport.set([0,0,B,B]);const{tileBoundsBuffer:H,tileBoundsIndexBuffer:te,tileBoundsSegments:ie}=m.getMercatorTileBoundsBuffers();m.useProgram("hillshadePrepare").draw(M,I.TRIANGLES,y,x,T,o.CullFaceMode.disabled,((se,ae)=>{const ce=ae.stride,Z=o.create();return o.ortho(Z,0,o.EXTENT,-o.EXTENT,0,0,1),o.translate(Z,Z,[0,-o.EXTENT,0]),{u_matrix:Z,u_image:1,u_dimension:[ce,ce],u_zoom:se.overscaledZ,u_unpack:ae.unpackVector}})(l.tileID,k),f.id,H,te,ie),l.needsHillshadePrepare=!1}const n0=m=>({u_matrix:new o.UniformMatrix4f(m),u_image0:new o.Uniform1i(m),u_skirt_height:new o.Uniform1f(m)}),Il=(m,l)=>({u_matrix:m,u_image0:0,u_skirt_height:l}),d1=(m,l,f,y,x,T,M,I,k,B,R,H,te,ie,se)=>({u_proj_matrix:Float32Array.from(m),u_globe_matrix:l,u_normalize_matrix:Float32Array.from(y),u_merc_matrix:f,u_zoom_transition:x,u_merc_center:T,u_image0:0,u_frustum_tl:M,u_frustum_tr:I,u_frustum_br:k,u_frustum_bl:B,u_globe_pos:R,u_globe_radius:H,u_viewport:te,u_grid_matrix:se?Float32Array.from(se):new Float32Array(9),u_skirt_height:ie});function Ol(m,l){return m!=null&&l!=null&&!(!m.hasData()||!l.hasData())&&m.demTexture!=null&&l.demTexture!=null&&m.tileID.key!==l.tileID.key}const La=new class{constructor(){this.operations={}}newMorphing(m,l,f,y,x){if(m in this.operations){const T=this.operations[m];T.to.tileID.key!==f.tileID.key&&(T.queued=f)}else this.operations[m]={startTime:y,phase:0,duration:x,from:l,to:f,queued:null}}getMorphValuesForProxy(m){if(!(m in this.operations))return null;const l=this.operations[m];return{from:l.from,to:l.to,phase:l.phase}}update(m){for(const l in this.operations){const f=this.operations[l];for(f.phase=(m-f.startTime)/f.duration;f.phase>=1||!this._validOp(f);)if(!this._nextOp(f,m)){delete this.operations[l];break}}}_nextOp(m,l){return!!m.queued&&(m.from=m.to,m.to=m.queued,m.queued=null,m.phase=0,m.startTime=l,!0)}_validOp(m){return m.from.hasData()&&m.to.hasData()}},js={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function p1(m){return 6*Math.pow(1.5,22-m)}function z2(m,l){const f=1<<m.z;return!l&&(m.x===0||m.x===f-1)||m.y===0||m.y===f-1}const qu=m=>({u_matrix:m});function i0(m,l,f,y,x){if(x>0){const T=o.exported.now(),M=(T-m.timeAdded)/x,I=l?(T-l.timeAdded)/x:-1,k=f.getSource(),B=y.coveringZoomLevel({tileSize:k.tileSize,roundZoom:k.roundZoom}),R=!l||Math.abs(l.tileID.overscaledZ-B)>Math.abs(m.tileID.overscaledZ-B),H=R&&m.refreshedUponExpiration?1:o.clamp(R?M:1-I,0,1);return m.refreshedUponExpiration&&M>=1&&(m.refreshedUponExpiration=!1),l?{opacity:1,mix:1-H}:{opacity:H,mix:0}}return{opacity:1,mix:0}}class o0 extends o.SourceCache{constructor(l){const f={type:"raster-dem",maxzoom:l.transform.maxZoom},y=new rt(mn(),null),x=ht("mock-dem",f,y,l.style);super("mock-dem",x,!1),x.setEventedParent(this),this._sourceLoaded=!0}_loadTile(l,f){l.state="loaded",f(null)}}class m1 extends o.SourceCache{constructor(l){const f=ht("proxy",{type:"geojson",maxzoom:l.transform.maxZoom},new rt(mn(),null),l.style);super("proxy",f,!1),f.setEventedParent(this),this.map=this.getSource().map=l,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(l,f,y){if(l.freezeTileCoverage)return;this.transform=l;const x=l.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((T,M)=>{if(T[M.key]="",!this._tiles[M.key]){const I=new o.Tile(M,this._source.tileSize*M.overscaleFactor(),l.tileZoom);I.state="loaded",this._tiles[M.key]=I}return T},{});for(const T in this._tiles)T in x||(this.freeFBO(T),this._tiles[T].unloadVectorData(),delete this._tiles[T])}freeFBO(l){const f=this.proxyCachedFBO[l];if(f!==void 0){const y=Object.values(f);this.renderCachePool.push(...y),delete this.proxyCachedFBO[l]}}deallocRenderCache(){this.renderCache.forEach(l=>l.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class g1 extends o.OverscaledTileID{constructor(l,f,y){super(l.overscaledZ,l.wrap,l.canonical.z,l.canonical.x,l.canonical.y),this.proxyTileKey=f,this.projMatrix=y}}class a0 extends o.Elevation{constructor(l,f){super(),this.painter=l,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[y,x,T]=function(k){const B=new o.StructArrayLayout2i4,R=new o.StructArrayLayout3ui6,H=131;B.reserve(17161),R.reserve(33800);const te=o.EXTENT/128,ie=o.EXTENT+te/2,se=ie+te;for(let ce=-te;ce<se;ce+=te)for(let Z=-te;Z<se;Z+=te){const ne=Z<0||Z>ie||ce<0||ce>ie?24575:0,de=o.clamp(Math.round(Z),0,o.EXTENT),pe=o.clamp(Math.round(ce),0,o.EXTENT);B.emplaceBack(de+ne,pe)}const ae=(ce,Z)=>{const ne=Z*H+ce;R.emplaceBack(ne+1,ne,ne+H),R.emplaceBack(ne+H,ne+H+1,ne+1)};for(let ce=1;ce<129;ce++)for(let Z=1;Z<129;Z++)ae(Z,ce);return[0,129].forEach(ce=>{for(let Z=0;Z<130;Z++)ae(Z,ce),ae(ce,Z)}),[B,R,32768]}(),M=l.context;this.gridBuffer=M.createVertexBuffer(y,o.posAttributes.members),this.gridIndexBuffer=M.createIndexBuffer(x),this.gridSegments=o.SegmentVector.simpleSegment(0,0,y.length,x.length),this.gridNoSkirtSegments=o.SegmentVector.simpleSegment(0,0,y.length,T),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new m1(f.map),this.orthoMatrix=o.create(),o.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,o.EXTENT,0,o.EXTENT,0,1);const I=M.gl;this._overlapStencilMode=new o.StencilMode({func:I.GEQUAL,mask:255},0,255,I.KEEP,I.KEEP,I.REPLACE),this._previousZoom=l.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=f,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new o0(f.map)}set style(l){l.on("data",this._onStyleDataEvent.bind(this)),l.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=l,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(l,f,y){if(l&&l.terrain){this._style!==l&&(this.style=l),this.enabled=!0;const x=l.terrain.properties;this.sourceCache=l.terrain.drapeRenderMode===0?this._mockSourceCache:l._getSourceCache(x.get("source")),this._exaggeration=x.get("exaggeration");const T=()=>{this.sourceCache.used&&o.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const M=this.getScaledDemTileSize();this.sourceCache.update(f,M,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,T(),this._initializing=!0),T(),f.updateElevation(!0,y),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(f),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(l){this._findCoveringTileCache[l]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const l=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||l.efficiency!==100&&o.warnOnce(`Terrain render cache efficiency is not optimal (${l.efficiency}%) and performance
                may be affected negatively, consider placing all background, fill and line layers before layer
                with id '${l.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(l){l.coord&&l.dataType==="source"?this._clearRenderCacheForTile(l.sourceCacheId,l.coord):l.dataType==="style"&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const l in this._style._sourceCaches)this._style._sourceCaches[l].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(l=>l.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const l=2*this.proxySourceCache.getSource().tileSize;return[l,l]}set useVertexMorphing(l){this._useVertexMorphing=l}updateTileBinding(l){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const f=this.proxySourceCache,y=this.painter.transform;this._initializing&&(this._initializing=y._centerAltitude===0&&this.getAtPointOrZero(o.MercatorCoordinate.fromLngLat(y.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const x=this.proxyCoords=f.getIds().map(k=>{const B=f.getTileByID(k).tileID;return B.projMatrix=y.calculateProjMatrix(B.toUnwrapped()),B});(function(k,B){const R=B.transform.pointCoordinate(B.transform.getCameraPoint()),H=new o.Point(R.x,R.y);k.sort((te,ie)=>{if(ie.overscaledZ-te.overscaledZ)return ie.overscaledZ-te.overscaledZ;const se=new o.Point(te.canonical.x+(1<<te.canonical.z)*te.wrap,te.canonical.y),ae=new o.Point(ie.canonical.x+(1<<ie.canonical.z)*ie.wrap,ie.canonical.y),ce=H.mult(1<<te.canonical.z);return ce.x-=.5,ce.y-=.5,ce.distSqr(se)-ce.distSqr(ae)})})(x,this.painter),this._previousZoom=y.zoom;const T=this.proxyToSource||{};this.proxyToSource={},x.forEach(k=>{this.proxyToSource[k.key]={}}),this.terrainTileForTile={};const M=this._style._sourceCaches;for(const k in M){const B=M[k];if(!B.used||(B!==this.sourceCache&&this.resetTileLookupCache(B.id),this._setupProxiedCoordsForOrtho(B,l[k],T),B.usedForTerrain))continue;const R=l[k];B.getSource().reparseOverscaled&&this._assignTerrainTiles(R)}this.proxiedCoords[f.id]=x.map(k=>new g1(k,k.key,this.orthoMatrix)),this._assignTerrainTiles(x),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(T),this.renderingToTexture=!1,this._updateTimestamp=o.exported.now();const I={};this._visibleDemTiles=[];for(const k of this.proxyCoords){const B=this.terrainTileForTile[k.key];if(!B)continue;const R=B.tileID.key;R in I||(this._visibleDemTiles.push(B),I[R]=R)}}_assignTerrainTiles(l){this._initializing||l.forEach(f=>{if(this.terrainTileForTile[f.key])return;const y=this._findTileCoveringTileID(f,this.sourceCache);y&&(this.terrainTileForTile[f.key]=y)})}_prepareDEMTextures(){const l=this.painter.context,f=l.gl;for(const y in this.terrainTileForTile){const x=this.terrainTileForTile[y],T=x.dem;!T||x.demTexture&&!x.needsDEMTextureUpload||(l.activeTexture.set(f.TEXTURE1),r0(this.painter,x,T))}}_prepareDemTileUniforms(l,f,y,x){if(!f||f.demTexture==null)return!1;const T=l.tileID.canonical,M=Math.pow(2,f.tileID.canonical.z-T.z),I=x||"";return y[`u_dem_tl${I}`]=[T.x*M%1,T.y*M%1],y[`u_dem_scale${I}`]=M,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const l=this.painter.context,f=l.gl;if(!this._emptyDepthBufferTexture){const y=new o.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new o.Texture(l,y,f.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let l=0;const f=this._visibleDemTiles.reduce((y,x)=>{if(!x.dem)return y;const T=x.dem.tree.minimums[0];return T>0&&l++,y+T},0);return l?f/l:0}_updateEmptyDEMTexture(){const l=this.painter.context,f=l.gl;l.activeTexture.set(f.TEXTURE2);const y=this._getLoadedAreaMinimum(),x=new o.RGBAImage({width:1,height:1},new Uint8Array(o.DEMData.pack(y,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let T=this._emptyDEMTexture;return T?T.update(x,{premultiply:!1}):T=this._emptyDEMTexture=new o.Texture(l,x,f.RGBA,{premultiply:!1}),T}setupElevationDraw(l,f,y){const x=this.painter.context,T=x.gl,M=(I=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:o.DEMData.getUnpackVector(I),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var I;M.u_dem_size=this.sourceCache.getSource().tileSize,M.u_exaggeration=this.exaggeration();let k=null,B=null,R=1;if(y&&y.morphing&&this._useVertexMorphing){const H=y.morphing.srcDemTile,te=y.morphing.dstDemTile;R=y.morphing.phase,H&&te&&(this._prepareDemTileUniforms(l,H,M,"_prev")&&(B=H),this._prepareDemTileUniforms(l,te,M)&&(k=te))}if(B&&k?(x.activeTexture.set(T.TEXTURE2),k.demTexture.bind(T.NEAREST,T.CLAMP_TO_EDGE,T.NEAREST),x.activeTexture.set(T.TEXTURE4),B.demTexture.bind(T.NEAREST,T.CLAMP_TO_EDGE,T.NEAREST),M.u_dem_lerp=R):(k=this.terrainTileForTile[l.tileID.key],x.activeTexture.set(T.TEXTURE2),(this._prepareDemTileUniforms(l,k,M)?k.demTexture:this.emptyDEMTexture).bind(T.NEAREST,T.CLAMP_TO_EDGE)),x.activeTexture.set(T.TEXTURE3),y&&y.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(T.NEAREST,T.CLAMP_TO_EDGE),this._depthFBO&&(M.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(T.NEAREST,T.CLAMP_TO_EDGE),M.u_depth_size_inv=[1,1]),y&&y.useMeterToDem&&k){const H=(1<<k.tileID.canonical.z)*o.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;M.u_meter_to_dem=H}if(y&&y.labelPlaneMatrixInv&&(M.u_label_plane_matrix_inv=y.labelPlaneMatrixInv),f.setTerrainUniformValues(x,M),this.painter.transform.projection.name==="globe"){const H=this.globeUniformValues(this.painter.transform,l.tileID.canonical,y&&y.useDenormalizedUpVectorScale);f.setGlobeUniformValues(x,H)}}globeUniformValues(l,f,y){const x=l.projection;return{u_tile_tl_up:x.upVector(f,0,0),u_tile_tr_up:x.upVector(f,o.EXTENT,0),u_tile_br_up:x.upVector(f,o.EXTENT,o.EXTENT),u_tile_bl_up:x.upVector(f,0,o.EXTENT),u_tile_up_scale:y?o.globeMetersToEcef(1):x.upVectorScale(f,l.center.lat,l.worldSize).metersToTile}}renderToBackBuffer(l){const f=this.painter,y=this.painter.context;l.length!==0&&(y.bindFramebuffer.set(null),y.viewport.set([0,0,f.width,f.height]),f.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(x,T,M,I,k){if(x.transform.projection.name==="globe")(function(B,R,H,te,ie){const se=B.context,ae=se.gl;let ce,Z;const ne=B.options.showTerrainWireframe?2:0,de=B.transform,pe=o.globeUseCustomAntiAliasing(B,se,de),Ee=(mt,qe)=>{if(Z===mt)return;const it=[js[mt],"PROJECTION_GLOBE_VIEW"];pe&&it.push("CUSTOM_ANTIALIASING"),qe&&it.push(js[ne]),ce=B.useProgram("globeRaster",null,it),Z=mt},Me=B.colorModeForRenderPass(),Ae=new o.DepthMode(ae.LEQUAL,o.DepthMode.ReadWrite,B.depthRangeFor3D);La.update(ie);const Fe=o.calculateGlobeMercatorMatrix(de),Be=[o.mercatorXfromLng(de.center.lng),o.mercatorYfromLat(de.center.lat)],He=ne?[!1,!0]:[!1],gt=B.globeSharedBuffers,Ge=[de.width*o.exported.devicePixelRatio,de.height*o.exported.devicePixelRatio],ot=Float32Array.from(de.globeMatrix),Ke={useDenormalizedUpVectorScale:!0};if(He.forEach(mt=>{const qe=B.transform,it=p1(qe.zoom)*R.exaggeration();Z=-1;const _t=mt?ae.LINES:ae.TRIANGLES;for(const ut of te){const vt=H.getTile(ut),Gt=o.StencilMode.disabled,tr=R.prevTerrainTileForTile[ut.key],jt=R.terrainTileForTile[ut.key];Ol(tr,jt)&&La.newMorphing(ut.key,tr,jt,ie,250),se.activeTexture.set(ae.TEXTURE0),vt.texture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE);const Yt=La.getMorphValuesForProxy(ut.key),yr=Yt?1:0;Yt&&o.extend$1(Ke,{morphing:{srcDemTile:Yt.from,dstDemTile:Yt.to,phase:o.easeCubicInOut(Yt.phase)}});const dr=o.tileCornersToBounds(ut.canonical),Ut=o.getLatitudinalLod(dr.getCenter().lat),zr=o.getGridMatrix(ut.canonical,dr,Ut,qe.worldSize/qe._pixelsPerMercatorPixel),Fr=o.globeNormalizeECEF(o.globeTileBounds(ut.canonical)),jr=d1(qe.projMatrix,ot,Fe,Fr,o.globeToMercatorTransition(qe.zoom),Be,qe.frustumCorners.TL,qe.frustumCorners.TR,qe.frustumCorners.BR,qe.frustumCorners.BL,qe.globeCenterInViewSpace,qe.globeRadius,Ge,it,zr);if(Ee(yr,mt),R.setupElevationDraw(vt,ce,Ke),B.prepareDrawProgram(se,ce,ut.toUnwrapped()),gt){const[$r,_i,Jn]=mt?gt.getWirefameBuffers(B.context,Ut):gt.getGridBuffers(Ut,it!==0);ce.draw(se,_t,Ae,Gt,Me,o.CullFaceMode.backCCW,jr,"globe_raster",$r,_i,Jn)}}}),gt){const mt=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];pe&&mt.push("CUSTOM_ANTIALIASING"),ce=B.useProgram("globeRaster",null,mt);for(const qe of te){const{x:it,y:_t,z:ut}=qe.canonical,vt=_t===0,Gt=_t===(1<<ut)-1,[tr,jt,Yt,yr]=gt.getPoleBuffers(ut);if(yr&&(vt||Gt)){const dr=H.getTile(qe);se.activeTexture.set(ae.TEXTURE0),dr.texture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE);let Ut=o.globePoleMatrixForTile(ut,it,de);const zr=o.globeNormalizeECEF(o.globeTileBounds(qe.canonical)),Fr=(jr,$r)=>jr.draw(se,ae.TRIANGLES,Ae,o.StencilMode.disabled,Me,o.CullFaceMode.disabled,d1(de.projMatrix,Ut,Ut,zr,0,Be,de.frustumCorners.TL,de.frustumCorners.TR,de.frustumCorners.BR,de.frustumCorners.BL,de.globeCenterInViewSpace,de.globeRadius,Ge,0),"globe_pole_raster",$r,Yt,yr);R.setupElevationDraw(dr,ce,Ke),B.prepareDrawProgram(se,ce,qe.toUnwrapped()),vt&&Fr(ce,tr),Gt&&(Ut=o.scale(o.create(),Ut,[1,-1,1]),Fr(ce,jt))}}}})(x,T,M,I,k);else{const B=x.context,R=B.gl;let H,te;const ie=x.options.showTerrainWireframe?2:0,se=(de,pe)=>{if(te===de)return;const Ee=[js[de]];pe&&Ee.push(js[ie]),H=x.useProgram("terrainRaster",null,Ee),te=de},ae=x.colorModeForRenderPass(),ce=new o.DepthMode(R.LEQUAL,o.DepthMode.ReadWrite,x.depthRangeFor3D);La.update(k);const Z=x.transform,ne=p1(Z.zoom)*T.exaggeration();(ie?[!1,!0]:[!1]).forEach(de=>{te=-1;const pe=de?R.LINES:R.TRIANGLES,[Ee,Me]=de?T.getWirefameBuffer():[T.gridIndexBuffer,T.gridSegments];for(const Ae of I){const Fe=M.getTile(Ae),Be=o.StencilMode.disabled,He=T.prevTerrainTileForTile[Ae.key],gt=T.terrainTileForTile[Ae.key];Ol(He,gt)&&La.newMorphing(Ae.key,He,gt,k,250),B.activeTexture.set(R.TEXTURE0),Fe.texture.bind(R.LINEAR,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST);const Ge=La.getMorphValuesForProxy(Ae.key),ot=Ge?1:0;let Ke;Ge&&(Ke={morphing:{srcDemTile:Ge.from,dstDemTile:Ge.to,phase:o.easeCubicInOut(Ge.phase)}});const mt=Il(Ae.projMatrix,z2(Ae.canonical,Z.renderWorldCopies)?ne/10:ne);se(ot,de),T.setupElevationDraw(Fe,H,Ke),x.prepareDrawProgram(B,H,Ae.toUnwrapped()),H.draw(B,pe,ce,Be,ae,o.CullFaceMode.backCCW,mt,"terrain_raster",T.gridBuffer,Ee,Me)}})}}(f,this,this.proxySourceCache,l,this._updateTimestamp),this.renderingToTexture=!0,f.gpuTimingDeferredRenderEnd(),l.splice(0,l.length))}renderBatch(l){if(this._drapedRenderBatches.length===0)return l+1;this.renderingToTexture=!0;const f=this.painter,y=this.painter.context,x=this.proxySourceCache,T=this.proxiedCoords[x.id],M=this._drapedRenderBatches.shift(),I=[],k=f.style.order;let B=0;for(const R of T){const H=x.getTileByID(R.proxyTileKey),te=x.proxyCachedFBO[R.key]?x.proxyCachedFBO[R.key][l]:void 0,ie=te!==void 0?x.renderCache[te]:this.pool[B++],se=te!==void 0;if(H.texture=ie.tex,se&&!ie.dirty){I.push(H.tileID);continue}let ae;y.bindFramebuffer.set(ie.fb.framebuffer),this.renderedToTile=!1,ie.dirty&&(y.clear({color:o.Color.transparent,stencil:0}),ie.dirty=!1);for(let ce=M.start;ce<=M.end;++ce){const Z=f.style._layers[k[ce]];if(Z.isHidden(f.transform.zoom))continue;const ne=f.style._getLayerSourceCache(Z),de=ne?this.proxyToSource[R.key][ne.id]:[R];if(!de)continue;const pe=de;y.viewport.set([0,0,ie.fb.width,ie.fb.height]),ae!==(ne?ne.id:null)&&(this._setupStencil(ie,de,Z,ne),ae=ne?ne.id:null),f.renderLayer(f,ne,Z,pe)}this.renderedToTile?(ie.dirty=!0,I.push(H.tileID)):se||--B,B===5&&(B=0,this.renderToBackBuffer(I))}return this.renderToBackBuffer(I),this.renderingToTexture=!1,y.bindFramebuffer.set(null),y.viewport.set([0,0,f.width,f.height]),M.end+1}postRender(){}renderCacheEfficiency(l){const f=l.order.length;if(f===0)return{efficiency:100};let y,x=0,T=0,M=!1;for(let I=0;I<f;++I){const k=l._layers[l.order[I]];this._style.isLayerDraped(k)?(M&&++x,++T):M||(M=!0,y=k.id)}return T===0?{efficiency:100}:{efficiency:100*(1-x/T),firstUndrapedLayer:y}}getMinElevationBelowMSL(){let l=0;return this._visibleDemTiles.filter(f=>f.dem).forEach(f=>{l=Math.min(l,f.dem.tree.minimums[0])}),l===0?l:(l-30)*this._exaggeration}raycast(l,f,y){if(!this._visibleDemTiles)return null;const x=this._visibleDemTiles.filter(T=>T.dem).map(T=>{const M=T.tileID,I=1<<M.overscaledZ,{x:k,y:B}=M.canonical,R=k/I,H=(k+1)/I,te=B/I,ie=(B+1)/I;return{minx:R,miny:te,maxx:H,maxy:ie,t:T.dem.tree.raycastRoot(R,te,H,ie,l,f,y),tile:T}});x.sort((T,M)=>(T.t!==null?T.t:Number.MAX_VALUE)-(M.t!==null?M.t:Number.MAX_VALUE));for(const T of x){if(T.t==null)return null;const M=T.tile.dem.tree.raycast(T.minx,T.miny,T.maxx,T.maxy,l,f,y);if(M!=null)return M}return null}_createFBO(){const l=this.painter.context,f=l.gl,y=this.drapeBufferSize;l.activeTexture.set(f.TEXTURE0);const x=new o.Texture(l,{width:y[0],height:y[1],data:null},f.RGBA);x.bind(f.LINEAR,f.CLAMP_TO_EDGE);const T=l.createFramebuffer(y[0],y[1],!1);return T.colorAttachment.set(x.texture),T.depthAttachment=new Oe(l,T.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=l.createRenderbuffer(l.gl.DEPTH_STENCIL,y[0],y[1]),this._stencilRef=0,T.depthAttachment.set(this._sharedDepthStencil),l.clear({stencil:0})):T.depthAttachment.set(this._sharedDepthStencil),l.extTextureFilterAnisotropic&&!l.extTextureFilterAnisotropicForceOff&&f.texParameterf(f.TEXTURE_2D,l.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,l.extTextureFilterAnisotropicMax),{fb:T,tex:x,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const l in this._style._sourceCaches)if(this._style._sourceCaches[l].hasTransition())return!0;return this._style.order.some(l=>{const f=this._style._layers[l],y=f.isHidden(this.painter.transform.zoom);return f.type==="custom"?!y&&f.shouldRedrape():!y&&f.hasTransition()})}_clearLineLayersFromRenderCache(){let l=!1;for(const y of this._style._getSources())if(y instanceof St){l=!0;break}if(!l)return;const f={};for(let y=0;y<this._style.order.length;++y){const x=this._style._layers[this._style.order[y]],T=this._style._getLayerSourceCache(x);if(T&&!f[T.id]&&!x.isHidden(this.painter.transform.zoom)&&x.type==="line"&&x.widthExpression()instanceof o.ZoomDependentExpression){f[T.id]=!0;for(const M of this.proxyCoords){const I=this.proxyToSource[M.key][T.id];if(I)for(const k of I)this._clearRenderCacheForTile(T.id,k)}}}}_clearRasterLayersFromRenderCache(){let l=!1;for(const y in this._style._sourceCaches)if(this._style._sourceCaches[y]._source instanceof le){l=!0;break}if(!l)return;const f={};for(let y=0;y<this._style.order.length;++y){const x=this._style._layers[this._style.order[y]],T=this._style._getLayerSourceCache(x);if(!T||f[T.id]||x.isHidden(this.painter.transform.zoom)||x.type!=="raster")continue;const M=x.paint.get("raster-fade-duration");for(const I of this.proxyCoords){const k=this.proxyToSource[I.key][T.id];if(k)for(const B of k){const R=i0(T.getTile(B),T.findLoadedParent(B,0),T,this.painter.transform,M);(R.opacity!==1||R.mix!==0)&&this._clearRenderCacheForTile(T.id,B)}}}}_setupDrapedRenderBatches(){const l=this._style.order,f=l.length;if(f===0)return;const y=[];let x,T=0,M=this._style._layers[l[T]];for(;!this._style.isLayerDraped(M)&&M.isHidden(this.painter.transform.zoom)&&++T<f;)M=this._style._layers[l[T]];for(;T<f;++T){const I=this._style._layers[l[T]];I.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(I)?x===void 0&&(x=T):x!==void 0&&(y.push({start:x,end:T-1}),x=void 0))}x!==void 0&&y.push({start:x,end:T-1}),this._drapedRenderBatches=y}_setupRenderCache(l){const f=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,f.renderCache.length>f.renderCachePool.length){const M=Object.values(f.proxyCachedFBO);f.proxyCachedFBO={};for(let I=0;I<M.length;++I){const k=Object.values(M[I]);f.renderCachePool.push(...k)}}return}this._clearRasterLayersFromRenderCache();const y=this.proxyCoords,x=this._tilesDirty;for(let M=y.length-1;M>=0;M--){const I=y[M];if(f.getTileByID(I.key),f.proxyCachedFBO[I.key]!==void 0){const k=l[I.key],B=this.proxyToSource[I.key];let R=0;for(const H in B){const te=B[H],ie=k[H];if(!ie||ie.length!==te.length||te.some((se,ae)=>se!==ie[ae]||x[H]&&x[H].hasOwnProperty(se.key))){R=-1;break}++R}for(const H in f.proxyCachedFBO[I.key])f.renderCache[f.proxyCachedFBO[I.key][H]].dirty=R<0||R!==Object.values(k).length}}const T=[...this._drapedRenderBatches];T.sort((M,I)=>I.end-I.start-(M.end-M.start));for(const M of T)for(const I of y){if(f.proxyCachedFBO[I.key])continue;let k=f.renderCachePool.pop();k===void 0&&f.renderCache.length<50&&(k=f.renderCache.length,f.renderCache.push(this._createFBO())),k!==void 0&&(f.proxyCachedFBO[I.key]={},f.proxyCachedFBO[I.key][M.start]=k,f.renderCache[k].dirty=!0)}this._tilesDirty={}}_setupStencil(l,f,y,x){if(!x||!this._sourceTilesOverlap[x.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const T=this.painter.context,M=T.gl;if(f.length<=1)return void(this._overlapStencilType=!1);let I;if(y.isTileClipped())I=f.length,this._overlapStencilMode.test={func:M.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(f[0].overscaledZ>f[f.length-1].overscaledZ))return void(this._overlapStencilType=!1);I=1,this._overlapStencilMode.test={func:M.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+I>255&&(T.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=I,this._overlapStencilMode.ref=this._stencilRef,y.isTileClipped()&&this._renderTileClippingMasks(f,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(l){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[l.key]),this._overlapStencilMode):o.StencilMode.disabled}_renderTileClippingMasks(l,f){const y=this.painter,x=this.painter.context,T=x.gl;y._tileClippingMaskIDs={},x.setColorMode(o.ColorMode.disabled),x.setDepthMode(o.DepthMode.disabled);const M=y.useProgram("clippingMask");for(const I of l){const k=y._tileClippingMaskIDs[I.key]=--f;M.draw(x,T.TRIANGLES,o.DepthMode.disabled,new o.StencilMode({func:T.ALWAYS,mask:0},k,255,T.KEEP,T.KEEP,T.REPLACE),o.ColorMode.disabled,o.CullFaceMode.disabled,qu(I.projMatrix),"$clipping",y.tileExtentBuffer,y.quadTriangleIndexBuffer,y.tileExtentSegments)}}pointCoordinate(l){const f=this.painter.transform;if(l.x<0||l.x>f.width||l.y<0||l.y>f.height)return null;const y=[l.x,l.y,1,1];o.transformMat4$1(y,y,f.pixelMatrixInverse),o.scale$1(y,y,1/y[3]),y[0]/=f.worldSize,y[1]/=f.worldSize;const x=f._camera.position,T=o.mercatorZfromAltitude(1,f.center.lat),M=[x[0],x[1],x[2]/T,0],I=o.subtract([],y.slice(0,3),M);o.normalize(I,I);const k=this.raycast(M,I,this._exaggeration);return k!==null&&k?(o.scaleAndAdd(M,M,I,k),M[3]=M[2],M[2]*=T,M):null}drawDepth(){const l=this.painter,f=l.context,y=this.proxySourceCache,x=Math.ceil(l.width),T=Math.ceil(l.height);if(!this._depthFBO||this._depthFBO.width===x&&this._depthFBO.height===T||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const M=f.gl,I=f.createFramebuffer(x,T,!0);f.activeTexture.set(M.TEXTURE0);const k=new o.Texture(f,{width:x,height:T,data:null},M.RGBA);k.bind(M.NEAREST,M.CLAMP_TO_EDGE),I.colorAttachment.set(k.texture);const B=f.createRenderbuffer(f.gl.DEPTH_COMPONENT16,x,T);I.depthAttachment.set(B),this._depthFBO=I,this._depthTexture=k}f.bindFramebuffer.set(this._depthFBO.framebuffer),f.viewport.set([0,0,x,T]),function(M,I,k,B){if(M.transform.projection.name==="globe")return;const R=M.context,H=R.gl;R.clear({depth:1});const te=M.useProgram("terrainDepth"),ie=new o.DepthMode(H.LESS,o.DepthMode.ReadWrite,M.depthRangeFor3D);for(const se of B){const ae=k.getTile(se),ce=Il(se.projMatrix,0);I.setupElevationDraw(ae,te),te.draw(R,H.TRIANGLES,ie,o.StencilMode.disabled,o.ColorMode.unblended,o.CullFaceMode.backCCW,ce,"terrain_depth",I.gridBuffer,I.gridIndexBuffer,I.gridNoSkirtSegments)}}(l,this,y,this.proxyCoords)}_setupProxiedCoordsForOrtho(l,f,y){if(l.getSource()instanceof je)return this._setupProxiedCoordsForImageSource(l,f,y);this._findCoveringTileCache[l.id]=this._findCoveringTileCache[l.id]||{};const x=this.proxiedCoords[l.id]=[],T=this.proxyCoords;for(let I=0;I<T.length;I++){const k=T[I],B=this._findTileCoveringTileID(k,l);if(B){const R=this._createProxiedId(k,B,y[k.key]&&y[k.key][l.id]);x.push(R),this.proxyToSource[k.key][l.id]=[R]}}let M=!1;for(let I=0;I<f.length;I++){const k=l.getTile(f[I]);if(!k||!k.hasData())continue;const B=this._findTileCoveringTileID(k.tileID,this.proxySourceCache);if(B&&B.tileID.canonical.z!==k.tileID.canonical.z){const R=this.proxyToSource[B.tileID.key][l.id],H=this._createProxiedId(B.tileID,k,y[B.tileID.key]&&y[B.tileID.key][l.id]);R?R.splice(R.length-1,0,H):this.proxyToSource[B.tileID.key][l.id]=[H],x.push(H),M=!0}}this._sourceTilesOverlap[l.id]=M}_setupProxiedCoordsForImageSource(l,f,y){if(!l.getSource().loaded())return;const x=this.proxiedCoords[l.id]=[],T=this.proxyCoords,M=l.getSource(),I=new o.Point(M.tileID.x,M.tileID.y)._div(1<<M.tileID.z),k=M.coordinates.map(o.MercatorCoordinate.fromLngLat).reduce((R,H)=>(R.min.x=Math.min(R.min.x,H.x-I.x),R.min.y=Math.min(R.min.y,H.y-I.y),R.max.x=Math.max(R.max.x,H.x-I.x),R.max.y=Math.max(R.max.y,H.y-I.y),R),{min:new o.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new o.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),B=(R,H)=>{const te=R.wrap+R.canonical.x/(1<<R.canonical.z),ie=R.canonical.y/(1<<R.canonical.z),se=o.EXTENT/(1<<R.canonical.z),ae=H.wrap+H.canonical.x/(1<<H.canonical.z),ce=H.canonical.y/(1<<H.canonical.z);return te+se<ae+k.min.x||te>ae+k.max.x||ie+se<ce+k.min.y||ie>ce+k.max.y};for(let R=0;R<T.length;R++){const H=T[R];for(let te=0;te<f.length;te++){const ie=l.getTile(f[te]);if(!ie||!ie.hasData()||B(H,ie.tileID))continue;const se=this._createProxiedId(H,ie,y[H.key]&&y[H.key][l.id]),ae=this.proxyToSource[H.key][l.id];ae?ae.push(se):this.proxyToSource[H.key][l.id]=[se],x.push(se)}}}_createProxiedId(l,f,y){let x=this.orthoMatrix;if(y){const T=y.find(M=>M.key===f.tileID.key);if(T)return T}if(f.tileID.key!==l.key){const T=l.canonical.z-f.tileID.canonical.z;let M,I,k;x=o.create();const B=f.tileID.wrap-l.wrap<<l.overscaledZ;T>0?(M=o.EXTENT>>T,I=M*((f.tileID.canonical.x<<T)-l.canonical.x+B),k=M*((f.tileID.canonical.y<<T)-l.canonical.y)):(M=o.EXTENT<<-T,I=o.EXTENT*(f.tileID.canonical.x-(l.canonical.x+B<<-T)),k=o.EXTENT*(f.tileID.canonical.y-(l.canonical.y<<-T))),o.ortho(x,0,M,0,M,0,1),o.translate(x,x,[I,k,0])}return new g1(f.tileID,l.key,x)}_findTileCoveringTileID(l,f){let y=f.getTile(l);if(y&&y.hasData())return y;const x=this._findCoveringTileCache[f.id],T=x[l.key];if(y=T?f.getTileByID(T):null,y&&y.hasData()||T===null)return y;let M=y?y.tileID:l,I=M.overscaledZ;const k=f.getSource().minzoom,B=[];if(!T){const H=f.getSource().maxzoom;if(l.canonical.z>=H){const te=l.canonical.z-H;f.getSource().reparseOverscaled?(I=Math.max(l.canonical.z+2,f.transform.tileZoom),M=new o.OverscaledTileID(I,l.wrap,H,l.canonical.x>>te,l.canonical.y>>te)):te!==0&&(I=H,M=new o.OverscaledTileID(I,l.wrap,H,l.canonical.x>>te,l.canonical.y>>te))}M.key!==l.key&&(B.push(M.key),y=f.getTile(M))}const R=H=>{B.forEach(te=>{x[te]=H}),B.length=0};for(I-=1;I>=k&&(!y||!y.hasData());I--){y&&R(y.tileID.key);const H=M.calculateScaledKey(I);if(y=f.getTileByID(H),y&&y.hasData())break;const te=x[H];if(te===null)break;te===void 0?B.push(H):y=f.getTileByID(te)}return R(y?y.tileID.key:null),y&&y.hasData()?y:null}findDEMTileFor(l){return this.enabled?this._findTileCoveringTileID(l,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(l,f){let y=this._tilesDirty[l];y||(y=this._tilesDirty[l]={}),y[f.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const l=function(f){let y=0;const x=new o.StructArrayLayout2ui4,T=131;for(let M=1;M<129;M++){for(let I=1;I<129;I++)y=M*T+I,x.emplaceBack(y,y+1),x.emplaceBack(y,y+T),x.emplaceBack(y+1,y+T),M===128&&x.emplaceBack(y+T,y+T+1);x.emplaceBack(y+1,y+1+T)}return x}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(l),this.wireframeSegments=o.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,l.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class Sr{static cacheKey(l,f,y,x){let T=`${f}${x?x.cacheKey:""}`;for(const M of y)l.usedDefines.includes(M)&&(T+=`/${M}`);return T}constructor(l,f,y,x,T,M){const I=l.gl;this.program=I.createProgram();const k=function(Z){const ne=[];for(let de=0;de<Z.length;de++){if(Z[de]===null)continue;const pe=Z[de].split(" ");ne.push(pe.pop())}return ne}(y.staticAttributes),B=x?x.getBinderAttributes():[],R=k.concat(B);let H=x?x.defines():[];H=H.concat(M.map(Z=>`#define ${Z}`));const te=l.isWebGL2?`#version 300 es
`:"",ie=te+H.concat(l.extStandardDerivatives&&te.length===0?`#extension GL_OES_standard_derivatives : enable
`.concat(Qf):Qf,Qf,f1,k2.fragmentSource,Ml.fragmentSource,y.fragmentSource).join(`
`),se=te+H.concat(`
#ifdef GL_ES
precision highp float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,f1,k2.vertexSource,Ml.vertexSource,h1.vertexSource,y.vertexSource).join(`
`),ae=I.createShader(I.FRAGMENT_SHADER);if(I.isContextLost())return void(this.failedToCreate=!0);I.shaderSource(ae,ie),I.compileShader(ae),I.attachShader(this.program,ae);const ce=I.createShader(I.VERTEX_SHADER);if(I.isContextLost())this.failedToCreate=!0;else{I.shaderSource(ce,se),I.compileShader(ce),I.attachShader(this.program,ce),this.attributes={},this.numAttributes=R.length;for(let Z=0;Z<this.numAttributes;Z++)R[Z]&&(I.bindAttribLocation(this.program,Z,R[Z]),this.attributes[R[Z]]=Z);I.linkProgram(this.program),I.deleteShader(ce),I.deleteShader(ae),this.fixedUniforms=T(l),this.binderUniforms=x?x.getUniforms(l):[],M.includes("TERRAIN")&&(this.terrainUniforms=(Z=>({u_dem:new o.Uniform1i(Z),u_dem_prev:new o.Uniform1i(Z),u_dem_unpack:new o.Uniform4f(Z),u_dem_tl:new o.Uniform2f(Z),u_dem_scale:new o.Uniform1f(Z),u_dem_tl_prev:new o.Uniform2f(Z),u_dem_scale_prev:new o.Uniform1f(Z),u_dem_size:new o.Uniform1f(Z),u_dem_lerp:new o.Uniform1f(Z),u_exaggeration:new o.Uniform1f(Z),u_depth:new o.Uniform1i(Z),u_depth_size_inv:new o.Uniform2f(Z),u_meter_to_dem:new o.Uniform1f(Z),u_label_plane_matrix_inv:new o.UniformMatrix4f(Z)}))(l)),M.includes("GLOBE")&&(this.globeUniforms=(Z=>({u_tile_tl_up:new o.Uniform3f(Z),u_tile_tr_up:new o.Uniform3f(Z),u_tile_br_up:new o.Uniform3f(Z),u_tile_bl_up:new o.Uniform3f(Z),u_tile_up_scale:new o.Uniform1f(Z)}))(l)),M.includes("FOG")&&(this.fogUniforms=(Z=>({u_fog_matrix:new o.UniformMatrix4f(Z),u_fog_range:new o.Uniform2f(Z),u_fog_color:new o.Uniform4f(Z),u_fog_horizon_blend:new o.Uniform1f(Z),u_fog_temporal_offset:new o.Uniform1f(Z),u_frustum_tl:new o.Uniform3f(Z),u_frustum_tr:new o.Uniform3f(Z),u_frustum_br:new o.Uniform3f(Z),u_frustum_bl:new o.Uniform3f(Z),u_globe_pos:new o.Uniform3f(Z),u_globe_radius:new o.Uniform1f(Z),u_globe_transition:new o.Uniform1f(Z),u_is_globe:new o.Uniform1i(Z),u_viewport:new o.Uniform2f(Z)}))(l))}}setTerrainUniformValues(l,f){if(!this.terrainUniforms)return;const y=this.terrainUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const x in f)y[x]&&y[x].set(this.program,x,f[x])}}setGlobeUniformValues(l,f){if(!this.globeUniforms)return;const y=this.globeUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const x in f)y[x]&&y[x].set(this.program,x,f[x])}}setFogUniformValues(l,f){if(!this.fogUniforms)return;const y=this.fogUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const x in f)y[x].set(this.program,x,f[x])}}draw(l,f,y,x,T,M,I,k,B,R,H,te,ie,se,ae){const ce=l.gl;if(this.failedToCreate)return;l.program.set(this.program),l.setDepthMode(y),l.setStencilMode(x),l.setColorMode(T),l.setCullFace(M);for(const ne of Object.keys(this.fixedUniforms))this.fixedUniforms[ne].set(this.program,ne,I[ne]);se&&se.setUniforms(this.program,l,this.binderUniforms,te,{zoom:ie});const Z={[ce.LINES]:2,[ce.TRIANGLES]:3,[ce.LINE_STRIP]:1}[f];for(const ne of H.get()){const de=ne.vaos||(ne.vaos={});(de[k]||(de[k]=new $m)).bind(l,this,B,se?se.getPaintVertexBuffers():[],R,ne.vertexOffset,ae||[]),ce.drawElements(f,ne.primitiveLength*Z,ce.UNSIGNED_SHORT,ne.primitiveOffset*Z*2)}}}function Hu(m,l){const f=Math.pow(2,l.tileID.overscaledZ),y=l.tileSize*Math.pow(2,m.transform.tileZoom)/f,x=y*(l.tileID.canonical.x+l.tileID.wrap*f),T=y*l.tileID.canonical.y;return{u_image:0,u_texsize:l.imageAtlasTexture.size,u_tile_units_to_pixels:1/ft(l,1,m.transform.tileZoom),u_pixel_coord_upper:[x>>16,T>>16],u_pixel_coord_lower:[65535&x,65535&T]}}const R2=o.create(),s0=(m,l,f,y,x,T,M,I,k,B,R)=>{const H=l.style.light,te=H.properties.get("position"),ie=[te.x,te.y,te.z],se=o.create$1();H.properties.get("anchor")==="viewport"&&(o.fromRotation(se,-l.transform.angle),o.transformMat3(ie,ie,se));const ae=H.properties.get("color"),ce=l.transform,Z={u_matrix:m,u_lightpos:ie,u_lightintensity:H.properties.get("intensity"),u_lightcolor:[ae.r,ae.g,ae.b],u_vertical_gradient:+f,u_opacity:y,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:R2,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:x,u_edge_radius:T};return ce.projection.name==="globe"&&(Z.u_tile_id=[M.canonical.x,M.canonical.y,1<<M.canonical.z],Z.u_zoom_transition=k,Z.u_inv_rot_matrix=R,Z.u_merc_center=B,Z.u_up_dir=ce.projection.upVector(new o.CanonicalTileID(0,0,0),B[0]*o.EXTENT,B[1]*o.EXTENT),Z.u_height_lift=I),Z},B2=(m,l,f,y,x,T,M,I,k,B,R,H)=>{const te=s0(m,l,f,y,x,T,M,k,B,R,H),ie={u_height_factor:-Math.pow(2,M.overscaledZ)/I.tileSize/8};return o.extend(te,Hu(l,I),ie)},$s=m=>({u_matrix:m}),l0=(m,l,f)=>o.extend($s(m),Hu(l,f)),Nm=(m,l)=>({u_matrix:m,u_world:l}),Um=(m,l,f,y)=>o.extend(l0(m,l,f),{u_world:y}),Vm=o.create(),u0=(m,l,f,y,x,T)=>{const M=m.transform,I=M.projection.name==="globe";let k;if(T.paint.get("circle-pitch-alignment")==="map")if(I){const R=o.globePixelsToTileUnits(M.zoom,l.canonical)*M._pixelsPerMercatorPixel;k=Float32Array.from([R,0,0,R])}else k=M.calculatePixelsToTileUnitsMatrix(f);else k=new Float32Array([M.pixelsToGLUnits[0],0,0,M.pixelsToGLUnits[1]]);const B={u_camera_to_center_distance:M.cameraToCenterDistance,u_matrix:m.translatePosMatrix(l.projMatrix,f,T.paint.get("circle-translate"),T.paint.get("circle-translate-anchor")),u_device_pixel_ratio:o.exported.devicePixelRatio,u_extrude_scale:k,u_inv_rot_matrix:Vm,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(I){B.u_inv_rot_matrix=y,B.u_merc_center=x,B.u_tile_id=[l.canonical.x,l.canonical.y,1<<l.canonical.z],B.u_zoom_transition=o.globeToMercatorTransition(M.zoom);const R=x[0]*o.EXTENT,H=x[1]*o.EXTENT;B.u_up_dir=M.projection.upVector(new o.CanonicalTileID(0,0,0),R,H)}return B},c0=m=>{const l=[];return m.paint.get("circle-pitch-alignment")==="map"&&l.push("PITCH_WITH_MAP"),m.paint.get("circle-pitch-scale")==="map"&&l.push("SCALE_WITH_MAP"),l},h0=(m,l,f,y)=>{const x=o.EXTENT/f.tileSize;return{u_matrix:m,u_camera_to_center_distance:l.getCameraToCenterDistance(y),u_extrude_scale:[l.pixelsToGLUnits[0]/x,l.pixelsToGLUnits[1]/x]}},y1=(m,l,f=1)=>({u_matrix:m,u_color:l,u_overlay:0,u_overlay_scale:f}),F2=o.create(),j2=(m,l,f,y,x,T,M)=>{const I=m.transform,k=I.projection.name==="globe",B=k?o.globePixelsToTileUnits(I.zoom,l.canonical)*I._pixelsPerMercatorPixel:ft(f,1,T),R={u_matrix:l.projMatrix,u_extrude_scale:B,u_intensity:M,u_inv_rot_matrix:F2,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(k){R.u_inv_rot_matrix=y,R.u_merc_center=x,R.u_tile_id=[l.canonical.x,l.canonical.y,1<<l.canonical.z],R.u_zoom_transition=o.globeToMercatorTransition(I.zoom);const H=x[0]*o.EXTENT,te=x[1]*o.EXTENT;R.u_up_dir=I.projection.upVector(new o.CanonicalTileID(0,0,0),H,te)}return R},Gm=(m,l,f,y,x,T,M)=>{const I=m.transform,k=I.calculatePixelsToTileUnitsMatrix(l);return{u_matrix:f0(m,l,f,y),u_pixels_to_tile_units:k,u_device_pixel_ratio:T,u_units_to_pixels:[1/I.pixelsToGLUnits[0],1/I.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:x,u_texsize:Xu(f)?l.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:kl(l,m.transform),u_alpha_discard_threshold:0,u_trim_offset:M}},Zu=(m,l,f,y,x)=>{const T=m.transform;return{u_matrix:f0(m,l,f,y),u_texsize:l.imageAtlasTexture.size,u_pixels_to_tile_units:T.calculatePixelsToTileUnitsMatrix(l),u_device_pixel_ratio:x,u_image:0,u_tile_units_to_pixels:kl(l,T),u_units_to_pixels:[1/T.pixelsToGLUnits[0],1/T.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function kl(m,l){return 1/ft(m,1,l.tileZoom)}function f0(m,l,f,y){return m.translatePosMatrix(y||l.tileID.projMatrix,l,f.paint.get("line-translate"),f.paint.get("line-translate-anchor"))}function Xu(m){const l=m.paint.get("line-dasharray").value;return l.value||l.kind!=="constant"}const d0=(m,l,f,y,x,T)=>{return{u_matrix:m,u_tl_parent:l,u_scale_parent:f,u_fade_t:y.mix,u_opacity:y.opacity*x.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:x.paint.get("raster-brightness-min"),u_brightness_high:x.paint.get("raster-brightness-max"),u_saturation_factor:(I=x.paint.get("raster-saturation"),I>0?1-1/(1.001-I):-I),u_contrast_factor:(M=x.paint.get("raster-contrast"),M>0?1/(1-M):1+M),u_spin_weights:sa(x.paint.get("raster-hue-rotate")),u_perspective_transform:T};var M,I};function sa(m){m*=Math.PI/180;const l=Math.sin(m),f=Math.cos(m);return[(2*f+1)/3,(-Math.sqrt(3)*l-f+1)/3,(Math.sqrt(3)*l-f+1)/3]}const _1=o.create(),p0=(m,l,f,y,x,T,M,I,k,B,R,H,te,ie,se,ae)=>{const ce=x.transform,Z={u_is_size_zoom_constant:+(m==="constant"||m==="source"),u_is_size_feature_constant:+(m==="constant"||m==="camera"),u_size_t:l?l.uSizeT:0,u_size:l?l.uSize:0,u_camera_to_center_distance:ce.cameraToCenterDistance,u_rotate_symbol:+f,u_aspect_ratio:ce.width/ce.height,u_fade_change:x.options.fadeDuration?x.symbolFadeChange:1,u_matrix:T,u_label_plane_matrix:M,u_coord_matrix:I,u_is_text:+k,u_pitch_with_map:+y,u_texsize:B,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:_1,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:_1,u_up_vector:[0,-1,0]};return ae.name==="globe"&&(Z.u_tile_id=[R.canonical.x,R.canonical.y,1<<R.canonical.z],Z.u_zoom_transition=H,Z.u_inv_rot_matrix=ie,Z.u_merc_center=te,Z.u_camera_forward=ce._camera.forward(),Z.u_ecef_origin=o.globeECEFOrigin(ce.globeMatrix,R.toUnwrapped()),Z.u_tile_matrix=Float32Array.from(ce.globeMatrix),Z.u_up_vector=se),Z},v1=(m,l,f,y,x,T,M,I,k,B,R,H,te,ie,se,ae,ce)=>o.extend(p0(m,l,f,y,x,T,M,I,k,B,H,te,ie,se,ae,ce),{u_gamma_scale:y?x.transform.cameraToCenterDistance*Math.cos(x.terrain?0:x.transform._pitch):1,u_device_pixel_ratio:o.exported.devicePixelRatio,u_is_halo:+R}),$2=(m,l,f,y,x,T,M,I,k,B,R,H,te,ie,se,ae)=>o.extend(v1(m,l,f,y,x,T,M,I,!0,k,!0,R,H,te,ie,se,ae),{u_texsize_icon:B,u_texture_icon:1}),m0=(m,l,f)=>({u_matrix:m,u_opacity:l,u_color:f}),Wm=(m,l,f,y,x)=>o.extend(function(T,M,I){const k=M.imageManager.getPattern(T.toString()),{width:B,height:R}=M.imageManager.getPixelSize(),H=Math.pow(2,I.tileID.overscaledZ),te=I.tileSize*Math.pow(2,M.transform.tileZoom)/H,ie=te*(I.tileID.canonical.x+I.tileID.wrap*H),se=te*I.tileID.canonical.y;return{u_image:0,u_pattern_tl:k.tl,u_pattern_br:k.br,u_texsize:[B,R],u_pattern_size:k.displaySize,u_tile_units_to_pixels:1/ft(I,1,M.transform.tileZoom),u_pixel_coord_upper:[ie>>16,se>>16],u_pixel_coord_lower:[65535&ie,65535&se]}}(y,f,x),{u_matrix:m,u_opacity:l}),g0={fillExtrusion:m=>({u_matrix:new o.UniformMatrix4f(m),u_lightpos:new o.Uniform3f(m),u_lightintensity:new o.Uniform1f(m),u_lightcolor:new o.Uniform3f(m),u_vertical_gradient:new o.Uniform1f(m),u_opacity:new o.Uniform1f(m),u_edge_radius:new o.Uniform1f(m),u_ao:new o.Uniform2f(m),u_tile_id:new o.Uniform3f(m),u_zoom_transition:new o.Uniform1f(m),u_inv_rot_matrix:new o.UniformMatrix4f(m),u_merc_center:new o.Uniform2f(m),u_up_dir:new o.Uniform3f(m),u_height_lift:new o.Uniform1f(m)}),fillExtrusionPattern:m=>({u_matrix:new o.UniformMatrix4f(m),u_lightpos:new o.Uniform3f(m),u_lightintensity:new o.Uniform1f(m),u_lightcolor:new o.Uniform3f(m),u_vertical_gradient:new o.Uniform1f(m),u_height_factor:new o.Uniform1f(m),u_edge_radius:new o.Uniform1f(m),u_ao:new o.Uniform2f(m),u_tile_id:new o.Uniform3f(m),u_zoom_transition:new o.Uniform1f(m),u_inv_rot_matrix:new o.UniformMatrix4f(m),u_merc_center:new o.Uniform2f(m),u_up_dir:new o.Uniform3f(m),u_height_lift:new o.Uniform1f(m),u_image:new o.Uniform1i(m),u_texsize:new o.Uniform2f(m),u_pixel_coord_upper:new o.Uniform2f(m),u_pixel_coord_lower:new o.Uniform2f(m),u_tile_units_to_pixels:new o.Uniform1f(m),u_opacity:new o.Uniform1f(m)}),fill:m=>({u_matrix:new o.UniformMatrix4f(m)}),fillPattern:m=>({u_matrix:new o.UniformMatrix4f(m),u_image:new o.Uniform1i(m),u_texsize:new o.Uniform2f(m),u_pixel_coord_upper:new o.Uniform2f(m),u_pixel_coord_lower:new o.Uniform2f(m),u_tile_units_to_pixels:new o.Uniform1f(m)}),fillOutline:m=>({u_matrix:new o.UniformMatrix4f(m),u_world:new o.Uniform2f(m)}),fillOutlinePattern:m=>({u_matrix:new o.UniformMatrix4f(m),u_world:new o.Uniform2f(m),u_image:new o.Uniform1i(m),u_texsize:new o.Uniform2f(m),u_pixel_coord_upper:new o.Uniform2f(m),u_pixel_coord_lower:new o.Uniform2f(m),u_tile_units_to_pixels:new o.Uniform1f(m)}),circle:m=>({u_camera_to_center_distance:new o.Uniform1f(m),u_extrude_scale:new o.UniformMatrix2f(m),u_device_pixel_ratio:new o.Uniform1f(m),u_matrix:new o.UniformMatrix4f(m),u_inv_rot_matrix:new o.UniformMatrix4f(m),u_merc_center:new o.Uniform2f(m),u_tile_id:new o.Uniform3f(m),u_zoom_transition:new o.Uniform1f(m),u_up_dir:new o.Uniform3f(m)}),collisionBox:m=>({u_matrix:new o.UniformMatrix4f(m),u_camera_to_center_distance:new o.Uniform1f(m),u_extrude_scale:new o.Uniform2f(m)}),collisionCircle:m=>({u_matrix:new o.UniformMatrix4f(m),u_inv_matrix:new o.UniformMatrix4f(m),u_camera_to_center_distance:new o.Uniform1f(m),u_viewport_size:new o.Uniform2f(m)}),debug:m=>({u_color:new o.UniformColor(m),u_matrix:new o.UniformMatrix4f(m),u_overlay:new o.Uniform1i(m),u_overlay_scale:new o.Uniform1f(m)}),clippingMask:m=>({u_matrix:new o.UniformMatrix4f(m)}),heatmap:m=>({u_extrude_scale:new o.Uniform1f(m),u_intensity:new o.Uniform1f(m),u_matrix:new o.UniformMatrix4f(m),u_inv_rot_matrix:new o.UniformMatrix4f(m),u_merc_center:new o.Uniform2f(m),u_tile_id:new o.Uniform3f(m),u_zoom_transition:new o.Uniform1f(m),u_up_dir:new o.Uniform3f(m)}),heatmapTexture:m=>({u_image:new o.Uniform1i(m),u_color_ramp:new o.Uniform1i(m),u_opacity:new o.Uniform1f(m)}),hillshade:m=>({u_matrix:new o.UniformMatrix4f(m),u_image:new o.Uniform1i(m),u_latrange:new o.Uniform2f(m),u_light:new o.Uniform2f(m),u_shadow:new o.UniformColor(m),u_highlight:new o.UniformColor(m),u_accent:new o.UniformColor(m)}),hillshadePrepare:m=>({u_matrix:new o.UniformMatrix4f(m),u_image:new o.Uniform1i(m),u_dimension:new o.Uniform2f(m),u_zoom:new o.Uniform1f(m),u_unpack:new o.Uniform4f(m)}),line:m=>({u_matrix:new o.UniformMatrix4f(m),u_pixels_to_tile_units:new o.UniformMatrix2f(m),u_device_pixel_ratio:new o.Uniform1f(m),u_units_to_pixels:new o.Uniform2f(m),u_dash_image:new o.Uniform1i(m),u_gradient_image:new o.Uniform1i(m),u_image_height:new o.Uniform1f(m),u_texsize:new o.Uniform2f(m),u_tile_units_to_pixels:new o.Uniform1f(m),u_alpha_discard_threshold:new o.Uniform1f(m),u_trim_offset:new o.Uniform2f(m)}),linePattern:m=>({u_matrix:new o.UniformMatrix4f(m),u_texsize:new o.Uniform2f(m),u_pixels_to_tile_units:new o.UniformMatrix2f(m),u_device_pixel_ratio:new o.Uniform1f(m),u_image:new o.Uniform1i(m),u_units_to_pixels:new o.Uniform2f(m),u_tile_units_to_pixels:new o.Uniform1f(m),u_alpha_discard_threshold:new o.Uniform1f(m)}),raster:m=>({u_matrix:new o.UniformMatrix4f(m),u_tl_parent:new o.Uniform2f(m),u_scale_parent:new o.Uniform1f(m),u_fade_t:new o.Uniform1f(m),u_opacity:new o.Uniform1f(m),u_image0:new o.Uniform1i(m),u_image1:new o.Uniform1i(m),u_brightness_low:new o.Uniform1f(m),u_brightness_high:new o.Uniform1f(m),u_saturation_factor:new o.Uniform1f(m),u_contrast_factor:new o.Uniform1f(m),u_spin_weights:new o.Uniform3f(m),u_perspective_transform:new o.Uniform2f(m)}),symbolIcon:m=>({u_is_size_zoom_constant:new o.Uniform1i(m),u_is_size_feature_constant:new o.Uniform1i(m),u_size_t:new o.Uniform1f(m),u_size:new o.Uniform1f(m),u_camera_to_center_distance:new o.Uniform1f(m),u_rotate_symbol:new o.Uniform1i(m),u_aspect_ratio:new o.Uniform1f(m),u_fade_change:new o.Uniform1f(m),u_matrix:new o.UniformMatrix4f(m),u_label_plane_matrix:new o.UniformMatrix4f(m),u_coord_matrix:new o.UniformMatrix4f(m),u_is_text:new o.Uniform1i(m),u_pitch_with_map:new o.Uniform1i(m),u_texsize:new o.Uniform2f(m),u_tile_id:new o.Uniform3f(m),u_zoom_transition:new o.Uniform1f(m),u_inv_rot_matrix:new o.UniformMatrix4f(m),u_merc_center:new o.Uniform2f(m),u_camera_forward:new o.Uniform3f(m),u_tile_matrix:new o.UniformMatrix4f(m),u_up_vector:new o.Uniform3f(m),u_ecef_origin:new o.Uniform3f(m),u_texture:new o.Uniform1i(m)}),symbolSDF:m=>({u_is_size_zoom_constant:new o.Uniform1i(m),u_is_size_feature_constant:new o.Uniform1i(m),u_size_t:new o.Uniform1f(m),u_size:new o.Uniform1f(m),u_camera_to_center_distance:new o.Uniform1f(m),u_rotate_symbol:new o.Uniform1i(m),u_aspect_ratio:new o.Uniform1f(m),u_fade_change:new o.Uniform1f(m),u_matrix:new o.UniformMatrix4f(m),u_label_plane_matrix:new o.UniformMatrix4f(m),u_coord_matrix:new o.UniformMatrix4f(m),u_is_text:new o.Uniform1i(m),u_pitch_with_map:new o.Uniform1i(m),u_texsize:new o.Uniform2f(m),u_texture:new o.Uniform1i(m),u_gamma_scale:new o.Uniform1f(m),u_device_pixel_ratio:new o.Uniform1f(m),u_tile_id:new o.Uniform3f(m),u_zoom_transition:new o.Uniform1f(m),u_inv_rot_matrix:new o.UniformMatrix4f(m),u_merc_center:new o.Uniform2f(m),u_camera_forward:new o.Uniform3f(m),u_tile_matrix:new o.UniformMatrix4f(m),u_up_vector:new o.Uniform3f(m),u_ecef_origin:new o.Uniform3f(m),u_is_halo:new o.Uniform1i(m)}),symbolTextAndIcon:m=>({u_is_size_zoom_constant:new o.Uniform1i(m),u_is_size_feature_constant:new o.Uniform1i(m),u_size_t:new o.Uniform1f(m),u_size:new o.Uniform1f(m),u_camera_to_center_distance:new o.Uniform1f(m),u_rotate_symbol:new o.Uniform1i(m),u_aspect_ratio:new o.Uniform1f(m),u_fade_change:new o.Uniform1f(m),u_matrix:new o.UniformMatrix4f(m),u_label_plane_matrix:new o.UniformMatrix4f(m),u_coord_matrix:new o.UniformMatrix4f(m),u_is_text:new o.Uniform1i(m),u_pitch_with_map:new o.Uniform1i(m),u_texsize:new o.Uniform2f(m),u_texsize_icon:new o.Uniform2f(m),u_texture:new o.Uniform1i(m),u_texture_icon:new o.Uniform1i(m),u_gamma_scale:new o.Uniform1f(m),u_device_pixel_ratio:new o.Uniform1f(m),u_is_halo:new o.Uniform1i(m)}),background:m=>({u_matrix:new o.UniformMatrix4f(m),u_opacity:new o.Uniform1f(m),u_color:new o.UniformColor(m)}),backgroundPattern:m=>({u_matrix:new o.UniformMatrix4f(m),u_opacity:new o.Uniform1f(m),u_image:new o.Uniform1i(m),u_pattern_tl:new o.Uniform2f(m),u_pattern_br:new o.Uniform2f(m),u_texsize:new o.Uniform2f(m),u_pattern_size:new o.Uniform2f(m),u_pixel_coord_upper:new o.Uniform2f(m),u_pixel_coord_lower:new o.Uniform2f(m),u_tile_units_to_pixels:new o.Uniform1f(m)}),terrainRaster:n0,terrainDepth:n0,skybox:m=>({u_matrix:new o.UniformMatrix4f(m),u_sun_direction:new o.Uniform3f(m),u_cubemap:new o.Uniform1i(m),u_opacity:new o.Uniform1f(m),u_temporal_offset:new o.Uniform1f(m)}),skyboxGradient:m=>({u_matrix:new o.UniformMatrix4f(m),u_color_ramp:new o.Uniform1i(m),u_center_direction:new o.Uniform3f(m),u_radius:new o.Uniform1f(m),u_opacity:new o.Uniform1f(m),u_temporal_offset:new o.Uniform1f(m)}),skyboxCapture:m=>({u_matrix_3f:new o.UniformMatrix3f(m),u_sun_direction:new o.Uniform3f(m),u_sun_intensity:new o.Uniform1f(m),u_color_tint_r:new o.Uniform4f(m),u_color_tint_m:new o.Uniform4f(m),u_luminance:new o.Uniform1f(m)}),globeRaster:m=>({u_proj_matrix:new o.UniformMatrix4f(m),u_globe_matrix:new o.UniformMatrix4f(m),u_normalize_matrix:new o.UniformMatrix4f(m),u_merc_matrix:new o.UniformMatrix4f(m),u_zoom_transition:new o.Uniform1f(m),u_merc_center:new o.Uniform2f(m),u_image0:new o.Uniform1i(m),u_grid_matrix:new o.UniformMatrix3f(m),u_skirt_height:new o.Uniform1f(m),u_frustum_tl:new o.Uniform3f(m),u_frustum_tr:new o.Uniform3f(m),u_frustum_br:new o.Uniform3f(m),u_frustum_bl:new o.Uniform3f(m),u_globe_pos:new o.Uniform3f(m),u_globe_radius:new o.Uniform1f(m),u_viewport:new o.Uniform2f(m)}),globeAtmosphere:m=>({u_frustum_tl:new o.Uniform3f(m),u_frustum_tr:new o.Uniform3f(m),u_frustum_br:new o.Uniform3f(m),u_frustum_bl:new o.Uniform3f(m),u_horizon:new o.Uniform1f(m),u_transition:new o.Uniform1f(m),u_fadeout_range:new o.Uniform1f(m),u_color:new o.Uniform4f(m),u_high_color:new o.Uniform4f(m),u_space_color:new o.Uniform4f(m),u_star_intensity:new o.Uniform1f(m),u_star_density:new o.Uniform1f(m),u_star_size:new o.Uniform1f(m),u_temporal_offset:new o.Uniform1f(m),u_horizon_angle:new o.Uniform1f(m),u_rotation_matrix:new o.UniformMatrix4f(m)})};let x1;function Ku(m,l,f,y,x,T,M){const I=m.context,k=I.gl,B=m.transform,R=m.useProgram("collisionBox"),H=[];let te=0,ie=0;for(let pe=0;pe<y.length;pe++){const Ee=y[pe],Me=l.getTile(Ee),Ae=Me.getBucket(f);if(!Ae)continue;const Fe=yo(Ee,Ae,B);let Be=Fe;x[0]===0&&x[1]===0||(Be=m.translatePosMatrix(Fe,Me,x,T));const He=M?Ae.textCollisionBox:Ae.iconCollisionBox,gt=Ae.collisionCircleArray;if(gt.length>0){const Ge=o.create(),ot=Be;o.mul(Ge,Ae.placementInvProjMatrix,B.glCoordMatrix),o.mul(Ge,Ge,Ae.placementViewportMatrix),H.push({circleArray:gt,circleOffset:ie,transform:ot,invTransform:Ge,projection:Ae.getProjection()}),te+=gt.length/4,ie=te}He&&(m.terrain&&m.terrain.setupElevationDraw(Me,R),R.draw(I,k.LINES,o.DepthMode.disabled,o.StencilMode.disabled,m.colorModeForRenderPass(),o.CullFaceMode.disabled,h0(Be,B,Me,Ae.getProjection()),f.id,He.layoutVertexBuffer,He.indexBuffer,He.segments,null,B.zoom,null,[He.collisionVertexBuffer,He.collisionVertexBufferExt]))}if(!M||!H.length)return;const se=m.useProgram("collisionCircle"),ae=new o.StructArrayLayout2f1f2i16;ae.resize(4*te),ae._trim();let ce=0;for(const pe of H)for(let Ee=0;Ee<pe.circleArray.length/4;Ee++){const Me=4*Ee,Ae=pe.circleArray[Me+0],Fe=pe.circleArray[Me+1],Be=pe.circleArray[Me+2],He=pe.circleArray[Me+3];ae.emplace(ce++,Ae,Fe,Be,He,0),ae.emplace(ce++,Ae,Fe,Be,He,1),ae.emplace(ce++,Ae,Fe,Be,He,2),ae.emplace(ce++,Ae,Fe,Be,He,3)}(!x1||x1.length<2*te)&&(x1=function(pe){const Ee=2*pe,Me=new o.StructArrayLayout3ui6;Me.resize(Ee),Me._trim();for(let Ae=0;Ae<Ee;Ae++){const Fe=6*Ae;Me.uint16[Fe+0]=4*Ae+0,Me.uint16[Fe+1]=4*Ae+1,Me.uint16[Fe+2]=4*Ae+2,Me.uint16[Fe+3]=4*Ae+2,Me.uint16[Fe+4]=4*Ae+3,Me.uint16[Fe+5]=4*Ae+0}return Me}(te));const Z=I.createIndexBuffer(x1,!0),ne=I.createVertexBuffer(ae,o.collisionCircleLayout.members,!0);for(const pe of H){const Ee={u_matrix:pe.transform,u_inv_matrix:pe.invTransform,u_camera_to_center_distance:(de=B).getCameraToCenterDistance(pe.projection),u_viewport_size:[de.width,de.height]};se.draw(I,k.TRIANGLES,o.DepthMode.disabled,o.StencilMode.disabled,m.colorModeForRenderPass(),o.CullFaceMode.disabled,Ee,f.id,ne,Z,o.SegmentVector.simpleSegment(0,2*pe.circleOffset,pe.circleArray.length,pe.circleArray.length/2),null,B.zoom)}var de;ne.destroy(),Z.destroy()}const N2=o.create();function y0({width:m,height:l,anchor:f,textOffset:y,textScale:x},T){const{horizontalAlign:M,verticalAlign:I}=o.getAnchorAlignment(f),k=-(M-.5)*m,B=-(I-.5)*l,R=o.evaluateVariableOffset(f,y);return new o.Point((k/x+R[0])*T,(B/x+R[1])*T)}function qm(m,l,f,y,x,T,M,I,k,B,R){const H=m.text.placedSymbolArray,te=m.text.dynamicLayoutVertexArray,ie=m.icon.dynamicLayoutVertexArray,se={},ae=m.getProjection(),ce=un(I,ae,T),Z=T.elevation,ne=ae.upVectorScale(I.canonical,T.center.lat,T.worldSize).metersToTile;te.clear();for(let de=0;de<H.length;de++){const pe=H.get(de),{tileAnchorX:Ee,tileAnchorY:Me,numGlyphs:Ae}=pe,Fe=pe.hidden||!pe.crossTileID||m.allowVerticalPlacement&&!pe.placedOrientation?null:y[pe.crossTileID];if(Fe){let Be=0,He=0,gt=0;if(Z){const vt=Z?Z.getAtTileOffset(I,Ee,Me):0,[Gt,tr,jt]=ae.upVector(I.canonical,Ee,Me);Be=vt*Gt*ne,He=vt*tr*ne,gt=vt*jt*ne}let[Ge,ot,Ke,mt]=fn(pe.projectedAnchorX+Be,pe.projectedAnchorY+He,pe.projectedAnchorZ+gt,f?ce:M);const qe=Ru(T.getCameraToCenterDistance(ae),mt);let it=x.evaluateSizeForFeature(m.textSizeData,B,pe)*qe/o.ONE_EM;f&&(it*=m.tilePixelRatio/k);const _t=y0(Fe,it);f?({x:Ge,y:ot,z:Ke}=ae.projectTilePoint(Ee+_t.x,Me+_t.y,I.canonical),[Ge,ot,Ke]=fn(Ge+Be,ot+He,Ke+gt,M)):(l&&_t._rotate(-T.angle),Ge+=_t.x,ot+=_t.y,Ke=0);const ut=m.allowVerticalPlacement&&pe.placedOrientation===o.WritingMode.vertical?Math.PI/2:0;for(let vt=0;vt<Ae;vt++)o.addDynamicAttributes(te,Ge,ot,Ke,ut);R&&pe.associatedIconIndex>=0&&(se[pe.associatedIconIndex]={x:Ge,y:ot,z:Ke,angle:ut})}else Fo(Ae,te)}if(R){ie.clear();const de=m.icon.placedSymbolArray;for(let pe=0;pe<de.length;pe++){const Ee=de.get(pe),{numGlyphs:Me}=Ee,Ae=se[pe];if(Ee.hidden||!Ae)Fo(Me,ie);else{const{x:Fe,y:Be,z:He,angle:gt}=Ae;for(let Ge=0;Ge<Me;Ge++)o.addDynamicAttributes(ie,Fe,Be,He,gt)}}m.icon.dynamicLayoutVertexBuffer.updateData(ie)}m.text.dynamicLayoutVertexBuffer.updateData(te)}function _0(m,l,f){return f.iconsInText&&l?"symbolTextAndIcon":m?"symbolSDF":"symbolIcon"}function U2(m,l,f,y,x,T,M,I,k,B,R,H){const te=m.context,ie=te.gl,se=m.transform,ae=I==="map",ce=k==="map",Z=ae&&f.layout.get("symbol-placement")!=="point",ne=ae&&!ce&&!Z,de=f.layout.get("symbol-sort-key").constantOr(1)!==void 0;let pe=!1;const Ee=m.depthModeForSublayer(0,o.DepthMode.ReadOnly),Me=[o.mercatorXfromLng(se.center.lng),o.mercatorYfromLat(se.center.lat)],Ae=f.layout.get("text-variable-anchor"),Fe=se.projection.name==="globe",Be=[],He=[0,-1,0];let gt=He;!Fe&&!se.mercatorFromTransition||ae||(gt=function(Ge){const ot=Ge._camera.getWorldToCamera(Ge.worldSize,1),Ke=o.multiply([],ot,Ge.globeMatrix);o.invert(Ke,Ke);const mt=[0,0,0],qe=[0,1,0,0];return o.transformMat4$1(qe,qe,Ke),mt[0]=qe[0],mt[1]=qe[1],mt[2]=qe[2],o.normalize(mt,mt),mt}(se));for(const Ge of y){const ot=l.getTile(Ge),Ke=ot.getBucket(f);if(!Ke||Ke.projection.name==="mercator"&&Fe)continue;const mt=x?Ke.text:Ke.icon;if(!mt||Ke.fullyClipped||!mt.segments.get().length)continue;const qe=mt.programConfigurations.get(f.id),it=x||Ke.sdfIcons,_t=x?Ke.textSizeData:Ke.iconSizeData,ut=ce||se.pitch!==0,vt=o.evaluateSizeForZoom(_t,se.zoom);let Gt,tr,jt,Yt,yr=[0,0],dr=null;if(x)tr=ot.glyphAtlasTexture,jt=ie.LINEAR,Gt=ot.glyphAtlasTexture.size,Ke.iconsInText&&(yr=ot.imageAtlasTexture.size,dr=ot.imageAtlasTexture,Yt=ut||m.options.rotating||m.options.zooming||_t.kind==="composite"||_t.kind==="camera"?ie.LINEAR:ie.NEAREST);else{const Ba=f.layout.get("icon-size").constantOr(0)!==1||Ke.iconsNeedLinear;tr=ot.imageAtlasTexture,jt=it||m.options.rotating||m.options.zooming||Ba||ut?ie.LINEAR:ie.NEAREST,Gt=ot.imageAtlasTexture.size}const Ut=Ke.projection.name==="globe",zr=Ut?gt:He,Fr=Ut?o.globeToMercatorTransition(se.zoom):0,jr=un(Ge,Ke.getProjection(),se),$r=se.calculatePixelsToTileUnitsMatrix(ot),_i=Qe(jr,ot.tileID.canonical,ce,ae,se,Ke.getProjection(),$r),Jn=m.terrain&&ce&&Z?o.invert(o.create(),_i):N2,bo=xr(jr,ot.tileID.canonical,ce,ae,se,Ke.getProjection(),$r),ua=Ae&&Ke.hasTextData(),cn=f.layout.get("icon-text-fit")!=="none"&&ua&&Ke.hasIconData();if(Z){const Ba=se.elevation,fs=Ba?Ba.getAtTileOffsetFunc(Ge,se.center.lat,se.worldSize,Ke.getProjection()):null,Ws=Ii(jr,ot.tileID.canonical,ce,ae,se,Ke.getProjection(),$r);Gf(Ke,jr,m,x,Ws,bo,ce,B,fs,Ge)}const Nr=Z||x&&Ae||cn,Cr=m.translatePosMatrix(jr,ot,T,M),Dn=Nr?N2:_i,Oi=m.translatePosMatrix(bo,ot,T,M,!0),on=Ke.getProjection().createInversionMatrix(se,Ge.canonical),Ni=[];m.terrainRenderModeElevated()&&ce&&Ni.push("PITCH_WITH_MAP_TERRAIN"),Ut&&Ni.push("PROJECTION_GLOBE_VIEW"),Nr&&Ni.push("PROJECTED_POS_ON_VIEWPORT");const R1=it&&f.paint.get(x?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Gs;Gs=it?Ke.iconsInText?$2(_t.kind,vt,ne,ce,m,Cr,Dn,Oi,Gt,yr,Ge,Fr,Me,on,zr,Ke.getProjection()):v1(_t.kind,vt,ne,ce,m,Cr,Dn,Oi,x,Gt,!0,Ge,Fr,Me,on,zr,Ke.getProjection()):p0(_t.kind,vt,ne,ce,m,Cr,Dn,Oi,x,Gt,Ge,Fr,Me,on,zr,Ke.getProjection());const sc={program:m.useProgram(_0(it,x,Ke),qe,Ni),buffers:mt,uniformValues:Gs,atlasTexture:tr,atlasTextureIcon:dr,atlasInterpolation:jt,atlasInterpolationIcon:Yt,isSDF:it,hasHalo:R1,tile:ot,labelPlaneMatrixInv:Jn};if(de&&Ke.canOverlap){pe=!0;const Ba=mt.segments.get();for(const fs of Ba)Be.push({segments:new o.SegmentVector([fs]),sortKey:fs.sortKey,state:sc})}else Be.push({segments:mt.segments,sortKey:0,state:sc})}pe&&Be.sort((Ge,ot)=>Ge.sortKey-ot.sortKey);for(const Ge of Be){const ot=Ge.state;if(m.terrain&&m.terrain.setupElevationDraw(ot.tile,ot.program,{useDepthForOcclusion:!Fe,labelPlaneMatrixInv:ot.labelPlaneMatrixInv}),te.activeTexture.set(ie.TEXTURE0),ot.atlasTexture.bind(ot.atlasInterpolation,ie.CLAMP_TO_EDGE),ot.atlasTextureIcon&&(te.activeTexture.set(ie.TEXTURE1),ot.atlasTextureIcon&&ot.atlasTextureIcon.bind(ot.atlasInterpolationIcon,ie.CLAMP_TO_EDGE)),ot.isSDF){const Ke=ot.uniformValues;ot.hasHalo&&(Ke.u_is_halo=1,Yu(ot.buffers,Ge.segments,f,m,ot.program,Ee,R,H,Ke)),Ke.u_is_halo=0}Yu(ot.buffers,Ge.segments,f,m,ot.program,Ee,R,H,ot.uniformValues)}}function Yu(m,l,f,y,x,T,M,I,k){const B=y.context,R=[m.dynamicLayoutVertexBuffer,m.opacityVertexBuffer,m.globeExtVertexBuffer];x.draw(B,B.gl.TRIANGLES,T,M,I,o.CullFaceMode.disabled,k,f.id,m.layoutVertexBuffer,m.indexBuffer,l,f.paint,y.transform.zoom,m.programConfigurations.get(f.id),R)}function V2(m,l,f,y,x,T,M){const I=m.context.gl,k=f.paint.get("fill-pattern"),B=k&&k.constantOr(1);let R,H,te,ie,se;M?(H=B&&!f.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",R=I.LINES):(H=B?"fillPattern":"fill",R=I.TRIANGLES);for(const ae of y){const ce=l.getTile(ae);if(B&&!ce.patternsLoaded())continue;const Z=ce.getBucket(f);if(!Z)continue;m.prepareDrawTile();const ne=Z.programConfigurations.get(f.id),de=m.useProgram(H,ne);B&&(m.context.activeTexture.set(I.TEXTURE0),ce.imageAtlasTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE),ne.updatePaintBuffers());const pe=k.constantOr(null);if(pe&&ce.imageAtlas){const Me=ce.imageAtlas.patternPositions[pe.toString()];Me&&ne.setConstantPatternPositions(Me)}const Ee=m.translatePosMatrix(ae.projMatrix,ce,f.paint.get("fill-translate"),f.paint.get("fill-translate-anchor"));if(M){ie=Z.indexBuffer2,se=Z.segments2;const Me=m.terrain&&m.terrain.renderingToTexture?m.terrain.drapeBufferSize:[I.drawingBufferWidth,I.drawingBufferHeight];te=H==="fillOutlinePattern"&&B?Um(Ee,m,ce,Me):Nm(Ee,Me)}else ie=Z.indexBuffer,se=Z.segments,te=B?l0(Ee,m,ce):$s(Ee);m.prepareDrawProgram(m.context,de,ae.toUnwrapped()),de.draw(m.context,R,x,m.stencilModeForClipping(ae),T,o.CullFaceMode.disabled,te,f.id,Z.layoutVertexBuffer,ie,se,f.paint,m.transform.zoom,ne)}}function b1(m,l,f,y,x,T,M){const I=m.context,k=I.gl,B=m.transform,R=f.paint.get("fill-extrusion-pattern"),H=R.constantOr(1),te=f.paint.get("fill-extrusion-opacity"),ie=[f.paint.get("fill-extrusion-ambient-occlusion-intensity"),f.paint.get("fill-extrusion-ambient-occlusion-radius")],se=f.layout.get("fill-extrusion-edge-radius"),ae=se>0&&!f.paint.get("fill-extrusion-rounded-roof"),ce=ae?0:se,Z=B.projection.name==="globe"?o.fillExtrusionHeightLift():0,ne=B.projection.name==="globe",de=ne?o.globeToMercatorTransition(B.zoom):0,pe=[o.mercatorXfromLng(B.center.lng),o.mercatorYfromLat(B.center.lat)],Ee=[];ne&&Ee.push("PROJECTION_GLOBE_VIEW"),ie[0]>0&&Ee.push("FAUX_AO"),ae&&Ee.push("ZERO_ROOF_RADIUS");for(const Me of y){const Ae=l.getTile(Me),Fe=Ae.getBucket(f);if(!Fe||Fe.projection.name!==B.projection.name)continue;const Be=Fe.programConfigurations.get(f.id),He=m.useProgram(H?"fillExtrusionPattern":"fillExtrusion",Be,Ee);if(m.terrain){const it=m.terrain;if(m.style.terrainSetForDrapingOnly())it.setupElevationDraw(Ae,He,{useMeterToDem:!0});else{if(!Fe.enableTerrain)continue;if(it.setupElevationDraw(Ae,He,{useMeterToDem:!0}),G2(I,l,Me,Fe,f,it),!Fe.centroidVertexBuffer){const _t=He.attributes.a_centroid_pos;_t!==void 0&&k.vertexAttrib2f(_t,0,0)}}}H&&(m.context.activeTexture.set(k.TEXTURE0),Ae.imageAtlasTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),Be.updatePaintBuffers());const gt=R.constantOr(null);if(gt&&Ae.imageAtlas){const it=Ae.imageAtlas.patternPositions[gt.toString()];it&&Be.setConstantPatternPositions(it)}const Ge=m.translatePosMatrix(Me.projMatrix,Ae,f.paint.get("fill-extrusion-translate"),f.paint.get("fill-extrusion-translate-anchor")),ot=B.projection.createInversionMatrix(B,Me.canonical),Ke=f.paint.get("fill-extrusion-vertical-gradient"),mt=H?B2(Ge,m,Ke,te,ie,ce,Me,Ae,Z,de,pe,ot):s0(Ge,m,Ke,te,ie,ce,Me,Z,de,pe,ot);m.prepareDrawProgram(I,He,Me.toUnwrapped());const qe=[];m.terrain&&qe.push(Fe.centroidVertexBuffer),ne&&qe.push(Fe.layoutVertexExtBuffer),He.draw(I,I.gl.TRIANGLES,x,T,M,o.CullFaceMode.backCCW,mt,f.id,Fe.layoutVertexBuffer,Fe.indexBuffer,Fe.segments,f.paint,m.transform.zoom,Be,qe)}}function G2(m,l,f,y,x,T){const M=[Z=>{let ne=Z.canonical.x-1,de=Z.wrap;return ne<0&&(ne=(1<<Z.canonical.z)-1,de--),new o.OverscaledTileID(Z.overscaledZ,de,Z.canonical.z,ne,Z.canonical.y)},Z=>{let ne=Z.canonical.x+1,de=Z.wrap;return ne===1<<Z.canonical.z&&(ne=0,de++),new o.OverscaledTileID(Z.overscaledZ,de,Z.canonical.z,ne,Z.canonical.y)},Z=>new o.OverscaledTileID(Z.overscaledZ,Z.wrap,Z.canonical.z,Z.canonical.x,(Z.canonical.y===0?1<<Z.canonical.z:Z.canonical.y)-1),Z=>new o.OverscaledTileID(Z.overscaledZ,Z.wrap,Z.canonical.z,Z.canonical.x,Z.canonical.y===(1<<Z.canonical.z)-1?0:Z.canonical.y+1)],I=Z=>{const ne=l.getSource().minzoom,de=Ee=>{const Me=l.getTileByID(Ee);if(Me&&Me.hasData())return Me.getBucket(x)},pe=[0,-1,1];for(const Ee of pe){if(Z.overscaledZ+Ee<ne)continue;const Me=de(Z.calculateScaledKey(Z.overscaledZ+Ee));if(Me)return Me}},k=[0,0,0],B=(Z,ne)=>(k[0]=Math.min(Z.min.y,ne.min.y),k[1]=Math.max(Z.max.y,ne.max.y),k[2]=o.EXTENT-ne.min.x>Z.max.x?ne.min.x-o.EXTENT:Z.max.x,k),R=(Z,ne)=>(k[0]=Math.min(Z.min.x,ne.min.x),k[1]=Math.max(Z.max.x,ne.max.x),k[2]=o.EXTENT-ne.min.y>Z.max.y?ne.min.y-o.EXTENT:Z.max.y,k),H=[(Z,ne)=>B(Z,ne),(Z,ne)=>B(ne,Z),(Z,ne)=>R(Z,ne),(Z,ne)=>R(ne,Z)],te=new o.Point(0,0);let ie,se,ae;const ce=(Z,ne,de,pe,Ee)=>{const Me=[[pe?de:Z,pe?Z:de,0],[pe?de:ne,pe?ne:de,0]],Ae=Ee<0?o.EXTENT+Ee:Ee,Fe=[pe?Ae:(Z+ne)/2,pe?(Z+ne)/2:Ae,0];return de===0&&Ee<0||de!==0&&Ee>0?T.getForTilePoints(ae,[Fe],!0,se):Me.push(Fe),T.getForTilePoints(f,Me,!0,ie),Math.max(Me[0][2],Me[1][2],Fe[2])/T.exaggeration()};for(let Z=0;Z<4;Z++){const ne=(Z<2?1:5)-Z,de=y.borders[Z];if(de.length===0)continue;const pe=ae=M[Z](f),Ee=I(pe);if(!(Ee&&Ee instanceof o.FillExtrusionBucket&&Ee.enableTerrain)||y.borderDoneWithNeighborZ[Z]===Ee.canonical.z&&Ee.borderDoneWithNeighborZ[ne]===y.canonical.z||(se=T.findDEMTileFor(pe),!se||!se.dem))continue;if(!ie){const Be=T.findDEMTileFor(f);if(!Be||!Be.dem)return;ie=Be}const Me=Ee.borders[ne];let Ae=0;const Fe=Ee.borderDoneWithNeighborZ[ne]!==y.canonical.z;if(y.canonical.z===Ee.canonical.z){for(let Be=0;Be<de.length;Be++){const He=y.featuresOnBorder[de[Be]],gt=He.borders[Z];let Ge;for(;Ae<Me.length&&(Ge=Ee.featuresOnBorder[Me[Ae]],!(Ge.borders[ne][1]>gt[0]+3));)Fe&&Ee.encodeCentroid(void 0,Ge,!1),Ae++;if(Ge&&Ae<Me.length){const ot=Ae;let Ke=0;for(;!(Ge.borders[ne][0]>gt[1]-3)&&(Ke++,++Ae!==Me.length);)Ge=Ee.featuresOnBorder[Me[Ae]];if(Ge=Ee.featuresOnBorder[Me[ot]],He.intersectsCount()>1||Ge.intersectsCount()>1||Ke!==1){Ke!==1&&(Ae=ot),y.encodeCentroid(void 0,He,!1),Fe&&Ee.encodeCentroid(void 0,Ge,!1);continue}const mt=H[Z](He,Ge),qe=Z%2?o.EXTENT-1:0;te.x=ce(mt[0],Math.min(o.EXTENT-1,mt[1]),qe,Z<2,mt[2]),te.y=0,y.encodeCentroid(te,He,!1),Fe&&Ee.encodeCentroid(te,Ge,!1)}else y.encodeCentroid(void 0,He,!1)}y.borderDoneWithNeighborZ[Z]=Ee.canonical.z,y.needsCentroidUpdate=!0,Fe&&(Ee.borderDoneWithNeighborZ[ne]=y.canonical.z,Ee.needsCentroidUpdate=!0)}else{for(const Be of de)y.encodeCentroid(void 0,y.featuresOnBorder[Be],!1);if(Fe){for(const Be of Me)Ee.encodeCentroid(void 0,Ee.featuresOnBorder[Be],!1);Ee.borderDoneWithNeighborZ[ne]=y.canonical.z,Ee.needsCentroidUpdate=!0}y.borderDoneWithNeighborZ[Z]=Ee.canonical.z,y.needsCentroidUpdate=!0}}(y.needsCentroidUpdate||!y.centroidVertexBuffer&&y.centroidVertexArray.length!==0)&&y.uploadCentroid(m)}const Dl=new o.Color(1,0,0,1),Hm=new o.Color(0,1,0,1),Zm=new o.Color(0,0,1,1),Xm=new o.Color(1,0,1,1),Km=new o.Color(0,1,1,1);function Ym(m,l,f){const y=m.context,x=m.transform,T=y.gl,M=x.projection.name==="globe",I=M?["PROJECTION_GLOBE_VIEW"]:null;let k=f.projMatrix;if(M&&o.globeToMercatorTransition(x.zoom)>0){const He=o.transitionTileAABBinECEF(f.canonical,x),gt=o.globeDenormalizeECEF(He);k=o.multiply(new Float32Array(16),x.globeMatrix,gt),o.multiply(k,x.projMatrix,k)}const B=m.useProgram("debug",null,I),R=l.getTileByID(f.key);m.terrain&&m.terrain.setupElevationDraw(R,B);const H=o.DepthMode.disabled,te=o.StencilMode.disabled,ie=m.colorModeForRenderPass(),se="$debug";y.activeTexture.set(T.TEXTURE0),m.emptyTexture.bind(T.LINEAR,T.CLAMP_TO_EDGE),M?R._makeGlobeTileDebugBuffers(m.context,x):R._makeDebugTileBoundsBuffers(m.context,x.projection);const ae=R._tileDebugBuffer||m.debugBuffer,ce=R._tileDebugIndexBuffer||m.debugIndexBuffer,Z=R._tileDebugSegments||m.debugSegments;B.draw(y,T.LINE_STRIP,H,te,ie,o.CullFaceMode.disabled,y1(k,o.Color.red),se,ae,ce,Z,null,null,null,[R._globeTileDebugBorderBuffer]);const ne=R.latestRawTileData,de=Math.floor((ne&&ne.byteLength||0)/1024),pe=l.getTile(f).tileSize,Ee=512/Math.min(pe,512)*(f.overscaledZ/x.zoom)*.5;let Me=f.canonical.toString();f.overscaledZ!==f.canonical.z&&(Me+=` => ${f.overscaledZ}`),Me+=` ${de}kb`,function(He,gt){He.initDebugOverlayCanvas();const Ge=He.debugOverlayCanvas,ot=He.context.gl,Ke=He.debugOverlayCanvas.getContext("2d");Ke.clearRect(0,0,Ge.width,Ge.height),Ke.shadowColor="white",Ke.shadowBlur=2,Ke.lineWidth=1.5,Ke.strokeStyle="white",Ke.textBaseline="top",Ke.font="bold 36px Open Sans, sans-serif",Ke.fillText(gt,5,5),Ke.strokeText(gt,5,5),He.debugOverlayTexture.update(Ge),He.debugOverlayTexture.bind(ot.LINEAR,ot.CLAMP_TO_EDGE)}(m,Me);const Ae=R._tileDebugTextBuffer||m.debugBuffer,Fe=R._tileDebugTextIndexBuffer||m.quadTriangleIndexBuffer,Be=R._tileDebugTextSegments||m.debugSegments;B.draw(y,T.TRIANGLES,H,te,o.ColorMode.alphaBlended,o.CullFaceMode.disabled,y1(k,o.Color.transparent,Ee),se,Ae,Fe,Be,null,null,null,[R._globeTileDebugTextBuffer])}function W2(m,l,f,y){Ll(m,0,l+f/2,m.transform.width,f,y)}function w1(m,l,f,y){Ll(m,l-f/2,0,f,m.transform.height,y)}function Ll(m,l,f,y,x,T){const M=m.context,I=M.gl;I.enable(I.SCISSOR_TEST),I.scissor(l*o.exported.devicePixelRatio,f*o.exported.devicePixelRatio,y*o.exported.devicePixelRatio,x*o.exported.devicePixelRatio),M.clear({color:T}),I.disable(I.SCISSOR_TEST)}const q2=o.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:H2}=q2;function za(m,l,f,y){m.emplaceBack(l,f,y)}class T1{constructor(l){this.vertexArray=new o.StructArrayLayout3f12,this.indices=new o.StructArrayLayout3ui6,za(this.vertexArray,-1,-1,1),za(this.vertexArray,1,-1,1),za(this.vertexArray,-1,1,1),za(this.vertexArray,1,1,1),za(this.vertexArray,-1,-1,-1),za(this.vertexArray,1,-1,-1),za(this.vertexArray,-1,1,-1),za(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=l.createVertexBuffer(this.vertexArray,H2),this.indexBuffer=l.createIndexBuffer(this.indices),this.segment=o.SegmentVector.simpleSegment(0,0,36,12)}}function vo(m,l,f,y,x,T){const M=m.gl,I=l.paint.get("sky-atmosphere-color"),k=l.paint.get("sky-atmosphere-halo-color"),B=l.paint.get("sky-atmosphere-sun-intensity"),R=((H,te,ie,se,ae)=>({u_matrix_3f:H,u_sun_direction:te,u_sun_intensity:ie,u_color_tint_r:[se.r,se.g,se.b,se.a],u_color_tint_m:[ae.r,ae.g,ae.b,ae.a],u_luminance:5e-5}))(o.fromMat4(o.create$1(),y),x,B,I,k);M.framebufferTexture2D(M.FRAMEBUFFER,M.COLOR_ATTACHMENT0,M.TEXTURE_CUBE_MAP_POSITIVE_X+T,l.skyboxTexture,0),f.draw(m,M.TRIANGLES,o.DepthMode.disabled,o.StencilMode.disabled,o.ColorMode.unblended,o.CullFaceMode.frontCW,R,"skyboxCapture",l.skyboxGeometry.vertexBuffer,l.skyboxGeometry.indexBuffer,l.skyboxGeometry.segment)}const Ju=o.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Z2{constructor(l){const f=new o.StructArrayLayout5f20;f.emplaceBack(-1,1,1,0,0),f.emplaceBack(1,1,1,1,0),f.emplaceBack(1,-1,1,1,1),f.emplaceBack(-1,-1,1,0,1);const y=new o.StructArrayLayout3ui6;y.emplaceBack(0,1,2),y.emplaceBack(2,3,0),this.vertexBuffer=l.createVertexBuffer(f,Ju.members),this.indexBuffer=l.createIndexBuffer(y),this.segments=o.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const Ns={symbol:function(m,l,f,y,x){if(m.renderPass!=="translucent")return;const T=o.StencilMode.disabled,M=m.colorModeForRenderPass();f.layout.get("text-variable-anchor")&&function(I,k,B,R,H,te,ie){const se=k.transform,ae=H==="map",ce=te==="map";for(const Z of I){const ne=R.getTile(Z),de=ne.getBucket(B);if(!de||!de.text||!de.text.segments.get().length)continue;const pe=o.evaluateSizeForZoom(de.textSizeData,se.zoom),Ee=un(Z,de.getProjection(),se),Me=se.calculatePixelsToTileUnitsMatrix(ne),Ae=Qe(Ee,ne.tileID.canonical,ce,ae,se,de.getProjection(),Me),Fe=B.layout.get("icon-text-fit")!=="none"&&de.hasIconData();if(pe){const Be=Math.pow(2,se.zoom-ne.tileID.overscaledZ);qm(de,ae,ce,ie,o.symbolSize,se,Ae,Z,Be,pe,Fe)}}}(y,m,f,l,f.layout.get("text-rotation-alignment"),f.layout.get("text-pitch-alignment"),x),f.paint.get("icon-opacity").constantOr(1)!==0&&U2(m,l,f,y,!1,f.paint.get("icon-translate"),f.paint.get("icon-translate-anchor"),f.layout.get("icon-rotation-alignment"),f.layout.get("icon-pitch-alignment"),f.layout.get("icon-keep-upright"),T,M),f.paint.get("text-opacity").constantOr(1)!==0&&U2(m,l,f,y,!0,f.paint.get("text-translate"),f.paint.get("text-translate-anchor"),f.layout.get("text-rotation-alignment"),f.layout.get("text-pitch-alignment"),f.layout.get("text-keep-upright"),T,M),l.map.showCollisionBoxes&&(Ku(m,l,f,y,f.paint.get("text-translate"),f.paint.get("text-translate-anchor"),!0),Ku(m,l,f,y,f.paint.get("icon-translate"),f.paint.get("icon-translate-anchor"),!1))},circle:function(m,l,f,y){if(m.renderPass!=="translucent")return;const x=f.paint.get("circle-opacity"),T=f.paint.get("circle-stroke-width"),M=f.paint.get("circle-stroke-opacity"),I=f.layout.get("circle-sort-key").constantOr(1)!==void 0;if(x.constantOr(1)===0&&(T.constantOr(1)===0||M.constantOr(1)===0))return;const k=m.context,B=k.gl,R=m.transform,H=m.depthModeForSublayer(0,o.DepthMode.ReadOnly),te=o.StencilMode.disabled,ie=m.colorModeForRenderPass(),se=R.projection.name==="globe",ae=[o.mercatorXfromLng(R.center.lng),o.mercatorYfromLat(R.center.lat)],ce=[];for(let ne=0;ne<y.length;ne++){const de=y[ne],pe=l.getTile(de),Ee=pe.getBucket(f);if(!Ee||Ee.projection.name!==R.projection.name)continue;const Me=Ee.programConfigurations.get(f.id),Ae=c0(f);se&&Ae.push("PROJECTION_GLOBE_VIEW");const Fe=m.useProgram("circle",Me,Ae),Be=Ee.layoutVertexBuffer,He=Ee.globeExtVertexBuffer,gt=Ee.indexBuffer,Ge=R.projection.createInversionMatrix(R,de.canonical),ot={programConfiguration:Me,program:Fe,layoutVertexBuffer:Be,globeExtVertexBuffer:He,indexBuffer:gt,uniformValues:u0(m,de,pe,Ge,ae,f),tile:pe};if(I){const Ke=Ee.segments.get();for(const mt of Ke)ce.push({segments:new o.SegmentVector([mt]),sortKey:mt.sortKey,state:ot})}else ce.push({segments:Ee.segments,sortKey:0,state:ot})}I&&ce.sort((ne,de)=>ne.sortKey-de.sortKey);const Z={useDepthForOcclusion:!se};for(const ne of ce){const{programConfiguration:de,program:pe,layoutVertexBuffer:Ee,globeExtVertexBuffer:Me,indexBuffer:Ae,uniformValues:Fe,tile:Be}=ne.state,He=ne.segments;m.terrain&&m.terrain.setupElevationDraw(Be,pe,Z),m.prepareDrawProgram(k,pe,Be.tileID.toUnwrapped()),pe.draw(k,B.TRIANGLES,H,te,ie,o.CullFaceMode.disabled,Fe,f.id,Ee,Ae,He,f.paint,R.zoom,de,[Me])}},heatmap:function(m,l,f,y){if(f.paint.get("heatmap-opacity")!==0)if(m.renderPass==="offscreen"){const x=m.context,T=x.gl,M=o.StencilMode.disabled,I=new o.ColorMode([T.ONE,T.ONE],o.Color.transparent,[!0,!0,!0,!0]);(function(ie,se,ae,ce){const Z=ie.gl,ne=se.width*ce,de=se.height*ce;ie.activeTexture.set(Z.TEXTURE1),ie.viewport.set([0,0,ne,de]);let pe=ae.heatmapFbo;if(!pe||pe&&(pe.width!==ne||pe.height!==de)){pe&&pe.destroy();const Ee=Z.createTexture();Z.bindTexture(Z.TEXTURE_2D,Ee),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_WRAP_S,Z.CLAMP_TO_EDGE),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_WRAP_T,Z.CLAMP_TO_EDGE),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_MIN_FILTER,Z.LINEAR),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_MAG_FILTER,Z.LINEAR),pe=ae.heatmapFbo=ie.createFramebuffer(ne,de,!1),function(Me,Ae,Fe,Be,He,gt){const Ge=Me.gl;Ge.texImage2D(Ge.TEXTURE_2D,0,Me.isWebGL2&&Me.extRenderToTextureHalfFloat?Ge.RGBA16F:Ge.RGBA,He,gt,0,Ge.RGBA,Me.extRenderToTextureHalfFloat?Me.isWebGL2?Ge.HALF_FLOAT:Me.extTextureHalfFloat.HALF_FLOAT_OES:Ge.UNSIGNED_BYTE,null),Be.colorAttachment.set(Fe)}(ie,0,Ee,pe,ne,de)}else Z.bindTexture(Z.TEXTURE_2D,pe.colorAttachment.get()),ie.bindFramebuffer.set(pe.framebuffer)})(x,m,f,m.transform.projection.name==="globe"?.5:.25),x.clear({color:o.Color.transparent});const k=m.transform,B=k.projection.name==="globe",R=B?["PROJECTION_GLOBE_VIEW"]:null,H=B?o.CullFaceMode.frontCCW:o.CullFaceMode.disabled,te=[o.mercatorXfromLng(k.center.lng),o.mercatorYfromLat(k.center.lat)];for(let ie=0;ie<y.length;ie++){const se=y[ie];if(l.hasRenderableParent(se))continue;const ae=l.getTile(se),ce=ae.getBucket(f);if(!ce||ce.projection.name!==k.projection.name)continue;const Z=ce.programConfigurations.get(f.id),ne=m.useProgram("heatmap",Z,R),{zoom:de}=m.transform;m.terrain&&m.terrain.setupElevationDraw(ae,ne),m.prepareDrawProgram(x,ne,se.toUnwrapped());const pe=k.projection.createInversionMatrix(k,se.canonical);ne.draw(x,T.TRIANGLES,o.DepthMode.disabled,M,I,H,j2(m,se,ae,pe,te,de,f.paint.get("heatmap-intensity")),f.id,ce.layoutVertexBuffer,ce.indexBuffer,ce.segments,f.paint,m.transform.zoom,Z,B?[ce.globeExtVertexBuffer]:null)}x.viewport.set([0,0,m.width,m.height])}else m.renderPass==="translucent"&&(m.context.setColorMode(m.colorModeForRenderPass()),function(x,T){const M=x.context,I=M.gl,k=T.heatmapFbo;if(!k)return;M.activeTexture.set(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,k.colorAttachment.get()),M.activeTexture.set(I.TEXTURE1);let B=T.colorRampTexture;B||(B=T.colorRampTexture=new o.Texture(M,T.colorRamp,I.RGBA)),B.bind(I.LINEAR,I.CLAMP_TO_EDGE),x.useProgram("heatmapTexture").draw(M,I.TRIANGLES,o.DepthMode.disabled,o.StencilMode.disabled,x.colorModeForRenderPass(),o.CullFaceMode.disabled,((R,H,te,ie)=>({u_image:0,u_color_ramp:1,u_opacity:H.paint.get("heatmap-opacity")}))(0,T),T.id,x.viewportBuffer,x.quadTriangleIndexBuffer,x.viewportSegments,T.paint,x.transform.zoom)}(m,f))},line:function(m,l,f,y){if(m.renderPass!=="translucent")return;const x=f.paint.get("line-opacity"),T=f.paint.get("line-width");if(x.constantOr(1)===0||T.constantOr(1)===0)return;const M=m.depthModeForSublayer(0,o.DepthMode.ReadOnly),I=m.colorModeForRenderPass(),k=m.terrain&&m.terrain.renderingToTexture?1:o.exported.devicePixelRatio,B=f.paint.get("line-dasharray"),R=B.constantOr(1),H=f.layout.get("line-cap"),te=f.paint.get("line-pattern"),ie=te.constantOr(1),se=f.paint.get("line-gradient"),ae=ie?"linePattern":"line",ce=m.context,Z=ce.gl,ne=(pe=>{const Ee=[];Xu(pe)&&Ee.push("RENDER_LINE_DASH"),pe.paint.get("line-gradient")&&Ee.push("RENDER_LINE_GRADIENT");const Me=pe.paint.get("line-trim-offset");Me[0]===0&&Me[1]===0||Ee.push("RENDER_LINE_TRIM_OFFSET");const Ae=pe.paint.get("line-pattern").constantOr(1),Fe=pe.paint.get("line-opacity").constantOr(1)!==1;return!Ae&&Fe&&Ee.push("RENDER_LINE_ALPHA_DISCARD"),Ee})(f);let de=ne.includes("RENDER_LINE_ALPHA_DISCARD");m.terrain&&m.terrain.clipOrMaskOverlapStencilType()&&(de=!1);for(const pe of y){const Ee=l.getTile(pe);if(ie&&!Ee.patternsLoaded())continue;const Me=Ee.getBucket(f);if(!Me)continue;m.prepareDrawTile();const Ae=Me.programConfigurations.get(f.id),Fe=m.useProgram(ae,Ae,ne),Be=te.constantOr(null);if(Be&&Ee.imageAtlas){const it=Ee.imageAtlas.patternPositions[Be.toString()];it&&Ae.setConstantPatternPositions(it)}const He=B.constantOr(null),gt=H.constantOr(null);if(!ie&&He&&gt&&Ee.lineAtlas){const it=Ee.lineAtlas.getDash(He,gt);it&&Ae.setConstantPatternPositions(it)}let[Ge,ot]=f.paint.get("line-trim-offset");(gt==="round"||gt==="square")&&Ge!==ot&&(Ge===0&&(Ge-=1),ot===1&&(ot+=1));const Ke=m.terrain?pe.projMatrix:null,mt=ie?Zu(m,Ee,f,Ke,k):Gm(m,Ee,f,Ke,Me.lineClipsArray.length,k,[Ge,ot]);if(se){const it=Me.gradients[f.id];let _t=it.texture;if(f.gradientVersion!==it.version){let ut=256;if(f.stepInterpolant){const vt=l.getSource().maxzoom,Gt=pe.canonical.z===vt?Math.ceil(1<<m.transform.maxZoom-pe.canonical.z):1;ut=o.clamp(o.nextPowerOfTwo(Me.maxLineLength/o.EXTENT*1024*Gt),256,ce.maxTextureSize)}it.gradient=o.renderColorRamp({expression:f.gradientExpression(),evaluationKey:"lineProgress",resolution:ut,image:it.gradient||void 0,clips:Me.lineClipsArray}),it.texture?it.texture.update(it.gradient):it.texture=new o.Texture(ce,it.gradient,Z.RGBA),it.version=f.gradientVersion,_t=it.texture}ce.activeTexture.set(Z.TEXTURE1),_t.bind(f.stepInterpolant?Z.NEAREST:Z.LINEAR,Z.CLAMP_TO_EDGE)}R&&(ce.activeTexture.set(Z.TEXTURE0),Ee.lineAtlasTexture.bind(Z.LINEAR,Z.REPEAT),Ae.updatePaintBuffers()),ie&&(ce.activeTexture.set(Z.TEXTURE0),Ee.imageAtlasTexture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE),Ae.updatePaintBuffers()),m.prepareDrawProgram(ce,Fe,pe.toUnwrapped());const qe=it=>{Fe.draw(ce,Z.TRIANGLES,M,it,I,o.CullFaceMode.disabled,mt,f.id,Me.layoutVertexBuffer,Me.indexBuffer,Me.segments,f.paint,m.transform.zoom,Ae,[Me.layoutVertexBuffer2])};if(de){const it=m.stencilModeForClipping(pe).ref;it===0&&m.terrain&&ce.clear({stencil:0});const _t={func:Z.EQUAL,mask:255};mt.u_alpha_discard_threshold=.8,qe(new o.StencilMode(_t,it,255,Z.KEEP,Z.KEEP,Z.INVERT)),mt.u_alpha_discard_threshold=0,qe(new o.StencilMode(_t,it,255,Z.KEEP,Z.KEEP,Z.KEEP))}else qe(m.stencilModeForClipping(pe))}de&&(m.resetStencilClippingMasks(),m.terrain&&ce.clear({stencil:0}))},fill:function(m,l,f,y){const x=f.paint.get("fill-color"),T=f.paint.get("fill-opacity");if(T.constantOr(1)===0)return;const M=m.colorModeForRenderPass(),I=f.paint.get("fill-pattern"),k=m.opaquePassEnabledForLayer()&&!I.constantOr(1)&&x.constantOr(o.Color.transparent).a===1&&T.constantOr(0)===1?"opaque":"translucent";if(m.renderPass===k){const B=m.depthModeForSublayer(1,m.renderPass==="opaque"?o.DepthMode.ReadWrite:o.DepthMode.ReadOnly);V2(m,l,f,y,B,M,!1)}if(m.renderPass==="translucent"&&f.paint.get("fill-antialias")){const B=m.depthModeForSublayer(f.getPaintProperty("fill-outline-color")?2:0,o.DepthMode.ReadOnly);V2(m,l,f,y,B,M,!0)}},"fill-extrusion":function(m,l,f,y){const x=f.paint.get("fill-extrusion-opacity");if(x!==0&&m.renderPass==="translucent"){const T=new o.DepthMode(m.context.gl.LEQUAL,o.DepthMode.ReadWrite,m.depthRangeFor3D);if(x!==1||f.paint.get("fill-extrusion-pattern").constantOr(1))b1(m,l,f,y,T,o.StencilMode.disabled,o.ColorMode.disabled),b1(m,l,f,y,T,m.stencilModeFor3D(),m.colorModeForRenderPass()),m.resetStencilClippingMasks();else{const M=m.colorModeForRenderPass();b1(m,l,f,y,T,o.StencilMode.disabled,M)}}},hillshade:function(m,l,f,y){if(m.renderPass!=="offscreen"&&m.renderPass!=="translucent")return;const x=m.context,T=m.depthModeForSublayer(0,o.DepthMode.ReadOnly),M=m.colorModeForRenderPass(),I=m.terrain&&m.terrain.renderingToTexture,[k,B]=m.renderPass!=="translucent"||I?[{},y]:m.stencilConfigForOverlap(y);for(const R of B){const H=l.getTile(R);if(H.needsHillshadePrepare&&m.renderPass==="offscreen")L2(m,H,f,T,o.StencilMode.disabled,M);else if(m.renderPass==="translucent"){const te=I&&m.terrain?m.terrain.stencilModeForRTTOverlap(R):k[R.overscaledZ];D2(m,R,H,f,T,te,M)}}x.viewport.set([0,0,m.width,m.height]),m.resetStencilClippingMasks()},raster:function(m,l,f,y,x,T){if(m.renderPass!=="translucent"||f.paint.get("raster-opacity")===0||!y.length)return;const M=m.context,I=M.gl,k=l.getSource(),B=m.useProgram("raster"),R=m.colorModeForRenderPass(),H=m.terrain&&m.terrain.renderingToTexture,[te,ie]=k instanceof je||H?[{},y]:m.stencilConfigForOverlap(y),se=ie[ie.length-1].overscaledZ,ae=!m.options.moving;for(const ce of ie){const Z=H?o.DepthMode.disabled:m.depthModeForSublayer(ce.overscaledZ-se,f.paint.get("raster-opacity")===1?o.DepthMode.ReadWrite:o.DepthMode.ReadOnly,I.LESS),ne=ce.toUnwrapped(),de=l.getTile(ce);if(H&&(!de||!de.hasData()))continue;const pe=H?ce.projMatrix:m.transform.calculateProjMatrix(ne,ae),Ee=m.terrain&&H?m.terrain.stencilModeForRTTOverlap(ce):te[ce.overscaledZ],Me=T?0:f.paint.get("raster-fade-duration");de.registerFadeDuration(Me);const Ae=l.findLoadedParent(ce,0),Fe=i0(de,Ae,l,m.transform,Me);let Be,He;m.terrain&&m.terrain.prepareDrawTile();const gt=f.paint.get("raster-resampling")==="nearest"?I.NEAREST:I.LINEAR;M.activeTexture.set(I.TEXTURE0),de.texture.bind(gt,I.CLAMP_TO_EDGE),M.activeTexture.set(I.TEXTURE1),Ae?(Ae.texture.bind(gt,I.CLAMP_TO_EDGE),Be=Math.pow(2,Ae.tileID.overscaledZ-de.tileID.overscaledZ),He=[de.tileID.canonical.x*Be%1,de.tileID.canonical.y*Be%1]):de.texture.bind(gt,I.CLAMP_TO_EDGE),de.texture.useMipmap&&M.extTextureFilterAnisotropic&&m.transform.pitch>20&&I.texParameterf(I.TEXTURE_2D,M.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,M.extTextureFilterAnisotropicMax);const Ge=d0(pe,He||[0,0],Be||1,Fe,f,k instanceof je?k.perspectiveTransform:[0,0]);if(m.prepareDrawProgram(M,B,ne),k instanceof je)k.boundsBuffer&&k.boundsSegments&&B.draw(M,I.TRIANGLES,Z,o.StencilMode.disabled,R,o.CullFaceMode.disabled,Ge,f.id,k.boundsBuffer,m.quadTriangleIndexBuffer,k.boundsSegments);else{const{tileBoundsBuffer:ot,tileBoundsIndexBuffer:Ke,tileBoundsSegments:mt}=m.getTileBoundsBuffers(de);B.draw(M,I.TRIANGLES,Z,Ee,R,o.CullFaceMode.disabled,Ge,f.id,ot,Ke,mt)}}m.resetStencilClippingMasks()},background:function(m,l,f,y){const x=f.paint.get("background-color"),T=f.paint.get("background-opacity");if(T===0)return;const M=m.context,I=M.gl,k=m.transform,B=k.tileSize,R=f.paint.get("background-pattern");if(m.isPatternMissing(R))return;const H=!R&&x.a===1&&T===1&&m.opaquePassEnabledForLayer()?"opaque":"translucent";if(m.renderPass!==H)return;const te=o.StencilMode.disabled,ie=m.depthModeForSublayer(0,H==="opaque"?o.DepthMode.ReadWrite:o.DepthMode.ReadOnly),se=m.colorModeForRenderPass(),ae=m.useProgram(R?"backgroundPattern":"background");let ce,Z=y;Z||(ce=m.getBackgroundTiles(),Z=Object.values(ce).map(ne=>ne.tileID)),R&&(M.activeTexture.set(I.TEXTURE0),m.imageManager.bind(m.context));for(const ne of Z){const de=ne.toUnwrapped(),pe=y?ne.projMatrix:m.transform.calculateProjMatrix(de);m.prepareDrawTile();const Ee=l?l.getTile(ne):ce?ce[ne.key]:new o.Tile(ne,B,k.zoom,m),Me=R?Wm(pe,T,m,R,{tileID:ne,tileSize:B}):m0(pe,T,x);m.prepareDrawProgram(M,ae,de);const{tileBoundsBuffer:Ae,tileBoundsIndexBuffer:Fe,tileBoundsSegments:Be}=m.getTileBoundsBuffers(Ee);ae.draw(M,I.TRIANGLES,ie,te,se,o.CullFaceMode.disabled,Me,f.id,Ae,Fe,Be)}},sky:function(m,l,f){const y=m.transform,x=y.projection.name==="mercator"||y.projection.name==="globe"?1:o.smoothstep(7,8,y.zoom),T=f.paint.get("sky-opacity")*x;if(T===0)return;const M=m.context,I=f.paint.get("sky-type"),k=new o.DepthMode(M.gl.LEQUAL,o.DepthMode.ReadOnly,[0,1]),B=m.frameCounter/1e3%1;I==="atmosphere"?m.renderPass==="offscreen"?f.needsSkyboxCapture(m)&&(function(R,H,te,ie){const se=R.context,ae=se.gl;let ce=H.skyboxFbo;if(!ce){ce=H.skyboxFbo=se.createFramebuffer(32,32,!1),H.skyboxGeometry=new T1(se),H.skyboxTexture=se.gl.createTexture(),ae.bindTexture(ae.TEXTURE_CUBE_MAP,H.skyboxTexture),ae.texParameteri(ae.TEXTURE_CUBE_MAP,ae.TEXTURE_WRAP_S,ae.CLAMP_TO_EDGE),ae.texParameteri(ae.TEXTURE_CUBE_MAP,ae.TEXTURE_WRAP_T,ae.CLAMP_TO_EDGE),ae.texParameteri(ae.TEXTURE_CUBE_MAP,ae.TEXTURE_MIN_FILTER,ae.LINEAR),ae.texParameteri(ae.TEXTURE_CUBE_MAP,ae.TEXTURE_MAG_FILTER,ae.LINEAR);for(let pe=0;pe<6;++pe)ae.texImage2D(ae.TEXTURE_CUBE_MAP_POSITIVE_X+pe,0,ae.RGBA,32,32,0,ae.RGBA,ae.UNSIGNED_BYTE,null)}se.bindFramebuffer.set(ce.framebuffer),se.viewport.set([0,0,32,32]);const Z=H.getCenter(R,!0),ne=R.useProgram("skyboxCapture"),de=new Float64Array(16);o.identity(de),o.rotateY(de,de,.5*-Math.PI),vo(se,H,ne,de,Z,0),o.identity(de),o.rotateY(de,de,.5*Math.PI),vo(se,H,ne,de,Z,1),o.identity(de),o.rotateX(de,de,.5*-Math.PI),vo(se,H,ne,de,Z,2),o.identity(de),o.rotateX(de,de,.5*Math.PI),vo(se,H,ne,de,Z,3),o.identity(de),vo(se,H,ne,de,Z,4),o.identity(de),o.rotateY(de,de,Math.PI),vo(se,H,ne,de,Z,5),se.viewport.set([0,0,R.width,R.height])}(m,f),f.markSkyboxValid(m)):m.renderPass==="sky"&&function(R,H,te,ie,se){const ae=R.context,ce=ae.gl,Z=R.transform,ne=R.useProgram("skybox");ae.activeTexture.set(ce.TEXTURE0),ce.bindTexture(ce.TEXTURE_CUBE_MAP,H.skyboxTexture);const de=((pe,Ee,Me,Ae,Fe)=>({u_matrix:pe,u_sun_direction:Ee,u_cubemap:0,u_opacity:Ae,u_temporal_offset:Fe}))(Z.skyboxMatrix,H.getCenter(R,!1),0,ie,se);R.prepareDrawProgram(ae,ne),ne.draw(ae,ce.TRIANGLES,te,o.StencilMode.disabled,R.colorModeForRenderPass(),o.CullFaceMode.backCW,de,"skybox",H.skyboxGeometry.vertexBuffer,H.skyboxGeometry.indexBuffer,H.skyboxGeometry.segment)}(m,f,k,T,B):I==="gradient"&&m.renderPass==="sky"&&function(R,H,te,ie,se){const ae=R.context,ce=ae.gl,Z=R.transform,ne=R.useProgram("skyboxGradient");H.skyboxGeometry||(H.skyboxGeometry=new T1(ae)),ae.activeTexture.set(ce.TEXTURE0);let de=H.colorRampTexture;de||(de=H.colorRampTexture=new o.Texture(ae,H.colorRamp,ce.RGBA)),de.bind(ce.LINEAR,ce.CLAMP_TO_EDGE);const pe=((Ee,Me,Ae,Fe,Be)=>({u_matrix:Ee,u_color_ramp:0,u_center_direction:Me,u_radius:o.degToRad(Ae),u_opacity:Fe,u_temporal_offset:Be}))(Z.skyboxMatrix,H.getCenter(R,!1),H.paint.get("sky-gradient-radius"),ie,se);R.prepareDrawProgram(ae,ne),ne.draw(ae,ce.TRIANGLES,te,o.StencilMode.disabled,R.colorModeForRenderPass(),o.CullFaceMode.backCW,pe,"skyboxGradient",H.skyboxGeometry.vertexBuffer,H.skyboxGeometry.indexBuffer,H.skyboxGeometry.segment)}(m,f,k,T,B)},debug:function(m,l,f){for(let y=0;y<f.length;y++)Ym(m,l,f[y])},custom:function(m,l,f,y){const x=m.context,T=f.implementation;if(!m.transform.projection.unsupportedLayers||!m.transform.projection.unsupportedLayers.includes("custom")||m.terrain&&(m.terrain.renderingToTexture||m.renderPass==="offscreen")&&f.isLayerDraped()){if(m.renderPass==="offscreen"){const M=T.prerender;if(M){if(m.setCustomLayerDefaults(),x.setColorMode(m.colorModeForRenderPass()),m.transform.projection.name==="globe"){const I=m.transform.pointMerc;M.call(T,x.gl,m.transform.customLayerMatrix(),m.transform.getProjection(),m.transform.globeToMercatorMatrix(),o.globeToMercatorTransition(m.transform.zoom),[I.x,I.y],m.transform.pixelsPerMeterRatio)}else M.call(T,x.gl,m.transform.customLayerMatrix());x.setDirty(),m.setBaseState()}}else if(m.renderPass==="translucent"){if(m.terrain&&m.terrain.renderingToTexture){const I=T.renderToTile;if(I){const k=y[0].canonical,B=new o.MercatorCoordinate(k.x+y[0].wrap*(1<<k.z),k.y,k.z);x.setDepthMode(o.DepthMode.disabled),x.setStencilMode(o.StencilMode.disabled),x.setColorMode(m.colorModeForRenderPass()),m.setCustomLayerDefaults(),I.call(T,x.gl,B),x.setDirty(),m.setBaseState()}return}m.setCustomLayerDefaults(),x.setColorMode(m.colorModeForRenderPass()),x.setStencilMode(o.StencilMode.disabled);const M=T.renderingMode==="3d"?new o.DepthMode(m.context.gl.LEQUAL,o.DepthMode.ReadWrite,m.depthRangeFor3D):m.depthModeForSublayer(0,o.DepthMode.ReadOnly);if(x.setDepthMode(M),m.transform.projection.name==="globe"){const I=m.transform.pointMerc;T.render(x.gl,m.transform.customLayerMatrix(),m.transform.getProjection(),m.transform.globeToMercatorMatrix(),o.globeToMercatorTransition(m.transform.zoom),[I.x,I.y],m.transform.pixelsPerMeterRatio)}else T.render(x.gl,m.transform.customLayerMatrix());x.setDirty(),m.setBaseState(),x.bindFramebuffer.set(null)}}else o.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class zl{constructor(l,f,y=!1){this.context=new bt(l,y),this.transform=f,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=o.SourceCache.maxUnderzooming+o.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(l,f){const y=!!l&&!!l.terrain&&this.transform.projection.supportsTerrain;if(!(y||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new a0(this,l));const x=this._terrain;this.transform.elevation=y?x:null,x.update(l,this.transform,f)}_updateFog(l){const f=l.fog;if(!f||this.transform.projection.name==="globe"||f.getOpacity(this.transform.pitch)<1||f.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[y,x]=f.getFovAdjustedRange(this.transform._fov);if(y>x)return void(this.transform.fogCullDistSq=null);const T=y+.78*(x-y);this.transform.fogCullDistSq=T*T}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(l,f){if(this.width=l*o.exported.devicePixelRatio,this.height=f*o.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const y of this.style.order)this.style._layers[y].resize()}setup(){const l=this.context,f=new o.StructArrayLayout2i4;f.emplaceBack(0,0),f.emplaceBack(o.EXTENT,0),f.emplaceBack(0,o.EXTENT),f.emplaceBack(o.EXTENT,o.EXTENT),this.tileExtentBuffer=l.createVertexBuffer(f,o.posAttributes.members),this.tileExtentSegments=o.SegmentVector.simpleSegment(0,0,4,2);const y=new o.StructArrayLayout2i4;y.emplaceBack(0,0),y.emplaceBack(o.EXTENT,0),y.emplaceBack(0,o.EXTENT),y.emplaceBack(o.EXTENT,o.EXTENT),this.debugBuffer=l.createVertexBuffer(y,o.posAttributes.members),this.debugSegments=o.SegmentVector.simpleSegment(0,0,4,5);const x=new o.StructArrayLayout2i4;x.emplaceBack(-1,-1),x.emplaceBack(1,-1),x.emplaceBack(-1,1),x.emplaceBack(1,1),this.viewportBuffer=l.createVertexBuffer(x,o.posAttributes.members),this.viewportSegments=o.SegmentVector.simpleSegment(0,0,4,2);const T=new o.StructArrayLayout4i8;T.emplaceBack(0,0,0,0),T.emplaceBack(o.EXTENT,0,o.EXTENT,0),T.emplaceBack(0,o.EXTENT,0,o.EXTENT),T.emplaceBack(o.EXTENT,o.EXTENT,o.EXTENT,o.EXTENT),this.mercatorBoundsBuffer=l.createVertexBuffer(T,o.boundsAttributes.members),this.mercatorBoundsSegments=o.SegmentVector.simpleSegment(0,0,4,2);const M=new o.StructArrayLayout3ui6;M.emplaceBack(0,1,2),M.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=l.createIndexBuffer(M);const I=new o.StructArrayLayout1ui2;for(const B of[0,1,3,2,0])I.emplaceBack(B);this.debugIndexBuffer=l.createIndexBuffer(I),this.emptyTexture=new o.Texture(l,new o.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),l.gl.RGBA),this.identityMat=o.create();const k=this.context.gl;this.stencilClearMode=new o.StencilMode({func:k.ALWAYS,mask:0},0,255,k.ZERO,k.ZERO,k.ZERO),this.loadTimeStamps.push(o.window.performance.now()),this.atmosphereBuffer=new Z2(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(l){return l._makeTileBoundsBuffers(this.context,this.transform.projection),l._tileBoundsBuffer?{tileBoundsBuffer:l._tileBoundsBuffer,tileBoundsIndexBuffer:l._tileBoundsIndexBuffer,tileBoundsSegments:l._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const l=this.context,f=l.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(l,f.TRIANGLES,o.DepthMode.disabled,this.stencilClearMode,o.ColorMode.disabled,o.CullFaceMode.disabled,qu(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(l,f,y){if(!f||this.currentStencilSource===f.id||!l.isTileClipped()||!y||y.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let I=!1;for(const k of y)if(this._tileClippingMaskIDs[k.key]===void 0){I=!0;break}if(!I)return}this.currentStencilSource=f.id;const x=this.context,T=x.gl;this.nextStencilID+y.length>256&&this.clearStencil(),x.setColorMode(o.ColorMode.disabled),x.setDepthMode(o.DepthMode.disabled);const M=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const I of y){const k=f.getTile(I),B=this._tileClippingMaskIDs[I.key]=this.nextStencilID++,{tileBoundsBuffer:R,tileBoundsIndexBuffer:H,tileBoundsSegments:te}=this.getTileBoundsBuffers(k);M.draw(x,T.TRIANGLES,o.DepthMode.disabled,new o.StencilMode({func:T.ALWAYS,mask:0},B,255,T.KEEP,T.KEEP,T.REPLACE),o.ColorMode.disabled,o.CullFaceMode.disabled,qu(I.projMatrix),"$clipping",R,H,te)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const l=this.nextStencilID++,f=this.context.gl;return new o.StencilMode({func:f.NOTEQUAL,mask:255},l,255,f.KEEP,f.KEEP,f.REPLACE)}stencilModeForClipping(l){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(l);const f=this.context.gl;return new o.StencilMode({func:f.EQUAL,mask:255},this._tileClippingMaskIDs[l.key],0,f.KEEP,f.KEEP,f.REPLACE)}stencilConfigForOverlap(l){const f=this.context.gl,y=l.sort((M,I)=>I.overscaledZ-M.overscaledZ),x=y[y.length-1].overscaledZ,T=y[0].overscaledZ-x+1;if(T>1){this.currentStencilSource=void 0,this.nextStencilID+T>256&&this.clearStencil();const M={};for(let I=0;I<T;I++)M[I+x]=new o.StencilMode({func:f.GEQUAL,mask:255},I+this.nextStencilID,255,f.KEEP,f.KEEP,f.REPLACE);return this.nextStencilID+=T,[M,y]}return[{[x]:o.StencilMode.disabled},y]}colorModeForRenderPass(){const l=this.context.gl;return this._showOverdrawInspector?new o.ColorMode([l.CONSTANT_COLOR,l.ONE],new o.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?o.ColorMode.unblended:o.ColorMode.alphaBlended}depthModeForSublayer(l,f,y){if(!this.opaquePassEnabledForLayer())return o.DepthMode.disabled;const x=1-((1+this.currentLayer)*this.numSublayers+l)*this.depthEpsilon;return new o.DepthMode(y||this.context.gl.LEQUAL,f,[x,x])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(l,f){this.style=l,this.options=f,this.imageManager=l.imageManager,this.glyphManager=l.glyphManager,this.symbolFadeChange=l.placement.symbolFadeChange(o.exported.now()),this.imageManager.beginFrame();const y=this.style.order,x=this.style._sourceCaches;for(const B in x){const R=x[B];R.used&&R.prepare(this.context)}const T={},M={},I={};for(const B in x){const R=x[B];T[B]=R.getVisibleCoordinates(),M[B]=T[B].slice().reverse(),I[B]=R.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let B=0;B<y.length;B++)if(this.style._layers[y[B]].is3D()){this.opaquePassCutoff=B;break}if(this.terrain&&(this.terrain.updateTileBinding(I),this.opaquePassCutoff=0),this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new o.GlobeSharedBuffers(this.context)),!o.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const B of y){const R=this.style._layers[B],H=l._getLayerSourceCache(R);if(!R.hasOffscreenPass()||R.isHidden(this.transform.zoom))continue;const te=H?M[H.id]:void 0;(R.type==="custom"||R.isSky()||te&&te.length)&&this.renderLayer(this,H,R,te)}this.depthRangeFor3D=[0,1-(l.order.length+2)*this.numSublayers*this.depthEpsilon];const k=this.terrain;if(k&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&k.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:f.showOverdrawInspector?o.Color.black:o.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=f.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=y.length-1;this.currentLayer>=0;this.currentLayer--){const B=this.style._layers[y[this.currentLayer]],R=l._getLayerSourceCache(B);if(B.isSky())continue;const H=R?M[R.id]:void 0;this._renderTileClippingMasks(B,R,H),this.renderLayer(this,R,B,H)}if(this.style.fog&&this.transform.projection.supportsFog&&function(B,R){const H=B.context,te=H.gl,ie=B.transform,se=new o.DepthMode(te.LEQUAL,o.DepthMode.ReadOnly,[0,1]),ae=B.useProgram("globeAtmosphere",null,ie.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),ce=o.globeToMercatorTransition(ie.zoom),Z=R.properties.get("color").toArray01(),ne=R.properties.get("high-color").toArray01(),de=R.properties.get("space-color").toArray01PremultipliedAlpha(),pe=o.identity$1([]);o.rotateY$1(pe,pe,-o.degToRad(ie._center.lng)),o.rotateX$1(pe,pe,o.degToRad(ie._center.lat)),o.rotateZ$1(pe,pe,ie.angle),o.rotateX$1(pe,pe,-ie._pitch);const Ee=o.fromQuat(new Float32Array(16),pe),Me=o.mapValue(R.properties.get("star-intensity"),0,1,0,.25),Ae=5e-4,Fe=o.mapValue(R.properties.get("horizon-blend"),0,1,Ae,.25),Be=o.globeUseCustomAntiAliasing(B,H,ie)&&Fe===Ae?ie.worldSize/(2*Math.PI*1.025)-1:ie.globeRadius,He=B.frameCounter/1e3%1,gt=o.length(ie.globeCenterInViewSpace),Ge=Math.sqrt(Math.pow(gt,2)-Math.pow(Be,2)),ot=Math.acos(Ge/gt),Ke=((qe,it,_t,ut,vt,Gt,tr,jt,Yt,yr,dr,Ut,zr,Fr)=>({u_frustum_tl:qe,u_frustum_tr:it,u_frustum_br:_t,u_frustum_bl:ut,u_horizon:vt,u_transition:Gt,u_fadeout_range:tr,u_color:jt,u_high_color:Yt,u_space_color:yr,u_star_intensity:dr,u_star_size:5*o.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:Ut,u_horizon_angle:zr,u_rotation_matrix:Fr}))(ie.frustumCorners.TL,ie.frustumCorners.TR,ie.frustumCorners.BR,ie.frustumCorners.BL,ie.frustumCorners.horizon,ce,Fe,Z,ne,de,Me,He,ot,Ee);B.prepareDrawProgram(H,ae);const mt=B.atmosphereBuffer;mt&&ae.draw(H,te.TRIANGLES,se,o.StencilMode.disabled,o.ColorMode.alphaBlended,o.CullFaceMode.backCW,Ke,"skybox",mt.vertexBuffer,mt.indexBuffer,mt.segments)}(this,this.style.fog),this.renderPass="sky",(o.globeToMercatorTransition(this.transform.zoom)>0||this.transform.projection.name!=="globe")&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<y.length;this.currentLayer++){const B=this.style._layers[y[this.currentLayer]],R=l._getLayerSourceCache(B);B.isSky()&&this.renderLayer(this,R,B,R?M[R.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<y.length;){const B=this.style._layers[y[this.currentLayer]],R=l._getLayerSourceCache(B);if(B.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(B)){if(B.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const H=R?(B.type==="symbol"?I:M)[R.id]:void 0;this._renderTileClippingMasks(B,R,R?T[R.id]:void 0),this.renderLayer(this,R,B,H),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let B=null;o.values(this.style._layers).forEach(R=>{const H=l._getLayerSourceCache(R);H&&!R.isHidden(this.transform.zoom)&&(!B||B.getSource().maxzoom<H.getSource().maxzoom)&&(B=H)}),B&&this.options.showTileBoundaries&&Ns.debug(this,B,B.getVisibleCoordinates())}this.options.showPadding&&function(B){const R=B.transform.padding;W2(B,B.transform.height-(R.top||0),3,Dl),W2(B,R.bottom||0,3,Hm),w1(B,R.left||0,3,Zm),w1(B,B.transform.width-(R.right||0),3,Xm);const H=B.transform.centerPoint;(function(te,ie,se,ae){Ll(te,ie-1,se-10,2,20,ae),Ll(te,ie-10,se-1,20,2,ae)})(B,H.x,B.transform.height-H.y,Km)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(o.window.performance.now()),this.saveCanvasCopy())}renderLayer(l,f,y,x){y.isHidden(this.transform.zoom)||(y.type==="background"||y.type==="sky"||y.type==="custom"||x&&x.length)&&(this.id=y.id,this.gpuTimingStart(y),(!l.transform.projection.unsupportedLayers||!l.transform.projection.unsupportedLayers.includes(y.type)||l.terrain&&y.type==="custom")&&Ns[y.type](l,f,y,x,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(l){if(!this.options.gpuTiming)return;const f=this.context.extTimerQuery;let y=this.gpuTimers[l.id];y||(y=this.gpuTimers[l.id]={calls:0,cpuTime:0,query:f.createQueryEXT()}),y.calls++,f.beginQueryEXT(f.TIME_ELAPSED_EXT,y.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const l=this.context.extTimerQuery,f=l.createQueryEXT();this.deferredRenderGpuTimeQueries.push(f),l.beginQueryEXT(l.TIME_ELAPSED_EXT,f)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const l=this.context.extTimerQuery;l.endQueryEXT(l.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const l=this.context.extTimerQuery;l.endQueryEXT(l.TIME_ELAPSED_EXT)}collectGpuTimers(){const l=this.gpuTimers;return this.gpuTimers={},l}collectDeferredRenderGpuQueries(){const l=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],l}queryGpuTimers(l){const f={};for(const y in l){const x=l[y],T=this.context.extTimerQuery,M=T.getQueryObjectEXT(x.query,T.QUERY_RESULT_EXT)/1e6;T.deleteQueryEXT(x.query),f[y]=M}return f}queryGpuTimeDeferredRender(l){if(!this.options.gpuTimingDeferredRender)return 0;const f=this.context.extTimerQuery;let y=0;for(const x of l)y+=f.getQueryObjectEXT(x,f.QUERY_RESULT_EXT)/1e6,f.deleteQueryEXT(x);return y}translatePosMatrix(l,f,y,x,T){if(!y[0]&&!y[1])return l;const M=T?x==="map"?this.transform.angle:0:x==="viewport"?-this.transform.angle:0;if(M){const B=Math.sin(M),R=Math.cos(M);y=[y[0]*R-y[1]*B,y[0]*B+y[1]*R]}const I=[T?y[0]:ft(f,y[0],this.transform.zoom),T?y[1]:ft(f,y[1],this.transform.zoom),0],k=new Float32Array(16);return o.translate(k,l,I),k}saveTileTexture(l){const f=this._tileTextures[l.size[0]];f?f.push(l):this._tileTextures[l.size[0]]=[l]}getTileTexture(l){const f=this._tileTextures[l];return f&&f.length>0?f.pop():null}isPatternMissing(l){return l===null||l!==void 0&&!this.imageManager.getPattern(l.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const l=this.terrain&&this.terrain.renderingToTexture,f=this.terrain&&this.terrain.exaggeration()===0,y=this.style&&this.style.fog,x=[];return this.terrainRenderModeElevated()&&x.push("TERRAIN"),this.transform.projection.name==="globe"&&x.push("GLOBE"),f&&x.push("ZERO_EXAGGERATION"),y&&!l&&y.getOpacity(this.transform.pitch)!==0&&x.push("FOG"),l&&x.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&x.push("OVERDRAW_INSPECTOR"),x}useProgram(l,f,y){this.cache=this.cache||{};const x=y||[],T=this.currentGlobalDefines().concat(x),M=Sr.cacheKey(e0[l],l,T,f);return this.cache[M]||(this.cache[M]=new Sr(this.context,l,e0[l],f,g0[l],T)),this.cache[M]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const l=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(l.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=o.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new o.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(l,f,y){if(this.terrain&&this.terrain.renderingToTexture)return;const x=this.style.fog;if(x){const T=x.getOpacity(this.transform.pitch),M=((I,k,B,R,H,te,ie,se,ae,ce,Z)=>{const ne=I.transform,de=k.properties.get("color").toArray01();de[3]=R;const pe=I.frameCounter/1e3%1;return{u_fog_matrix:B?ne.calculateFogTileMatrix(B):I.identityMat,u_fog_range:k.getFovAdjustedRange(ne._fov),u_fog_color:de,u_fog_horizon_blend:k.properties.get("horizon-blend"),u_fog_temporal_offset:pe,u_frustum_tl:H,u_frustum_tr:te,u_frustum_br:ie,u_frustum_bl:se,u_globe_pos:ae,u_globe_radius:ce,u_viewport:Z,u_globe_transition:o.globeToMercatorTransition(ne.zoom),u_is_globe:+(ne.projection.name==="globe")}})(this,x,y,T,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*o.exported.devicePixelRatio,this.transform.height*o.exported.devicePixelRatio]);f.setFogUniformValues(l,M)}}setTileLoadedFlag(l){this.tileLoaded=l}saveCanvasCopy(){const l=this.canvasCopy();l&&(this.frameCopies.push(l),this.tileLoaded=!1)}canvasCopy(){const l=this.context.gl,f=l.createTexture();return l.bindTexture(l.TEXTURE_2D,f),l.copyTexImage2D(l.TEXTURE_2D,0,l.RGBA,0,0,l.drawingBufferWidth,l.drawingBufferHeight,0),f}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const l=this.style&&this.style.fog;return!!l&&l.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const l=this._backgroundTiles,f=this._backgroundTiles={},y=this.transform.coveringTiles({tileSize:512});for(const x of y)f[x.key]=l[x.key]||new o.Tile(x,512,this.transform.tileZoom,this);return f}clearBackgroundTiles(){this._backgroundTiles={}}}class S1{constructor(l=0,f=0,y=0,x=0){if(isNaN(l)||l<0||isNaN(f)||f<0||isNaN(y)||y<0||isNaN(x)||x<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=l,this.bottom=f,this.left=y,this.right=x}interpolate(l,f,y){return f.top!=null&&l.top!=null&&(this.top=o.number(l.top,f.top,y)),f.bottom!=null&&l.bottom!=null&&(this.bottom=o.number(l.bottom,f.bottom,y)),f.left!=null&&l.left!=null&&(this.left=o.number(l.left,f.left,y)),f.right!=null&&l.right!=null&&(this.right=o.number(l.right,f.right,y)),this}getCenter(l,f){const y=o.clamp((this.left+l-this.right)/2,0,l),x=o.clamp((this.top+f-this.bottom)/2,0,f);return new o.Point(y,x)}equals(l){return this.top===l.top&&this.bottom===l.bottom&&this.left===l.left&&this.right===l.right}clone(){return new S1(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function E1(m,l){const f=o.getColumn(m,3);o.fromQuat(m,l),o.setColumn(m,3,f)}function Er(m,l){const f=o.identity$1([]);return o.rotateZ$1(f,f,-l),o.rotateX$1(f,f,-m),f}function Qu(m,l){const f=[m[0],m[1],0],y=[l[0],l[1],0];if(o.length(f)>=1e-15){const M=o.normalize([],f);o.scale$2(y,M,o.dot(y,M)),l[0]=y[0],l[1]=y[1]}const x=o.cross([],l,m);if(o.len(x)<1e-15)return null;const T=Math.atan2(-x[1],x[0]);return Er(Math.atan2(Math.sqrt(m[0]*m[0]+m[1]*m[1]),-m[2]),T)}class X2{constructor(l,f){this.position=l,this.orientation=f}get position(){return this._position}set position(l){if(l){const f=l instanceof o.MercatorCoordinate?l:new o.MercatorCoordinate(l[0],l[1],l[2]);this._renderWorldCopies&&(f.x=o.wrap(f.x,0,1)),this._position=f}else this._position=null}lookAtPoint(l,f){if(this.orientation=null,!this.position)return;const y=this.position,x=this._elevation?this._elevation.getAtPointOrZero(o.MercatorCoordinate.fromLngLat(l)):0,T=o.MercatorCoordinate.fromLngLat(l,x),M=[T.x-y.x,T.y-y.y,T.z-y.z];f||(f=[0,0,1]),f[2]=Math.abs(f[2]),this.orientation=Qu(M,f)}setPitchBearing(l,f){this.orientation=Er(o.degToRad(l),o.degToRad(-f))}}class P1{constructor(l,f){this._transform=o.identity([]),this.orientation=f,this.position=l}get mercatorPosition(){const l=this.position;return new o.MercatorCoordinate(l[0],l[1],l[2])}get position(){const l=o.getColumn(this._transform,3);return[l[0],l[1],l[2]]}set position(l){var f;l&&o.setColumn(this._transform,3,[(f=l)[0],f[1],f[2],1])}get orientation(){return this._orientation}set orientation(l){this._orientation=l||o.identity$1([]),l&&E1(this._transform,this._orientation)}getPitchBearing(){const l=this.forward(),f=this.right();return{bearing:Math.atan2(-f[1],f[0]),pitch:Math.atan2(Math.sqrt(l[0]*l[0]+l[1]*l[1]),-l[2])}}setPitchBearing(l,f){this._orientation=Er(l,f),E1(this._transform,this._orientation)}forward(){const l=o.getColumn(this._transform,2);return[-l[0],-l[1],-l[2]]}up(){const l=o.getColumn(this._transform,1);return[-l[0],-l[1],-l[2]]}right(){const l=o.getColumn(this._transform,0);return[l[0],l[1],l[2]]}getCameraToWorld(l,f){const y=new Float64Array(16);return o.invert(y,this.getWorldToCamera(l,f)),y}getWorldToCameraPosition(l,f,y){const x=this.position;o.scale$2(x,x,-l);const T=new Float64Array(16);return o.fromScaling(T,[y,y,y]),o.translate(T,T,x),T[10]*=f,T}getWorldToCamera(l,f){const y=new Float64Array(16),x=new Float64Array(4),T=this.position;return o.conjugate(x,this._orientation),o.scale$2(T,T,-l),o.fromQuat(y,x),o.translate(y,y,T),y[1]*=-1,y[5]*=-1,y[9]*=-1,y[13]*=-1,y[8]*=f,y[9]*=f,y[10]*=f,y[11]*=f,y}getCameraToClipPerspective(l,f,y,x){const T=new Float64Array(16);return o.perspective(T,l,f,y,x),T}getDistanceToElevation(l,f=!1){const y=l===0?0:o.mercatorZfromAltitude(l,f?o.latFromMercatorY(this.position[1]):this.position[1]),x=this.forward();return(y-this.position[2])/x[2]}clone(){return new P1([...this.position],[...this.orientation])}}function Rl(m,l){const f=A1(m.projection,m.zoom,m.width,m.height),y=function(T,M,I,k,B){const R=new o.LngLat(I.lng-180*Ra,I.lat),H=new o.LngLat(I.lng+180*Ra,I.lat),te=T.project(R.lng,R.lat),ie=T.project(H.lng,H.lat),se=-Math.atan2(ie.y-te.y,ie.x-te.x),ae=o.MercatorCoordinate.fromLngLat(I);ae.y=o.clamp(ae.y,-1+Ra,1-Ra);const ce=ae.toLngLat(),Z=T.project(ce.lng,ce.lat),ne=o.MercatorCoordinate.fromLngLat(ce);ne.x+=Ra;const de=ne.toLngLat(),pe=T.project(de.lng,de.lat),Ee=M1(pe.x-Z.x,pe.y-Z.y,se),Me=o.MercatorCoordinate.fromLngLat(ce);Me.y+=Ra;const Ae=Me.toLngLat(),Fe=T.project(Ae.lng,Ae.lat),Be=M1(Fe.x-Z.x,Fe.y-Z.y,se),He=Math.abs(Ee.x)/Math.abs(Be.y),gt=o.identity([]);o.rotateZ(gt,gt,-se*(1-(B?0:k)));const Ge=o.identity([]);return o.scale(Ge,Ge,[1,1-(1-He)*k,1]),Ge[4]=-Be.x/Be.y*k,o.rotateZ(Ge,Ge,se),o.multiply(Ge,gt,Ge),Ge}(m.projection,0,m.center,f,l),x=K2(m);return o.scale(y,y,[x,x,1]),y}function K2(m){const l=m.projection,f=A1(m.projection,m.zoom,m.width,m.height),y=Y2(l,m.center),x=Y2(l,o.LngLat.convert(l.center));return Math.pow(2,y*f+(1-f)*x)}function A1(m,l,f,y,x=1/0){const T=m.range;if(!T)return 0;const M=Math.min(x,Math.max(f,y)),I=Math.log(M/1024)/Math.LN2;return o.smoothstep(T[0]+I,T[1]+I,l)}const Ra=1/4e4;function Y2(m,l){const f=o.clamp(l.lat,-o.MAX_MERCATOR_LATITUDE,o.MAX_MERCATOR_LATITUDE),y=new o.LngLat(l.lng-180*Ra,f),x=new o.LngLat(l.lng+180*Ra,f),T=m.project(y.lng,f),M=m.project(x.lng,f),I=o.MercatorCoordinate.fromLngLat(y),k=o.MercatorCoordinate.fromLngLat(x),B=M.x-T.x,R=M.y-T.y,H=k.x-I.x,te=k.y-I.y,ie=Math.sqrt((H*H+te*te)/(B*B+R*R));return Math.log(ie)/Math.LN2}function M1(m,l,f){const y=Math.cos(f),x=Math.sin(f);return{x:m*y-l*x,y:m*x+l*y}}class Bl{constructor(l,f,y,x,T,M,I){this.tileSize=512,this._renderWorldCopies=T===void 0||T,this._minZoom=l||0,this._maxZoom=f||22,this._minPitch=y??0,this._maxPitch=x??60,this.setProjection(M),this.setMaxBounds(I),this.width=0,this.height=0,this._center=new o.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new S1,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new P1,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const l=new Bl(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return l._elevation=this._elevation,l._centerAltitude=this._centerAltitude,l._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,l.tileSize=this.tileSize,l.mercatorFromTransition=this.mercatorFromTransition,l.width=this.width,l.height=this.height,l.cameraElevationReference=this.cameraElevationReference,l._center=this._center,l._setZoom(this.zoom),l._seaLevelZoom=this._seaLevelZoom,l.angle=this.angle,l._fov=this._fov,l._pitch=this._pitch,l._nearZ=this._nearZ,l._farZ=this._farZ,l._averageElevation=this._averageElevation,l._unmodified=this._unmodified,l._edgeInsets=this._edgeInsets.clone(),l._camera=this._camera.clone(),l._calcMatrices(),l.freezeTileCoverage=this.freezeTileCoverage,l.frustumCorners=this.frustumCorners,l}get elevation(){return this._elevation}set elevation(l){this._elevation!==l&&(this._elevation=l,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(l,f=!1){const y=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||y)&&this._updateCameraOnTerrain(),(l||y)&&this._constrainCamera(f),this._calcMatrices()}getProjection(){return o.pick(this.projection,["name","center","parallels"])}setProjection(l){this.projectionOptions=l||{name:"mercator"};const f=this.projection?this.getProjection():void 0;this.projection=o.getProjection(this.projectionOptions);const y=!_(f,this.getProjection());return y&&this._calcMatrices(),this.mercatorFromTransition=!1,y}setMercatorFromTransition(){const l=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=o.getProjection({name:"mercator"});const f=l!==this.projection.name;return f&&this._calcMatrices(),f}get minZoom(){return this._minZoom}set minZoom(l){this._minZoom!==l&&(this._minZoom=l,this.zoom=Math.max(this.zoom,l))}get maxZoom(){return this._maxZoom}set maxZoom(l){this._maxZoom!==l&&(this._maxZoom=l,this.zoom=Math.min(this.zoom,l))}get minPitch(){return this._minPitch}set minPitch(l){this._minPitch!==l&&(this._minPitch=l,this.pitch=Math.max(this.pitch,l))}get maxPitch(){return this._maxPitch}set maxPitch(l){this._maxPitch!==l&&(this._maxPitch=l,this.pitch=Math.min(this.pitch,l))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(l){l===void 0?l=!0:l===null&&(l=!1),this._renderWorldCopies=l}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const l=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(l))}get cameraWorldSize(){const l=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(l))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return o.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.Point(this.width,this.height)}get bearing(){return o.wrap(this.rotation,-180,180)}set bearing(l){this.rotation=l}get rotation(){return-this.angle/Math.PI*180}set rotation(l){const f=-l*Math.PI/180;var y;this.angle!==f&&(this._unmodified=!1,this.angle=f,this._calcMatrices(),this.rotationMatrix=(y=new o.ARRAY_TYPE(4),o.ARRAY_TYPE!=Float32Array&&(y[1]=0,y[2]=0),y[0]=1,y[3]=1,y),function(x,T,M){var I=T[0],k=T[1],B=T[2],R=T[3],H=Math.sin(M),te=Math.cos(M);x[0]=I*te+B*H,x[1]=k*te+R*H,x[2]=I*-H+B*te,x[3]=k*-H+R*te}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(l){const f=o.clamp(l,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==f&&(this._unmodified=!1,this._pitch=f,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const l=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/l)}set fov(l){l=Math.max(.01,Math.min(60,l)),this._fov!==l&&(this._unmodified=!1,this._fov=o.degToRad(l),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(l){this._averageElevation=l,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(l){const f=Math.min(Math.max(l,this.minZoom),this.maxZoom);this._zoom!==f&&(this._unmodified=!1,this._setZoom(f),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(l){this._zoom=l,this.scale=this.zoomScale(l),this.tileZoom=Math.floor(l),this.zoomFraction=l-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const l=this._elevation;this._centerAltitude=l.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=l.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const l=this._elevation,f=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],y=this.horizonLineFromTop();let x=0,T=0;for(let M=0;M<f.length;M++){const I=new o.Point(f[M][0]*this.width,y+f[M][1]*(this.height-y)),k=l.pointCoordinate(I);if(!k)continue;const B=1/Math.hypot(k[0]-this._camera.position[0],k[1]-this._camera.position[1]);x+=k[3]*B,T+=B}return T===0?NaN:x/T}get center(){return this._center}set center(l){l.lat===this._center.lat&&l.lng===this._center.lng||(this._unmodified=!1,this._center=l,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const l=this._seaLevelZoom,f=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),y=this.pixelsPerMeter/this.worldSize*f,x=this._mercatorZfromZoom(l),T=this._mercatorZfromZoom(this._maxZoom),M=Math.max(x-y,T);this._setZoom(this._zoomFromMercatorZ(M))}get padding(){return this._edgeInsets.toJSON()}set padding(l){this._edgeInsets.equals(l)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,l,1),this._calcMatrices())}computeZoomRelativeTo(l){const f=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,l.toAltitude()));let y;y=l.z<this._camera.position[2]?[f.x,f.y,f.z]:[l.x,l.y,l.z];const x=o.length(o.sub([],this._camera.position,y));return o.clamp(this._zoomFromMercatorZ(x),this._minZoom,this._maxZoom)}setFreeCameraOptions(l){if(!this.height||!l.position&&!l.orientation)return;this._updateCameraState();let f=!1;if(l.orientation&&!o.exactEquals(l.orientation,this._camera.orientation)&&(f=this._setCameraOrientation(l.orientation)),l.position){const y=[l.position.x,l.position.y,l.position.z];o.exactEquals$1(y,this._camera.position)||(this._setCameraPosition(y),f=!0)}f&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const l=this._camera.position,f=new X2;return f.position=new o.MercatorCoordinate(l[0],l[1],l[2]),f.orientation=this._camera.orientation,f._elevation=this.elevation,f._renderWorldCopies=this.renderWorldCopies,f}_setCameraOrientation(l){if(!o.length$1(l))return!1;o.normalize$1(l,l);const f=o.transformQuat([],[0,0,-1],l),y=o.transformQuat([],[0,-1,0],l);if(y[2]<0)return!1;const x=Qu(f,y);return!!x&&(this._camera.orientation=x,!0)}_setCameraPosition(l){const f=this.zoomScale(this.minZoom)*this.tileSize,y=this.zoomScale(this.maxZoom)*this.tileSize,x=this.cameraToCenterDistance;l[2]=o.clamp(l[2],x/y,x/f),this._camera.position=l}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(l){return this._edgeInsets.equals(l)}interpolatePadding(l,f,y){this._unmodified=!1,this._edgeInsets.interpolate(l,f,y),this._constrain(),this._calcMatrices()}coveringZoomLevel(l){const f=(l.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/l.tileSize));return Math.max(0,f)}getVisibleUnwrappedCoordinates(l){const f=[new o.UnwrappedTileID(0,l)];if(this.renderWorldCopies){const y=this.pointCoordinate(new o.Point(0,0)),x=this.pointCoordinate(new o.Point(this.width,0)),T=this.pointCoordinate(new o.Point(this.width,this.height)),M=this.pointCoordinate(new o.Point(0,this.height)),I=Math.floor(Math.min(y.x,x.x,T.x,M.x)),k=Math.floor(Math.max(y.x,x.x,T.x,M.x)),B=1;for(let R=I-B;R<=k+B;R++)R!==0&&f.push(new o.UnwrappedTileID(R,l))}return f}coveringTiles(l){let f=this.coveringZoomLevel(l);const y=f,x=this.elevation&&!l.isTerrainDEM,T=this.projection.name==="mercator";if(l.minzoom!==void 0&&f<l.minzoom)return[];l.maxzoom!==void 0&&f>l.maxzoom&&(f=l.maxzoom);const M=this.locationCoordinate(this.center),I=this.center.lat,k=1<<f,B=[k*M.x,k*M.y,0],R=this.projection.name==="globe",H=!R,te=o.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,f,H),ie=R?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),se=k*o.mercatorZfromAltitude(1,this.center.lat),ae=this._camera.position[2]/o.mercatorZfromAltitude(1,this.center.lat),ce=[k*ie.x,k*ie.y,ae*(H?1:se)],Z=this.cameraToCenterDistance/l.tileSize*(l.roundZoom?1:.502),ne=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?f:0,de=l.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,pe=l.isTerrainDEM?-de:this._elevation?this._elevation.getMinElevationBelowMSL():0,Ee=this.projection.isReprojectedInTileSpace?K2(this):1,Me=qe=>{const _t=new o.MercatorCoordinate(qe.x+25e-6,qe.y,qe.z),ut=new o.MercatorCoordinate(qe.x,qe.y+25e-6,qe.z),vt=qe.toLngLat(),Gt=_t.toLngLat(),tr=ut.toLngLat(),jt=this.locationCoordinate(vt),Yt=this.locationCoordinate(Gt),yr=this.locationCoordinate(tr),dr=Math.hypot(Yt.x-jt.x,Yt.y-jt.y),Ut=Math.hypot(yr.x-jt.x,yr.y-jt.y);return Math.sqrt(dr*Ut)*Ee/25e-6},Ae=qe=>{const it=de,_t=pe;return{aabb:o.tileAABB(this,k,0,0,0,qe,_t,it,this.projection),zoom:0,x:0,y:0,minZ:_t,maxZ:it,wrap:qe,fullyVisible:!1}},Fe=[];let Be=[];const He=f,gt=l.reparseOverscaled?y:f,Ge=qe=>qe*qe,ot=Ge((ae-this._centerAltitude)*se),Ke=qe=>{if(!this._elevation||!qe.tileID||!T)return;const it=this._elevation.getMinMaxForTile(qe.tileID),_t=qe.aabb;it?(_t.min[2]=it.min,_t.max[2]=it.max,_t.center[2]=(_t.min[2]+_t.max[2])/2):(qe.shouldSplit=mt(qe),qe.shouldSplit||(_t.min[2]=_t.max[2]=_t.center[2]=this._centerAltitude))},mt=qe=>{if(qe.zoom<ne)return!0;if(qe.zoom===He)return!1;if(qe.shouldSplit!=null)return qe.shouldSplit;const it=qe.aabb.distanceX(ce),_t=qe.aabb.distanceY(ce);let ut=ot,vt=1;if(R){ut=Ge(qe.aabb.distanceZ(ce));const jt=Math.pow(2,qe.zoom),Yt=o.latFromMercatorY((qe.y+1)/jt),yr=o.latFromMercatorY(qe.y/jt),dr=Math.min(Math.max(I,Yt),yr),Ut=o.circumferenceAtLatitude(dr)/o.circumferenceAtLatitude(I);if(vt=dr===I?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,Ut/this._mercatorScaleRatio),this.zoom<=o.GLOBE_ZOOM_THRESHOLD_MIN&&qe.zoom===He-1&&Ut>=.9)return!0}else if(x&&(ut=Ge(qe.aabb.distanceZ(ce)*se)),this.projection.isReprojectedInTileSpace&&y<=5){const jt=Math.pow(2,qe.zoom),Yt=Me(new o.MercatorCoordinate((qe.x+.5)/jt,(qe.y+.5)/jt));vt=Yt>.85?1:Yt}const Gt=it*it+_t*_t+ut,tr=Ge((1<<He-qe.zoom)*Z*vt*((jt,Yt)=>{if(Yt*Ge(.707)<jt)return 1;const yr=Math.sqrt(Yt/jt);return yr/(1.4144271570014144+(Math.pow(1.1,yr-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(ut,ot),Gt));return Gt<tr};if(this.renderWorldCopies)for(let qe=1;qe<=3;qe++)Fe.push(Ae(-qe)),Fe.push(Ae(qe));for(Fe.push(Ae(0));Fe.length>0;){const qe=Fe.pop(),it=qe.x,_t=qe.y;let ut=qe.fullyVisible;if(!ut){const vt=qe.aabb.intersects(te);if(vt===0)continue;ut=vt===2}if(qe.zoom!==He&&mt(qe))for(let vt=0;vt<4;vt++){const Gt=(it<<1)+vt%2,tr=(_t<<1)+(vt>>1),jt={aabb:T?qe.aabb.quadrant(vt):o.tileAABB(this,k,qe.zoom+1,Gt,tr,qe.wrap,qe.minZ,qe.maxZ,this.projection),zoom:qe.zoom+1,x:Gt,y:tr,wrap:qe.wrap,fullyVisible:ut,tileID:void 0,shouldSplit:void 0,minZ:qe.minZ,maxZ:qe.maxZ};x&&!R&&(jt.tileID=new o.OverscaledTileID(qe.zoom+1===He?gt:qe.zoom+1,qe.wrap,qe.zoom+1,Gt,tr),Ke(jt)),Fe.push(jt)}else{const vt=qe.zoom===He?gt:qe.zoom;if(l.minzoom&&l.minzoom>vt)continue;const Gt=B[0]-(.5+it+(qe.wrap<<qe.zoom))*(1<<f-qe.zoom),tr=B[1]-.5-_t,jt=qe.tileID?qe.tileID:new o.OverscaledTileID(vt,qe.wrap,qe.zoom,it,_t);Be.push({tileID:jt,distanceSq:Gt*Gt+tr*tr})}}if(this.fogCullDistSq){const qe=this.fogCullDistSq,it=this.horizonLineFromTop();Be=Be.filter(_t=>{const ut=[0,0,0,1],vt=[o.EXTENT,o.EXTENT,0,1],Gt=this.calculateFogTileMatrix(_t.tileID.toUnwrapped());o.transformMat4$1(ut,ut,Gt),o.transformMat4$1(vt,vt,Gt);const tr=o.getAABBPointSquareDist(ut,vt);if(tr===0)return!0;let jt=!1;const Yt=this._elevation;if(Yt&&tr>qe&&it!==0){const yr=this.calculateProjMatrix(_t.tileID.toUnwrapped());let dr;l.isTerrainDEM||(dr=Yt.getMinMaxForTile(_t.tileID)),dr||(dr={min:pe,max:de});const Ut=o.furthestTileCorner(this.rotation),zr=[Ut[0]*o.EXTENT,Ut[1]*o.EXTENT,dr.max];o.transformMat4(zr,zr,yr),jt=(1-zr[1])*this.height*.5<it}return tr<qe||jt})}return Be.sort((qe,it)=>qe.distanceSq-it.distanceSq).map(qe=>qe.tileID)}resize(l,f){this.width=l,this.height=f,this.pixelsToGLUnits=[2/l,-2/f],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(l){return Math.pow(2,l)}scaleZoom(l){return Math.log(l)/Math.LN2}project(l){const f=o.clamp(l.lat,-o.MAX_MERCATOR_LATITUDE,o.MAX_MERCATOR_LATITUDE),y=this.projection.project(l.lng,f);return new o.Point(y.x*this.worldSize,y.y*this.worldSize)}unproject(l){return this.projection.unproject(l.x/this.worldSize,l.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/o.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(l,f){let y,x;const T=this.centerPoint;if(this.projection.name==="globe"){const I=this.worldSize;y=(f.x-T.x)/I,x=(f.y-T.y)/I}else{const I=this.pointCoordinate(f),k=this.pointCoordinate(T);y=I.x-k.x,x=I.y-k.y}const M=this.locationCoordinate(l);this.setLocation(new o.MercatorCoordinate(M.x-y,M.y-x))}setLocation(l){this.center=this.coordinateLocation(l),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(l){return this.projection.locationPoint(this,l)}locationPoint3D(l){return this.projection.locationPoint(this,l,!0)}pointLocation(l){return this.coordinateLocation(this.pointCoordinate(l))}pointLocation3D(l){return this.coordinateLocation(this.pointCoordinate3D(l))}locationCoordinate(l,f){const y=f?o.mercatorZfromAltitude(f,l.lat):void 0,x=this.projection.project(l.lng,l.lat);return new o.MercatorCoordinate(x.x,x.y,y)}coordinateLocation(l){return this.projection.unproject(l.x,l.y)}pointRayIntersection(l,f){const y=f??this._centerAltitude,x=[l.x,l.y,0,1],T=[l.x,l.y,1,1];o.transformMat4$1(x,x,this.pixelMatrixInverse),o.transformMat4$1(T,T,this.pixelMatrixInverse);const M=T[3];o.scale$1(x,x,1/x[3]),o.scale$1(T,T,1/M);const I=x[2],k=T[2];return{p0:x,p1:T,t:I===k?0:(y-I)/(k-I)}}screenPointToMercatorRay(l){const f=[l.x,l.y,0,1],y=[l.x,l.y,1,1];return o.transformMat4$1(f,f,this.pixelMatrixInverse),o.transformMat4$1(y,y,this.pixelMatrixInverse),o.scale$1(f,f,1/f[3]),o.scale$1(y,y,1/y[3]),f[2]=o.mercatorZfromAltitude(f[2],this._center.lat)*this.worldSize,y[2]=o.mercatorZfromAltitude(y[2],this._center.lat)*this.worldSize,o.scale$1(f,f,1/this.worldSize),o.scale$1(y,y,1/this.worldSize),new o.Ray([f[0],f[1],f[2]],o.normalize([],o.sub([],y,f)))}rayIntersectionCoordinate(l){const{p0:f,p1:y,t:x}=l,T=o.mercatorZfromAltitude(f[2],this._center.lat),M=o.mercatorZfromAltitude(y[2],this._center.lat);return new o.MercatorCoordinate(o.number(f[0],y[0],x)/this.worldSize,o.number(f[1],y[1],x)/this.worldSize,o.number(T,M,x))}pointCoordinate(l,f=this._centerAltitude){return this.projection.pointCoordinate(this,l.x,l.y,f)}pointCoordinate3D(l){if(!this.elevation)return this.pointCoordinate(l);let f=this.projection.pointCoordinate3D(this,l.x,l.y);if(f)return new o.MercatorCoordinate(f[0],f[1],f[2]);let y=0,x=this.horizonLineFromTop();if(l.y>x)return this.pointCoordinate(l);const T=.02*x,M=l.clone();for(let I=0;I<10&&x-y>T;I++){M.y=o.number(y,x,.66);const k=this.projection.pointCoordinate3D(this,M.x,M.y);k?(x=M.y,f=k):y=M.y}return f?new o.MercatorCoordinate(f[0],f[1],f[2]):this.pointCoordinate(l)}isPointAboveHorizon(l){return this.projection.isPointAboveHorizon(this,l)}isPointOnSurface(l){if(l.y<0||l.y>this.height||l.x<0||l.x>this.width)return!1;if(this.elevation||this.zoom>=o.GLOBE_ZOOM_THRESHOLD_MAX)return!this.isPointAboveHorizon(l);const f=this.pointCoordinate(l);return f.y>=0&&f.y<=1}_coordinatePoint(l,f){const y=f&&this.elevation?this.elevation.getAtPointOrZero(l,this._centerAltitude):this._centerAltitude,x=[l.x*this.worldSize,l.y*this.worldSize,y+l.toAltitude(),1];return o.transformMat4$1(x,x,this.pixelMatrix),x[3]>0?new o.Point(x[0]/x[3],x[1]/x[3]):new o.Point(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:l,left:f}=this._edgeInsets,y=this.height-this._edgeInsets.bottom,x=this.width-this._edgeInsets.right,T=this.pointLocation3D(new o.Point(f,l)),M=this.pointLocation3D(new o.Point(x,l)),I=this.pointLocation3D(new o.Point(x,y)),k=this.pointLocation3D(new o.Point(f,y));let B=Math.min(T.lng,M.lng,I.lng,k.lng),R=Math.max(T.lng,M.lng,I.lng,k.lng),H=Math.min(T.lat,M.lat,I.lat,k.lat),te=Math.max(T.lat,M.lat,I.lat,k.lat);const ie=Math.pow(2,-this.zoom)/16*270,se=this.projection.name==="globe"?1:4,ae=(ce,Z,ne,de,pe)=>{const Ee=(ce+ne)/2,Me=(Z+de)/2,Ae=new o.Point(Ee,Me),{lng:Fe,lat:Be}=this.pointLocation3D(Ae),He=Math.max(0,B-Fe,H-Be,Fe-R,Be-te);B=Math.min(B,Fe),R=Math.max(R,Fe),H=Math.min(H,Be),te=Math.max(te,Be),(pe<se||He>ie)&&(ae(ce,Z,Ee,Me,pe+1),ae(Ee,Me,ne,de,pe+1))};if(ae(f,l,x,l,1),ae(x,l,x,y,1),ae(x,y,f,y,1),ae(f,y,f,l,1),this.projection.name==="globe"){const[ce,Z]=o.polesInViewport(this);ce?(te=90,R=180,B=-180):Z&&(H=-90,R=180,B=-180)}return new o.LngLatBounds(new o.LngLat(B,H),new o.LngLat(R,te))}_getBoundsRectangular(l,f){const{top:y,left:x}=this._edgeInsets,T=this.height-this._edgeInsets.bottom,M=this.width-this._edgeInsets.right,I=new o.Point(x,y),k=new o.Point(M,y),B=new o.Point(M,T),R=new o.Point(x,T);let H=this.pointCoordinate(I,l),te=this.pointCoordinate(k,l);const ie=this.pointCoordinate(B,f),se=this.pointCoordinate(R,f),ae=(ce,Z)=>(Z.y-ce.y)/(Z.x-ce.x);return H.y>1&&te.y>=0?H=new o.MercatorCoordinate((1-se.y)/ae(se,H)+se.x,1):H.y<0&&te.y<=1&&(H=new o.MercatorCoordinate(-se.y/ae(se,H)+se.x,0)),te.y>1&&H.y>=0?te=new o.MercatorCoordinate((1-ie.y)/ae(ie,te)+ie.x,1):te.y<0&&H.y<=1&&(te=new o.MercatorCoordinate(-ie.y/ae(ie,te)+ie.x,0)),new o.LngLatBounds().extend(this.coordinateLocation(H)).extend(this.coordinateLocation(te)).extend(this.coordinateLocation(se)).extend(this.coordinateLocation(ie))}_getBoundsRectangularTerrain(){const l=this.elevation;if(!l.visibleDemTiles.length||l.isUsingMockSource())return this._getBoundsRectangular(0,0);const f=l.visibleDemTiles.reduce((y,x)=>{if(x.dem){const T=x.dem.tree;y.min=Math.min(y.min,T.minimums[0]),y.max=Math.max(y.max,T.maximums[0])}return y},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(f.min*l.exaggeration(),f.max*l.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(l=!0){const f=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,y=this.height/2-f*(1-this._horizonShift);return l?Math.max(0,y):y}getMaxBounds(){return this.maxBounds}setMaxBounds(l){this.maxBounds=l,this.minLat=-o.MAX_MERCATOR_LATITUDE,this.maxLat=o.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,l&&(this.minLat=l.getSouth(),this.maxLat=l.getNorth(),this.minLng=l.getWest(),this.maxLng=l.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=o.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=o.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=o.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=o.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(l,f){return this.projection.createTileMatrix(this,f,l)}calculateDistanceTileData(l){const f=l.key,y=this._distanceTileDataCache;if(y[f])return y[f];const x=l.canonical,T=1/this.height,M=this.cameraWorldSize,I=M/this.zoomScale(x.z),k=(x.x+Math.pow(2,x.z)*l.wrap)*I,B=x.y*I,R=this.point;R.x*=M/this.worldSize,R.y*=M/this.worldSize;const H=this.angle,te=Math.sin(-H),ie=-Math.cos(-H);return y[f]={bearing:[te,ie],center:[(R.x-k)*T,(R.y-B)*T],scale:I/o.EXTENT*T},y[f]}calculateFogTileMatrix(l){const f=l.key,y=this._fogTileMatrixCache;if(y[f])return y[f];const x=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,l);return o.multiply(x,this.worldToFogMatrix,x),y[f]=new Float32Array(x),y[f]}calculateProjMatrix(l,f=!1){const y=l.key,x=f?this._alignedProjMatrixCache:this._projMatrixCache;if(x[y])return x[y];const T=this.calculatePosMatrix(l,this.worldSize);return o.multiply(T,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:f?this.alignedProjMatrix:this.projMatrix,T),x[y]=new Float32Array(T),x[y]}calculatePixelsToTileUnitsMatrix(l){const f=l.tileID.key,y=this._pixelsToTileUnitsCache;if(y[f])return y[f];const x=function(T,M){const{scale:I}=T.tileTransform,k=I*o.EXTENT/(T.tileSize*Math.pow(2,M.zoom-T.tileID.overscaledZ+T.tileID.canonical.z));return B=new Float32Array(4),te=(R=M.inverseAdjustmentMatrix)[1],ie=R[2],se=R[3],ce=(H=[k,k])[1],B[0]=R[0]*(ae=H[0]),B[1]=te*ae,B[2]=ie*ce,B[3]=se*ce,B;var B,R,H,te,ie,se,ae,ce}(l,this);return y[f]=x,y[f]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const l=1/this.worldSize,f=o.fromScaling([],[l,l,l]);return o.multiply(f,f,this.globeMatrix),f}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const l=this._elevation;this._updateCameraState();const f=o.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,y=this._computeCameraPosition(f),x=this._camera.forward(),T=o.mercatorZfromAltitude(1,this._center.lat);y[2]/=T,x[2]/=T,o.normalize(x,x);const M=l.raycast(y,x,l.exaggeration());if(M){const I=o.scaleAndAdd([],y,x,M),k=new o.MercatorCoordinate(I[0],I[1],o.mercatorZfromAltitude(I[2],o.latFromMercatorY(I[1]))),B=(k.z+o.length([k.x-y[0],k.y-y[1],k.z-y[2]*T]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(B),this._centerAltitude=k.toAltitude(),this._center=this.coordinateLocation(k),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(l=!1){if(!this._elevation)return;const f=this._elevation,y=o.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,x=this._computeCameraPosition(y),T=f.getAtPointOrZero(new o.MercatorCoordinate(...x)),M=this.pixelsPerMeter/this.worldSize*T,I=this._minimumHeightOverTerrain(),k=x[2]-M;if(k<=I)if(k<0||l){const B=this.locationCoordinate(this._center,this._centerAltitude),R=[x[0],x[1],B.z-x[2]],H=o.length(R);R[2]-=(I-k)/this._pixelsPerMercatorPixel;const te=o.length(R);if(te===0)return;o.scale$2(R,R,H/te*this._pixelsPerMercatorPixel),this._camera.position=[x[0],x[1],B.z*this._pixelsPerMercatorPixel-R[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const l=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||l){const te=this.center;return te.lat=o.clamp(te.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!l)&&(te.lng=o.clamp(te.lng,this.minLng,this.maxLng)),this.center=te,void(this._constraining=!1)}const f=this._unmodified,{x:y,y:x}=this.point;let T=0,M=y,I=x;const k=this.width/2,B=this.height/2,R=this.worldMinY*this.scale,H=this.worldMaxY*this.scale;if(x-B<R&&(I=R+B),x+B>H&&(I=H-B),H-R<this.height&&(T=Math.max(T,this.height/(H-R)),I=(H+R)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const te=this.worldMinX*this.scale,ie=this.worldMaxX*this.scale,se=this.worldSize/2-(te+ie)/2;M=(y+se+this.worldSize)%this.worldSize-se,M-k<te&&(M=te+k),M+k>ie&&(M=ie-k),ie-te<this.width&&(T=Math.max(T,this.width/(ie-te)),M=(ie+te)/2)}M===y&&I===x||(this.center=this.unproject(new o.Point(M,I))),T&&(this.zoom+=this.scaleZoom(T)),this._constrainCamera(),this._unmodified=f,this._constraining=!1}_minZoomForBounds(){let l=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(l=Math.max(l,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),l}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const l=this.centerOffset,f=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=o.mercatorZfromAltitude(1,this.center.lat)/o.mercatorZfromAltitude(1,o.GLOBE_SCALE_MATCH_LATITUDE));const y=A1(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,y),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const x=this.projection.zAxisUnit==="meters"?f:1,T=this._camera.getWorldToCamera(this.worldSize,x),M=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);M[8]=2*-l.x/this.width,M[9]=2*l.y/this.height;let I=o.mul([],M,T);if(this.projection.isReprojectedInTileSpace){const Me=this.locationCoordinate(this.center),Ae=o.identity([]);o.translate(Ae,Ae,[Me.x*this.worldSize,Me.y*this.worldSize,0]),o.multiply(Ae,Ae,Rl(this)),o.translate(Ae,Ae,[-Me.x*this.worldSize,-Me.y*this.worldSize,0]),o.multiply(I,I,Ae),this.inverseAdjustmentMatrix=function(Fe){const Be=Rl(Fe,!0);return oe([],[Be[0],Be[1],Be[4],Be[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=o.scale([],I,[this.worldSize,this.worldSize,this.worldSize/x,1]),this.projMatrix=I,this.invProjMatrix=o.invert(new Float64Array(16),this.projMatrix);const k=o.invert([],M);this.frustumCorners=o.FrustumCorners.fromInvProjectionMatrix(k,this.horizonLineFromTop(),this.height);const B=new Float32Array(16);o.identity(B),o.scale(B,B,[1,-1,1]),o.rotateX(B,B,this._pitch),o.rotateZ(B,B,this.angle);const R=o.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),H=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;R[8]=2*-l.x/this.width,R[9]=2*(l.y+H)/this.height,this.skyboxMatrix=o.multiply(B,R,B);const te=this.point,ie=te.x,se=te.y,ae=this.width%2/2,ce=this.height%2/2,Z=Math.cos(this.angle),ne=Math.sin(this.angle),de=ie-Math.round(ie)+Z*ae+ne*ce,pe=se-Math.round(se)+Z*ce+ne*ae,Ee=new Float64Array(I);if(o.translate(Ee,Ee,[de>.5?de-1:de,pe>.5?pe-1:pe,0]),this.alignedProjMatrix=Ee,I=o.create(),o.scale(I,I,[this.width/2,-this.height/2,1]),o.translate(I,I,[1,-1,0]),this.labelPlaneMatrix=I,I=o.create(),o.scale(I,I,[1,-1,1]),o.translate(I,I,[-1,-1,0]),o.scale(I,I,[2/this.width,2/this.height,1]),this.glCoordMatrix=I,this.pixelMatrix=o.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},I=o.invert(new Float64Array(16),this.pixelMatrix),!I)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=I,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=o.calculateGlobeMatrix(this);const Me=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=o.transformMat4(Me,Me,T),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=I;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const l=this.cameraWorldSizeForFog,f=this.cameraPixelsPerMeter,y=this._camera.position,x=1/this.height/this._pixelsPerMercatorPixel,T=[l,l,f];o.scale$2(T,T,x),o.scale$2(y,y,-1),o.multiply$2(y,y,T);const M=o.create();o.translate(M,M,y),o.scale(M,M,T),this.mercatorFogMatrix=M,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(l,f,x)}_computeCameraPosition(l){const f=(l=l||this.pixelsPerMeter)/this.pixelsPerMeter,y=this._camera.forward(),x=this.point,T=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*f-l/this.worldSize*this._centerAltitude;return[x.x/this.worldSize-y[0]*T,x.y/this.worldSize-y[1]*T,l/this.worldSize*this._centerAltitude-y[2]*T]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(l){const f=this._maxCameraBoundsDistance()*Math.cos(this._pitch),y=this._camera.position[2],x=l[2];let T=1;this.projection.wrap&&(this.center=this.center.wrap()),x>0&&(T=Math.min((f-y)/x,1)),this._camera.position=o.scaleAndAdd([],this._camera.position,l,T),this._updateStateFromCamera()}_updateStateFromCamera(){const l=this._camera.position,f=this._camera.forward(),{pitch:y,bearing:x}=this._camera.getPitchBearing(),T=o.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,M=this._mercatorZfromZoom(this._maxZoom)*Math.cos(o.degToRad(this._maxPitch)),I=Math.max((l[2]-T)/Math.cos(y),M),k=this._zoomFromMercatorZ(I);o.scaleAndAdd(l,l,f,I),this._pitch=o.clamp(y,o.degToRad(this.minPitch),o.degToRad(this.maxPitch)),this.angle=o.wrap(x,-Math.PI,Math.PI),this._setZoom(o.clamp(k,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new o.MercatorCoordinate(l[0],l[1],l[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(l){return Math.pow(2,l)*this.tileSize}_mercatorZfromZoom(l){return this.cameraToCenterDistance/this._worldSizeFromZoom(l)}_minimumHeightOverTerrain(){const l=Math.min((this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(l)}_zoomFromMercatorZ(l){return this.scaleZoom(this.cameraToCenterDistance/(l*this.tileSize))}zoomFromMercatorZAdjusted(l){let f=0,y=o.GLOBE_ZOOM_THRESHOLD_MAX,x=0,T=1/0;for(;y-f>1e-6&&y>f;){const M=f+.5*(y-f),I=this.tileSize*Math.pow(2,M),k=this.getCameraToCenterDistance(this.projection,M,I),B=this.scaleZoom(k/(l*this.tileSize)),R=Math.abs(M-B);R<T&&(T=R,x=M),M<B?f=M:y=M}return x}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(o.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(l,f){const y=Math.min(l.x,f.x),x=Math.max(l.x,f.x),T=Math.min(l.y,f.y),M=Math.max(l.y,f.y);if(T<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const I=[new o.Point(y,T),new o.Point(x,M),new o.Point(y,M),new o.Point(x,T)],k=this.renderWorldCopies?-3:0,B=this.renderWorldCopies?4:1;for(const R of I){const H=this.pointRayIntersection(R);if(H.t<0)return!0;const te=this.rayIntersectionCoordinate(H);if(te.x<k||te.y<0||te.x>B||te.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+o.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new o.Point(0,0),new o.Point(this.width,this.height))}zoomDeltaToMovement(l,f){const y=o.length(o.sub([],this._camera.position,l)),x=this._zoomFromMercatorZ(y)+f;return y-this._mercatorZfromZoom(x)}getCameraPoint(){if(this.projection.name==="globe"){const l=function([f,y,x],T){const M=[f,y,x,1];o.transformMat4$1(M,M,T);const I=M[3]=Math.max(M[3],1e-6);return M[0]/=I,M[1]/=I,M[2]/=I,M}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new o.Point(l[0],l[1])}{const l=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.Point(0,l))}}getCameraToCenterDistance(l,f=this.zoom,y=this.worldSize){const x=A1(l,f,this.width,this.height,1024),T=l.pixelSpaceConversion(this.center.lat,y,x);return .5/Math.tan(.5*this._fov)*this.height*T}getWorldToCameraMatrix(){const l=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&o.multiply(l,l,this.globeMatrix),l}}function Fl(m,l){let f=!1,y=null;const x=()=>{y=null,f&&(m(),y=setTimeout(x,l),f=!1)};return()=>(f=!0,y||x(),y)}class v0{constructor(l){this._hashName=l&&encodeURIComponent(l),o.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Fl(this._updateHashUnthrottled.bind(this),300)}addTo(l){return this._map=l,o.window.addEventListener("hashchange",this._onHashChange,!1),l.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),o.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const l=this._map;if(!l)return"";const f=ec(l);if(this._hashName){const y=this._hashName;let x=!1;const T=o.window.location.hash.slice(1).split("&").map(M=>{const I=M.split("=")[0];return I===y?(x=!0,`${I}=${f}`):M}).filter(M=>M);return x||T.push(`${y}=${f}`),`#${T.join("&")}`}return`#${f}`}_getCurrentHash(){const l=o.window.location.hash.replace("#","");if(this._hashName){let f;return l.split("&").map(y=>y.split("=")).forEach(y=>{y[0]===this._hashName&&(f=y)}),(f&&f[1]||"").split("/")}return l.split("/")}_onHashChange(){const l=this._map;if(!l)return!1;const f=this._getCurrentHash();if(f.length>=3&&!f.some(y=>isNaN(y))){const y=l.dragRotate.isEnabled()&&l.touchZoomRotate.isEnabled()?+(f[3]||0):l.getBearing();return l.jumpTo({center:[+f[2],+f[1]],zoom:+f[0],bearing:y,pitch:+(f[4]||0)}),!0}return!1}_updateHashUnthrottled(){const l=o.window.location.href.replace(/(#.+)?$/,this.getHashString());o.window.history.replaceState(o.window.history.state,null,l)}}function ec(m,l){const f=m.getCenter(),y=Math.round(100*m.getZoom())/100,x=Math.ceil((y*Math.LN2+Math.log(512/360/.5))/Math.LN10),T=Math.pow(10,x),M=Math.round(f.lng*T)/T,I=Math.round(f.lat*T)/T,k=m.getBearing(),B=m.getPitch();let R=l?`/${M}/${I}/${y}`:`${y}/${I}/${M}`;return(k||B)&&(R+="/"+Math.round(10*k)/10),B&&(R+=`/${Math.round(B)}`),R}const tc={linearity:.3,easing:o.bezier(0,0,.3,1)},C1=o.extend({deceleration:2500,maxSpeed:1400},tc),I1=o.extend({deceleration:20,maxSpeed:1400},tc),Dt=o.extend({deceleration:1e3,maxSpeed:360},tc),jo=o.extend({deceleration:1e3,maxSpeed:90},tc);class J2{constructor(l){this._map=l,this.clear()}clear(){this._inertiaBuffer=[]}record(l){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:o.exported.now(),settings:l})}_drainInertiaBuffer(){const l=this._inertiaBuffer,f=o.exported.now();for(;l.length>0&&f-l[0].time>160;)l.shift()}_onMoveEnd(l){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const f={zoom:0,bearing:0,pitch:0,pan:new o.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:T}of this._inertiaBuffer)f.zoom+=T.zoomDelta||0,f.bearing+=T.bearingDelta||0,f.pitch+=T.pitchDelta||0,T.panDelta&&f.pan._add(T.panDelta),T.around&&(f.around=T.around),T.pinchAround&&(f.pinchAround=T.pinchAround);const y=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,x={};if(f.pan.mag()){const T=nc(f.pan.mag(),y,o.extend({},C1,l||{}));x.offset=f.pan.mult(T.amount/f.pan.mag()),x.center=this._map.transform.center,rc(x,T)}if(f.zoom){const T=nc(f.zoom,y,I1);x.zoom=this._map.transform.zoom+T.amount,rc(x,T)}if(f.bearing){const T=nc(f.bearing,y,Dt);x.bearing=this._map.transform.bearing+o.clamp(T.amount,-179,179),rc(x,T)}if(f.pitch){const T=nc(f.pitch,y,jo);x.pitch=this._map.transform.pitch+T.amount,rc(x,T)}if(x.zoom||x.bearing){const T=f.pinchAround===void 0?f.around:f.pinchAround;x.around=T?this._map.unproject(T):this._map.getCenter()}return this.clear(),x.noMoveStart=!0,x}}function rc(m,l){(!m.duration||m.duration<l.duration)&&(m.duration=l.duration,m.easing=l.easing)}function nc(m,l,f){const{maxSpeed:y,linearity:x,deceleration:T}=f,M=o.clamp(m*x/(l/1e3),-y,y),I=Math.abs(M)/(T*x);return{easing:f.easing,duration:1e3*I,amount:M*(I/2)}}class Yn extends o.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,f,y,x={}){const T=q(f.getCanvasContainer(),y),M=f.unproject(T);super(l,o.extend({point:T,lngLat:M,originalEvent:y},x)),this._defaultPrevented=!1,this.target=f}}class ic extends o.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,f,y){const x=l==="touchend"?y.changedTouches:y.touches,T=Y(f.getCanvasContainer(),x),M=T.map(k=>f.unproject(k)),I=T.reduce((k,B,R,H)=>k.add(B.div(H.length)),new o.Point(0,0));super(l,{points:T,point:I,lngLats:M,lngLat:f.unproject(I),originalEvent:y}),this._defaultPrevented=!1}}class O1 extends o.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,f,y){super(l,{originalEvent:y}),this._defaultPrevented=!1}}class x0{constructor(l,f){this._map=l,this._clickTolerance=f.clickTolerance}reset(){this._mousedownPos=void 0}wheel(l){return this._firePreventable(new O1(l.type,this._map,l))}mousedown(l,f){return this._mousedownPos=f,this._firePreventable(new Yn(l.type,this._map,l))}mouseup(l){this._map.fire(new Yn(l.type,this._map,l))}preclick(l){const f=o.extend({},l);f.type="preclick",this._map.fire(new Yn(f.type,this._map,f))}click(l,f){this._mousedownPos&&this._mousedownPos.dist(f)>=this._clickTolerance||(this.preclick(l),this._map.fire(new Yn(l.type,this._map,l)))}dblclick(l){return this._firePreventable(new Yn(l.type,this._map,l))}mouseover(l){this._map.fire(new Yn(l.type,this._map,l))}mouseout(l){this._map.fire(new Yn(l.type,this._map,l))}touchstart(l){return this._firePreventable(new ic(l.type,this._map,l))}touchmove(l){this._map.fire(new ic(l.type,this._map,l))}touchend(l){this._map.fire(new ic(l.type,this._map,l))}touchcancel(l){this._map.fire(new ic(l.type,this._map,l))}_firePreventable(l){if(this._map.fire(l),l.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class k1{constructor(l){this._map=l}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(l){this._map.fire(new Yn(l.type,this._map,l))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Yn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(l){this._delayContextMenu?this._contextMenuEvent=l:this._map.fire(new Yn(l.type,this._map,l)),this._map.listens("contextmenu")&&l.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Q2{constructor(l,f){this._map=l,this._el=l.getCanvasContainer(),this._container=l.getContainer(),this._clickTolerance=f.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(l,f){this.isEnabled()&&l.shiftKey&&l.button===0&&($(),this._startPos=this._lastPos=f,this._active=!0)}mousemoveWindow(l,f){if(!this._active)return;const y=f,x=this._startPos,T=this._lastPos;if(!x||!T||T.equals(y)||!this._box&&y.dist(x)<this._clickTolerance)return;this._lastPos=y,this._box||(this._box=C("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",l));const M=Math.min(x.x,y.x),I=Math.max(x.x,y.x),k=Math.min(x.y,y.y),B=Math.max(x.y,y.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${M}px,${k}px)`,this._box.style.width=I-M+"px",this._box.style.height=B-k+"px")})}mouseupWindow(l,f){if(!this._active)return;const y=this._startPos,x=f;if(y&&l.button===0){if(this.reset(),J(),y.x!==x.x||y.y!==x.y)return this._map.fire(new o.Event("boxzoomend",{originalEvent:l})),{cameraAnimation:T=>T.fitScreenCoordinates(y,x,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",l)}}keydown(l){this._active&&l.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",l))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),N(),delete this._startPos,delete this._lastPos}_fireEvent(l,f){return this._map.fire(new o.Event(l,{originalEvent:f}))}}function D1(m,l){const f={};for(let y=0;y<m.length;y++)f[m[y].identifier]=l[y];return f}class jl{constructor(l){this.reset(),this.numTouches=l.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(l,f,y){(this.centroid||y.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=l.timeStamp),y.length===this.numTouches&&(this.centroid=function(x){const T=new o.Point(0,0);for(const M of x)T._add(M);return T.div(x.length)}(f),this.touches=D1(y,f)))}touchmove(l,f,y){if(this.aborted||!this.centroid)return;const x=D1(y,f);for(const T in this.touches){const M=x[T];(!M||M.dist(this.touches[T])>30)&&(this.aborted=!0)}}touchend(l,f,y){if((!this.centroid||l.timeStamp-this.startTime>500)&&(this.aborted=!0),y.length===0){const x=!this.aborted&&this.centroid;if(this.reset(),x)return x}}}class b0{constructor(l){this.singleTap=new jl(l),this.numTaps=l.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(l,f,y){this.singleTap.touchstart(l,f,y)}touchmove(l,f,y){this.singleTap.touchmove(l,f,y)}touchend(l,f,y){const x=this.singleTap.touchend(l,f,y);if(x){const T=l.timeStamp-this.lastTime<500,M=!this.lastTap||this.lastTap.dist(x)<30;if(T&&M||this.reset(),this.count++,this.lastTime=l.timeStamp,this.lastTap=x,this.count===this.numTaps)return this.reset(),x}}}class Jm{constructor(){this._zoomIn=new b0({numTouches:1,numTaps:2}),this._zoomOut=new b0({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(l,f,y){this._zoomIn.touchstart(l,f,y),this._zoomOut.touchstart(l,f,y)}touchmove(l,f,y){this._zoomIn.touchmove(l,f,y),this._zoomOut.touchmove(l,f,y)}touchend(l,f,y){const x=this._zoomIn.touchend(l,f,y),T=this._zoomOut.touchend(l,f,y);return x?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:M=>M.easeTo({duration:300,zoom:M.getZoom()+1,around:M.unproject(x)},{originalEvent:l})}):T?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:M=>M.easeTo({duration:300,zoom:M.getZoom()-1,around:M.unproject(T)},{originalEvent:l})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const e3={0:1,2:2};class $l{constructor(l){this.reset(),this._clickTolerance=l.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(l,f){return!1}_move(l,f){return{}}mousedown(l,f){if(this._lastPoint)return;const y=X(l);this._correctButton(l,y)&&(this._lastPoint=f,this._eventButton=y)}mousemoveWindow(l,f){const y=this._lastPoint;if(y){if(l.preventDefault(),this._eventButton!=null&&function(x,T){const M=e3[T];return x.buttons===void 0||(x.buttons&M)!==M}(l,this._eventButton))this.reset();else if(this._moved||!(f.dist(y)<this._clickTolerance))return this._moved=!0,this._lastPoint=f,this._move(y,f)}}mouseupWindow(l){this._lastPoint&&X(l)===this._eventButton&&(this._moved&&J(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class w0 extends $l{mousedown(l,f){super.mousedown(l,f),this._lastPoint&&(this._active=!0)}_correctButton(l,f){return f===0&&!l.ctrlKey}_move(l,f){return{around:f,panDelta:f.sub(l)}}}class T0 extends $l{_correctButton(l,f){return f===0&&l.ctrlKey||f===2}_move(l,f){const y=.8*(f.x-l.x);if(y)return this._active=!0,{bearingDelta:y}}contextmenu(l){l.preventDefault()}}class S0 extends $l{_correctButton(l,f){return f===0&&l.ctrlKey||f===2}_move(l,f){const y=-.5*(f.y-l.y);if(y)return this._active=!0,{pitchDelta:y}}contextmenu(l){l.preventDefault()}}class L1{constructor(l,f){this._map=l,this._el=l.getCanvasContainer(),this._minTouches=1,this._clickTolerance=f.clickTolerance||1,this.reset(),o.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new o.Point(0,0)}touchstart(l,f,y){return this._calculateTransform(l,f,y)}touchmove(l,f,y){if(this._active&&!(y.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(y.length===1&&!o.isFullscreen())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return l.cancelable&&l.preventDefault(),this._calculateTransform(l,f,y)}}touchend(l,f,y){this._calculateTransform(l,f,y),this._active&&y.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(l,f,y){y.length>0&&(this._active=!0);const x=D1(y,f),T=new o.Point(0,0),M=new o.Point(0,0);let I=0;for(const B in x){const R=x[B],H=this._touches[B];H&&(T._add(R),M._add(R.sub(H)),I++,x[B]=R)}if(this._touches=x,I<this._minTouches||!M.mag())return;const k=M.div(I);return this._sum._add(k),this._sum.mag()<this._clickTolerance?void 0:{around:T.div(I),panDelta:k}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=C("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class oc{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(l){}_move(l,f,y){return{}}touchstart(l,f,y){this._firstTwoTouches||y.length<2||(this._firstTwoTouches=[y[0].identifier,y[1].identifier],this._start([f[0],f[1]]))}touchmove(l,f,y){const x=this._firstTwoTouches;if(!x)return;l.preventDefault();const[T,M]=x,I=ac(y,f,T),k=ac(y,f,M);if(!I||!k)return;const B=this._aroundCenter?null:I.add(k).div(2);return this._move([I,k],B,l)}touchend(l,f,y){if(!this._firstTwoTouches)return;const[x,T]=this._firstTwoTouches,M=ac(y,f,x),I=ac(y,f,T);M&&I||(this._active&&J(),this.reset())}touchcancel(){this.reset()}enable(l){this._enabled=!0,this._aroundCenter=!!l&&l.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function ac(m,l,f){for(let y=0;y<m.length;y++)if(m[y].identifier===f)return l[y]}function E0(m,l){return Math.log(m/l)/Math.LN2}class t3 extends oc{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(l){this._startDistance=this._distance=l[0].dist(l[1])}_move(l,f){const y=this._distance;if(this._distance=l[0].dist(l[1]),this._active||!(Math.abs(E0(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:E0(this._distance,y),pinchAround:f}}}function P0(m,l){return 180*m.angleWith(l)/Math.PI}class r3 extends oc{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(l){this._startVector=this._vector=l[0].sub(l[1]),this._minDiameter=l[0].dist(l[1])}_move(l,f){const y=this._vector;if(this._vector=l[0].sub(l[1]),y&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:P0(this._vector,y),pinchAround:f}}_isBelowThreshold(l){this._minDiameter=Math.min(this._minDiameter,l.mag());const f=25/(Math.PI*this._minDiameter)*360,y=this._startVector;if(!y)return!1;const x=P0(l,y);return Math.abs(x)<f}}function hs(m){return Math.abs(m.y)>Math.abs(m.x)}class n3 extends oc{constructor(l){super(),this._map=l}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(l){this._lastPoints=l,hs(l[0].sub(l[1]))&&(this._valid=!1)}_move(l,f,y){const x=this._lastPoints;if(!x)return;const T=l[0].sub(x[0]),M=l[1].sub(x[1]);return this._map._cooperativeGestures&&!o.isFullscreen()&&y.touches.length<3||(this._valid=this.gestureBeginsVertically(T,M,y.timeStamp),!this._valid)?void 0:(this._lastPoints=l,this._active=!0,{pitchDelta:(T.y+M.y)/2*-.5})}gestureBeginsVertically(l,f,y){if(this._valid!==void 0)return this._valid;const x=l.mag()>=2,T=f.mag()>=2;if(!x&&!T)return;if(!x||!T)return this._firstMove==null&&(this._firstMove=y),y-this._firstMove<100&&void 0;const M=l.y>0==f.y>0;return hs(l)&&hs(f)&&M}}const i3={panStep:100,bearingStep:15,pitchStep:10};class Qm{constructor(){const l=i3;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(l){if(l.altKey||l.ctrlKey||l.metaKey)return;let f=0,y=0,x=0,T=0,M=0;switch(l.keyCode){case 61:case 107:case 171:case 187:f=1;break;case 189:case 109:case 173:f=-1;break;case 37:l.shiftKey?y=-1:(l.preventDefault(),T=-1);break;case 39:l.shiftKey?y=1:(l.preventDefault(),T=1);break;case 38:l.shiftKey?x=1:(l.preventDefault(),M=-1);break;case 40:l.shiftKey?x=-1:(l.preventDefault(),M=1);break;default:return}return this._rotationDisabled&&(y=0,x=0),{cameraAnimation:I=>{const k=I.getZoom();I.easeTo({duration:300,easeId:"keyboardHandler",easing:o3,zoom:f?Math.round(k)+f*(l.shiftKey?2:1):k,bearing:I.getBearing()+y*this._bearingStep,pitch:I.getPitch()+x*this._pitchStep,offset:[-T*this._panStep,-M*this._panStep],center:I.getCenter()},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function o3(m){return m*(2-m)}const A0=4.000244140625;class a3{constructor(l,f){this._map=l,this._el=l.getCanvasContainer(),this._handler=f,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,o.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(l){this._defaultZoomRate=l}setWheelZoomRate(l){this._wheelZoomRate=l}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(l){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!l&&l.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(l){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(l.ctrlKey||l.metaKey||this.isZooming()||o.isFullscreen()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let f=l.deltaMode===o.window.WheelEvent.DOM_DELTA_LINE?40*l.deltaY:l.deltaY;const y=o.exported.now(),x=y-(this._lastWheelEventTime||0);this._lastWheelEventTime=y,f!==0&&f%A0==0?this._type="wheel":f!==0&&Math.abs(f)<4?this._type="trackpad":x>400?(this._type=null,this._lastValue=f,this._timeout=setTimeout(this._onTimeout,40,l)):this._type||(this._type=Math.abs(x*f)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,f+=this._lastValue)),l.shiftKey&&f&&(f/=4),this._type&&(this._lastWheelEvent=l,this._delta-=f,this._active||this._start(l)),l.preventDefault()}_onTimeout(l){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(l)}_start(l){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const f=q(this._el,l);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:f,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const l=this._map.transform;this._type==="wheel"&&l.projection.wrap&&(l._center.lng>=180||l._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const f=()=>l._terrainEnabled()&&this._aroundCoord?l.computeZoomRelativeTo(this._aroundCoord):l.zoom;if(this._delta!==0){const k=this._type==="wheel"&&Math.abs(this._delta)>A0?this._wheelZoomRate:this._defaultZoomRate;let B=2/(1+Math.exp(-Math.abs(this._delta*k)));this._delta<0&&B!==0&&(B=1/B);const R=f(),H=Math.pow(2,R),te=typeof this._targetZoom=="number"?l.zoomScale(this._targetZoom):H;this._targetZoom=Math.min(l.maxZoom,Math.max(l.minZoom,l.scaleZoom(te*B))),this._type==="wheel"&&(this._startZoom=R,this._easing=this._smoothOutEasing(200)),this._delta=0}const y=typeof this._targetZoom=="number"?this._targetZoom:f(),x=this._startZoom,T=this._easing;let M,I=!1;if(this._type==="wheel"&&x&&T){const k=Math.min((o.exported.now()-this._lastWheelEventTime)/200,1),B=T(k);M=o.number(x,y,B),k<1?this._frameId||(this._frameId=!0):I=!0}else M=y,I=!0;return this._active=!0,I&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!I,zoomDelta:M-f(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(l){let f=o.ease;if(this._prevEase){const y=this._prevEase,x=(o.exported.now()-y.start)/y.duration,T=y.easing(x+.01)-y.easing(x),M=.27/Math.sqrt(T*T+1e-4)*.01,I=Math.sqrt(.0729-M*M);f=o.bezier(M,I,.25,1)}return this._prevEase={start:o.exported.now(),duration:l,easing:f},f}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=C("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(o.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class s3{constructor(l,f){this._clickZoom=l,this._tapZoom=f}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class yi{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(l,f){return l.preventDefault(),{cameraAnimation:y=>{y.easeTo({duration:300,zoom:y.getZoom()+(l.shiftKey?-1:1),around:y.unproject(f)},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class e7{constructor(){this._tap=new b0({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(l,f,y){this._swipePoint||(this._tapTime&&l.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?y.length>0&&(this._swipePoint=f[0],this._swipeTouch=y[0].identifier):this._tap.touchstart(l,f,y))}touchmove(l,f,y){if(this._tapTime){if(this._swipePoint){if(y[0].identifier!==this._swipeTouch)return;const x=f[0],T=x.y-this._swipePoint.y;return this._swipePoint=x,l.preventDefault(),this._active=!0,{zoomDelta:T/128}}}else this._tap.touchmove(l,f,y)}touchend(l,f,y){this._tapTime?this._swipePoint&&y.length===0&&this.reset():this._tap.touchend(l,f,y)&&(this._tapTime=l.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class l3{constructor(l,f,y){this._el=l,this._mousePan=f,this._touchPan=y}enable(l){this._inertiaOptions=l||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class t7{constructor(l,f,y){this._pitchWithRotate=l.pitchWithRotate,this._mouseRotate=f,this._mousePitch=y}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class r7{constructor(l,f,y,x){this._el=l,this._touchZoom=f,this._touchRotate=y,this._tapDragZoom=x,this._rotationDisabled=!1,this._enabled=!0}enable(l){this._touchZoom.enable(l),this._rotationDisabled||this._touchRotate.enable(l),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const xo=m=>m.zoom||m.drag||m.pitch||m.rotate;class u3 extends o.Event{}class n7{constructor(){this.constants=[1,1,.01],this.radius=0}setup(l,f){const y=o.sub([],f,l);this.radius=o.length(y[2]<0?o.div([],y,this.constants):[y[0],y[1],0])}projectRay(l){o.div(l,l,this.constants),o.normalize(l,l),o.mul$1(l,l,this.constants);const f=o.scale$2([],l,this.radius);if(f[2]>0){const y=o.scale$2([],[0,0,1],o.dot(f,[0,0,1])),x=o.scale$2([],o.normalize([],[f[0],f[1],0]),this.radius),T=o.add([],f,o.scale$2([],o.sub([],o.add([],x,y),f),2));f[0]=T[0],f[1]=T[1]}return f}}function $o(m){return m.panDelta&&m.panDelta.mag()||m.zoomDelta||m.bearingDelta||m.pitchDelta}class la{constructor(l,f){this._map=l,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new J2(l),this._bearingSnap=f.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new n7,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(f),o.bindAll(["handleEvent","handleWindowEvent"],this);const y=this._el;this._listeners=[[y,"touchstart",{passive:!0}],[y,"touchmove",{passive:!1}],[y,"touchend",void 0],[y,"touchcancel",void 0],[y,"mousedown",void 0],[y,"mousemove",void 0],[y,"mouseup",void 0],[o.window.document,"mousemove",{capture:!0}],[o.window.document,"mouseup",void 0],[y,"mouseover",void 0],[y,"mouseout",void 0],[y,"dblclick",void 0],[y,"click",void 0],[y,"keydown",{capture:!1}],[y,"keyup",void 0],[y,"wheel",{passive:!1}],[y,"contextmenu",void 0],[o.window,"blur",void 0]];for(const[x,T,M]of this._listeners)x.addEventListener(T,x===o.window.document?this.handleWindowEvent:this.handleEvent,M)}destroy(){for(const[l,f,y]of this._listeners)l.removeEventListener(f,l===o.window.document?this.handleWindowEvent:this.handleEvent,y)}_addDefaultHandlers(l){const f=this._map,y=f.getCanvasContainer();this._add("mapEvent",new x0(f,l));const x=f.boxZoom=new Q2(f,l);this._add("boxZoom",x);const T=new Jm,M=new yi;f.doubleClickZoom=new s3(M,T),this._add("tapZoom",T),this._add("clickZoom",M);const I=new e7;this._add("tapDragZoom",I);const k=f.touchPitch=new n3(f);this._add("touchPitch",k);const B=new T0(l),R=new S0(l);f.dragRotate=new t7(l,B,R),this._add("mouseRotate",B,["mousePitch"]),this._add("mousePitch",R,["mouseRotate"]);const H=new w0(l),te=new L1(f,l);f.dragPan=new l3(y,H,te),this._add("mousePan",H),this._add("touchPan",te,["touchZoom","touchRotate"]);const ie=new r3,se=new t3;f.touchZoomRotate=new r7(y,se,ie,I),this._add("touchRotate",ie,["touchPan","touchZoom"]),this._add("touchZoom",se,["touchPan","touchRotate"]),this._add("blockableMapEvent",new k1(f));const ae=f.scrollZoom=new a3(f,this);this._add("scrollZoom",ae,["mousePan"]);const ce=f.keyboard=new Qm;this._add("keyboard",ce);for(const Z of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])l.interactive&&l[Z]&&f[Z].enable(l[Z])}_add(l,f,y){this._handlers.push({handlerName:l,handler:f,allowed:y}),this._handlersById[l]=f}stop(l){if(!this._updatingCamera){for(const{handler:f}of this._handlers)f.reset();this._inertia.clear(),this._fireEvents({},{},l),this._changes=[]}}isActive(){for(const{handler:l}of this._handlers)if(l.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!xo(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(l,f,y){for(const x in l)if(x!==y&&(!f||f.indexOf(x)<0))return!0;return!1}handleWindowEvent(l){this.handleEvent(l,`${l.type}Window`)}_getMapTouches(l){const f=[];for(const y of l)this._el.contains(y.target)&&f.push(y);return f}handleEvent(l,f){this._updatingCamera=!0;const y=l.type==="renderFrame",x=y?void 0:l,T={needsRenderFrame:!1},M={},I={},k=l.touches?this._getMapTouches(l.touches):void 0,B=k?Y(this._el,k):y?void 0:q(this._el,l);for(const{handlerName:te,handler:ie,allowed:se}of this._handlers){if(!ie.isEnabled())continue;let ae;this._blockedByActive(I,se,te)?ie.reset():ie[f||l.type]&&(ae=ie[f||l.type](l,B,k),this.mergeHandlerResult(T,M,ae,te,x),ae&&ae.needsRenderFrame&&this._triggerRenderFrame()),(ae||ie.isActive())&&(I[te]=ie)}const R={};for(const te in this._previousActiveHandlers)I[te]||(R[te]=x);this._previousActiveHandlers=I,(Object.keys(R).length||$o(T))&&(this._changes.push([T,M,R]),this._triggerRenderFrame()),(Object.keys(I).length||$o(T))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:H}=T;H&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],H(this._map))}mergeHandlerResult(l,f,y,x,T){if(!y)return;o.extend(l,y);const M={handlerName:x,originalEvent:y.originalEvent||T};y.zoomDelta!==void 0&&(f.zoom=M),y.panDelta!==void 0&&(f.drag=M),y.pitchDelta!==void 0&&(f.pitch=M),y.bearingDelta!==void 0&&(f.rotate=M)}_applyChanges(){const l={},f={},y={};for(const[x,T,M]of this._changes)x.panDelta&&(l.panDelta=(l.panDelta||new o.Point(0,0))._add(x.panDelta)),x.zoomDelta&&(l.zoomDelta=(l.zoomDelta||0)+x.zoomDelta),x.bearingDelta&&(l.bearingDelta=(l.bearingDelta||0)+x.bearingDelta),x.pitchDelta&&(l.pitchDelta=(l.pitchDelta||0)+x.pitchDelta),x.around!==void 0&&(l.around=x.around),x.aroundCoord!==void 0&&(l.aroundCoord=x.aroundCoord),x.pinchAround!==void 0&&(l.pinchAround=x.pinchAround),x.noInertia&&(l.noInertia=x.noInertia),o.extend(f,T),o.extend(y,M);this._updateMapTransform(l,f,y),this._changes=[]}_updateMapTransform(l,f,y){const x=this._map,T=x.transform,M=ne=>[ne.x,ne.y,ne.z];if((ne=>{const de=this._eventsInProgress.drag;return de&&!this._handlersById[de.handlerName].isActive()})()&&!$o(l)){const ne=T.zoom;T.cameraElevationReference="sea",T.recenterOnTerrain(),T.cameraElevationReference="ground",ne!==T.zoom&&this._map._update(!0)}if(T._isCameraConstrained&&x._stop(!0),!$o(l))return void this._fireEvents(f,y,!0);let{panDelta:I,zoomDelta:k,bearingDelta:B,pitchDelta:R,around:H,aroundCoord:te,pinchAround:ie}=l;T._isCameraConstrained&&(k>0&&(k=0),T._isCameraConstrained=!1),ie!==void 0&&(H=ie),(k||(ne=>f[ne]&&!this._eventsInProgress[ne])("drag"))&&H&&(this._dragOrigin=M(T.pointCoordinate3D(H)),this._trackingEllipsoid.setup(T._camera.position,this._dragOrigin)),T.cameraElevationReference="sea",x._stop(!0),H=H||x.transform.centerPoint,B&&(T.bearing+=B),R&&(T.pitch+=R),T._updateCameraState();const se=[0,0,0];if(I)if(T.projection.name==="mercator"){const ne=this._trackingEllipsoid.projectRay(T.screenPointToMercatorRay(H).dir),de=this._trackingEllipsoid.projectRay(T.screenPointToMercatorRay(H.sub(I)).dir);se[0]=de[0]-ne[0],se[1]=de[1]-ne[1]}else{const ne=T.pointCoordinate(H);if(T.projection.name==="globe"){I=I.rotate(-T.angle);const de=T._pixelsPerMercatorPixel/T.worldSize;se[0]=-I.x*o.mercatorScale(o.latFromMercatorY(ne.y))*de,se[1]=-I.y*o.mercatorScale(T.center.lat)*de}else{const de=T.pointCoordinate(H.sub(I));ne&&de&&(se[0]=de.x-ne.x,se[1]=de.y-ne.y)}}const ae=T.zoom,ce=[0,0,0];if(k){const ne=M(te||T.pointCoordinate3D(H)),de={dir:o.normalize([],o.sub([],ne,T._camera.position))};if(de.dir[2]<0){const pe=T.zoomDeltaToMovement(ne,k);o.scale$2(ce,de.dir,pe)}}const Z=o.add(se,se,ce);T._translateCameraConstrained(Z),k&&Math.abs(T.zoom-ae)>1e-4&&T.recenterOnTerrain(),T.cameraElevationReference="ground",this._map._update(),l.noInertia||this._inertia.record(l),this._fireEvents(f,y,!0)}_fireEvents(l,f,y){const x=xo(this._eventsInProgress),T=xo(l),M={};for(const R in l){const{originalEvent:H}=l[R];this._eventsInProgress[R]||(M[`${R}start`]=H),this._eventsInProgress[R]=l[R]}!x&&T&&this._fireEvent("movestart",T.originalEvent);for(const R in M)this._fireEvent(R,M[R]);T&&this._fireEvent("move",T.originalEvent);for(const R in l){const{originalEvent:H}=l[R];this._fireEvent(R,H)}const I={};let k;for(const R in this._eventsInProgress){const{handlerName:H,originalEvent:te}=this._eventsInProgress[R];this._handlersById[H].isActive()||(delete this._eventsInProgress[R],k=f[H]||te,I[`${R}end`]=k)}for(const R in I)this._fireEvent(R,I[R]);const B=xo(this._eventsInProgress);if(y&&(x||T)&&!B){this._updatingCamera=!0;const R=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),H=te=>te!==0&&-this._bearingSnap<te&&te<this._bearingSnap;R?(H(R.bearing||this._map.getBearing())&&(R.bearing=0),this._map.easeTo(R,{originalEvent:k})):(this._map.fire(new o.Event("moveend",{originalEvent:k})),H(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(l,f){this._map.fire(new o.Event(l,f?{originalEvent:f}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(l=>{this._frameId=void 0,this.handleEvent(new u3("renderFrame",{timeStamp:l})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Us="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class z1 extends o.Evented{constructor(l,f){super(),this._moving=!1,this._zooming=!1,this.transform=l,this._bearingSnap=f.bearingSnap,this._respectPrefersReducedMotion=f.respectPrefersReducedMotion!==!1,o.bindAll(["_renderFrameCallback"],this)}getCenter(){return new o.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(l,f){return this.jumpTo({center:l},f)}panBy(l,f,y){return l=o.Point.convert(l).mult(-1),this.panTo(this.transform.center,o.extend({offset:l},f),y)}panTo(l,f,y){return this.easeTo(o.extend({center:l},f),y)}getZoom(){return this.transform.zoom}setZoom(l,f){return this.jumpTo({zoom:l},f),this}zoomTo(l,f,y){return this.easeTo(o.extend({zoom:l},f),y)}zoomIn(l,f){return this.zoomTo(this.getZoom()+1,l,f),this}zoomOut(l,f){return this.zoomTo(this.getZoom()-1,l,f),this}getBearing(){return this.transform.bearing}setBearing(l,f){return this.jumpTo({bearing:l},f),this}getPadding(){return this.transform.padding}setPadding(l,f){return this.jumpTo({padding:l},f),this}rotateTo(l,f,y){return this.easeTo(o.extend({bearing:l},f),y)}resetNorth(l,f){return this.rotateTo(0,o.extend({duration:1e3},l),f),this}resetNorthPitch(l,f){return this.easeTo(o.extend({bearing:0,pitch:0,duration:1e3},l),f),this}snapToNorth(l,f){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(l,f):this}getPitch(){return this.transform.pitch}setPitch(l,f){return this.jumpTo({pitch:l},f),this}cameraForBounds(l,f){l=o.LngLatBounds.convert(l);const y=f&&f.bearing||0,x=f&&f.pitch||0,T=l.getNorthWest(),M=l.getSouthEast();return this._cameraForBounds(this.transform,T,M,y,x,f)}_extendCameraOptions(l){const f={top:0,bottom:0,right:0,left:0};if(typeof(l=o.extend({padding:f,offset:[0,0],maxZoom:this.transform.maxZoom},l)).padding=="number"){const y=l.padding;l.padding={top:y,bottom:y,right:y,left:y}}return l.padding=o.extend(f,l.padding),l}_minimumAABBFrustumDistance(l,f){const y=f.max[0]-f.min[0],x=f.max[1]-f.min[1];return y/x>l.aspect?y/(2*Math.tan(.5*l.fovX)*l.aspect):x/(2*Math.tan(.5*l.fovY)*l.aspect)}_cameraForBoundsOnGlobe(l,f,y,x,T,M){const I=l.clone(),k=this._extendCameraOptions(M);I.bearing=x,I.pitch=T;const B=o.LngLat.convert(f),R=o.LngLat.convert(y),H=.5*(B.lat+R.lat),te=.5*(B.lng+R.lng),ie=o.latLngToECEF(H,te),se=o.normalize([],ie),ae=o.normalize([],o.cross([],se,[0,1,0])),ce=o.cross([],ae,se),Z=[ae[0],ae[1],ae[2],0,ce[0],ce[1],ce[2],0,se[0],se[1],se[2],0,0,0,0,1],ne=[ie,o.latLngToECEF(B.lat,B.lng),o.latLngToECEF(R.lat,B.lng),o.latLngToECEF(R.lat,R.lng),o.latLngToECEF(B.lat,R.lng),o.latLngToECEF(H,B.lng),o.latLngToECEF(H,R.lng),o.latLngToECEF(B.lat,te),o.latLngToECEF(R.lat,te)];let de=o.Aabb.fromPoints(ne.map(ut=>[o.dot(ae,ut),o.dot(ce,ut),o.dot(se,ut)]));const pe=o.transformMat4([],de.center,Z);o.squaredLength(pe)===0&&o.set(pe,0,0,1),o.normalize(pe,pe),o.scale$2(pe,pe,o.GLOBE_RADIUS),I.center=o.ecefToLatLng(pe);const Ee=I.getWorldToCameraMatrix(),Me=o.invert(new Float64Array(16),Ee);de=o.Aabb.applyTransform(de,o.multiply([],Ee,Z)),o.transformMat4(pe,pe,Ee);const Ae=.5*(de.max[2]-de.min[2]),Fe=this._minimumAABBFrustumDistance(I,de),Be=o.scale$2([],[0,0,1],Ae),He=o.add(Be,pe,Be),gt=Fe+(I.pitch===0?0:o.distance(pe,He)),Ge=I.globeCenterInViewSpace,ot=o.sub([],pe,[Ge[0],Ge[1],Ge[2]]);o.normalize(ot,ot),o.scale$2(ot,ot,gt);const Ke=o.add([],pe,ot);o.transformMat4(Ke,Ke,Me);const mt=o.earthRadius/o.GLOBE_RADIUS,qe=o.length(Ke),it=o.mercatorZfromAltitude(Math.max(qe*mt-o.earthRadius,Number.EPSILON),0),_t=Math.min(I.zoomFromMercatorZAdjusted(it),k.maxZoom);return _t>.5*(o.GLOBE_ZOOM_THRESHOLD_MIN+o.GLOBE_ZOOM_THRESHOLD_MAX)?(I.setProjection({name:"mercator"}),I.zoom=_t,this._cameraForBounds(I,f,y,x,T,M)):{center:I.center,zoom:_t,bearing:x,pitch:T}}queryTerrainElevation(l,f){const y=this.transform.elevation;return y?(f=o.extend({},{exaggerated:!0},f),y.getAtPoint(o.MercatorCoordinate.fromLngLat(l),null,f.exaggerated)):null}_cameraForBounds(l,f,y,x,T,M){if(l.projection.name==="globe")return this._cameraForBoundsOnGlobe(l,f,y,x,T,M);const I=l.clone(),k=this._extendCameraOptions(M),B=I.padding;I.bearing=x,I.pitch=T;const R=o.LngLat.convert(f),H=o.LngLat.convert(y),te=new o.LngLat(R.lng,H.lat),ie=new o.LngLat(H.lng,R.lat),se=I.project(R),ae=I.project(H),ce=this.queryTerrainElevation(R),Z=this.queryTerrainElevation(H),ne=this.queryTerrainElevation(te),de=this.queryTerrainElevation(ie),pe=[[se.x,se.y,Math.min(ce||0,Z||0,ne||0,de||0)],[ae.x,ae.y,Math.max(ce||0,Z||0,ne||0,de||0)]];let Ee=o.Aabb.fromPoints(pe);const Me=I.getWorldToCameraMatrix(),Ae=o.invert(new Float64Array(16),Me);Ee=o.Aabb.applyTransform(Ee,Me);const Fe=o.sub([],Ee.max,Ee.min),Be=B.left||0,He=B.right||0,gt=B.bottom||0,Ge=B.top||0,{left:ot,right:Ke,top:mt,bottom:qe}=k.padding,it=.5*(Be+He),_t=.5*(Ge+gt),ut=Math.min(I.scaleZoom(I.scale*Math.min((I.width-(Be+He+ot+Ke))/Fe[0],(I.height-(gt+Ge+qe+mt))/Fe[1])),k.maxZoom),vt=I.scale/I.zoomScale(ut);Ee=new o.Aabb([Ee.min[0]-(ot+it)*vt,Ee.min[1]-(qe+_t)*vt,Ee.min[2]],[Ee.max[0]+(Ke+it)*vt,Ee.max[1]+(mt+_t)*vt,Ee.max[2]]);const Gt=.5*Fe[2],tr=this._minimumAABBFrustumDistance(I,Ee),jt=[0,0,1,0];o.transformMat4$1(jt,jt,Me),o.normalize$2(jt,jt);const Yt=o.scale$2([],jt,tr+Gt),yr=o.add([],Ee.center,Yt),dr=(typeof k.offset.x=="number"&&typeof k.offset.y=="number"?new o.Point(k.offset.x,k.offset.y):o.Point.convert(k.offset)).rotate(-o.degToRad(x));Ee.center[0]-=dr.x*vt,Ee.center[1]+=dr.y*vt,o.transformMat4(Ee.center,Ee.center,Ae),o.transformMat4(yr,yr,Ae);const Ut=[Ee.center[0],Ee.center[1],yr[2]*I.pixelsPerMeter];o.scale$2(Ut,Ut,1/I.worldSize);const zr=o.lngFromMercatorX(Ut[0]),Fr=o.latFromMercatorY(Ut[1]),jr=Math.min(I._zoomFromMercatorZ(Ut[2]),k.maxZoom),$r=new o.LngLat(zr,Fr);return I.mercatorFromTransition&&jr<.5*(o.GLOBE_ZOOM_THRESHOLD_MIN+o.GLOBE_ZOOM_THRESHOLD_MAX)?(I.setProjection({name:"globe"}),I.zoom=jr,this._cameraForBounds(I,f,y,x,T,M)):{center:$r,zoom:jr,bearing:x,pitch:T}}fitBounds(l,f,y){const x=this.cameraForBounds(l,f);return this._fitInternal(x,f,y)}fitScreenCoordinates(l,f,y,x,T){const M=o.Point.convert(l),I=o.Point.convert(f),k=new o.Point(Math.min(M.x,I.x),Math.min(M.y,I.y)),B=new o.Point(Math.max(M.x,I.x),Math.max(M.y,I.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(M,I))return this;const R=this.transform.pointLocation3D(k),H=this.transform.pointLocation3D(B),te=this.transform.pointLocation3D(new o.Point(k.x,B.y)),ie=this.transform.pointLocation3D(new o.Point(B.x,k.y)),se=[Math.min(R.lng,H.lng,te.lng,ie.lng),Math.min(R.lat,H.lat,te.lat,ie.lat)],ae=[Math.max(R.lng,H.lng,te.lng,ie.lng),Math.max(R.lat,H.lat,te.lat,ie.lat)],ce=x&&x.pitch?x.pitch:this.getPitch(),Z=this._cameraForBounds(this.transform,se,ae,y,ce,x);return this._fitInternal(Z,x,T)}_fitInternal(l,f,y){return l?(delete(f=o.extend(l,f)).padding,f.linear?this.easeTo(f,y):this.flyTo(f,y)):this}jumpTo(l,f){this.stop();const y=l.preloadOnly?this.transform.clone():this.transform;let x=!1,T=!1,M=!1;return"zoom"in l&&y.zoom!==+l.zoom&&(x=!0,y.zoom=+l.zoom),l.center!==void 0&&(y.center=o.LngLat.convert(l.center)),"bearing"in l&&y.bearing!==+l.bearing&&(T=!0,y.bearing=+l.bearing),"pitch"in l&&y.pitch!==+l.pitch&&(M=!0,y.pitch=+l.pitch),l.padding==null||y.isPaddingEqual(l.padding)||(y.padding=l.padding),l.preloadOnly?(this._preloadTiles(y),this):(this.fire(new o.Event("movestart",f)).fire(new o.Event("move",f)),x&&this.fire(new o.Event("zoomstart",f)).fire(new o.Event("zoom",f)).fire(new o.Event("zoomend",f)),T&&this.fire(new o.Event("rotatestart",f)).fire(new o.Event("rotate",f)).fire(new o.Event("rotateend",f)),M&&this.fire(new o.Event("pitchstart",f)).fire(new o.Event("pitch",f)).fire(new o.Event("pitchend",f)),this.fire(new o.Event("moveend",f)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||o.warnOnce(Us),this.transform.getFreeCameraOptions()}setFreeCameraOptions(l,f){const y=this.transform;if(!y.projection.supportsFreeCamera)return o.warnOnce(Us),this;this.stop();const x=y.zoom,T=y.pitch,M=y.bearing;y.setFreeCameraOptions(l);const I=x!==y.zoom,k=T!==y.pitch,B=M!==y.bearing;return this.fire(new o.Event("movestart",f)).fire(new o.Event("move",f)),I&&this.fire(new o.Event("zoomstart",f)).fire(new o.Event("zoom",f)).fire(new o.Event("zoomend",f)),B&&this.fire(new o.Event("rotatestart",f)).fire(new o.Event("rotate",f)).fire(new o.Event("rotateend",f)),k&&this.fire(new o.Event("pitchstart",f)).fire(new o.Event("pitch",f)).fire(new o.Event("pitchend",f)),this.fire(new o.Event("moveend",f)),this}easeTo(l,f){this._stop(!1,l.easeId),((l=o.extend({offset:[0,0],duration:500,easing:o.ease},l)).animate===!1||this._prefersReducedMotion(l))&&(l.duration=0);const y=this.transform,x=this.getZoom(),T=this.getBearing(),M=this.getPitch(),I=this.getPadding(),k="zoom"in l?+l.zoom:x,B="bearing"in l?this._normalizeBearing(l.bearing,T):T,R="pitch"in l?+l.pitch:M,H="padding"in l?l.padding:y.padding,te=o.Point.convert(l.offset);let ie,se,ae;if(y.projection.name==="globe"){const Be=o.MercatorCoordinate.fromLngLat(y.center),He=te.rotate(-y.angle);Be.x+=He.x/y.worldSize,Be.y+=He.y/y.worldSize;const gt=Be.toLngLat(),Ge=o.LngLat.convert(l.center||gt);this._normalizeCenter(Ge),ie=y.centerPoint.add(He),se=new o.Point(Be.x,Be.y).mult(y.worldSize),ae=new o.Point(o.mercatorXfromLng(Ge.lng),o.mercatorYfromLat(Ge.lat)).mult(y.worldSize).sub(se)}else{ie=y.centerPoint.add(te);const Be=y.pointLocation(ie),He=o.LngLat.convert(l.center||Be);this._normalizeCenter(He),se=y.project(Be),ae=y.project(He).sub(se)}const ce=y.zoomScale(k-x);let Z,ne;l.around&&(Z=o.LngLat.convert(l.around),ne=y.locationPoint(Z));const de=this._zooming||k!==x,pe=this._rotating||T!==B,Ee=this._pitching||R!==M,Me=!y.isPaddingEqual(H),Ae=Be=>He=>{if(de&&(Be.zoom=o.number(x,k,He)),pe&&(Be.bearing=o.number(T,B,He)),Ee&&(Be.pitch=o.number(M,R,He)),Me&&(Be.interpolatePadding(I,H,He),ie=Be.centerPoint.add(te)),Z)Be.setLocationAtPoint(Z,ne);else{const gt=Be.zoomScale(Be.zoom-x),Ge=k>x?Math.min(2,ce):Math.max(.5,ce),ot=Math.pow(Ge,1-He),Ke=Be.unproject(se.add(ae.mult(He*ot)).mult(gt));Be.setLocationAtPoint(Be.renderWorldCopies?Ke.wrap():Ke,ie)}return l.preloadOnly||this._fireMoveEvents(f),Be};if(l.preloadOnly){const Be=this._emulate(Ae,l.duration,y);return this._preloadTiles(Be),this}const Fe={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=de,this._rotating=pe,this._pitching=Ee,this._padding=Me,this._easeId=l.easeId,this._prepareEase(f,l.noMoveStart,Fe),this._ease(Ae(y),Be=>{y.recenterOnTerrain(),this._afterEase(f,Be)},l),this}_prepareEase(l,f,y={}){this._moving=!0,this.transform.cameraElevationReference="sea",f||y.moving||this.fire(new o.Event("movestart",l)),this._zooming&&!y.zooming&&this.fire(new o.Event("zoomstart",l)),this._rotating&&!y.rotating&&this.fire(new o.Event("rotatestart",l)),this._pitching&&!y.pitching&&this.fire(new o.Event("pitchstart",l))}_fireMoveEvents(l){this.fire(new o.Event("move",l)),this._zooming&&this.fire(new o.Event("zoom",l)),this._rotating&&this.fire(new o.Event("rotate",l)),this._pitching&&this.fire(new o.Event("pitch",l))}_afterEase(l,f){if(this._easeId&&f&&this._easeId===f)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const y=this._zooming,x=this._rotating,T=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,y&&this.fire(new o.Event("zoomend",l)),x&&this.fire(new o.Event("rotateend",l)),T&&this.fire(new o.Event("pitchend",l)),this.fire(new o.Event("moveend",l))}flyTo(l,f){if(this._prefersReducedMotion(l)){const ut=o.pick(l,["center","zoom","bearing","pitch","around"]);return this.jumpTo(ut,f)}this.stop(),l=o.extend({offset:[0,0],speed:1.2,curve:1.42,easing:o.ease},l);const y=this.transform,x=this.getZoom(),T=this.getBearing(),M=this.getPitch(),I=this.getPadding(),k="zoom"in l?o.clamp(+l.zoom,y.minZoom,y.maxZoom):x,B="bearing"in l?this._normalizeBearing(l.bearing,T):T,R="pitch"in l?+l.pitch:M,H="padding"in l?l.padding:y.padding,te=y.zoomScale(k-x),ie=o.Point.convert(l.offset);let se=y.centerPoint.add(ie);const ae=y.pointLocation(se),ce=o.LngLat.convert(l.center||ae);this._normalizeCenter(ce);const Z=y.project(ae),ne=y.project(ce).sub(Z);let de=l.curve;const pe=Math.max(y.width,y.height),Ee=pe/te,Me=ne.mag();if("minZoom"in l){const ut=o.clamp(Math.min(l.minZoom,x,k),y.minZoom,y.maxZoom),vt=pe/y.zoomScale(ut-x);de=Math.sqrt(vt/Me*2)}const Ae=de*de;function Fe(ut){const vt=(Ee*Ee-pe*pe+(ut?-1:1)*Ae*Ae*Me*Me)/(2*(ut?Ee:pe)*Ae*Me);return Math.log(Math.sqrt(vt*vt+1)-vt)}function Be(ut){return(Math.exp(ut)-Math.exp(-ut))/2}function He(ut){return(Math.exp(ut)+Math.exp(-ut))/2}const gt=Fe(0);let Ge=function(ut){return He(gt)/He(gt+de*ut)},ot=function(ut){return pe*((He(gt)*(Be(vt=gt+de*ut)/He(vt))-Be(gt))/Ae)/Me;var vt},Ke=(Fe(1)-gt)/de;if(Math.abs(Me)<1e-6||!isFinite(Ke)){if(Math.abs(pe-Ee)<1e-6)return this.easeTo(l,f);const ut=Ee<pe?-1:1;Ke=Math.abs(Math.log(Ee/pe))/de,ot=function(){return 0},Ge=function(vt){return Math.exp(ut*de*vt)}}l.duration="duration"in l?+l.duration:1e3*Ke/("screenSpeed"in l?+l.screenSpeed/de:+l.speed),l.maxDuration&&l.duration>l.maxDuration&&(l.duration=0);const mt=T!==B,qe=R!==M,it=!y.isPaddingEqual(H),_t=ut=>vt=>{const Gt=vt*Ke,tr=1/Ge(Gt);ut.zoom=vt===1?k:x+ut.scaleZoom(tr),mt&&(ut.bearing=o.number(T,B,vt)),qe&&(ut.pitch=o.number(M,R,vt)),it&&(ut.interpolatePadding(I,H,vt),se=ut.centerPoint.add(ie));const jt=vt===1?ce:ut.unproject(Z.add(ne.mult(ot(Gt))).mult(tr));return ut.setLocationAtPoint(ut.renderWorldCopies?jt.wrap():jt,se),ut._updateCameraOnTerrain(),l.preloadOnly||this._fireMoveEvents(f),ut};if(l.preloadOnly){const ut=this._emulate(_t,l.duration,y);return this._preloadTiles(ut),this}return this._zooming=!0,this._rotating=mt,this._pitching=qe,this._padding=it,this._prepareEase(f,!1),this._ease(_t(y),()=>this._afterEase(f),l),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(l,f){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const y=this._onEaseEnd;this._onEaseEnd=void 0,y.call(this,f)}if(!l){const y=this.handlers;y&&y.stop(!1)}return this}_ease(l,f,y){y.animate===!1||y.duration===0?(l(1),f()):(this._easeStart=o.exported.now(),this._easeOptions=y,this._onEaseFrame=l,this._onEaseEnd=f,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const l=Math.min((o.exported.now()-this._easeStart)/this._easeOptions.duration,1),f=this._onEaseFrame;f&&f(this._easeOptions.easing(l)),l<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(l,f){l=o.wrap(l,-180,180);const y=Math.abs(l-f);return Math.abs(l-360-f)<y&&(l-=360),Math.abs(l+360-f)<y&&(l+=360),l}_normalizeCenter(l){const f=this.transform;if(!f.renderWorldCopies||f.maxBounds)return;const y=l.lng-f.center.lng;l.lng+=y>180?-360:y<-180?360:0}_prefersReducedMotion(l){return this._respectPrefersReducedMotion&&o.exported.prefersReducedMotion&&!(l&&l.essential)}_emulate(l,f,y){const x=Math.ceil(15*f/1e3),T=[],M=l(y.clone());for(let I=0;I<=x;I++){const k=M(I/x);T.push(k.clone())}return T}}class Rt{constructor(l={}){this.options=l,o.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(l){const f=this.options&&this.options.compact;return this._map=l,this._container=C("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=C("button","mapboxgl-ctrl-attrib-button",this._container),C("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=C("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),f&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),f===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(l,f){const y=this._map._getUIString(`AttributionControl.${f}`);l.setAttribute("aria-label",y),l.removeAttribute("title"),l.firstElementChild&&l.firstElementChild.setAttribute("title",y)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let l=this._editLink;l||(l=this._editLink=this._container.querySelector(".mapbox-improve-map"));const f=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||o.config.ACCESS_TOKEN}];if(l){const y=f.reduce((x,T,M)=>(T.value&&(x+=`${T.key}=${T.value}${M<f.length-1?"&":""}`),x),"?");l.href=`${o.config.FEEDBACK_URL}/${y}#${ec(this._map,!0)}`,l.rel="noopener nofollow",this._setElementTitle(l,"MapFeedback")}}_updateData(l){!l||l.sourceDataType!=="metadata"&&l.sourceDataType!=="visibility"&&l.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let l=[];if(this._map.style.stylesheet){const x=this._map.style.stylesheet;this.styleOwner=x.owner,this.styleId=x.id}const f=this._map.style._sourceCaches;for(const x in f){const T=f[x];if(T.used){const M=T.getSource();M.attribution&&l.indexOf(M.attribution)<0&&l.push(M.attribution)}}l.sort((x,T)=>x.length-T.length),l=l.filter((x,T)=>{for(let M=T+1;M<l.length;M++)if(l[M].indexOf(x)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?l=[...this.options.customAttribution,...l]:l.unshift(this.options.customAttribution));const y=l.join(" | ");y!==this._attribHTML&&(this._attribHTML=y,l.length?(this._innerContainer.innerHTML=y,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class M0{constructor(){o.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(l){this._map=l,this._container=C("div","mapboxgl-ctrl");const f=C("a","mapboxgl-ctrl-logo");return f.target="_blank",f.rel="noopener nofollow",f.href="https://www.mapbox.com/",f.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),f.setAttribute("rel","noopener nofollow"),this._container.appendChild(f),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(l){l&&l.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const l=this._map.style._sourceCaches;if(Object.entries(l).length===0)return!0;for(const f in l){const y=l[f].getSource();if(y.hasOwnProperty("mapbox_logo")&&!y.mapbox_logo)return!1}return!0}_updateCompact(){const l=this._container.children;if(l.length){const f=l[0];this._map.getCanvasContainer().offsetWidth<250?f.classList.add("mapboxgl-compact"):f.classList.remove("mapboxgl-compact")}}}class C0{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(l){const f=++this._id;return this._queue.push({callback:l,id:f,cancelled:!1}),f}remove(l){const f=this._currentlyRunning,y=f?this._queue.concat(f):this._queue;for(const x of y)if(x.id===l)return void(x.cancelled=!0)}run(l=0){const f=this._currentlyRunning=this._queue;this._queue=[];for(const y of f)if(!y.cancelled&&(y.callback(l),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function Nl(m,l,f){if(m=new o.LngLat(m.lng,m.lat),l){const y=new o.LngLat(m.lng-360,m.lat),x=new o.LngLat(m.lng+360,m.lat),T=360*Math.ceil(Math.abs(m.lng-f.center.lng)/360),M=f.locationPoint(m).distSqr(l),I=l.x<0||l.y<0||l.x>f.width||l.y>f.height;f.locationPoint(y).distSqr(l)<M&&(I||Math.abs(y.lng-f.center.lng)<T)?m=y:f.locationPoint(x).distSqr(l)<M&&(I||Math.abs(x.lng-f.center.lng)<T)&&(m=x)}for(;Math.abs(m.lng-f.center.lng)>180;){const y=f.locationPoint(m);if(y.x>=0&&y.y>=0&&y.x<=f.width&&y.y<=f.height)break;m.lng>f.center.lng?m.lng-=360:m.lng+=360}return m}const Vs={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class Ct extends o.Evented{constructor(l,f){if(super(),(l instanceof o.window.HTMLElement||f)&&(l=o.extend({element:l},f)),o.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=l&&l.anchor||"center",this._color=l&&l.color||"#3FB1CE",this._scale=l&&l.scale||1,this._draggable=l&&l.draggable||!1,this._clickTolerance=l&&l.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=l&&l.rotation||0,this._rotationAlignment=l&&l.rotationAlignment||"auto",this._pitchAlignment=l&&l.pitchAlignment&&l.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=l&&l.occludedOpacity||.2,l&&l.element)this._element=l.element,this._offset=o.Point.convert(l&&l.offset||[0,0]);else{this._defaultMarker=!0,this._element=C("div");const x=41,T=27,M=L("svg",{display:"block",height:x*this._scale+"px",width:T*this._scale+"px",viewBox:`0 0 ${T} ${x}`},this._element),I=L("radialGradient",{id:"shadowGradient"},L("defs",{},M));L("stop",{offset:"10%","stop-opacity":.4},I),L("stop",{offset:"100%","stop-opacity":.05},I),L("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},M),L("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},M),L("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},M),L("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},M),this._offset=o.Point.convert(l&&l.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",x=>{x.preventDefault()}),this._element.addEventListener("mousedown",x=>{x.preventDefault()});const y=this._element.classList;for(const x in Vs)y.remove(`mapboxgl-marker-anchor-${x}`);y.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(l){return l===this._map||(this.remove(),this._map=l,l.getCanvasContainer().appendChild(this._element),l.on("move",this._updateMoving),l.on("moveend",this._update),l.on("remove",this._clearFadeTimer),l._addMarker(this),this.setDraggable(this._draggable),this._update(),l.on("click",this._onMapClick)),this}remove(){const l=this._map;return l&&(l.off("click",this._onMapClick),l.off("move",this._updateMoving),l.off("moveend",this._update),l.off("mousedown",this._addDragHandler),l.off("touchstart",this._addDragHandler),l.off("mouseup",this._onUp),l.off("touchend",this._onUp),l.off("mousemove",this._onMove),l.off("touchmove",this._onMove),l.off("remove",this._clearFadeTimer),l._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(l){return this._lngLat=o.LngLat.convert(l),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(l){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),l){if(!("offset"in l.options)){const x=Math.sqrt(Math.pow(13.5,2)/2);l.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[x,-1*(38.1-13.5+x)],"bottom-right":[-x,-1*(38.1-13.5+x)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=l,l._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(l){const f=l.code,y=l.charCode||l.keyCode;f!=="Space"&&f!=="Enter"&&y!==32&&y!==13||this.togglePopup()}_onMapClick(l){const f=l.originalEvent.target,y=this._element;this._popup&&(f===y||y.contains(f))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const l=this._popup;return l?(l.isOpen()?(l.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(l.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const l=this._map,f=this._pos;if(!l||!f)return!1;const y=l.unproject(f),x=l.getFreeCameraOptions();if(!x.position)return!1;const T=x.position.toLngLat();return T.distanceTo(y)<.9*T.distanceTo(this._lngLat)}_evaluateOpacity(){const l=this._map;if(!l)return;const f=this._pos;if(!f||f.x<0||f.x>l.transform.width||f.y<0||f.y>l.transform.height)return void this._clearFadeTimer();const y=l.unproject(f);let x;l._showingGlobe()&&o.isLngLatBehindGlobe(l.transform,this._lngLat)?x=0:(x=1-l._queryFogOpacity(y),l.transform._terrainEnabled()&&l.getTerrain()&&this._behindTerrain()&&(x*=this._occludedOpacity)),this._element.style.opacity=`${x}`,this._element.style.pointerEvents=x>0?"auto":"none",this._popup&&this._popup._setOpacity(x),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const l=this._pos;if(!l||!this._map)return;const f=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${l.x}px,${l.y}px)
            ${Vs[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${f.x}px,${f.y}px)
        `}_calculateXYTransform(){const l=this._pos,f=this._map,y=this.getPitchAlignment();if(!f||!l||y!=="map")return"";if(!f._showingGlobe()){const k=f.getPitch();return k?`rotateX(${k}deg)`:""}const x=o.radToDeg(o.globeTiltAtLngLat(f.transform,this._lngLat)),T=l.sub(o.globeCenterToScreenPoint(f.transform)),M=Math.abs(T.x)+Math.abs(T.y);if(M===0)return"";const I=x/M;return`rotateX(${-T.y*I}deg) rotateY(${T.x*I}deg)`}_calculateZTransform(){const l=this._pos,f=this._map;if(!f||!l)return"";let y=0;const x=this.getRotationAlignment();if(x==="map")if(f._showingGlobe()){const T=f.project(new o.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),M=f.project(new o.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(T);y=o.radToDeg(Math.atan2(M.y,M.x))-90}else y=-f.getBearing();else if(x==="horizon"){const T=o.smoothstep(4,6,f.getZoom()),M=o.globeCenterToScreenPoint(f.transform);M.y+=T*f.transform.height;const I=l.sub(M),k=o.radToDeg(Math.atan2(I.y,I.x));y=(k>90?k-270:k+90)*(1-T)}return y+=this._rotation,y?`rotateZ(${y}deg)`:""}_update(l){o.window.cancelAnimationFrame(this._updateFrameId);const f=this._map;f&&(f.transform.renderWorldCopies&&(this._lngLat=Nl(this._lngLat,this._pos,f.transform)),this._pos=f.project(this._lngLat),l===!0?this._updateFrameId=o.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),f._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(f._showingGlobe()||f.getTerrain()||f.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(l){return this._offset=o.Point.convert(l),this._update(),this}_onMove(l){const f=this._map;if(!f)return;const y=this._pointerdownPos,x=this._positionDelta;if(y&&x){if(!this._isDragging){const T=this._clickTolerance||f._clickTolerance;if(l.point.dist(y)<T)return;this._isDragging=!0}this._pos=l.point.sub(x),this._lngLat=f.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.Event("dragstart"))),this.fire(new o.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const l=this._map;l&&(l.off("mousemove",this._onMove),l.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new o.Event("dragend")),this._state="inactive"}_addDragHandler(l){const f=this._map,y=this._pos;f&&y&&this._element.contains(l.originalEvent.target)&&(l.preventDefault(),this._positionDelta=l.point.sub(y),this._pointerdownPos=l.point,this._state="pending",f.on("mousemove",this._onMove),f.on("touchmove",this._onMove),f.once("mouseup",this._onUp),f.once("touchend",this._onUp))}setDraggable(l){this._draggable=!!l;const f=this._map;return f&&(l?(f.on("mousedown",this._addDragHandler),f.on("touchstart",this._addDragHandler)):(f.off("mousedown",this._addDragHandler),f.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(l){return this._rotation=l||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(l){return this._rotationAlignment=l||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(l){return this._pitchAlignment=l||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(l){return this._occludedOpacity=l||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const I0={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},i7=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function c3(m=new o.Point(0,0),l="bottom"){if(typeof m=="number"){const f=Math.round(Math.sqrt(.5*Math.pow(m,2)));switch(l){case"top":return new o.Point(0,m);case"top-left":return new o.Point(f,f);case"top-right":return new o.Point(-f,f);case"bottom":return new o.Point(0,-m);case"bottom-left":return new o.Point(f,-f);case"bottom-right":return new o.Point(-f,-f);case"left":return new o.Point(m,0);case"right":return new o.Point(-m,0)}return new o.Point(0,0)}return m instanceof o.Point||Array.isArray(m)?o.Point.convert(m):o.Point.convert(m[l]||[0,0])}class O0{constructor(l){this.jumpTo(l)}getValue(l){if(l<=this._startTime)return this._start;if(l>=this._endTime)return this._end;const f=o.easeCubicInOut((l-this._startTime)/(this._endTime-this._startTime));return this._start*(1-f)+this._end*f}isEasing(l){return l>=this._startTime&&l<=this._endTime}jumpTo(l){this._startTime=-1/0,this._endTime=-1/0,this._start=l,this._end=l}easeTo(l,f,y){this._start=this.getValue(f),this._end=l,this._startTime=f,this._endTime=f+y}}const h3={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use ⌘ + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},f3={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0},o7={showCompass:!0,showZoom:!0,visualizePitch:!1};class a7{constructor(l,f,y=!1){this._clickTolerance=10,this.element=f,this.mouseRotate=new T0({clickTolerance:l.dragRotate._mouseRotate._clickTolerance}),this.map=l,y&&(this.mousePitch=new S0({clickTolerance:l.dragRotate._mousePitch._clickTolerance})),o.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),f.addEventListener("mousedown",this.mousedown),f.addEventListener("touchstart",this.touchstart,{passive:!1}),f.addEventListener("touchmove",this.touchmove),f.addEventListener("touchend",this.touchend),f.addEventListener("touchcancel",this.reset)}down(l,f){this.mouseRotate.mousedown(l,f),this.mousePitch&&this.mousePitch.mousedown(l,f),$()}move(l,f){const y=this.map,x=this.mouseRotate.mousemoveWindow(l,f),T=x&&x.bearingDelta;if(T&&y.setBearing(y.getBearing()+T),this.mousePitch){const M=this.mousePitch.mousemoveWindow(l,f),I=M&&M.pitchDelta;I&&y.setPitch(y.getPitch()+I)}}off(){const l=this.element;l.removeEventListener("mousedown",this.mousedown),l.removeEventListener("touchstart",this.touchstart,{passive:!1}),l.removeEventListener("touchmove",this.touchmove),l.removeEventListener("touchend",this.touchend),l.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){N(),o.window.removeEventListener("mousemove",this.mousemove),o.window.removeEventListener("mouseup",this.mouseup)}mousedown(l){this.down(o.extend({},l,{ctrlKey:!0,preventDefault:()=>l.preventDefault()}),q(this.element,l)),o.window.addEventListener("mousemove",this.mousemove),o.window.addEventListener("mouseup",this.mouseup)}mousemove(l){this.move(l,q(this.element,l))}mouseup(l){this.mouseRotate.mouseupWindow(l),this.mousePitch&&this.mousePitch.mouseupWindow(l),this.offTemp()}touchstart(l){l.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=Y(this.element,l.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>l.preventDefault()},this._startPos))}touchmove(l){l.targetTouches.length!==1?this.reset():(this._lastPos=Y(this.element,l.targetTouches)[0],this.move({preventDefault:()=>l.preventDefault()},this._lastPos))}touchend(l){l.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const k0={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},D0={maxWidth:100,unit:"metric"},L0={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},Ul={version:o.version,supported:b,setRTLTextPlugin:o.setRTLTextPlugin,getRTLTextPluginStatus:o.getRTLTextPluginStatus,Map:class extends z1{constructor(m){if(o.LivePerformanceUtils.mark(o.PerformanceMarkers.create),(m=o.extend({},f3,m)).minZoom!=null&&m.maxZoom!=null&&m.minZoom>m.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(m.minPitch!=null&&m.maxPitch!=null&&m.minPitch>m.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(m.minPitch!=null&&m.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(m.maxPitch!=null&&m.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(m.antialias&&o.isSafariWithAntialiasingBug(o.window)&&(m.antialias=!1,o.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Bl(m.minZoom,m.maxZoom,m.minPitch,m.maxPitch,m.renderWorldCopies),m),this._interactive=m.interactive,this._minTileCacheSize=m.minTileCacheSize,this._maxTileCacheSize=m.maxTileCacheSize,this._failIfMajorPerformanceCaveat=m.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=m.preserveDrawingBuffer,this._antialias=m.antialias,this._useWebGL2=m.useWebGL2,this._trackResize=m.trackResize,this._bearingSnap=m.bearingSnap,this._refreshExpiredTiles=m.refreshExpiredTiles,this._fadeDuration=m.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=m.crossSourceCollisions,this._collectResourceTiming=m.collectResourceTiming,this._optimizeForTerrain=m.optimizeForTerrain,this._language=this._parseLanguage(m.language),this._worldview=m.worldview,this._renderTaskQueue=new C0,this._domRenderTaskQueue=new C0,this._controls=[],this._markers=[],this._popups=[],this._mapId=o.uniqueId(),this._locale=o.extend({},h3,m.locale),this._clickTolerance=m.clickTolerance,this._cooperativeGestures=m.cooperativeGestures,this._performanceMetricsCollection=m.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new O0(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new o.RequestManager(m.transformRequest,m.accessToken,m.testMode),this._silenceAuthErrors=!!m.testMode,typeof m.container=="string"){if(this._container=o.window.document.getElementById(m.container),!this._container)throw new Error(`Container '${m.container}' not found.`)}else{if(!(m.container instanceof o.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=m.container}if(this._container.childNodes.length>0&&o.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),m.maxBounds&&this.setMaxBounds(m.maxBounds),o.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),o.window!==void 0&&(o.window.addEventListener("online",this._onWindowOnline,!1),o.window.addEventListener("resize",this._onWindowResize,!1),o.window.addEventListener("orientationchange",this._onWindowResize,!1),o.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),o.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new la(this,m),this._localFontFamily=m.localFontFamily,this._localIdeographFontFamily=m.localIdeographFontFamily,m.style&&this.setStyle(m.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),m.projection&&this.setProjection(m.projection),this._hash=m.hash&&new v0(typeof m.hash=="string"&&m.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch}),m.bounds&&(this.resize(),this.fitBounds(m.bounds,o.extend({},m.fitBoundsOptions,{duration:0})))),this.resize(),m.attributionControl&&this.addControl(new Rt({customAttribution:m.customAttribution})),this._logoControl=new M0,this.addControl(this._logoControl,m.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",l=>{this._update(l.dataType==="style"),this.fire(new o.Event(`${l.dataType}data`,l))}),this.on("dataloading",l=>{this.fire(new o.Event(`${l.dataType}dataloading`,l))})}_getMapId(){return this._mapId}addControl(m,l){if(l===void 0&&(l=m.getDefaultPosition?m.getDefaultPosition():"top-right"),!m||!m.onAdd)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const f=m.onAdd(this);this._controls.push(m);const y=this._controlPositions[l];return l.indexOf("bottom")!==-1?y.insertBefore(f,y.firstChild):y.appendChild(f),this}removeControl(m){if(!m||!m.onRemove)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const l=this._controls.indexOf(m);return l>-1&&this._controls.splice(l,1),m.onRemove(this),this}hasControl(m){return this._controls.indexOf(m)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(m){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const l=!this._moving;return l&&this.fire(new o.Event("movestart",m)).fire(new o.Event("move",m)),this.fire(new o.Event("resize",m)),l&&this.fire(new o.Event("moveend",m)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(m){return this.transform.setMaxBounds(o.LngLatBounds.convert(m)),this._update()}setMinZoom(m){if((m=m??-2)>=-2&&m<=this.transform.maxZoom)return this.transform.minZoom=m,this._update(),this.getZoom()<m?this.setZoom(m):this.fire(new o.Event("zoomstart")).fire(new o.Event("zoom")).fire(new o.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(m){if((m=m??22)>=this.transform.minZoom)return this.transform.maxZoom=m,this._update(),this.getZoom()>m?this.setZoom(m):this.fire(new o.Event("zoomstart")).fire(new o.Event("zoom")).fire(new o.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(m){if((m=m??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(m>=0&&m<=this.transform.maxPitch)return this.transform.minPitch=m,this._update(),this.getPitch()<m?this.setPitch(m):this.fire(new o.Event("pitchstart")).fire(new o.Event("pitch")).fire(new o.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(m){if((m=m??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(m>=this.transform.minPitch)return this.transform.maxPitch=m,this._update(),this.getPitch()>m?this.setPitch(m):this.fire(new o.Event("pitchstart")).fire(new o.Event("pitch")).fire(new o.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(m){return this.transform.renderWorldCopies=m,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(m){return m==="auto"?o.window.navigator.language:Array.isArray(m)?m.length===0?void 0:m.map(l=>l==="auto"?o.window.navigator.language:l):m}setLanguage(m){const l=this._parseLanguage(m);if(!this.style||l===this._language)return this;this._language=l,this.style._reloadSources();for(const f of this._controls)f._setLanguage&&f._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(m){return this.style&&m!==this._worldview?(this._worldview=m,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(m){return this._lazyInitEmptyStyle(),m?typeof m=="string"&&(m={name:m}):m=null,this._useExplicitProjection=!!m,this._prioritizeAndUpdateProjection(m,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const m=this.transform,l=m.projection.name;let f;l==="globe"&&m.zoom>=o.GLOBE_ZOOM_THRESHOLD_MAX?(m.setMercatorFromTransition(),f=!0):l==="mercator"&&m.zoom<o.GLOBE_ZOOM_THRESHOLD_MAX&&(m.setProjection({name:"globe"}),f=!0),f&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(m,l){return this._updateProjection(m||l||{name:"mercator"})}_updateProjection(m){let l;if(l=m.name==="globe"&&this.transform.zoom>=o.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(m),this.style.applyProjectionUpdate(),l){this.painter.clearBackgroundTiles();for(const f in this.style._sourceCaches)this.style._sourceCaches[f].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(m){return this.transform.locationPoint3D(o.LngLat.convert(m))}unproject(m){return this.transform.pointLocation3D(o.Point.convert(m))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(m,l,f){if(m==="mouseenter"||m==="mouseover"){let y=!1;const x=M=>{const I=l.filter(B=>this.getLayer(B)),k=I.length?this.queryRenderedFeatures(M.point,{layers:I}):[];k.length?y||(y=!0,f.call(this,new Yn(m,this,M.originalEvent,{features:k}))):y=!1},T=()=>{y=!1};return{layers:new Set(l),listener:f,delegates:{mousemove:x,mouseout:T}}}if(m==="mouseleave"||m==="mouseout"){let y=!1;const x=M=>{const I=l.filter(k=>this.getLayer(k));(I.length?this.queryRenderedFeatures(M.point,{layers:I}):[]).length?y=!0:y&&(y=!1,f.call(this,new Yn(m,this,M.originalEvent)))},T=M=>{y&&(y=!1,f.call(this,new Yn(m,this,M.originalEvent)))};return{layers:new Set(l),listener:f,delegates:{mousemove:x,mouseout:T}}}{const y=x=>{const T=l.filter(I=>this.getLayer(I)),M=T.length?this.queryRenderedFeatures(x.point,{layers:T}):[];M.length&&(x.features=M,f.call(this,x),delete x.features)};return{layers:new Set(l),listener:f,delegates:{[m]:y}}}}on(m,l,f){if(f===void 0)return super.on(m,l);Array.isArray(l)||(l=[l]);const y=this._createDelegatedListener(m,l,f);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[m]=this._delegatedListeners[m]||[],this._delegatedListeners[m].push(y);for(const x in y.delegates)this.on(x,y.delegates[x]);return this}once(m,l,f){if(f===void 0)return super.once(m,l);Array.isArray(l)||(l=[l]);const y=this._createDelegatedListener(m,l,f);for(const x in y.delegates)this.once(x,y.delegates[x]);return this}off(m,l,f){if(f===void 0)return super.off(m,l);l=new Set(Array.isArray(l)?l:[l]);const y=(T,M)=>{if(T.size!==M.size)return!1;for(const I of T)if(!M.has(I))return!1;return!0},x=this._delegatedListeners?this._delegatedListeners[m]:void 0;return x&&(T=>{for(let M=0;M<T.length;M++){const I=T[M];if(I.listener===f&&y(I.layers,l)){for(const k in I.delegates)this.off(k,I.delegates[k]);return T.splice(M,1),this}}})(x),this}queryRenderedFeatures(m,l){return this.style?(l!==void 0||m===void 0||m instanceof o.Point||Array.isArray(m)||(l=m,m=void 0),this.style.queryRenderedFeatures(m=m||[[0,0],[this.transform.width,this.transform.height]],l=l||{},this.transform)):[]}querySourceFeatures(m,l){return this.style.querySourceFeatures(m,l)}isPointOnSurface(m){const{name:l}=this.transform.projection;return l!=="globe"&&l!=="mercator"&&o.warnOnce(`${l} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(o.Point.convert(m))}setStyle(m,l){return(l=o.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},l)).diff!==!1&&l.localIdeographFontFamily===this._localIdeographFontFamily&&l.localFontFamily===this._localFontFamily&&this.style&&m?(this._diffStyle(m,l),this):(this._localIdeographFontFamily=l.localIdeographFontFamily,this._localFontFamily=l.localFontFamily,this._updateStyle(m,l))}_getUIString(m){const l=this._locale[m];if(l==null)throw new Error(`Missing UI string '${m}'`);return l}_updateStyle(m,l){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),m&&(this.style=new aa(this,l||{}),this.style.setEventedParent(this,{style:this.style}),typeof m=="string"?this.style.loadURL(m):this.style.loadJSON(m)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new aa(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(m,l){if(typeof m=="string"){const f=this._requestManager.normalizeStyleURL(m),y=this._requestManager.transformRequest(f,o.ResourceType.Style);o.getJSON(y,(x,T)=>{x?this.fire(new o.ErrorEvent(x)):T&&this._updateDiff(T,l)})}else typeof m=="object"&&this._updateDiff(m,l)}_updateDiff(m,l){try{this.style.setState(m)&&this._update(!0)}catch(f){o.warnOnce(`Unable to perform style diff: ${f.message||f.error||f}.  Rebuilding the style from scratch.`),this._updateStyle(m,l)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(o.warnOnce("There is no style added to the map."),!1)}addSource(m,l){return this._lazyInitEmptyStyle(),this.style.addSource(m,l),this._update(!0)}isSourceLoaded(m){return!!this.style&&this.style._isSourceCacheLoaded(m)}areTilesLoaded(){const m=this.style&&this.style._sourceCaches;for(const l in m){const f=m[l]._tiles;for(const y in f){const x=f[y];if(x.state!=="loaded"&&x.state!=="errored")return!1}}return!0}addSourceType(m,l,f){this._lazyInitEmptyStyle(),this.style.addSourceType(m,l,f)}removeSource(m){return this.style.removeSource(m),this._updateTerrain(),this._update(!0)}getSource(m){return this.style.getSource(m)}addImage(m,l,{pixelRatio:f=1,sdf:y=!1,stretchX:x,stretchY:T,content:M}={}){if(this._lazyInitEmptyStyle(),l instanceof o.window.HTMLImageElement||o.window.ImageBitmap&&l instanceof o.window.ImageBitmap){const{width:I,height:k,data:B}=o.exported.getImageData(l);this.style.addImage(m,{data:new o.RGBAImage({width:I,height:k},B),pixelRatio:f,stretchX:x,stretchY:T,content:M,sdf:y,version:0})}else if(l.width===void 0||l.height===void 0)this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:I,height:k}=l,B=l;this.style.addImage(m,{data:new o.RGBAImage({width:I,height:k},new Uint8Array(B.data)),pixelRatio:f,stretchX:x,stretchY:T,content:M,sdf:y,version:0,userImage:B}),B.onAdd&&B.onAdd(this,m)}}updateImage(m,l){const f=this.style.getImage(m);if(!f)return void this.fire(new o.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const y=l instanceof o.window.HTMLImageElement||o.window.ImageBitmap&&l instanceof o.window.ImageBitmap?o.exported.getImageData(l):l,{width:x,height:T}=y;x!==void 0&&T!==void 0?x===f.data.width&&T===f.data.height?(f.data.replace(y.data,!(l instanceof o.window.HTMLImageElement||o.window.ImageBitmap&&l instanceof o.window.ImageBitmap)),this.style.updateImage(m,f)):this.fire(new o.ErrorEvent(new Error(`The width and height of the updated image (${x}, ${T})
                must be that same as the previous version of the image
                (${f.data.width}, ${f.data.height})`))):this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(m){return m?!!this.style.getImage(m):(this.fire(new o.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(m){this.style.removeImage(m)}loadImage(m,l){o.getImage(this._requestManager.transformRequest(m,o.ResourceType.Image),(f,y)=>{l(f,y instanceof o.window.HTMLImageElement?o.exported.getImageData(y):y)})}listImages(){return this.style.listImages()}addLayer(m,l){return this._lazyInitEmptyStyle(),this.style.addLayer(m,l),this._update(!0)}moveLayer(m,l){return this.style.moveLayer(m,l),this._update(!0)}removeLayer(m){return this.style.removeLayer(m),this._update(!0)}getLayer(m){return this.style.getLayer(m)}setLayerZoomRange(m,l,f){return this.style.setLayerZoomRange(m,l,f),this._update(!0)}setFilter(m,l,f={}){return this.style.setFilter(m,l,f),this._update(!0)}getFilter(m){return this.style.getFilter(m)}setPaintProperty(m,l,f,y={}){return this.style.setPaintProperty(m,l,f,y),this._update(!0)}getPaintProperty(m,l){return this.style.getPaintProperty(m,l)}setLayoutProperty(m,l,f,y={}){return this.style.setLayoutProperty(m,l,f,y),this._update(!0)}getLayoutProperty(m,l){return this.style.getLayoutProperty(m,l)}setLight(m,l={}){return this._lazyInitEmptyStyle(),this.style.setLight(m,l),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(m){return this._lazyInitEmptyStyle(),!m&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(m),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(m){return this._lazyInitEmptyStyle(),this.style.setFog(m),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(m){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(o.LngLat.convert(m),this.transform):0}setFeatureState(m,l){return this.style.setFeatureState(m,l),this._update()}removeFeatureState(m,l){return this.style.removeFeatureState(m,l),this._update()}getFeatureState(m){return this.style.getFeatureState(m)}_updateContainerDimensions(){if(!this._container)return;const m=this._container.getBoundingClientRect().width||400,l=this._container.getBoundingClientRect().height||300;let f,y,x,T=this._container;for(;T&&(!y||!x);){const M=o.window.getComputedStyle(T).transform;M&&M!=="none"&&(f=M.match(/matrix.*\((.+)\)/)[1].split(", "),f[0]&&f[0]!=="0"&&f[0]!=="1"&&(y=f[0]),f[3]&&f[3]!=="0"&&f[3]!=="1"&&(x=f[3])),T=T.parentElement}this._containerWidth=y?Math.abs(m/y):m,this._containerHeight=x?Math.abs(l/x):l}_detectMissingCSS(){o.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&o.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const m=this._container;m.classList.add("mapboxgl-map"),(this._missingCSSCanary=C("div","mapboxgl-canary",m)).style.visibility="hidden",this._detectMissingCSS();const l=this._canvasContainer=C("div","mapboxgl-canvas-container",m);this._interactive&&l.classList.add("mapboxgl-interactive"),this._canvas=C("canvas","mapboxgl-canvas",l),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const f=this._controlContainer=C("div","mapboxgl-control-container",m),y=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(x=>{y[x]=C("div",`mapboxgl-ctrl-${x}`,f)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(m,l){const f=o.exported.devicePixelRatio||1;this._canvas.width=f*Math.ceil(m),this._canvas.height=f*Math.ceil(l),this._canvas.style.width=`${m}px`,this._canvas.style.height=`${l}px`}_addMarker(m){this._markers.push(m)}_removeMarker(m){const l=this._markers.indexOf(m);l!==-1&&this._markers.splice(l,1)}_addPopup(m){this._popups.push(m)}_removePopup(m){const l=this._popups.indexOf(m);l!==-1&&this._popups.splice(l,1)}_setupPainter(){const m=o.extend({},b.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),l=this._useWebGL2&&this._canvas.getContext("webgl2",m),f=l||this._canvas.getContext("webgl",m)||this._canvas.getContext("experimental-webgl",m);f?(this._useWebGL2&&!l&&o.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),o.storeAuthState(f,!0),this.painter=new zl(f,this.transform,!!l),this.on("data",y=>{y.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),o.exported$1.testSupport(f)):this.fire(new o.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(m){m.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new o.Event("webglcontextlost",{originalEvent:m}))}_contextRestored(m){this._setupPainter(),this.resize(),this._update(),this.fire(new o.Event("webglcontextrestored",{originalEvent:m}))}_onMapScroll(m){if(m.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(m){return this.style?(this._styleDirty=this._styleDirty||m,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(m){return this._update(),this._renderTaskQueue.add(m)}_cancelRenderFrame(m){this._renderTaskQueue.remove(m)}_requestDomTask(m){!this.loaded()||this.loaded()&&!this.isMoving()?m():this._domRenderTaskQueue.add(m)}_render(m){let l;const f=this.painter.context.extTimerQuery,y=o.exported.now();if(this.listens("gpu-timing-frame")&&(l=f.createQueryEXT(),f.beginQueryEXT(f.TIME_ELAPSED_EXT,l)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],o.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],o.window.performance.now())),this._renderTaskQueue.run(m),this._domRenderTaskQueue.run(m),this._removed)return;this._updateProjectionTransition();const x=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const I=this.transform.zoom,k=this.transform.pitch,B=o.exported.now(),R=new o.EvaluationParameters(I,{now:B,fadeDuration:x,pitch:k,transition:this.style.getTransition()});this.style.update(R)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let T=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),T=this._updateAverageElevation(y),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):T=this._updateAverageElevation(y),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,x,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:x,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new o.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new o.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),l){const I=o.exported.now()-y;f.endQueryEXT(f.TIME_ELAPSED_EXT,l),setTimeout(()=>{const k=f.getQueryObjectEXT(l,f.QUERY_RESULT_EXT)/1e6;f.deleteQueryEXT(l),this.fire(new o.Event("gpu-timing-frame",{cpuTime:I,gpuTime:k})),o.window.performance.mark("frame-gpu",{startTime:y,detail:{gpuTime:k}})},50)}if(this.listens("gpu-timing-layer")){const I=this.painter.collectGpuTimers();setTimeout(()=>{const k=this.painter.queryGpuTimers(I);this.fire(new o.Event("gpu-timing-layer",{layerTimes:k}))},50)}if(this.listens("gpu-timing-deferred-render")){const I=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const k=this.painter.queryGpuTimeDeferredRender(I);this.fire(new o.Event("gpu-timing-deferred-render",{gpuTime:k}))},50)}const M=this._sourcesDirty||this._styleDirty||this._placementDirty||T;if(M||this._repaint)this.triggerRepaint();else{const I=!this.isMoving()&&this.loaded();if(I&&(T=this._updateAverageElevation(y,!0)),T)this.triggerRepaint();else if(this._triggerFrame(!1),I&&(this.fire(new o.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const k=this._calculateSpeedIndex();this.fire(new o.Event("speedindexcompleted",{speedIndex:k})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||M||(this._fullyLoaded=!0,o.LivePerformanceUtils.mark(o.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&o.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(m){for(const l of this._markers)m&&!this.getRenderWorldCopies()&&(l._lngLat=l._lngLat.wrap()),l._update();for(const l of this._popups)!m||this.getRenderWorldCopies()||l._trackPointer||(l._lngLat=l._lngLat.wrap()),l._update()}_updateAverageElevation(m,l=!1){const f=y=>(this.transform.averageElevation=y,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&f(0);if((l||m-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(m)){const y=this.transform.averageElevation;let x=this.transform.sampleAverageElevation(),T=!1;this.transform.elevation&&(T=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(x)?x=0:this._averageElevationLastSampledAt=m;const M=Math.abs(y-x);if(M>1){if(this._isInitialLoad||T)return this._averageElevation.jumpTo(x),f(x);this._averageElevation.easeTo(x,m,300)}else if(M>1e-4)return this._averageElevation.jumpTo(x),f(x)}return!!this._averageElevation.isEasing(m)&&f(this._averageElevation.getValue(m))}_authenticate(){o.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,m=>{if(m&&(m.message===o.AUTH_ERR_MSG||m.status===401)){const l=this.painter.context.gl;o.storeAuthState(l,!1),this._logoControl instanceof M0&&this._logoControl._updateLogo(),l&&l.clear(l.DEPTH_BUFFER_BIT|l.COLOR_BUFFER_BIT|l.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new o.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),o.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const m=this._isDragging();this.painter.updateTerrain(this.style,m)}_calculateSpeedIndex(){const m=this.painter.canvasCopy(),l=this.painter.getCanvasCopiesAndTimestamps();l.timeStamps.push(performance.now());const f=this.painter.context.gl,y=f.createFramebuffer();function x(T){f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,T,0);const M=new Uint8Array(f.drawingBufferWidth*f.drawingBufferHeight*4);return f.readPixels(0,0,f.drawingBufferWidth,f.drawingBufferHeight,f.RGBA,f.UNSIGNED_BYTE,M),M}return f.bindFramebuffer(f.FRAMEBUFFER,y),this._canvasPixelComparison(x(m),l.canvasCopies.map(x),l.timeStamps)}_canvasPixelComparison(m,l,f){let y=f[1]-f[0];const x=m.length/4;for(let T=0;T<l.length;T++){const M=l[T];let I=0;for(let k=0;k<M.length;k+=4)M[k]===m[k]&&M[k+1]===m[k+1]&&M[k+2]===m[k+2]&&M[k+3]===m[k+3]&&(I+=1);y+=(f[T+2]-f[T+1])*(1-I/x)}return y}remove(){this._hash&&this._hash.remove();for(const l of this._controls)l.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),o.window!==void 0&&(o.window.removeEventListener("resize",this._onWindowResize,!1),o.window.removeEventListener("orientationchange",this._onWindowResize,!1),o.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),o.window.removeEventListener("online",this._onWindowOnline,!1),o.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const m=this.painter.context.gl.getExtension("WEBGL_lose_context");m&&m.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),o.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new o.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(m){this._renderNextFrame=this._renderNextFrame||m,this.style&&!this._frame&&(this._frame=o.exported.frame(l=>{const f=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,f&&this._render(l)}))}_preloadTiles(m){const l=this.style?Object.values(this.style._sourceCaches):[];return o.asyncAll(l,(f,y)=>f._preloadTiles(m,y),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(m){this._trackResize&&this.resize({originalEvent:m})._update()}_onVisibilityChange(){o.window.document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(m){this._showTileBoundaries!==m&&(this._showTileBoundaries=m,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(m){this._showTerrainWireframe!==m&&(this._showTerrainWireframe=m,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(m){this._speedIndexTiming!==m&&(this._speedIndexTiming=m,this._update())}get showPadding(){return!!this._showPadding}set showPadding(m){this._showPadding!==m&&(this._showPadding=m,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(m){this._showCollisionBoxes!==m&&(this._showCollisionBoxes=m,m?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(m){this._showOverdrawInspector!==m&&(this._showOverdrawInspector=m,this._update())}get repaint(){return!!this._repaint}set repaint(m){this._repaint!==m&&(this._repaint=m,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(m){this._vertices=m,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(m){this._showTileAABBs!==m&&(this._showTileAABBs=m,m&&this._update())}_setCacheLimits(m,l){o.setCacheLimits(m,l)}get version(){return o.version}},NavigationControl:class{constructor(m){this.options=o.extend({},o7,m),this._container=C("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",l=>l.preventDefault()),this.options.showZoom&&(o.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",l=>{this._map&&this._map.zoomIn({},{originalEvent:l})}),C("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",l=>{this._map&&this._map.zoomOut({},{originalEvent:l})}),C("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(o.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",l=>{const f=this._map;f&&(this.options.visualizePitch?f.resetNorthPitch({},{originalEvent:l}):f.resetNorth({},{originalEvent:l}))}),this._compassIcon=C("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const m=this._map;if(!m)return;const l=m.getZoom(),f=l===m.getMaxZoom(),y=l===m.getMinZoom();this._zoomInButton.disabled=f,this._zoomOutButton.disabled=y,this._zoomInButton.setAttribute("aria-disabled",f.toString()),this._zoomOutButton.setAttribute("aria-disabled",y.toString())}_rotateCompassArrow(){const m=this._map;if(!m)return;const l=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(m.transform.pitch*(Math.PI/180)),.5)}) rotateX(${m.transform.pitch}deg) rotateZ(${m.transform.angle*(180/Math.PI)}deg)`:`rotate(${m.transform.angle*(180/Math.PI)}deg)`;m._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=l)})}onAdd(m){return this._map=m,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),m.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&m.on("pitch",this._rotateCompassArrow),m.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new a7(m,this._compass,this.options.visualizePitch)),this._container}onRemove(){const m=this._map;m&&(this._container.remove(),this.options.showZoom&&m.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&m.off("pitch",this._rotateCompassArrow),m.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(m,l){const f=C("button",m,this._container);return f.type="button",f.addEventListener("click",l),f}_setButtonTitle(m,l){if(!this._map)return;const f=this._map._getUIString(`NavigationControl.${l}`);m.setAttribute("aria-label",f),m.firstElementChild&&m.firstElementChild.setAttribute("title",f)}},GeolocateControl:class extends o.Evented{constructor(m){super(),this.options=o.extend({geolocation:o.window.navigator.geolocation},k0,m),o.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Fl(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(m){return this._map=m,this._container=C("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(m){const l=(f=!!this.options.geolocation)=>{this._supportsGeolocation=f,m(f)};this._supportsGeolocation!==void 0?m(this._supportsGeolocation):o.window.navigator.permissions!==void 0?o.window.navigator.permissions.query({name:"geolocation"}).then(f=>l(f.state!=="denied")).catch(()=>l()):l()}_isOutOfMapMaxBounds(m){const l=this._map.getMaxBounds(),f=m.coords;return!!l&&(f.longitude<l.getWest()||f.longitude>l.getEast()||f.latitude<l.getSouth()||f.latitude>l.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(m){if(this._map){if(this._isOutOfMapMaxBounds(m))return this._setErrorState(),this.fire(new o.Event("outofmaxbounds",m)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=m,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(m),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(m),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("geolocate",m)),this._finish()}}_updateCamera(m){const l=new o.LngLat(m.coords.longitude,m.coords.latitude),f=m.coords.accuracy,y=this._map.getBearing(),x=o.extend({bearing:y},this.options.fitBoundsOptions);this._map.fitBounds(l.toBounds(f),x,{geolocateSource:!0})}_updateMarker(m){if(m){const l=new o.LngLat(m.coords.longitude,m.coords.latitude);this._accuracyCircleMarker.setLngLat(l).addTo(this._map),this._userLocationDotMarker.setLngLat(l).addTo(this._map),this._accuracy=m.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const m=this._map.transform,l=o.mercatorZfromAltitude(1,m._center.lat)*m.worldSize,f=Math.ceil(2*this._accuracy*l);this._circleElement.style.width=`${f}px`,this._circleElement.style.height=`${f}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(m){if(this._map){if(this.options.trackUserLocation)if(m.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(m.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("error",m)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(m){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",l=>l.preventDefault()),this._geolocateButton=C("button","mapboxgl-ctrl-geolocate",this._container),C("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",m===!1){o.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l)}else{const l=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=C("div","mapboxgl-user-location"),this._dotElement.appendChild(C("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(C("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Ct({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=C("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ct({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",l=>{l.geolocateSource||this._watchState!=="ACTIVE_LOCK"||l.originalEvent&&l.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new o.Event("trackuserlocationend")))})}}_onDeviceOrientation(m){this._userLocationDotMarker&&(m.webkitCompassHeading?this._heading=m.webkitCompassHeading:m.absolute===!0&&(this._heading=-1*m.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return o.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new o.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let m;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(m={maximumAge:6e5,timeout:0},this._noTimeout=!0):(m=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,m),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const m=()=>{o.window.addEventListener("ondeviceorientationabsolute"in o.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};o.window.DeviceMotionEvent!==void 0&&typeof o.window.DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(l=>{l==="granted"&&m()}).catch(console.error):m()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),o.window.removeEventListener("deviceorientation",this._onDeviceOrientation),o.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Rt,ScaleControl:class{constructor(m){this.options=o.extend({},D0,m),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),o.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const m=this.options.maxWidth||100,l=this._map,f=l._containerHeight/2,y=l._containerWidth/2-m/2,x=l.unproject([y,f]),T=l.unproject([y+m,f]),M=x.distanceTo(T);if(this.options.unit==="imperial"){const I=3.2808*M;I>5280?this._setScale(m,I/5280,"mile"):this._setScale(m,I,"foot")}else this.options.unit==="nautical"?this._setScale(m,M/1852,"nautical-mile"):M>=1e3?this._setScale(m,M/1e3,"kilometer"):this._setScale(m,M,"meter")}_setScale(m,l,f){this._map._requestDomTask(()=>{const y=function(T){const M=Math.pow(10,`${Math.floor(T)}`.length-1);let I=T/M;return I=I>=10?10:I>=5?5:I>=3?3:I>=2?2:I>=1?1:function(k){const B=Math.pow(10,Math.ceil(-Math.log(k)/Math.LN10));return Math.round(k*B)/B}(I),M*I}(l),x=y/l;this._container.innerHTML=this._isNumberFormatSupported&&f!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:f}).format(y):`${y}&nbsp;${L0[f]}`,this._container.style.width=m*x+"px"})}onAdd(m){return this._map=m,this._language=m.getLanguage(),this._container=C("div","mapboxgl-ctrl mapboxgl-ctrl-scale",m.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(m){this._language=m,this._update()}setUnit(m){this.options.unit=m,this._update()}},FullscreenControl:class{constructor(m){this._fullscreen=!1,m&&m.container&&(m.container instanceof o.window.HTMLElement?this._container=m.container:o.warnOnce("Full screen control 'container' must be a DOM element.")),o.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in o.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in o.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(m){return this._map=m,this._container||(this._container=this._map.getContainer()),this._controlContainer=C("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",o.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,o.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!o.window.document.fullscreenEnabled&&!o.window.document.webkitFullscreenEnabled)}_setupUI(){const m=this._fullscreenButton=C("button","mapboxgl-ctrl-fullscreen",this._controlContainer);C("span","mapboxgl-ctrl-icon",m).setAttribute("aria-hidden","true"),m.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),o.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const m=this._getTitle();this._fullscreenButton.setAttribute("aria-label",m),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",m)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(o.window.document.fullscreenElement||o.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?o.window.document.exitFullscreen?o.window.document.exitFullscreen():o.window.document.webkitCancelFullScreen&&o.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends o.Evented{constructor(m){super(),this.options=o.extend(Object.create(I0),m),o.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(m&&m.className?m.className.trim().split(/\s+/):[])}addTo(m){return this._map&&this.remove(),this._map=m,this.options.closeOnClick&&m.on("preclick",this._onClose),this.options.closeOnMove&&m.on("move",this._onClose),m.on("remove",this.remove),this._update(),m._addPopup(this),this._focusFirstElement(),this._trackPointer?(m.on("mousemove",this._onMouseEvent),m.on("mouseup",this._onMouseEvent),m._canvasContainer.classList.add("mapboxgl-track-pointer")):m.on("move",this._update),this.fire(new o.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const m=this._map;return m&&(m.off("move",this._update),m.off("move",this._onClose),m.off("preclick",this._onClose),m.off("click",this._onClose),m.off("remove",this.remove),m.off("mousemove",this._onMouseEvent),m.off("mouseup",this._onMouseEvent),m.off("drag",this._onMouseEvent),m._canvasContainer&&m._canvasContainer.classList.remove("mapboxgl-track-pointer"),m._removePopup(this),this._map=void 0),this.fire(new o.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(m){this._lngLat=o.LngLat.convert(m),this._pos=null,this._trackPointer=!1,this._update();const l=this._map;return l&&(l.on("move",this._update),l.off("mousemove",this._onMouseEvent),l._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const m=this._map;return m&&(m.off("move",this._update),m.on("mousemove",this._onMouseEvent),m.on("drag",this._onMouseEvent),m._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(m){return this.setDOMContent(o.window.document.createTextNode(m))}setHTML(m){const l=o.window.document.createDocumentFragment(),f=o.window.document.createElement("body");let y;for(f.innerHTML=m;y=f.firstChild,y;)l.appendChild(y);return this.setDOMContent(l)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(m){return this.options.maxWidth=m,this._update(),this}setDOMContent(m){let l=this._content;if(l)for(;l.hasChildNodes();)l.firstChild&&l.removeChild(l.firstChild);else l=this._content=C("div","mapboxgl-popup-content",this._container||void 0);if(l.appendChild(m),this.options.closeButton){const f=this._closeButton=C("button","mapboxgl-popup-close-button",l);f.type="button",f.setAttribute("aria-label","Close popup"),f.setAttribute("aria-hidden","true"),f.innerHTML="&#215;",f.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(m){return this._classList.add(m),this._updateClassList(),this}removeClassName(m){return this._classList.delete(m),this._updateClassList(),this}setOffset(m){return this.options.offset=m,this._update(),this}toggleClassName(m){let l;return this._classList.delete(m)?l=!1:(this._classList.add(m),l=!0),this._updateClassList(),l}_onMouseEvent(m){this._update(m.point)}_getAnchor(m){if(this.options.anchor)return this.options.anchor;const l=this._map,f=this._container,y=this._pos;if(!l||!f||!y)return"bottom";const x=f.offsetWidth,T=f.offsetHeight,M=y.x<x/2,I=y.x>l.transform.width-x/2;if(y.y+m<T)return M?"top-left":I?"top-right":"top";if(y.y>l.transform.height-T){if(M)return"bottom-left";if(I)return"bottom-right"}return M?"left":I?"right":"bottom"}_updateClassList(){const m=this._container;if(!m)return;const l=[...this._classList];l.push("mapboxgl-popup"),this._anchor&&l.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&l.push("mapboxgl-popup-track-pointer"),m.className=l.join(" ")}_update(m){const l=this._map,f=this._content;if(!l||!this._lngLat&&!this._trackPointer||!f)return;let y=this._container;if(y||(y=this._container=C("div","mapboxgl-popup",l.getContainer()),this._tip=C("div","mapboxgl-popup-tip",y),y.appendChild(f)),this.options.maxWidth&&y.style.maxWidth!==this.options.maxWidth&&(y.style.maxWidth=this.options.maxWidth),l.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Nl(this._lngLat,this._pos,l.transform)),!this._trackPointer||m){const x=this._pos=this._trackPointer&&m?m:l.project(this._lngLat),T=c3(this.options.offset),M=this._anchor=this._getAnchor(T.y),I=c3(this.options.offset,M),k=x.add(I).round();l._requestDomTask(()=>{this._container&&M&&(this._container.style.transform=`${Vs[M]} translate(${k.x}px,${k.y}px)`)})}if(!this._marker&&l._showingGlobe()){const x=o.isLngLatBehindGlobe(l.transform,this._lngLat)?0:1;this._setOpacity(x)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const m=this._container.querySelector(i7);m&&m.focus()}_onClose(){this.remove()}_setOpacity(m){this._container&&(this._container.style.opacity=`${m}`),this._content&&(this._content.style.pointerEvents=m?"auto":"none")}},Marker:Ct,Style:aa,LngLat:o.LngLat,LngLatBounds:o.LngLatBounds,Point:o.Point,MercatorCoordinate:o.MercatorCoordinate,FreeCameraOptions:X2,Evented:o.Evented,config:o.config,prewarm:function(){mn().acquire(Vt)},clearPrewarmedResources:function(){const m=nr;m&&(m.isPreloaded()&&m.numActive()===1?(m.release(Vt),nr=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return o.config.ACCESS_TOKEN},set accessToken(m){o.config.ACCESS_TOKEN=m},get baseApiUrl(){return o.config.API_URL},set baseApiUrl(m){o.config.API_URL=m},get workerCount(){return Jt.workerCount},set workerCount(m){Jt.workerCount=m},get maxParallelImageRequests(){return o.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(m){o.config.MAX_PARALLEL_IMAGE_REQUESTS=m},clearStorage(m){o.clearTileCache(m)},workerUrl:"",workerClass:null,setNow:o.exported.setNow,restoreNow:o.exported.restoreNow};return Ul});var p=u;return p})})(cz);var fz=cz.exports;const l2e=Br(fz),u2e=Qy({__proto__:null,default:l2e},[fz]);export{E2e as B,epe as C,x2e as F,d2e as L,v2e as M,b2e as N,Kt as P,Ne as R,T2e as S,tl as T,K8 as W,lx as X,ux as Y,pV as _,Ig as a,y2e as b,_2e as c,w2e as d,S2e as e,Uf as f,m2e as g,h2e as h,Vw as i,c2e as j,f2e as k,p2e as p,qd as q,Pe as r,fN as u,g2e as w};
